var ecommerceDriver=function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(r,'a',r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=88)}([function(e,t,r){'use strict';r.d(t,'a',function(){return a});var o=r(1),n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=-1,t.title='',t}return n(t,e),t.prototype.mergeWithPartial=function(t){return e.prototype.mergeWithPartial.call(this,t)},t.matchObjects=function(e,t,r){var o;return function(e){e[e.Ok=0]='Ok',e[e.NotExists=1]='NotExists',e[e.Fail=2]='Fail'}(o||(o={})),r.reduce(function(r,n){var a=Object.keys(n)[0],i=n[a];return r===o.Ok?o.Ok:r===o.NotExists?'undefined'==typeof(t||{})[i]?o.NotExists:e[a]===t[i]?o.Ok:o.Fail:o.Fail},o.NotExists)===o.Ok},t.prototype.matchesPartial=function(e){return this.id===e.id||'undefined'==typeof e.id&&this.title===e.title},t}(o.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return n});var o=r(3),n=function(){function e(){}return e.prototype.clone=function(){return new this.constructor().mergeWithPartial(this)},e.prototype.validateModel=function(e){return!!e},e.prototype.mergeWithModel=function(t){var r=e.BuildFromModel(this,t);return e.typeSafeMerge(this,r)},e.prototype.mergeWithPartial=function(t){return e.typeSafeMerge(this,t)},e.BuildFromModel=function(e,t){if(!t)return null;var r=e.clone();return r.validateModel(t)?(r.init(t),r):null},e.Build=function(t,r,n){switch(n){case o.a.ExternalModel:return e.BuildFromModel(t,r);case o.a.PartialSelf:return e.BuildFromPartialSelf(t,r);default:throw'Unexpected ModelTreatment found!';}},e.BuildFromPartialSelf=function(t,r){return r?e.typeSafeMerge(t,r):null},e.typeSafeMerge=function(t,r){if(typeof r!=typeof t)return r;if(!t)return t;var n=function(e,t){return e===t||null!==e&&'object'==typeof e&&'function'==typeof e.equals&&e.equals(t)};return Object.keys(r||{}).forEach(function(a){if(!!t[a]&&'undefined'!=typeof t[a].pushMerged){var i=t[a];r[a].forEach(function(e){i.pushMerged(e,o.a.PartialSelf)})}else if(Array.isArray(t[a]))r[a].forEach(function(e){var r=JSON.stringify(e);null===t[a].find(function(e){return JSON.stringify(e)===r})&&t[a].push(e)});else if('undefined'!=typeof r[a]&&!n(t[a],r[a])&&('undefined'==typeof t[a]||null===t[a]||'undefined'==typeof t[a].subscribe))switch(!0){case null!==t[a]&&'object'==typeof t[a]:t[a]=e.typeSafeMerge(t[a],r[a]);break;default:t[a]=r[a];}}),t},e}()},function(e,t,r){'use strict';(function(o,n){var a,i,p='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(o,n){'object'===p(t)&&'undefined'!=typeof e?e.exports=n():(a=n,i='function'==typeof a?a.call(t,r,t,e):a,!(i!==void 0&&(e.exports=i)))})(void 0,function(){function e(e){var t='undefined'==typeof e?'undefined':p(e);return null!==e&&('object'===t||'function'===t)}function t(e){return'function'==typeof e}function r(){return'undefined'==typeof A?a():function(){A(i)}}function a(){var e=setTimeout;return function(){return e(i,1)}}function i(){for(var e=0;e<L;e+=2){var t=T[e],r=T[e+1];t(r),T[e]=void 0,T[e+1]=void 0}L=0}function s(e,t){var r=this,o=new this.constructor(l);void 0===o[z]&&x(o);var n=r._state;if(n){var a=arguments[n-1];j(function(){return w(n,o,a,r._result)})}else P(r,o,e,t);return o}function d(e){var t=this;if(e&&'object'===('undefined'==typeof e?'undefined':p(e))&&e.constructor===t)return e;var r=new t(l);return g(r,e),r}function l(){}function c(){return new TypeError('You cannot resolve a promise with itself')}function u(){return new TypeError('A promises callback cannot return that same promise.')}function y(e,t,r,o){try{e.call(t,r,o)}catch(t){return t}}function _(e,t,r){j(function(e){var o=!1,n=y(r,t,function(r){o||(o=!0,t===r?m(e,r):g(e,r))},function(t){o||(o=!0,v(e,t))},'Settle: '+(e._label||' unknown promise'));!o&&n&&(o=!0,v(e,n))},e)}function f(e,t){t._state===W?m(e,t._result):t._state===K?v(e,t._result):P(t,void 0,function(t){return g(e,t)},function(t){return v(e,t)})}function b(e,r,o){r.constructor===e.constructor&&o===s&&r.constructor.resolve===d?f(e,r):void 0===o?m(e,r):t(o)?_(e,r,o):m(e,r)}function g(t,r){if(t===r)v(t,c());else if(e(r)){var o;try{o=r.then}catch(e){return void v(t,e)}b(t,r,o)}else m(t,r)}function h(e){e._onerror&&e._onerror(e._result),O(e)}function m(e,t){e._state!==R||(e._result=t,e._state=W,0!==e._subscribers.length&&j(O,e))}function v(e,t){e._state!==R||(e._state=K,e._result=t,j(h,e))}function P(e,t,r,o){var n=e._subscribers,a=n.length;e._onerror=null,n[a]=t,n[a+W]=r,n[a+K]=o,0===a&&e._state&&j(O,e)}function O(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var o=void 0,n=void 0,a=e._result,p=0;p<t.length;p+=3)o=t[p],n=t[p+r],o?w(r,o,n,a):n(a);e._subscribers.length=0}}function w(e,r,o,n){var a,i,p=t(o),s=!0;if(p){try{a=o(n)}catch(t){s=!1,i=t}if(r===a)return void v(r,u())}else a=n;r._state!==R||(p&&s?g(r,a):!1==s?v(r,i):e===W?m(r,a):e===K&&v(r,a))}function E(t,e){try{e(function(e){g(t,e)},function(e){v(t,e)})}catch(r){v(t,r)}}function S(){return J++}function x(e){e[z]=J++,e._state=void 0,e._result=void 0,e._subscribers=[]}function C(){return new Error('Array Methods must be provided an Array')}function k(){throw new TypeError('You must pass a resolver function as the first argument to the promise constructor')}function I(){throw new TypeError('Failed to construct \'Promise\': Please use the \'new\' operator, this object constructor cannot be called as a function.')}var M=Array.isArray?Array.isArray:function(e){return'[object Array]'===Object.prototype.toString.call(e)};var D=M,L=0,A=void 0,B=void 0,j=function(e,t){T[L]=e,T[L+1]=t,L+=2,2==L&&(B?B(i):H())},F='undefined'==typeof window?void 0:window,q=F||{},U=q.MutationObserver||q.WebKitMutationObserver,N='undefined'==typeof self&&'undefined'!=typeof o&&'[object process]'==={}.toString.call(o),V='undefined'!=typeof Uint8ClampedArray&&'undefined'!=typeof importScripts&&'undefined'!=typeof MessageChannel,T=Array(1e3),H=void 0;H=N?function(){return function(){return o.nextTick(i)}}():U?function(){var e=0,t=new U(i),r=document.createTextNode('');return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():V?function(){var e=new MessageChannel;return e.port1.onmessage=i,function(){return e.port2.postMessage(0)}}():void 0!==F||0?a():function(){try{var e=Function('return this')().require('vertx');return A=e.runOnLoop||e.runOnContext,r()}catch(t){return a()}}();var z=Math.random().toString(36).substring(2),R=void 0,W=1,K=2,J=0,G=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(l),this.promise[z]||x(this.promise),D(t)?(this.length=t.length,this._remaining=t.length,this._result=Array(this.length),0===this.length?m(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&m(this.promise,this._result))):v(this.promise,C())}return e.prototype._enumerate=function(e){for(var t=0;this._state===R&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,o=r.resolve;if(o===d){var n=void 0,a=void 0,i=!1;try{n=e.then}catch(t){i=!0,a=t}if(n===s&&e._state!==R)this._settledAt(e._state,t,e._result);else if('function'!=typeof n)this._remaining--,this._result[t]=e;else if(r===Y){var p=new r(l);i?v(p,a):b(p,e,n),this._willSettleAt(p,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(o(e),t)},e.prototype._settledAt=function(e,t,r){var o=this.promise;o._state===R&&(this._remaining--,e===K?v(o,r):this._result[t]=r),0===this._remaining&&m(o,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;P(e,void 0,function(e){return r._settledAt(W,t,e)},function(e){return r._settledAt(K,t,e)})},e}(),Y=function(){function e(t){this[z]=S(),this._result=this._state=void 0,this._subscribers=[],l!==t&&('function'!=typeof t&&k(),this instanceof e?E(this,t):I())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var r=this,o=r.constructor;return t(e)?r.then(function(t){return o.resolve(e()).then(function(){return t})},function(t){return o.resolve(e()).then(function(){throw t})}):r.then(e,e)},e}();return Y.prototype.then=s,Y.all=function(e){return new G(this,e).promise},Y.race=function(e){var t=this;return D(e)?new t(function(r,o){for(var n=e.length,a=0;a<n;a++)t.resolve(e[a]).then(r,o)}):new t(function(e,t){return t(new TypeError('You must pass an array to race.'))})},Y.resolve=d,Y.reject=function(e){var t=this,r=new t(l);return v(r,e),r},Y._setScheduler=function(e){B=e},Y._setAsap=function(e){j=e},Y._asap=j,Y.polyfill=function(){var e;if('undefined'!=typeof n)e=n;else if('undefined'!=typeof self)e=self;else try{e=Function('return this')()}catch(t){throw new Error('polyfill failed because global object is unavailable in this environment')}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(t){}if('[object Promise]'===r&&!t.cast)return}e.Promise=Y},Y.Promise=Y,Y})}).call(t,r(15),r(16))},function(e,t,r){'use strict';r.d(t,'a',function(){return o}),r.d(t,'b',function(){return d});var o,n=r(4),a=r(1),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),p=this&&this.__decorate||function(e,t,o,n){var a,p=arguments.length,s=3>p?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;0<=r;r--)(a=e[r])&&(s=(3>p?a(s):3<p?a(t,o,s):a(t,o))||s);return 3<p&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__metadata||function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)};(function(e){e[e.ExternalModel=0]='ExternalModel',e[e.PartialSelf=1]='PartialSelf'})(o||(o={}));var d=function(e){function t(t,r){void 0===r&&(r=null);var o=e.call(this)||this;return o._owner=null,o.current=null,o._itemCreatorFactory=t,o._owner=r,o}return i(t,e),t.prototype.pushAndMoveCursor=function(e){return this.push(e),this.current=e},t.prototype.moveCursorTo=function(e){var t=this.indexOf(e);return 0<=t?this.current=this[t]:this.pushAndMoveCursor(e)},t.prototype.setCurrent=function(e){if(0<=e&&e<=this.length-1){var t=this[e];t&&(this.current=t)}else this.current=null},t.prototype.pushMerged=function(e,t,r){void 0===t&&(t=o.PartialSelf),void 0===r&&(r=!0);var n=this.findIndex(function(r){return t===o.ExternalModel?r.matchesModel(e):r.matchesPartial(e)});if(-1<n)return this[n]=t===o.ExternalModel?this[n].mergeWithModel(e):this[n].mergeWithPartial(e),this.moveCursorTo(this[n]),this[n];var i=a.a.Build(this._itemCreatorFactory(e,t),e,t);return void 0!==i.owner&&(i.owner=this._owner),r?this.pushAndMoveCursor(i):(this.push(i),i)},t.prototype.initByMerged=function(e,t){this.splice(0,this.length);var r=this;'undefined'==typeof e&&(e=[]),e.forEach(function(e){r.pushAndMoveCursor(r._itemCreatorFactory(e,t))})},t=p([Object(n.d)(),s('design:paramtypes',[Function,Object])],t),t}(Array)},function(e,t,r){'use strict';t.d=function(){return function(e){return function(t){function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var n=t.apply(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return a(r,t),r}(e)}},t.a=function(e){return function(){for(var t in i={},e)e.hasOwnProperty(t)&&(i[t]=function(e){var t=null;try{t=new e}catch(t){}return t}.bind(null,e[t],t))}},t.b=function(e){return function(t,r){Object.defineProperty(t,r,{get:function(){return i[e]()}})}},t.c=function(e){return function(t){return function(r){function i(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var p=this;try{p=r.apply(this,a)||this}catch(t){}return p.info=new n.a(o.a,e),window.Aurigma=window.Aurigma||{},window.Aurigma.EcommerceDriver=p.info,Object.setPrototypeOf(p,t.prototype),p}return a(i,r),i}(t)}};var o=r(18),n=r(19),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i={}},function(e,t,r){'use strict';var o=r(31);r.d(t,'a',function(){return o.a});var n=r(32);r.d(t,'b',function(){return n.a});var a=r(9);r.d(t,'c',function(){return a.a})},function(e,t,r){'use strict';/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,'__esModule',{value:!0});var o=r(23);t.DispatcherBase=o.DispatcherBase,t.DispatcherWrapper=o.DispatcherWrapper,t.EventListBase=o.EventListBase;var n=r(11);t.Subscription=n.Subscription},function(e,t,r){'use strict';/*!
 * Strongly Typed Events for TypeScript
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,'__esModule',{value:!0});var o=r(6);t.DispatcherBase=o.DispatcherBase,t.DispatcherWrapper=o.DispatcherWrapper,t.EventListBase=o.EventListBase,t.Subscription=o.Subscription;var n=r(25);t.EventDispatcher=n.EventDispatcher,t.EventHandlingBase=n.EventHandlingBase,t.EventList=n.EventList,t.NonUniformEventList=n.NonUniformEventList;var a=r(27);t.SimpleEventDispatcher=a.SimpleEventDispatcher,t.SimpleEventHandlingBase=a.SimpleEventHandlingBase,t.SimpleEventList=a.SimpleEventList,t.NonUniformSimpleEventList=a.NonUniformSimpleEventList;var i=r(29);t.SignalDispatcher=i.SignalDispatcher,t.SignalHandlingBase=i.SignalHandlingBase,t.SignalList=i.SignalList},function(e,t,r){'use strict';r.d(t,'a',function(){return o});var o=function(){function e(e,t,r,o){this.err=e,this.response=t,this.body=r,this.readyState=o,this.isFromCart=!1}return e.empty=function(){return new e(null,null,'')},e}()},function(e,t,r){'use strict';(function(e){r.d(t,'a',function(){return o});var o=function(){function t(){}return t.clone=function(e){if('object'!=typeof e)return e;if(!e)return e;var t=e instanceof Array?[]:{};for(var r in e)e.hasOwnProperty(r)&&(t[r]=this.clone(e[r]));return t},t.JSON_to_URLEncoded=function(e,t,r){if(void 0===t&&(t=null),void 0===r&&(r=[]),r=r||[],'object'==typeof e)for(var o in e)e.hasOwnProperty(o)&&this.JSON_to_URLEncoded(e[o],t?t+'['+o+']':o,r);else r.push(t+'='+encodeURIComponent(e));return r.join('&')},t.FormatPrice=function(e,t,r){if(null===e||void 0===e)return null;var o='number'==typeof e?e:parseFloat(e.replace(',','.').replace(/[^0-9\.]+/g,''));return o.toLocaleString(t,{style:'currency',currency:r})},t.loadJsonJsonp=function(t,r){return void 0===r&&(r={}),new e(function(e,o){var n='jsonp_callback_'+Math.round(1e5*Math.random());window[n]=function(t){delete window[n],document.body.removeChild(a);try{var r=JSON.parse(t);e(r)}catch(t){e(null)}},r&&Object.keys(r).forEach(function(e){t+=(0<=t.indexOf('?')?'&':'?')+e+'='+r[e]});var a=document.createElement('script');a.src=t+(0<=t.indexOf('?')?'&':'?')+'callback='+n,a.onerror=function(){o(arguments)},document.body.appendChild(a)})},t.ensureArrayLength=function(e,t){return e.length>=t?e:e.concat(Array(t-e.length))},Object.defineProperty(t,'guidRegex',{get:function(){return /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/},enumerable:!0,configurable:!0}),t.isNotEmptyString=function(e){return null!==e&&void 0!==e&&''!==e},t.stringOrNumberEquals=function(e,t){return null!==e&&void 0!==e&&null!==t&&void 0!==t&&e.toString()===t.toString()},t}()}).call(t,r(2).Promise)},function(e,t,r){'use strict';r.d(t,'a',function(){return a});var o=r(22),n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.a)},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}return e.prototype.execute=function(e,t,r){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var o=this.handler;e?setTimeout(function(){o.apply(t,r)},1):o.apply(t,r)}},e}();t.Subscription=r},function(e,t,r){'use strict';(function(e){r.d(t,'a',function(){return i});var o=r(7),n=r.n(o),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.callbacks=[],e}return a(r,t),r.prototype.subscribe=function(e){var t=this;return e&&this.callbacks.push(new o.Subscription(e,!1)),function(){t.unsubscribe(e)}},r.prototype.unsubscribe=function(e){if(e)for(var t=0;t<this.callbacks.length;t++)if(this.callbacks[t].handler===e){this.callbacks.splice(t,1);break}},r.prototype.dispatch=function(t,r){var o=this,n=this.callbacks.map(function(e){return o.executeCallback(e,t,r)});return e.all(n).then(function(){})},r.prototype.executeCallback=function(t,r,o){var n=t.handler.apply(this,[r,o]);return this.isPromise(n)?n:e.resolve()},r.prototype.isPromise=function(e){return!!e&&'function'==typeof e.then},r}(o.EventDispatcher)}).call(t,r(2).Promise)},function(e,t,r){'use strict';r.d(t,'a',function(){return o});var o=function(){return function(e,t){this.option=e,this.value=[],t&&(t instanceof Array?this.value=t:this.value.push(t))}}()},function(e,t,r){'use strict';r.d(t,'a',function(){return s});var o=r(4),n=r(8),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,o,n){var a,p=arguments.length,s=3>p?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;0<=r;r--)(a=e[r])&&(s=(3>p?a(s):3<p?a(t,o,s):a(t,o))||s);return 3<p&&s&&Object.defineProperty(t,o,s),s},p=this&&this.__metadata||function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){function t(t,r){var o=e.call(this,t)||this;return'undefined'!=typeof r&&(o.body=r.body,o.response=r.response),o}return a(t,e),t=i([Object(o.d)(),p('design:paramtypes',[String,n.a])],t),t}(Error)},function(e){'use strict';function t(){throw new Error('setTimeout has not been defined')}function r(){throw new Error('clearTimeout has not been defined')}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===t||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function n(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){_&&u&&(_=!1,u.length?y=u.concat(y):f=-1,y.length&&p())}function p(){if(!_){var e=o(a);_=!0;for(var t=y.length;t;){for(u=y,y=[];++f<t;)u&&u[f].run();f=-1,t=y.length}u=null,_=!1,n(e)}}function s(e,t){this.fun=e,this.array=t}function i(){}var d,l,c=e.exports={};(function(){try{d='function'==typeof setTimeout?setTimeout:t}catch(r){d=t}try{l='function'==typeof clearTimeout?clearTimeout:r}catch(t){l=r}})();var u,y=[],_=!1,f=-1;c.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new s(e,t)),1!==y.length||_||o(p)},s.prototype.run=function(){this.fun.apply(null,this.array)},c.title='browser',c.browser=!0,c.env={},c.argv=[],c.version='',c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.prependListener=i,c.prependOnceListener=i,c.listeners=function(){return[]},c.binding=function(){throw new Error('process.binding is not supported')},c.cwd=function(){return'/'},c.chdir=function(){throw new Error('process.chdir is not supported')},c.umask=function(){return 0}},function(e){'use strict';var t,r='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e};t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(o){'object'===('undefined'==typeof window?'undefined':r(window))&&(t=window)}e.exports=t},function(e,t,r){'use strict';r.d(t,'a',function(){return c});var o=r(1),n=r(3),a=r(4),i=r(0),p=r(9),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),d=this&&this.__decorate||function(e,t,o,n){var a,p=arguments.length,s=3>p?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;0<=r;r--)(a=e[r])&&(s=(3>p?a(s):3<p?a(t,o,s):a(t,o))||s);return 3<p&&s&&Object.defineProperty(t,o,s),s},l=this&&this.__metadata||function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.price=0,t.sku=null,t.owner=null,t._options=new n.b(function(e,r){return o.a.Build(t.optionCreateInstance,e,r)}),t._attributes=new n.b(function(e,r){return o.a.Build(t.attributeCreateInstance,e,r)},t),t}s(t,e),t.prototype.optionFactoryFromModel=function(e){return o.a.BuildFromModel(this.optionCreateInstance,e)},t.prototype.optionFactoryFromPartialSelf=function(e){return o.a.BuildFromPartialSelf(this.optionCreateInstance,e)},t.prototype.renderEditor=function(e){if(!this.owner)throw new Error('Product is created outside of the driver! You must initialize the owner property. ');return this.owner.editor.render(e,this.owner._additionalProductsPromises)},Object.defineProperty(t.prototype,'attributes',{get:function(){return this._attributes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'options',{get:function(){return this._options},enumerable:!0,configurable:!0}),t.prototype.updateProductOptionValue=function(e){var t=this.options.find(function(t){return t.title===e.option.title});t&&t.updateOptionValue(e.value)},t.prototype.addOrUpdateOption=function(e,t){var r=p.a.clone(e),o=this.options.find(function(e){return e.matchesModel(r)});if(r.values=r.values||[],null===o||void 0===o)r.values.forEach(function(e){e.props=e.props||{},e.props.merged=!0});else{for(var a,i=function(e){o.values.every(function(t){return!t.matchesPartial(e)})&&(e.props=e.props||{},e.props.merged=!0)},s=0,d=r.values;s<d.length;s++)a=d[s],i(a);e.values&&0<e.values.length&&!t&&o.values.some(function(t,r){return!t.matchesModel(e.values[r])})&&o.values.splice(0,o.values.length)}return this.options.pushMerged(r,n.a.PartialSelf)};var r,i;return d([Object(a.b)('Option'),l('design:type','function'==typeof(r='undefined'!=typeof TOption&&TOption)&&r||Object)],t.prototype,'optionCreateInstance',void 0),d([Object(a.b)('Attribute'),l('design:type','function'==typeof(i='undefined'!=typeof TAttribute&&TAttribute)&&i||Object)],t.prototype,'attributeCreateInstance',void 0),t}(i.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return o});var o='9.9.9';try{o='4.6.4'}catch(t){}},function(e,t,r){'use strict';r.d(t,'a',function(){return o});var o=function(){return function(e,t){this.version=e,this.platform=t}}()},function(e,t,r){'use strict';(function(e){r.d(t,'a',function(){return f});var o=r(21),n=r(1),a=r(8),i=r(10),p=r(7),s=r.n(p),d=r(14),l=r(12),c=r(5),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),y=this&&this.__awaiter||function(t,r,o,n){return new(o||(o=e))(function(e,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function p(e){try{s(n['throw'](e))}catch(t){a(t)}}function s(t){t.done?e(t.value):new o(function(e){e(t.value)}).then(i,p)}s((n=n.apply(t,r||[])).next())})},_=this&&this.__generator||function(e,r){function o(e){return function(t){return a([e,t])}}function a(o){if(n)throw new TypeError('Generator is already executing.');for(;d;)try{if(n=1,i&&(p=2&o[0]?i['return']:o[0]?i['throw']||((p=i['return'])&&p.call(i),0):i.next)&&!(p=p.call(i,o[1])).done)return p;switch((i=0,p)&&(o=[2&o[0],p.value]),o[0]){case 0:case 1:p=o;break;case 4:return d.label++,{value:o[1],done:!1};case 5:d.label++,i=o[1],o=[0];continue;case 7:o=d.ops.pop(),d.trys.pop();continue;default:if((p=d.trys,!(p=0<p.length&&p[p.length-1]))&&(6===o[0]||2===o[0])){d=0;continue}if(3===o[0]&&(!p||o[1]>p[0]&&o[1]<p[3])){d.label=o[1];break}if(6===o[0]&&d.label<p[1]){d.label=p[1],p=o;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(o);break}p[2]&&d.ops.pop(),d.trys.pop();continue;}o=r.call(e,d)}catch(t){o=[6,t],i=0}finally{n=p=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,i,p,s,d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},'function'==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},f=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e._product=null,e._quantity=1,e.data={},e.images=[],e.downloadUrls=[],e.choices=new o.a(e),e._discount=0,e._onSubmitting=new l.a,e._onSubmitted=new l.a,e._onPriceChanging=new p.EventDispatcher,e._onPriceChanged=new p.EventDispatcher,e._onSaving=new p.EventDispatcher,e._onSaved=new p.EventDispatcher,e._onError=new p.EventDispatcher,e._xhrDictionary={},e}return u(r,t),r.prototype.matchesModel=function(){return!1},r.prototype.matchesPartial=function(){return!1},r.prototype.equals=function(e){return this.product&&e.product?this.product.id===e.product.id&&this.quantity===e.quantity:null===this.product&&null===e.product},r.prototype._calculatePriceLocally=function(){if(!this._product)return 0;var e=this.choices.items.reduce(function(e,t){return e+t.value.reduce(function(e,t){return e+(t&&'string'!=typeof t?t.price||0:0)},0)},this.product.price);return e*this.quantity},r.prototype.init=function(e){Object.keys(e).forEach(function(t){'undefined'==typeof e[t]&&delete e[t]}),this._price='undefined'==typeof e.product?1:e.product.price,this._quantity='undefined'==typeof e.quantity?1:e.quantity,this._product='undefined'==typeof e.product?null:e.product,this._settings='undefined'==typeof e.settings?null===this._product?null:this._product.owner.settings:e.settings},Object.defineProperty(r.prototype,'product',{get:function(){return this._product},set:function(e){this._product=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'settings',{get:function(){return this._settings},set:function(e){this._settings=e},enumerable:!0,configurable:!0}),r.prototype.submit=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=''),y(this,void 0,void 0,function(){var r=this;return _(this,function(o){switch(o.label){case 0:return[4,this._onSubmitting.dispatch(this,function(){}())];case 1:return o.sent(),[2,this._submitInternal(t).then(function(t){return y(r,void 0,void 0,function(){return _(this,function(r){switch(r.label){case 0:return'string'==typeof t.body&&(t.body={status:t.body}),t.body.price=this.price,t.body.priceLocalized=this.priceLocalized,t.isFromCart=e,[4,this._onSubmitted.dispatch(this,t)];case 1:return r.sent(),[2,t];}})})}).catch(function(e){return r._onError.dispatch(r,e.err),e})];}})})},r.prototype.save=function(){var e=this;return this._onSaving.dispatch(this,function(){}()),this._saveProductInternal().then(function(t){return e._onSaved.dispatch(e,t),t}).catch(function(t){return e._onError.dispatch(e,t.err),t})},r.prototype.updatePrice=function(e){var t=this,r=new i.a;return r.old=e,r.updatePromise=this._updatePriceInternal().then(function(e){return r.new=t.price,r.newLocalized=t.priceLocalized,r.sku=t.product.sku,t._onPriceChanged.dispatch(t,r),e}).catch(function(e){return 0!==e.readyState&&void 0,t._onError.dispatch(t,e instanceof Error?e:e.err),e}),this._onPriceChanging.dispatch(this,r),r.updatePromise},Object.defineProperty(r.prototype,'quantity',{get:function(){return this._quantity},set:function(e){var t=this._quantity!==e;this._quantity=e,t&&this.updatePrice(this._price)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'price',{get:function(){return this._price},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'priceLocalized',{get:function(){return c.c.FormatPrice(this._price,this._settings.locale,this._settings.currency)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'discount',{get:function(){return this._discount},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'discountLocalized',{get:function(){return c.c.FormatPrice(this.discount,this._settings.locale,this._settings.currency)},enumerable:!0,configurable:!0}),r.prototype.FormatPrice=function(e){return(null===e||void 0===e)&&(e=this._price),c.c.FormatPrice(e,this._settings.locale,this._settings.currency)},Object.defineProperty(r.prototype,'onSubmitting',{get:function(){return this._onSubmitting.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'onSubmitted',{get:function(){return this._onSubmitted.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'onPriceChanging',{get:function(){return this._onPriceChanging.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'onPriceChanged',{get:function(){return this._onPriceChanged.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'onSaving',{get:function(){return this._onSaving.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'onSaved',{get:function(){return this._onSaved.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'onError',{get:function(){return this._onError.asEvent()},enumerable:!0,configurable:!0}),r.prototype._post=function(t,r){return y(this,void 0,void 0,function(){var o=this;return _(this,function(){return[2,new e(function(e,n){o._xhrDictionary[t]&&o._xhrDictionary[t].abort();var i=new XMLHttpRequest;o._xhrDictionary[t]=i,i.onerror=n,i.onabort=n,i.ontimeout=n,i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE){var r=function(e,t,r){return r>=e&&r<t};if(r(200,300,i.status))o._xhrDictionary[t]=null,e(new a.a(null,i.response,i.responseText));else{var p=new d.a('Unsuccessful HTTP code received: '+i.response.statusText);p.response=i.response,p.body=i.responseText,o._xhrDictionary[t]=null,n(new a.a(p,i.response,i.responseText,i.readyState))}}},i.open('post',t,!0),'string'!=typeof r&&(r=c.c.JSON_to_URLEncoded(r)),i.setRequestHeader('Content-Type','application/x-www-form-urlencoded'),i.send(r)})]})})},r}(n.a)}).call(t,r(2).Promise)},function(e,t,r){'use strict';r.d(t,'a',function(){return n});var o=r(13),n=function(){function e(e){this.items=[],this._parent=e}return e.prototype.update=function(e,t){var r=this._parent.price,n=this.items.find(function(t){return t.option.matchesPartial(e)});n||(n=new o.a(e),this.items.push(n));var a=n.value;return n.value=t instanceof Array?t:'string'==typeof t?'text'===e.type||'textarea'===e.type||'number'===e.type?[t]:[n.option.values.find(function(e){return e.title===t})]:[t],this.equals(a,n.value)||this._parent.product.updateProductOptionValue(n),this._parent.updatePrice(r)},e.prototype.remove=function(e){var t=this._parent.price,r=null;return r='string'==typeof e?this.items.find(function(t){return t.option.title===e}):this.items.find(function(t){return t.option===e}),r&&this.items.splice(this.items.indexOf(r),1),this._parent.updatePrice(t)},e.prototype.equals=function(e,t){if(!e&&!!t||!!e&&!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if('string'==typeof e[r]){if(e[r]!==t[r])return!1;}else if(e[r].title!==t[r].title)return!1;return!0},e}()},function(e,t,r){'use strict';r.d(t,'a',function(){return o});var o=function(){return function(){this.new=null,this.newLocalized=''}}()},function(e,t,r){'use strict';var o=function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;for(var n=Array(e),r=0,t=0;t<o;t++)for(var i=arguments[t],a=0,p=i.length;a<p;a++,r++)n[r]=i[a];return n};Object.defineProperty(t,'__esModule',{value:!0});var n=r(24),a=r(11),i=function(){function e(){this._wrap=new s(this),this._subscriptions=[]}return Object.defineProperty(e.prototype,'count',{get:function(){return this._subscriptions.length},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){var t=this;return e&&this._subscriptions.push(new a.Subscription(e,!1)),function(){t.unsubscribe(e)}},e.prototype.sub=function(e){return this.subscribe(e)},e.prototype.one=function(e){var t=this;return e&&this._subscriptions.push(new a.Subscription(e,!0)),function(){t.unsubscribe(e)}},e.prototype.has=function(e){return!!e&&this._subscriptions.some(function(t){return t.handler==e})},e.prototype.unsubscribe=function(e){if(e)for(var t=0;t<this._subscriptions.length;t++)if(this._subscriptions[t].handler==e){this._subscriptions.splice(t,1);break}},e.prototype.unsub=function(e){this.unsubscribe(e)},e.prototype._dispatch=function(e,t,r){for(var a=this,i=function(o){var i=new n.EventManagement(function(){return a.unsub(o.handler)}),s=Array.prototype.slice.call(r);if(s.push(i),o.execute(e,t,s),p.cleanup(o),!e&&i.propagationStopped)return'break'},p=this,s=0,d=o(this._subscriptions);s<d.length;s++){var l=d[s],c=i(l);if('break'===c)break}},e.prototype.cleanup=function(e){if(e.isOnce&&e.isExecuted){var t=this._subscriptions.indexOf(e);-1<t&&this._subscriptions.splice(t,1)}},e.prototype.asEvent=function(){return this._wrap},e.prototype.clear=function(){this._subscriptions.splice(0,this._subscriptions.length)},e}();t.DispatcherBase=i;var p=function(){function e(){this._events={}}return e.prototype.get=function(e){var t=this._events[e];return t?t:(t=this.createDispatcher(),this._events[e]=t,t)},e.prototype.remove=function(e){delete this._events[e]},e}();t.EventListBase=p;var s=function(){function e(e){this._subscribe=function(t){return e.subscribe(t)},this._unsubscribe=function(t){return e.unsubscribe(t)},this._one=function(t){return e.one(t)},this._has=function(t){return e.has(t)},this._clear=function(){return e.clear()},this._count=function(){return e.count}}return Object.defineProperty(e.prototype,'count',{get:function(){return this._count()},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){return this._subscribe(e)},e.prototype.sub=function(e){return this.subscribe(e)},e.prototype.unsubscribe=function(e){this._unsubscribe(e)},e.prototype.unsub=function(e){this.unsubscribe(e)},e.prototype.one=function(e){return this._one(e)},e.prototype.has=function(e){return this._has(e)},e.prototype.clear=function(){this._clear()},e}();t.DispatcherWrapper=s},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e){this.unsub=e,this.propagationStopped=!1}return e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();t.EventManagement=r},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(26);t.EventDispatcher=o.EventDispatcher,t.EventHandlingBase=o.EventHandlingBase,t.EventList=o.EventList,t.NonUniformEventList=o.NonUniformEventList},function(e,t,r){'use strict';var o=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var n=r(6),a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.dispatch=function(){this._dispatch(!1,this,arguments)},t.prototype.dispatchAsync=function(){this._dispatch(!0,this,arguments)},t.prototype.asEvent=function(){return e.prototype.asEvent.call(this)},t}(n.DispatcherBase);t.EventDispatcher=a;var i=function(){function e(){this._events={}}return e.prototype.get=function(e){if(this._events[e])return this._events[e];var t=this.createDispatcher();return this._events[e]=t,t},e.prototype.remove=function(e){delete this._events[e]},e.prototype.createDispatcher=function(){return new a},e}();t.NonUniformEventList=i;var p=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createDispatcher=function(){return new a},t}(n.EventListBase);t.EventList=p;var s=function(){function e(){this._events=new p}return Object.defineProperty(e.prototype,'events',{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e,t){this._events.get(e).subscribe(t)},e.prototype.sub=function(e,t){this.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._events.get(e).unsubscribe(t)},e.prototype.unsub=function(e,t){this.unsubscribe(e,t)},e.prototype.one=function(e,t){this._events.get(e).one(t)},e.prototype.has=function(e,t){return this._events.get(e).has(t)},e}();t.EventHandlingBase=s},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(28);t.SimpleEventDispatcher=o.SimpleEventDispatcher,t.SimpleEventHandlingBase=o.SimpleEventHandlingBase,t.SimpleEventList=o.SimpleEventList,t.NonUniformSimpleEventList=o.NonUniformSimpleEventList},function(e,t,r){'use strict';var o=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var n=r(6),a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.dispatch=function(){this._dispatch(!1,this,arguments)},t.prototype.dispatchAsync=function(){this._dispatch(!0,this,arguments)},t.prototype.asEvent=function(){return e.prototype.asEvent.call(this)},t}(n.DispatcherBase);t.SimpleEventDispatcher=a;var i=function(){function e(){this._events={}}return e.prototype.get=function(e){if(this._events[e])return this._events[e];var t=this.createDispatcher();return this._events[e]=t,t},e.prototype.remove=function(e){delete this._events[e]},e.prototype.createDispatcher=function(){return new a},e}();t.NonUniformSimpleEventList=i;var p=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createDispatcher=function(){return new a},t}(n.EventListBase);t.SimpleEventList=p;var s=function(){function e(){this._events=new p}return Object.defineProperty(e.prototype,'events',{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e,t){this._events.get(e).subscribe(t)},e.prototype.sub=function(e,t){this.subscribe(e,t)},e.prototype.one=function(e,t){this._events.get(e).one(t)},e.prototype.has=function(e,t){return this._events.get(e).has(t)},e.prototype.unsubscribe=function(e,t){this._events.get(e).unsubscribe(t)},e.prototype.unsub=function(e,t){this.unsubscribe(e,t)},e}();t.SimpleEventHandlingBase=s},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(30);t.SignalDispatcher=o.SignalDispatcher,t.SignalHandlingBase=o.SignalHandlingBase,t.SignalList=o.SignalList},function(e,t,r){'use strict';var o=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var n=r(6),a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.dispatch=function(){this._dispatch(!1,this,arguments)},t.prototype.dispatchAsync=function(){this._dispatch(!0,this,arguments)},t.prototype.asEvent=function(){return e.prototype.asEvent.call(this)},t}(n.DispatcherBase);t.SignalDispatcher=a;var i=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createDispatcher=function(){return new a},t}(n.EventListBase);t.SignalList=i;var p=function(){function e(){this._events=new i}return Object.defineProperty(e.prototype,'events',{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.one=function(e,t){this._events.get(e).one(t)},e.prototype.has=function(e,t){return this._events.get(e).has(t)},e.prototype.subscribe=function(e,t){this._events.get(e).subscribe(t)},e.prototype.sub=function(e,t){this.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._events.get(e).unsubscribe(t)},e.prototype.unsub=function(e,t){this.unsubscribe(e,t)},e}();t.SignalHandlingBase=p},function(e,t,r){'use strict';r.d(t,'a',function(){return o});var o=function(){function e(){}return e.colorNameToHex=function(e){return null===e||void 0===e?null:'undefined'==typeof this.colors[e.toLowerCase()]?null:this.colors[e.toLowerCase()]},e.colors={aliceblue:'#f0f8ff',antiquewhite:'#faebd7',aqua:'#00ffff',aquamarine:'#7fffd4',azure:'#f0ffff',beige:'#f5f5dc',bisque:'#ffe4c4',black:'#000000',blanchedalmond:'#ffebcd',blue:'#0000ff',blueviolet:'#8a2be2',brown:'#a52a2a',burlywood:'#deb887',cadetblue:'#5f9ea0',chartreuse:'#7fff00',chocolate:'#d2691e',coral:'#ff7f50',cornflowerblue:'#6495ed',cornsilk:'#fff8dc',crimson:'#dc143c',cyan:'#00ffff',darkblue:'#00008b',darkcyan:'#008b8b',darkgoldenrod:'#b8860b',darkgray:'#a9a9a9',darkgreen:'#006400',darkkhaki:'#bdb76b',darkmagenta:'#8b008b',darkolivegreen:'#556b2f',darkorange:'#ff8c00',darkorchid:'#9932cc',darkred:'#8b0000',darksalmon:'#e9967a',darkseagreen:'#8fbc8f',darkslateblue:'#483d8b',darkslategray:'#2f4f4f',darkturquoise:'#00ced1',darkviolet:'#9400d3',deeppink:'#ff1493',deepskyblue:'#00bfff',dimgray:'#696969',dodgerblue:'#1e90ff',firebrick:'#b22222',floralwhite:'#fffaf0',forestgreen:'#228b22',fuchsia:'#ff00ff',gainsboro:'#dcdcdc',ghostwhite:'#f8f8ff',gold:'#ffd700',goldenrod:'#daa520',gray:'#808080',green:'#008000',greenyellow:'#adff2f',honeydew:'#f0fff0',hotpink:'#ff69b4',"indianred ":'#cd5c5c',indigo:'#4b0082',ivory:'#fffff0',khaki:'#f0e68c',lavender:'#e6e6fa',lavenderblush:'#fff0f5',lawngreen:'#7cfc00',lemonchiffon:'#fffacd',lightblue:'#add8e6',lightcoral:'#f08080',lightcyan:'#e0ffff',lightgoldenrodyellow:'#fafad2',lightgrey:'#d3d3d3',lightgreen:'#90ee90',lightpink:'#ffb6c1',lightsalmon:'#ffa07a',lightseagreen:'#20b2aa',lightskyblue:'#87cefa',lightslategray:'#778899',lightsteelblue:'#b0c4de',lightyellow:'#ffffe0',lime:'#00ff00',limegreen:'#32cd32',linen:'#faf0e6',magenta:'#ff00ff',maroon:'#800000',mediumaquamarine:'#66cdaa',mediumblue:'#0000cd',mediumorchid:'#ba55d3',mediumpurple:'#9370d8',mediumseagreen:'#3cb371',mediumslateblue:'#7b68ee',mediumspringgreen:'#00fa9a',mediumturquoise:'#48d1cc',mediumvioletred:'#c71585',midnightblue:'#191970',mintcream:'#f5fffa',mistyrose:'#ffe4e1',moccasin:'#ffe4b5',navajowhite:'#ffdead',navy:'#000080',oldlace:'#fdf5e6',olive:'#808000',olivedrab:'#6b8e23',orange:'#ffa500',orangered:'#ff4500',orchid:'#da70d6',palegoldenrod:'#eee8aa',palegreen:'#98fb98',paleturquoise:'#afeeee',palevioletred:'#d87093',papayawhip:'#ffefd5',peachpuff:'#ffdab9',peru:'#cd853f',pink:'#ffc0cb',plum:'#dda0dd',powderblue:'#b0e0e6',purple:'#800080',rebeccapurple:'#663399',red:'#ff0000',rosybrown:'#bc8f8f',royalblue:'#4169e1',saddlebrown:'#8b4513',salmon:'#fa8072',sandybrown:'#f4a460',seagreen:'#2e8b57',seashell:'#fff5ee',sienna:'#a0522d',silver:'#c0c0c0',skyblue:'#87ceeb',slateblue:'#6a5acd',slategray:'#708090',snow:'#fffafa',springgreen:'#00ff7f',steelblue:'#4682b4',tan:'#d2b48c',teal:'#008080',thistle:'#d8bfd8',tomato:'#ff6347',turquoise:'#40e0d0',violet:'#ee82ee',wheat:'#f5deb3',white:'#ffffff',whitesmoke:'#f5f5f5',yellow:'#ffff00',yellowgreen:'#9acd32'},e}()},function(e,t,r){'use strict';r.d(t,'a',function(){return o});var o=function(){function e(){}return e.guid=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+'-'+e()+'-'+e()+'-'+e()+'-'+e()+e()+e()},e}()},function(e,t,r){'use strict';r.d(t,'a',function(){return a});var o=r(0),n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return u});var o=r(4),n=r(3),a=r(1),i=r(0),p=r(7),s=r.n(p),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),l=this&&this.__decorate||function(e,t,o,n){var a,p=arguments.length,s=3>p?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;0<=r;r--)(a=e[r])&&(s=(3>p?a(s):3<p?a(t,o,s):a(t,o))||s);return 3<p&&s&&Object.defineProperty(t,o,s),s},c=this&&this.__metadata||function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.required=!1,t.description='',t.prompt='',t.type='radio',t.subType='',t.props={},t._values=new n.b(function(e,r){return a.a.Build(t.optionValueCreateInstance,e,r)}),t._onOptionValueChange=new p.EventDispatcher,t._onAvailableOptionValueChange=new p.EventDispatcher,t}d(t,e),Object.defineProperty(t.prototype,'values',{get:function(){return this._values},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onOptionValueChange',{get:function(){return this._onOptionValueChange.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onAvailableOptionValueChange',{get:function(){return this._onAvailableOptionValueChange.asEvent()},enumerable:!0,configurable:!0}),t.prototype.updateOptionValue=function(e){var t,r=this;Array.isArray(e)&&(0<e.length&&'string'==typeof e[0]?t=e.map(function(e){return r.values.find(function(t){return t.title===e})}):t=e),this._onOptionValueChange.dispatch(this,t)},t.prototype.updateAvailableOptionValues=function(e){for(var t,r=function(t){t.disabled=e.every(function(e){return e.id!==t.id})},o=0,n=this._values;o<n.length;o++)t=n[o],r(t);var a=this._values.filter(function(e){return!e.disabled});this._onAvailableOptionValueChange.dispatch(this,a)};var r;return l([Object(o.b)('OptionValue'),c('design:type','function'==typeof(r='undefined'!=typeof TOptionValue&&TOptionValue)&&r||Object)],t.prototype,'optionValueCreateInstance',void 0),t}(i.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return a});var o=r(0),n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=-1,t.title='',t.preselected=!1,t.disabled=!1,t.price=0,t.color=null,t.imageUrl=null,t.props={},t}return n(t,e),t}(o.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return a});var o=r(1),n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.matchesPartial=function(e){return this.id===e.id},t}(o.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return a});var o=r(1),n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.locale='en-US',t.currency='USD',t.redirectToCartAfterAdd=!0,t}return n(t,e),t.prototype.matchesModel=function(){return!1},t.prototype.matchesPartial=function(){return!1},t}(o.a)},function(e,t,r){'use strict';(function(e){r.d(t,'a',function(){return g});var o=r(39),n=r(3),a=r(4),i=r(1),p=r(40),s=r.n(p),d=r(41),l=r.n(d),c=r(42),u=r(5),y=this&&this.__decorate||function(e,t,o,n){var a,p=arguments.length,s=3>p?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;0<=r;r--)(a=e[r])&&(s=(3>p?a(s):3<p?a(t,o,s):a(t,o))||s);return 3<p&&s&&Object.defineProperty(t,o,s),s},_=this&&this.__metadata||function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=this&&this.__awaiter||function(t,r,o,n){return new(o||(o=e))(function(e,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function p(e){try{s(n['throw'](e))}catch(t){a(t)}}function s(t){t.done?e(t.value):new o(function(e){e(t.value)}).then(i,p)}s((n=n.apply(t,r||[])).next())})},b=this&&this.__generator||function(e,r){function o(e){return function(t){return a([e,t])}}function a(o){if(n)throw new TypeError('Generator is already executing.');for(;d;)try{if(n=1,i&&(p=2&o[0]?i['return']:o[0]?i['throw']||((p=i['return'])&&p.call(i),0):i.next)&&!(p=p.call(i,o[1])).done)return p;switch((i=0,p)&&(o=[2&o[0],p.value]),o[0]){case 0:case 1:p=o;break;case 4:return d.label++,{value:o[1],done:!1};case 5:d.label++,i=o[1],o=[0];continue;case 7:o=d.ops.pop(),d.trys.pop();continue;default:if((p=d.trys,!(p=0<p.length&&p[p.length-1]))&&(6===o[0]||2===o[0])){d=0;continue}if(3===o[0]&&(!p||o[1]>p[0]&&o[1]<p[3])){d.label=o[1];break}if(6===o[0]&&d.label<p[1]){d.label=p[1],p=o;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(o);break}p[2]&&d.ops.pop(),d.trys.pop();continue;}o=r.call(e,d)}catch(t){o=[6,t],i=0}finally{n=p=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,i,p,s,d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},'function'==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},g=function(){function e(){var e=this;this._products=new n.b(function(){return e.productCreateInstance},this),this._orders=new n.b(function(){return e.orderCreateInstance},this),this._additionalProductsPromises=[],this.findProduct={byId:function(t){return f(e,void 0,void 0,function(){return b(this,function(){return[2,this.findProductById(t)]})})}}}e.prototype.productFactoryFromModel=function(e,t){var r=i.a.BuildFromModel(this.productCreateInstance,e);return r?(r.owner=t,r):null},e.prototype.productFactoryFromPartialSelf=function(e,t){var r=i.a.BuildFromPartialSelf(this.productCreateInstance,e);return r?(r.owner=t,r):null},e.prototype.init=function(e,t,r,n,a,p,s){return f(this,void 0,void 0,function(){var d,l,u,y,_,f;return b(this,function(){for(this.settings=i.a.BuildFromModel(this.pluginSettingsCreateInstance,n),this.editor=t,Array.isArray(e)||(e=[e]),(d=0,l=e);d<l.length;d++)u=l[d],this.products.push(this.productFactoryFromModel(u,this));if(this.products.setCurrent(0),a=a||{},Object.assign(a,{quantity:p,product:this.products.current,settings:this.settings}),this.orders.pushAndMoveCursor(this.buildOrder(a)),this._cart=new c.a(this),this.user=i.a.BuildFromModel(this.userCreateInstance,s),this.config=r.config||r,this._configProcessor=new o.a(this),t&&'multistep'!==t.editorType&&(this.config=this.configProcessor.processConfig(r)),r.additionalProducts)for(y=0,_=r.additionalProducts;y<_.length;y++)f=_[y],this._additionalProductsPromises.push(this.findProduct.byId(f.id));return t&&(t.driver=this),[2,this]})})},Object.defineProperty(e.prototype,'info',{get:function(){return this._info},set:function(e){this._info=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'editor',{get:function(){return this._editor},set:function(e){this._editor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'config',{get:function(){return this._config},set:function(e){this._config=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'configProcessor',{get:function(){return this._configProcessor},set:function(e){this._configProcessor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'user',{get:function(){return this._user},set:function(e){this._user=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'settings',{get:function(){return this._settings},set:function(e){this._settings=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'products',{get:function(){return this._products},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'orders',{get:function(){return this._orders},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'cart',{get:function(){return this._cart},enumerable:!0,configurable:!0}),e.prototype.addProduct=function(e){var t=this.products.find(function(t){return t.id===e.id});t||this.products.push(e)},e.prototype.findProductById=function(e){return f(this,void 0,void 0,function(){var t,r;return b(this,function(o){switch(o.label){case 0:return t=this.products.find(function(t){return u.c.stringOrNumberEquals(t.id,e)}),t?[2,t]:[4,this.getExternalProductModel(e)];case 1:return r=o.sent(),null===r?[2,null]:[2,this.productFactoryFromModel(r,this)];}})})},e.prototype.buildOrder=function(e){return i.a.BuildFromModel(this.orderCreateInstance,e)};var t,r,p,s;return y([Object(a.b)('Product'),_('design:type','function'==typeof(t='undefined'!=typeof TProduct&&TProduct)&&t||Object)],e.prototype,'productCreateInstance',void 0),y([Object(a.b)('Order'),_('design:type','function'==typeof(r='undefined'!=typeof TOrder&&TOrder)&&r||Object)],e.prototype,'orderCreateInstance',void 0),y([Object(a.b)('PluginSettings'),_('design:type','function'==typeof(p='undefined'!=typeof TPluginSettings&&TPluginSettings)&&p||Object)],e.prototype,'pluginSettingsCreateInstance',void 0),y([Object(a.b)('User'),_('design:type','function'==typeof(s='undefined'!=typeof TUser&&TUser)&&s||Object)],e.prototype,'userCreateInstance',void 0),e}()}).call(t,r(2).Promise)},function(e,t,r){'use strict';r.d(t,'a',function(){return o});var o=function(){function e(e){this.Placeholders={},this._driver=e}return e.prototype.processConfig=function(e){return this.process(e)},e.prototype.process=function(e,t){switch(!0){case'number'==typeof e||'boolean'==typeof e||null===e:return this.processPrimitive(e);case Array.isArray(e):return this.processArray(e);case e instanceof Object:return this.processObject(e);default:return this.processString(e,t);}},e.prototype.processObject=function(e){var t=this,r={};return Object.keys(e).forEach(function(o){r[o]=t.process(e[o],o)}),(!0===r.__ignore||'true'===r.__ignore)&&(r={}),r},e.prototype.processArray=function(e){var t=this,r=[];return e.forEach(function(e){var o=t.process(e);o.constructor===Object&&0===Object.keys(o).length||r.push(o)}),r},e.prototype.processPrimitive=function(e){return e},e.prototype.pathNavigator=function(e,t){var r=t(e),o=e.reduce(function(t,r){if('undefined'==typeof t||null===t)throw'The placeholder '+e.join('.')+' is invalid: '+r+' not found!';return Array.isArray(t)?t.find(function(e){return e.title===r}):t[r]},r);if(null===o)throw'Element in '+e.join('.')+' not found!';if('object'==typeof o)if(o.hasOwnProperty('value'))o=o.value;else if(o.hasOwnProperty('title'))o=o.title;else if(o.hasOwnProperty('name'))o=o.name;else throw'You try to insert object as a placeholder value for '+e.join('.');return o},e.prototype.replacePlaceholders=function(e,t,r){var o=this,n=t,a=/type:#\d+;/;if(n.match(a))return n;var i=n.match(e);return null!==i&&i.forEach(function(e){var t=e.slice(1,-1).split('.');n=n.replace(e,o.pathNavigator(t,r))}),n},e.prototype.processString=function(e,t){var r=this,o=this.replacePlaceholders(/#[^#]+#/g,e,function(){return r._driver.config}),n=/%[^%]+%/g,a=o.match(n);return a&&t&&a.forEach(function(e){r.Placeholders[e]=r.Placeholders[e]||{},r.Placeholders[e][t]=o}),o=this.replacePlaceholders(n,o,function(e){var t=e.shift().toLowerCase(),o={product:r._driver.products.current,order:r._driver.orders.current,info:r._driver.info,user:r._driver.user}[t];return'undefined'==typeof o?'%'+t+'%':o}),this.processMath(o)},e.prototype.processMath=function(e){var t=e,r=/math\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\)/g,o=e.match(r);return null!==o&&0<o.length&&o.forEach(function(e){var r=e.slice(5,-1),o=e;try{o=eval(r)}catch(e){o='0'}t=t.replace(e,o)}),this.processStringLiteral(t)},e.prototype.processStringLiteral=function(e){switch(!0){case'true'===e:return this.processPrimitive(!0);case'false'===e:return this.processPrimitive(!1);default:return e;}},e}()},function(){Array.prototype.distinct||(Array.prototype.distinct=function(){return this.filter(function(e,t,r){return e&&r.indexOf(e)===t})}),Array.prototype.equals?void 0:(Array.prototype.equals=function(e){if(!e)return!1;if(this.length!==e.length)return!1;for(var t=0,r=this.length;t<r;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1;}else if(this[t]!==e[t])return!1;return!0},Object.defineProperty(Array.prototype,'equals',{enumerable:!1}))},function(){Object.compare=function(e,t){for(var r in e){if(e.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;if(null===e[r]&&null!==t[r])return!1;if(null===t[r]&&null!==e[r])return!1;switch(typeof e[r]){case'object':if(!Object.compare(e[r],t[r]))return!1;break;case'function':if('undefined'==typeof t[r]||'compare'!=r&&e[r].toString()!==t[r].toString())return!1;break;default:if(''===e[r]&&''!==t[r])return!1;if(''===t[r]&&''!==e[r])return!1;if(e[r]!==t[r])return!1;}}for(var r in t)if('undefined'==typeof e[r])return!1;return!0}},function(e,t,r){'use strict';(function(e){r.d(t,'a',function(){return d});var o=r(10),n=r(12),a=r(3),i=r(5),p=this&&this.__awaiter||function(t,r,o,n){return new(o||(o=e))(function(e,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function p(e){try{s(n['throw'](e))}catch(t){a(t)}}function s(t){t.done?e(t.value):new o(function(e){e(t.value)}).then(i,p)}s((n=n.apply(t,r||[])).next())})},s=this&&this.__generator||function(e,r){function o(e){return function(t){return a([e,t])}}function a(o){if(n)throw new TypeError('Generator is already executing.');for(;d;)try{if(n=1,i&&(p=2&o[0]?i['return']:o[0]?i['throw']||((p=i['return'])&&p.call(i),0):i.next)&&!(p=p.call(i,o[1])).done)return p;switch((i=0,p)&&(o=[2&o[0],p.value]),o[0]){case 0:case 1:p=o;break;case 4:return d.label++,{value:o[1],done:!1};case 5:d.label++,i=o[1],o=[0];continue;case 7:o=d.ops.pop(),d.trys.pop();continue;default:if((p=d.trys,!(p=0<p.length&&p[p.length-1]))&&(6===o[0]||2===o[0])){d=0;continue}if(3===o[0]&&(!p||o[1]>p[0]&&o[1]<p[3])){d.label=o[1];break}if(6===o[0]&&d.label<p[1]){d.label=p[1],p=o;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(o);break}p[2]&&d.ops.pop(),d.trys.pop();continue;}o=r.call(e,d)}catch(t){o=[6,t],i=0}finally{n=p=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,i,p,s,d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},'function'==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},d=function(){function t(e){var t=this;this.projectId=null,this._onSubmitting=new n.a,this._onSubmitted=new n.a,this._onPriceChanging=new n.a,this._onPriceChanged=new n.a,this._onSaving=new n.a,this._onSaved=new n.a,this._onError=new n.a,this._owner=e,this._settings=e.settings,this._lineItems=e.orders,this._subscribePriceChange(),this.onSubmitted.subscribe(function(e){!0===t._settings.redirectToCartAfterAdd&&e.lineItems[0].redirectToCart()})}return t.prototype._subscribePriceChange=function(){for(var e,t=0,r=this._lineItems;t<r.length;t++)e=r[t],this.subscribePriceChanges(e)},t.prototype.subscribePriceChanges=function(e){var t=this,r=new o.a;r.old=this.price,e.onPriceChanging.subscribe(function(){return p(t,void 0,void 0,function(){return s(this,function(){return[2,this._onPriceChanging.dispatch(this,r)]})})}),e.onPriceChanged.subscribe(function(){return p(t,void 0,void 0,function(){return s(this,function(){return r.new=this.price,r.newLocalized=this.priceLocalized,[2,this._onPriceChanged.dispatch(this,r)]})})})},Object.defineProperty(t.prototype,'lineItems',{get:function(){return this._lineItems},set:function(e){var t=this.price;this._lineItems.length=0;for(var r,o=0,n=e;o<n.length;o++)r=n[o],this._lineItems.push(r);this._lineItems.setCurrent(0),this._subscribePriceChange(),t!==this.price&&this.updatePrice(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'price',{get:function(){for(var e,t=0,r=0,o=this._lineItems;r<o.length;r++)e=o[r],t+=e.price;return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'priceLocalized',{get:function(){return this.formatPrice(this.price)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'discount',{get:function(){for(var e,t=0,r=0,o=this._lineItems;r<o.length;r++)e=o[r],t+=e.discount;return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'discountLocalized',{get:function(){return this.formatPrice(this.discount)},enumerable:!0,configurable:!0}),t.prototype.formatPrice=function(e){return(null===e||void 0===e)&&(e=this.price),i.c.FormatPrice(e,this._settings.locale,this._settings.currency)},t.prototype.updatePrice=function(e){var t=new o.a;t.old=e,t.new=this.price,t.newLocalized=this.priceLocalized,this._onPriceChanged.dispatch(this,t)},t.prototype.add=function(e,t){void 0===t&&(t=1);var r=this.price,o=this._lineItems.pushMerged({product:e,quantity:t},a.a.PartialSelf,!1);this.subscribePriceChanges(o),r!==this.price&&this.updatePrice(r)},t.prototype.remove=function(e){var t=this.price;this._lineItems.splice(this._lineItems.indexOf(e),1),t!==this.price&&this.updatePrice(t)},t.prototype.submit=function(){return p(this,void 0,void 0,function(){var t,r,o,n,a,i;return s(this,function(p){switch(p.label){case 0:return 0===this._lineItems.length||0===this._lineItems.filter(function(e){return 0<e.quantity}).length?[2,e.resolve()]:[4,this._onSubmitting.dispatch(this,function(){}())];case 1:p.sent(),t=[],r=0,o=this._lineItems,p.label=2;case 2:return r<o.length?(n=o[r],0===n.quantity)?[3,4]:(i=(a=t).push,[4,n.submit(!0,this.projectId)]):[3,5];case 3:i.apply(a,[p.sent()]),p.label=4;case 4:return r++,[3,2];case 5:return[4,this._onSubmitted.dispatch(this,t)];case 6:return p.sent(),[2,t];}})})},t.prototype.save=function(){return p(this,void 0,void 0,function(){var e,t,r,o,n,a;return s(this,function(i){switch(i.label){case 0:return[4,this._onSaving.dispatch(this,function(){}())];case 1:i.sent(),e=[],t=0,r=this._lineItems,i.label=2;case 2:return t<r.length?(o=r[t],a=(n=e).push,[4,o.save()]):[3,5];case 3:a.apply(n,[i.sent()]),i.label=4;case 4:return t++,[3,2];case 5:return[4,this._onSaved.dispatch(this,e)];case 6:return i.sent(),[2,e];}})})},Object.defineProperty(t.prototype,'onSubmitting',{get:function(){return this._onSubmitting.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onSubmitted',{get:function(){return this._onSubmitted.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onPriceChanging',{get:function(){return this._onPriceChanging.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onPriceChanged',{get:function(){return this._onPriceChanged.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onSaving',{get:function(){return this._onSaving.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onSaved',{get:function(){return this._onSaved.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onError',{get:function(){return this._onError.asEvent()},enumerable:!0,configurable:!0}),t}()}).call(t,r(2).Promise)},function(e,t,r){'use strict';r.d(t,'a',function(){return o});var o=function(){return function(e){void 0===e&&(e=''),this.snapshot=e,this.customData={}}}()},,,function(e,t,r){'use strict';r.d(t,'a',function(){return y});var o=r(17),n=r(3),a=r(4),i=r(1),p=r(5),s=r(13),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),l=this&&this.__assign||Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},c=this&&this.__decorate||function(e,t,o,n){var a,p=arguments.length,s=3>p?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;0<=r;r--)(a=e[r])&&(s=(3>p?a(s):3<p?a(t,o,s):a(t,o))||s);return 3<p&&s&&Object.defineProperty(t,o,s),s},u=this&&this.__metadata||function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._variations=new n.b(function(e,r){return i.a.Build(t.variantCreateInstance,e,r)},t),t}d(t,e),t.prototype.variationFactoryFromModel=function(e){return i.a.BuildFromModel(this.variantCreateInstance,e)},Object.defineProperty(t.prototype,'variations',{get:function(){return this._variations},enumerable:!0,configurable:!0}),t.prototype.updateProductOptionValue=function(t){e.prototype.updateProductOptionValue.call(this,t),this.updateSelectedVariant(t)},t.prototype.updateVariant=function(t){var r=this,o=this.variations.find(function(e){return e.id===t});if(o){this.variations.moveCursorTo(o);for(var n,a=Object.keys(o.options).map(function(e){return r.options.find(function(t){return t.title===e})}),i=function(t){var r=p.parsedOptions.find(function(e){return e.id===t.id}),n=r.values.find(function(e){return e.title===o.options[t.title]});if(n){var a=new s.a(t,[n]);e.prototype.updateProductOptionValue.call(p,a),p.updateOptionsAvailableValues(a,o)}},p=this,d=0,l=a;d<l.length;d++)n=l[d],i(n)}},t.prototype.setOptions=function(e,t){this.parsedOptions=this.parseOptions(e,t),this.options.initByMerged(this.parsedOptions,n.a.ExternalModel),this.updateVariant(t)},t.prototype.updateSelectedVariant=function(e){var t;if(this.variations.current){var r=l({},this.variations.current.options,(t={},t[e.option.title]=e.value.map(function(e){return e.title}).join(','),t)),o=this.variations.find(function(e){return Object.compare(e.options,r)});!o||(this.variations.moveCursorTo(o),this.updateOptionsAvailableValues(e,o))}},t.prototype.parseOptions=function(e,t){var r=this,o=1===e.length,n=o&&this.variations.some(function(e){return null!==e.imageUrl&&void 0!==e.imageUrl}),a=this.variations.find(function(e){return e.id===t}),i=function(e,t){return a&&a.options[e]===t},s=function(e,t){var o=r.variations.find(function(r){return r.options[e].trim()===t});return o?o.imageUrl:null};return e.map(function(e){var t=r.variations.filter(function(e){return!1!==e.available}).map(function(t){return t.options[e].trim()}).distinct().map(function(t){return{id:p.b.guid(),title:t,color:p.a.colorNameToHex(t),preselected:i(e,t),price:null,imageUrl:n?s(e,t):null}});return{id:p.b.guid(),description:'',prompt:e,title:e,required:!0,type:n?'image':'radio',values:t}})},t.prototype.updateOptionsAvailableValues=function(e,t){for(var r=e.value.map(function(e){return e.title}).join(','),o=this.variations.filter(function(t){return t.options[e.option.title]===r}),n=this.parsedOptions.map(function(e){return e.title}),a=function(r){var a=p.options[r];if(a.title===e.option.title)return'continue';var i=n.filter(function(e){return e!==a.title}),s=o.filter(function(e){return i.every(function(r){return e.options[r]===t.options[r]})}).filter(function(e){return e.available}).map(function(e){return e.options[a.title]});s=s.concat(a.values.filter(function(e){return e.props.merged||-1!==s.indexOf(e.title)}).map(function(e){return e.title})).distinct();if(a.values.some(function(e){var t=-1===s.indexOf(e.title);return e.disabled!==t})){var d=a.values.filter(function(e){return-1<s.indexOf(e.title)});a.updateAvailableOptionValues(d)}},p=this,s=0;s<this.options.length;s++)a(s)};var r;return c([Object(a.b)('Variant'),u('design:type','function'==typeof(r='undefined'!=typeof TVariation&&TVariation)&&r||Object)],t.prototype,'variantCreateInstance',void 0),t}(o.a)},,function(e,t,r){'use strict';(function(e){r.d(t,'a',function(){return d});var o=r(20),n=r(8),a=r(5),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),p=this&&this.__awaiter||function(t,r,o,n){return new(o||(o=e))(function(e,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function p(e){try{s(n['throw'](e))}catch(t){a(t)}}function s(t){t.done?e(t.value):new o(function(e){e(t.value)}).then(i,p)}s((n=n.apply(t,r||[])).next())})},s=this&&this.__generator||function(e,r){function o(e){return function(t){return a([e,t])}}function a(o){if(n)throw new TypeError('Generator is already executing.');for(;d;)try{if(n=1,i&&(p=2&o[0]?i['return']:o[0]?i['throw']||((p=i['return'])&&p.call(i),0):i.next)&&!(p=p.call(i,o[1])).done)return p;switch((i=0,p)&&(o=[2&o[0],p.value]),o[0]){case 0:case 1:p=o;break;case 4:return d.label++,{value:o[1],done:!1};case 5:d.label++,i=o[1],o=[0];continue;case 7:o=d.ops.pop(),d.trys.pop();continue;default:if((p=d.trys,!(p=0<p.length&&p[p.length-1]))&&(6===o[0]||2===o[0])){d=0;continue}if(3===o[0]&&(!p||o[1]>p[0]&&o[1]<p[3])){d.label=o[1];break}if(6===o[0]&&d.label<p[1]){d.label=p[1],p=o;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(o);break}p[2]&&d.ops.pop(),d.trys.pop();continue;}o=r.call(e,d)}catch(t){o=[6,t],i=0}finally{n=p=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,i,p,s,d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},'function'==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},d=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),Object.defineProperty(r.prototype,'product',{get:function(){return this._product},enumerable:!0,configurable:!0}),r.prototype._updatePriceInternal=function(){var t=this;return new e(function(e){var r=t.product.variations.current?+t.product.variations.current.price:+t.product.price;if(t.product.variations.current&&t.product.variations.current.discount){var o=t.product.variations.current.discount.applyDiscount(r,t.quantity);r=o.newPrice,t._discount=o.discount*t._priceMultiplier*t.quantity}t._price=r*t._priceMultiplier*t.quantity;var i=new n.a(null,new Response(),{});i.body.new=t._price,i.body.newLocalized=a.c.FormatPrice(t._price,t._settings.locale,t._settings.currency),i.body.sku=t.product.variations.current?t.product.variations.current.sku:t.product.sku,e(i)})},r.prototype._submitInternal=function(t){return void 0===t&&(t=''),p(this,void 0,void 0,function(){var r,o,n=this;return s(this,function(){return r=this.isReturning&&this.isNeedRemovePrevFromCart?this.removeFromCart():e.resolve(null),o=this._settings.baseApiUrl?this._settings.baseApiUrl+this._settings.endpoints.submitNewItem:this._settings.endpoints.submitNewItem,[2,r.then(function(){return''===t||null===t||'string'!=typeof t?n._post(o,n.getSubmitItemData()):n._post(o,n.generateProjectData(t))})]})})},r.prototype._saveProductInternal=function(){throw new Error('Method not implemented.')},r.prototype.removeFromCart=function(){var e=this._settings.baseApiUrl?this._settings.baseApiUrl+this.removeFromCartUrl:this.removeFromCartUrl;return this._post(e,this.removeFromCartData)},r}(o.a)}).call(t,r(2).Promise)},function(e,t,r){'use strict';r.d(t,'a',function(){return a});var o=r(37),n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.endpoints=new i,t}return n(t,e),t}(o.a),i=function(){return function(){}}()},function(e,t,r){'use strict';r.d(t,'a',function(){return a});var o=r(0),n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.discount=null,t}return n(t,e),t}(o.a)},,,,function(e,t,r){'use strict';r.d(t,'a',function(){return p});var o=r(35),n=r(0),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(){return function(){}}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.matchesModel=function(e){return n.a.matchObjects(this,e,[{id:'id'},{title:'title'}])},t.prototype.init=function(e){this.id=e.id,this.preselected=e.preselected,this.title=e.title,this.color=e.color},t.prototype.validateModel=function(e){return!!e},t}(o.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),function(e){r.d(t,'init',function(){return m}),r.d(t,'driver',function(){return h});var o=r(89),n=r(90),a=r(91),i=r(92),p=r(54),s=r(93),d=r(94),l=r(38),c=r(4),u=r(95),y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),_=this&&this.__decorate||function(e,t,o,n){var a,p=arguments.length,s=3>p?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;0<=r;r--)(a=e[r])&&(s=(3>p?a(s):3<p?a(t,o,s):a(t,o))||s);return 3<p&&s&&Object.defineProperty(t,o,s),s},f=this&&this.__awaiter||function(t,r,o,n){return new(o||(o=e))(function(e,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function p(e){try{s(n['throw'](e))}catch(t){a(t)}}function s(t){t.done?e(t.value):new o(function(e){e(t.value)}).then(i,p)}s((n=n.apply(t,r||[])).next())})},b=this&&this.__generator||function(e,r){function o(e){return function(t){return a([e,t])}}function a(o){if(n)throw new TypeError('Generator is already executing.');for(;d;)try{if(n=1,i&&(p=2&o[0]?i['return']:o[0]?i['throw']||((p=i['return'])&&p.call(i),0):i.next)&&!(p=p.call(i,o[1])).done)return p;switch((i=0,p)&&(o=[2&o[0],p.value]),o[0]){case 0:case 1:p=o;break;case 4:return d.label++,{value:o[1],done:!1};case 5:d.label++,i=o[1],o=[0];continue;case 7:o=d.ops.pop(),d.trys.pop();continue;default:if((p=d.trys,!(p=0<p.length&&p[p.length-1]))&&(6===o[0]||2===o[0])){d=0;continue}if(3===o[0]&&(!p||o[1]>p[0]&&o[1]<p[3])){d.label=o[1];break}if(6===o[0]&&d.label<p[1]){d.label=p[1],p=o;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(o);break}p[2]&&d.ops.pop(),d.trys.pop();continue;}o=r.call(e,d)}catch(t){o=[6,t],i=0}finally{n=p=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,i,p,s,d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},'function'==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},g=this,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.getExternalProductModel=function(){return f(this,void 0,void 0,function(){return b(this,function(){throw'Not implemented'})})},t=_([Object(c.a)({Product:o.a,Order:n.a,Attribute:a.a,Option:i.a,OptionValue:p.a,User:s.a,PluginSettings:d.a,Variant:u.a}),Object(c.c)('wooCommerce')],t),t}(l.a),m=function(e,t,r,o,n,a,i){return f(g,void 0,void 0,function(){var p;return b(this,function(s){switch(s.label){case 0:return p=new h,[4,p.init(e,t,r,o,n,a,i)];case 1:return s.sent(),[2,p];}})})}}.call(t,r(2).Promise)},function(e,t,r){'use strict';r.d(t,'a',function(){return d});var o=r(3),n=r(0),a=r(46),i=r(5),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),s=function(){return function(){}}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.matchesModel=function(e){return n.a.matchObjects(this,e,[{id:'id'},{title:'title'}])},t.prototype.init=function(e){if(!e.options||!(e.options instanceof Array))throw'Model of Product has empty options';this.id=e.id,this.title=e.title,this.price=e.price,this.sku=e.sku,this.attributes.initByMerged(e.attributes,o.a.ExternalModel),this.variations.initByMerged(e.variants?e.variants:[],o.a.ExternalModel);var t=e.selectedVariantId?e.selectedVariantId:0<this.variations.length?this.variations[0].id:void 0,r=this.variations.find(function(e){return e.id===t});r&&this.variations.moveCursorTo(r);var n=this.parseVariantsToOptions(e.variants,t);this.options.initByMerged(n,o.a.ExternalModel),this.parsedOptions=this.options.map(function(e){return e.clone()})},t.prototype.parseVariantsToOptions=function(e,t){for(var r=[],o=0,n=e;o<n.length;o++){var a=n[o],i=function(e){var n=a.attributes[e],o=r.findIndex(function(e){return e.title===n.label}),i=a.id===t;if(-1===o)r.push(p.createOption(n,i));else{var s=r[o].values.findIndex(function(e){return e.title===n.value});if(-1===s){var d=p.createOptionValue(n.value,i);r[o].values.push(d)}else i&&(r[o].values[s].preselected=!0)}},p=this;for(var s in a.attributes)i(s)}return r},t.prototype.createOptionValue=function(e,t){return void 0===t&&(t=!1),{id:i.b.guid(),title:e,preselected:t,color:i.a.colorNameToHex(e)}},t.prototype.createOption=function(e,t){return void 0===t&&(t=!1),{id:i.b.guid(),title:e.label,required:!0,type:'radio',values:[this.createOptionValue(e.value,t)]}},t}(a.a)},function(e,t,r){'use strict';(function(e){r.d(t,'a',function(){return l});var o=r(48),n=r(43),a=r(9),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),p=this&&this.__awaiter||function(t,r,o,n){return new(o||(o=e))(function(e,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function p(e){try{s(n['throw'](e))}catch(t){a(t)}}function s(t){t.done?e(t.value):new o(function(e){e(t.value)}).then(i,p)}s((n=n.apply(t,r||[])).next())})},s=this&&this.__generator||function(e,r){function o(e){return function(t){return a([e,t])}}function a(o){if(n)throw new TypeError('Generator is already executing.');for(;d;)try{if(n=1,i&&(p=2&o[0]?i['return']:o[0]?i['throw']||((p=i['return'])&&p.call(i),0):i.next)&&!(p=p.call(i,o[1])).done)return p;switch((i=0,p)&&(o=[2&o[0],p.value]),o[0]){case 0:case 1:p=o;break;case 4:return d.label++,{value:o[1],done:!1};case 5:d.label++,i=o[1],o=[0];continue;case 7:o=d.ops.pop(),d.trys.pop();continue;default:if((p=d.trys,!(p=0<p.length&&p[p.length-1]))&&(6===o[0]||2===o[0])){d=0;continue}if(3===o[0]&&(!p||o[1]>p[0]&&o[1]<p[3])){d.label=o[1];break}if(6===o[0]&&d.label<p[1]){d.label=p[1],p=o;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(o);break}p[2]&&d.ops.pop(),d.trys.pop();continue;}o=r.call(e,d)}catch(t){o=[6,t],i=0}finally{n=p=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,i,p,s,d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},'function'==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},d=function(){return function(){}}(),l=function(t){function r(){var e=t.call(this)||this;return e.isNeedRemovePrevFromCart=!1,e._priceMultiplier=1,e.onSubmitted.subscribe(function(t,r){!r.isFromCart&&e._settings.redirectToCartAfterAdd&&e.redirectToCart()}),e}return i(r,t),Object.defineProperty(r.prototype,'isReturning',{get:function(){return'undefined'!=typeof this.cartItemKey&&!!this.cartItemKey},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,'removeFromCartUrl',{get:function(){return null},enumerable:!0,configurable:!0}),r.prototype.generateProjectData=function(e){var t={};return t.quantity=this.quantity,t.product_id=this.product.id,this.product.variations.current&&(t.variation_id=this.product.variations.current.id),this.cartItemKey&&(t.cart_key=this.cartItemKey),t.projectId=e,t},r.prototype._submitInternal=function(t){return void 0===t&&(t=null),p(this,void 0,void 0,function(){var t,r,o,n,i=this;return s(this,function(){return t=this.isReturning&&this.isNeedRemovePrevFromCart?this.removeFromCart():e.resolve(null),r=this._settings.endpoints.submitNewItem,o=this.getSubmitItemData(),n=a.a.JSON_to_URLEncoded(o),r=(r+'&'+n).replace('productId','add-to-cart'),[2,t.then(function(){return i._post(r,o)})]})})},Object.defineProperty(r.prototype,'removeFromCartData',{get:function(){return null},enumerable:!0,configurable:!0}),r.prototype.init=function(e){t.prototype.init.call(this,e),this.cartItemKey=e.key,this.product.variations.current&&(this._price=+this.product.variations.current.price*this.quantity),this.data=this.data||{},this.props=new n.a,a.a.isNotEmptyString(e.snapshot)&&(this.props.snapshot=e.snapshot)},r.prototype.getSubmitItemData=function(){var e=this.choices.items.reduce(function(e,t){var r='attribute_'+t.option.title.toLocaleLowerCase();return e[r]=t.value[0].title,e},{});return e.quantity=this.quantity,e.product_id=this.product.id,this.product.variations.current&&(e.variation_id=this.product.variations.current.id),this.cartItemKey&&(e.cart_key=this.cartItemKey),this.images.map(function(e){return''+e+(-1<e.indexOf('?')?'&':'?')+'t='+Date.now().toString()}).forEach(function(t,r){return e['images['+r+']']=t}),this.downloadUrls.forEach(function(t,r){return e['download_urls['+r+']']=t}),e.data=this.data,e},r.prototype.redirectToCart=function(){if(this._settings.endpoints.cartUrl)location.href=this._settings.endpoints.cartUrl;else if(this._settings.baseApiUrl)location.href=this._settings.baseApiUrl+'/cart';else{var e=window.location.href.slice(0,window.location.href.indexOf('?productId')),t=e.split('/');t.splice(-2),e=t.join('/'),location.href=e+'/cart/'}},r}(o.a)}).call(t,r(2).Promise)},function(e,t,r){'use strict';r.d(t,'a',function(){return p});var o=r(33),n=r(0),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(){return function(){}}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.matchesModel=function(e){return n.a.matchObjects(this,e,[{id:'id'},{title:'title'}])},t.prototype.init=function(e){this.id=e.id,this.title=e.title,this.value=e.value},t}(o.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return d});var o=r(34),n=r(54),a=r(0),i=r(3),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),s=function(){return function(){}}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.matchesModel=function(e){return a.a.matchObjects(this,e,[{id:'id'},{title:'title'}])},t.prototype.init=function(e){if(this.id=e.id,this.title=e.title,this.prompt=e.title,this.type=e.type||'radio',this.required=e.required,!e.values||!(e.values instanceof Array))if('undefined'!=typeof e.defaultValue&&null!==e.defaultValue){var t=new n.a;t.title=e.defaultValue,e.values=[t]}else throw'Model of Option has no values';this.values.initByMerged(e.values,i.a.ExternalModel)},t.prototype.validateModel=function(e){return!!e&&!!e.values},t}(o.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return i});var o=r(36),n=r(0),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.matchesModel=function(e){return n.a.matchObjects(this,e,[{id:'id'}])},t.prototype.init=function(e){if(!!e){if('undefined'==typeof e.id)throw new Error('User model must have the id property to be used with this driver');this.id=e.id,this.tokenId=e.tokenId}},t}(o.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return i});var o=r(49),n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(){return function(){}}(),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(e){this.customersCanvasBaseUrl=e.customersCanvasBaseUrl,this.locale=e.language,this.baseApiUrl=e.wooCommerceBaseUrl,this.currency=e.currency,this.endpoints.submitNewItem=e.submitUrl,this.endpoints.cartUrl=e.cartUrl,this.redirectToCartAfterAdd=e.redirectToCartAfterAdd},t.prototype.validateModel=function(e){return!!e&&!!e.customersCanvasBaseUrl},t}(o.a)},function(e,t,r){'use strict';r.d(t,'a',function(){return s});var o=r(0),n=r(50),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(){return function(){}}(),p=function(){return function(){}}(),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.matchesModel=function(e){return o.a.matchObjects(this,e,[{id:'id'}])},t.prototype.init=function(e){this.id=e.id,this.price=e.price,this.available=!0,this.options=Object.keys(e.attributes).reduce(function(t,r){var o=e.attributes[r];return t[o.label]=o.value,t},{})},t.prototype.validateModel=function(e){return!!e},t}(n.a)}]);
export { ecommerceDriver };