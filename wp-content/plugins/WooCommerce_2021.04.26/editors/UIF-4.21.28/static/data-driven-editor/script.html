<script>
!function(e){function r(r){for(var n,l,f=r[0],i=r[1],p=r[2],c=0,s=[];c<f.length;c++)l=f[c],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&s.push(o[l][0]),o[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(a&&a(r);s.length;)s.shift()();return u.push.apply(u,p||[]),t()}function t(){for(var e,r=0;r<u.length;r++){for(var t=u[r],n=!0,f=1;f<t.length;f++)0!==o[t[f]]&&(n=!1);n&&(u.splice(r--,1),e=l(l.s=t[0]))}return e}var n={},o={0:0},u=[];function l(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=n,l.d=function(e,r,t){l.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,r){if(1&r&&(e=l(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)l.d(t,n,(function(r){return e[r]}).bind(null,n));return t},l.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(r,"a",r),r},l.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},l.p="";var f=window.webpackJsonp=window.webpackJsonp||[],i=f.push.bind(f);f.push=r,f=f.slice();for(var p=0;p<f.length;p++)r(f[p]);var a=i;t()}([]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{2:function(e,t,n){e.exports=n("hN/g")},"hN/g":function(e,t,n){"use strict";n.r(t),n("pDpN")},pDpN:function(e,t,n){"use strict";!function(e){const t=e.performance;function n(e){t&&t.mark&&t.mark(e)}function o(e,n){t&&t.measure&&t.measure(e,n)}n("Zone");const r=e.__Zone_symbol_prefix||"__zone_symbol__";function s(e){return r+e}const a=!0===e[s("forceDuplicateZoneCheck")];if(e.Zone){if(a||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}class i{constructor(e,t){this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new l(this,this._parent&&this._parent._zoneDelegate,t)}static assertZonePatched(){if(e.Promise!==O.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let e=i.current;for(;e.parent;)e=e.parent;return e}static get current(){return z.zone}static get currentTask(){return j}static __load_patch(t,r,s=!1){if(O.hasOwnProperty(t)){if(!s&&a)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const s="Zone:"+t;n(s),O[t]=r(e,i,C),o(s,s)}}get parent(){return this._parent}get name(){return this._name}get(e){const t=this.getZoneWith(e);if(t)return t._properties[e]}getZoneWith(e){let t=this;for(;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null}fork(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)}wrap(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);const n=this._zoneDelegate.intercept(this,e,t),o=this;return function(){return o.runGuarded(n,this,arguments,t)}}run(e,t,n,o){z={parent:z,zone:this};try{return this._zoneDelegate.invoke(this,e,t,n,o)}finally{z=z.parent}}runGuarded(e,t=null,n,o){z={parent:z,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,n,o)}catch(r){if(this._zoneDelegate.handleError(this,r))throw r}}finally{z=z.parent}}runTask(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||y).name+"; Execution: "+this.name+")");if(e.state===v&&(e.type===P||e.type===D))return;const o=e.state!=E;o&&e._transitionTo(E,b),e.runCount++;const r=j;j=e,z={parent:z,zone:this};try{e.type==D&&e.data&&!e.data.isPeriodic&&(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(s){if(this._zoneDelegate.handleError(this,s))throw s}}finally{e.state!==v&&e.state!==Z&&(e.type==P||e.data&&e.data.isPeriodic?o&&e._transitionTo(b,E):(e.runCount=0,this._updateTaskCount(e,-1),o&&e._transitionTo(v,E,v))),z=z.parent,j=r}}scheduleTask(e){if(e.zone&&e.zone!==this){let t=this;for(;t;){if(t===e.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${e.zone.name}`);t=t.parent}}e._transitionTo(T,v);const t=[];e._zoneDelegates=t,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(n){throw e._transitionTo(Z,T,v),this._zoneDelegate.handleError(this,n),n}return e._zoneDelegates===t&&this._updateTaskCount(e,1),e.state==T&&e._transitionTo(b,T),e}scheduleMicroTask(e,t,n,o){return this.scheduleTask(new u(S,e,t,n,o,void 0))}scheduleMacroTask(e,t,n,o,r){return this.scheduleTask(new u(D,e,t,n,o,r))}scheduleEventTask(e,t,n,o,r){return this.scheduleTask(new u(P,e,t,n,o,r))}cancelTask(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||y).name+"; Execution: "+this.name+")");e._transitionTo(w,b,E);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(Z,w),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(v,w),e.runCount=0,e}_updateTaskCount(e,t){const n=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(let o=0;o<n.length;o++)n[o]._updateTaskCount(e.type,t)}}i.__symbol__=s;const c={name:"",onHasTask:(e,t,n,o)=>e.hasTask(n,o),onScheduleTask:(e,t,n,o)=>e.scheduleTask(n,o),onInvokeTask:(e,t,n,o,r,s)=>e.invokeTask(n,o,r,s),onCancelTask:(e,t,n,o)=>e.cancelTask(n,o)};class l{constructor(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:t._forkCurrZone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const o=n&&n.onHasTask;(o||t&&t._hasTaskZS)&&(this._hasTaskZS=o?n:c,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,n.onScheduleTask||(this._scheduleTaskZS=c,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=c,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=c,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}fork(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new i(e,t)}intercept(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t}invoke(e,t,n,o,r){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,o,r):t.apply(n,o)}handleError(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)}scheduleTask(e,t){let n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t),n||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=S)throw new Error("Task is missing scheduleFn.");k(t)}return n}invokeTask(e,t,n,o){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,o):t.callback.apply(n,o)}cancelTask(e,t){let n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n}hasTask(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(n){this.handleError(e,n)}}_updateTaskCount(e,t){const n=this._taskCounts,o=n[e],r=n[e]=o+t;if(r<0)throw new Error("More tasks executed then were scheduled.");0!=o&&0!=r||this.hasTask(this.zone,{microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e})}}class u{constructor(t,n,o,r,s,a){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=t,this.source=n,this.data=r,this.scheduleFn=s,this.cancelFn=a,!o)throw new Error("callback is not defined");this.callback=o;const i=this;this.invoke=t===P&&r&&r.useG?u.invokeTask:function(){return u.invokeTask.call(e,i,this,arguments)}}static invokeTask(e,t,n){e||(e=this),I++;try{return e.runCount++,e.zone.runTask(e,t,n)}finally{1==I&&m(),I--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(v,T)}_transitionTo(e,t,n){if(this._state!==t&&this._state!==n)throw new Error(`${this.type} '${this.source}': can not transition to '${e}', expecting state '${t}'${n?" or '"+n+"'":""}, was '${this._state}'.`);this._state=e,e==v&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const h=s("setTimeout"),p=s("Promise"),f=s("then");let d,g=[],_=!1;function k(t){if(0===I&&0===g.length)if(d||e[p]&&(d=e[p].resolve(0)),d){let e=d[f];e||(e=d.then),e.call(d,m)}else e[h](m,0);t&&g.push(t)}function m(){if(!_){for(_=!0;g.length;){const t=g;g=[];for(let n=0;n<t.length;n++){const o=t[n];try{o.zone.runTask(o,null,null)}catch(e){C.onUnhandledError(e)}}}C.microtaskDrainDone(),_=!1}}const y={name:"NO ZONE"},v="notScheduled",T="scheduling",b="scheduled",E="running",w="canceling",Z="unknown",S="microTask",D="macroTask",P="eventTask",O={},C={symbol:s,currentZoneFrame:()=>z,onUnhandledError:R,microtaskDrainDone:R,scheduleMicroTask:k,showUncaughtError:()=>!i[s("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:R,patchMethod:()=>R,bindArguments:()=>[],patchThen:()=>R,patchMacroTask:()=>R,patchEventPrototype:()=>R,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>R,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>R,wrapWithCurrentZone:()=>R,filterProperties:()=>[],attachOriginToPatched:()=>R,_redefineProperty:()=>R,patchCallbacks:()=>R};let z={parent:null,zone:new i(null,null)},j=null,I=0;function R(){}o("Zone","Zone"),e.Zone=i}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const o=Object.getOwnPropertyDescriptor,r=Object.defineProperty,s=Object.getPrototypeOf,a=Object.create,i=Array.prototype.slice,c=Zone.__symbol__("addEventListener"),l=Zone.__symbol__("removeEventListener"),u=Zone.__symbol__("");function h(e,t){return Zone.current.wrap(e,t)}function p(e,t,n,o,r){return Zone.current.scheduleMacroTask(e,t,n,o,r)}const f=Zone.__symbol__,d="undefined"!=typeof window,g=d?window:void 0,_=d&&g||"object"==typeof self&&self||global,k=[null];function m(e,t){for(let n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=h(e[n],t+"_"+n));return e}function y(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}const v="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,T=!("nw"in _)&&void 0!==_.process&&"[object process]"==={}.toString.call(_.process),b=!T&&!v&&!(!d||!g.HTMLElement),E=void 0!==_.process&&"[object process]"==={}.toString.call(_.process)&&!v&&!(!d||!g.HTMLElement),w={},Z=function(e){if(!(e=e||_.event))return;let t=w[e.type];t||(t=w[e.type]=f("ON_PROPERTY"+e.type));const n=this||e.target||_,o=n[t];let r;if(b&&n===g&&"error"===e.type){const t=e;r=o&&o.call(this,t.message,t.filename,t.lineno,t.colno,t.error),!0===r&&e.preventDefault()}else r=o&&o.apply(this,arguments),null==r||r||e.preventDefault();return r};function S(e,t,n){let s=o(e,t);if(!s&&n&&o(n,t)&&(s={enumerable:!0,configurable:!0}),!s||!s.configurable)return;const a=f("on"+t+"patched");if(e.hasOwnProperty(a)&&e[a])return;delete s.writable,delete s.value;const i=s.get,c=s.set,l=t.substr(2);let u=w[l];u||(u=w[l]=f("ON_PROPERTY"+l)),s.set=function(t){let n=this;n||e!==_||(n=_),n&&(n[u]&&n.removeEventListener(l,Z),c&&c.apply(n,k),"function"==typeof t?(n[u]=t,n.addEventListener(l,Z,!1)):n[u]=null)},s.get=function(){let n=this;if(n||e!==_||(n=_),!n)return null;const o=n[u];if(o)return o;if(i){let e=i&&i.call(this);if(e)return s.set.call(this,e),"function"==typeof n.removeAttribute&&n.removeAttribute(t),e}return null},r(e,t,s),e[a]=!0}function D(e,t,n){if(t)for(let o=0;o<t.length;o++)S(e,"on"+t[o],n);else{const t=[];for(const n in e)"on"==n.substr(0,2)&&t.push(n);for(let o=0;o<t.length;o++)S(e,t[o],n)}}const P=f("originalInstance");function O(e){const t=_[e];if(!t)return;_[f(e)]=t,_[e]=function(){const n=m(arguments,e);switch(n.length){case 0:this[P]=new t;break;case 1:this[P]=new t(n[0]);break;case 2:this[P]=new t(n[0],n[1]);break;case 3:this[P]=new t(n[0],n[1],n[2]);break;case 4:this[P]=new t(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},j(_[e],t);const n=new t(function(){});let o;for(o in n)"XMLHttpRequest"===e&&"responseBlob"===o||function(t){"function"==typeof n[t]?_[e].prototype[t]=function(){return this[P][t].apply(this[P],arguments)}:r(_[e].prototype,t,{set:function(n){"function"==typeof n?(this[P][t]=h(n,e+"."+t),j(this[P][t],n)):this[P][t]=n},get:function(){return this[P][t]}})}(o);for(o in t)"prototype"!==o&&t.hasOwnProperty(o)&&(_[e][o]=t[o])}function C(e,t,n){let r=e;for(;r&&!r.hasOwnProperty(t);)r=s(r);!r&&e[t]&&(r=e);const a=f(t);let i=null;if(r&&(!(i=r[a])||!r.hasOwnProperty(a))&&(i=r[a]=r[t],y(r&&o(r,t)))){const e=n(i,a,t);r[t]=function(){return e(this,arguments)},j(r[t],i)}return i}function z(e,t,n){let o=null;function r(e){const t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},o.apply(t.target,t.args),e}o=C(e,t,e=>function(t,o){const s=n(t,o);return s.cbIdx>=0&&"function"==typeof o[s.cbIdx]?p(s.name,o[s.cbIdx],s,r):e.apply(t,o)})}function j(e,t){e[f("OriginalDelegate")]=t}let I=!1,R=!1;function M(){try{const e=g.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}function N(){if(I)return R;I=!0;try{const e=g.navigator.userAgent;-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(R=!0)}catch(e){}return R}Zone.__load_patch("ZoneAwarePromise",(e,t,n)=>{const o=Object.getOwnPropertyDescriptor,r=Object.defineProperty,s=n.symbol,a=[],i=!0===e[s("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],c=s("Promise"),l=s("then");n.onUnhandledError=e=>{if(n.showUncaughtError()){const t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},n.microtaskDrainDone=()=>{for(;a.length;){const t=a.shift();try{t.zone.runGuarded(()=>{if(t.throwOriginal)throw t.rejection;throw t})}catch(e){h(e)}}};const u=s("unhandledPromiseRejectionHandler");function h(e){n.onUnhandledError(e);try{const n=t[u];"function"==typeof n&&n.call(this,e)}catch(o){}}function p(e){return e&&e.then}function f(e){return e}function d(e){return D.reject(e)}const g=s("state"),_=s("value"),k=s("finally"),m=s("parentPromiseValue"),y=s("parentPromiseState");function v(e,t){return n=>{try{b(e,t,n)}catch(o){b(e,!1,o)}}}const T=s("currentTaskTrace");function b(e,o,s){const c=function(){let e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}}();if(e===s)throw new TypeError("Promise resolved with itself");if(null===e[g]){let h=null;try{"object"!=typeof s&&"function"!=typeof s||(h=s&&s.then)}catch(u){return c(()=>{b(e,!1,u)})(),e}if(!1!==o&&s instanceof D&&s.hasOwnProperty(g)&&s.hasOwnProperty(_)&&null!==s[g])w(s),b(e,s[g],s[_]);else if(!1!==o&&"function"==typeof h)try{h.call(s,c(v(e,o)),c(v(e,!1)))}catch(u){c(()=>{b(e,!1,u)})()}else{e[g]=o;const c=e[_];if(e[_]=s,e[k]===k&&!0===o&&(e[g]=e[y],e[_]=e[m]),!1===o&&s instanceof Error){const e=t.currentTask&&t.currentTask.data&&t.currentTask.data.__creationTrace__;e&&r(s,T,{configurable:!0,enumerable:!1,writable:!0,value:e})}for(let t=0;t<c.length;)Z(e,c[t++],c[t++],c[t++],c[t++]);if(0==c.length&&0==o){e[g]=0;let o=s;try{throw new Error("Uncaught (in promise): "+((l=s)&&l.toString===Object.prototype.toString?(l.constructor&&l.constructor.name||"")+": "+JSON.stringify(l):l?l.toString():Object.prototype.toString.call(l))+(s&&s.stack?"\n"+s.stack:""))}catch(u){o=u}i&&(o.throwOriginal=!0),o.rejection=s,o.promise=e,o.zone=t.current,o.task=t.currentTask,a.push(o),n.scheduleMicroTask()}}}var l;return e}const E=s("rejectionHandledHandler");function w(e){if(0===e[g]){try{const n=t[E];n&&"function"==typeof n&&n.call(this,{rejection:e[_],promise:e})}catch(n){}e[g]=!1;for(let t=0;t<a.length;t++)e===a[t].promise&&a.splice(t,1)}}function Z(e,t,n,o,r){w(e);const s=e[g],a=s?"function"==typeof o?o:f:"function"==typeof r?r:d;t.scheduleMicroTask("Promise.then",()=>{try{const o=e[_],r=!!n&&k===n[k];r&&(n[m]=o,n[y]=s);const i=t.run(a,void 0,r&&a!==d&&a!==f?[]:[o]);b(n,!0,i)}catch(o){b(n,!1,o)}},n)}const S=function(){};class D{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(e){return b(new this(null),!0,e)}static reject(e){return b(new this(null),!1,e)}static race(e){let t,n,o=new this((e,o)=>{t=e,n=o});function r(e){t(e)}function s(e){n(e)}for(let a of e)p(a)||(a=this.resolve(a)),a.then(r,s);return o}static all(e){return D.allWithCallback(e)}static allSettled(e){return(this&&this.prototype instanceof D?this:D).allWithCallback(e,{thenCallback:e=>({status:"fulfilled",value:e}),errorCallback:e=>({status:"rejected",reason:e})})}static allWithCallback(e,t){let n,o,r=new this((e,t)=>{n=e,o=t}),s=2,a=0;const i=[];for(let l of e){p(l)||(l=this.resolve(l));const e=a;try{l.then(o=>{i[e]=t?t.thenCallback(o):o,s--,0===s&&n(i)},r=>{t?(i[e]=t.errorCallback(r),s--,0===s&&n(i)):o(r)})}catch(c){o(c)}s++,a++}return s-=2,0===s&&n(i),r}constructor(e){const t=this;if(!(t instanceof D))throw new Error("Must be an instanceof Promise.");t[g]=null,t[_]=[];try{e&&e(v(t,!0),v(t,!1))}catch(n){b(t,!1,n)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return D}then(e,n){let o=this.constructor[Symbol.species];o&&"function"==typeof o||(o=this.constructor||D);const r=new o(S),s=t.current;return null==this[g]?this[_].push(s,r,e,n):Z(this,s,r,e,n),r}catch(e){return this.then(null,e)}finally(e){let n=this.constructor[Symbol.species];n&&"function"==typeof n||(n=D);const o=new n(S);o[k]=k;const r=t.current;return null==this[g]?this[_].push(r,o,e,e):Z(this,r,o,e,e),o}}D.resolve=D.resolve,D.reject=D.reject,D.race=D.race,D.all=D.all;const P=e[c]=e.Promise;e.Promise=D;const O=s("thenPatched");function z(e){const t=e.prototype,n=o(t,"then");if(n&&(!1===n.writable||!n.configurable))return;const r=t.then;t[l]=r,e.prototype.then=function(e,t){return new D((e,t)=>{r.call(this,e,t)}).then(e,t)},e[O]=!0}return n.patchThen=z,P&&(z(P),C(e,"fetch",e=>{return t=e,function(e,n){let o=t.apply(e,n);if(o instanceof D)return o;let r=o.constructor;return r[O]||z(r),o};var t})),Promise[t.__symbol__("uncaughtPromiseErrors")]=a,D}),Zone.__load_patch("toString",e=>{const t=Function.prototype.toString,n=f("OriginalDelegate"),o=f("Promise"),r=f("Error"),s=function(){if("function"==typeof this){const s=this[n];if(s)return"function"==typeof s?t.call(s):Object.prototype.toString.call(s);if(this===Promise){const n=e[o];if(n)return t.call(n)}if(this===Error){const n=e[r];if(n)return t.call(n)}}return t.call(this)};s[n]=t,Function.prototype.toString=s;const a=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":a.call(this)}});let x=!1;if("undefined"!=typeof window)try{const e=Object.defineProperty({},"passive",{get:function(){x=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(ue){x=!1}const L={useG:!0},A={},H={},F=new RegExp("^"+u+"(\\w+)(true|false)$"),q=f("propagationStopped");function G(e,t){const n=(t?t(e):e)+"false",o=(t?t(e):e)+"true",r=u+n,s=u+o;A[e]={},A[e].false=r,A[e].true=s}function B(e,t,n){const o=n&&n.add||"addEventListener",r=n&&n.rm||"removeEventListener",a=n&&n.listeners||"eventListeners",i=n&&n.rmAll||"removeAllListeners",c=f(o),l="."+o+":",h=function(e,t,n){if(e.isRemoved)return;const o=e.callback;"object"==typeof o&&o.handleEvent&&(e.callback=e=>o.handleEvent(e),e.originalDelegate=o),e.invoke(e,t,[n]);const s=e.options;s&&"object"==typeof s&&s.once&&t[r].call(t,n.type,e.originalDelegate?e.originalDelegate:e.callback,s)},p=function(t){if(!(t=t||e.event))return;const n=this||t.target||e,o=n[A[t.type].false];if(o)if(1===o.length)h(o[0],n,t);else{const e=o.slice();for(let o=0;o<e.length&&(!t||!0!==t[q]);o++)h(e[o],n,t)}},d=function(t){if(!(t=t||e.event))return;const n=this||t.target||e,o=n[A[t.type].true];if(o)if(1===o.length)h(o[0],n,t);else{const e=o.slice();for(let o=0;o<e.length&&(!t||!0!==t[q]);o++)h(e[o],n,t)}};function g(t,n){if(!t)return!1;let h=!0;n&&void 0!==n.useG&&(h=n.useG);const g=n&&n.vh;let _=!0;n&&void 0!==n.chkDup&&(_=n.chkDup);let k=!1;n&&void 0!==n.rt&&(k=n.rt);let m=t;for(;m&&!m.hasOwnProperty(o);)m=s(m);if(!m&&t[o]&&(m=t),!m)return!1;if(m[c])return!1;const y=n&&n.eventNameToString,v={},b=m[c]=m[o],E=m[f(r)]=m[r],w=m[f(a)]=m[a],Z=m[f(i)]=m[i];let S;function D(e,t){return!x&&"object"==typeof e&&e?!!e.capture:x&&t?"boolean"==typeof e?{capture:e,passive:!0}:e?"object"==typeof e&&!1!==e.passive?Object.assign(Object.assign({},e),{passive:!0}):e:{passive:!0}:e}n&&n.prepend&&(S=m[f(n.prepend)]=m[n.prepend]);const P=h?function(e){if(!v.isExisting)return b.call(v.target,v.eventName,v.capture?d:p,v.options)}:function(e){return b.call(v.target,v.eventName,e.invoke,v.options)},O=h?function(e){if(!e.isRemoved){const t=A[e.eventName];let n;t&&(n=t[e.capture?"true":"false"]);const o=n&&e.target[n];if(o)for(let r=0;r<o.length;r++)if(o[r]===e){o.splice(r,1),e.isRemoved=!0,0===o.length&&(e.allRemoved=!0,e.target[n]=null);break}}if(e.allRemoved)return E.call(e.target,e.eventName,e.capture?d:p,e.options)}:function(e){return E.call(e.target,e.eventName,e.invoke,e.options)},C=n&&n.diff?n.diff:function(e,t){const n=typeof t;return"function"===n&&e.callback===t||"object"===n&&e.originalDelegate===t},z=Zone[f("UNPATCHED_EVENTS")],I=e[f("PASSIVE_EVENTS")],R=function(t,o,r,s,a=!1,i=!1){return function(){const c=this||e;let l=arguments[0];n&&n.transferEventName&&(l=n.transferEventName(l));let u=arguments[1];if(!u)return t.apply(this,arguments);if(T&&"uncaughtException"===l)return t.apply(this,arguments);let p=!1;if("function"!=typeof u){if(!u.handleEvent)return t.apply(this,arguments);p=!0}if(g&&!g(t,u,c,arguments))return;const f=x&&!!I&&-1!==I.indexOf(l),d=D(arguments[2],f);if(z)for(let e=0;e<z.length;e++)if(l===z[e])return f?t.call(c,l,u,d):t.apply(this,arguments);const k=!!d&&("boolean"==typeof d||d.capture),m=!(!d||"object"!=typeof d)&&d.once,b=Zone.current;let E=A[l];E||(G(l,y),E=A[l]);const w=E[k?"true":"false"];let Z,S=c[w],P=!1;if(S){if(P=!0,_)for(let e=0;e<S.length;e++)if(C(S[e],u))return}else S=c[w]=[];const O=c.constructor.name,j=H[O];j&&(Z=j[l]),Z||(Z=O+o+(y?y(l):l)),v.options=d,m&&(v.options.once=!1),v.target=c,v.capture=k,v.eventName=l,v.isExisting=P;const R=h?L:void 0;R&&(R.taskData=v);const M=b.scheduleEventTask(Z,u,R,r,s);return v.target=null,R&&(R.taskData=null),m&&(d.once=!0),(x||"boolean"!=typeof M.options)&&(M.options=d),M.target=c,M.capture=k,M.eventName=l,p&&(M.originalDelegate=u),i?S.unshift(M):S.push(M),a?c:void 0}};return m[o]=R(b,l,P,O,k),S&&(m.prependListener=R(S,".prependListener:",function(e){return S.call(v.target,v.eventName,e.invoke,v.options)},O,k,!0)),m[r]=function(){const t=this||e;let o=arguments[0];n&&n.transferEventName&&(o=n.transferEventName(o));const r=arguments[2],s=!!r&&("boolean"==typeof r||r.capture),a=arguments[1];if(!a)return E.apply(this,arguments);if(g&&!g(E,a,t,arguments))return;const i=A[o];let c;i&&(c=i[s?"true":"false"]);const l=c&&t[c];if(l)for(let e=0;e<l.length;e++){const n=l[e];if(C(n,a))return l.splice(e,1),n.isRemoved=!0,0===l.length&&(n.allRemoved=!0,t[c]=null,"string"==typeof o)&&(t[u+"ON_PROPERTY"+o]=null),n.zone.cancelTask(n),k?t:void 0}return E.apply(this,arguments)},m[a]=function(){const t=this||e;let o=arguments[0];n&&n.transferEventName&&(o=n.transferEventName(o));const r=[],s=W(t,y?y(o):o);for(let e=0;e<s.length;e++){const t=s[e];r.push(t.originalDelegate?t.originalDelegate:t.callback)}return r},m[i]=function(){const t=this||e;let o=arguments[0];if(o){n&&n.transferEventName&&(o=n.transferEventName(o));const e=A[o];if(e){const n=t[e.false],s=t[e.true];if(n){const e=n.slice();for(let t=0;t<e.length;t++){const n=e[t];this[r].call(this,o,n.originalDelegate?n.originalDelegate:n.callback,n.options)}}if(s){const e=s.slice();for(let t=0;t<e.length;t++){const n=e[t];this[r].call(this,o,n.originalDelegate?n.originalDelegate:n.callback,n.options)}}}}else{const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=F.exec(e[t]);let o=n&&n[1];o&&"removeListener"!==o&&this[i].call(this,o)}this[i].call(this,"removeListener")}if(k)return this},j(m[o],b),j(m[r],E),Z&&j(m[i],Z),w&&j(m[a],w),!0}let _=[];for(let s=0;s<t.length;s++)_[s]=g(t[s],n);return _}function W(e,t){if(!t){const n=[];for(let o in e){const r=F.exec(o);let s=r&&r[1];if(s&&(!t||s===t)){const t=e[o];if(t)for(let e=0;e<t.length;e++)n.push(t[e])}}return n}let n=A[t];n||(G(t),n=A[t]);const o=e[n.false],r=e[n.true];return o?r?o.concat(r):o.slice():r?r.slice():[]}function U(e,t){const n=e.Event;n&&n.prototype&&t.patchMethod(n.prototype,"stopImmediatePropagation",e=>function(t,n){t[q]=!0,e&&e.apply(t,n)})}function V(e,t,n,o,r){const s=Zone.__symbol__(o);if(t[s])return;const a=t[s]=t[o];t[o]=function(s,i,c){return i&&i.prototype&&r.forEach(function(t){const r=`${n}.${o}::`+t,s=i.prototype;if(s.hasOwnProperty(t)){const n=e.ObjectGetOwnPropertyDescriptor(s,t);n&&n.value?(n.value=e.wrapWithCurrentZone(n.value,r),e._redefineProperty(i.prototype,t,n)):s[t]&&(s[t]=e.wrapWithCurrentZone(s[t],r))}else s[t]&&(s[t]=e.wrapWithCurrentZone(s[t],r))}),a.call(t,s,i,c)},e.attachOriginToPatched(t[o],a)}const $=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],X=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],J=["load"],Y=["blur","error","focus","load","resize","scroll","messageerror"],K=["bounce","finish","start"],Q=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],ee=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],te=["close","error","open","message"],ne=["error","message"],oe=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],$,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function re(e,t,n){if(!n||0===n.length)return t;const o=n.filter(t=>t.target===e);if(!o||0===o.length)return t;const r=o[0].ignoreProperties;return t.filter(e=>-1===r.indexOf(e))}function se(e,t,n,o){e&&D(e,re(e,t,n),o)}function ae(e,t){if(T&&!E)return;if(Zone[e.symbol("patchEvents")])return;const n="undefined"!=typeof WebSocket,o=t.__Zone_ignore_on_properties;if(b){const e=window,t=M()?[{target:e,ignoreProperties:["error"]}]:[];se(e,oe.concat(["messageerror"]),o?o.concat(t):o,s(e)),se(Document.prototype,oe,o),void 0!==e.SVGElement&&se(e.SVGElement.prototype,oe,o),se(Element.prototype,oe,o),se(HTMLElement.prototype,oe,o),se(HTMLMediaElement.prototype,X,o),se(HTMLFrameSetElement.prototype,$.concat(Y),o),se(HTMLBodyElement.prototype,$.concat(Y),o),se(HTMLFrameElement.prototype,J,o),se(HTMLIFrameElement.prototype,J,o);const n=e.HTMLMarqueeElement;n&&se(n.prototype,K,o);const r=e.Worker;r&&se(r.prototype,ne,o)}const r=t.XMLHttpRequest;r&&se(r.prototype,Q,o);const a=t.XMLHttpRequestEventTarget;a&&se(a&&a.prototype,Q,o),"undefined"!=typeof IDBIndex&&(se(IDBIndex.prototype,ee,o),se(IDBRequest.prototype,ee,o),se(IDBOpenDBRequest.prototype,ee,o),se(IDBDatabase.prototype,ee,o),se(IDBTransaction.prototype,ee,o),se(IDBCursor.prototype,ee,o)),n&&se(WebSocket.prototype,te,o)}Zone.__load_patch("util",(e,t,n)=>{n.patchOnProperties=D,n.patchMethod=C,n.bindArguments=m,n.patchMacroTask=z;const s=t.__symbol__("BLACK_LISTED_EVENTS"),c=t.__symbol__("UNPATCHED_EVENTS");e[c]&&(e[s]=e[c]),e[s]&&(t[s]=t[c]=e[s]),n.patchEventPrototype=U,n.patchEventTarget=B,n.isIEOrEdge=N,n.ObjectDefineProperty=r,n.ObjectGetOwnPropertyDescriptor=o,n.ObjectCreate=a,n.ArraySlice=i,n.patchClass=O,n.wrapWithCurrentZone=h,n.filterProperties=re,n.attachOriginToPatched=j,n._redefineProperty=Object.defineProperty,n.patchCallbacks=V,n.getGlobalObjects=()=>({globalSources:H,zoneSymbolEventNames:A,eventNames:oe,isBrowser:b,isMix:E,isNode:T,TRUE_STR:"true",FALSE_STR:"false",ZONE_SYMBOL_PREFIX:u,ADD_EVENT_LISTENER_STR:"addEventListener",REMOVE_EVENT_LISTENER_STR:"removeEventListener"})});const ie=f("zoneTask");function ce(e,t,n,o){let r=null,s=null;n+=o;const a={};function i(t){const n=t.data;return n.args[0]=function(){return t.invoke.apply(this,arguments)},n.handleId=r.apply(e,n.args),t}function c(t){return s.call(e,t.data.handleId)}r=C(e,t+=o,n=>function(r,s){if("function"==typeof s[0]){const e={isPeriodic:"Interval"===o,delay:"Timeout"===o||"Interval"===o?s[1]||0:void 0,args:s},n=s[0];s[0]=function(){try{return n.apply(this,arguments)}finally{e.isPeriodic||("number"==typeof e.handleId?delete a[e.handleId]:e.handleId&&(e.handleId[ie]=null))}};const r=p(t,s[0],e,i,c);if(!r)return r;const l=r.data.handleId;return"number"==typeof l?a[l]=r:l&&(l[ie]=r),l&&l.ref&&l.unref&&"function"==typeof l.ref&&"function"==typeof l.unref&&(r.ref=l.ref.bind(l),r.unref=l.unref.bind(l)),"number"==typeof l||l?l:r}return n.apply(e,s)}),s=C(e,n,t=>function(n,o){const r=o[0];let s;"number"==typeof r?s=a[r]:(s=r&&r[ie],s||(s=r)),s&&"string"==typeof s.type?"notScheduled"!==s.state&&(s.cancelFn&&s.data.isPeriodic||0===s.runCount)&&("number"==typeof r?delete a[r]:r&&(r[ie]=null),s.zone.cancelTask(s)):t.apply(e,o)})}function le(e,t){if(Zone[t.symbol("patchEventTarget")])return;const{eventNames:n,zoneSymbolEventNames:o,TRUE_STR:r,FALSE_STR:s,ZONE_SYMBOL_PREFIX:a}=t.getGlobalObjects();for(let c=0;c<n.length;c++){const e=n[c],t=a+(e+s),i=a+(e+r);o[e]={},o[e][s]=t,o[e][r]=i}const i=e.EventTarget;return i&&i.prototype?(t.patchEventTarget(e,[i&&i.prototype]),!0):void 0}Zone.__load_patch("legacy",e=>{const t=e[Zone.__symbol__("legacyPatch")];t&&t()}),Zone.__load_patch("queueMicrotask",(e,t,n)=>{n.patchMethod(e,"queueMicrotask",e=>function(e,n){t.current.scheduleMicroTask("queueMicrotask",n[0])})}),Zone.__load_patch("timers",e=>{ce(e,"set","clear","Timeout"),ce(e,"set","clear","Interval"),ce(e,"set","clear","Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{ce(e,"request","cancel","AnimationFrame"),ce(e,"mozRequest","mozCancel","AnimationFrame"),ce(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,t)=>{const n=["alert","prompt","confirm"];for(let o=0;o<n.length;o++)C(e,n[o],(n,o,r)=>function(o,s){return t.current.run(n,e,s,r)})}),Zone.__load_patch("EventTarget",(e,t,n)=>{!function(e,t){t.patchEventPrototype(e,t)}(e,n),le(e,n);const o=e.XMLHttpRequestEventTarget;o&&o.prototype&&n.patchEventTarget(e,[o.prototype])}),Zone.__load_patch("MutationObserver",(e,t,n)=>{O("MutationObserver"),O("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,t,n)=>{O("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,t,n)=>{O("FileReader")}),Zone.__load_patch("on_property",(e,t,n)=>{ae(n,e)}),Zone.__load_patch("customElements",(e,t,n)=>{!function(e,t){const{isBrowser:n,isMix:o}=t.getGlobalObjects();(n||o)&&e.customElements&&"customElements"in e&&t.patchCallbacks(t,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,n)}),Zone.__load_patch("XHR",(e,t)=>{!function(e){const u=e.XMLHttpRequest;if(!u)return;const h=u.prototype;let d=h[c],g=h[l];if(!d){const t=e.XMLHttpRequestEventTarget;if(t){const e=t.prototype;d=e[c],g=e[l]}}function _(e){const o=e.data,a=o.target;a[s]=!1,a[i]=!1;const u=a[r];d||(d=a[c],g=a[l]),u&&g.call(a,"readystatechange",u);const h=a[r]=()=>{if(a.readyState===a.DONE)if(!o.aborted&&a[s]&&"scheduled"===e.state){const n=a[t.__symbol__("loadfalse")];if(0!==a.status&&n&&n.length>0){const r=e.invoke;e.invoke=function(){const n=a[t.__symbol__("loadfalse")];for(let t=0;t<n.length;t++)n[t]===e&&n.splice(t,1);o.aborted||"scheduled"!==e.state||r.call(e)},n.push(e)}else e.invoke()}else o.aborted||!1!==a[s]||(a[i]=!0)};return d.call(a,"readystatechange",h),a[n]||(a[n]=e),b.apply(a,o.args),a[s]=!0,e}function k(){}function m(e){const t=e.data;return t.aborted=!0,E.apply(t.target,t.args)}const y=C(h,"open",()=>function(e,t){return e[o]=0==t[2],e[a]=t[1],y.apply(e,t)}),v=f("fetchTaskAborting"),T=f("fetchTaskScheduling"),b=C(h,"send",()=>function(e,n){if(!0===t.current[T])return b.apply(e,n);if(e[o])return b.apply(e,n);{const t={target:e,url:e[a],isPeriodic:!1,args:n,aborted:!1},o=p("XMLHttpRequest.send",k,t,_,m);e&&!0===e[i]&&!t.aborted&&"scheduled"===o.state&&o.invoke()}}),E=C(h,"abort",()=>function(e,o){const r=e[n];if(r&&"string"==typeof r.type){if(null==r.cancelFn||r.data&&r.data.aborted)return;r.zone.cancelTask(r)}else if(!0===t.current[v])return E.apply(e,o)})}(e);const n=f("xhrTask"),o=f("xhrSync"),r=f("xhrListener"),s=f("xhrScheduled"),a=f("xhrURL"),i=f("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function(e,t){const n=e.constructor.name;for(let r=0;r<t.length;r++){const s=t[r],a=e[s];if(a){if(!y(o(e,s)))continue;e[s]=(e=>{const t=function(){return e.apply(this,m(arguments,n+"."+s))};return j(t,e),t})(a)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,t)=>{function n(t){return function(n){W(e,t).forEach(o=>{const r=e.PromiseRejectionEvent;if(r){const e=new r(t,{promise:n.promise,reason:n.rejection});o.invoke(e)}})}}e.PromiseRejectionEvent&&(t[f("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),t[f("rejectionHandledHandler")]=n("rejectionhandled"))})}},[[2,0]]]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+P9r":function(e,t,n){var r=n("AGOE");r.prototype[Symbol.iterator]||(r.prototype[Symbol.iterator]=function(){var e=this.getEnumerator();return{next:function(){return e.moveNext()?{done:!1,value:e.current()}:{done:!0}}}});var i=!0;r.extendArray=function(){i&&(i=!1,Object.keys(r.prototype).forEach(function(e){Array.prototype[e]||(Array.prototype[e]=function(){var t=r.from(this);return t[e].apply(t,arguments)})}))},e.exports=r},0:function(e,t,n){e.exports=n("zUnb")},"3/ER":function(e,t,n){"use strict";(function(e){var r=n("Ju5/"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.a.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}}).call(this,n("3UD+")(e))},"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"9uiH":function(e,t){e.exports={}},AGOE:function(e,t,n){var r;!function(i,o){var s={Identity:function(e){return e},True:function(){return!0},Blank:function(){}},a=typeof{},l={"":s.Identity},c={createLambda:function(e){if(null==e)return s.Identity;if("string"==typeof e){var t=l[e];if(null!=t)return t;if(-1===e.indexOf("=>")){for(var n,r=new RegExp("[$]+","g"),i=0;null!=(n=r.exec(e));){var o=n[0].length;o>i&&(i=o)}for(var a=[],c=1;c<=i;c++){for(var u="",h=0;h<c;h++)u+="$";a.push(u)}var d=Array.prototype.join.call(a,",");return t=new Function(d,"return "+e),l[e]=t,t}var p=e.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);return t=new Function(p[1],"return "+p[2]),l[e]=t,t}return e},isIEnumerable:function(e){if("undefined"!=typeof Enumerator)try{return new Enumerator(e),!0}catch(t){}return!1},defineProperty:null!=Object.defineProperties?function(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}:function(e,t,n){e[t]=n},compare:function(e,t){return e===t?0:e>t?1:-1},dispose:function(e){null!=e&&e.dispose()},hasNativeIteratorSupport:function(){return"undefined"!=typeof Symbol&&void 0!==Symbol.iterator}},u=function(e,t,n){var r=new h,i=0;this.current=r.current,this.moveNext=function(){try{switch(i){case 0:i=1,e();case 1:return!!t.apply(r)||(this.dispose(),!1);case 2:return!1}}catch(n){throw this.dispose(),n}},this.dispose=function(){if(1==i)try{n()}finally{i=2}}},h=function(){var e=null;this.current=function(){return e},this.yieldReturn=function(t){return e=t,!0},this.yieldBreak=function(){return!1}},d=function(e){this.getEnumerator=e};(d.Utils={}).createLambda=function(e){return c.createLambda(e)},d.Utils.createEnumerable=function(e){return new d(e)},d.Utils.createEnumerator=function(e,t,n){return new u(e,t,n)},d.Utils.extendTo=function(e){var t,n=e.prototype;for(var r in e===Array?(t=g.prototype,c.defineProperty(n,"getSource",function(){return this})):(t=d.prototype,c.defineProperty(n,"getEnumerator",function(){return d.from(this).getEnumerator()})),t){var i=t[r];n[r]!=i&&(null!=n[r]&&n[r+="ByLinq"]==i||i instanceof Function&&c.defineProperty(n,r,i))}},d.choice=function(){var e=arguments;return new d(function(){return new u(function(){e=e[0]instanceof Array?e[0]:null!=e[0].getEnumerator?e[0].toArray():e},function(){return this.yieldReturn(e[Math.floor(Math.random()*e.length)])},s.Blank)})},d.cycle=function(){var e=arguments;return new d(function(){var t=0;return new u(function(){e=e[0]instanceof Array?e[0]:null!=e[0].getEnumerator?e[0].toArray():e},function(){return t>=e.length&&(t=0),this.yieldReturn(e[t++])},s.Blank)})},d.empty=function(){return new d(function(){return new u(s.Blank,function(){return!1},s.Blank)})},d.from=function(e){if(null==e)return d.empty();if(e instanceof d)return e;if("number"==typeof e||"boolean"==typeof e)return d.repeat(e,1);if("string"==typeof e)return new d(function(){var t=0;return new u(s.Blank,function(){return t<e.length&&this.yieldReturn(e.charAt(t++))},s.Blank)});if("function"!=typeof e){if("number"==typeof e.length)return new g(e);if("undefined"!=typeof Symbol&&void 0!==e[Symbol.iterator])return new d(function(){return new u(s.Blank,function(){var t=e.next();return!t.done&&this.yieldReturn(t.value)},s.Blank)});if(!(e instanceof Object)&&c.isIEnumerable(e))return new d(function(){var t,n=!0;return new u(function(){t=new Enumerator(e)},function(){return n?n=!1:t.moveNext(),!t.atEnd()&&this.yieldReturn(t.item())},s.Blank)});if(typeof Windows===a&&"function"==typeof e.first)return new d(function(){var t,n=!0;return new u(function(){t=e.first()},function(){return n?n=!1:t.moveNext(),t.hasCurrent?this.yieldReturn(t.current):this.yieldBreak()},s.Blank)})}return new d(function(){var t=[],n=0;return new u(function(){for(var n in e){var r=e[n];r instanceof Function||!Object.prototype.hasOwnProperty.call(e,n)||t.push({key:n,value:r})}},function(){return n<t.length&&this.yieldReturn(t[n++])},s.Blank)})},d.make=function(e){return d.repeat(e,1)},d.matches=function(e,t,n){return null==n&&(n=""),t instanceof RegExp&&(n+=t.ignoreCase?"i":"",n+=t.multiline?"m":"",t=t.source),-1===n.indexOf("g")&&(n+="g"),new d(function(){var r;return new u(function(){r=new RegExp(t,n)},function(){var t=r.exec(e);return!!t&&this.yieldReturn(t)},s.Blank)})},d.range=function(e,t,n){return null==n&&(n=1),new d(function(){var r,i=0;return new u(function(){r=e-n},function(){return i++<t?this.yieldReturn(r+=n):this.yieldBreak()},s.Blank)})},d.rangeDown=function(e,t,n){return null==n&&(n=1),new d(function(){var r,i=0;return new u(function(){r=e+n},function(){return i++<t?this.yieldReturn(r-=n):this.yieldBreak()},s.Blank)})},d.rangeTo=function(e,t,n){return null==n&&(n=1),new d(e<t?function(){var r;return new u(function(){r=e-n},function(){var e=r+=n;return e<=t?this.yieldReturn(e):this.yieldBreak()},s.Blank)}:function(){var r;return new u(function(){r=e+n},function(){var e=r-=n;return e>=t?this.yieldReturn(e):this.yieldBreak()},s.Blank)})},d.repeat=function(e,t){return null!=t?d.repeat(e).take(t):new d(function(){return new u(s.Blank,function(){return this.yieldReturn(e)},s.Blank)})},d.repeatWithFinalize=function(e,t){return e=c.createLambda(e),t=c.createLambda(t),new d(function(){var n;return new u(function(){n=e()},function(){return this.yieldReturn(n)},function(){null!=n&&(t(n),n=null)})})},d.generate=function(e,t){return null!=t?d.generate(e).take(t):(e=c.createLambda(e),new d(function(){return new u(s.Blank,function(){return this.yieldReturn(e())},s.Blank)}))},d.toInfinity=function(e,t){return null==e&&(e=0),null==t&&(t=1),new d(function(){var n;return new u(function(){n=e-t},function(){return this.yieldReturn(n+=t)},s.Blank)})},d.toNegativeInfinity=function(e,t){return null==e&&(e=0),null==t&&(t=1),new d(function(){var n;return new u(function(){n=e+t},function(){return this.yieldReturn(n-=t)},s.Blank)})},d.unfold=function(e,t){return t=c.createLambda(t),new d(function(){var n,r=!0;return new u(s.Blank,function(){return r?(r=!1,this.yieldReturn(n=e)):(n=t(n),this.yieldReturn(n))},s.Blank)})},d.defer=function(e){return new d(function(){var t;return new u(function(){t=d.from(e()).getEnumerator()},function(){return t.moveNext()?this.yieldReturn(t.current()):this.yieldBreak()},function(){c.dispose(t)})})},d.prototype.traverseBreadthFirst=function(e,t){var n=this;return e=c.createLambda(e),t=c.createLambda(t),new d(function(){var r,i=0,o=[];return new u(function(){r=n.getEnumerator()},function(){for(;;){if(r.moveNext())return o.push(r.current()),this.yieldReturn(t(r.current(),i));var n=d.from(o).selectMany(function(t){return e(t)});if(!n.any())return!1;i++,o=[],c.dispose(r),r=n.getEnumerator()}},function(){c.dispose(r)})})},d.prototype.traverseDepthFirst=function(e,t){var n=this;return e=c.createLambda(e),t=c.createLambda(t),new d(function(){var r,i=[];return new u(function(){r=n.getEnumerator()},function(){for(;;){if(r.moveNext()){var n=t(r.current(),i.length);return i.push(r),r=d.from(e(r.current())).getEnumerator(),this.yieldReturn(n)}if(i.length<=0)return!1;c.dispose(r),r=i.pop()}},function(){try{c.dispose(r)}finally{d.from(i).forEach(function(e){e.dispose()})}})})},d.prototype.flatten=function(){var e=this;return new d(function(){var t,n=null;return new u(function(){t=e.getEnumerator()},function(){for(;;){if(null!=n){if(n.moveNext())return this.yieldReturn(n.current());n=null}if(t.moveNext()){if(t.current()instanceof Array){c.dispose(n),n=d.from(t.current()).selectMany(s.Identity).flatten().getEnumerator();continue}return this.yieldReturn(t.current())}return!1}},function(){try{c.dispose(t)}finally{c.dispose(n)}})})},d.prototype.pairwise=function(e){var t=this;return e=c.createLambda(e),new d(function(){var n;return new u(function(){(n=t.getEnumerator()).moveNext()},function(){var t=n.current();return!!n.moveNext()&&this.yieldReturn(e(t,n.current()))},function(){c.dispose(n)})})},d.prototype.scan=function(e,t){var n;null==t?(t=c.createLambda(e),n=!1):(t=c.createLambda(t),n=!0);var r=this;return new d(function(){var i,o,s=!0;return new u(function(){i=r.getEnumerator()},function(){if(s){if(s=!1,n)return this.yieldReturn(o=e);if(i.moveNext())return this.yieldReturn(o=i.current())}return!!i.moveNext()&&this.yieldReturn(o=t(o,i.current()))},function(){c.dispose(i)})})},d.prototype.select=function(e){if((e=c.createLambda(e)).length<=1)return new _(this,null,e);var t=this;return new d(function(){var n,r=0;return new u(function(){n=t.getEnumerator()},function(){return!!n.moveNext()&&this.yieldReturn(e(n.current(),r++))},function(){c.dispose(n)})})},d.prototype.selectMany=function(e,t){var n=this;return e=c.createLambda(e),null==t&&(t=function(e,t){return t}),t=c.createLambda(t),new d(function(){var r,i=void 0,o=0;return new u(function(){r=n.getEnumerator()},function(){if(void 0===i&&!r.moveNext())return!1;do{if(null==i){var n=e(r.current(),o++);i=d.from(n).getEnumerator()}if(i.moveNext())return this.yieldReturn(t(r.current(),i.current()));c.dispose(i),i=null}while(r.moveNext());return!1},function(){try{c.dispose(r)}finally{c.dispose(i)}})})},d.prototype.where=function(e){if((e=c.createLambda(e)).length<=1)return new y(this,e);var t=this;return new d(function(){var n,r=0;return new u(function(){n=t.getEnumerator()},function(){for(;n.moveNext();)if(e(n.current(),r++))return this.yieldReturn(n.current());return!1},function(){c.dispose(n)})})},d.prototype.choose=function(e){e=c.createLambda(e);var t=this;return new d(function(){var n,r=0;return new u(function(){n=t.getEnumerator()},function(){for(;n.moveNext();){var t=e(n.current(),r++);if(null!=t)return this.yieldReturn(t)}return this.yieldBreak()},function(){c.dispose(n)})})},d.prototype.ofType=function(e){var t;switch(e){case Number:t="number";break;case String:t="string";break;case Boolean:t="boolean";break;case Function:t="function";break;default:t=null}return this.where(null===t?function(t){return t instanceof e}:function(e){return typeof e===t})},d.prototype.zip=function(){var e=arguments,t=c.createLambda(arguments[arguments.length-1]),n=this;if(2==arguments.length){var r=arguments[0];return new d(function(){var e,i,o=0;return new u(function(){e=n.getEnumerator(),i=d.from(r).getEnumerator()},function(){return!(!e.moveNext()||!i.moveNext())&&this.yieldReturn(t(e.current(),i.current(),o++))},function(){try{c.dispose(e)}finally{c.dispose(i)}})})}return new d(function(){var r,i=0;return new u(function(){var t=d.make(n).concat(d.from(e).takeExceptLast().select(d.from)).select(function(e){return e.getEnumerator()}).toArray();r=d.from(t)},function(){if(r.all(function(e){return e.moveNext()})){var e=r.select(function(e){return e.current()}).toArray();return e.push(i++),this.yieldReturn(t.apply(null,e))}return this.yieldBreak()},function(){d.from(r).forEach(c.dispose)})})},d.prototype.merge=function(){var e=arguments,t=this;return new d(function(){var n,r=-1;return new u(function(){n=d.make(t).concat(d.from(e).select(d.from)).select(function(e){return e.getEnumerator()}).toArray()},function(){for(;n.length>0;){var e=n[r=r>=n.length-1?0:r+1];if(e.moveNext())return this.yieldReturn(e.current());e.dispose(),n.splice(r--,1)}return this.yieldBreak()},function(){d.from(n).forEach(c.dispose)})})},d.prototype.join=function(e,t,n,r,i){t=c.createLambda(t),n=c.createLambda(n),r=c.createLambda(r),i=c.createLambda(i);var o=this;return new d(function(){var a,l,h=null,p=0;return new u(function(){a=o.getEnumerator(),l=d.from(e).toLookup(n,s.Identity,i)},function(){for(;;){if(null!=h){var e=h[p++];if(void 0!==e)return this.yieldReturn(r(a.current(),e));e=null,p=0}if(!a.moveNext())return!1;var n=t(a.current());h=l.get(n).toArray()}},function(){c.dispose(a)})})},d.prototype.groupJoin=function(e,t,n,r,i){t=c.createLambda(t),n=c.createLambda(n),r=c.createLambda(r),i=c.createLambda(i);var o=this;return new d(function(){var a=o.getEnumerator(),l=null;return new u(function(){a=o.getEnumerator(),l=d.from(e).toLookup(n,s.Identity,i)},function(){if(a.moveNext()){var e=l.get(t(a.current()));return this.yieldReturn(r(a.current(),e))}return!1},function(){c.dispose(a)})})},d.prototype.all=function(e){e=c.createLambda(e);var t=!0;return this.forEach(function(n){if(!e(n))return t=!1,!1}),t},d.prototype.any=function(e){e=c.createLambda(e);var t=this.getEnumerator();try{if(0==arguments.length)return t.moveNext();for(;t.moveNext();)if(e(t.current()))return!0;return!1}finally{c.dispose(t)}},d.prototype.isEmpty=function(){return!this.any()},d.prototype.concat=function(){var e=this;if(1==arguments.length){var t=arguments[0];return new d(function(){var n,r;return new u(function(){n=e.getEnumerator()},function(){if(null==r){if(n.moveNext())return this.yieldReturn(n.current());r=d.from(t).getEnumerator()}return!!r.moveNext()&&this.yieldReturn(r.current())},function(){try{c.dispose(n)}finally{c.dispose(r)}})})}var n=arguments;return new d(function(){var t;return new u(function(){t=d.make(e).concat(d.from(n).select(d.from)).select(function(e){return e.getEnumerator()}).toArray()},function(){for(;t.length>0;){var e=t[0];if(e.moveNext())return this.yieldReturn(e.current());e.dispose(),t.splice(0,1)}return this.yieldBreak()},function(){d.from(t).forEach(c.dispose)})})},d.prototype.insert=function(e,t){var n=this;return new d(function(){var r,i,o=0,s=!1;return new u(function(){r=n.getEnumerator(),i=d.from(t).getEnumerator()},function(){return o==e&&i.moveNext()?(s=!0,this.yieldReturn(i.current())):r.moveNext()?(o++,this.yieldReturn(r.current())):!(s||!i.moveNext())&&this.yieldReturn(i.current())},function(){try{c.dispose(r)}finally{c.dispose(i)}})})},d.prototype.alternate=function(e){var t=this;return new d(function(){var n,r,i,o;return new u(function(){i=e instanceof Array||null!=e.getEnumerator?d.from(d.from(e).toArray()):d.make(e),(r=t.getEnumerator()).moveNext()&&(n=r.current())},function(){for(;;){if(null!=o){if(o.moveNext())return this.yieldReturn(o.current());o=null}if(null!=n||!r.moveNext()){if(null!=n){var e=n;return n=null,this.yieldReturn(e)}return this.yieldBreak()}n=r.current(),o=i.getEnumerator()}},function(){try{c.dispose(r)}finally{c.dispose(o)}})})},d.prototype.contains=function(e,t){t=c.createLambda(t);var n=this.getEnumerator();try{for(;n.moveNext();)if(t(n.current())===e)return!0;return!1}finally{c.dispose(n)}},d.prototype.defaultIfEmpty=function(e){var t=this;return void 0===e&&(e=null),new d(function(){var n,r=!0;return new u(function(){n=t.getEnumerator()},function(){return n.moveNext()?(r=!1,this.yieldReturn(n.current())):!!r&&(r=!1,this.yieldReturn(e))},function(){c.dispose(n)})})},d.prototype.distinct=function(e){return this.except(d.empty(),e)},d.prototype.distinctUntilChanged=function(e){e=c.createLambda(e);var t=this;return new d(function(){var n,r,i;return new u(function(){n=t.getEnumerator()},function(){for(;n.moveNext();){var t=e(n.current());if(i)return i=!1,r=t,this.yieldReturn(n.current());if(r!==t)return r=t,this.yieldReturn(n.current())}return this.yieldBreak()},function(){c.dispose(n)})})},d.prototype.except=function(e,t){t=c.createLambda(t);var n=this;return new d(function(){var r,i;return new u(function(){r=n.getEnumerator(),i=new v(t),d.from(e).forEach(function(e){i.add(e)})},function(){for(;r.moveNext();){var e=r.current();if(!i.contains(e))return i.add(e),this.yieldReturn(e)}return!1},function(){c.dispose(r)})})},d.prototype.intersect=function(e,t){t=c.createLambda(t);var n=this;return new d(function(){var r,i,o;return new u(function(){r=n.getEnumerator(),i=new v(t),d.from(e).forEach(function(e){i.add(e)}),o=new v(t)},function(){for(;r.moveNext();){var e=r.current();if(!o.contains(e)&&i.contains(e))return o.add(e),this.yieldReturn(e)}return!1},function(){c.dispose(r)})})},d.prototype.sequenceEqual=function(e,t){t=c.createLambda(t);var n=this.getEnumerator();try{var r=d.from(e).getEnumerator();try{for(;n.moveNext();)if(!r.moveNext()||t(n.current())!==t(r.current()))return!1;return!r.moveNext()}finally{c.dispose(r)}}finally{c.dispose(n)}},d.prototype.union=function(e,t){t=c.createLambda(t);var n=this;return new d(function(){var r,i,o;return new u(function(){r=n.getEnumerator(),o=new v(t)},function(){var t;if(void 0===i){for(;r.moveNext();)if(t=r.current(),!o.contains(t))return o.add(t),this.yieldReturn(t);i=d.from(e).getEnumerator()}for(;i.moveNext();)if(t=i.current(),!o.contains(t))return o.add(t),this.yieldReturn(t);return!1},function(){try{c.dispose(r)}finally{c.dispose(i)}})})},d.prototype.orderBy=function(e){return new p(this,e,!1)},d.prototype.orderByDescending=function(e){return new p(this,e,!0)},d.prototype.reverse=function(){var e=this;return new d(function(){var t,n;return new u(function(){t=e.toArray(),n=t.length},function(){return n>0&&this.yieldReturn(t[--n])},s.Blank)})},d.prototype.shuffle=function(){var e=this;return new d(function(){var t;return new u(function(){t=e.toArray()},function(){if(t.length>0){var e=Math.floor(Math.random()*t.length);return this.yieldReturn(t.splice(e,1)[0])}return!1},s.Blank)})},d.prototype.weightedSample=function(e){e=c.createLambda(e);var t=this;return new d(function(){var n,r=0;return new u(function(){n=t.choose(function(t){var n=e(t);return n<=0?null:{value:t,bound:r+=n}}).toArray()},function(){if(n.length>0){for(var e=Math.floor(Math.random()*r)+1,t=-1,i=n.length;i-t>1;){var o=Math.floor((t+i)/2);n[o].bound>=e?i=o:t=o}return this.yieldReturn(n[i].value)}return this.yieldBreak()},s.Blank)})},d.prototype.groupBy=function(e,t,n,r){var i=this;return e=c.createLambda(e),t=c.createLambda(t),null!=n&&(n=c.createLambda(n)),r=c.createLambda(r),new d(function(){var o;return new u(function(){o=i.toLookup(e,t,r).toEnumerable().getEnumerator()},function(){for(;o.moveNext();)return this.yieldReturn(null==n?o.current():n(o.current().key(),o.current()));return!1},function(){c.dispose(o)})})},d.prototype.partitionBy=function(e,t,n,r){var i,o=this;return e=c.createLambda(e),t=c.createLambda(t),r=c.createLambda(r),null==n?(i=!1,n=function(e,t){return new w(e,t)}):(i=!0,n=c.createLambda(n)),new d(function(){var s,a,l,h=[];return new u(function(){(s=o.getEnumerator()).moveNext()&&(a=e(s.current()),l=r(a),h.push(t(s.current())))},function(){for(var o;1==(o=s.moveNext())&&l===r(e(s.current()));)h.push(t(s.current()));if(h.length>0){var c=n(a,i?d.from(h):h);return o?(a=e(s.current()),l=r(a),h=[t(s.current())]):h=[],this.yieldReturn(c)}return!1},function(){c.dispose(s)})})},d.prototype.buffer=function(e){var t=this;return new d(function(){var n;return new u(function(){n=t.getEnumerator()},function(){for(var t=[],r=0;n.moveNext();)if(t.push(n.current()),++r>=e)return this.yieldReturn(t);return t.length>0&&this.yieldReturn(t)},function(){c.dispose(n)})})},d.prototype.aggregate=function(e,t,n){return(n=c.createLambda(n))(this.scan(e,t,n).last())},d.prototype.average=function(e){e=c.createLambda(e);var t=0,n=0;return this.forEach(function(r){t+=e(r),++n}),t/n},d.prototype.count=function(e){e=null==e?s.True:c.createLambda(e);var t=0;return this.forEach(function(n,r){e(n,r)&&++t}),t},d.prototype.max=function(e){return null==e&&(e=s.Identity),this.select(e).aggregate(function(e,t){return e>t?e:t})},d.prototype.min=function(e){return null==e&&(e=s.Identity),this.select(e).aggregate(function(e,t){return e<t?e:t})},d.prototype.maxBy=function(e){return e=c.createLambda(e),this.aggregate(function(t,n){return e(t)>e(n)?t:n})},d.prototype.minBy=function(e){return e=c.createLambda(e),this.aggregate(function(t,n){return e(t)<e(n)?t:n})},d.prototype.sum=function(e){return null==e&&(e=s.Identity),this.select(e).aggregate(0,function(e,t){return e+t})},d.prototype.elementAt=function(e){var t,n=!1;if(this.forEach(function(r,i){if(i==e)return t=r,n=!0,!1}),!n)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return t},d.prototype.elementAtOrDefault=function(e,t){var n;void 0===t&&(t=null);var r=!1;return this.forEach(function(t,i){if(i==e)return n=t,r=!0,!1}),r?n:t},d.prototype.first=function(e){if(null!=e)return this.where(e).first();var t,n=!1;if(this.forEach(function(e){return t=e,n=!0,!1}),!n)throw new Error("first:No element satisfies the condition.");return t},d.prototype.firstOrDefault=function(e,t){if(void 0!==e){if("function"==typeof e||"function"==typeof c.createLambda(e))return this.where(e).firstOrDefault(void 0,t);t=e}var n,r=!1;return this.forEach(function(e){return n=e,r=!0,!1}),r?n:t},d.prototype.last=function(e){if(null!=e)return this.where(e).last();var t,n=!1;if(this.forEach(function(e){n=!0,t=e}),!n)throw new Error("last:No element satisfies the condition.");return t},d.prototype.lastOrDefault=function(e,t){if(void 0!==e){if("function"==typeof e||"function"==typeof c.createLambda(e))return this.where(e).lastOrDefault(void 0,t);t=e}var n,r=!1;return this.forEach(function(e){r=!0,n=e}),r?n:t},d.prototype.single=function(e){if(null!=e)return this.where(e).single();var t,n=!1;if(this.forEach(function(e){if(n)throw new Error("single:sequence contains more than one element.");n=!0,t=e}),!n)throw new Error("single:No element satisfies the condition.");return t},d.prototype.singleOrDefault=function(e,t){if(void 0===t&&(t=null),null!=e)return this.where(e).singleOrDefault(null,t);var n,r=!1;return this.forEach(function(e){if(r)throw new Error("single:sequence contains more than one element.");r=!0,n=e}),r?n:t},d.prototype.skip=function(e){var t=this;return new d(function(){var n,r=0;return new u(function(){for(n=t.getEnumerator();r++<e&&n.moveNext(););},function(){return!!n.moveNext()&&this.yieldReturn(n.current())},function(){c.dispose(n)})})},d.prototype.skipWhile=function(e){e=c.createLambda(e);var t=this;return new d(function(){var n,r=0,i=!1;return new u(function(){n=t.getEnumerator()},function(){for(;!i;){if(!n.moveNext())return!1;if(!e(n.current(),r++))return i=!0,this.yieldReturn(n.current())}return!!n.moveNext()&&this.yieldReturn(n.current())},function(){c.dispose(n)})})},d.prototype.take=function(e){var t=this;return new d(function(){var n,r=0;return new u(function(){n=t.getEnumerator()},function(){return!!(r++<e&&n.moveNext())&&this.yieldReturn(n.current())},function(){c.dispose(n)})})},d.prototype.takeWhile=function(e){e=c.createLambda(e);var t=this;return new d(function(){var n,r=0;return new u(function(){n=t.getEnumerator()},function(){return!(!n.moveNext()||!e(n.current(),r++))&&this.yieldReturn(n.current())},function(){c.dispose(n)})})},d.prototype.takeExceptLast=function(e){null==e&&(e=1);var t=this;return new d(function(){if(e<=0)return t.getEnumerator();var n,r=[];return new u(function(){n=t.getEnumerator()},function(){for(;n.moveNext();){if(r.length==e)return r.push(n.current()),this.yieldReturn(r.shift());r.push(n.current())}return!1},function(){c.dispose(n)})})},d.prototype.takeFromLast=function(e){if(e<=0||null==e)return d.empty();var t=this;return new d(function(){var n,r,i=[];return new u(function(){n=t.getEnumerator()},function(){for(;n.moveNext();)i.length==e&&i.shift(),i.push(n.current());return null==r&&(r=d.from(i).getEnumerator()),!!r.moveNext()&&this.yieldReturn(r.current())},function(){c.dispose(r)})})},d.prototype.indexOf=function(e){var t=null;return this.forEach("function"==typeof e?function(n,r){if(e(n,r))return t=r,!1}:function(n,r){if(n===e)return t=r,!1}),null!==t?t:-1},d.prototype.lastIndexOf=function(e){var t=-1;return this.forEach("function"==typeof e?function(n,r){e(n,r)&&(t=r)}:function(n,r){n===e&&(t=r)}),t},d.prototype.cast=function(){return this},d.prototype.asEnumerable=function(){return d.from(this)},d.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},d.prototype.toLookup=function(e,t,n){e=c.createLambda(e),t=c.createLambda(t),n=c.createLambda(n);var r=new v(n);return this.forEach(function(n){var i=e(n),o=t(n),s=r.get(i);void 0!==s?s.push(o):r.add(i,[o])}),new b(r)},d.prototype.toObject=function(e,t){e=c.createLambda(e),t=c.createLambda(t);var n={};return this.forEach(function(r){n[e(r)]=t(r)}),n},d.prototype.toDictionary=function(e,t,n){e=c.createLambda(e),t=c.createLambda(t),n=c.createLambda(n);var r=new v(n);return this.forEach(function(n){r.add(e(n),t(n))}),r},d.prototype.toJSONString=function(e,t){if("undefined"==typeof JSON||null==JSON.stringify)throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js");return JSON.stringify(this.toArray(),e,t)},d.prototype.toJoinedString=function(e,t){return null==e&&(e=""),null==t&&(t=s.Identity),this.select(t).toArray().join(e)},d.prototype.doAction=function(e){var t=this;return e=c.createLambda(e),new d(function(){var n,r=0;return new u(function(){n=t.getEnumerator()},function(){return!!n.moveNext()&&(e(n.current(),r++),this.yieldReturn(n.current()))},function(){c.dispose(n)})})},d.prototype.forEach=function(e){e=c.createLambda(e);var t=0,n=this.getEnumerator();try{for(;n.moveNext()&&!1!==e(n.current(),t++););}finally{c.dispose(n)}},d.prototype.write=function(e,t){null==e&&(e=""),t=c.createLambda(t);var n=!0;this.forEach(function(r){n?n=!1:document.write(e),document.write(t(r))})},d.prototype.writeLine=function(e){e=c.createLambda(e),this.forEach(function(t){document.writeln(e(t)+"<br />")})},d.prototype.force=function(){var e=this.getEnumerator();try{for(;e.moveNext(););}finally{c.dispose(e)}},d.prototype.letBind=function(e){e=c.createLambda(e);var t=this;return new d(function(){var n;return new u(function(){n=d.from(e(t)).getEnumerator()},function(){return!!n.moveNext()&&this.yieldReturn(n.current())},function(){c.dispose(n)})})},d.prototype.share=function(){var e,t=this,n=!1;return new m(function(){return new u(function(){null==e&&(e=t.getEnumerator())},function(){if(n)throw new Error("enumerator is disposed");return!!e.moveNext()&&this.yieldReturn(e.current())},s.Blank)},function(){n=!0,c.dispose(e)})},d.prototype.memoize=function(){var e,t,n=this,r=!1;return new m(function(){var i=-1;return new u(function(){null==t&&(t=n.getEnumerator(),e=[])},function(){if(r)throw new Error("enumerator is disposed");return i++,e.length<=i?!!t.moveNext()&&this.yieldReturn(e[i]=t.current()):this.yieldReturn(e[i])},s.Blank)},function(){r=!0,c.dispose(t),e=null})},c.hasNativeIteratorSupport()&&(d.prototype[Symbol.iterator]=function(){return{enumerator:this.getEnumerator(),next:function(){return this.enumerator.moveNext()?{done:!1,value:this.enumerator.current()}:{done:!0}}}}),d.prototype.catchError=function(e){e=c.createLambda(e);var t=this;return new d(function(){var n;return new u(function(){n=t.getEnumerator()},function(){try{return!!n.moveNext()&&this.yieldReturn(n.current())}catch(t){return e(t),!1}},function(){c.dispose(n)})})},d.prototype.finallyAction=function(e){e=c.createLambda(e);var t=this;return new d(function(){var n;return new u(function(){n=t.getEnumerator()},function(){return!!n.moveNext()&&this.yieldReturn(n.current())},function(){try{c.dispose(n)}finally{e()}})})},d.prototype.log=function(e){return e=c.createLambda(e),this.doAction(function(t){"undefined"!=typeof console&&console.log(e(t))})},d.prototype.trace=function(e,t){return null==e&&(e="Trace"),t=c.createLambda(t),this.doAction(function(n){"undefined"!=typeof console&&console.log(e,t(n))})};var p=function(e,t,n,r){this.source=e,this.keySelector=c.createLambda(t),this.descending=n,this.parent=r};p.prototype=new d,p.prototype.createOrderedEnumerable=function(e,t){return new p(this.source,e,t,this)},p.prototype.thenBy=function(e){return this.createOrderedEnumerable(e,!1)},p.prototype.thenByDescending=function(e){return this.createOrderedEnumerable(e,!0)},p.prototype.getEnumerator=function(){var e,t,n=this,r=0;return new u(function(){e=[],t=[],n.source.forEach(function(n,r){e.push(n),t.push(r)});var r=f.create(n,null);r.GenerateKeys(e),t.sort(function(e,t){return r.compare(e,t)})},function(){return r<t.length&&this.yieldReturn(e[t[r++]])},s.Blank)};var f=function(e,t,n){this.keySelector=e,this.descending=t,this.child=n,this.keys=null};f.create=function(e,t){var n=new f(e.keySelector,e.descending,t);return null!=e.parent?f.create(e.parent,n):n},f.prototype.GenerateKeys=function(e){for(var t=e.length,n=this.keySelector,r=new Array(t),i=0;i<t;i++)r[i]=n(e[i]);this.keys=r,null!=this.child&&this.child.GenerateKeys(e)},f.prototype.compare=function(e,t){var n=c.compare(this.keys[e],this.keys[t]);return 0==n?null!=this.child?this.child.compare(e,t):c.compare(e,t):this.descending?-n:n};var m=function(e,t){this.dispose=t,d.call(this,e)};m.prototype=new d;var g=function(e){this.getSource=function(){return e}};g.prototype=new d,g.prototype.any=function(e){return null==e?this.getSource().length>0:d.prototype.any.apply(this,arguments)},g.prototype.count=function(e){return null==e?this.getSource().length:d.prototype.count.apply(this,arguments)},g.prototype.elementAt=function(e){var t=this.getSource();return 0<=e&&e<t.length?t[e]:d.prototype.elementAt.apply(this,arguments)},g.prototype.elementAtOrDefault=function(e,t){void 0===t&&(t=null);var n=this.getSource();return 0<=e&&e<n.length?n[e]:t},g.prototype.first=function(e){var t=this.getSource();return null==e&&t.length>0?t[0]:d.prototype.first.apply(this,arguments)},g.prototype.firstOrDefault=function(e,t){if(void 0!==e)return d.prototype.firstOrDefault.apply(this,arguments);t=e;var n=this.getSource();return n.length>0?n[0]:t},g.prototype.last=function(e){var t=this.getSource();return null==e&&t.length>0?t[t.length-1]:d.prototype.last.apply(this,arguments)},g.prototype.lastOrDefault=function(e,t){if(void 0!==e)return d.prototype.lastOrDefault.apply(this,arguments);t=e;var n=this.getSource();return n.length>0?n[n.length-1]:t},g.prototype.skip=function(e){var t=this.getSource();return new d(function(){var n;return new u(function(){n=e<0?0:e},function(){return n<t.length&&this.yieldReturn(t[n++])},s.Blank)})},g.prototype.takeExceptLast=function(e){return null==e&&(e=1),this.take(this.getSource().length-e)},g.prototype.takeFromLast=function(e){return this.skip(this.getSource().length-e)},g.prototype.reverse=function(){var e=this.getSource();return new d(function(){var t;return new u(function(){t=e.length},function(){return t>0&&this.yieldReturn(e[--t])},s.Blank)})},g.prototype.sequenceEqual=function(e,t){return(!(e instanceof g||e instanceof Array)||null!=t||d.from(e).count()==this.count())&&d.prototype.sequenceEqual.apply(this,arguments)},g.prototype.toJoinedString=function(e,t){var n=this.getSource();return null==t&&n instanceof Array?(null==e&&(e=""),n.join(e)):d.prototype.toJoinedString.apply(this,arguments)},g.prototype.getEnumerator=function(){var e=this.getSource(),t=-1;return{current:function(){return e[t]},moveNext:function(){return++t<e.length},dispose:s.Blank}};var y=function(e,t){this.prevSource=e,this.prevPredicate=t};y.prototype=new d,y.prototype.where=function(e){if((e=c.createLambda(e)).length<=1){var t=this.prevPredicate;return new y(this.prevSource,function(n){return t(n)&&e(n)})}return d.prototype.where.call(this,e)},y.prototype.select=function(e){return(e=c.createLambda(e)).length<=1?new _(this.prevSource,this.prevPredicate,e):d.prototype.select.call(this,e)},y.prototype.getEnumerator=function(){var e,t=this.prevPredicate,n=this.prevSource;return new u(function(){e=n.getEnumerator()},function(){for(;e.moveNext();)if(t(e.current()))return this.yieldReturn(e.current());return!1},function(){c.dispose(e)})};var _=function(e,t,n){this.prevSource=e,this.prevPredicate=t,this.prevSelector=n};_.prototype=new d,_.prototype.where=function(e){return(e=c.createLambda(e)).length<=1?new y(this,e):d.prototype.where.call(this,e)},_.prototype.select=function(e){if((e=c.createLambda(e)).length<=1){var t=this.prevSelector;return new _(this.prevSource,this.prevPredicate,function(n){return e(t(n))})}return d.prototype.select.call(this,e)},_.prototype.getEnumerator=function(){var e,t=this.prevPredicate,n=this.prevSelector,r=this.prevSource;return new u(function(){e=r.getEnumerator()},function(){for(;e.moveNext();)if(null==t||t(e.current()))return this.yieldReturn(n(e.current()));return!1},function(){c.dispose(e)})};var v=function(){var e=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t=function(e){return null===e?"null":void 0===e?"undefined":"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)},n=function(e,t){this.key=e,this.value=t,this.prev=null,this.next=null},r=function(){this.first=null,this.last=null};r.prototype={addLast:function(e){null!=this.last?(this.last.next=e,e.prev=this.last,this.last=e):this.first=this.last=e},replace:function(e,t){null!=e.prev?(e.prev.next=t,t.prev=e.prev):this.first=t,null!=e.next?(e.next.prev=t,t.next=e.next):this.last=t},remove:function(e){null!=e.prev?e.prev.next=e.next:this.first=e.next,null!=e.next?e.next.prev=e.prev:this.last=e.prev}};var i=function(e){this.countField=0,this.entryList=new r,this.buckets={},this.compareSelector=null==e?s.Identity:e};return i.prototype={add:function(r,i){var o=this.compareSelector(r),s=t(o),a=new n(r,i);if(e(this.buckets,s)){for(var l=this.buckets[s],c=0;c<l.length;c++)if(this.compareSelector(l[c].key)===o)return this.entryList.replace(l[c],a),void(l[c]=a);l.push(a)}else this.buckets[s]=[a];this.countField++,this.entryList.addLast(a)},get:function(n){var r=this.compareSelector(n),i=t(r);if(e(this.buckets,i))for(var o=this.buckets[i],s=0;s<o.length;s++){var a=o[s];if(this.compareSelector(a.key)===r)return a.value}},set:function(r,i){var o=this.compareSelector(r),s=t(o);if(e(this.buckets,s))for(var a=this.buckets[s],l=0;l<a.length;l++)if(this.compareSelector(a[l].key)===o){var c=new n(r,i);return this.entryList.replace(a[l],c),a[l]=c,!0}return!1},contains:function(n){var r=this.compareSelector(n),i=t(r);if(!e(this.buckets,i))return!1;for(var o=this.buckets[i],s=0;s<o.length;s++)if(this.compareSelector(o[s].key)===r)return!0;return!1},clear:function(){this.countField=0,this.buckets={},this.entryList=new r},remove:function(n){var r=this.compareSelector(n),i=t(r);if(e(this.buckets,i))for(var o=this.buckets[i],s=0;s<o.length;s++)if(this.compareSelector(o[s].key)===r)return this.entryList.remove(o[s]),o.splice(s,1),0==o.length&&delete this.buckets[i],void this.countField--},count:function(){return this.countField},toEnumerable:function(){var e=this;return new d(function(){var t;return new u(function(){t=e.entryList.first},function(){if(null!=t){var e={key:t.key,value:t.value};return t=t.next,this.yieldReturn(e)}return!1},s.Blank)})}},i}(),b=function(e){this.count=function(){return e.count()},this.get=function(t){return d.from(e.get(t))},this.contains=function(t){return e.contains(t)},this.toEnumerable=function(){return e.toEnumerable().select(function(e){return new w(e.key,e.value)})}},w=function(e,t){this.key=function(){return e},g.call(this,t)};w.prototype=new g,n("PDX0")?void 0===(r=(function(){return d}).apply(t,[]))||(e.exports=r):void 0!==e&&e.exports?e.exports=d:i.Enumerable=d}(this)},CZPu:function(e,t){e.exports={}},"F/us":function(e,t,n){var r;(function(){var n=this,i=n._,o=Array.prototype,s=Object.prototype,a=Function.prototype,l=o.push,c=o.slice,u=s.toString,h=s.hasOwnProperty,d=Array.isArray,p=Object.keys,f=a.bind,m=Object.create,g=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};e.exports&&(t=e.exports=y),t._=y,y.VERSION="1.8.3";var _=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},v=function(e,t,n){return null==e?y.identity:y.isFunction(e)?_(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return v(e,t,1/0)};var b=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,l=0;l<a;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}},w=function(e){if(!y.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},x=Math.pow(2,53)-1,E=C("length"),S=function(e){var t=E(e);return"number"==typeof t&&t>=0&&t<=x};function P(e){function t(t,n,r,i,o,s){for(;o>=0&&o<s;o+=e){var a=i?i[o]:o;r=n(r,t[a],a,t)}return r}return function(n,r,i,o){r=_(r,o,4);var s=!S(n)&&y.keys(n),a=(s||n).length,l=e>0?0:a-1;return arguments.length<3&&(i=n[s?s[l]:l],l+=e),t(n,r,i,s,l,a)}}y.each=y.forEach=function(e,t,n){var r,i;if(t=_(t,n),S(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=v(t,n);for(var r=!S(e)&&y.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o},y.reduce=y.foldl=y.inject=P(1),y.reduceRight=y.foldr=P(-1),y.find=y.detect=function(e,t,n){var r;if(void 0!==(r=S(e)?y.findIndex(e,t,n):y.findKey(e,t,n))&&-1!==r)return e[r]},y.filter=y.select=function(e,t,n){var r=[];return t=v(t,n),y.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(v(t)),n)},y.every=y.all=function(e,t,n){t=v(t,n);for(var r=!S(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,n){t=v(t,n);for(var r=!S(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return S(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=c.call(arguments,2),r=y.isFunction(t);return y.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t&&null!=e)for(var a=0,l=(e=S(e)?e:y.values(e)).length;a<l;a++)(r=e[a])>o&&(o=r);else t=v(t,n),y.each(e,function(e,n,r){((i=t(e,n,r))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o},y.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t&&null!=e)for(var a=0,l=(e=S(e)?e:y.values(e)).length;a<l;a++)(r=e[a])<o&&(o=r);else t=v(t,n),y.each(e,function(e,n,r){((i=t(e,n,r))<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},y.shuffle=function(e){for(var t,n=S(e)?e:y.values(e),r=n.length,i=Array(r),o=0;o<r;o++)(t=y.random(0,o))!==o&&(i[o]=i[t]),i[t]=n[o];return i},y.sample=function(e,t,n){return null==t||n?(S(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=v(t,n),y.pluck(y.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var i={};return n=v(n,r),y.each(t,function(r,o){var s=n(r,o,t);e(i,r,s)}),i}};y.groupBy=T(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=T(function(e,t,n){e[n]=t}),y.countBy=T(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?c.call(e):S(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:S(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=v(t,n);var r=[],i=[];return y.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},y.first=y.head=y.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var I=function(e,t,n,r){for(var i=[],o=0,s=r||0,a=E(e);s<a;s++){var l=e[s];if(S(l)&&(y.isArray(l)||y.isArguments(l))){t||(l=I(l,t,n));var c=0,u=l.length;for(i.length+=u;c<u;)i[o++]=l[c++]}else n||(i[o++]=l)}return i};function O(e){return function(t,n,r){n=v(n,r);for(var i=E(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function k(e,t,n){return function(r,i,o){var s=0,a=E(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(c.call(r,s,a),y.isNaN))>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}}y.flatten=function(e,t){return I(e,t,!1)},y.without=function(e){return y.difference(e,c.call(arguments,1))},y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=v(n,r));for(var i=[],o=[],s=0,a=E(e);s<a;s++){var l=e[s],c=n?n(l,s,e):l;t?(s&&o===c||i.push(l),o=c):n?y.contains(o,c)||(o.push(c),i.push(l)):y.contains(i,l)||i.push(l)}return i},y.union=function(){return y.uniq(I(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=E(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){for(var s=1;s<n&&y.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},y.difference=function(e){var t=I(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,E).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.object=function(e,t){for(var n={},r=0,i=E(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},y.findIndex=O(1),y.findLastIndex=O(-1),y.sortedIndex=function(e,t,n,r){for(var i=(n=v(n,r,1))(t),o=0,s=E(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o},y.indexOf=k(1,y.findIndex,y.sortedIndex),y.lastIndexOf=k(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var R=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=w(e.prototype),s=e.apply(o,i);return y.isObject(s)?s:o};y.bind=function(e,t){if(f&&e.bind===f)return f.apply(e,c.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),r=function(){return R(e,r,t,this,n.concat(c.call(arguments)))};return r},y.partial=function(e){var t=c.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),s=0;s<i;s++)o[s]=t[s]===y?arguments[r++]:t[s];for(;r<arguments.length;)o.push(arguments[r++]);return R(e,n,this,this,o)};return n},y.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e[n=arguments[t]]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return y.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,s=null,a=0;n||(n={});var l=function(){a=!1===n.leading?0:y.now(),s=null,o=e.apply(r,i),s||(r=i=null)};return function(){var c=y.now();a||!1!==n.leading||(a=c);var u=t-(c-a);return r=this,i=arguments,u<=0||u>t?(s&&(clearTimeout(s),s=null),a=c,o=e.apply(r,i),s||(r=i=null)):s||!1===n.trailing||(s=setTimeout(l,u)),o}},y.debounce=function(e,t,n){var r,i,o,s,a,l=function(){var c=y.now()-s;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=y.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(a=e.apply(o,i),o=i=null),a}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function D(e,t){var n=M.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||s,o="constructor";for(y.has(e,o)&&!y.contains(t,o)&&t.push(o);n--;)(o=M[n])in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)}y.keys=function(e){if(!y.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return A&&D(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&D(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=v(t,n);for(var r,i=y.keys(e),o=i.length,s={},a=0;a<o;a++)s[r=i[a]]=t(e[r],r,e);return s},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=b(y.allKeys),y.extendOwn=y.assign=b(y.keys),y.findKey=function(e,t,n){t=v(t,n);for(var r,i=y.keys(e),o=0,s=i.length;o<s;o++)if(t(e[r=i[o]],r,e))return r},y.pick=function(e,t,n){var r,i,o={},s=e;if(null==s)return o;y.isFunction(t)?(i=y.allKeys(s),r=_(t,n)):(i=I(arguments,!1,!1,1),r=function(e,t,n){return t in n},s=Object(s));for(var a=0,l=i.length;a<l;a++){var c=i[a],u=s[c];r(u,c,s)&&(o[c]=u)}return o},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var r=y.map(I(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(r,t)}}return y.pick(e,t,n)},y.defaults=b(y.allKeys,!0),y.create=function(e,t){var n=w(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0};var F=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=u.call(e);if(i!==u.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!F(e[l],t[l],n,r))return!1}else{var c,h=y.keys(e);if(l=h.length,y.keys(t).length!==l)return!1;for(;l--;)if(!y.has(t,c=h[l])||!F(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};y.isEqual=function(e,t){return F(e,t)},y.isEmpty=function(e){return null==e||(S(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=d||function(e){return"[object Array]"===u.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===u.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&h.call(e,t)},y.noConflict=function(){return n._=i,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=C,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=_(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=y.invert(L),N=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return r.test(e=null==e?"":""+e)?e.replace(i,t):e}};y.escape=N(L),y.unescape=N(B),y.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),y.isFunction(r)?r.call(e):r};var j=0;y.uniqueId=function(e){var t=++j+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,U=function(e){return"\\"+z[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||H).source,(t.interpolate||H).source,(t.evaluate||H).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,s,a){return o+=e.slice(i,a).replace(V,U),i=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(l){throw l.source=o,l}var a=function(e){return s.call(this,e,y)};return a.source="function("+(t.variable||"obj")+"){\n"+o+"}",a},y.chain=function(e){var t=y(e);return t._chain=!0,t};var W=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),W(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],W(this,n)}}),y.each(["concat","join","slice"],function(e){var t=o[e];y.prototype[e]=function(){return W(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},void 0===(r=(function(){return y}).apply(t,[]))||(e.exports=r)}).call(this)},GyMh:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.Key||(t.Key={}))[r.Backspace=8]="Backspace",r[r.Tab=9]="Tab",r[r.Enter=13]="Enter",r[r.Shift=16]="Shift",r[r.Ctrl=17]="Ctrl",r[r.Alt=18]="Alt",r[r.PauseBreak=19]="PauseBreak",r[r.CapsLock=20]="CapsLock",r[r.Escape=27]="Escape",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.LeftArrow=37]="LeftArrow",r[r.UpArrow=38]="UpArrow",r[r.RightArrow=39]="RightArrow",r[r.DownArrow=40]="DownArrow",r[r.Insert=45]="Insert",r[r.Delete=46]="Delete",r[r.Zero=48]="Zero",r[r.ClosedParen=48]="ClosedParen",r[r.One=49]="One",r[r.ExclamationMark=49]="ExclamationMark",r[r.Two=50]="Two",r[r.AtSign=50]="AtSign",r[r.Three=51]="Three",r[r.PoundSign=51]="PoundSign",r[r.Hash=51]="Hash",r[r.Four=52]="Four",r[r.DollarSign=52]="DollarSign",r[r.Five=53]="Five",r[r.PercentSign=53]="PercentSign",r[r.Six=54]="Six",r[r.Caret=54]="Caret",r[r.Hat=54]="Hat",r[r.Seven=55]="Seven",r[r.Ampersand=55]="Ampersand",r[r.Eight=56]="Eight",r[r.Star=56]="Star",r[r.Asterik=56]="Asterik",r[r.Nine=57]="Nine",r[r.OpenParen=57]="OpenParen",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.LeftWindowKey=91]="LeftWindowKey",r[r.RightWindowKey=92]="RightWindowKey",r[r.SelectKey=93]="SelectKey",r[r.Numpad0=96]="Numpad0",r[r.Numpad1=97]="Numpad1",r[r.Numpad2=98]="Numpad2",r[r.Numpad3=99]="Numpad3",r[r.Numpad4=100]="Numpad4",r[r.Numpad5=101]="Numpad5",r[r.Numpad6=102]="Numpad6",r[r.Numpad7=103]="Numpad7",r[r.Numpad8=104]="Numpad8",r[r.Numpad9=105]="Numpad9",r[r.Multiply=106]="Multiply",r[r.Add=107]="Add",r[r.Subtract=109]="Subtract",r[r.DecimalPoint=110]="DecimalPoint",r[r.Divide=111]="Divide",r[r.F1=112]="F1",r[r.F2=113]="F2",r[r.F3=114]="F3",r[r.F4=115]="F4",r[r.F5=116]="F5",r[r.F6=117]="F6",r[r.F7=118]="F7",r[r.F8=119]="F8",r[r.F9=120]="F9",r[r.F10=121]="F10",r[r.F11=122]="F11",r[r.F12=123]="F12",r[r.NumLock=144]="NumLock",r[r.ScrollLock=145]="ScrollLock",r[r.SemiColon=186]="SemiColon",r[r.Equals=187]="Equals",r[r.Comma=188]="Comma",r[r.Dash=189]="Dash",r[r.Period=190]="Period",r[r.UnderScore=189]="UnderScore",r[r.PlusSign=187]="PlusSign",r[r.ForwardSlash=191]="ForwardSlash",r[r.Tilde=192]="Tilde",r[r.GraveAccent=192]="GraveAccent",r[r.OpenBracket=219]="OpenBracket",r[r.ClosedBracket=221]="ClosedBracket",r[r.Quote=222]="Quote"},"Ju5/":function(e,t,n){"use strict";var r=n("XqMk"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();t.a=o},L3Qv:function(e,t,n){"use strict";t.a=function(){return!1}},LvDl:function(e,t,n){(function(e){var r;(function(){var i="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",l="[object Array]",c="[object Boolean]",u="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",f="[object Map]",m="[object Number]",g="[object Object]",y="[object RegExp]",_="[object Set]",v="[object String]",b="[object Symbol]",w="[object WeakMap]",C="[object ArrayBuffer]",x="[object DataView]",E="[object Float32Array]",S="[object Float64Array]",P="[object Int8Array]",T="[object Int16Array]",I="[object Int32Array]",O="[object Uint8Array]",k="[object Uint16Array]",R="[object Uint32Array]",A=/\b__p \+= '';/g,M=/\b(__p \+=) '' \+/g,D=/(__e\(.*?\)|\b__t\)) \+\n'';/g,F=/&(?:amp|lt|gt|quot|#39);/g,L=/[&<>"']/g,B=RegExp(F.source),N=RegExp(L.source),j=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,z=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/[\\^$.*+?()[\]{}|]/g,G=RegExp(X.source),q=/^\s+/,$=/\s/,Y=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,K=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,J=/[()=,{}\[\]\/\s]/,ee=/\\(\\)?/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,re=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,le=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ce=/($^)/,ue=/['\n\r\u2028\u2029\\]/g,he="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="["+de+"]",fe="["+he+"]",me="\\d+",ge="[a-z\\xdf-\\xf6\\xf8-\\xff]",ye="[^\\ud800-\\udfff"+de+me+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",_e="\\ud83c[\\udffb-\\udfff]",ve="[^\\ud800-\\udfff]",be="(?:\\ud83c[\\udde6-\\uddff]){2}",we="[\\ud800-\\udbff][\\udc00-\\udfff]",Ce="[A-Z\\xc0-\\xd6\\xd8-\\xde]",xe="(?:"+ge+"|"+ye+")",Ee="(?:"+Ce+"|"+ye+")",Se="(?:"+fe+"|"+_e+")?",Pe="[\\ufe0e\\ufe0f]?"+Se+"(?:\\u200d(?:"+[ve,be,we].join("|")+")[\\ufe0e\\ufe0f]?"+Se+")*",Te="(?:"+["[\\u2700-\\u27bf]",be,we].join("|")+")"+Pe,Ie="(?:"+[ve+fe+"?",fe,be,we,"[\\ud800-\\udfff]"].join("|")+")",Oe=RegExp("['\u2019]","g"),ke=RegExp(fe,"g"),Re=RegExp(_e+"(?="+_e+")|"+Ie+Pe,"g"),Ae=RegExp([Ce+"?"+ge+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[pe,Ce,"$"].join("|")+")",Ee+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[pe,Ce+xe,"$"].join("|")+")",Ce+"?"+xe+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ce+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",me,Te].join("|"),"g"),Me=RegExp("[\\u200d\\ud800-\\udfff"+he+"\\ufe0e\\ufe0f]"),De=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Le=-1,Be={};Be[E]=Be[S]=Be[P]=Be[T]=Be[I]=Be[O]=Be["[object Uint8ClampedArray]"]=Be[k]=Be[R]=!0,Be[a]=Be[l]=Be[C]=Be[c]=Be[x]=Be[u]=Be[h]=Be[d]=Be[f]=Be[m]=Be[g]=Be[y]=Be[_]=Be[v]=Be[w]=!1;var Ne={};Ne[a]=Ne[l]=Ne[C]=Ne[x]=Ne[c]=Ne[u]=Ne[E]=Ne[S]=Ne[P]=Ne[T]=Ne[I]=Ne[f]=Ne[m]=Ne[g]=Ne[y]=Ne[_]=Ne[v]=Ne[b]=Ne[O]=Ne["[object Uint8ClampedArray]"]=Ne[k]=Ne[R]=!0,Ne[h]=Ne[d]=Ne[w]=!1;var je={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},He=parseFloat,ze=parseInt,Ve="object"==typeof global&&global&&global.Object===Object&&global,Ue="object"==typeof self&&self&&self.Object===Object&&self,We=Ve||Ue||Function("return this")(),Xe=t&&!t.nodeType&&t,Ge=Xe&&"object"==typeof e&&e&&!e.nodeType&&e,qe=Ge&&Ge.exports===Xe,$e=qe&&Ve.process,Ye=function(){try{return Ge&&Ge.require&&Ge.require("util").types||$e&&$e.binding&&$e.binding("util")}catch(e){}}(),Ke=Ye&&Ye.isArrayBuffer,Qe=Ye&&Ye.isDate,Ze=Ye&&Ye.isMap,Je=Ye&&Ye.isRegExp,et=Ye&&Ye.isSet,tt=Ye&&Ye.isTypedArray;function nt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function rt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function it(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function at(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function lt(e,t){return!(null==e||!e.length)&&_t(e,t,0)>-1}function ct(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function ut(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function ht(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function dt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function pt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function ft(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var mt=Ct("length");function gt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function yt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function _t(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):yt(e,bt,n)}function vt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function bt(e){return e!=e}function wt(e,t){var n=null==e?0:e.length;return n?St(e,t)/n:NaN}function Ct(e){return function(t){return null==t?void 0:t[e]}}function xt(e){return function(t){return null==e?void 0:e[t]}}function Et(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function St(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Pt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Tt(e){return e?e.slice(0,Xt(e)+1).replace(q,""):e}function It(e){return function(t){return e(t)}}function Ot(e,t){return ut(t,function(t){return e[t]})}function kt(e,t){return e.has(t)}function Rt(e,t){for(var n=-1,r=e.length;++n<r&&_t(t,e[n],0)>-1;);return n}function At(e,t){for(var n=e.length;n--&&_t(t,e[n],0)>-1;);return n}function Mt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Dt=xt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Ft=xt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Lt(e){return"\\"+je[e]}function Bt(e){return Me.test(e)}function Nt(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function jt(e,t){return function(n){return e(t(n))}}function Ht(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n];a!==t&&a!==o||(e[n]=o,s[i++]=n)}return s}function zt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Vt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Ut(e){return Bt(e)?function(e){for(var t=Re.lastIndex=0;Re.test(e);)++t;return t}(e):mt(e)}function Wt(e){return Bt(e)?function(e){return e.match(Re)||[]}(e):function(e){return e.split("")}(e)}function Xt(e){for(var t=e.length;t--&&$.test(e.charAt(t)););return t}var Gt=xt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),qt=function e(t){var n,r=(t=null==t?We:qt.defaults(We.Object(),t,qt.pick(We,Fe))).Array,$=t.Date,he=t.Error,de=t.Function,pe=t.Math,fe=t.Object,me=t.RegExp,ge=t.String,ye=t.TypeError,_e=r.prototype,ve=fe.prototype,be=t["__core-js_shared__"],we=de.prototype.toString,Ce=ve.hasOwnProperty,xe=0,Ee=(n=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Se=ve.toString,Pe=we.call(fe),Te=We._,Ie=me("^"+we.call(Ce).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=qe?t.Buffer:void 0,Me=t.Symbol,je=t.Uint8Array,Ve=Re?Re.allocUnsafe:void 0,Ue=jt(fe.getPrototypeOf,fe),Xe=fe.create,Ge=ve.propertyIsEnumerable,$e=_e.splice,Ye=Me?Me.isConcatSpreadable:void 0,mt=Me?Me.iterator:void 0,xt=Me?Me.toStringTag:void 0,$t=function(){try{var e=Zi(fe,"defineProperty");return e({},"",{}),e}catch(t){}}(),Yt=t.clearTimeout!==We.clearTimeout&&t.clearTimeout,Kt=$&&$.now!==We.Date.now&&$.now,Qt=t.setTimeout!==We.setTimeout&&t.setTimeout,Zt=pe.ceil,Jt=pe.floor,en=fe.getOwnPropertySymbols,tn=Re?Re.isBuffer:void 0,nn=t.isFinite,rn=_e.join,on=jt(fe.keys,fe),sn=pe.max,an=pe.min,ln=$.now,cn=t.parseInt,un=pe.random,hn=_e.reverse,dn=Zi(t,"DataView"),pn=Zi(t,"Map"),fn=Zi(t,"Promise"),mn=Zi(t,"Set"),gn=Zi(t,"WeakMap"),yn=Zi(fe,"create"),_n=gn&&new gn,vn={},bn=Io(dn),wn=Io(pn),Cn=Io(fn),xn=Io(mn),En=Io(gn),Sn=Me?Me.prototype:void 0,Pn=Sn?Sn.valueOf:void 0,Tn=Sn?Sn.toString:void 0;function In(e){if(Xs(e)&&!Ds(e)&&!(e instanceof An)){if(e instanceof Rn)return e;if(Ce.call(e,"__wrapped__"))return Oo(e)}return new Rn(e)}var On=function(){function e(){}return function(t){if(!Ws(t))return{};if(Xe)return Xe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function kn(){}function Rn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function An(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Dn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Fn;++t<n;)this.add(e[t])}function Bn(e){var t=this.__data__=new Dn(e);this.size=t.size}function Nn(e,t){var n=Ds(e),r=!n&&Ms(e),i=!n&&!r&&Ns(e),o=!n&&!r&&!i&&Js(e),s=n||r||i||o,a=s?Pt(e.length,ge):[],l=a.length;for(var c in e)!t&&!Ce.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||oo(c,l))||a.push(c);return a}function jn(e){var t=e.length;return t?e[Fr(0,t-1)]:void 0}function Hn(e,t){return xo(gi(e),Yn(t,0,e.length))}function zn(e){return xo(gi(e))}function Vn(e,t,n){(void 0!==n&&!ks(e[t],n)||void 0===n&&!(t in e))&&qn(e,t,n)}function Un(e,t,n){var r=e[t];Ce.call(e,t)&&ks(r,n)&&(void 0!==n||t in e)||qn(e,t,n)}function Wn(e,t){for(var n=e.length;n--;)if(ks(e[n][0],t))return n;return-1}function Xn(e,t,n,r){return er(e,function(e,i,o){t(r,e,n(e),o)}),r}function Gn(e,t){return e&&yi(t,wa(t),e)}function qn(e,t,n){"__proto__"==t&&$t?$t(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function $n(e,t){for(var n=-1,i=t.length,o=r(i),s=null==e;++n<i;)o[n]=s?void 0:ga(e,t[n]);return o}function Yn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Kn(e,t,n,r,i,o){var s,l=1&t,h=2&t,w=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),void 0!==s)return s;if(!Ws(e))return e;var A=Ds(e);if(A){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ce.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return gi(e,s)}else{var M=to(e),D=M==d||M==p;if(Ns(e))return ui(e,l);if(M==g||M==a||D&&!i){if(s=h||D?{}:ro(e),!l)return h?function(e,t){return yi(e,eo(e),t)}(e,function(e,t){return e&&yi(t,Ca(t),e)}(s,e)):function(e,t){return yi(e,Ji(e),t)}(e,Gn(s,e))}else{if(!Ne[M])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case C:return hi(e);case c:case u:return new r(+e);case x:return function(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case E:case S:case P:case T:case I:case O:case"[object Uint8ClampedArray]":case k:case R:return di(e,n);case f:return new r;case m:case v:return new r(e);case y:return function(e){var t=new e.constructor(e.source,ne.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new r;case b:return Pn?fe(Pn.call(e)):{}}}(e,M,l)}}o||(o=new Bn);var F=o.get(e);if(F)return F;o.set(e,s),Ks(e)?e.forEach(function(r){s.add(Kn(r,t,n,r,e,o))}):Gs(e)&&e.forEach(function(r,i){s.set(i,Kn(r,t,n,i,e,o))});var L=A?void 0:(w?h?Xi:Wi:h?Ca:wa)(e);return it(L||e,function(r,i){L&&(r=e[i=r]),Un(s,i,Kn(r,t,n,i,e,o))}),s}function Qn(e,t,n){var r=n.length;if(null==e)return!r;for(e=fe(e);r--;){var i=n[r],o=e[i];if(void 0===o&&!(i in e)||!(0,t[i])(o))return!1}return!0}function Zn(e,t,n){if("function"!=typeof e)throw new ye(i);return vo(function(){e.apply(void 0,n)},t)}function Jn(e,t,n,r){var i=-1,o=lt,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=ut(t,It(n))),r?(o=ct,s=!1):t.length>=200&&(o=kt,s=!1,t=new Ln(t));e:for(;++i<a;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,s&&h==h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else o(t,h,r)||l.push(u)}return l}In.templateSettings={escape:j,evaluate:H,interpolate:z,variable:"",imports:{_:In}},(In.prototype=kn.prototype).constructor=In,(Rn.prototype=On(kn.prototype)).constructor=Rn,(An.prototype=On(kn.prototype)).constructor=An,Mn.prototype.clear=function(){this.__data__=yn?yn(null):{},this.size=0},Mn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Mn.prototype.get=function(e){var t=this.__data__;if(yn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ce.call(t,e)?t[e]:void 0},Mn.prototype.has=function(e){var t=this.__data__;return yn?void 0!==t[e]:Ce.call(t,e)},Mn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yn&&void 0===t?"__lodash_hash_undefined__":t,this},Dn.prototype.clear=function(){this.__data__=[],this.size=0},Dn.prototype.delete=function(e){var t=this.__data__,n=Wn(t,e);return!(n<0||(n==t.length-1?t.pop():$e.call(t,n,1),--this.size,0))},Dn.prototype.get=function(e){var t=this.__data__,n=Wn(t,e);return n<0?void 0:t[n][1]},Dn.prototype.has=function(e){return Wn(this.__data__,e)>-1},Dn.prototype.set=function(e,t){var n=this.__data__,r=Wn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Fn.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(pn||Dn),string:new Mn}},Fn.prototype.delete=function(e){var t=Ki(this,e).delete(e);return this.size-=t?1:0,t},Fn.prototype.get=function(e){return Ki(this,e).get(e)},Fn.prototype.has=function(e){return Ki(this,e).has(e)},Fn.prototype.set=function(e,t){var n=Ki(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ln.prototype.add=Ln.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ln.prototype.has=function(e){return this.__data__.has(e)},Bn.prototype.clear=function(){this.__data__=new Dn,this.size=0},Bn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Bn.prototype.get=function(e){return this.__data__.get(e)},Bn.prototype.has=function(e){return this.__data__.has(e)},Bn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Dn){var r=n.__data__;if(!pn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Fn(r)}return n.set(e,t),this.size=n.size,this};var er=bi(lr),tr=bi(cr,!0);function nr(e,t){var n=!0;return er(e,function(e,r,i){return n=!!t(e,r,i)}),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(void 0===a?s==s&&!Zs(s):n(s,a)))var a=s,l=o}return l}function ir(e,t){var n=[];return er(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function or(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=io),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?or(a,t-1,n,r,i):ht(i,a):r||(i[i.length]=a)}return i}var sr=wi(),ar=wi(!0);function lr(e,t){return e&&sr(e,t,wa)}function cr(e,t){return e&&ar(e,t,wa)}function ur(e,t){return at(t,function(t){return zs(e[t])})}function hr(e,t){for(var n=0,r=(t=si(t,e)).length;null!=e&&n<r;)e=e[To(t[n++])];return n&&n==r?e:void 0}function dr(e,t,n){var r=t(e);return Ds(e)?r:ht(r,n(e))}function pr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":xt&&xt in fe(e)?function(e){var t=Ce.call(e,xt),n=e[xt];try{e[xt]=void 0;var r=!0}catch(o){}var i=Se.call(e);return r&&(t?e[xt]=n:delete e[xt]),i}(e):function(e){return Se.call(e)}(e)}function fr(e,t){return e>t}function mr(e,t){return null!=e&&Ce.call(e,t)}function gr(e,t){return null!=e&&t in fe(e)}function yr(e,t,n){for(var i=n?ct:lt,o=e[0].length,s=e.length,a=s,l=r(s),c=1/0,u=[];a--;){var h=e[a];a&&t&&(h=ut(h,It(t))),c=an(h.length,c),l[a]=!n&&(t||o>=120&&h.length>=120)?new Ln(a&&h):void 0}h=e[0];var d=-1,p=l[0];e:for(;++d<o&&u.length<c;){var f=h[d],m=t?t(f):f;if(f=n||0!==f?f:0,!(p?kt(p,m):i(u,m,n))){for(a=s;--a;){var g=l[a];if(!(g?kt(g,m):i(e[a],m,n)))continue e}p&&p.push(m),u.push(f)}}return u}function _r(e,t,n){var r=null==(e=mo(e,t=si(t,e)))?e:e[To(Ho(t))];return null==r?void 0:nt(r,e,n)}function vr(e){return Xs(e)&&pr(e)==a}function br(e,t,n,r,i){return e===t||(null==e||null==t||!Xs(e)&&!Xs(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var s=Ds(e),d=Ds(t),p=s?l:to(e),w=d?l:to(t),E=(p=p==a?g:p)==g,S=(w=w==a?g:w)==g,P=p==w;if(P&&Ns(e)){if(!Ns(t))return!1;s=!0,E=!1}if(P&&!E)return o||(o=new Bn),s||Js(e)?Vi(e,t,n,r,i,o):function(e,t,n,r,i,o,s){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case C:return!(e.byteLength!=t.byteLength||!o(new je(e),new je(t)));case c:case u:case m:return ks(+e,+t);case h:return e.name==t.name&&e.message==t.message;case y:case v:return e==t+"";case f:var a=Nt;case _:if(a||(a=zt),e.size!=t.size&&!(1&r))return!1;var l=s.get(e);if(l)return l==t;r|=2,s.set(e,t);var d=Vi(a(e),a(t),r,i,o,s);return s.delete(e),d;case b:if(Pn)return Pn.call(e)==Pn.call(t)}return!1}(e,t,p,n,r,i,o);if(!(1&n)){var T=E&&Ce.call(e,"__wrapped__"),I=S&&Ce.call(t,"__wrapped__");if(T||I){var O=T?e.value():e,k=I?t.value():t;return o||(o=new Bn),i(O,k,n,r,o)}}return!!P&&(o||(o=new Bn),function(e,t,n,r,i,o){var s=1&n,a=Wi(e),l=a.length;if(l!=Wi(t).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in t:Ce.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);for(var f=s;++c<l;){var m=e[u=a[c]],g=t[u];if(r)var y=s?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===y?m===g||i(m,g,n,r,o):y)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var _=e.constructor,v=t.constructor;_==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof v&&v instanceof v||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o))}(e,t,n,r,br,i))}function wr(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=fe(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var l=(a=n[i])[0],c=e[l],u=a[1];if(s&&a[2]){if(void 0===c&&!(l in e))return!1}else{var h=new Bn;if(r)var d=r(c,u,l,e,t,h);if(!(void 0===d?br(u,c,3,r,h):d))return!1}}return!0}function Cr(e){return!(!Ws(e)||(t=e,Ee&&Ee in t))&&(zs(e)?Ie:oe).test(Io(e));var t}function xr(e){return"function"==typeof e?e:null==e?qa:"object"==typeof e?Ds(e)?Ir(e[0],e[1]):Tr(e):nl(e)}function Er(e){if(!uo(e))return on(e);var t=[];for(var n in fe(e))Ce.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Sr(e,t){return e<t}function Pr(e,t){var n=-1,i=Ls(e)?r(e.length):[];return er(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function Tr(e){var t=Qi(e);return 1==t.length&&t[0][2]?po(t[0][0],t[0][1]):function(n){return n===e||wr(n,e,t)}}function Ir(e,t){return ao(e)&&ho(t)?po(To(e),t):function(n){var r=ga(n,e);return void 0===r&&r===t?ya(n,e):br(t,r,3)}}function Or(e,t,n,r,i){e!==t&&sr(t,function(o,s){if(i||(i=new Bn),Ws(o))!function(e,t,n,r,i,o,s){var a=yo(e,n),l=yo(t,n),c=s.get(l);if(c)Vn(e,n,c);else{var u=o?o(a,l,n+"",e,t,s):void 0,h=void 0===u;if(h){var d=Ds(l),p=!d&&Ns(l),f=!d&&!p&&Js(l);u=l,d||p||f?Ds(a)?u=a:Bs(a)?u=gi(a):p?(h=!1,u=ui(l,!0)):f?(h=!1,u=di(l,!0)):u=[]:$s(l)||Ms(l)?(u=a,Ms(a)?u=aa(a):Ws(a)&&!zs(a)||(u=ro(l))):h=!1}h&&(s.set(l,u),i(u,l,r,o,s),s.delete(l)),Vn(e,n,u)}}(e,t,s,n,Or,r,i);else{var a=r?r(yo(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),Vn(e,s,a)}},Ca)}function kr(e,t){var n=e.length;if(n)return oo(t+=t<0?n:0,n)?e[t]:void 0}function Rr(e,t,n){t=t.length?ut(t,function(e){return Ds(e)?function(t){return hr(t,1===e.length?e[0]:e)}:e}):[qa];var r=-1;return t=ut(t,It(Yi())),function(e,t){var r=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;++r<s;){var l=pi(i[r],o[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)});r--;)e[r]=e[r].value;return e}(Pr(e,function(e,n,i){return{criteria:ut(t,function(t){return t(e)}),index:++r,value:e}}))}function Ar(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=hr(e,s);n(a,s)&&Hr(o,si(s,e),a)}return o}function Mr(e,t,n,r){var i=r?vt:_t,o=-1,s=t.length,a=e;for(e===t&&(t=gi(t)),n&&(a=ut(e,It(n)));++o<s;)for(var l=0,c=t[o],u=n?n(c):c;(l=i(a,u,l,r))>-1;)a!==e&&$e.call(a,l,1),$e.call(e,l,1);return e}function Dr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;oo(i)?$e.call(e,i,1):Zr(e,i)}}return e}function Fr(e,t){return e+Jt(un()*(t-e+1))}function Lr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Jt(t/2))&&(e+=e)}while(t);return n}function Br(e,t){return bo(fo(e,t,qa),e+"")}function Nr(e){return jn(ka(e))}function jr(e,t){var n=ka(e);return xo(n,Yn(t,0,n.length))}function Hr(e,t,n,r){if(!Ws(e))return e;for(var i=-1,o=(t=si(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var l=To(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=s){var u=a[l];void 0===(c=r?r(u,l,a):void 0)&&(c=Ws(u)?u:oo(t[i+1])?[]:{})}Un(a,l,c),a=a[l]}return e}var zr=_n?function(e,t){return _n.set(e,t),e}:qa,Vr=$t?function(e,t){return $t(e,"toString",{configurable:!0,enumerable:!1,value:Wa(t),writable:!0})}:qa;function Ur(e){return xo(ka(e))}function Wr(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=r(o);++i<o;)s[i]=e[i+t];return s}function Xr(e,t){var n;return er(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function Gr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!Zs(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return qr(e,t,qa,n)}function qr(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,a=null===t,l=Zs(t),c=void 0===t;i<o;){var u=Jt((i+o)/2),h=n(e[u]),d=void 0!==h,p=null===h,f=h==h,m=Zs(h);if(s)var g=r||f;else g=c?f&&(r||d):a?f&&d&&(r||!p):l?f&&d&&!p&&(r||!m):!p&&!m&&(r?h<=t:h<t);g?i=u+1:o=u}return an(o,4294967294)}function $r(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!ks(a,l)){var l=a;o[i++]=0===s?0:s}}return o}function Yr(e){return"number"==typeof e?e:Zs(e)?NaN:+e}function Kr(e){if("string"==typeof e)return e;if(Ds(e))return ut(e,Kr)+"";if(Zs(e))return Tn?Tn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qr(e,t,n){var r=-1,i=lt,o=e.length,s=!0,a=[],l=a;if(n)s=!1,i=ct;else if(o>=200){var c=t?null:Li(e);if(c)return zt(c);s=!1,i=kt,l=new Ln}else l=t?[]:a;e:for(;++r<o;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),a.push(u)}else i(l,h,n)||(l!==a&&l.push(h),a.push(u))}return a}function Zr(e,t){return null==(e=mo(e,t=si(t,e)))||delete e[To(Ho(t))]}function Jr(e,t,n,r){return Hr(e,t,n(hr(e,t)),r)}function ei(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Wr(e,r?0:o,r?o+1:i):Wr(e,r?o+1:0,r?i:o)}function ti(e,t){var n=e;return n instanceof An&&(n=n.value()),dt(t,function(e,t){return t.func.apply(t.thisArg,ht([e],t.args))},n)}function ni(e,t,n){var i=e.length;if(i<2)return i?Qr(e[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=e[o],l=-1;++l<i;)l!=o&&(s[o]=Jn(s[o]||a,e[l],t,n));return Qr(or(s,1),t,n)}function ri(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;)n(s,e[r],r<o?t[r]:void 0);return s}function ii(e){return Bs(e)?e:[]}function oi(e){return"function"==typeof e?e:qa}function si(e,t){return Ds(e)?e:ao(e,t)?[e]:Po(la(e))}var ai=Br;function li(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Wr(e,t,n)}var ci=Yt||function(e){return We.clearTimeout(e)};function ui(e,t){if(t)return e.slice();var n=e.length,r=Ve?Ve(n):new e.constructor(n);return e.copy(r),r}function hi(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function di(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function pi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Zs(e),s=void 0!==t,a=null===t,l=t==t,c=Zs(t);if(!a&&!c&&!o&&e>t||o&&s&&l&&!a&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}function fi(e,t,n,i){for(var o=-1,s=e.length,a=n.length,l=-1,c=t.length,u=sn(s-a,0),h=r(c+u),d=!i;++l<c;)h[l]=t[l];for(;++o<a;)(d||o<s)&&(h[n[o]]=e[o]);for(;u--;)h[l++]=e[o++];return h}function mi(e,t,n,i){for(var o=-1,s=e.length,a=-1,l=n.length,c=-1,u=t.length,h=sn(s-l,0),d=r(h+u),p=!i;++o<h;)d[o]=e[o];for(var f=o;++c<u;)d[f+c]=t[c];for(;++a<l;)(p||o<s)&&(d[f+n[a]]=e[o++]);return d}function gi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function yi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=r?r(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),i?qn(n,a,l):Un(n,a,l)}return n}function _i(e,t){return function(n,r){var i=Ds(n)?rt:Xn,o=t?t():{};return i(n,e,Yi(r,2),o)}}function vi(e){return Br(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&so(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=fe(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t})}function bi(e,t){return function(n,r){if(null==n)return n;if(!Ls(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=fe(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function wi(e){return function(t,n,r){for(var i=-1,o=fe(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}}function Ci(e){return function(t){var n=Bt(t=la(t))?Wt(t):void 0,r=n?n[0]:t.charAt(0),i=n?li(n,1).join(""):t.slice(1);return r[e]()+i}}function xi(e){return function(t){return dt(za(Ma(t).replace(Oe,"")),e,"")}}function Ei(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=On(e.prototype),r=e.apply(n,t);return Ws(r)?r:n}}function Si(e){return function(t,n,r){var i=fe(t);if(!Ls(t)){var o=Yi(n,3);t=wa(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:void 0}}function Pi(e){return Ui(function(t){var n=t.length,r=n,o=Rn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new ye(i);if(o&&!a&&"wrapper"==qi(s))var a=new Rn([],!0)}for(r=a?r:n;++r<n;){var l=qi(s=t[r]),c="wrapper"==l?Gi(s):void 0;a=c&&lo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[qi(c[0])].apply(a,c[3]):1==s.length&&lo(s)?a[l]():a.thru(s)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&Ds(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Ti(e,t,n,i,o,s,a,l,c,u){var h=128&t,d=1&t,p=2&t,f=24&t,m=512&t,g=p?void 0:Ei(e);return function y(){for(var _=arguments.length,v=r(_),b=_;b--;)v[b]=arguments[b];if(f)var w=$i(y),C=Mt(v,w);if(i&&(v=fi(v,i,o,f)),s&&(v=mi(v,s,a,f)),_-=C,f&&_<u){var x=Ht(v,w);return Di(e,t,Ti,y.placeholder,n,v,x,l,c,u-_)}var E=d?n:this,S=p?E[e]:e;return _=v.length,l?v=go(v,l):m&&_>1&&v.reverse(),h&&c<_&&(v.length=c),this&&this!==We&&this instanceof y&&(S=g||Ei(S)),S.apply(E,v)}}function Ii(e,t){return function(n,r){return function(e,t,n,r){return lr(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function Oi(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Kr(n),r=Kr(r)):(n=Yr(n),r=Yr(r)),i=e(n,r)}return i}}function ki(e){return Ui(function(t){return t=ut(t,It(Yi())),Br(function(n){var r=this;return e(t,function(e){return nt(e,r,n)})})})}function Ri(e,t){var n=(t=void 0===t?" ":Kr(t)).length;if(n<2)return n?Lr(t,e):t;var r=Lr(t,Zt(e/Ut(t)));return Bt(t)?li(Wt(r),0,e).join(""):r.slice(0,e)}function Ai(e){return function(t,n,i){return i&&"number"!=typeof i&&so(t,n,i)&&(n=i=void 0),t=ra(t),void 0===n?(n=t,t=0):n=ra(n),function(e,t,n,i){for(var o=-1,s=sn(Zt((t-e)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=e,e+=n;return a}(t,n,i=void 0===i?t<n?1:-1:ra(i),e)}}function Mi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=sa(t),n=sa(n)),e(t,n)}}function Di(e,t,n,r,i,o,s,a,l,c){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var h=[e,t,i,u?o:void 0,u?s:void 0,u?void 0:o,u?void 0:s,a,l,c],d=n.apply(void 0,h);return lo(e)&&_o(d,h),d.placeholder=r,wo(d,e,t)}function Fi(e){var t=pe[e];return function(e,n){if(e=sa(e),(n=null==n?0:an(ia(n),292))&&nn(e)){var r=(la(e)+"e").split("e");return+((r=(la(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Li=mn&&1/zt(new mn([,-0]))[1]==1/0?function(e){return new mn(e)}:Za;function Bi(e){return function(t){var n=to(t);return n==f?Nt(t):n==_?Vt(t):function(e,t){return ut(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ni(e,t,n,s,a,l,c,u){var h=2&t;if(!h&&"function"!=typeof e)throw new ye(i);var d=s?s.length:0;if(d||(t&=-97,s=a=void 0),c=void 0===c?c:sn(ia(c),0),u=void 0===u?u:ia(u),d-=a?a.length:0,64&t){var p=s,f=a;s=a=void 0}var m=h?void 0:Gi(e),g=[e,t,n,s,a,p,f,l,c,u];if(m&&function(e,t){var n=e[1],r=t[1],i=n|r;if(!(i<131||128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n))return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var a=e[3];e[3]=a?fi(a,s,t[4]):s,e[4]=a?Ht(e[3],o):t[4]}(s=t[5])&&(e[5]=(a=e[5])?mi(a,s,t[6]):s,e[6]=a?Ht(e[5],o):t[6]),(s=t[7])&&(e[7]=s),128&r&&(e[8]=null==e[8]?t[8]:an(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(g,m),e=g[0],t=g[1],n=g[2],s=g[3],a=g[4],!(u=g[9]=void 0===g[9]?h?0:e.length:sn(g[9]-d,0))&&24&t&&(t&=-25),t&&1!=t)y=8==t||16==t?function(e,t,n){var i=Ei(e);return function o(){for(var s=arguments.length,a=r(s),l=s,c=$i(o);l--;)a[l]=arguments[l];var u=s<3&&a[0]!==c&&a[s-1]!==c?[]:Ht(a,c);return(s-=u.length)<n?Di(e,t,Ti,o.placeholder,void 0,a,u,void 0,void 0,n-s):nt(this&&this!==We&&this instanceof o?i:e,this,a)}}(e,t,u):32!=t&&33!=t||a.length?Ti.apply(void 0,g):function(e,t,n,i){var o=1&t,s=Ei(e);return function t(){for(var a=-1,l=arguments.length,c=-1,u=i.length,h=r(u+l),d=this&&this!==We&&this instanceof t?s:e;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++a];return nt(d,o?n:this,h)}}(e,t,n,s);else var y=function(e,t,n){var r=1&t,i=Ei(e);return function t(){return(this&&this!==We&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return wo((m?zr:_o)(y,g),e,t)}function ji(e,t,n,r){return void 0===e||ks(e,ve[n])&&!Ce.call(r,n)?t:e}function Hi(e,t,n,r,i,o){return Ws(e)&&Ws(t)&&(o.set(t,e),Or(e,t,void 0,Hi,o),o.delete(t)),e}function zi(e){return $s(e)?void 0:e}function Vi(e,t,n,r,i,o){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,d=!0,p=2&n?new Ln:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var f=e[h],m=t[h];if(r)var g=s?r(m,f,h,t,e,o):r(f,m,h,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!ft(t,function(e,t){if(!kt(p,t)&&(f===e||i(f,e,n,r,o)))return p.push(t)})){d=!1;break}}else if(f!==m&&!i(f,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function Ui(e){return bo(fo(e,void 0,Fo),e+"")}function Wi(e){return dr(e,wa,Ji)}function Xi(e){return dr(e,Ca,eo)}var Gi=_n?function(e){return _n.get(e)}:Za;function qi(e){for(var t=e.name+"",n=vn[t],r=Ce.call(vn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function $i(e){return(Ce.call(In,"placeholder")?In:e).placeholder}function Yi(){var e=In.iteratee||$a;return e=e===$a?xr:e,arguments.length?e(arguments[0],arguments[1]):e}function Ki(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Qi(e){for(var t=wa(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ho(i)]}return t}function Zi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Cr(n)?n:void 0}var Ji=en?function(e){return null==e?[]:(e=fe(e),at(en(e),function(t){return Ge.call(e,t)}))}:ol,eo=en?function(e){for(var t=[];e;)ht(t,Ji(e)),e=Ue(e);return t}:ol,to=pr;function no(e,t,n){for(var r=-1,i=(t=si(t,e)).length,o=!1;++r<i;){var s=To(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Us(i)&&oo(s,i)&&(Ds(e)||Ms(e))}function ro(e){return"function"!=typeof e.constructor||uo(e)?{}:On(Ue(e))}function io(e){return Ds(e)||Ms(e)||!!(Ye&&e&&e[Ye])}function oo(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ae.test(e))&&e>-1&&e%1==0&&e<t}function so(e,t,n){if(!Ws(n))return!1;var r=typeof t;return!!("number"==r?Ls(n)&&oo(t,n.length):"string"==r&&t in n)&&ks(n[t],e)}function ao(e,t){if(Ds(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Zs(e))||U.test(e)||!V.test(e)||null!=t&&e in fe(t)}function lo(e){var t=qi(e),n=In[t];if("function"!=typeof n||!(t in An.prototype))return!1;if(e===n)return!0;var r=Gi(n);return!!r&&e===r[0]}(dn&&to(new dn(new ArrayBuffer(1)))!=x||pn&&to(new pn)!=f||fn&&"[object Promise]"!=to(fn.resolve())||mn&&to(new mn)!=_||gn&&to(new gn)!=w)&&(to=function(e){var t=pr(e),n=t==g?e.constructor:void 0,r=n?Io(n):"";if(r)switch(r){case bn:return x;case wn:return f;case Cn:return"[object Promise]";case xn:return _;case En:return w}return t});var co=be?zs:sl;function uo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ve)}function ho(e){return e==e&&!Ws(e)}function po(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in fe(n))}}function fo(e,t,n){return t=sn(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=sn(i.length-t,0),a=r(s);++o<s;)a[o]=i[t+o];o=-1;for(var l=r(t+1);++o<t;)l[o]=i[o];return l[t]=n(a),nt(e,this,l)}}function mo(e,t){return t.length<2?e:hr(e,Wr(t,0,-1))}function go(e,t){for(var n=e.length,r=an(t.length,n),i=gi(e);r--;){var o=t[r];e[r]=oo(o,n)?i[o]:void 0}return e}function yo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _o=Co(zr),vo=Qt||function(e,t){return We.setTimeout(e,t)},bo=Co(Vr);function wo(e,t,n){var r=t+"";return bo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Y,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return it(s,function(n){var r="_."+n[0];t&n[1]&&!lt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(K);return t?t[1].split(Q):[]}(r),n)))}function Co(e){var t=0,n=0;return function(){var r=ln(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function xo(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Fr(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Eo,So,Po=(Eo=Es(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(W,function(e,n,r,i){t.push(r?i.replace(ee,"$1"):n||e)}),t},function(e){return 500===So.size&&So.clear(),e}),So=Eo.cache,Eo);function To(e){if("string"==typeof e||Zs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Io(e){if(null!=e){try{return we.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Oo(e){if(e instanceof An)return e.clone();var t=new Rn(e.__wrapped__,e.__chain__);return t.__actions__=gi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ko=Br(function(e,t){return Bs(e)?Jn(e,or(t,1,Bs,!0)):[]}),Ro=Br(function(e,t){var n=Ho(t);return Bs(n)&&(n=void 0),Bs(e)?Jn(e,or(t,1,Bs,!0),Yi(n,2)):[]}),Ao=Br(function(e,t){var n=Ho(t);return Bs(n)&&(n=void 0),Bs(e)?Jn(e,or(t,1,Bs,!0),void 0,n):[]});function Mo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ia(n);return i<0&&(i=sn(r+i,0)),yt(e,Yi(t,3),i)}function Do(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ia(n),i=n<0?sn(r+i,0):an(i,r-1)),yt(e,Yi(t,3),i,!0)}function Fo(e){return null!=e&&e.length?or(e,1):[]}function Lo(e){return e&&e.length?e[0]:void 0}var Bo=Br(function(e){var t=ut(e,ii);return t.length&&t[0]===e[0]?yr(t):[]}),No=Br(function(e){var t=Ho(e),n=ut(e,ii);return t===Ho(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?yr(n,Yi(t,2)):[]}),jo=Br(function(e){var t=Ho(e),n=ut(e,ii);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?yr(n,void 0,t):[]});function Ho(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var zo=Br(Vo);function Vo(e,t){return e&&e.length&&t&&t.length?Mr(e,t):e}var Uo=Ui(function(e,t){var n=null==e?0:e.length,r=$n(e,t);return Dr(e,ut(t,function(e){return oo(e,n)?+e:e}).sort(pi)),r});function Wo(e){return null==e?e:hn.call(e)}var Xo=Br(function(e){return Qr(or(e,1,Bs,!0))}),Go=Br(function(e){var t=Ho(e);return Bs(t)&&(t=void 0),Qr(or(e,1,Bs,!0),Yi(t,2))}),qo=Br(function(e){var t=Ho(e);return t="function"==typeof t?t:void 0,Qr(or(e,1,Bs,!0),void 0,t)});function $o(e){if(!e||!e.length)return[];var t=0;return e=at(e,function(e){if(Bs(e))return t=sn(e.length,t),!0}),Pt(t,function(t){return ut(e,Ct(t))})}function Yo(e,t){if(!e||!e.length)return[];var n=$o(e);return null==t?n:ut(n,function(e){return nt(t,void 0,e)})}var Ko=Br(function(e,t){return Bs(e)?Jn(e,t):[]}),Qo=Br(function(e){return ni(at(e,Bs))}),Zo=Br(function(e){var t=Ho(e);return Bs(t)&&(t=void 0),ni(at(e,Bs),Yi(t,2))}),Jo=Br(function(e){var t=Ho(e);return t="function"==typeof t?t:void 0,ni(at(e,Bs),void 0,t)}),es=Br($o),ts=Br(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Yo(e,n)});function ns(e){var t=In(e);return t.__chain__=!0,t}function rs(e,t){return t(e)}var is=Ui(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return $n(t,e)};return!(t>1||this.__actions__.length)&&r instanceof An&&oo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:rs,args:[i],thisArg:void 0}),new Rn(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e})):this.thru(i)}),os=_i(function(e,t,n){Ce.call(e,n)?++e[n]:qn(e,n,1)}),ss=Si(Mo),as=Si(Do);function ls(e,t){return(Ds(e)?it:er)(e,Yi(t,3))}function cs(e,t){return(Ds(e)?ot:tr)(e,Yi(t,3))}var us=_i(function(e,t,n){Ce.call(e,n)?e[n].push(t):qn(e,n,[t])}),hs=Br(function(e,t,n){var i=-1,o="function"==typeof t,s=Ls(e)?r(e.length):[];return er(e,function(e){s[++i]=o?nt(t,e,n):_r(e,t,n)}),s}),ds=_i(function(e,t,n){qn(e,n,t)});function ps(e,t){return(Ds(e)?ut:Pr)(e,Yi(t,3))}var fs=_i(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ms=Br(function(e,t){if(null==e)return[];var n=t.length;return n>1&&so(e,t[0],t[1])?t=[]:n>2&&so(t[0],t[1],t[2])&&(t=[t[0]]),Rr(e,or(t,1),[])}),gs=Kt||function(){return We.Date.now()};function ys(e,t,n){return t=n?void 0:t,Ni(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function _s(e,t){var n;if("function"!=typeof t)throw new ye(i);return e=ia(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var vs=Br(function(e,t,n){var r=1;if(n.length){var i=Ht(n,$i(vs));r|=32}return Ni(e,r,t,n,i)}),bs=Br(function(e,t,n){var r=3;if(n.length){var i=Ht(n,$i(bs));r|=32}return Ni(t,r,e,n,i)});function ws(e,t,n){var r,o,s,a,l,c,u=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new ye(i);function f(t){var n=r,i=o;return r=o=void 0,u=t,a=e.apply(i,n)}function m(e){return u=e,l=vo(y,t),h?f(e):a}function g(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=s}function y(){var e=gs();if(g(e))return _(e);l=vo(y,function(e){var n=t-(e-c);return d?an(n,s-(e-u)):n}(e))}function _(e){return l=void 0,p&&r?f(e):(r=o=void 0,a)}function v(){var e=gs(),n=g(e);if(r=arguments,o=this,c=e,n){if(void 0===l)return m(c);if(d)return ci(l),l=vo(y,t),f(c)}return void 0===l&&(l=vo(y,t)),a}return t=sa(t)||0,Ws(n)&&(h=!!n.leading,s=(d="maxWait"in n)?sn(sa(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==l&&ci(l),u=0,r=c=o=l=void 0},v.flush=function(){return void 0===l?a:_(gs())},v}var Cs=Br(function(e,t){return Zn(e,1,t)}),xs=Br(function(e,t,n){return Zn(e,sa(t)||0,n)});function Es(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ye(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Es.Cache||Fn),n}function Ss(e){if("function"!=typeof e)throw new ye(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Es.Cache=Fn;var Ps=ai(function(e,t){var n=(t=1==t.length&&Ds(t[0])?ut(t[0],It(Yi())):ut(or(t,1),It(Yi()))).length;return Br(function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return nt(e,this,r)})}),Ts=Br(function(e,t){return Ni(e,32,void 0,t,Ht(t,$i(Ts)))}),Is=Br(function(e,t){return Ni(e,64,void 0,t,Ht(t,$i(Is)))}),Os=Ui(function(e,t){return Ni(e,256,void 0,void 0,void 0,t)});function ks(e,t){return e===t||e!=e&&t!=t}var Rs=Mi(fr),As=Mi(function(e,t){return e>=t}),Ms=vr(function(){return arguments}())?vr:function(e){return Xs(e)&&Ce.call(e,"callee")&&!Ge.call(e,"callee")},Ds=r.isArray,Fs=Ke?It(Ke):function(e){return Xs(e)&&pr(e)==C};function Ls(e){return null!=e&&Us(e.length)&&!zs(e)}function Bs(e){return Xs(e)&&Ls(e)}var Ns=tn||sl,js=Qe?It(Qe):function(e){return Xs(e)&&pr(e)==u};function Hs(e){if(!Xs(e))return!1;var t=pr(e);return t==h||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!$s(e)}function zs(e){if(!Ws(e))return!1;var t=pr(e);return t==d||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Vs(e){return"number"==typeof e&&e==ia(e)}function Us(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ws(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xs(e){return null!=e&&"object"==typeof e}var Gs=Ze?It(Ze):function(e){return Xs(e)&&to(e)==f};function qs(e){return"number"==typeof e||Xs(e)&&pr(e)==m}function $s(e){if(!Xs(e)||pr(e)!=g)return!1;var t=Ue(e);if(null===t)return!0;var n=Ce.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&we.call(n)==Pe}var Ys=Je?It(Je):function(e){return Xs(e)&&pr(e)==y},Ks=et?It(et):function(e){return Xs(e)&&to(e)==_};function Qs(e){return"string"==typeof e||!Ds(e)&&Xs(e)&&pr(e)==v}function Zs(e){return"symbol"==typeof e||Xs(e)&&pr(e)==b}var Js=tt?It(tt):function(e){return Xs(e)&&Us(e.length)&&!!Be[pr(e)]},ea=Mi(Sr),ta=Mi(function(e,t){return e<=t});function na(e){if(!e)return[];if(Ls(e))return Qs(e)?Wt(e):gi(e);if(mt&&e[mt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[mt]());var t=to(e);return(t==f?Nt:t==_?zt:ka)(e)}function ra(e){return e?1/0===(e=sa(e))||-1/0===e?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ia(e){var t=ra(e),n=t%1;return t==t?n?t-n:t:0}function oa(e){return e?Yn(ia(e),0,4294967295):0}function sa(e){if("number"==typeof e)return e;if(Zs(e))return NaN;if(Ws(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ws(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Tt(e);var n=ie.test(e);return n||se.test(e)?ze(e.slice(2),n?2:8):re.test(e)?NaN:+e}function aa(e){return yi(e,Ca(e))}function la(e){return null==e?"":Kr(e)}var ca=vi(function(e,t){if(uo(t)||Ls(t))yi(t,wa(t),e);else for(var n in t)Ce.call(t,n)&&Un(e,n,t[n])}),ua=vi(function(e,t){yi(t,Ca(t),e)}),ha=vi(function(e,t,n,r){yi(t,Ca(t),e,r)}),da=vi(function(e,t,n,r){yi(t,wa(t),e,r)}),pa=Ui($n),fa=Br(function(e,t){e=fe(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&so(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=Ca(o),a=-1,l=s.length;++a<l;){var c=s[a],u=e[c];(void 0===u||ks(u,ve[c])&&!Ce.call(e,c))&&(e[c]=o[c])}return e}),ma=Br(function(e){return e.push(void 0,Hi),nt(Ea,void 0,e)});function ga(e,t,n){var r=null==e?void 0:hr(e,t);return void 0===r?n:r}function ya(e,t){return null!=e&&no(e,t,gr)}var _a=Ii(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Se.call(t)),e[t]=n},Wa(qa)),va=Ii(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Se.call(t)),Ce.call(e,t)?e[t].push(n):e[t]=[n]},Yi),ba=Br(_r);function wa(e){return Ls(e)?Nn(e):Er(e)}function Ca(e){return Ls(e)?Nn(e,!0):function(e){if(!Ws(e))return function(e){var t=[];if(null!=e)for(var n in fe(e))t.push(n);return t}(e);var t=uo(e),n=[];for(var r in e)("constructor"!=r||!t&&Ce.call(e,r))&&n.push(r);return n}(e)}var xa=vi(function(e,t,n){Or(e,t,n)}),Ea=vi(function(e,t,n,r){Or(e,t,n,r)}),Sa=Ui(function(e,t){var n={};if(null==e)return n;var r=!1;t=ut(t,function(t){return t=si(t,e),r||(r=t.length>1),t}),yi(e,Xi(e),n),r&&(n=Kn(n,7,zi));for(var i=t.length;i--;)Zr(n,t[i]);return n}),Pa=Ui(function(e,t){return null==e?{}:function(e,t){return Ar(e,t,function(t,n){return ya(e,n)})}(e,t)});function Ta(e,t){if(null==e)return{};var n=ut(Xi(e),function(e){return[e]});return t=Yi(t),Ar(e,n,function(e,n){return t(e,n[0])})}var Ia=Bi(wa),Oa=Bi(Ca);function ka(e){return null==e?[]:Ot(e,wa(e))}var Ra=xi(function(e,t,n){return t=t.toLowerCase(),e+(n?Aa(t):t)});function Aa(e){return Ha(la(e).toLowerCase())}function Ma(e){return(e=la(e))&&e.replace(le,Dt).replace(ke,"")}var Da=xi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Fa=xi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),La=Ci("toLowerCase"),Ba=xi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Na=xi(function(e,t,n){return e+(n?" ":"")+Ha(t)}),ja=xi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Ha=Ci("toUpperCase");function za(e,t,n){return e=la(e),void 0===(t=n?void 0:t)?function(e){return De.test(e)}(e)?function(e){return e.match(Ae)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(t)||[]}var Va=Br(function(e,t){try{return nt(e,void 0,t)}catch(n){return Hs(n)?n:new he(n)}}),Ua=Ui(function(e,t){return it(t,function(t){t=To(t),qn(e,t,vs(e[t],e))}),e});function Wa(e){return function(){return e}}var Xa=Pi(),Ga=Pi(!0);function qa(e){return e}function $a(e){return xr("function"==typeof e?e:Kn(e,1))}var Ya=Br(function(e,t){return function(n){return _r(n,e,t)}}),Ka=Br(function(e,t){return function(n){return _r(e,n,t)}});function Qa(e,t,n){var r=wa(t),i=ur(t,r);null!=n||Ws(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=ur(t,wa(t)));var o=!(Ws(n)&&"chain"in n&&!n.chain),s=zs(e);return it(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=gi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,ht([this.value()],arguments))})}),e}function Za(){}var Ja=ki(ut),el=ki(st),tl=ki(ft);function nl(e){return ao(e)?Ct(To(e)):function(e){return function(t){return hr(t,e)}}(e)}var rl=Ai(),il=Ai(!0);function ol(){return[]}function sl(){return!1}var al,ll=Oi(function(e,t){return e+t},0),cl=Fi("ceil"),ul=Oi(function(e,t){return e/t},1),hl=Fi("floor"),dl=Oi(function(e,t){return e*t},1),pl=Fi("round"),fl=Oi(function(e,t){return e-t},0);return In.after=function(e,t){if("function"!=typeof t)throw new ye(i);return e=ia(e),function(){if(--e<1)return t.apply(this,arguments)}},In.ary=ys,In.assign=ca,In.assignIn=ua,In.assignInWith=ha,In.assignWith=da,In.at=pa,In.before=_s,In.bind=vs,In.bindAll=Ua,In.bindKey=bs,In.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ds(e)?e:[e]},In.chain=ns,In.chunk=function(e,t,n){t=(n?so(e,t,n):void 0===t)?1:sn(ia(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,a=r(Zt(i/t));o<i;)a[s++]=Wr(e,o,o+=t);return a},In.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},In.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return ht(Ds(n)?gi(n):[n],or(t,1))},In.cond=function(e){var t=null==e?0:e.length,n=Yi();return e=t?ut(e,function(e){if("function"!=typeof e[1])throw new ye(i);return[n(e[0]),e[1]]}):[],Br(function(n){for(var r=-1;++r<t;){var i=e[r];if(nt(i[0],this,n))return nt(i[1],this,n)}})},In.conforms=function(e){return function(e){var t=wa(e);return function(n){return Qn(n,e,t)}}(Kn(e,1))},In.constant=Wa,In.countBy=os,In.create=function(e,t){var n=On(e);return null==t?n:Gn(n,t)},In.curry=function e(t,n,r){var i=Ni(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},In.curryRight=function e(t,n,r){var i=Ni(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},In.debounce=ws,In.defaults=fa,In.defaultsDeep=ma,In.defer=Cs,In.delay=xs,In.difference=ko,In.differenceBy=Ro,In.differenceWith=Ao,In.drop=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,(t=n||void 0===t?1:ia(t))<0?0:t,r):[]},In.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,0,(t=r-(t=n||void 0===t?1:ia(t)))<0?0:t):[]},In.dropRightWhile=function(e,t){return e&&e.length?ei(e,Yi(t,3),!0,!0):[]},In.dropWhile=function(e,t){return e&&e.length?ei(e,Yi(t,3),!0):[]},In.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&so(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ia(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ia(r))<0&&(r+=i),r=n>r?0:oa(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},In.filter=function(e,t){return(Ds(e)?at:ir)(e,Yi(t,3))},In.flatMap=function(e,t){return or(ps(e,t),1)},In.flatMapDeep=function(e,t){return or(ps(e,t),1/0)},In.flatMapDepth=function(e,t,n){return n=void 0===n?1:ia(n),or(ps(e,t),n)},In.flatten=Fo,In.flattenDeep=function(e){return null!=e&&e.length?or(e,1/0):[]},In.flattenDepth=function(e,t){return null!=e&&e.length?or(e,t=void 0===t?1:ia(t)):[]},In.flip=function(e){return Ni(e,512)},In.flow=Xa,In.flowRight=Ga,In.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},In.functions=function(e){return null==e?[]:ur(e,wa(e))},In.functionsIn=function(e){return null==e?[]:ur(e,Ca(e))},In.groupBy=us,In.initial=function(e){return null!=e&&e.length?Wr(e,0,-1):[]},In.intersection=Bo,In.intersectionBy=No,In.intersectionWith=jo,In.invert=_a,In.invertBy=va,In.invokeMap=hs,In.iteratee=$a,In.keyBy=ds,In.keys=wa,In.keysIn=Ca,In.map=ps,In.mapKeys=function(e,t){var n={};return t=Yi(t,3),lr(e,function(e,r,i){qn(n,t(e,r,i),e)}),n},In.mapValues=function(e,t){var n={};return t=Yi(t,3),lr(e,function(e,r,i){qn(n,r,t(e,r,i))}),n},In.matches=function(e){return Tr(Kn(e,1))},In.matchesProperty=function(e,t){return Ir(e,Kn(t,1))},In.memoize=Es,In.merge=xa,In.mergeWith=Ea,In.method=Ya,In.methodOf=Ka,In.mixin=Qa,In.negate=Ss,In.nthArg=function(e){return e=ia(e),Br(function(t){return kr(t,e)})},In.omit=Sa,In.omitBy=function(e,t){return Ta(e,Ss(Yi(t)))},In.once=function(e){return _s(2,e)},In.orderBy=function(e,t,n,r){return null==e?[]:(Ds(t)||(t=null==t?[]:[t]),Ds(n=r?void 0:n)||(n=null==n?[]:[n]),Rr(e,t,n))},In.over=Ja,In.overArgs=Ps,In.overEvery=el,In.overSome=tl,In.partial=Ts,In.partialRight=Is,In.partition=fs,In.pick=Pa,In.pickBy=Ta,In.property=nl,In.propertyOf=function(e){return function(t){return null==e?void 0:hr(e,t)}},In.pull=zo,In.pullAll=Vo,In.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Mr(e,t,Yi(n,2)):e},In.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Mr(e,t,void 0,n):e},In.pullAt=Uo,In.range=rl,In.rangeRight=il,In.rearg=Os,In.reject=function(e,t){return(Ds(e)?at:ir)(e,Ss(Yi(t,3)))},In.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Yi(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Dr(e,i),n},In.rest=function(e,t){if("function"!=typeof e)throw new ye(i);return Br(e,t=void 0===t?t:ia(t))},In.reverse=Wo,In.sampleSize=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:ia(t),(Ds(e)?Hn:jr)(e,t)},In.set=function(e,t,n){return null==e?e:Hr(e,t,n)},In.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Hr(e,t,n,r)},In.shuffle=function(e){return(Ds(e)?zn:Ur)(e)},In.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&so(e,t,n)?(t=0,n=r):(t=null==t?0:ia(t),n=void 0===n?r:ia(n)),Wr(e,t,n)):[]},In.sortBy=ms,In.sortedUniq=function(e){return e&&e.length?$r(e):[]},In.sortedUniqBy=function(e,t){return e&&e.length?$r(e,Yi(t,2)):[]},In.split=function(e,t,n){return n&&"number"!=typeof n&&so(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=la(e))&&("string"==typeof t||null!=t&&!Ys(t))&&!(t=Kr(t))&&Bt(e)?li(Wt(e),0,n):e.split(t,n):[]},In.spread=function(e,t){if("function"!=typeof e)throw new ye(i);return t=null==t?0:sn(ia(t),0),Br(function(n){var r=n[t],i=li(n,0,t);return r&&ht(i,r),nt(e,this,i)})},In.tail=function(e){var t=null==e?0:e.length;return t?Wr(e,1,t):[]},In.take=function(e,t,n){return e&&e.length?Wr(e,0,(t=n||void 0===t?1:ia(t))<0?0:t):[]},In.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,(t=r-(t=n||void 0===t?1:ia(t)))<0?0:t,r):[]},In.takeRightWhile=function(e,t){return e&&e.length?ei(e,Yi(t,3),!1,!0):[]},In.takeWhile=function(e,t){return e&&e.length?ei(e,Yi(t,3)):[]},In.tap=function(e,t){return t(e),e},In.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new ye(i);return Ws(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ws(e,t,{leading:r,maxWait:t,trailing:o})},In.thru=rs,In.toArray=na,In.toPairs=Ia,In.toPairsIn=Oa,In.toPath=function(e){return Ds(e)?ut(e,To):Zs(e)?[e]:gi(Po(la(e)))},In.toPlainObject=aa,In.transform=function(e,t,n){var r=Ds(e),i=r||Ns(e)||Js(e);if(t=Yi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ws(e)&&zs(o)?On(Ue(e)):{}}return(i?it:lr)(e,function(e,r,i){return t(n,e,r,i)}),n},In.unary=function(e){return ys(e,1)},In.union=Xo,In.unionBy=Go,In.unionWith=qo,In.uniq=function(e){return e&&e.length?Qr(e):[]},In.uniqBy=function(e,t){return e&&e.length?Qr(e,Yi(t,2)):[]},In.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Qr(e,void 0,t):[]},In.unset=function(e,t){return null==e||Zr(e,t)},In.unzip=$o,In.unzipWith=Yo,In.update=function(e,t,n){return null==e?e:Jr(e,t,oi(n))},In.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Jr(e,t,oi(n),r)},In.values=ka,In.valuesIn=function(e){return null==e?[]:Ot(e,Ca(e))},In.without=Ko,In.words=za,In.wrap=function(e,t){return Ts(oi(t),e)},In.xor=Qo,In.xorBy=Zo,In.xorWith=Jo,In.zip=es,In.zipObject=function(e,t){return ri(e||[],t||[],Un)},In.zipObjectDeep=function(e,t){return ri(e||[],t||[],Hr)},In.zipWith=ts,In.entries=Ia,In.entriesIn=Oa,In.extend=ua,In.extendWith=ha,Qa(In,In),In.add=ll,In.attempt=Va,In.camelCase=Ra,In.capitalize=Aa,In.ceil=cl,In.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=sa(n))==n?n:0),void 0!==t&&(t=(t=sa(t))==t?t:0),Yn(sa(e),t,n)},In.clone=function(e){return Kn(e,4)},In.cloneDeep=function(e){return Kn(e,5)},In.cloneDeepWith=function(e,t){return Kn(e,5,t="function"==typeof t?t:void 0)},In.cloneWith=function(e,t){return Kn(e,4,t="function"==typeof t?t:void 0)},In.conformsTo=function(e,t){return null==t||Qn(e,t,wa(t))},In.deburr=Ma,In.defaultTo=function(e,t){return null==e||e!=e?t:e},In.divide=ul,In.endsWith=function(e,t,n){e=la(e),t=Kr(t);var r=e.length,i=n=void 0===n?r:Yn(ia(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},In.eq=ks,In.escape=function(e){return(e=la(e))&&N.test(e)?e.replace(L,Ft):e},In.escapeRegExp=function(e){return(e=la(e))&&G.test(e)?e.replace(X,"\\$&"):e},In.every=function(e,t,n){var r=Ds(e)?st:nr;return n&&so(e,t,n)&&(t=void 0),r(e,Yi(t,3))},In.find=ss,In.findIndex=Mo,In.findKey=function(e,t){return gt(e,Yi(t,3),lr)},In.findLast=as,In.findLastIndex=Do,In.findLastKey=function(e,t){return gt(e,Yi(t,3),cr)},In.floor=hl,In.forEach=ls,In.forEachRight=cs,In.forIn=function(e,t){return null==e?e:sr(e,Yi(t,3),Ca)},In.forInRight=function(e,t){return null==e?e:ar(e,Yi(t,3),Ca)},In.forOwn=function(e,t){return e&&lr(e,Yi(t,3))},In.forOwnRight=function(e,t){return e&&cr(e,Yi(t,3))},In.get=ga,In.gt=Rs,In.gte=As,In.has=function(e,t){return null!=e&&no(e,t,mr)},In.hasIn=ya,In.head=Lo,In.identity=qa,In.includes=function(e,t,n,r){e=Ls(e)?e:ka(e),n=n&&!r?ia(n):0;var i=e.length;return n<0&&(n=sn(i+n,0)),Qs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&_t(e,t,n)>-1},In.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ia(n);return i<0&&(i=sn(r+i,0)),_t(e,t,i)},In.inRange=function(e,t,n){return t=ra(t),void 0===n?(n=t,t=0):n=ra(n),function(e,t,n){return e>=an(t,n)&&e<sn(t,n)}(e=sa(e),t,n)},In.invoke=ba,In.isArguments=Ms,In.isArray=Ds,In.isArrayBuffer=Fs,In.isArrayLike=Ls,In.isArrayLikeObject=Bs,In.isBoolean=function(e){return!0===e||!1===e||Xs(e)&&pr(e)==c},In.isBuffer=Ns,In.isDate=js,In.isElement=function(e){return Xs(e)&&1===e.nodeType&&!$s(e)},In.isEmpty=function(e){if(null==e)return!0;if(Ls(e)&&(Ds(e)||"string"==typeof e||"function"==typeof e.splice||Ns(e)||Js(e)||Ms(e)))return!e.length;var t=to(e);if(t==f||t==_)return!e.size;if(uo(e))return!Er(e).length;for(var n in e)if(Ce.call(e,n))return!1;return!0},In.isEqual=function(e,t){return br(e,t)},In.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?br(e,t,void 0,n):!!r},In.isError=Hs,In.isFinite=function(e){return"number"==typeof e&&nn(e)},In.isFunction=zs,In.isInteger=Vs,In.isLength=Us,In.isMap=Gs,In.isMatch=function(e,t){return e===t||wr(e,t,Qi(t))},In.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,wr(e,t,Qi(t),n)},In.isNaN=function(e){return qs(e)&&e!=+e},In.isNative=function(e){if(co(e))throw new he("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Cr(e)},In.isNil=function(e){return null==e},In.isNull=function(e){return null===e},In.isNumber=qs,In.isObject=Ws,In.isObjectLike=Xs,In.isPlainObject=$s,In.isRegExp=Ys,In.isSafeInteger=function(e){return Vs(e)&&e>=-9007199254740991&&e<=9007199254740991},In.isSet=Ks,In.isString=Qs,In.isSymbol=Zs,In.isTypedArray=Js,In.isUndefined=function(e){return void 0===e},In.isWeakMap=function(e){return Xs(e)&&to(e)==w},In.isWeakSet=function(e){return Xs(e)&&"[object WeakSet]"==pr(e)},In.join=function(e,t){return null==e?"":rn.call(e,t)},In.kebabCase=Da,In.last=Ho,In.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ia(n))<0?sn(r+i,0):an(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):yt(e,bt,i,!0)},In.lowerCase=Fa,In.lowerFirst=La,In.lt=ea,In.lte=ta,In.max=function(e){return e&&e.length?rr(e,qa,fr):void 0},In.maxBy=function(e,t){return e&&e.length?rr(e,Yi(t,2),fr):void 0},In.mean=function(e){return wt(e,qa)},In.meanBy=function(e,t){return wt(e,Yi(t,2))},In.min=function(e){return e&&e.length?rr(e,qa,Sr):void 0},In.minBy=function(e,t){return e&&e.length?rr(e,Yi(t,2),Sr):void 0},In.stubArray=ol,In.stubFalse=sl,In.stubObject=function(){return{}},In.stubString=function(){return""},In.stubTrue=function(){return!0},In.multiply=dl,In.nth=function(e,t){return e&&e.length?kr(e,ia(t)):void 0},In.noConflict=function(){return We._===this&&(We._=Te),this},In.noop=Za,In.now=gs,In.pad=function(e,t,n){e=la(e);var r=(t=ia(t))?Ut(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ri(Jt(i),n)+e+Ri(Zt(i),n)},In.padEnd=function(e,t,n){e=la(e);var r=(t=ia(t))?Ut(e):0;return t&&r<t?e+Ri(t-r,n):e},In.padStart=function(e,t,n){e=la(e);var r=(t=ia(t))?Ut(e):0;return t&&r<t?Ri(t-r,n)+e:e},In.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),cn(la(e).replace(q,""),t||0)},In.random=function(e,t,n){if(n&&"boolean"!=typeof n&&so(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ra(e),void 0===t?(t=e,e=0):t=ra(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=un();return an(e+i*(t-e+He("1e-"+((i+"").length-1))),t)}return Fr(e,t)},In.reduce=function(e,t,n){var r=Ds(e)?dt:Et,i=arguments.length<3;return r(e,Yi(t,4),n,i,er)},In.reduceRight=function(e,t,n){var r=Ds(e)?pt:Et,i=arguments.length<3;return r(e,Yi(t,4),n,i,tr)},In.repeat=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:ia(t),Lr(la(e),t)},In.replace=function(){var e=arguments,t=la(e[0]);return e.length<3?t:t.replace(e[1],e[2])},In.result=function(e,t,n){var r=-1,i=(t=si(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[To(t[r])];void 0===o&&(r=i,o=n),e=zs(o)?o.call(e):o}return e},In.round=pl,In.runInContext=e,In.sample=function(e){return(Ds(e)?jn:Nr)(e)},In.size=function(e){if(null==e)return 0;if(Ls(e))return Qs(e)?Ut(e):e.length;var t=to(e);return t==f||t==_?e.size:Er(e).length},In.snakeCase=Ba,In.some=function(e,t,n){var r=Ds(e)?ft:Xr;return n&&so(e,t,n)&&(t=void 0),r(e,Yi(t,3))},In.sortedIndex=function(e,t){return Gr(e,t)},In.sortedIndexBy=function(e,t,n){return qr(e,t,Yi(n,2))},In.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Gr(e,t);if(r<n&&ks(e[r],t))return r}return-1},In.sortedLastIndex=function(e,t){return Gr(e,t,!0)},In.sortedLastIndexBy=function(e,t,n){return qr(e,t,Yi(n,2),!0)},In.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Gr(e,t,!0)-1;if(ks(e[n],t))return n}return-1},In.startCase=Na,In.startsWith=function(e,t,n){return e=la(e),n=null==n?0:Yn(ia(n),0,e.length),t=Kr(t),e.slice(n,n+t.length)==t},In.subtract=fl,In.sum=function(e){return e&&e.length?St(e,qa):0},In.sumBy=function(e,t){return e&&e.length?St(e,Yi(t,2)):0},In.template=function(e,t,n){var r=In.templateSettings;n&&so(e,t,n)&&(t=void 0),e=la(e),t=ha({},t,r,ji);var i,o,s=ha({},t.imports,r.imports,ji),a=wa(s),l=Ot(s,a),c=0,u=t.interpolate||ce,h="__p += '",d=me((t.escape||ce).source+"|"+u.source+"|"+(u===z?te:ce).source+"|"+(t.evaluate||ce).source+"|$","g"),p="//# sourceURL="+(Ce.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Le+"]")+"\n";e.replace(d,function(t,n,r,s,a,l){return r||(r=s),h+=e.slice(c,l).replace(ue,Lt),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),h+="';\n";var f=Ce.call(t,"variable")&&t.variable;if(f){if(J.test(f))throw new he("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(A,""):h).replace(M,"$1").replace(D,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Va(function(){return de(a,p+"return "+h).apply(void 0,l)});if(m.source=h,Hs(m))throw m;return m},In.times=function(e,t){if((e=ia(e))<1||e>9007199254740991)return[];var n=4294967295,r=an(e,4294967295);e-=4294967295;for(var i=Pt(r,t=Yi(t));++n<e;)t(n);return i},In.toFinite=ra,In.toInteger=ia,In.toLength=oa,In.toLower=function(e){return la(e).toLowerCase()},In.toNumber=sa,In.toSafeInteger=function(e){return e?Yn(ia(e),-9007199254740991,9007199254740991):0===e?e:0},In.toString=la,In.toUpper=function(e){return la(e).toUpperCase()},In.trim=function(e,t,n){if((e=la(e))&&(n||void 0===t))return Tt(e);if(!e||!(t=Kr(t)))return e;var r=Wt(e),i=Wt(t);return li(r,Rt(r,i),At(r,i)+1).join("")},In.trimEnd=function(e,t,n){if((e=la(e))&&(n||void 0===t))return e.slice(0,Xt(e)+1);if(!e||!(t=Kr(t)))return e;var r=Wt(e);return li(r,0,At(r,Wt(t))+1).join("")},In.trimStart=function(e,t,n){if((e=la(e))&&(n||void 0===t))return e.replace(q,"");if(!e||!(t=Kr(t)))return e;var r=Wt(e);return li(r,Rt(r,Wt(t))).join("")},In.truncate=function(e,t){var n=30,r="...";if(Ws(t)){var i="separator"in t?t.separator:i;n="length"in t?ia(t.length):n,r="omission"in t?Kr(t.omission):r}var o=(e=la(e)).length;if(Bt(e)){var s=Wt(e);o=s.length}if(n>=o)return e;var a=n-Ut(r);if(a<1)return r;var l=s?li(s,0,a).join(""):e.slice(0,a);if(void 0===i)return l+r;if(s&&(a+=l.length-a),Ys(i)){if(e.slice(a).search(i)){var c,u=l;for(i.global||(i=me(i.source,la(ne.exec(i))+"g")),i.lastIndex=0;c=i.exec(u);)var h=c.index;l=l.slice(0,void 0===h?a:h)}}else if(e.indexOf(Kr(i),a)!=a){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r},In.unescape=function(e){return(e=la(e))&&B.test(e)?e.replace(F,Gt):e},In.uniqueId=function(e){var t=++xe;return la(e)+t},In.upperCase=ja,In.upperFirst=Ha,In.each=ls,In.eachRight=cs,In.first=Lo,Qa(In,(al={},lr(In,function(e,t){Ce.call(In.prototype,t)||(al[t]=e)}),al),{chain:!1}),In.VERSION="4.17.21",it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){In[e].placeholder=In}),it(["drop","take"],function(e,t){An.prototype[e]=function(n){n=void 0===n?1:sn(ia(n),0);var r=this.__filtered__&&!t?new An(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},An.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),it(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;An.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),it(["head","last"],function(e,t){var n="take"+(t?"Right":"");An.prototype[e]=function(){return this[n](1).value()[0]}}),it(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");An.prototype[e]=function(){return this.__filtered__?new An(this):this[n](1)}}),An.prototype.compact=function(){return this.filter(qa)},An.prototype.find=function(e){return this.filter(e).head()},An.prototype.findLast=function(e){return this.reverse().find(e)},An.prototype.invokeMap=Br(function(e,t){return"function"==typeof e?new An(this):this.map(function(n){return _r(n,e,t)})}),An.prototype.reject=function(e){return this.filter(Ss(Yi(e)))},An.prototype.slice=function(e,t){e=ia(e);var n=this;return n.__filtered__&&(e>0||t<0)?new An(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ia(t))<0?n.dropRight(-t):n.take(t-e)),n)},An.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},An.prototype.toArray=function(){return this.take(4294967295)},lr(An.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=In[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(In.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,a=t instanceof An,l=s[0],c=a||Ds(t),u=function(e){var t=i.apply(In,ht([e],s));return r&&h?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(a=c=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,f=a&&!d;if(!o&&c){t=f?t:new An(this);var m=e.apply(t,s);return m.__actions__.push({func:rs,args:[u],thisArg:void 0}),new Rn(m,h)}return p&&f?e.apply(this,s):(m=this.thru(u),p?r?m.value()[0]:m.value():m)})}),it(["pop","push","shift","sort","splice","unshift"],function(e){var t=_e[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);In.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ds(i)?i:[],e)}return this[n](function(n){return t.apply(Ds(n)?n:[],e)})}}),lr(An.prototype,function(e,t){var n=In[t];if(n){var r=n.name+"";Ce.call(vn,r)||(vn[r]=[]),vn[r].push({name:t,func:n})}}),vn[Ti(void 0,2).name]=[{name:"wrapper",func:void 0}],An.prototype.clone=function(){var e=new An(this.__wrapped__);return e.__actions__=gi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=gi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=gi(this.__views__),e},An.prototype.reverse=function(){if(this.__filtered__){var e=new An(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},An.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ds(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=an(t,e+s);break;case"takeRight":e=sn(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,l=a-s,c=r?a:s-1,u=this.__iteratees__,h=u.length,d=0,p=an(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return ti(e,this.__actions__);var f=[];e:for(;l--&&d<p;){for(var m=-1,g=e[c+=t];++m<h;){var y=u[m],_=y.type,v=(0,y.iteratee)(g);if(2==_)g=v;else if(!v){if(1==_)continue e;break e}}f[d++]=g}return f},In.prototype.at=is,In.prototype.chain=function(){return ns(this)},In.prototype.commit=function(){return new Rn(this.value(),this.__chain__)},In.prototype.next=function(){void 0===this.__values__&&(this.__values__=na(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},In.prototype.plant=function(e){for(var t,n=this;n instanceof kn;){var r=Oo(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},In.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof An){var t=e;return this.__actions__.length&&(t=new An(this)),(t=t.reverse()).__actions__.push({func:rs,args:[Wo],thisArg:void 0}),new Rn(t,this.__chain__)}return this.thru(Wo)},In.prototype.toJSON=In.prototype.valueOf=In.prototype.value=function(){return ti(this.__wrapped__,this.__actions__)},In.prototype.first=In.prototype.head,mt&&(In.prototype[mt]=function(){return this}),In}();We._=qt,void 0===(r=(function(){return qt}).call(t,n,t,e))||(e.exports=r)}).call(this)}).call(this,n("YuTi")(e))},NCjB:function(e,t){e.exports={}},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},WOAq:function(e,t,n){"use strict";(function(e){var r=n("Ju5/"),i=n("L3Qv"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.a.Buffer:void 0;t.a=(a?a.isBuffer:void 0)||i.a}).call(this,n("3UD+")(e))},XqMk:function(e,t,n){"use strict";var r="object"==typeof global&&global&&global.Object===Object&&global;t.a=r},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"f/Cj":function(e,t,n){var r,i=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(e){var t,i,o=void 0!==(e=e||{})?e:{};o.ready=new Promise(function(e,n){t=e,i=n}),Object.getOwnPropertyDescriptor(o.ready,"_main")||(Object.defineProperty(o.ready,"_main",{configurable:!0,get:function(){ze("You are getting _main on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_main",{configurable:!0,set:function(){ze("You are setting _main on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"___cxa_demangle")||(Object.defineProperty(o.ready,"___cxa_demangle",{configurable:!0,get:function(){ze("You are getting ___cxa_demangle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"___cxa_demangle",{configurable:!0,set:function(){ze("You are setting ___cxa_demangle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_malloc")||(Object.defineProperty(o.ready,"_malloc",{configurable:!0,get:function(){ze("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_malloc",{configurable:!0,set:function(){ze("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_free")||(Object.defineProperty(o.ready,"_free",{configurable:!0,get:function(){ze("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_free",{configurable:!0,set:function(){ze("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_stackSave")||(Object.defineProperty(o.ready,"_stackSave",{configurable:!0,get:function(){ze("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_stackSave",{configurable:!0,set:function(){ze("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_stackRestore")||(Object.defineProperty(o.ready,"_stackRestore",{configurable:!0,get:function(){ze("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_stackRestore",{configurable:!0,set:function(){ze("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_stackAlloc")||(Object.defineProperty(o.ready,"_stackAlloc",{configurable:!0,get:function(){ze("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_stackAlloc",{configurable:!0,set:function(){ze("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"___data_end")||(Object.defineProperty(o.ready,"___data_end",{configurable:!0,get:function(){ze("You are getting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"___data_end",{configurable:!0,set:function(){ze("You are setting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"___wasm_call_ctors")||(Object.defineProperty(o.ready,"___wasm_call_ctors",{configurable:!0,get:function(){ze("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"___wasm_call_ctors",{configurable:!0,set:function(){ze("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_fflush")||(Object.defineProperty(o.ready,"_fflush",{configurable:!0,get:function(){ze("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_fflush",{configurable:!0,set:function(){ze("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"___errno_location")||(Object.defineProperty(o.ready,"___errno_location",{configurable:!0,get:function(){ze("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"___errno_location",{configurable:!0,set:function(){ze("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"___cxa_is_pointer_type")||(Object.defineProperty(o.ready,"___cxa_is_pointer_type",{configurable:!0,get:function(){ze("You are getting ___cxa_is_pointer_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"___cxa_is_pointer_type",{configurable:!0,set:function(){ze("You are setting ___cxa_is_pointer_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"___cxa_can_catch")||(Object.defineProperty(o.ready,"___cxa_can_catch",{configurable:!0,get:function(){ze("You are getting ___cxa_can_catch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"___cxa_can_catch",{configurable:!0,set:function(){ze("You are setting ___cxa_can_catch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_setThrew")||(Object.defineProperty(o.ready,"_setThrew",{configurable:!0,get:function(){ze("You are getting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_setThrew",{configurable:!0,set:function(){ze("You are setting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"__ZSt18uncaught_exceptionv")||(Object.defineProperty(o.ready,"__ZSt18uncaught_exceptionv",{configurable:!0,get:function(){ze("You are getting __ZSt18uncaught_exceptionv on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"__ZSt18uncaught_exceptionv",{configurable:!0,set:function(){ze("You are setting __ZSt18uncaught_exceptionv on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_emscripten_webgl_make_context_current")||(Object.defineProperty(o.ready,"_emscripten_webgl_make_context_current",{configurable:!0,get:function(){ze("You are getting _emscripten_webgl_make_context_current on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_emscripten_webgl_make_context_current",{configurable:!0,set:function(){ze("You are setting _emscripten_webgl_make_context_current on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_emscripten_webgl_get_current_context")||(Object.defineProperty(o.ready,"_emscripten_webgl_get_current_context",{configurable:!0,get:function(){ze("You are getting _emscripten_webgl_get_current_context on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_emscripten_webgl_get_current_context",{configurable:!0,set:function(){ze("You are setting _emscripten_webgl_get_current_context on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_usleep")||(Object.defineProperty(o.ready,"_usleep",{configurable:!0,get:function(){ze("You are getting _usleep on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_usleep",{configurable:!0,set:function(){ze("You are setting _usleep on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_memset")||(Object.defineProperty(o.ready,"_memset",{configurable:!0,get:function(){ze("You are getting _memset on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_memset",{configurable:!0,set:function(){ze("You are setting _memset on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_realloc")||(Object.defineProperty(o.ready,"_realloc",{configurable:!0,get:function(){ze("You are getting _realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_realloc",{configurable:!0,set:function(){ze("You are setting _realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_testSetjmp")||(Object.defineProperty(o.ready,"_testSetjmp",{configurable:!0,get:function(){ze("You are getting _testSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_testSetjmp",{configurable:!0,set:function(){ze("You are setting _testSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"_saveSetjmp")||(Object.defineProperty(o.ready,"_saveSetjmp",{configurable:!0,get:function(){ze("You are getting _saveSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"_saveSetjmp",{configurable:!0,set:function(){ze("You are setting _saveSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"__get_tzname")||(Object.defineProperty(o.ready,"__get_tzname",{configurable:!0,get:function(){ze("You are getting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"__get_tzname",{configurable:!0,set:function(){ze("You are setting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"__get_daylight")||(Object.defineProperty(o.ready,"__get_daylight",{configurable:!0,get:function(){ze("You are getting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"__get_daylight",{configurable:!0,set:function(){ze("You are setting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"__get_timezone")||(Object.defineProperty(o.ready,"__get_timezone",{configurable:!0,get:function(){ze("You are getting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"__get_timezone",{configurable:!0,set:function(){ze("You are setting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(o.ready,"onRuntimeInitialized")||(Object.defineProperty(o.ready,"onRuntimeInitialized",{configurable:!0,get:function(){ze("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(o.ready,"onRuntimeInitialized",{configurable:!0,set:function(){ze("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var s,a={};for(s in o)o.hasOwnProperty(s)&&(a[s]=o[s]);var l=[],c="./this.program",u=function(e,t){throw t},h=!1,d=!1,p=!1,f=!1;if(h="object"==typeof window,d="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,f=!h&&!p&&!d,o.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var m,g,y,_,v="";function b(e){return o.locateFile?o.locateFile(e,v):v+e}if(p)v=d?n("9uiH").dirname(v)+"/":__dirname+"/",m=function(e,t){return y||(y=n("NCjB")),_||(_=n("9uiH")),e=_.normalize(e),y.readFileSync(e,t?null:"utf8")},g=function(e){var t=m(e,!0);return t.buffer||(t=new Uint8Array(t)),D(t.buffer),t},process.argv.length>1&&(c=process.argv[1].replace(/\\/g,"/")),l=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof Ra))throw e}),process.on("unhandledRejection",ze),u=function(e){process.exit(e)},o.inspect=function(){return"[Emscripten Module object]"};else if(f)"undefined"!=typeof read&&(m=function(e){return read(e)}),g=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(D("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?l=scriptArgs:void 0!==arguments&&(l=arguments),"function"==typeof quit&&(u=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print);else{if(!h&&!d)throw new Error("environment detection error");d?v=self.location.href:document.currentScript&&(v=document.currentScript.src),r&&(v=r),v=0!==v.indexOf("blob:")?v.substr(0,v.lastIndexOf("/")+1):"",m=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(g=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})}var w=o.print||console.log.bind(console),C=o.printErr||console.warn.bind(console);for(s in a)a.hasOwnProperty(s)&&(o[s]=a[s]);a=null,o.arguments&&(l=o.arguments),Object.getOwnPropertyDescriptor(o,"arguments")||Object.defineProperty(o,"arguments",{configurable:!0,get:function(){ze("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),o.thisProgram&&(c=o.thisProgram),Object.getOwnPropertyDescriptor(o,"thisProgram")||Object.defineProperty(o,"thisProgram",{configurable:!0,get:function(){ze("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),o.quit&&(u=o.quit),Object.getOwnPropertyDescriptor(o,"quit")||Object.defineProperty(o,"quit",{configurable:!0,get:function(){ze("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),D(void 0===o.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),D(void 0===o.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),D(void 0===o.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),D(void 0===o.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),D(void 0===o.read,"Module.read option was removed (modify read_ in JS)"),D(void 0===o.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),D(void 0===o.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),D(void 0===o.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),D(void 0===o.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(o,"read")||Object.defineProperty(o,"read",{configurable:!0,get:function(){ze("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(o,"readAsync")||Object.defineProperty(o,"readAsync",{configurable:!0,get:function(){ze("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(o,"readBinary")||Object.defineProperty(o,"readBinary",{configurable:!0,get:function(){ze("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(o,"setWindowTitle")||Object.defineProperty(o,"setWindowTitle",{configurable:!0,get:function(){ze("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});var x=16;function E(e,t){return t||(t=x),Math.ceil(e/t)*t}function S(e){S.shown||(S.shown={}),S.shown[e]||(S.shown[e]=1,C(e))}var P,T,I,O=0,k=function(e){O=e},R=function(){return O};o.wasmBinary&&(P=o.wasmBinary),Object.getOwnPropertyDescriptor(o,"wasmBinary")||Object.defineProperty(o,"wasmBinary",{configurable:!0,get:function(){ze("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),o.noExitRuntime&&(T=o.noExitRuntime),Object.getOwnPropertyDescriptor(o,"noExitRuntime")||Object.defineProperty(o,"noExitRuntime",{configurable:!0,get:function(){ze("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),"object"!=typeof WebAssembly&&ze("no native wasm support detected");var A=new WebAssembly.Table({initial:3815,maximum:3815,element:"anyfunc"}),M=!1;function D(e,t){e||ze("Assertion failed: "+t)}var F="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function L(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&F)return F.decode(e.subarray(t,i));for(var o="";t<i;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if(224==(240&s)?s=(15&s)<<12|a<<6|l:(240!=(248&s)&&S("Invalid UTF-8 leading byte 0x"+s.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),s=(7&s)<<18|a<<12|l<<6|63&e[t++]),s<65536)o+=String.fromCharCode(s);else{var c=s-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function B(e,t){return e?L(J,e,t):""}function N(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s)),a<=127){if(n>=o)break;t[n++]=a}else if(a<=2047){if(n+1>=o)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=o)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=o)break;a>=2097152&&S("Invalid Unicode code point 0x"+a.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}return t[n]=0,n-i}function j(e,t,n){return D("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),N(e,J,t,n)}function H(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}var z="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function V(e,t){D(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var n=e,r=n>>1,i=r+t/2;!(r>=i)&&te[r];)++r;if((n=r<<1)-e>32&&z)return z.decode(J.subarray(e,n));for(var o=0,s="";;){var a=ee[e+2*o>>1];if(0==a||o==t/2)return s;++o,s+=String.fromCharCode(a)}}function U(e,t,n){if(D(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),D("number"==typeof n,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,o=0;o<i;++o){var s=e.charCodeAt(o);ee[t>>1]=s,t+=2}return ee[t>>1]=0,t-r}function W(e){return 2*e.length}function X(e,t){D(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var n=0,r="";!(n>=t/4);){var i=ne[e+4*n>>2];if(0==i)break;if(++n,i>=65536){var o=i-65536;r+=String.fromCharCode(55296|o>>10,56320|1023&o)}else r+=String.fromCharCode(i)}return r}function G(e,t,n){if(D(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),D("number"==typeof n,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,i=r+n-4,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),ne[t>>2]=s,(t+=4)+4>i)break}return ne[t>>2]=0,t-r}function q(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function $(e){var t=H(e)+1,n=fs(t);return n&&N(e,Z,n,t),n}function Y(e,t){D(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),Z.set(e,t)}function K(e,t,n){for(var r=0;r<e.length;++r)D(e.charCodeAt(r)==e.charCodeAt(r)&255),Z[t++>>0]=e.charCodeAt(r);n||(Z[t>>0]=0)}var Q,Z,J,ee,te,ne,re,ie,oe,se=65536;function ae(e,t){return e%t>0&&(e+=t-e%t),e}function le(e){Q=e,o.HEAP8=Z=new Int8Array(e),o.HEAP16=ee=new Int16Array(e),o.HEAP32=ne=new Int32Array(e),o.HEAPU8=J=new Uint8Array(e),o.HEAPU16=te=new Uint16Array(e),o.HEAPU32=re=new Uint32Array(e),o.HEAPF32=ie=new Float32Array(e),o.HEAPF64=oe=new Float64Array(e)}var ce=5655536,ue=412656,he=5655536;D(ce%16==0,"stack must start aligned"),D(he%16==0,"heap must start aligned");var de=5242880;o.TOTAL_STACK&&D(de===o.TOTAL_STACK,"the stack size can no longer be determined at runtime");var pe=o.INITIAL_MEMORY||16777216;function fe(){D(0==(3&ue)),re[1+(ue>>2)]=34821223,re[2+(ue>>2)]=2310721022,ne[0]=1668509029}function me(){var e=re[1+(ue>>2)],t=re[2+(ue>>2)];34821223==e&&2310721022==t||ze("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+t.toString(16)+" "+e.toString(16)),1668509029!==ne[0]&&ze("Runtime error: The application has corrupted its heap memory area (address zero)!")}Object.getOwnPropertyDescriptor(o,"INITIAL_MEMORY")||Object.defineProperty(o,"INITIAL_MEMORY",{configurable:!0,get:function(){ze("Module.INITIAL_MEMORY has been replaced with plain INITIAL_INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),D(pe>=de,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+pe+"! (TOTAL_STACK="+de+")"),D("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),(I=o.wasmMemory?o.wasmMemory:new WebAssembly.Memory({initial:pe/se,maximum:2147483648/se}))&&(Q=I.buffer),D((pe=Q.byteLength)%se==0),D(65536%se==0),le(Q),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian!"}();var ge=[],ye=[],_e=[],ve=[],be=[],we=!1,Ce=!1;function xe(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)Ie(o.preRun.shift());et(ge)}function Ee(){me(),D(!we),we=!0,o.noFSInit||Bt.init.initialized||Bt.init(),Mt.init(),et(ye)}function Se(){me(),Bt.ignorePermissions=!1,et(_e)}function Pe(){me(),Ce=!0}function Te(){if(me(),o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)Oe(o.postRun.shift());et(be)}function Ie(e){ge.unshift(e)}function Oe(e){be.unshift(e)}D(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),D(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),D(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),D(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var ke=Math.abs,Re=Math.ceil,Ae=Math.floor,Me=Math.min,De=0,Fe=null,Le=null,Be={};function Ne(e){for(var t=e;;){if(!Be[e])return e;e=t+Math.random()}}function je(e){De++,o.monitorRunDependencies&&o.monitorRunDependencies(De),e?(D(!Be[e]),Be[e]=1,null===Fe&&"undefined"!=typeof setInterval&&(Fe=setInterval(function(){if(M)return clearInterval(Fe),void(Fe=null);var e=!1;for(var t in Be)e||(e=!0,C("still waiting on run dependencies:")),C("dependency: "+t);e&&C("(end of list)")},1e4))):C("warning: run dependency added without ID")}function He(e){if(De--,o.monitorRunDependencies&&o.monitorRunDependencies(De),e?(D(Be[e]),delete Be[e]):C("warning: run dependency removed without ID"),0==De&&(null!==Fe&&(clearInterval(Fe),Fe=null),Le)){var t=Le;Le=null,t()}}function ze(e){o.onAbort&&o.onAbort(e),C(e+=""),M=!0,e="abort("+e+") at "+st();var t=new WebAssembly.RuntimeError(e);throw i(t),t}function Ve(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}o.preloadedImages={},o.preloadedAudios={};var Ue="data:application/octet-stream;base64,";function We(e){return Ve(e,Ue)}var Xe="file://";function Ge(e){return Ve(e,Xe)}function qe(e,t){return function(){var n=e,r=t;return t||(r=o.asm),D(we,"native function `"+n+"` called before runtime initialization"),D(!Ce,"native function `"+n+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),r[e]||D(r[e],"exported native function `"+n+"` not found"),r[e].apply(null,arguments)}}var $e,Ye,Ke="TextWhizzJS.wasm";function Qe(){try{if(P)return new Uint8Array(P);if(g)return g(Ke);throw"both async and sync fetching of the wasm failed"}catch(C){ze(C)}}function Ze(){return P||!h&&!d||"function"!=typeof fetch||Ge(Ke)?Promise.resolve().then(Qe):fetch(Ke,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Ke+"'";return e.arrayBuffer()}).catch(function(){return Qe()})}function Je(){var e={env:hs,wasi_snapshot_preview1:hs};function t(e,t){o.asm=e.exports,He("wasm-instantiate")}je("wasm-instantiate");var n=o;function r(e){D(o===n,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),n=null,t(e.instance)}function i(t){return Ze().then(function(t){return WebAssembly.instantiate(t,e)}).then(t,function(e){C("failed to asynchronously prepare wasm: "+e),ze(e)})}if(o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(s){return C("Module.instantiateWasm callback failed with error: "+s),!1}return function(){if(P||"function"!=typeof WebAssembly.instantiateStreaming||We(Ke)||Ge(Ke)||"function"!=typeof fetch)return i(r);fetch(Ke,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(r,function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),i(r)})})}(),{}}function et(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?A.get(n)():A.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(o)}}function tt(e){if((tt.recursionGuard=1+(0|tt.recursionGuard))>1)return e;var t=o.___cxa_demangle||o.__cxa_demangle;D(t);var n=Cs();try{var r=e;r.startsWith("__Z")&&(r=r.substr(1));var i=H(r)+1,s=Es(i);j(r,s,i);var a=Es(4),l=t(s,0,0,a);if(0===ne[a>>2]&&l)return B(l)}catch(c){}finally{ps(l),xs(n),tt.recursionGuard<2&&--tt.recursionGuard}return e}function nt(e){return e.replace(/\b_Z[\w\d_]+/g,function(e){var t=tt(e);return e===t?e:t+" ["+e+"]"})}function rt(e,t,n){return D("dynCall_"+e in o,"bad function pointer type - no table for sig '"+e+"'"),D(n&&n.length?n.length===e.substring(1).replace(/j/g,"--").length:1==e.length),n&&n.length?o["dynCall_"+e].apply(null,[t].concat(n)):o["dynCall_"+e].call(null,t)}function it(e,t,n){return-1!=e.indexOf("j")?rt(e,t,n):A.get(t).apply(null,n)}function ot(){var e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function st(){var e=ot();return o.extraStackTrace&&(e+="\n"+o.extraStackTrace()),nt(e)}We(Ke)||(Ke=b(Ke)),ye.push({func:function(){ds()}});var at={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function lt(e){return fs(e+at.SIZE)+at.SIZE}function ct(e,t){}function ut(e){this.excPtr=e,this.ptr=e-at.SIZE,this.set_type=function(e){ne[this.ptr+at.TYPE_OFFSET>>2]=e},this.get_type=function(){return ne[this.ptr+at.TYPE_OFFSET>>2]},this.set_destructor=function(e){ne[this.ptr+at.DESTRUCTOR_OFFSET>>2]=e},this.get_destructor=function(){return ne[this.ptr+at.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(e){ne[this.ptr+at.REFCOUNT_OFFSET>>2]=e},this.set_caught=function(e){Z[this.ptr+at.CAUGHT_OFFSET>>0]=e=e?1:0},this.get_caught=function(){return 0!=Z[this.ptr+at.CAUGHT_OFFSET>>0]},this.set_rethrown=function(e){Z[this.ptr+at.RETHROWN_OFFSET>>0]=e=e?1:0},this.get_rethrown=function(){return 0!=Z[this.ptr+at.RETHROWN_OFFSET>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){ne[this.ptr+at.REFCOUNT_OFFSET>>2]=ne[this.ptr+at.REFCOUNT_OFFSET>>2]+1},this.release_ref=function(){var e=ne[this.ptr+at.REFCOUNT_OFFSET>>2];return ne[this.ptr+at.REFCOUNT_OFFSET>>2]=e-1,D(e>0),1===e}}function ht(e){this.free=function(){ps(this.ptr),this.ptr=0},this.set_base_ptr=function(e){ne[this.ptr>>2]=e},this.get_base_ptr=function(){return ne[this.ptr>>2]},this.set_adjusted_ptr=function(e){ne[this.ptr+4>>2]=e},this.get_adjusted_ptr=function(){return ne[this.ptr+4>>2]},this.get_exception_ptr=function(){if(Ps(this.get_exception_info().get_type()))return ne[this.get_base_ptr()>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.get_base_ptr()},this.get_exception_info=function(){return new ut(this.get_base_ptr())},void 0===e?(this.ptr=fs(8),this.set_adjusted_ptr(0)):this.ptr=e}var dt=[];function pt(e){e.add_ref()}function ft(e){var t=new ht(e),n=t.get_exception_info();return n.get_caught()||(n.set_caught(!0),gs.uncaught_exceptions--),n.set_rethrown(!1),dt.push(t),pt(n),t.get_exception_ptr()}var mt=0;function gt(e){try{return ps(new ut(e).ptr)}catch(t){C("exception during cxa_free_exception: "+t)}}function yt(e){if(e.release_ref()&&!e.get_rethrown()){var t=e.get_destructor();t&&A.get(t)(e.excPtr),gt(e.excPtr)}}function _t(){ws(0),D(dt.length>0);var e=dt.pop();yt(e.get_exception_info()),e.free(),mt=0}function vt(e){var t=new ht(e),n=t.get_base_ptr();throw mt||(mt=n),t.free(),n}var bt=0;function wt(){var e=mt;if(!e)return 0|(k(0),0);var t=new ut(e),n=t.get_type(),r=new ht;if(r.set_base_ptr(e),!n)return 0|(k(0),r.ptr);var i=Array.prototype.slice.call(arguments);bt||(bt=fs(4)),ne[bt>>2]=e;for(var o=0;o<i.length;o++){var s=i[o];if(0===s||s===n)break;if(Ss(s,n,bt)){var a=ne[bt>>2];return e!==a&&r.set_adjusted_ptr(a),0|(k(s),r.ptr)}}return 0|(k(n),r.ptr)}function Ct(){var e=mt;if(!e)return 0|(k(0),0);var t=new ut(e),n=t.get_type(),r=new ht;if(r.set_base_ptr(e),!n)return 0|(k(0),r.ptr);var i=Array.prototype.slice.call(arguments);bt||(bt=fs(4)),ne[bt>>2]=e;for(var o=0;o<i.length;o++){var s=i[o];if(0===s||s===n)break;if(Ss(s,n,bt)){var a=ne[bt>>2];return e!==a&&r.set_adjusted_ptr(a),0|(k(s),r.ptr)}}return 0|(k(n),r.ptr)}function xt(){var e=dt.pop(),t=e.get_exception_info(),n=e.get_base_ptr();throw t.get_rethrown()?e.free():(dt.push(e),t.set_rethrown(!0)),mt=n,n}function Et(e,t,n){throw new ut(e).init(t,n),mt=e,"uncaught_exception"in gs?gs.uncaught_exceptions++:gs.uncaught_exceptions=1,e}function St(){return gs.uncaught_exceptions}function Pt(){if(!Pt.called){Pt.called=!0,ne[bs()>>2]=60*(new Date).getTimezoneOffset();var e=(new Date).getFullYear(),t=new Date(e,0,1),n=new Date(e,6,1);ne[vs()>>2]=Number(t.getTimezoneOffset()!=n.getTimezoneOffset());var r=a(t),i=a(n),o=$(r),s=$(i);n.getTimezoneOffset()<t.getTimezoneOffset()?(ne[_s()>>2]=o,ne[_s()+4>>2]=s):(ne[_s()>>2]=s,ne[_s()+4>>2]=o)}function a(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}}function Tt(e,t){Pt();var n=new Date(1e3*ne[e>>2]);ne[t>>2]=n.getSeconds(),ne[t+4>>2]=n.getMinutes(),ne[t+8>>2]=n.getHours(),ne[t+12>>2]=n.getDate(),ne[t+16>>2]=n.getMonth(),ne[t+20>>2]=n.getFullYear()-1900,ne[t+24>>2]=n.getDay();var r=new Date(n.getFullYear(),0,1),i=(n.getTime()-r.getTime())/864e5|0;ne[t+28>>2]=i,ne[t+36>>2]=-60*n.getTimezoneOffset();var o=new Date(n.getFullYear(),6,1).getTimezoneOffset(),s=r.getTimezoneOffset(),a=0|(o!=s&&n.getTimezoneOffset()==Math.min(s,o));ne[t+32>>2]=a;var l=ne[_s()+(a?4:0)>>2];return ne[t+40>>2]=l,t}function It(e,t){return Tt(e,t)}function Ot(e){return ne[ms()>>2]=e,e}function kt(e,t){return Ot(63),-1}var Rt={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=Rt.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=Rt.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=Rt.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return Rt.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Rt.normalize(e.join("/"))},join2:function(e,t){return Rt.normalize(e+"/"+t)}},At={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:Bt.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return(t?"/":"")+(e=Rt.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"))||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=At.resolve(e).substr(1),t=At.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),s=o,a=0;a<o;a++)if(r[a]!==i[a]){s=a;break}var l=[];for(a=s;a<r.length;a++)l.push("..");return(l=l.concat(i.slice(s))).join("/")}},Mt={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Mt.ttys[e]={input:[],output:[],ops:t},Bt.registerDevice(e,Mt.stream_ops)},stream_ops:{open:function(e){var t=Mt.ttys[e.node.rdev];if(!t)throw new Bt.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new Bt.ErrnoError(60);for(var o=0,s=0;s<r;s++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(l){throw new Bt.ErrnoError(29)}if(void 0===a&&0===o)throw new Bt.ErrnoError(6);if(null==a)break;o++,t[n+s]=a}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new Bt.ErrnoError(60);try{for(var o=0;o<r;o++)e.tty.ops.put_char(e.tty,t[n+o])}catch(s){throw new Bt.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(p){var n=Buffer.alloc?Buffer.alloc(256):new Buffer(256),r=0;try{r=y.readSync(process.stdin.fd,n,0,256,null)}catch(i){if(-1==i.toString().indexOf("EOF"))throw i;r=0}t=r>0?n.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=cs(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(w(L(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(w(L(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(C(L(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(C(L(e.output,0)),e.output=[])}}},Dt={ops_table:null,mount:function(e){return Dt.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(Bt.isBlkdev(n)||Bt.isFIFO(n))throw new Bt.ErrnoError(63);Dt.ops_table||(Dt.ops_table={dir:{node:{getattr:Dt.node_ops.getattr,setattr:Dt.node_ops.setattr,lookup:Dt.node_ops.lookup,mknod:Dt.node_ops.mknod,rename:Dt.node_ops.rename,unlink:Dt.node_ops.unlink,rmdir:Dt.node_ops.rmdir,readdir:Dt.node_ops.readdir,symlink:Dt.node_ops.symlink},stream:{llseek:Dt.stream_ops.llseek}},file:{node:{getattr:Dt.node_ops.getattr,setattr:Dt.node_ops.setattr},stream:{llseek:Dt.stream_ops.llseek,read:Dt.stream_ops.read,write:Dt.stream_ops.write,allocate:Dt.stream_ops.allocate,mmap:Dt.stream_ops.mmap,msync:Dt.stream_ops.msync}},link:{node:{getattr:Dt.node_ops.getattr,setattr:Dt.node_ops.setattr,readlink:Dt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Dt.node_ops.getattr,setattr:Dt.node_ops.setattr},stream:Bt.chrdev_stream_ops}});var i=Bt.createNode(e,t,n,r);return Bt.isDir(i.mode)?(i.node_ops=Dt.ops_table.dir.node,i.stream_ops=Dt.ops_table.dir.stream,i.contents={}):Bt.isFile(i.mode)?(i.node_ops=Dt.ops_table.file.node,i.stream_ops=Dt.ops_table.file.stream,i.usedBytes=0,i.contents=null):Bt.isLink(i.mode)?(i.node_ops=Dt.ops_table.link.node,i.stream_ops=Dt.ops_table.link.stream):Bt.isChrdev(i.mode)&&(i.node_ops=Dt.ops_table.chrdev.node,i.stream_ops=Dt.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i),i},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],n=0;n<e.usedBytes;++n)t.push(e.contents[n]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var n=e.contents;return e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Bt.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,t.size=Bt.isDir(e.mode)?4096:Bt.isFile(e.mode)?e.usedBytes:Bt.isLink(e.mode)?e.link.length:0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Dt.resizeFileStorage(e,t.size)},lookup:function(e,t){throw Bt.genericErrors[44]},mknod:function(e,t,n,r){return Dt.createNode(e,t,n,r)},rename:function(e,t,n){if(Bt.isDir(e.mode)){var r;try{r=Bt.lookupNode(t,n)}catch(o){}if(r)for(var i in r.contents)throw new Bt.ErrnoError(55)}delete e.parent.contents[e.name],e.name=n,t.contents[n]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var n=Bt.lookupNode(e,t);for(var r in n.contents)throw new Bt.ErrnoError(55);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=Dt.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!Bt.isLink(e.mode))throw new Bt.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,i){var o=e.node.contents;if(i>=e.node.usedBytes)return 0;var s=Math.min(e.node.usedBytes-i,r);if(D(s>=0),s>8&&o.subarray)t.set(o.subarray(i,i+s),n);else for(var a=0;a<s;a++)t[n+a]=o[i+a];return s},write:function(e,t,n,r,i,o){if(D(!(t instanceof ArrayBuffer)),t.buffer===Z.buffer&&(o=!1),!r)return 0;var s=e.node;if(s.timestamp=Date.now(),t.subarray&&(!s.contents||s.contents.subarray)){if(o)return D(0===i,"canOwn must imply no weird position inside the file"),s.contents=t.subarray(n,n+r),s.usedBytes=r,r;if(0===s.usedBytes&&0===i)return s.contents=t.slice(n,n+r),s.usedBytes=r,r;if(i+r<=s.usedBytes)return s.contents.set(t.subarray(n,n+r),i),r}if(Dt.expandFileStorage(s,i+r),s.contents.subarray&&t.subarray)s.contents.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)s.contents[i+a]=t[n+a];return s.usedBytes=Math.max(s.usedBytes,i+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&Bt.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new Bt.ErrnoError(28);return r},allocate:function(e,t,n){Dt.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,i,o){if(D(0===t),!Bt.isFile(e.node.mode))throw new Bt.ErrnoError(43);var s,a,l=e.node.contents;if(2&o||l.buffer!==Q){if((r>0||r+n<l.length)&&(l=l.subarray?l.subarray(r,r+n):Array.prototype.slice.call(l,r,r+n)),a=!0,!(s=Bt.mmapAlloc(n)))throw new Bt.ErrnoError(48);Z.set(l,s)}else a=!1,s=l.byteOffset;return{ptr:s,allocated:a}},msync:function(e,t,n,r,i){if(!Bt.isFile(e.node.mode))throw new Bt.ErrnoError(43);return 2&i||Dt.stream_ops.write(e,t,0,r,n,!1),0}}},Ft={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},Lt={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},Bt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof Bt.ErrnoError))throw e+" : "+st();return Ot(e.errno)},lookupPath:function(e,t){if(t=t||{},!(e=At.resolve(Bt.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new Bt.ErrnoError(32);for(var i=Rt.normalizeArray(e.split("/").filter(function(e){return!!e}),!1),o=Bt.root,s="/",a=0;a<i.length;a++){var l=a===i.length-1;if(l&&t.parent)break;if(o=Bt.lookupNode(o,i[a]),s=Rt.join2(s,i[a]),Bt.isMountpoint(o)&&(!l||l&&t.follow_mount)&&(o=o.mounted.root),!l||t.follow)for(var c=0;Bt.isLink(o.mode);){var u=Bt.readlink(s);if(s=At.resolve(Rt.dirname(s),u),o=Bt.lookupPath(s,{recurse_count:t.recurse_count}).node,c++>40)throw new Bt.ErrnoError(32)}}return{path:s,node:o}},getPath:function(e){for(var t;;){if(Bt.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Bt.nameTable.length},hashAddNode:function(e){var t=Bt.hashName(e.parent.id,e.name);e.name_next=Bt.nameTable[t],Bt.nameTable[t]=e},hashRemoveNode:function(e){var t=Bt.hashName(e.parent.id,e.name);if(Bt.nameTable[t]===e)Bt.nameTable[t]=e.name_next;else for(var n=Bt.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=Bt.mayLookup(e);if(n)throw new Bt.ErrnoError(n,e);for(var r=Bt.hashName(e.id,t),i=Bt.nameTable[r];i;i=i.name_next)if(i.parent.id===e.id&&i.name===t)return i;return Bt.lookup(e,t)},createNode:function(e,t,n,r){var i=new Bt.FSNode(e,t,n,r);return Bt.hashAddNode(i),i},destroyNode:function(e){Bt.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=Bt.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return Bt.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){return Bt.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return Bt.lookupNode(e,t),20}catch(n){}return Bt.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=Bt.lookupNode(e,t)}catch(o){return o.errno}var i=Bt.nodePermissions(e,"wx");if(i)return i;if(n){if(!Bt.isDir(r.mode))return 54;if(Bt.isRoot(r)||Bt.getPath(r)===Bt.cwd())return 10}else if(Bt.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?Bt.isLink(e.mode)?32:Bt.isDir(e.mode)&&("r"!==Bt.flagsToPermissionString(t)||512&t)?31:Bt.nodePermissions(e,Bt.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){t=t||Bt.MAX_OPEN_FDS;for(var n=e=e||0;n<=t;n++)if(!Bt.streams[n])return n;throw new Bt.ErrnoError(33)},getStream:function(e){return Bt.streams[e]},createStream:function(e,t,n){Bt.FSStream||(Bt.FSStream=function(){},Bt.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new Bt.FSStream;for(var i in e)r[i]=e[i];e=r;var o=Bt.nextfd(t,n);return e.fd=o,Bt.streams[o]=e,e},closeStream:function(e){Bt.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=Bt.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new Bt.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){Bt.devices[e]={stream_ops:t}},getDevice:function(e){return Bt.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),Bt.syncFSRequests++,Bt.syncFSRequests>1&&C("warning: "+Bt.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=Bt.getMounts(Bt.root.mount),r=0;function i(e){return D(Bt.syncFSRequests>0),Bt.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach(function(t){if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)})},mount:function(e,t,n){if("string"==typeof e)throw e;var r,i="/"===n,o=!n;if(i&&Bt.root)throw new Bt.ErrnoError(10);if(!i&&!o){var s=Bt.lookupPath(n,{follow_mount:!1});if(n=s.path,Bt.isMountpoint(r=s.node))throw new Bt.ErrnoError(10);if(!Bt.isDir(r.mode))throw new Bt.ErrnoError(54)}var a={type:e,opts:t,mountpoint:n,mounts:[]},l=e.mount(a);return l.mount=a,a.root=l,i?Bt.root=l:r&&(r.mounted=a,r.mount&&r.mount.mounts.push(a)),l},unmount:function(e){var t=Bt.lookupPath(e,{follow_mount:!1});if(!Bt.isMountpoint(t.node))throw new Bt.ErrnoError(28);var n=t.node,r=n.mounted,i=Bt.getMounts(r);Object.keys(Bt.nameTable).forEach(function(e){for(var t=Bt.nameTable[e];t;){var n=t.name_next;-1!==i.indexOf(t.mount)&&Bt.destroyNode(t),t=n}}),n.mounted=null;var o=n.mount.mounts.indexOf(r);D(-1!==o),n.mount.mounts.splice(o,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=Bt.lookupPath(e,{parent:!0}).node,i=Rt.basename(e);if(!i||"."===i||".."===i)throw new Bt.ErrnoError(28);var o=Bt.mayCreate(r,i);if(o)throw new Bt.ErrnoError(o);if(!r.node_ops.mknod)throw new Bt.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,Bt.mknod(e,t|=32768,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,Bt.mknod(e,t|=16384,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{Bt.mkdir(r,t)}catch(o){if(20!=o.errno)throw o}}},mkdev:function(e,t,n){return void 0===n&&(n=t,t=438),Bt.mknod(e,t|=8192,n)},symlink:function(e,t){if(!At.resolve(e))throw new Bt.ErrnoError(44);var n=Bt.lookupPath(t,{parent:!0}).node;if(!n)throw new Bt.ErrnoError(44);var r=Rt.basename(t),i=Bt.mayCreate(n,r);if(i)throw new Bt.ErrnoError(i);if(!n.node_ops.symlink)throw new Bt.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,i=Rt.dirname(e),o=Rt.dirname(t),s=Rt.basename(e),a=Rt.basename(t);if(n=Bt.lookupPath(e,{parent:!0}).node,r=Bt.lookupPath(t,{parent:!0}).node,!n||!r)throw new Bt.ErrnoError(44);if(n.mount!==r.mount)throw new Bt.ErrnoError(75);var l,c=Bt.lookupNode(n,s),u=At.relative(e,o);if("."!==u.charAt(0))throw new Bt.ErrnoError(28);if("."!==(u=At.relative(t,i)).charAt(0))throw new Bt.ErrnoError(55);try{l=Bt.lookupNode(r,a)}catch(p){}if(c!==l){var h=Bt.isDir(c.mode),d=Bt.mayDelete(n,s,h);if(d)throw new Bt.ErrnoError(d);if(d=l?Bt.mayDelete(r,a,h):Bt.mayCreate(r,a))throw new Bt.ErrnoError(d);if(!n.node_ops.rename)throw new Bt.ErrnoError(63);if(Bt.isMountpoint(c)||l&&Bt.isMountpoint(l))throw new Bt.ErrnoError(10);if(r!==n&&(d=Bt.nodePermissions(n,"w")))throw new Bt.ErrnoError(d);try{Bt.trackingDelegate.willMovePath&&Bt.trackingDelegate.willMovePath(e,t)}catch(p){C("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+p.message)}Bt.hashRemoveNode(c);try{n.node_ops.rename(c,r,a)}catch(p){throw p}finally{Bt.hashAddNode(c)}try{Bt.trackingDelegate.onMovePath&&Bt.trackingDelegate.onMovePath(e,t)}catch(p){C("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+p.message)}}},rmdir:function(e){var t=Bt.lookupPath(e,{parent:!0}).node,n=Rt.basename(e),r=Bt.lookupNode(t,n),i=Bt.mayDelete(t,n,!0);if(i)throw new Bt.ErrnoError(i);if(!t.node_ops.rmdir)throw new Bt.ErrnoError(63);if(Bt.isMountpoint(r))throw new Bt.ErrnoError(10);try{Bt.trackingDelegate.willDeletePath&&Bt.trackingDelegate.willDeletePath(e)}catch(o){C("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+o.message)}t.node_ops.rmdir(t,n),Bt.destroyNode(r);try{Bt.trackingDelegate.onDeletePath&&Bt.trackingDelegate.onDeletePath(e)}catch(o){C("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+o.message)}},readdir:function(e){var t=Bt.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Bt.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=Bt.lookupPath(e,{parent:!0}).node,n=Rt.basename(e),r=Bt.lookupNode(t,n),i=Bt.mayDelete(t,n,!1);if(i)throw new Bt.ErrnoError(i);if(!t.node_ops.unlink)throw new Bt.ErrnoError(63);if(Bt.isMountpoint(r))throw new Bt.ErrnoError(10);try{Bt.trackingDelegate.willDeletePath&&Bt.trackingDelegate.willDeletePath(e)}catch(o){C("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+o.message)}t.node_ops.unlink(t,n),Bt.destroyNode(r);try{Bt.trackingDelegate.onDeletePath&&Bt.trackingDelegate.onDeletePath(e)}catch(o){C("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+o.message)}},readlink:function(e){var t=Bt.lookupPath(e).node;if(!t)throw new Bt.ErrnoError(44);if(!t.node_ops.readlink)throw new Bt.ErrnoError(28);return At.resolve(Bt.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=Bt.lookupPath(e,{follow:!t}).node;if(!n)throw new Bt.ErrnoError(44);if(!n.node_ops.getattr)throw new Bt.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return Bt.stat(e,!0)},chmod:function(e,t,n){var r;if(!(r="string"==typeof e?Bt.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new Bt.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){Bt.chmod(e,t,!0)},fchmod:function(e,t){var n=Bt.getStream(e);if(!n)throw new Bt.ErrnoError(8);Bt.chmod(n.node,t)},chown:function(e,t,n,r){var i;if(!(i="string"==typeof e?Bt.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Bt.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,t,n){Bt.chown(e,t,n,!0)},fchown:function(e,t,n){var r=Bt.getStream(e);if(!r)throw new Bt.ErrnoError(8);Bt.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new Bt.ErrnoError(28);var n;if(!(n="string"==typeof e?Bt.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Bt.ErrnoError(63);if(Bt.isDir(n.mode))throw new Bt.ErrnoError(31);if(!Bt.isFile(n.mode))throw new Bt.ErrnoError(28);var r=Bt.nodePermissions(n,"w");if(r)throw new Bt.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=Bt.getStream(e);if(!n)throw new Bt.ErrnoError(8);if(0==(2097155&n.flags))throw new Bt.ErrnoError(28);Bt.truncate(n.node,t)},utime:function(e,t,n){var r=Bt.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,i){if(""===e)throw new Bt.ErrnoError(44);var s;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?Bt.modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof e)s=e;else{e=Rt.normalize(e);try{s=Bt.lookupPath(e,{follow:!(131072&t)}).node}catch(h){}}var a=!1;if(64&t)if(s){if(128&t)throw new Bt.ErrnoError(20)}else s=Bt.mknod(e,n,0),a=!0;if(!s)throw new Bt.ErrnoError(44);if(Bt.isChrdev(s.mode)&&(t&=-513),65536&t&&!Bt.isDir(s.mode))throw new Bt.ErrnoError(54);if(!a){var l=Bt.mayOpen(s,t);if(l)throw new Bt.ErrnoError(l)}512&t&&Bt.truncate(s,0),t&=-131713;var c=Bt.createStream({node:s,path:Bt.getPath(s),flags:t,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1},r,i);c.stream_ops.open&&c.stream_ops.open(c),!o.logReadFiles||1&t||(Bt.readFiles||(Bt.readFiles={}),e in Bt.readFiles||(Bt.readFiles[e]=1,C("FS.trackingDelegate error on read file: "+e)));try{if(Bt.trackingDelegate.onOpenFile){var u=0;1!=(2097155&t)&&(u|=Bt.tracking.openFlags.READ),0!=(2097155&t)&&(u|=Bt.tracking.openFlags.WRITE),Bt.trackingDelegate.onOpenFile(e,u)}}catch(h){C("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+h.message)}return c},close:function(e){if(Bt.isClosed(e))throw new Bt.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{Bt.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(Bt.isClosed(e))throw new Bt.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Bt.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new Bt.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,i){if(r<0||i<0)throw new Bt.ErrnoError(28);if(Bt.isClosed(e))throw new Bt.ErrnoError(8);if(1==(2097155&e.flags))throw new Bt.ErrnoError(8);if(Bt.isDir(e.node.mode))throw new Bt.ErrnoError(31);if(!e.stream_ops.read)throw new Bt.ErrnoError(28);var o=void 0!==i;if(o){if(!e.seekable)throw new Bt.ErrnoError(70)}else i=e.position;var s=e.stream_ops.read(e,t,n,r,i);return o||(e.position+=s),s},write:function(e,t,n,r,i,o){if(r<0||i<0)throw new Bt.ErrnoError(28);if(Bt.isClosed(e))throw new Bt.ErrnoError(8);if(0==(2097155&e.flags))throw new Bt.ErrnoError(8);if(Bt.isDir(e.node.mode))throw new Bt.ErrnoError(31);if(!e.stream_ops.write)throw new Bt.ErrnoError(28);e.seekable&&1024&e.flags&&Bt.llseek(e,0,2);var s=void 0!==i;if(s){if(!e.seekable)throw new Bt.ErrnoError(70)}else i=e.position;var a=e.stream_ops.write(e,t,n,r,i,o);s||(e.position+=a);try{e.path&&Bt.trackingDelegate.onWriteToFile&&Bt.trackingDelegate.onWriteToFile(e.path)}catch(l){C("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+l.message)}return a},allocate:function(e,t,n){if(Bt.isClosed(e))throw new Bt.ErrnoError(8);if(t<0||n<=0)throw new Bt.ErrnoError(28);if(0==(2097155&e.flags))throw new Bt.ErrnoError(8);if(!Bt.isFile(e.node.mode)&&!Bt.isDir(e.node.mode))throw new Bt.ErrnoError(43);if(!e.stream_ops.allocate)throw new Bt.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,i,o){if(0!=(2&i)&&0==(2&o)&&2!=(2097155&e.flags))throw new Bt.ErrnoError(2);if(1==(2097155&e.flags))throw new Bt.ErrnoError(2);if(!e.stream_ops.mmap)throw new Bt.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i,o)},msync:function(e,t,n,r,i){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new Bt.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if((t=t||{}).flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=Bt.open(e,t.flags),i=Bt.stat(e).size,o=new Uint8Array(i);return Bt.read(r,o,0,i,0),"utf8"===t.encoding?n=L(o,0):"binary"===t.encoding&&(n=o),Bt.close(r),n},writeFile:function(e,t,n){(n=n||{}).flags=n.flags||"w";var r=Bt.open(e,n.flags,n.mode);if("string"==typeof t){var i=new Uint8Array(H(t)+1),o=N(t,i,0,i.length);Bt.write(r,i,0,o,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Bt.write(r,t,0,t.byteLength,void 0,n.canOwn)}Bt.close(r)},cwd:function(){return Bt.currentPath},chdir:function(e){var t=Bt.lookupPath(e,{follow:!0});if(null===t.node)throw new Bt.ErrnoError(44);if(!Bt.isDir(t.node.mode))throw new Bt.ErrnoError(54);var n=Bt.nodePermissions(t.node,"x");if(n)throw new Bt.ErrnoError(n);Bt.currentPath=t.path},createDefaultDirectories:function(){Bt.mkdir("/tmp"),Bt.mkdir("/home"),Bt.mkdir("/home/web_user")},createDefaultDevices:function(){var e;if(Bt.mkdir("/dev"),Bt.registerDevice(Bt.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,i){return r}}),Bt.mkdev("/dev/null",Bt.makedev(1,3)),Mt.register(Bt.makedev(5,0),Mt.default_tty_ops),Mt.register(Bt.makedev(6,0),Mt.default_tty1_ops),Bt.mkdev("/dev/tty",Bt.makedev(5,0)),Bt.mkdev("/dev/tty1",Bt.makedev(6,0)),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else if(p)try{var r=n("CZPu");e=function(){return r.randomBytes(1)[0]}}catch(i){}e||(e=function(){ze("no cryptographic support found for random_device. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}),Bt.createDevice("/dev","random",e),Bt.createDevice("/dev","urandom",e),Bt.mkdir("/dev/shm"),Bt.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Bt.mkdir("/proc"),Bt.mkdir("/proc/self"),Bt.mkdir("/proc/self/fd"),Bt.mount({mount:function(){var e=Bt.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var n=Bt.getStream(+t);if(!n)throw new Bt.ErrnoError(8);var r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return r.parent=r,r}},e}},{},"/proc/self/fd")},createStandardStreams:function(){o.stdin?Bt.createDevice("/dev","stdin",o.stdin):Bt.symlink("/dev/tty","/dev/stdin"),o.stdout?Bt.createDevice("/dev","stdout",null,o.stdout):Bt.symlink("/dev/tty","/dev/stdout"),o.stderr?Bt.createDevice("/dev","stderr",null,o.stderr):Bt.symlink("/dev/tty1","/dev/stderr");var e=Bt.open("/dev/stdin","r"),t=Bt.open("/dev/stdout","w"),n=Bt.open("/dev/stderr","w");D(0===e.fd,"invalid handle for stdin ("+e.fd+")"),D(1===t.fd,"invalid handle for stdout ("+t.fd+")"),D(2===n.fd,"invalid handle for stderr ("+n.fd+")")},ensureErrnoError:function(){Bt.ErrnoError||(Bt.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){for(var t in this.errno=e,Lt)if(Lt[t]===e){this.code=t;break}},this.setErrno(e),this.message=Ft[e],this.stack&&(Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0}),this.stack=nt(this.stack))},Bt.ErrnoError.prototype=new Error,Bt.ErrnoError.prototype.constructor=Bt.ErrnoError,[44].forEach(function(e){Bt.genericErrors[e]=new Bt.ErrnoError(e),Bt.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){Bt.ensureErrnoError(),Bt.nameTable=new Array(4096),Bt.mount(Dt,{},"/"),Bt.createDefaultDirectories(),Bt.createDefaultDevices(),Bt.createSpecialDirectories(),Bt.filesystems={MEMFS:Dt}},init:function(e,t,n){D(!Bt.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Bt.init.initialized=!0,Bt.ensureErrnoError(),o.stdin=e||o.stdin,o.stdout=t||o.stdout,o.stderr=n||o.stderr,Bt.createStandardStreams()},quit:function(){Bt.init.initialized=!1;var e=o._fflush;e&&e(0);for(var t=0;t<Bt.streams.length;t++){var n=Bt.streams[t];n&&Bt.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},joinPath:function(e,t){var n=Rt.join.apply(null,e);return t&&"/"==n[0]&&(n=n.substr(1)),n},absolutePath:function(e,t){return At.resolve(t,e)},standardizePath:function(e){return Rt.normalize(e)},findObject:function(e,t){var n=Bt.analyzePath(e,t);return n.exists?n.object:(Ot(n.error),null)},analyzePath:function(e,t){try{e=(r=Bt.lookupPath(e,{follow:!t})).path}catch(i){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Bt.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Rt.basename(e),r=Bt.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(i){n.error=i.errno}return n},createFolder:function(e,t,n,r){var i=Rt.join2("string"==typeof e?e:Bt.getPath(e),t),o=Bt.getMode(n,r);return Bt.mkdir(i,o)},createPath:function(e,t,n,r){e="string"==typeof e?e:Bt.getPath(e);for(var i=t.split("/").reverse();i.length;){var o=i.pop();if(o){var s=Rt.join2(e,o);try{Bt.mkdir(s)}catch(a){}e=s}}return s},createFile:function(e,t,n,r,i){var o=Rt.join2("string"==typeof e?e:Bt.getPath(e),t),s=Bt.getMode(r,i);return Bt.create(o,s)},createDataFile:function(e,t,n,r,i,o){var s=t?Rt.join2("string"==typeof e?e:Bt.getPath(e),t):e,a=Bt.getMode(r,i),l=Bt.create(s,a);if(n){if("string"==typeof n){for(var c=new Array(n.length),u=0,h=n.length;u<h;++u)c[u]=n.charCodeAt(u);n=c}Bt.chmod(l,146|a);var d=Bt.open(l,"w");Bt.write(d,n,0,n.length,0,o),Bt.close(d),Bt.chmod(l,a)}return l},createDevice:function(e,t,n,r){var i=Rt.join2("string"==typeof e?e:Bt.getPath(e),t),o=Bt.getMode(!!n,!!r);Bt.createDevice.major||(Bt.createDevice.major=64);var s=Bt.makedev(Bt.createDevice.major++,0);return Bt.registerDevice(s,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,i,o){for(var s=0,a=0;a<i;a++){var l;try{l=n()}catch(c){throw new Bt.ErrnoError(29)}if(void 0===l&&0===s)throw new Bt.ErrnoError(6);if(null==l)break;s++,t[r+a]=l}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,i,o){for(var s=0;s<i;s++)try{r(t[n+s])}catch(a){throw new Bt.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),s}}),Bt.mkdev(i,o,s)},createLink:function(e,t,n,r,i){var o=Rt.join2("string"==typeof e?e:Bt.getPath(e),t);return Bt.symlink(n,o)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!m)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=cs(m(e.url),!0),e.usedBytes=e.contents.length}catch(n){t=!1}return t||Ot(29),t},createLazyFile:function(e,t,n,r,i){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize;return this.getter(e/this.chunkSize|0)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,s=1048576;i||(s=r);var a=this;a.setDataGetter(function(e){var t=e*s,i=(e+1)*s-1;if(i=Math.min(i,r-1),void 0===a.chunks[e]&&(a.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==s&&i.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):cs(i.responseText||"",!0)}(t,i)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]}),!o&&r||(s=r=1,r=this.getter(0).length,s=r,w("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=s,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!d)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s=new o;Object.defineProperties(s,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:s}}else a={isDevice:!1,url:n};var l=Bt.createFile(e,t,a,r,i);a.contents?l.contents=a.contents:a.url&&(l.contents=null,l.url=a.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var c={};return Object.keys(l.stream_ops).forEach(function(e){var t=l.stream_ops[e];c[e]=function(){if(!Bt.forceLoadFile(l))throw new Bt.ErrnoError(29);return t.apply(null,arguments)}}),c.read=function(e,t,n,r,i){if(!Bt.forceLoadFile(l))throw new Bt.ErrnoError(29);var o=e.node.contents;if(i>=o.length)return 0;var s=Math.min(o.length-i,r);if(D(s>=0),o.slice)for(var a=0;a<s;a++)t[n+a]=o[i+a];else for(a=0;a<s;a++)t[n+a]=o.get(i+a);return s},l.stream_ops=c,l},createPreloadedFile:function(e,t,n,r,i,s,a,l,c,u){Browser.init();var h=t?At.resolve(Rt.join2(e,t)):e,d=Ne("cp "+h);function p(n){function p(n){u&&u(),l||Bt.createDataFile(e,t,n,r,i,c),s&&s(),He(d)}var f=!1;o.preloadPlugins.forEach(function(e){f||e.canHandle(h)&&(e.handle(n,h,p,function(){a&&a(),He(d)}),f=!0)}),f||p(n)}je(d),"string"==typeof n?Browser.asyncLoad(n,function(e){p(e)},a):p(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=Bt.indexedDB();try{var i=r.open(Bt.DB_NAME(),Bt.DB_VERSION)}catch(o){return n(o)}i.onupgradeneeded=function(){w("creating db"),i.result.createObjectStore(Bt.DB_STORE_NAME)},i.onsuccess=function(){var r=i.result.transaction([Bt.DB_STORE_NAME],"readwrite"),o=r.objectStore(Bt.DB_STORE_NAME),s=0,a=0,l=e.length;function c(){0==a?t():n()}e.forEach(function(e){var t=o.put(Bt.analyzePath(e).object.contents,e);t.onsuccess=function(){++s+a==l&&c()},t.onerror=function(){a++,s+a==l&&c()}}),r.onerror=n},i.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=Bt.indexedDB();try{var i=r.open(Bt.DB_NAME(),Bt.DB_VERSION)}catch(o){return n(o)}i.onupgradeneeded=n,i.onsuccess=function(){var r=i.result;try{var s=r.transaction([Bt.DB_STORE_NAME],"readonly")}catch(o){return void n(o)}var a=s.objectStore(Bt.DB_STORE_NAME),l=0,c=0,u=e.length;function h(){0==c?t():n()}e.forEach(function(e){var t=a.get(e);t.onsuccess=function(){Bt.analyzePath(e).exists&&Bt.unlink(e),Bt.createDataFile(Rt.dirname(e),Rt.basename(e),t.result,!0,!0,!0),++l+c==u&&h()},t.onerror=function(){c++,l+c==u&&h()}}),s.onerror=n},i.onerror=n},mmapAlloc:function(e){for(var t=E(e,16384),n=fs(t);e<t;)Z[n+e++]=0;return n}},Nt={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t){if("/"!==t[0]){var n;if(-100===e)n=Bt.cwd();else{var r=Bt.getStream(e);if(!r)throw new Bt.ErrnoError(8);n=r.path}t=Rt.join2(n,t)}return t},doStat:function(e,t,n){try{var r=e(t)}catch(i){if(i&&i.node&&Rt.normalize(t)!==Rt.normalize(Bt.getPath(i.node)))return-54;throw i}return ne[n>>2]=r.dev,ne[n+4>>2]=0,ne[n+8>>2]=r.ino,ne[n+12>>2]=r.mode,ne[n+16>>2]=r.nlink,ne[n+20>>2]=r.uid,ne[n+24>>2]=r.gid,ne[n+28>>2]=r.rdev,ne[n+32>>2]=0,Ye=[r.size>>>0,($e=r.size,+ke($e)>=1?$e>0?(0|Me(+Ae($e/4294967296),4294967295))>>>0:~~+Re(($e-+(~~$e>>>0))/4294967296)>>>0:0)],ne[n+40>>2]=Ye[0],ne[n+44>>2]=Ye[1],ne[n+48>>2]=4096,ne[n+52>>2]=r.blocks,ne[n+56>>2]=r.atime.getTime()/1e3|0,ne[n+60>>2]=0,ne[n+64>>2]=r.mtime.getTime()/1e3|0,ne[n+68>>2]=0,ne[n+72>>2]=r.ctime.getTime()/1e3|0,ne[n+76>>2]=0,Ye=[r.ino>>>0,($e=r.ino,+ke($e)>=1?$e>0?(0|Me(+Ae($e/4294967296),4294967295))>>>0:~~+Re(($e-+(~~$e>>>0))/4294967296)>>>0:0)],ne[n+80>>2]=Ye[0],ne[n+84>>2]=Ye[1],0},doMsync:function(e,t,n,r,i){var o=J.slice(e,e+n);Bt.msync(t,o,i,n,r)},doMkdir:function(e,t){return"/"===(e=Rt.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),Bt.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return Bt.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var r=Bt.readlink(e),i=Math.min(n,H(r)),o=Z[t+i];return j(r,t,n+1),Z[t+i]=o,i},doAccess:function(e,t){if(-8&t)return-28;var n;if(!(n=Bt.lookupPath(e,{follow:!0}).node))return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&Bt.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=Bt.getStream(n);return r&&Bt.close(r),Bt.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var i=0,o=0;o<n;o++){var s=ne[t+(8*o+4)>>2],a=Bt.read(e,Z,ne[t+8*o>>2],s,r);if(a<0)return-1;if(i+=a,a<s)break}return i},doWritev:function(e,t,n,r){for(var i=0,o=0;o<n;o++){var s=Bt.write(e,Z,ne[t+8*o>>2],ne[t+(8*o+4)>>2],r);if(s<0)return-1;i+=s}return i},varargs:void 0,get:function(){return D(null!=Nt.varargs),Nt.varargs+=4,ne[Nt.varargs-4>>2]},getStr:function(e){return B(e)},getStreamFromFD:function(e){var t=Bt.getStream(e);if(!t)throw new Bt.ErrnoError(8);return t},get64:function(e,t){return D(e>=0?0===t:-1===t),e}};function jt(e,t,n){Nt.varargs=n;try{var r=Nt.getStreamFromFD(e);switch(t){case 0:return(i=Nt.get())<0?-28:Bt.open(r.path,r.flags,0,i).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:var i=Nt.get();return r.flags|=i,0;case 12:return i=Nt.get(),ee[i+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return Ot(28),-1;default:return-28}}catch(o){return void 0!==Bt&&o instanceof Bt.ErrnoError||ze(o),-o.errno}}function Ht(e,t,n){Nt.varargs=n;try{var r=Nt.getStreamFromFD(e);switch(t){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var i=Nt.get();return ne[i>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return i=Nt.get(),Bt.ioctl(r,t,i);case 21523:case 21524:return r.tty?0:-59;default:ze("bad ioctl syscall "+t)}}catch(o){return void 0!==Bt&&o instanceof Bt.ErrnoError||ze(o),-o.errno}}function zt(e,t){if(-1==(0|e)||0===t)return-28;var n=Nt.mappings[e];if(!n)return 0;if(t===n.len){var r=Bt.getStream(n.fd);2&n.prot&&Nt.doMsync(e,r,t,n.flags,n.offset),Bt.munmap(r),Nt.mappings[e]=null,n.allocated&&ps(n.malloc)}return 0}function Vt(e,t){try{return zt(e,t)}catch(n){return void 0!==Bt&&n instanceof Bt.ErrnoError||ze(n),-n.errno}}function Ut(e,t,n){Nt.varargs=n;try{var r=Nt.getStr(e),i=Nt.get();return Bt.open(r,t,i).fd}catch(o){return void 0!==Bt&&o instanceof Bt.ErrnoError||ze(o),-o.errno}}var Wt={};function Xt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Gt(e){return this.fromWireType(re[e>>2])}var qt={},$t={},Yt={},Kt=48,Qt=57;function Zt(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Kt&&t<=Qt?"_"+e:e}function Jt(e,t){return e=Zt(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function en(e,t){var n=Jt(t,function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var tn=void 0;function nn(e){throw new tn(e)}function rn(e,t,n){function r(t){var r=n(t);r.length!==e.length&&nn("Mismatched type converter count");for(var i=0;i<e.length;++i)dn(e[i],r[i])}e.forEach(function(e){Yt[e]=t});var i=new Array(t.length),o=[],s=0;t.forEach(function(e,t){$t.hasOwnProperty(e)?i[t]=$t[e]:(o.push(e),qt.hasOwnProperty(e)||(qt[e]=[]),qt[e].push(function(){i[t]=$t[e],++s===o.length&&r(i)}))}),0===o.length&&r(i)}function on(e){var t=Wt[e];delete Wt[e];var n=t.rawConstructor,r=t.rawDestructor,i=t.fields;rn([e],i.map(function(e){return e.getterReturnType}).concat(i.map(function(e){return e.setterArgumentType})),function(e){var o={};return i.forEach(function(t,n){var r=e[n],s=t.getter,a=t.getterContext,l=e[n+i.length],c=t.setter,u=t.setterContext;o[t.fieldName]={read:function(e){return r.fromWireType(s(a,e))},write:function(e,t){var n=[];c(u,e,l.toWireType(n,t)),Xt(n)}}}),[{name:t.name,fromWireType:function(e){var t={};for(var n in o)t[n]=o[n].read(e);return r(e),t},toWireType:function(e,t){for(var i in o)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var s=n();for(i in o)o[i].write(s,t[i]);return null!==e&&e.push(r,s),s},argPackAdvance:8,readValueFromPointer:Gt,destructorFunction:r}]})}function sn(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function an(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ln=e}var ln=void 0;function cn(e){for(var t="",n=e;J[n];)t+=ln[J[n++]];return t}var un=void 0;function hn(e){throw new un(e)}function dn(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||hn('type "'+r+'" must have a positive integer typeid pointer'),$t.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;hn("Cannot register type '"+r+"' twice")}if($t[e]=t,delete Yt[e],qt.hasOwnProperty(e)){var i=qt[e];delete qt[e],i.forEach(function(e){e()})}}function pn(e,t,n,r,i){var o=sn(n);dn(e,{name:t=cn(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=Z;else if(2===n)r=ee;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=ne}return this.fromWireType(r[e>>o])},destructorFunction:null})}function fn(e){if(!(this instanceof kn))return!1;if(!(e instanceof kn))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return t===r&&n===i}function mn(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function gn(e){hn(e.$$.ptrType.registeredClass.name+" instance already deleted")}var yn=!1;function _n(e){}function vn(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function bn(e){e.count.value-=1,0===e.count.value&&vn(e)}function wn(e){return"undefined"==typeof FinalizationGroup?(wn=function(e){return e},e):(yn=new FinalizationGroup(function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?bn(n):console.warn("object already deleted: "+n.ptr)}}),_n=function(e){yn.unregister(e.$$)},(wn=function(e){return yn.register(e,e.$$,e.$$),e})(e))}function Cn(){if(this.$$.ptr||gn(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=wn(Object.create(Object.getPrototypeOf(this),{$$:{value:mn(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function xn(){this.$$.ptr||gn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&hn("Object already scheduled for deletion"),_n(this),bn(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function En(){return!this.$$.ptr}var Sn=void 0,Pn=[];function Tn(){for(;Pn.length;){var e=Pn.pop();e.$$.deleteScheduled=!1,e.delete()}}function In(){return this.$$.ptr||gn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&hn("Object already scheduled for deletion"),Pn.push(this),1===Pn.length&&Sn&&Sn(Tn),this.$$.deleteScheduled=!0,this}function On(){kn.prototype.isAliasOf=fn,kn.prototype.clone=Cn,kn.prototype.delete=xn,kn.prototype.isDeleted=En,kn.prototype.deleteLater=In}function kn(){}var Rn={};function An(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||hn("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function Mn(e,t,n){o.hasOwnProperty(e)?((void 0===n||void 0!==o[e].overloadTable&&void 0!==o[e].overloadTable[n])&&hn("Cannot register public name '"+e+"' twice"),An(o,e,e),o.hasOwnProperty(n)&&hn("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),o[e].overloadTable[n]=t):(o[e]=t,void 0!==n&&(o[e].numArguments=n))}function Dn(e,t,n,r,i,o,s,a){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=o,this.upcast=s,this.downcast=a,this.pureVirtualFunctions=[]}function Fn(e,t,n){for(;t!==n;)t.upcast||hn("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Ln(e,t){return null===t?(this.isReference&&hn("null is not a valid "+this.name),0):(t.$$||hn('Cannot pass "'+Tr(t)+'" as a '+this.name),t.$$.ptr||hn("Cannot pass deleted object as a pointer of type "+this.name),Fn(t.$$.ptr,t.$$.ptrType.registeredClass,this.registeredClass))}function Bn(e,t){var n;if(null===t)return this.isReference&&hn("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;if(t.$$||hn('Cannot pass "'+Tr(t)+'" as a '+this.name),t.$$.ptr||hn("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&hn("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name),n=Fn(t.$$.ptr,t.$$.ptrType.registeredClass,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&hn("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:hn("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var r=t.clone();n=this.rawShare(n,wr(function(){r.delete()})),null!==e&&e.push(this.rawDestructor,n)}break;default:hn("Unsupporting sharing policy")}return n}function Nn(e,t){return null===t?(this.isReference&&hn("null is not a valid "+this.name),0):(t.$$||hn('Cannot pass "'+Tr(t)+'" as a '+this.name),t.$$.ptr||hn("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&hn("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name),Fn(t.$$.ptr,t.$$.ptrType.registeredClass,this.registeredClass))}function jn(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Hn(e){this.rawDestructor&&this.rawDestructor(e)}function zn(e){null!==e&&e.delete()}function Vn(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=Vn(e,t,n.baseClass);return null===r?null:n.downcast(r)}function Un(){return Object.keys(qn).length}function Wn(){var e=[];for(var t in qn)qn.hasOwnProperty(t)&&e.push(qn[t]);return e}function Xn(e){Sn=e,Pn.length&&Sn&&Sn(Tn)}function Gn(){o.getInheritedInstanceCount=Un,o.getLiveInheritedInstances=Wn,o.flushPendingDeletes=Tn,o.setDelayFunction=Xn}var qn={};function $n(e,t){for(void 0===t&&hn("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function Yn(e,t){return t=$n(e,t),qn[t]}function Kn(e,t){return t.ptrType&&t.ptr||nn("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&nn("Both smartPtrType and smartPtr must be specified"),t.count={value:1},wn(Object.create(e,{$$:{value:t}}))}function Qn(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Yn(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function i(){return Kn(this.registeredClass.instancePrototype,this.isSmartPointer?{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}:{ptrType:this,ptr:e})}var o,s=this.registeredClass.getActualType(t),a=Rn[s];if(!a)return i.call(this);var l=Vn(t,this.registeredClass,(o=this.isConst?a.constPointerType:a.pointerType).registeredClass);return null===l?i.call(this):Kn(o.registeredClass.instancePrototype,this.isSmartPointer?{ptrType:o,ptr:l,smartPtrType:this,smartPtr:e}:{ptrType:o,ptr:l})}function Zn(){Jn.prototype.getPointee=jn,Jn.prototype.destructor=Hn,Jn.prototype.argPackAdvance=8,Jn.prototype.readValueFromPointer=Gt,Jn.prototype.deleteObject=zn,Jn.prototype.fromWireType=Qn}function Jn(e,t,n,r,i,o,s,a,l,c,u){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=o,this.sharingPolicy=s,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,i||void 0!==t.baseClass?this.toWireType=Bn:r?(this.toWireType=Ln,this.destructorFunction=null):(this.toWireType=Nn,this.destructorFunction=null)}function er(e,t,n){o.hasOwnProperty(e)||nn("Replacing nonexistant public symbol"),void 0!==o[e].overloadTable&&void 0!==n?o[e].overloadTable[n]=t:(o[e]=t,o[e].argCount=n)}function tr(e,t){D(e.indexOf("j")>=0,"getDynCaller should only be called with i64 sigs");var n=[];return function(){n.length=arguments.length;for(var r=0;r<arguments.length;r++)n[r]=arguments[r];return it(e,t,n)}}function nr(e,t){var n=-1!=(e=cn(e)).indexOf("j")?tr(e,t):A.get(t);return"function"!=typeof n&&hn("unknown function pointer with signature "+e+": "+t),n}var rr=void 0;function ir(e){var t=ys(e),n=cn(t);return ps(t),n}function or(e,t){var n=[],r={};throw t.forEach(function e(t){r[t]||$t[t]||(Yt[t]?Yt[t].forEach(e):(n.push(t),r[t]=!0))}),new rr(e+": "+n.map(ir).join([", "]))}function sr(e,t,n,r,i,o,s,a,l,c,u,h,d){u=cn(u),o=nr(i,o),a&&(a=nr(s,a)),c&&(c=nr(l,c)),d=nr(h,d);var p=Zt(u);Mn(p,function(){or("Cannot construct "+u+" due to unbound types",[r])}),rn([e,t,n],r?[r]:[],function(t){var n,i;t=t[0],i=r?(n=t.registeredClass).instancePrototype:kn.prototype;var s=Jt(p,function(){if(Object.getPrototypeOf(this)!==l)throw new un("Use 'new' to construct "+u);if(void 0===h.constructor_body)throw new un(u+" has no accessible constructor");var e=h.constructor_body[arguments.length];if(void 0===e)throw new un("Tried to invoke ctor of "+u+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(h.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)}),l=Object.create(i,{constructor:{value:s}});s.prototype=l;var h=new Dn(u,s,l,d,n,o,a,c),f=new Jn(u,h,!0,!1,!1),m=new Jn(u+"*",h,!1,!1,!1),g=new Jn(u+" const*",h,!1,!0,!1);return Rn[e]={pointerType:m,constPointerType:g},er(p,s),[f,m,g]})}function ar(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=Jt(e.name||"unknownFunctionName",function(){});n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return i instanceof Object?i:r}function lr(e,t,n,r,i){var o=t.length;o<2&&hn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var s=null!==t[1]&&null!==n,a=!1,l=1;l<t.length;++l)if(null!==t[l]&&void 0===t[l].destructorFunction){a=!0;break}var c="void"!==t[0].name,u="",h="";for(l=0;l<o-2;++l)u+=(0!==l?", ":"")+"arg"+l,h+=(0!==l?", ":"")+"arg"+l+"Wired";var d="return function "+Zt(e)+"("+u+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";a&&(d+="var destructors = [];\n");var p=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[hn,r,i,Xt,t[0],t[1]];for(s&&(d+="var thisWired = classParam.toWireType("+p+", this);\n"),l=0;l<o-2;++l)d+="var arg"+l+"Wired = argType"+l+".toWireType("+p+", arg"+l+"); // "+t[l+2].name+"\n",f.push("argType"+l),m.push(t[l+2]);if(s&&(h="thisWired"+(h.length>0?", ":"")+h),d+=(c?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+");\n",a)d+="runDestructors(destructors);\n";else for(l=s?1:2;l<t.length;++l){var g=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==t[l].destructorFunction&&(d+=g+"_dtor("+g+"); // "+t[l].name+"\n",f.push(g+"_dtor"),m.push(t[l].destructorFunction))}return c&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),f.push(d+="}\n"),ar(Function,f).apply(null,m)}function cr(e,t){for(var n=[],r=0;r<e;r++)n.push(ne[(t>>2)+r]);return n}function ur(e,t,n,r,i,o,s){var a=cr(n,r);t=cn(t),o=nr(i,o),rn([],[e],function(e){var r=(e=e[0]).name+"."+t;function i(){or("Cannot call "+r+" due to unbound types",a)}var l=e.registeredClass.constructor;return void 0===l[t]?(i.argCount=n-1,l[t]=i):(An(l,t,r),l[t].overloadTable[n-1]=i),rn([],a,function(e){var i=[e[0],null].concat(e.slice(1)),a=lr(r,i,null,o,s);return void 0===l[t].overloadTable?(a.argCount=n-1,l[t]=a):l[t].overloadTable[n-1]=a,[]}),[]})}function hr(e,t,n,r,i,o){D(t>0);var s=cr(t,n);i=nr(r,i);var a=[o],l=[];rn([],[e],function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new un("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){or("Cannot construct "+e.name+" due to unbound types",s)},rn([],s,function(r){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&hn(n+" called with "+arguments.length+" arguments, expected "+(t-1)),l.length=0,a.length=t;for(var e=1;e<t;++e)a[e]=r[e].toWireType(l,arguments[e-1]);var o=i.apply(null,a);return Xt(l),r[0].fromWireType(o)},[]}),[]})}function dr(e,t,n,r,i,o,s,a){var l=cr(n,r);t=cn(t),o=nr(i,o),rn([],[e],function(e){var r=(e=e[0]).name+"."+t;function i(){or("Cannot call "+r+" due to unbound types",l)}a&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,u=c[t];return void 0===u||void 0===u.overloadTable&&u.className!==e.name&&u.argCount===n-2?(i.argCount=n-2,i.className=e.name,c[t]=i):(An(c,t,r),c[t].overloadTable[n-2]=i),rn([],l,function(i){var a=lr(r,i,e,o,s);return void 0===c[t].overloadTable?(a.argCount=n-2,c[t]=a):c[t].overloadTable[n-2]=a,[]}),[]})}function pr(e,t,n){return e instanceof Object||hn(n+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||hn(n+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||hn("cannot call emscripten binding method "+n+" on deleted object"),Fn(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}function fr(e,t,n,r,i,o,s,a,l,c){t=cn(t),i=nr(r,i),rn([],[e],function(e){var r=(e=e[0]).name+"."+t,u={get:function(){or("Cannot access "+r+" due to unbound types",[n,s])},enumerable:!0,configurable:!0};return u.set=l?function(){or("Cannot access "+r+" due to unbound types",[n,s])}:function(e){hn(r+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,u),rn([],l?[n,s]:[n],function(n){var s=n[0],u={get:function(){var t=pr(this,e,r+" getter");return s.fromWireType(i(o,t))},enumerable:!0};if(l){l=nr(a,l);var h=n[1];u.set=function(t){var n=pr(this,e,r+" setter"),i=[];l(c,n,h.toWireType(i,t)),Xt(i)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,u),[]}),[]})}var mr=[],gr=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function yr(e){e>4&&0==--gr[e].refcount&&(gr[e]=void 0,mr.push(e))}function _r(){for(var e=0,t=5;t<gr.length;++t)void 0!==gr[t]&&++e;return e}function vr(){for(var e=5;e<gr.length;++e)if(void 0!==gr[e])return gr[e];return null}function br(){o.count_emval_handles=_r,o.get_first_emval=vr}function wr(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=mr.length?mr.pop():gr.length;return gr[t]={refcount:1,value:e},t}}function Cr(e,t){dn(e,{name:t=cn(t),fromWireType:function(e){var t=gr[e].value;return yr(e),t},toWireType:function(e,t){return wr(t)},argPackAdvance:8,readValueFromPointer:Gt,destructorFunction:null})}function xr(e,t,n){switch(t){case 0:return function(e){return this.fromWireType((n?Z:J)[e])};case 1:return function(e){return this.fromWireType((n?ee:te)[e>>1])};case 2:return function(e){return this.fromWireType((n?ne:re)[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Er(e,t,n,r){var i=sn(n);function o(){}t=cn(t),o.values={},dn(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:xr(t,i,r),destructorFunction:null}),Mn(t,o)}function Sr(e,t){var n=$t[e];return void 0===n&&hn(t+" has unknown type "+ir(e)),n}function Pr(e,t,n){var r=Sr(e,"enum");t=cn(t);var i=r.constructor,o=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:Jt(r.name+"_"+t,function(){})}});i.values[n]=o,i[t]=o}function Tr(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Ir(e,t){switch(t){case 2:return function(e){return this.fromWireType(ie[e>>2])};case 3:return function(e){return this.fromWireType(oe[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Or(e,t,n){var r=sn(n);dn(e,{name:t=cn(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+Tr(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:Ir(t,r),destructorFunction:null})}function kr(e,t,n,r,i,o){var s=cr(t,n);e=cn(e),i=nr(r,i),Mn(e,function(){or("Cannot call "+e+" due to unbound types",s)},t-1),rn([],s,function(n){var r=[n[0],null].concat(n.slice(1));return er(e,lr(e,r,null,i,o),t-1),[]})}function Rr(e,t,n){switch(t){case 0:return n?function(e){return Z[e]}:function(e){return J[e]};case 1:return n?function(e){return ee[e>>1]}:function(e){return te[e>>1]};case 2:return n?function(e){return ne[e>>2]}:function(e){return re[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Ar(e,t,n,r,i){t=cn(t),-1===i&&(i=4294967295);var o=sn(n),s=function(e){return e};if(0===r){var a=32-8*n;s=function(e){return e<<a>>>a}}var l=-1!=t.indexOf("unsigned");dn(e,{name:t,fromWireType:s,toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+Tr(n)+'" to '+this.name);if(n<r||n>i)throw new TypeError('Passing a number "'+Tr(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+i+"]!");return l?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:Rr(t,o,0!==r),destructorFunction:null})}function Mr(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){return new r(Q,re[1+(e>>=2)],re[e])}dn(e,{name:n=cn(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function Dr(e,t,n,r,i,o,s,a,l,c,u,h){n=cn(n),o=nr(i,o),a=nr(s,a),c=nr(l,c),h=nr(u,h),rn([e],[t],function(e){return[new Jn(n,(e=e[0]).registeredClass,!1,!1,!0,e,r,o,a,c,h)]})}function Fr(e,t){var n="std::string"===(t=cn(t));dn(e,{name:t,fromWireType:function(e){var t,r=re[e>>2];if(n)for(var i=e+4,o=0;o<=r;++o){var s=e+4+o;if(o==r||0==J[s]){var a=B(i,s-i);void 0===t?t=a:(t+=String.fromCharCode(0),t+=a),i=s+1}}else{var l=new Array(r);for(o=0;o<r;++o)l[o]=String.fromCharCode(J[e+4+o]);t=l.join("")}return ps(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||hn("Cannot pass non-string to std::string");var i=(n&&r?function(){return H(t)}:function(){return t.length})(),o=fs(4+i+1);if(re[o>>2]=i,n&&r)j(t,o+4,i+1);else if(r)for(var s=0;s<i;++s){var a=t.charCodeAt(s);a>255&&(ps(o),hn("String has UTF-16 code units that do not fit in 8 bits")),J[o+4+s]=a}else for(s=0;s<i;++s)J[o+4+s]=t[s];return null!==e&&e.push(ps,o),o},argPackAdvance:8,readValueFromPointer:Gt,destructorFunction:function(e){ps(e)}})}function Lr(e,t,n){var r,i,o,s,a;n=cn(n),2===t?(r=V,i=U,s=W,o=function(){return te},a=1):4===t&&(r=X,i=G,s=q,o=function(){return re},a=2),dn(e,{name:n,fromWireType:function(e){for(var n,i=re[e>>2],s=o(),l=e+4,c=0;c<=i;++c){var u=e+4+c*t;if(c==i||0==s[u>>a]){var h=r(l,u-l);void 0===n?n=h:(n+=String.fromCharCode(0),n+=h),l=u+t}}return ps(e),n},toWireType:function(e,r){"string"!=typeof r&&hn("Cannot pass non-string to C++ string type "+n);var o=s(r),l=fs(4+o+t);return re[l>>2]=o>>a,i(r,l+4,o+t),null!==e&&e.push(ps,l),l},argPackAdvance:8,readValueFromPointer:Gt,destructorFunction:function(e){ps(e)}})}function Br(e,t,n,r,i,o){Wt[e]={name:cn(t),rawConstructor:nr(n,r),rawDestructor:nr(i,o),fields:[]}}function Nr(e,t,n,r,i,o,s,a,l,c){Wt[e].fields.push({fieldName:cn(t),getterReturnType:n,getter:nr(r,i),getterContext:o,setterArgumentType:s,setter:nr(a,l),setterContext:c})}function jr(e,t){dn(e,{isVoid:!0,name:t=cn(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function Hr(e){return e||hn("Cannot use deleted val. handle = "+e),gr[e].value}function zr(e,t,n){e=Hr(e),t=Sr(t,"emval::as");var r=[],i=wr(r);return ne[n>>2]=i,t.toWireType(r,e)}function Vr(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=Sr(ne[(t>>2)+r],"parameter "+r);return n}function Ur(e,t,n,r){e=Hr(e);for(var i=Vr(t,n),o=new Array(t),s=0;s<t;++s){var a=i[s];o[s]=a.readValueFromPointer(r),r+=a.argPackAdvance}return wr(e.apply(void 0,o))}var Wr={};function Xr(e){var t=Wr[e];return void 0===t?cn(e):t}var Gr=[];function qr(e,t,n,r){(e=Gr[e])(t=Hr(t),n=Xr(n),null,r)}function $r(e){var t=Gr.length;return Gr.push(e),t}function Yr(e,t){for(var n=Vr(e,t),r=n[0],i=r.name+"_$"+n.slice(1).map(function(e){return e.name}).join("_")+"$",o=["retType"],s=[r],a="",l=0;l<e-1;++l)a+=(0!==l?", ":"")+"arg"+l,o.push("argType"+l),s.push(n[1+l]);var c="return function "+Zt("methodCaller_"+i)+"(handle, name, destructors, args) {\n",u=0;for(l=0;l<e-1;++l)c+="    var arg"+l+" = argType"+l+".readValueFromPointer(args"+(u?"+"+u:"")+");\n",u+=n[l+1].argPackAdvance;for(c+="    var rv = handle[name]("+a+");\n",l=0;l<e-1;++l)n[l+1].deleteObject&&(c+="    argType"+l+".deleteObject(arg"+l+");\n");return r.isVoid||(c+="    return retType.toWireType(destructors, rv);\n"),o.push(c+="};\n"),$r(ar(Function,o).apply(null,s))}function Kr(e,t){return wr((e=Hr(e))[t=Hr(t)])}function Qr(e){e>4&&(gr[e].refcount+=1)}function Zr(){return wr([])}function Jr(e){return wr(Xr(e))}function ei(e){Xt(gr[e].value),yr(e)}function ti(e,t,n){e=Hr(e),t=Hr(t),n=Hr(n),e[t]=n}function ni(e,t){return wr((e=Sr(e,"_emval_take_value")).readValueFromPointer(t))}function ri(){ze()}function ii(e,t){throw ws(e,t||1),"longjmp"}function oi(e,t){ii(e,t)}function si(e,t,n){J.copyWithin(e,t,t+n)}function ai(){return J.length}function li(e){try{return I.grow(e-Q.byteLength+65535>>>16),le(I.buffer),1}catch(t){console.error("emscripten_realloc_buffer: Attempted to grow heap from "+Q.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}function ci(e){e>>>=0;var t=ai();if(D(e>t),e>2147483648)return C("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147483648 bytes!"),!1;for(var n=1;n<=4;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var i=Math.min(2147483648,ae(Math.max(16777216,e,r),65536));if(li(i))return!0}return C("Failed to grow the heap from "+t+" bytes to "+i+" bytes, not enough memory!"),!1}var ui={inEventHandler:0,removeAllEventListeners:function(){for(var e=ui.eventHandlers.length-1;e>=0;--e)ui._removeHandler(e);ui.eventHandlers=[],ui.deferredCalls=[]},registerRemoveEventListeners:function(){ui.removeEventListenersRegistered||(ve.push(ui.removeAllEventListeners),ui.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var i in ui.deferredCalls){var o=ui.deferredCalls[i];if(o.targetFunction==e&&r(o.argsList,n))return}ui.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),ui.deferredCalls.sort(function(e,t){return e.precedence<t.precedence})},removeDeferredCalls:function(e){for(var t=0;t<ui.deferredCalls.length;++t)ui.deferredCalls[t].targetFunction==e&&(ui.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return ui.inEventHandler&&ui.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(ui.canPerformEventHandlerRequests())for(var e=0;e<ui.deferredCalls.length;++e){var t=ui.deferredCalls[e];ui.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<ui.eventHandlers.length;++n)ui.eventHandlers[n].target!=e||t&&t!=ui.eventHandlers[n].eventTypeString||ui._removeHandler(n--)},_removeHandler:function(e){var t=ui.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),ui.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++ui.inEventHandler,ui.currentEventHandler=e,ui.runDeferredCalls(),e.handlerFunc(t),ui.runDeferredCalls(),--ui.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),ui.eventHandlers.push(e),ui.registerRemoveEventListeners();else for(var n=0;n<ui.eventHandlers.length;++n)ui.eventHandlers[n].target==e.target&&ui.eventHandlers[n].eventTypeString==e.eventTypeString&&ui._removeHandler(n--)},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function hi(e){return e>2?B(e):e}var di=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function pi(e){return e=hi(e),di[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function fi(e){return pi(e)}function mi(e,t,n){var r=fi(e);return r?(r.width=t,r.height=n,0):-4}function gi(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)return e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,i){t.drawArraysInstancedANGLE(e,n,r,i)},e.drawElementsInstanced=function(e,n,r,i,o){t.drawElementsInstancedANGLE(e,n,r,i,o)},1}function yi(e){var t=e.getExtension("OES_vertex_array_object");if(t)return e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)},1}function _i(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)return e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)},1}function vi(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var bi={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){bi.lastError||(bi.lastError=e)},getNewId:function(e){for(var t=bi.counter++,n=e.length;n<t;n++)e[n]=null;return t},MAX_TEMP_BUFFER_SIZE:2097152,numTempVertexBuffersPerSize:64,log2ceilLookup:function(e){return 32-Math.clz32(e-1)},generateTempBuffers:function(e,t){var n=bi.log2ceilLookup(bi.MAX_TEMP_BUFFER_SIZE);t.tempVertexBufferCounters1=[],t.tempVertexBufferCounters2=[],t.tempVertexBufferCounters1.length=t.tempVertexBufferCounters2.length=n+1,t.tempVertexBuffers1=[],t.tempVertexBuffers2=[],t.tempVertexBuffers1.length=t.tempVertexBuffers2.length=n+1,t.tempIndexBuffers=[],t.tempIndexBuffers.length=n+1;for(var r=0;r<=n;++r){t.tempIndexBuffers[r]=null,t.tempVertexBufferCounters1[r]=t.tempVertexBufferCounters2[r]=0;var i=bi.numTempVertexBuffersPerSize;t.tempVertexBuffers1[r]=[],t.tempVertexBuffers2[r]=[];var o=t.tempVertexBuffers1[r],s=t.tempVertexBuffers2[r];o.length=s.length=i;for(var a=0;a<i;++a)o[a]=s[a]=null}if(e){t.tempQuadIndexBuffer=rs.createBuffer(),t.GLctx.bindBuffer(34963,t.tempQuadIndexBuffer);for(var l=bi.MAX_TEMP_BUFFER_SIZE>>1,c=new Uint16Array(l),u=(r=0,0);c[r++]=u,!(r>=l||(c[r++]=u+1,r>=l)||(c[r++]=u+2,r>=l)||(c[r++]=u,r>=l)||(c[r++]=u+2,r>=l)||(c[r++]=u+3,r>=l));)u+=4;t.GLctx.bufferData(34963,c,35044),t.GLctx.bindBuffer(34963,null)}},getTempVertexBuffer:function(e){var t=bi.log2ceilLookup(e),n=bi.currentContext.tempVertexBuffers1[t],r=bi.currentContext.tempVertexBufferCounters1[t];bi.currentContext.tempVertexBufferCounters1[t]=bi.currentContext.tempVertexBufferCounters1[t]+1&bi.numTempVertexBuffersPerSize-1;var i=n[r];if(i)return i;var o=rs.getParameter(34964);return n[r]=rs.createBuffer(),rs.bindBuffer(34962,n[r]),rs.bufferData(34962,1<<t,35048),rs.bindBuffer(34962,o),n[r]},getTempIndexBuffer:function(e){var t=bi.log2ceilLookup(e),n=bi.currentContext.tempIndexBuffers[t];if(n)return n;var r=rs.getParameter(34965);return bi.currentContext.tempIndexBuffers[t]=rs.createBuffer(),rs.bindBuffer(34963,bi.currentContext.tempIndexBuffers[t]),rs.bufferData(34963,1<<t,35048),rs.bindBuffer(34963,r),bi.currentContext.tempIndexBuffers[t]},newRenderingFrameStarted:function(){if(bi.currentContext){var e=bi.currentContext.tempVertexBuffers1;bi.currentContext.tempVertexBuffers1=bi.currentContext.tempVertexBuffers2,bi.currentContext.tempVertexBuffers2=e,e=bi.currentContext.tempVertexBufferCounters1,bi.currentContext.tempVertexBufferCounters1=bi.currentContext.tempVertexBufferCounters2,bi.currentContext.tempVertexBufferCounters2=e;for(var t=bi.log2ceilLookup(bi.MAX_TEMP_BUFFER_SIZE),n=0;n<=t;++n)bi.currentContext.tempVertexBufferCounters1[n]=0}},getSource:function(e,t,n,r){for(var i="",o=0;o<t;++o){var s=r?ne[r+4*o>>2]:-1;i+=B(ne[n+4*o>>2],s<0?void 0:s)}return i},calcBufLength:function(e,t,n,r){return n>0?r*n:e*bi.byteSizeByType[t-bi.byteSizeByTypeRoot]*r},usedTempBuffers:[],preDrawHandleClientVertexAttribBindings:function(e){bi.resetBufferBinding=!1;for(var t=0;t<bi.currentContext.maxVertexAttribs;++t){var n=bi.currentContext.clientBuffers[t];if(n.clientside&&n.enabled){bi.resetBufferBinding=!0;var r=bi.calcBufLength(n.size,n.type,n.stride,e),i=bi.getTempVertexBuffer(r);rs.bindBuffer(34962,i),rs.bufferSubData(34962,0,J.subarray(n.ptr,n.ptr+r)),n.vertexAttribPointerAdaptor.call(rs,t,n.size,n.type,n.normalized,n.stride,0)}}},postDrawHandleClientVertexAttribBindings:function(){bi.resetBufferBinding&&rs.bindBuffer(34962,bi.buffers[rs.currentArrayBufferBinding])},createContext:function(e,t){var n=e.getContext("webgl",t);return n?bi.registerContext(n,t):0},registerContext:function(e,t){var n=bi.getNewId(bi.contexts),r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};e.canvas&&(e.canvas.GLctxObject=r),bi.contexts[n]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&bi.initExtensions(r),r.maxVertexAttribs=r.GLctx.getParameter(34921),r.clientBuffers=[];for(var i=0;i<r.maxVertexAttribs;i++)r.clientBuffers[i]={enabled:!1,clientside:!1,size:0,type:0,normalized:0,stride:0,ptr:0,vertexAttribPointerAdaptor:null};return bi.generateTempBuffers(!1,r),n},makeContextCurrent:function(e){return bi.currentContext=bi.contexts[e],o.ctx=rs=bi.currentContext&&bi.currentContext.GLctx,!(e&&!rs)},getContext:function(e){return bi.contexts[e]},deleteContext:function(e){bi.currentContext===bi.contexts[e]&&(bi.currentContext=null),"object"==typeof ui&&ui.removeAllHandlersOnTarget(bi.contexts[e].GLctx.canvas),bi.contexts[e]&&bi.contexts[e].GLctx.canvas&&(bi.contexts[e].GLctx.canvas.GLctxObject=void 0),bi.contexts[e]=null},initExtensions:function(e){if(e||(e=bi.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;gi(t),yi(t),_i(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),vi(t);var n=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"];(t.getSupportedExtensions()||[]).forEach(function(e){-1!=n.indexOf(e)&&t.getExtension(e)})}},populateUniformTable:function(e){for(var t=bi.programs[e],n=bi.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},r=n.uniforms,i=rs.getProgramParameter(t,35718),o=0;o<i;++o){var s=rs.getActiveUniform(t,o),a=s.name;n.maxUniformLength=Math.max(n.maxUniformLength,a.length+1),"]"==a.slice(-1)&&(a=a.slice(0,a.lastIndexOf("[")));var l=rs.getUniformLocation(t,a);if(l){var c=bi.getNewId(bi.uniforms);r[a]=[s.size,c],bi.uniforms[c]=l;for(var u=1;u<s.size;++u)l=rs.getUniformLocation(t,a+"["+u+"]"),c=bi.getNewId(bi.uniforms),bi.uniforms[c]=l}}}},wi=["default","low-power","high-performance"];function Ci(e,t){D(t);var n={},r=t>>2;n.alpha=!!ne[r+0],n.depth=!!ne[r+1],n.stencil=!!ne[r+2],n.antialias=!!ne[r+3],n.premultipliedAlpha=!!ne[r+4],n.preserveDrawingBuffer=!!ne[r+5],n.powerPreference=wi[ne[r+6]],n.failIfMajorPerformanceCaveat=!!ne[r+7],n.majorVersion=ne[r+8],n.minorVersion=ne[r+9],n.enableExtensionsByDefault=ne[r+10],n.explicitSwapControl=ne[r+11],n.proxyContextToMainThread=ne[r+12],n.renderViaOffscreenBackBuffer=ne[r+13];var i=fi(e);return i?n.explicitSwapControl?0:bi.createContext(i,n):0}function xi(e,t){return Ci(e,t)}function Ei(){return bi.currentContext?bi.currentContext.handle:0}function Si(){return Ei()}function Pi(e){return bi.makeContextCurrent(e)?0:-5}function Ti(e){bi.currentContext==e&&(bi.currentContext=0),bi.deleteContext(e)}function Ii(e,t){if(!t)return-5;if(!(e=bi.contexts[e]))return-3;var n=e.GLctx;if(!n)return-3;n=n.getContextAttributes(),ne[t>>2]=n.alpha,ne[t+4>>2]=n.depth,ne[t+8>>2]=n.stencil,ne[t+12>>2]=n.antialias,ne[t+16>>2]=n.premultipliedAlpha,ne[t+20>>2]=n.preserveDrawingBuffer;var r=n.powerPreference&&wi.indexOf(n.powerPreference);return ne[t+24>>2]=r,ne[t+28>>2]=n.failIfMajorPerformanceCaveat,ne[t+32>>2]=e.version,ne[t+36>>2]=0,ne[t+40>>2]=e.attributes.enableExtensionsByDefault,0}function Oi(e){D(e);for(var t=e>>2,n=0;n<14;++n)ne[t+n]=0;ne[t+0]=ne[t+1]=ne[t+3]=ne[t+4]=ne[t+8]=ne[t+10]=1}o._emscripten_webgl_get_current_context=Si,o._emscripten_webgl_make_context_current=Pi;var ki={};function Ri(){return c||"./this.program"}function Ai(){if(!Ai.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Ri()};for(var t in ki)e[t]=ki[t];var n=[];for(var t in e)n.push(t+"="+e[t]);Ai.strings=n}return Ai.strings}function Mi(e,t){var n=0;return Ai().forEach(function(r,i){var o=t+n;ne[e+4*i>>2]=o,K(r,o),n+=r.length+1}),0}function Di(e,t){var n=Ai();ne[e>>2]=n.length;var r=0;return n.forEach(function(e){r+=e.length+1}),ne[t>>2]=r,0}function Fi(e){try{var t=Nt.getStreamFromFD(e);return Bt.close(t),0}catch(n){return void 0!==Bt&&n instanceof Bt.ErrnoError||ze(n),n.errno}}function Li(e,t,n,r){try{var i=Nt.getStreamFromFD(e),o=Nt.doReadv(i,t,n);return ne[r>>2]=o,0}catch(s){return void 0!==Bt&&s instanceof Bt.ErrnoError||ze(s),s.errno}}function Bi(e,t,n,r,i){try{var o=Nt.getStreamFromFD(e),s=4294967296*n+(t>>>0);return s<=-9007199254740992||s>=9007199254740992?-61:(Bt.llseek(o,s,r),Ye=[o.position>>>0,($e=o.position,+ke($e)>=1?$e>0?(0|Me(+Ae($e/4294967296),4294967295))>>>0:~~+Re(($e-+(~~$e>>>0))/4294967296)>>>0:0)],ne[i>>2]=Ye[0],ne[i+4>>2]=Ye[1],o.getdents&&0===s&&0===r&&(o.getdents=null),0)}catch(a){return void 0!==Bt&&a instanceof Bt.ErrnoError||ze(a),a.errno}}function Ni(e,t,n,r){try{var i=Nt.getStreamFromFD(e),o=Nt.doWritev(i,t,n);return ne[r>>2]=o,0}catch(s){return void 0!==Bt&&s instanceof Bt.ErrnoError||ze(s),s.errno}}function ji(){return 0|R()}function Hi(e){rs.activeTexture(e)}function zi(e,t){rs.attachShader(bi.programs[e],bi.shaders[t])}function Vi(e,t){34962==e?rs.currentArrayBufferBinding=t:34963==e&&(rs.currentElementArrayBufferBinding=t),rs.bindBuffer(e,bi.buffers[t])}function Ui(e,t){rs.bindTexture(e,bi.textures[t])}function Wi(e,t){rs.blendFunc(e,t)}function Xi(e,t,n,r){rs.bufferData(e,n?J.subarray(n,n+t):t,r)}function Gi(e){rs.clear(e)}function qi(e,t,n,r){rs.clearColor(e,t,n,r)}function $i(e){rs.clearStencil(e)}function Yi(e,t,n,r){rs.colorMask(!!e,!!t,!!n,!!r)}function Ki(e){rs.compileShader(bi.shaders[e])}function Qi(){var e=bi.getNewId(bi.programs),t=rs.createProgram();return t.name=e,bi.programs[e]=t,e}function Zi(e){var t=bi.getNewId(bi.shaders);return bi.shaders[t]=rs.createShader(e),t}function Ji(e,t){for(var n=0;n<e;n++){var r=ne[t+4*n>>2],i=bi.buffers[r];i&&(rs.deleteBuffer(i),i.name=0,bi.buffers[r]=null,r==rs.currentArrayBufferBinding&&(rs.currentArrayBufferBinding=0),r==rs.currentElementArrayBufferBinding&&(rs.currentElementArrayBufferBinding=0))}}function eo(e){if(e){var t=bi.programs[e];t?(rs.deleteProgram(t),t.name=0,bi.programs[e]=null,bi.programInfos[e]=null):bi.recordError(1281)}}function to(e){if(e){var t=bi.shaders[e];t?(rs.deleteShader(t),bi.shaders[e]=null):bi.recordError(1281)}}function no(e,t){for(var n=0;n<e;n++){var r=ne[t+4*n>>2],i=bi.textures[r];i&&(rs.deleteTexture(i),i.name=0,bi.textures[r]=null)}}function ro(e){rs.disable(e)}function io(e){bi.currentContext.clientBuffers[e].enabled=!1,rs.disableVertexAttribArray(e)}function oo(e,t,n){bi.preDrawHandleClientVertexAttribBindings(t+n),rs.drawArrays(e,t,n),bi.postDrawHandleClientVertexAttribBindings()}function so(e,t,n,r){var i;if(!rs.currentElementArrayBufferBinding){var o=bi.calcBufLength(1,n,0,t);i=bi.getTempIndexBuffer(o),rs.bindBuffer(34963,i),rs.bufferSubData(34963,0,J.subarray(r,r+o)),r=0}bi.preDrawHandleClientVertexAttribBindings(t),rs.drawElements(e,t,n,r),bi.postDrawHandleClientVertexAttribBindings(t),rs.currentElementArrayBufferBinding||rs.bindBuffer(34963,null)}function ao(e){rs.enable(e)}function lo(e){bi.currentContext.clientBuffers[e].enabled=!0,rs.enableVertexAttribArray(e)}function co(e,t,n,r){for(var i=0;i<e;i++){var o=rs[n](),s=o&&bi.getNewId(r);o?(o.name=s,r[s]=o):bi.recordError(1282),ne[t+4*i>>2]=s}}function uo(e,t){co(e,t,"createBuffer",bi.buffers)}function ho(e,t){co(e,t,"createTexture",bi.textures)}function po(e,t){return rs.getAttribLocation(bi.programs[e],B(t))}function fo(){var e=rs.getError()||bi.lastError;return bi.lastError=0,e}function mo(e){return re[e>>2]+4294967296*ne[e+4>>2]}function go(e){return re[e>>2]+4294967296*re[e+4>>2]}function yo(e,t){re[e>>2]=t,re[e+4>>2]=(t-re[e>>2])/4294967296;var n=t>=0?go(e):mo(e);n!=t&&S("writeI53ToI64() out of range: serialized JS Number "+t+" to Wasm heap as bytes lo=0x"+re[e>>2].toString(16)+", hi=0x"+re[e+4>>2].toString(16)+", which deserializes back to "+n+" instead!")}function _o(e,t,n){if(t){var r=void 0;switch(e){case 36346:r=1;break;case 36344:return void(0!=n&&1!=n&&bi.recordError(1280));case 36345:r=0;break;case 34466:var i=rs.getParameter(34467);r=i?i.length:0}if(void 0===r){var o=rs.getParameter(e);switch(typeof o){case"number":r=o;break;case"boolean":r=o?1:0;break;case"string":return void bi.recordError(1280);case"object":if(null===o)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 34068:r=0;break;default:return void bi.recordError(1280)}else{if(o instanceof Float32Array||o instanceof Uint32Array||o instanceof Int32Array||o instanceof Array){for(var s=0;s<o.length;++s)switch(n){case 0:ne[t+4*s>>2]=o[s];break;case 2:ie[t+4*s>>2]=o[s];break;case 4:Z[t+s>>0]=o[s]?1:0}return}try{r=0|o.name}catch(a){return bi.recordError(1280),void C("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+a+")")}}break;default:return bi.recordError(1280),void C("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+e+") and it returns "+o+" of type "+typeof o+"!")}}switch(n){case 1:yo(t,r);break;case 0:ne[t>>2]=r;break;case 2:ie[t>>2]=r;break;case 4:Z[t>>0]=r?1:0}}else bi.recordError(1281)}function vo(e,t){_o(e,t,0)}function bo(e,t,n,r){var i=rs.getProgramInfoLog(bi.programs[e]);null===i&&(i="(unknown error)");var o=t>0&&r?j(i,r,t):0;n&&(ne[n>>2]=o)}function wo(e,t,n){if(n)if(e>=bi.counter)bi.recordError(1281);else{var r=bi.programInfos[e];if(r)if(35716==t){var i=rs.getProgramInfoLog(bi.programs[e]);null===i&&(i="(unknown error)"),ne[n>>2]=i.length+1}else if(35719==t)ne[n>>2]=r.maxUniformLength;else if(35722==t){if(-1==r.maxAttributeLength){var o=rs.getProgramParameter(e=bi.programs[e],35721);r.maxAttributeLength=0;for(var s=0;s<o;++s){var a=rs.getActiveAttrib(e,s);r.maxAttributeLength=Math.max(r.maxAttributeLength,a.name.length+1)}}ne[n>>2]=r.maxAttributeLength}else if(35381==t){if(-1==r.maxUniformBlockNameLength){var l=rs.getProgramParameter(e=bi.programs[e],35382);for(r.maxUniformBlockNameLength=0,s=0;s<l;++s){var c=rs.getActiveUniformBlockName(e,s);r.maxUniformBlockNameLength=Math.max(r.maxUniformBlockNameLength,c.length+1)}}ne[n>>2]=r.maxUniformBlockNameLength}else ne[n>>2]=rs.getProgramParameter(bi.programs[e],t);else bi.recordError(1282)}else bi.recordError(1281)}function Co(e,t,n,r){var i=rs.getShaderInfoLog(bi.shaders[e]);null===i&&(i="(unknown error)");var o=t>0&&r?j(i,r,t):0;n&&(ne[n>>2]=o)}function xo(e,t,n){if(n)if(35716==t){var r=rs.getShaderInfoLog(bi.shaders[e]);null===r&&(r="(unknown error)"),ne[n>>2]=r?r.length+1:0}else if(35720==t){var i=rs.getShaderSource(bi.shaders[e]);ne[n>>2]=i?i.length+1:0}else ne[n>>2]=rs.getShaderParameter(bi.shaders[e],t);else bi.recordError(1281)}function Eo(e){return parseInt(e)}function So(e,t){var n=0;if("]"==(t=B(t))[t.length-1]){var r=t.lastIndexOf("[");n="]"!=t[r+1]?Eo(t.slice(r+1)):0,t=t.slice(0,r)}var i=bi.programInfos[e]&&bi.programInfos[e].uniforms[t];return i&&n>=0&&n<i[0]?i[1]+n:-1}function Po(e){rs.linkProgram(bi.programs[e]),bi.populateUniformTable(e)}function To(e,t,n,r){var i=bi.getSource(e,t,n,r);rs.shaderSource(bi.shaders[e],i)}function Io(e,t,n){rs.stencilFunc(e,t,n)}function Oo(e){rs.stencilMask(e)}function ko(e,t,n){rs.stencilOp(e,t,n)}function Ro(e,t,n,r){var i;return t*(e*n+(i=r)-1&-i)}function Ao(e){return{5:3,6:4,8:2,29502:3,29504:4}[e-6402]||1}function Mo(e){return 1==(e-=5120)?J:4==e?ne:6==e?ie:5==e||28922==e?re:te}function Do(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function Fo(e,t,n,r,i,o){var s=Mo(e),a=Do(s),l=1<<a,c=Ro(n,r,Ao(t)*l,bi.unpackAlignment);return s.subarray(i>>a,i+c>>a)}function Lo(e,t,n,r,i,o,s,a,l){rs.texImage2D(e,t,n,r,i,o,s,a,l?Fo(a,s,r,i,l):null)}function Bo(e,t,n){rs.texParameterf(e,t,n)}function No(e,t,n,r,i,o,s,a,l){var c=null;l&&(c=Fo(a,s,i,o,l)),rs.texSubImage2D(e,t,n,r,i,o,s,a,c)}function jo(e,t){rs.uniform1f(bi.uniforms[e],t)}function Ho(e,t){rs.uniform1i(bi.uniforms[e],t)}function zo(e,t,n,r,i){rs.uniform4i(bi.uniforms[e],t,n,r,i)}var Vo=[];function Uo(e,t,n,r){if(t<=18){var i=Vo[16*t-1],o=ie;r>>=2;for(var s=0;s<16*t;s+=16){var a=r+s;i[s]=o[a],i[s+1]=o[a+1],i[s+2]=o[a+2],i[s+3]=o[a+3],i[s+4]=o[a+4],i[s+5]=o[a+5],i[s+6]=o[a+6],i[s+7]=o[a+7],i[s+8]=o[a+8],i[s+9]=o[a+9],i[s+10]=o[a+10],i[s+11]=o[a+11],i[s+12]=o[a+12],i[s+13]=o[a+13],i[s+14]=o[a+14],i[s+15]=o[a+15]}}else i=ie.subarray(r>>2,r+64*t>>2);rs.uniformMatrix4fv(bi.uniforms[e],!!n,i)}function Wo(e){rs.useProgram(bi.programs[e])}function Xo(e,t,n,r,i,o){var s=bi.currentContext.clientBuffers[e];if(!rs.currentArrayBufferBinding)return s.size=t,s.type=n,s.normalized=r,s.stride=i,s.ptr=o,s.clientside=!0,void(s.vertexAttribPointerAdaptor=function(e,t,n,r,i,o){this.vertexAttribPointer(e,t,n,r,i,o)});s.clientside=!1,rs.vertexAttribPointer(e,t,n,!!r,i,o)}function Go(e,t,n,r){rs.viewport(e,t,n,r)}function qo(e){return e}function $o(e){k(0|e)}function Yo(e){return e%4==0&&(e%100!=0||e%400==0)}function Ko(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var Qo=[31,29,31,30,31,30,31,31,30,31,30,31],Zo=[31,28,31,30,31,30,31,31,30,31,30,31];function Jo(e,t){for(var n=new Date(e.getTime());t>0;){var r=Yo(n.getFullYear()),i=n.getMonth(),o=(r?Qo:Zo)[i];if(!(t>o-n.getDate()))return n.setDate(n.getDate()+t),n;t-=o-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function es(e,t,n,r){var i=ne[r+40>>2],o={tm_sec:ne[r>>2],tm_min:ne[r+4>>2],tm_hour:ne[r+8>>2],tm_mday:ne[r+12>>2],tm_mon:ne[r+16>>2],tm_year:ne[r+20>>2],tm_wday:ne[r+24>>2],tm_yday:ne[r+28>>2],tm_isdst:ne[r+32>>2],tm_gmtoff:ne[r+36>>2],tm_zone:i?B(i):""},s=B(n),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in a)s=s.replace(new RegExp(l,"g"),a[l]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"];function h(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function d(e,t){return h(e,t,"0")}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function f(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=Jo(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=f(n),o=f(r);return p(i,t)<=0?p(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return c[e.tm_wday].substring(0,3)},"%A":function(e){return c[e.tm_wday]},"%b":function(e){return u[e.tm_mon].substring(0,3)},"%B":function(e){return u[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return h(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(e){return d(e.tm_mday+Ko(Yo(e.tm_year+1900)?Qo:Zo,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:Jo(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(n,r)<0){var i=Ko(Yo(r.getFullYear())?Qo:Zo,r.getMonth()-1)-31,o=31-n.getDate()+i+r.getDate();return d(Math.ceil(o/7),2)}return 0===p(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),i=f(n),o=f(r),s=Jo(new Date(e.tm_year+1900,0,1),e.tm_yday);return p(s,i)<0?"53":p(o,s)<=0?"01":(t=i.getFullYear()<e.tm_year+1900?e.tm_yday+32-i.getDate():e.tm_yday+1-i.getDate(),d(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:Jo(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(n,r)<0){var i=Ko(Yo(r.getFullYear())?Qo:Zo,r.getMonth()-1)-31,o=31-n.getDate()+i+r.getDate();return d(Math.ceil(o/7),2)}return 0===p(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var l in g)s.indexOf(l)>=0&&(s=s.replace(new RegExp(l,"g"),g[l](o)));var y=cs(s,!1);return y.length>t?0:(Y(y,e),y.length-1)}function ts(e,t,n,r){return es(e,t,n,r)}function ns(e){var t=Date.now()/1e3|0;return e&&(ne[e>>2]=t),t}var rs,is=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Bt.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},os=365,ss=146;Object.defineProperties(is.prototype,{read:{get:function(){return(this.mode&os)===os},set:function(e){e?this.mode|=os:this.mode&=~os}},write:{get:function(){return(this.mode&ss)===ss},set:function(e){e?this.mode|=ss:this.mode&=~ss}},isFolder:{get:function(){return Bt.isDir(this.mode)}},isDevice:{get:function(){return Bt.isChrdev(this.mode)}}}),Bt.FSNode=is,Bt.staticInit(),tn=o.InternalError=en(Error,"InternalError"),an(),un=o.BindingError=en(Error,"BindingError"),On(),Zn(),Gn(),rr=o.UnboundTypeError=en(Error,"UnboundTypeError"),br();for(var as=new Float32Array(288),ls=0;ls<288;++ls)Vo[ls]=as.subarray(0,ls+1);function cs(e,t,n){var r=n>0?n:H(e)+1,i=new Array(r),o=N(e,i,0,i.length);return t&&(i.length=o),i}var us,hs={__cxa_allocate_exception:lt,__cxa_atexit:ct,__cxa_begin_catch:ft,__cxa_end_catch:_t,__cxa_find_matching_catch_2:wt,__cxa_find_matching_catch_3:Ct,__cxa_free_exception:gt,__cxa_rethrow:xt,__cxa_throw:Et,__cxa_uncaught_exceptions:St,__indirect_function_table:A,__localtime_r:It,__map_file:kt,__resumeException:vt,__sys_fcntl64:jt,__sys_ioctl:Ht,__sys_munmap:Vt,__sys_open:Ut,_embind_finalize_value_object:on,_embind_register_bool:pn,_embind_register_class:sr,_embind_register_class_class_function:ur,_embind_register_class_constructor:hr,_embind_register_class_function:dr,_embind_register_class_property:fr,_embind_register_emval:Cr,_embind_register_enum:Er,_embind_register_enum_value:Pr,_embind_register_float:Or,_embind_register_function:kr,_embind_register_integer:Ar,_embind_register_memory_view:Mr,_embind_register_smart_ptr:Dr,_embind_register_std_string:Fr,_embind_register_std_wstring:Lr,_embind_register_value_object:Br,_embind_register_value_object_field:Nr,_embind_register_void:jr,_emval_as:zr,_emval_call:Ur,_emval_call_void_method:qr,_emval_decref:yr,_emval_get_method_caller:Yr,_emval_get_property:Kr,_emval_incref:Qr,_emval_new_array:Zr,_emval_new_cstring:Jr,_emval_run_destructors:ei,_emval_set_property:ti,_emval_take_value:ni,abort:ri,emscripten_longjmp:oi,emscripten_memcpy_big:si,emscripten_resize_heap:ci,emscripten_set_canvas_element_size:mi,emscripten_webgl_create_context:xi,emscripten_webgl_destroy_context:Ti,emscripten_webgl_get_context_attributes:Ii,emscripten_webgl_init_context_attributes:Oi,emscripten_webgl_make_context_current:Pi,environ_get:Mi,environ_sizes_get:Di,fd_close:Fi,fd_read:Li,fd_seek:Bi,fd_write:Ni,getTempRet0:ji,glActiveTexture:Hi,glAttachShader:zi,glBindBuffer:Vi,glBindTexture:Ui,glBlendFunc:Wi,glBufferData:Xi,glClear:Gi,glClearColor:qi,glClearStencil:$i,glColorMask:Yi,glCompileShader:Ki,glCreateProgram:Qi,glCreateShader:Zi,glDeleteBuffers:Ji,glDeleteProgram:eo,glDeleteShader:to,glDeleteTextures:no,glDisable:ro,glDisableVertexAttribArray:io,glDrawArrays:oo,glDrawElements:so,glEnable:ao,glEnableVertexAttribArray:lo,glGenBuffers:uo,glGenTextures:ho,glGetAttribLocation:po,glGetError:fo,glGetIntegerv:vo,glGetProgramInfoLog:bo,glGetProgramiv:wo,glGetShaderInfoLog:Co,glGetShaderiv:xo,glGetUniformLocation:So,glLinkProgram:Po,glShaderSource:To,glStencilFunc:Io,glStencilMask:Oo,glStencilOp:ko,glTexImage2D:Lo,glTexParameterf:Bo,glTexSubImage2D:No,glUniform1f:jo,glUniform1i:Ho,glUniform4i:zo,glUniformMatrix4fv:Uo,glUseProgram:Wo,glVertexAttribPointer:Xo,glViewport:Go,invoke_di:Qs,invoke_did:pa,invoke_dii:ta,invoke_diii:$s,invoke_diiii:oa,invoke_fiii:Ta,invoke_i:zs,invoke_ii:Os,invoke_iid:Gs,invoke_iidd:Ks,invoke_iidi:ra,invoke_iii:ks,invoke_iiid:qs,invoke_iiidddi:Ys,invoke_iiii:Ls,invoke_iiiid:va,invoke_iiiidd:Ea,invoke_iiiii:Ns,invoke_iiiiidd:xa,invoke_iiiiidddddii:sa,invoke_iiiiiddiiiii:Us,invoke_iiiiii:Is,invoke_iiiiiii:js,invoke_iiiiiiii:ca,invoke_iiiiiiiii:fa,invoke_iiiiiiiiiii:Sa,invoke_iiiiiiiiiiii:Ia,invoke_iiiiiiiiiiiii:Pa,invoke_jiiii:ka,invoke_v:Hs,invoke_vddi:ua,invoke_vffff:ea,invoke_vi:Ds,invoke_vid:Vs,invoke_vidd:Ws,invoke_vidddd:aa,invoke_vidddddd:la,invoke_viddi:da,invoke_viddiiiiiii:Ms,invoke_vii:Rs,invoke_viid:Zs,invoke_viidd:ma,invoke_viiddi:wa,invoke_viidi:ia,invoke_viidii:Ca,invoke_viii:As,invoke_viiid:Fs,invoke_viiii:Bs,invoke_viiiid:ba,invoke_viiiidi:na,invoke_viiiii:Js,invoke_viiiiii:ya,invoke_viiiiiid:_a,invoke_viiiiiii:ga,invoke_viiiiiiiii:ha,invoke_viiiiiiiiii:Xs,invoke_viiiiiiiiiiiiiii:Oa,llvm_eh_typeid_for:qo,memory:I,setTempRet0:$o,strftime_l:ts,time:ns},ds=(Je(),o.___wasm_call_ctors=qe("__wasm_call_ctors")),ps=o._free=qe("free"),fs=(o._memset=qe("memset"),o._malloc=qe("malloc")),ms=(o._main=qe("main"),o._realloc=qe("realloc"),o.___errno_location=qe("__errno_location")),gs=(o._testSetjmp=qe("testSetjmp"),o._saveSetjmp=qe("saveSetjmp"),o._fflush=qe("fflush"),o.__ZSt18uncaught_exceptionv=qe("_ZSt18uncaught_exceptionv")),ys=o.___getTypeName=qe("__getTypeName"),_s=(o.___embind_register_native_and_builtin_types=qe("__embind_register_native_and_builtin_types"),o.__get_tzname=qe("_get_tzname")),vs=o.__get_daylight=qe("_get_daylight"),bs=o.__get_timezone=qe("_get_timezone"),ws=o._setThrew=qe("setThrew"),Cs=o.stackSave=qe("stackSave"),xs=o.stackRestore=qe("stackRestore"),Es=o.stackAlloc=qe("stackAlloc"),Ss=(o.___cxa_demangle=qe("__cxa_demangle"),o.___cxa_can_catch=qe("__cxa_can_catch")),Ps=o.___cxa_is_pointer_type=qe("__cxa_is_pointer_type"),Ts=o.dynCall_jiiii=qe("dynCall_jiiii");function Is(e,t,n,r,i,o){var s=Cs();try{return A.get(e)(t,n,r,i,o)}catch(a){if(xs(s),a!==a+0&&"longjmp"!==a)throw a;ws(1,0)}}function Os(e,t){var n=Cs();try{return A.get(e)(t)}catch(r){if(xs(n),r!==r+0&&"longjmp"!==r)throw r;ws(1,0)}}function ks(e,t,n){var r=Cs();try{return A.get(e)(t,n)}catch(i){if(xs(r),i!==i+0&&"longjmp"!==i)throw i;ws(1,0)}}function Rs(e,t,n){var r=Cs();try{A.get(e)(t,n)}catch(i){if(xs(r),i!==i+0&&"longjmp"!==i)throw i;ws(1,0)}}function As(e,t,n,r){var i=Cs();try{A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function Ms(e,t,n,r,i,o,s,a,l,c,u){var h=Cs();try{A.get(e)(t,n,r,i,o,s,a,l,c,u)}catch(d){if(xs(h),d!==d+0&&"longjmp"!==d)throw d;ws(1,0)}}function Ds(e,t){var n=Cs();try{A.get(e)(t)}catch(r){if(xs(n),r!==r+0&&"longjmp"!==r)throw r;ws(1,0)}}function Fs(e,t,n,r,i){var o=Cs();try{A.get(e)(t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function Ls(e,t,n,r){var i=Cs();try{return A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function Bs(e,t,n,r,i){var o=Cs();try{A.get(e)(t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function Ns(e,t,n,r,i){var o=Cs();try{return A.get(e)(t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function js(e,t,n,r,i,o,s){var a=Cs();try{return A.get(e)(t,n,r,i,o,s)}catch(l){if(xs(a),l!==l+0&&"longjmp"!==l)throw l;ws(1,0)}}function Hs(e){var t=Cs();try{A.get(e)()}catch(n){if(xs(t),n!==n+0&&"longjmp"!==n)throw n;ws(1,0)}}function zs(e){var t=Cs();try{return A.get(e)()}catch(n){if(xs(t),n!==n+0&&"longjmp"!==n)throw n;ws(1,0)}}function Vs(e,t,n){var r=Cs();try{A.get(e)(t,n)}catch(i){if(xs(r),i!==i+0&&"longjmp"!==i)throw i;ws(1,0)}}function Us(e,t,n,r,i,o,s,a,l,c,u,h){var d=Cs();try{return A.get(e)(t,n,r,i,o,s,a,l,c,u,h)}catch(p){if(xs(d),p!==p+0&&"longjmp"!==p)throw p;ws(1,0)}}function Ws(e,t,n,r){var i=Cs();try{A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function Xs(e,t,n,r,i,o,s,a,l,c,u){var h=Cs();try{A.get(e)(t,n,r,i,o,s,a,l,c,u)}catch(d){if(xs(h),d!==d+0&&"longjmp"!==d)throw d;ws(1,0)}}function Gs(e,t,n){var r=Cs();try{return A.get(e)(t,n)}catch(i){if(xs(r),i!==i+0&&"longjmp"!==i)throw i;ws(1,0)}}function qs(e,t,n,r){var i=Cs();try{return A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function $s(e,t,n,r){var i=Cs();try{return A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function Ys(e,t,n,r,i,o,s){var a=Cs();try{return A.get(e)(t,n,r,i,o,s)}catch(l){if(xs(a),l!==l+0&&"longjmp"!==l)throw l;ws(1,0)}}function Ks(e,t,n,r){var i=Cs();try{return A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function Qs(e,t){var n=Cs();try{return A.get(e)(t)}catch(r){if(xs(n),r!==r+0&&"longjmp"!==r)throw r;ws(1,0)}}function Zs(e,t,n,r){var i=Cs();try{A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function Js(e,t,n,r,i,o){var s=Cs();try{A.get(e)(t,n,r,i,o)}catch(a){if(xs(s),a!==a+0&&"longjmp"!==a)throw a;ws(1,0)}}function ea(e,t,n,r,i){var o=Cs();try{A.get(e)(t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function ta(e,t,n){var r=Cs();try{return A.get(e)(t,n)}catch(i){if(xs(r),i!==i+0&&"longjmp"!==i)throw i;ws(1,0)}}function na(e,t,n,r,i,o,s){var a=Cs();try{A.get(e)(t,n,r,i,o,s)}catch(l){if(xs(a),l!==l+0&&"longjmp"!==l)throw l;ws(1,0)}}function ra(e,t,n,r){var i=Cs();try{return A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function ia(e,t,n,r,i){var o=Cs();try{A.get(e)(t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function oa(e,t,n,r,i){var o=Cs();try{return A.get(e)(t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function sa(e,t,n,r,i,o,s,a,l,c,u,h){var d=Cs();try{return A.get(e)(t,n,r,i,o,s,a,l,c,u,h)}catch(p){if(xs(d),p!==p+0&&"longjmp"!==p)throw p;ws(1,0)}}function aa(e,t,n,r,i,o){var s=Cs();try{A.get(e)(t,n,r,i,o)}catch(a){if(xs(s),a!==a+0&&"longjmp"!==a)throw a;ws(1,0)}}function la(e,t,n,r,i,o,s,a){var l=Cs();try{A.get(e)(t,n,r,i,o,s,a)}catch(c){if(xs(l),c!==c+0&&"longjmp"!==c)throw c;ws(1,0)}}function ca(e,t,n,r,i,o,s,a){var l=Cs();try{return A.get(e)(t,n,r,i,o,s,a)}catch(c){if(xs(l),c!==c+0&&"longjmp"!==c)throw c;ws(1,0)}}function ua(e,t,n,r){var i=Cs();try{A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function ha(e,t,n,r,i,o,s,a,l,c){var u=Cs();try{A.get(e)(t,n,r,i,o,s,a,l,c)}catch(h){if(xs(u),h!==h+0&&"longjmp"!==h)throw h;ws(1,0)}}function da(e,t,n,r,i){var o=Cs();try{A.get(e)(t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function pa(e,t,n){var r=Cs();try{return A.get(e)(t,n)}catch(i){if(xs(r),i!==i+0&&"longjmp"!==i)throw i;ws(1,0)}}function fa(e,t,n,r,i,o,s,a,l){var c=Cs();try{return A.get(e)(t,n,r,i,o,s,a,l)}catch(u){if(xs(c),u!==u+0&&"longjmp"!==u)throw u;ws(1,0)}}function ma(e,t,n,r,i){var o=Cs();try{A.get(e)(t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function ga(e,t,n,r,i,o,s,a){var l=Cs();try{A.get(e)(t,n,r,i,o,s,a)}catch(c){if(xs(l),c!==c+0&&"longjmp"!==c)throw c;ws(1,0)}}function ya(e,t,n,r,i,o,s){var a=Cs();try{A.get(e)(t,n,r,i,o,s)}catch(l){if(xs(a),l!==l+0&&"longjmp"!==l)throw l;ws(1,0)}}function _a(e,t,n,r,i,o,s,a){var l=Cs();try{A.get(e)(t,n,r,i,o,s,a)}catch(c){if(xs(l),c!==c+0&&"longjmp"!==c)throw c;ws(1,0)}}function va(e,t,n,r,i){var o=Cs();try{return A.get(e)(t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function ba(e,t,n,r,i,o){var s=Cs();try{A.get(e)(t,n,r,i,o)}catch(a){if(xs(s),a!==a+0&&"longjmp"!==a)throw a;ws(1,0)}}function wa(e,t,n,r,i,o){var s=Cs();try{A.get(e)(t,n,r,i,o)}catch(a){if(xs(s),a!==a+0&&"longjmp"!==a)throw a;ws(1,0)}}function Ca(e,t,n,r,i,o){var s=Cs();try{A.get(e)(t,n,r,i,o)}catch(a){if(xs(s),a!==a+0&&"longjmp"!==a)throw a;ws(1,0)}}function xa(e,t,n,r,i,o,s){var a=Cs();try{return A.get(e)(t,n,r,i,o,s)}catch(l){if(xs(a),l!==l+0&&"longjmp"!==l)throw l;ws(1,0)}}function Ea(e,t,n,r,i,o){var s=Cs();try{return A.get(e)(t,n,r,i,o)}catch(a){if(xs(s),a!==a+0&&"longjmp"!==a)throw a;ws(1,0)}}function Sa(e,t,n,r,i,o,s,a,l,c,u){var h=Cs();try{return A.get(e)(t,n,r,i,o,s,a,l,c,u)}catch(d){if(xs(h),d!==d+0&&"longjmp"!==d)throw d;ws(1,0)}}function Pa(e,t,n,r,i,o,s,a,l,c,u,h,d){var p=Cs();try{return A.get(e)(t,n,r,i,o,s,a,l,c,u,h,d)}catch(f){if(xs(p),f!==f+0&&"longjmp"!==f)throw f;ws(1,0)}}function Ta(e,t,n,r){var i=Cs();try{return A.get(e)(t,n,r)}catch(o){if(xs(i),o!==o+0&&"longjmp"!==o)throw o;ws(1,0)}}function Ia(e,t,n,r,i,o,s,a,l,c,u,h){var d=Cs();try{return A.get(e)(t,n,r,i,o,s,a,l,c,u,h)}catch(p){if(xs(d),p!==p+0&&"longjmp"!==p)throw p;ws(1,0)}}function Oa(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m){var g=Cs();try{A.get(e)(t,n,r,i,o,s,a,l,c,u,h,d,p,f,m)}catch(y){if(xs(g),y!==y+0&&"longjmp"!==y)throw y;ws(1,0)}}function ka(e,t,n,r,i){var o=Cs();try{return Ts(e,t,n,r,i)}catch(s){if(xs(o),s!==s+0&&"longjmp"!==s)throw s;ws(1,0)}}function Ra(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Aa(e){D(0==De,'cannot call main when async dependencies remain! (listen on Module["onRuntimeInitialized"])'),D(0==ge.length,"cannot call main when preRun functions remain to be called");var t=o._main;try{Fa(t(0,0),!0)}catch(r){if(r instanceof Ra)return;if("unwind"==r)return void(T=!0);var n=r;r&&"object"==typeof r&&r.stack&&(n=[r,r.stack]),C("exception thrown: "+n),u(1,r)}}function Ma(e){function n(){us||(us=!0,o.calledRun=!0,M||(Ee(),Se(),t(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),La&&Aa(),Te()))}e=e||l,De>0||(fe(),xe(),De>0||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),n()},1)):n(),me()))}function Da(){var e=w,t=C,n=!1;w=C=function(e){n=!0};try{var r=o._fflush;r&&r(0),["stdout","stderr"].forEach(function(e){var t=Bt.analyzePath("/dev/"+e);if(t){var r=Mt.ttys[t.object.rdev];r&&r.output&&r.output.length&&(n=!0)}})}catch(i){}w=e,C=t,n&&S("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc.")}function Fa(e,t){if(Da(),!t||!T||0!==e){if(T){if(!t){var n="program exited (with status: "+e+"), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)";i(n),C(n)}}else Pe(),o.onExit&&o.onExit(e),M=!0;u(e,new Ra(e))}}if(o.dynCall_ji=qe("dynCall_ji"),o.dynCall_jij=qe("dynCall_jij"),o.dynCall_iiiijii=qe("dynCall_iiiijii"),o.dynCall_vij=qe("dynCall_vij"),o.dynCall_jiji=qe("dynCall_jiji"),o.dynCall_viijii=qe("dynCall_viijii"),o.dynCall_iiiiij=qe("dynCall_iiiiij"),o.dynCall_iiiiijj=qe("dynCall_iiiiijj"),o.dynCall_iiiiiijj=qe("dynCall_iiiiiijj"),o.__growWasmMemory=qe("__growWasmMemory"),Object.getOwnPropertyDescriptor(o,"intArrayFromString")||(o.intArrayFromString=function(){ze("'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"intArrayToString")||(o.intArrayToString=function(){ze("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ccall")||(o.ccall=function(){ze("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"cwrap")||(o.cwrap=function(){ze("'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"setValue")||(o.setValue=function(){ze("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getValue")||(o.getValue=function(){ze("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"allocate")||(o.allocate=function(){ze("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getMemory")||(o.getMemory=function(){ze("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"UTF8ArrayToString")||(o.UTF8ArrayToString=function(){ze("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"UTF8ToString")||(o.UTF8ToString=function(){ze("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stringToUTF8Array")||(o.stringToUTF8Array=function(){ze("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stringToUTF8")||(o.stringToUTF8=function(){ze("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"lengthBytesUTF8")||(o.lengthBytesUTF8=function(){ze("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stackTrace")||(o.stackTrace=function(){ze("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"addOnPreRun")||(o.addOnPreRun=function(){ze("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"addOnInit")||(o.addOnInit=function(){ze("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"addOnPreMain")||(o.addOnPreMain=function(){ze("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"addOnExit")||(o.addOnExit=function(){ze("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"addOnPostRun")||(o.addOnPostRun=function(){ze("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"writeStringToMemory")||(o.writeStringToMemory=function(){ze("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"writeArrayToMemory")||(o.writeArrayToMemory=function(){ze("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"writeAsciiToMemory")||(o.writeAsciiToMemory=function(){ze("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"addRunDependency")||(o.addRunDependency=function(){ze("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"removeRunDependency")||(o.removeRunDependency=function(){ze("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"FS_createFolder")||(o.FS_createFolder=function(){ze("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"FS_createPath")||(o.FS_createPath=function(){ze("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"FS_createDataFile")||(o.FS_createDataFile=function(){ze("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"FS_createPreloadedFile")||(o.FS_createPreloadedFile=function(){ze("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"FS_createLazyFile")||(o.FS_createLazyFile=function(){ze("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"FS_createLink")||(o.FS_createLink=function(){ze("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"FS_createDevice")||(o.FS_createDevice=function(){ze("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"FS_unlink")||(o.FS_unlink=function(){ze("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(o,"dynamicAlloc")||(o.dynamicAlloc=function(){ze("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getLEB")||(o.getLEB=function(){ze("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getFunctionTables")||(o.getFunctionTables=function(){ze("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"alignFunctionTables")||(o.alignFunctionTables=function(){ze("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"registerFunctions")||(o.registerFunctions=function(){ze("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"addFunction")||(o.addFunction=function(){ze("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"removeFunction")||(o.removeFunction=function(){ze("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getFuncWrapper")||(o.getFuncWrapper=function(){ze("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"prettyPrint")||(o.prettyPrint=function(){ze("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"makeBigInt")||(o.makeBigInt=function(){ze("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"dynCall")||(o.dynCall=function(){ze("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getCompilerSetting")||(o.getCompilerSetting=function(){ze("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"print")||(o.print=function(){ze("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"printErr")||(o.printErr=function(){ze("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getTempRet0")||(o.getTempRet0=function(){ze("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"setTempRet0")||(o.setTempRet0=function(){ze("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"callMain")||(o.callMain=function(){ze("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"abort")||(o.abort=function(){ze("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stringToNewUTF8")||(o.stringToNewUTF8=function(){ze("'stringToNewUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emscripten_realloc_buffer")||(o.emscripten_realloc_buffer=function(){ze("'emscripten_realloc_buffer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ENV")||(o.ENV=function(){ze("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ERRNO_CODES")||(o.ERRNO_CODES=function(){ze("'ERRNO_CODES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ERRNO_MESSAGES")||(o.ERRNO_MESSAGES=function(){ze("'ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"setErrNo")||(o.setErrNo=function(){ze("'setErrNo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"DNS")||(o.DNS=function(){ze("'DNS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"GAI_ERRNO_MESSAGES")||(o.GAI_ERRNO_MESSAGES=function(){ze("'GAI_ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"Protocols")||(o.Protocols=function(){ze("'Protocols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"Sockets")||(o.Sockets=function(){ze("'Sockets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"traverseStack")||(o.traverseStack=function(){ze("'traverseStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"UNWIND_CACHE")||(o.UNWIND_CACHE=function(){ze("'UNWIND_CACHE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"withBuiltinMalloc")||(o.withBuiltinMalloc=function(){ze("'withBuiltinMalloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"readAsmConstArgsArray")||(o.readAsmConstArgsArray=function(){ze("'readAsmConstArgsArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"readAsmConstArgs")||(o.readAsmConstArgs=function(){ze("'readAsmConstArgs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"mainThreadEM_ASM")||(o.mainThreadEM_ASM=function(){ze("'mainThreadEM_ASM' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"jstoi_q")||(o.jstoi_q=function(){ze("'jstoi_q' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"jstoi_s")||(o.jstoi_s=function(){ze("'jstoi_s' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getExecutableName")||(o.getExecutableName=function(){ze("'getExecutableName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"listenOnce")||(o.listenOnce=function(){ze("'listenOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"autoResumeAudioContext")||(o.autoResumeAudioContext=function(){ze("'autoResumeAudioContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"dynCallLegacy")||(o.dynCallLegacy=function(){ze("'dynCallLegacy' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getDynCaller")||(o.getDynCaller=function(){ze("'getDynCaller' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"dynCall")||(o.dynCall=function(){ze("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"callRuntimeCallbacks")||(o.callRuntimeCallbacks=function(){ze("'callRuntimeCallbacks' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"abortStackOverflow")||(o.abortStackOverflow=function(){ze("'abortStackOverflow' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"reallyNegative")||(o.reallyNegative=function(){ze("'reallyNegative' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"unSign")||(o.unSign=function(){ze("'unSign' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"reSign")||(o.reSign=function(){ze("'reSign' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"formatString")||(o.formatString=function(){ze("'formatString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"PATH")||(o.PATH=function(){ze("'PATH' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"PATH_FS")||(o.PATH_FS=function(){ze("'PATH_FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"SYSCALLS")||(o.SYSCALLS=function(){ze("'SYSCALLS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"syscallMmap2")||(o.syscallMmap2=function(){ze("'syscallMmap2' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"syscallMunmap")||(o.syscallMunmap=function(){ze("'syscallMunmap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"JSEvents")||(o.JSEvents=function(){ze("'JSEvents' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"specialHTMLTargets")||(o.specialHTMLTargets=function(){ze("'specialHTMLTargets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"maybeCStringToJsString")||(o.maybeCStringToJsString=function(){ze("'maybeCStringToJsString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"findEventTarget")||(o.findEventTarget=function(){ze("'findEventTarget' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"findCanvasEventTarget")||(o.findCanvasEventTarget=function(){ze("'findCanvasEventTarget' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"polyfillSetImmediate")||(o.polyfillSetImmediate=function(){ze("'polyfillSetImmediate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"demangle")||(o.demangle=function(){ze("'demangle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"demangleAll")||(o.demangleAll=function(){ze("'demangleAll' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"jsStackTrace")||(o.jsStackTrace=function(){ze("'jsStackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stackTrace")||(o.stackTrace=function(){ze("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getEnvStrings")||(o.getEnvStrings=function(){ze("'getEnvStrings' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"checkWasiClock")||(o.checkWasiClock=function(){ze("'checkWasiClock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"writeI53ToI64")||(o.writeI53ToI64=function(){ze("'writeI53ToI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"writeI53ToI64Clamped")||(o.writeI53ToI64Clamped=function(){ze("'writeI53ToI64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"writeI53ToI64Signaling")||(o.writeI53ToI64Signaling=function(){ze("'writeI53ToI64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"writeI53ToU64Clamped")||(o.writeI53ToU64Clamped=function(){ze("'writeI53ToU64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"writeI53ToU64Signaling")||(o.writeI53ToU64Signaling=function(){ze("'writeI53ToU64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"readI53FromI64")||(o.readI53FromI64=function(){ze("'readI53FromI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"readI53FromU64")||(o.readI53FromU64=function(){ze("'readI53FromU64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"convertI32PairToI53")||(o.convertI32PairToI53=function(){ze("'convertI32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"convertU32PairToI53")||(o.convertU32PairToI53=function(){ze("'convertU32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"exceptionLast")||(o.exceptionLast=function(){ze("'exceptionLast' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"exceptionCaught")||(o.exceptionCaught=function(){ze("'exceptionCaught' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"exceptionThrowBuf")||(o.exceptionThrowBuf=function(){ze("'exceptionThrowBuf' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ExceptionInfoAttrs")||(o.ExceptionInfoAttrs=function(){ze("'ExceptionInfoAttrs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ExceptionInfo")||(o.ExceptionInfo=function(){ze("'ExceptionInfo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"CatchInfo")||(o.CatchInfo=function(){ze("'CatchInfo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"exception_addRef")||(o.exception_addRef=function(){ze("'exception_addRef' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"exception_decRef")||(o.exception_decRef=function(){ze("'exception_decRef' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"Browser")||(o.Browser=function(){ze("'Browser' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"funcWrappers")||(o.funcWrappers=function(){ze("'funcWrappers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getFuncWrapper")||(o.getFuncWrapper=function(){ze("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"setMainLoop")||(o.setMainLoop=function(){ze("'setMainLoop' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"FS")||(o.FS=function(){ze("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"MEMFS")||(o.MEMFS=function(){ze("'MEMFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"TTY")||(o.TTY=function(){ze("'TTY' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"PIPEFS")||(o.PIPEFS=function(){ze("'PIPEFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"SOCKFS")||(o.SOCKFS=function(){ze("'SOCKFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"tempFixedLengthArray")||(o.tempFixedLengthArray=function(){ze("'tempFixedLengthArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"miniTempWebGLFloatBuffers")||(o.miniTempWebGLFloatBuffers=function(){ze("'miniTempWebGLFloatBuffers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"heapObjectForWebGLType")||(o.heapObjectForWebGLType=function(){ze("'heapObjectForWebGLType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"heapAccessShiftForWebGLHeap")||(o.heapAccessShiftForWebGLHeap=function(){ze("'heapAccessShiftForWebGLHeap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"GL")||(o.GL=function(){ze("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emscriptenWebGLGet")||(o.emscriptenWebGLGet=function(){ze("'emscriptenWebGLGet' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"computeUnpackAlignedImageSize")||(o.computeUnpackAlignedImageSize=function(){ze("'computeUnpackAlignedImageSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emscriptenWebGLGetTexPixelData")||(o.emscriptenWebGLGetTexPixelData=function(){ze("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emscriptenWebGLGetUniform")||(o.emscriptenWebGLGetUniform=function(){ze("'emscriptenWebGLGetUniform' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emscriptenWebGLGetVertexAttrib")||(o.emscriptenWebGLGetVertexAttrib=function(){ze("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"writeGLArray")||(o.writeGLArray=function(){ze("'writeGLArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"AL")||(o.AL=function(){ze("'AL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"SDL_unicode")||(o.SDL_unicode=function(){ze("'SDL_unicode' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"SDL_ttfContext")||(o.SDL_ttfContext=function(){ze("'SDL_ttfContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"SDL_audio")||(o.SDL_audio=function(){ze("'SDL_audio' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"SDL")||(o.SDL=function(){ze("'SDL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"SDL_gfx")||(o.SDL_gfx=function(){ze("'SDL_gfx' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"GLUT")||(o.GLUT=function(){ze("'GLUT' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"EGL")||(o.EGL=function(){ze("'EGL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"GLFW_Window")||(o.GLFW_Window=function(){ze("'GLFW_Window' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"GLFW")||(o.GLFW=function(){ze("'GLFW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"GLEW")||(o.GLEW=function(){ze("'GLEW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"IDBStore")||(o.IDBStore=function(){ze("'IDBStore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"runAndAbortIfError")||(o.runAndAbortIfError=function(){ze("'runAndAbortIfError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emval_handle_array")||(o.emval_handle_array=function(){ze("'emval_handle_array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emval_free_list")||(o.emval_free_list=function(){ze("'emval_free_list' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emval_symbols")||(o.emval_symbols=function(){ze("'emval_symbols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"init_emval")||(o.init_emval=function(){ze("'init_emval' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"count_emval_handles")||(o.count_emval_handles=function(){ze("'count_emval_handles' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"get_first_emval")||(o.get_first_emval=function(){ze("'get_first_emval' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getStringOrSymbol")||(o.getStringOrSymbol=function(){ze("'getStringOrSymbol' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"requireHandle")||(o.requireHandle=function(){ze("'requireHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emval_newers")||(o.emval_newers=function(){ze("'emval_newers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"craftEmvalAllocator")||(o.craftEmvalAllocator=function(){ze("'craftEmvalAllocator' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emval_get_global")||(o.emval_get_global=function(){ze("'emval_get_global' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"emval_methodCallers")||(o.emval_methodCallers=function(){ze("'emval_methodCallers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"InternalError")||(o.InternalError=function(){ze("'InternalError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"BindingError")||(o.BindingError=function(){ze("'BindingError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"UnboundTypeError")||(o.UnboundTypeError=function(){ze("'UnboundTypeError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"PureVirtualError")||(o.PureVirtualError=function(){ze("'PureVirtualError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"init_embind")||(o.init_embind=function(){ze("'init_embind' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"throwInternalError")||(o.throwInternalError=function(){ze("'throwInternalError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"throwBindingError")||(o.throwBindingError=function(){ze("'throwBindingError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"throwUnboundTypeError")||(o.throwUnboundTypeError=function(){ze("'throwUnboundTypeError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ensureOverloadTable")||(o.ensureOverloadTable=function(){ze("'ensureOverloadTable' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"exposePublicSymbol")||(o.exposePublicSymbol=function(){ze("'exposePublicSymbol' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"replacePublicSymbol")||(o.replacePublicSymbol=function(){ze("'replacePublicSymbol' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"extendError")||(o.extendError=function(){ze("'extendError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"createNamedFunction")||(o.createNamedFunction=function(){ze("'createNamedFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"registeredInstances")||(o.registeredInstances=function(){ze("'registeredInstances' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getBasestPointer")||(o.getBasestPointer=function(){ze("'getBasestPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"registerInheritedInstance")||(o.registerInheritedInstance=function(){ze("'registerInheritedInstance' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"unregisterInheritedInstance")||(o.unregisterInheritedInstance=function(){ze("'unregisterInheritedInstance' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getInheritedInstance")||(o.getInheritedInstance=function(){ze("'getInheritedInstance' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getInheritedInstanceCount")||(o.getInheritedInstanceCount=function(){ze("'getInheritedInstanceCount' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getLiveInheritedInstances")||(o.getLiveInheritedInstances=function(){ze("'getLiveInheritedInstances' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"registeredTypes")||(o.registeredTypes=function(){ze("'registeredTypes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"awaitingDependencies")||(o.awaitingDependencies=function(){ze("'awaitingDependencies' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"typeDependencies")||(o.typeDependencies=function(){ze("'typeDependencies' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"registeredPointers")||(o.registeredPointers=function(){ze("'registeredPointers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"registerType")||(o.registerType=function(){ze("'registerType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"whenDependentTypesAreResolved")||(o.whenDependentTypesAreResolved=function(){ze("'whenDependentTypesAreResolved' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"embind_charCodes")||(o.embind_charCodes=function(){ze("'embind_charCodes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"embind_init_charCodes")||(o.embind_init_charCodes=function(){ze("'embind_init_charCodes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"readLatin1String")||(o.readLatin1String=function(){ze("'readLatin1String' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getTypeName")||(o.getTypeName=function(){ze("'getTypeName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"heap32VectorToArray")||(o.heap32VectorToArray=function(){ze("'heap32VectorToArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"requireRegisteredType")||(o.requireRegisteredType=function(){ze("'requireRegisteredType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"getShiftFromSize")||(o.getShiftFromSize=function(){ze("'getShiftFromSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"integerReadValueFromPointer")||(o.integerReadValueFromPointer=function(){ze("'integerReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"enumReadValueFromPointer")||(o.enumReadValueFromPointer=function(){ze("'enumReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"floatReadValueFromPointer")||(o.floatReadValueFromPointer=function(){ze("'floatReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"simpleReadValueFromPointer")||(o.simpleReadValueFromPointer=function(){ze("'simpleReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"runDestructors")||(o.runDestructors=function(){ze("'runDestructors' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"new_")||(o.new_=function(){ze("'new_' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"craftInvokerFunction")||(o.craftInvokerFunction=function(){ze("'craftInvokerFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"embind__requireFunction")||(o.embind__requireFunction=function(){ze("'embind__requireFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"tupleRegistrations")||(o.tupleRegistrations=function(){ze("'tupleRegistrations' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"structRegistrations")||(o.structRegistrations=function(){ze("'structRegistrations' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"genericPointerToWireType")||(o.genericPointerToWireType=function(){ze("'genericPointerToWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"constNoSmartPtrRawPointerToWireType")||(o.constNoSmartPtrRawPointerToWireType=function(){ze("'constNoSmartPtrRawPointerToWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"nonConstNoSmartPtrRawPointerToWireType")||(o.nonConstNoSmartPtrRawPointerToWireType=function(){ze("'nonConstNoSmartPtrRawPointerToWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"init_RegisteredPointer")||(o.init_RegisteredPointer=function(){ze("'init_RegisteredPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"RegisteredPointer")||(o.RegisteredPointer=function(){ze("'RegisteredPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"RegisteredPointer_getPointee")||(o.RegisteredPointer_getPointee=function(){ze("'RegisteredPointer_getPointee' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"RegisteredPointer_destructor")||(o.RegisteredPointer_destructor=function(){ze("'RegisteredPointer_destructor' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"RegisteredPointer_deleteObject")||(o.RegisteredPointer_deleteObject=function(){ze("'RegisteredPointer_deleteObject' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"RegisteredPointer_fromWireType")||(o.RegisteredPointer_fromWireType=function(){ze("'RegisteredPointer_fromWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"runDestructor")||(o.runDestructor=function(){ze("'runDestructor' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"releaseClassHandle")||(o.releaseClassHandle=function(){ze("'releaseClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"finalizationGroup")||(o.finalizationGroup=function(){ze("'finalizationGroup' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"detachFinalizer_deps")||(o.detachFinalizer_deps=function(){ze("'detachFinalizer_deps' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"detachFinalizer")||(o.detachFinalizer=function(){ze("'detachFinalizer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"attachFinalizer")||(o.attachFinalizer=function(){ze("'attachFinalizer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"makeClassHandle")||(o.makeClassHandle=function(){ze("'makeClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"init_ClassHandle")||(o.init_ClassHandle=function(){ze("'init_ClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ClassHandle")||(o.ClassHandle=function(){ze("'ClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ClassHandle_isAliasOf")||(o.ClassHandle_isAliasOf=function(){ze("'ClassHandle_isAliasOf' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"throwInstanceAlreadyDeleted")||(o.throwInstanceAlreadyDeleted=function(){ze("'throwInstanceAlreadyDeleted' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ClassHandle_clone")||(o.ClassHandle_clone=function(){ze("'ClassHandle_clone' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ClassHandle_delete")||(o.ClassHandle_delete=function(){ze("'ClassHandle_delete' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"deletionQueue")||(o.deletionQueue=function(){ze("'deletionQueue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ClassHandle_isDeleted")||(o.ClassHandle_isDeleted=function(){ze("'ClassHandle_isDeleted' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"ClassHandle_deleteLater")||(o.ClassHandle_deleteLater=function(){ze("'ClassHandle_deleteLater' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"flushPendingDeletes")||(o.flushPendingDeletes=function(){ze("'flushPendingDeletes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"delayFunction")||(o.delayFunction=function(){ze("'delayFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"setDelayFunction")||(o.setDelayFunction=function(){ze("'setDelayFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"RegisteredClass")||(o.RegisteredClass=function(){ze("'RegisteredClass' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"shallowCopyInternalPointer")||(o.shallowCopyInternalPointer=function(){ze("'shallowCopyInternalPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"downcastPointer")||(o.downcastPointer=function(){ze("'downcastPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"upcastPointer")||(o.upcastPointer=function(){ze("'upcastPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"validateThis")||(o.validateThis=function(){ze("'validateThis' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"char_0")||(o.char_0=function(){ze("'char_0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"char_9")||(o.char_9=function(){ze("'char_9' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"makeLegalFunctionName")||(o.makeLegalFunctionName=function(){ze("'makeLegalFunctionName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"warnOnce")||(o.warnOnce=function(){ze("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stackSave")||(o.stackSave=function(){ze("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stackRestore")||(o.stackRestore=function(){ze("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stackAlloc")||(o.stackAlloc=function(){ze("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"AsciiToString")||(o.AsciiToString=function(){ze("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stringToAscii")||(o.stringToAscii=function(){ze("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"UTF16ToString")||(o.UTF16ToString=function(){ze("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stringToUTF16")||(o.stringToUTF16=function(){ze("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"lengthBytesUTF16")||(o.lengthBytesUTF16=function(){ze("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"UTF32ToString")||(o.UTF32ToString=function(){ze("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"stringToUTF32")||(o.stringToUTF32=function(){ze("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"lengthBytesUTF32")||(o.lengthBytesUTF32=function(){ze("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"allocateUTF8")||(o.allocateUTF8=function(){ze("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(o,"allocateUTF8OnStack")||(o.allocateUTF8OnStack=function(){ze("'allocateUTF8OnStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),o.writeStackCookie=fe,o.checkStackCookie=me,Object.getOwnPropertyDescriptor(o,"ALLOC_NORMAL")||Object.defineProperty(o,"ALLOC_NORMAL",{configurable:!0,get:function(){ze("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(o,"ALLOC_STACK")||Object.defineProperty(o,"ALLOC_STACK",{configurable:!0,get:function(){ze("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(o,"ALLOC_NONE")||Object.defineProperty(o,"ALLOC_NONE",{configurable:!0,get:function(){ze("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Le=function e(){us||Ma(),us||(Le=e)},o.run=Ma,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();var La=!0;return o.noInitialRun&&(La=!1),T=!0,Ma(),e.ready});e.exports=i},kiQV:function(e){e.exports=JSON.parse('{"b":"1.7.2","a":{"@angular/animations":"~11.2.4","@angular/cdk":"~11.2.2","@angular/common":"~11.2.4","@angular/compiler":"~11.2.4","@angular/core":"~11.2.4","@angular/elements":"^11.2.5","@angular/forms":"~11.2.4","@angular/material":"~11.2.2","@angular/platform-browser":"~11.2.4","@angular/platform-browser-dynamic":"~11.2.4","@angular/router":"~11.2.4","@aurigma/data-tools":"1.7.1","@aurigma/design-atoms":"6.9.4","@aurigma/ng-asset-processor-client":"^2.4.2","@aurigma/ng-asset-storage-client":"^2.4.2","@aurigma/ng-design-atoms-api-client":"^2.4.2","@aurigma/ng-design-atoms":"^1.4.1","@aurigma/ng-editors-ui":"^1.0.5","@aurigma/ng-hotkeys":"^1.0.0","@aurigma/shared":"0.0.38","@ngx-translate/core":"^13.0.0","@thebespokepixel/es-tinycolor":"^2.1.1","bootstrap":"^4.5.0","material-community-components":"^10.0.0","ngx-clipboard":"^14.0.1","ngx-logger":"^4.2.1","ngx-perfect-scrollbar":"^10.1.0","rxjs":"~6.6.0","tinycolor2":"^1.4.2","ts-keycode-enum":"^1.0.6","tslib":"^2.0.0","zone.js":"~0.11.3"}}')},sHUD:function(e,t,n){var r,i;"undefined"!=typeof self&&self,void 0===(i="function"==typeof(r=function(){"use strict";var e={apply2:m,assign:c(Object.assign)?Object.assign:function(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(e[n]=t[n]);return e},compose:l,curry:a(f(a),[])([]),idFunction:u,isFunction:c,noop:o,swap:f};function t(e,t){e["@@type"]="monet.js/"+t}function n(e){return function(t){return(t["@@type"]||t.constructor["@@type"])==="monet.js/"+e}}function r(e){return function(t){var n=t["@@type"]||t.constructor&&t.constructor["@@type"];return Boolean(n)&&n.length>=e.length&&n.indexOf(e)===n.length-e.length}}function i(e){return null==e}function o(){}function s(e){return Array.prototype.slice.call(e)}function a(e,t){return function(){var n=t.concat(s(arguments));return n.length>=e.length?e.apply(null,n.slice(0,n.length)):a(e,n)}}function l(e,t){return function(n){return e(t(n))}}function c(e){return Boolean(e&&e.constructor&&e.call&&e.apply)}function u(e){return e}function h(e,t){return e===t||e!=e&&t!=t||!(!e||!t)&&!(!c(e.equals)||!c(t.equals))&&e.equals(t)}function d(e){return function(t){return h(e,t)}}function p(){return!1}function f(e){return function(t,n){return e(n,t)}}function m(e,t,n){return t.ap(e.map(a(n,[])))}function g(e,t){for(var n=e,r=t;!n.isNil&&!r.isNil;){if(!d(n.head())(r.head()))return!1;n=n.tail(),r=r.tail()}return n.isNil&&r.isNil}function y(e,t){return t.isNil?Q(t):K(function(){return y(e,t.tail())}).map(a(E,[])(e(t.head())))}function _(e,t){return y(e,t).run()}function v(e,t){return e.foldRight(P)(function(e,n){return t(e)?E(e,n):n})}function b(e,t){if(e.isNil)return Q(N());var n=e.head();return t(n)?Q(B(n)):K(function(){return b(e.tail(),t)})}function w(e,t){return b(e,t).run()}function C(e,t){return e.isNil?Q(!1):h(e.head(),t)?Q(!0):K(function(){return C(e.tail(),t)})}function x(e,t){return C(e,t).run()}function E(e,t){return t.cons(e)}function S(){switch(arguments.length){case 0:return new S.fn.init;case 1:return new S.fn.init(arguments[0]);default:return new S.fn.init(arguments[0],arguments[1])}}e.List=S;var P,T=function(e,t){t.isNil||(e(t.head()),T(e,t.tail()))},I=function(e,t,n){return function t(n,r){return r.isNil?Q(n):K(function(){return t(e(n,r.head()),r.tail())})}(t,n).run()},O=function(e,t,n){return function t(n,r){return n.isNil?Q(r):K(function(){return t(n.tail(),r)}).map(function(t){return e(n.head(),t)})}(t,n).run()},k=function(e,t){return function e(t,n){return t.isNil?Q(n):K(function(){return e(t.tail(),n).map(function(e){return e.cons(t.head())})})}(e,t).run()},R=function(e,t){return e.foldRight(t.of(P))(t.map2(E))},A=function(e){return e.foldLeft(P)(f(E))},M=function(e,t){return e.bind(function(e){return t.map(function(t){return t(e)})})};function D(e){return new Error("Cannot create an empty Non-Empty List. Passed head is "+e+".")}function F(e,t){if(i(e))throw D(e);return new F.fn.init(e,t)}(S.fn=S.prototype={init:function(){var e=arguments[0],n=arguments[1];0===arguments.length?(this.isNil=!0,this.size_=0):(this.isNil=!1,this.head_=e,this.tail_=n||P,this.size_=this.tail_.size()+1),t(this,"List")},of:function(e){return new S(e)},size:function(){return this.size_},equals:function(e){return(S.isOfType(e)||F.isOfType(e))&&g(this,e)},cons:function(e){return S(e,this)},snoc:function(e){return this.concat(S(e))},map:function(e){return _(e,this)},toArray:function(){return I(function(e,t){return e.push(t),e},[],this)},toSet:function(){return new Set(this)},foldLeft:function(e){var t=this;return function(n){return I(n,e,t)}},foldRight:function(e){var t=this;return function(n){return O(n,t,e)}},append:function(e){return k(this,e)},filter:function(e){return v(this,e)},find:function(e){return w(this,e)},flatten:function(){return O(k,this,P)},flattenMaybe:function(){return this.flatMap(L.toList)},reverse:function(){return A(this)},bind:function(e){return this.map(e).flatten()},forEach:function(e){T(e,this)},contains:function(e){return x(this,e)},sequenceMaybe:function(){return R(this,L)},sequenceValidation:function(){return this.foldLeft(H(P))(function(e,t){return e.ap(t.map(function(e){return function(t){return E(e,t)}}))}).map(A)},sequenceEither:function(){return R(this,X)},sequenceIO:function(){return R(this,W)},sequenceReader:function(){return R(this,$)},sequence:function(e){return R(this,e)},head:function(){return this.head_},headMaybe:function(){return this.isNil?N():B(this.head_)},lookup:function(e){return this.isNil||e>=this.size()?N():L.fromNull(this.toArray()[e])},nth:function(e){return this.isNil||e>=this.size()?void 0:this.toArray()[e]},tail:function(){return this.isNil?P:this.tail_},tails:function(){return this.isNil?S(P,P):this.tail().tails().cons(this)},ap:function(e){return M(this,e)},apTo:function(e){return M(e,this)},isNEL:p,toString:function(){return this.isNil?"Nil":"List("+this.toArray().join(", ")+")"},inspect:function(){return this.toString()}}).init.prototype=S.fn,t(S,"List"),t(S.fn.init,"List"),S.isInstance=n("List"),S.isOfType=r("List"),S.prototype.empty=function(){return P},S.fromArray=function(e){return e.reduceRight(function(e,t){return e.cons(t)},P)},S.from=function(e){return S.fromArray(Array.from(e))},S.of=function(e){return new S(e,P)},S.prototype.each=S.prototype.forEach,P=e.Nil=new S.fn.init,e.NEL=e.NonEmptyList=F,F.of=function(e){return F(e,P)},F.fn=F.prototype={init:function(e,n){if(i(e))throw D(e);this.isNil=!1,this.head_=e,this.tail_=i(n)?P:n,this.size_=this.tail_.size()+1,t(this,"NEL")},equals:function(e){return S.isOfType(e)||F.isOfType(e)&&g(this,e)},cons:function(e){return F(e,this.toList())},snoc:function(e){return this.concat(F(e))},map:function(e){return F(e(this.head_),_(e,this.tail_))},bind:function(e){var t=e(this.head_);if(!t.isNEL())throw new Error("NEL.fn.bind: Passed function must return a NonEmptyList.");var n=this.tail().foldLeft(P.snoc(t.head()).append(t.tail()))(function(t,n){var r=e(n).toList();return t.snoc(r.head()).append(r.tail())});return new F(n.head(),n.tail())},head:function(){return this.head_},lookup:function(e){return e>=this.size()?N():L.fromNull(this.toArray()[e])},nth:function(e){return e>=this.size()?void 0:this.toArray()[e]},tail:function(){return this.tail_},tails:function(){var e=this.toList().tails().map(F.fromList).flattenMaybe();return F(e.head(),e.tail())},toList:function(){return S(this.head_,this.tail_)},reverse:function(){if(this.tail().isNil)return this;var e=this.tail().reverse();return F(e.head(),e.tail().append(S(this.head())))},foldLeft:function(e){return this.toList().foldLeft(e)},foldRight:function(e){return this.toList().foldRight(e)},reduceLeft:function(e){return this.tail().foldLeft(this.head())(e)},filter:function(e){return v(this.toList(),e)},find:function(e){return w(this.toList(),e)},flatten:function(){return O(k,this.toList().map(function(e){return e.isNEL()?e.toList():e}),P)},flattenMaybe:function(){return this.toList().flatMap(L.toList)},contains:function(e){return x(this.toList(),e)},append:function(e){return F.fromList(this.toList().append(e.toList())).some()},cobind:function(e){return this.cojoin().map(e)},size:function(){return this.size_},forEach:function(e){return this.toList().forEach(e)},isNEL:function(){return!0},toString:function(){return"NEL("+this.toArray().join(", ")+")"},inspect:function(){return this.toString()}},F.fromList=function(e){return e.isNil?N():B(F(e.head(),e.tail()))},F.fromArray=function(e){return F.fromList(S.fromArray(e))},F.from=function(e){return F.fromList(S.from(e))},F.fn.init.prototype=F.fn,t(F,"NEL"),t(F.fn.init,"NEL"),F.isInstance=n("NEL"),F.isOfType=r("NEL"),F.prototype.toArray=S.prototype.toArray,F.prototype.toSet=S.prototype.toSet,F.prototype.extract=F.prototype.copure=F.prototype.head,F.prototype.cojoin=F.prototype.tails,F.prototype.coflatMap=F.prototype.mapTails=F.prototype.cobind,F.prototype.ap=S.prototype.ap,F.prototype.apTo=S.prototype.apTo;var L=e.Maybe={};L.fromFalsy=function(e){return e?L.Some(e):L.None()},L.fromNull=function(e){return i(e)?L.None():L.Some(e)},L.fromUndefined=function(e){return void 0===e?L.None():L.Some(e)},L.fromEmpty=function(e){return i(t=e)||""===t||Array.isArray(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length?L.None():L.Some(e);var t},L.of=function(e){return B(e)};var B=L.Just=L.Some=L.some=e.Some=e.Just=function(e){return new L.fn.init(!0,e)},N=L.Nothing=L.None=L.none=e.None=e.Nothing=function(){return new L.fn.init(!1,null)};L.toList=function(e){return e.toList()},L.fn=L.prototype={init:function(e,n){if(this.isValue=e,e&&i(n))throw new Error("Can not create Some with illegal value: "+n+".");this.val=n,t(this,"Maybe")},isSome:function(){return this.isValue},isNone:function(){return!this.isSome()},bind:function(e){return this.isValue?e(this.val):this},some:function(){if(this.isValue)return this.val;throw new Error("Cannot call .some() on a None.")},orSome:function(e){return this.isValue?this.val:e},orLazy:function(e){return this.cata(e,u)},orNull:function(){return this.orSome(null)},orUndefined:function(){return this.orSome(void 0)},orElse:function(e){return this.catchMap(function(){return e})},ap:function(e){var t=this.val;return this.isValue?e.map(function(e){return e(t)}):this},apTo:function(e){return e.ap(this)},equals:function(e){return L.isOfType(e)&&this.cata(function(){return e.isNone()},function(t){return e.fold(!1)(d(t))})},toArray:function(){return this.map(function(e){return[e]}).orLazy(function(){return[]})},toSet:function(){return new Set(this)},toList:function(){return this.map(S).orLazy(function(){return P})},toEither:function(e){return this.isSome()?G(this.val):q(e)},toValidation:function(e){return this.isSome()?H(this.val):z(e)},fold:function(e){var t=this;return function(n){return t.isSome()?n(t.val):e}},foldLeft:function(e){return this.toList().foldLeft(e)},foldRight:function(e){return this.toList().foldRight(e)},cata:function(e,t){return this.isSome()?t(this.val):e()},catchMap:function(e){return this.isSome()?this:e()},filter:function(e){var t=this;return t.flatMap(function(n){return e(n)?t:N()})},orNoneIf:function(e){return e?N():this},contains:function(e){return!!this.isSome()&&h(this.val,e)},forEach:function(e){this.cata(o,e)},orElseRun:function(e){this.cata(e,o)},toString:function(){return this.isSome()?"Just("+this.val+")":"Nothing"},inspect:function(){return this.toString()}},L.prototype.orJust=L.prototype.getOrElse=L.prototype.orSome,L.prototype.just=L.prototype.some,L.prototype.isJust=L.prototype.isSome,L.prototype.isNothing=L.prototype.isNone,L.prototype.orNothingIf=L.prototype.orNoneIf,L.fn.init.prototype=L.fn,t(L,"Maybe"),t(L.fn.init,"Maybe"),L.isInstance=n("Maybe"),L.isOfType=r("Maybe");var j=e.Validation={},H=j.Success=j.success=e.Success=function(e){return new j.fn.init(e,!0)},z=j.Fail=j.fail=e.Fail=function(e){return new j.fn.init(e,!1)};j.of=function(e){return H(e)},j.fn=j.prototype={init:function(e,n){this.val=e,this.isSuccessValue=n,t(this,"Validation")},success:function(){if(this.isSuccess())return this.val;throw new Error("Cannot call success() on a Fail.")},isSuccess:function(){return this.isSuccessValue},isFail:function(){return!this.isSuccessValue},fail:function(){if(this.isSuccess())throw new Error("Cannot call fail() on a Success.");return this.val},bind:function(e){return this.isSuccess()?e(this.val):this},ap:function(e){var t=this.val;return this.isSuccess()?e.map(function(e){return e(t)}):e.isFail()?j.Fail(V.append(t,e.fail())):this},apTo:function(e){return e.ap(this)},acc:function(){var e=function(){return e};return this.isSuccessValue?j.success(e):this},foldLeft:function(e){return this.toMaybe().toList().foldLeft(e)},foldRight:function(e){return this.toMaybe().toList().foldRight(e)},cata:function(e,t){return this.isSuccessValue?t(this.val):e(this.val)},catchMap:function(e){return this.isSuccess()?this:e(this.val)},swap:function(){return this.isSuccess()?z(this.val):H(this.val)},failMap:function(e){return this.isFail()?z(e(this.val)):this},bimap:function(e,t){return this.isSuccessValue?this.map(t):this.failMap(e)},forEach:function(e){this.cata(o,e)},forEachFail:function(e){this.cata(e,o)},equals:function(e){return j.isOfType(e)&&this.cata(function(t){return e.cata(d(t),p)},function(t){return e.cata(p,d(t))})},toMaybe:function(){return this.isSuccess()?B(this.val):N()},toEither:function(){return(this.isSuccess()?G:q)(this.val)},toString:function(){return(this.isSuccess()?"Success(":"Fail(")+this.val+")"},inspect:function(){return this.toString()}},j.prototype.fold=j.prototype.cata,j.fn.init.prototype=j.fn,t(j,"Validation"),t(j.fn.init,"Validation"),j.isInstance=n("Validation"),j.isOfType=r("Validation");var V=e.Semigroup={append:function(e,t){if(c(e.concat))return e.concat(t);throw new Error("Couldn't find a semigroup appender in the environment, please specify your own append function")}},U=e.monadTransformer=e.MonadT=e.monadT=function(e){return new U.fn.init(e)};U.of=function(e){return U(e)},U.fn=U.prototype={init:function(e){this.monad=e,t(j,"MonadT")},map:function(e){return U(this.monad.map(function(t){return t.map(e)}))},bind:function(e){return U(this.monad.map(function(t){return t.flatMap(e)}))},ap:function(e){return U(this.monad.flatMap(function(t){return e.perform().map(function(e){return t.ap(e)})}))},perform:function(){return this.monad}},U.fn.init.prototype=U.fn;var W=e.IO=e.io=function(e){return new W.fn.init(e)};W.of=function(e){return W(function(){return e})},W.fn=W.prototype={init:function(e){if(!c(e))throw new Error("IO requires a function.");this.effectFn=e,t(this,"IO")},map:function(e){var t=this;return W(function(){return e(t.effectFn())})},bind:function(e){var t=this;return W(function(){return e(t.effectFn()).run()})},ap:function(e){var t=this;return e.map(function(e){return e(t.effectFn())})},apTo:function(e){return e.ap(this)},run:function(){return this.effectFn()}},W.fn.init.prototype=W.fn,t(W,"IO"),t(W.fn.init,"IO"),W.isInstance=n("IO"),W.isOfType=r("IO"),W.prototype.perform=W.prototype.performUnsafeIO=W.prototype.run;var X=e.Either={};X.of=function(e){return G(e)},X.fromTry=function(e){try{return X.right(e())}catch(t){return X.left(t)}},X.fromPromise=function(e){return e.then(X.Right,X.Left)};var G=X.Right=X.right=e.Right=function(e){return new X.fn.init(e,!0)},q=X.Left=X.left=e.Left=function(e){return new X.fn.init(e,!1)};X.fn=X.prototype={init:function(e,n){this.isRightValue=n,this.value=e,t(this,"Either")},bind:function(e){return this.isRightValue?e(this.value):this},ap:function(e){var t=this;return this.isRightValue?e.map(function(e){return e(t.value)}):this},apTo:function(e){return e.ap(this)},leftMap:function(e){return this.isLeft()?q(e(this.value)):this},isRight:function(){return this.isRightValue},isLeft:function(){return!this.isRight()},right:function(){if(this.isRightValue)return this.value;throw new Error("Cannot call right() on a Left.")},left:function(){if(this.isRightValue)throw new Error("Cannot call left() on a Right.");return this.value},foldLeft:function(e){return this.toMaybe().toList().foldLeft(e)},foldRight:function(e){return this.toMaybe().toList().foldRight(e)},cata:function(e,t){return this.isRightValue?t(this.value):e(this.value)},catchMap:function(e){return this.isRight()?this:e(this.value)},swap:function(){return this.isRight()?q(this.value):G(this.value)},forEach:function(e){this.cata(o,e)},forEachLeft:function(e){this.cata(e,o)},equals:function(e){return X.isOfType(e)&&this.cata(function(t){return e.cata(d(t),p)},function(t){return e.cata(p,d(t))})},bimap:function(e,t){return this.isRightValue?this.map(t):this.leftMap(e)},toMaybe:function(){return this.isRight()?B(this.value):N()},toValidation:function(){return this.isRight()?H(this.value):z(this.value)},toString:function(){return this.cata(function(e){return"Left("+e+")"},function(e){return"Right("+e+")"})},toPromise:function(){return this.cata(function(e){return Promise.reject(e)},function(e){return Promise.resolve(e)})},inspect:function(){return this.toString()}},X.prototype.fold=X.prototype.cata,X.fn.init.prototype=X.fn,t(X,"Either"),t(X.fn.init,"Either"),X.isInstance=n("Either"),X.isOfType=r("Either");var $=e.Reader=function(e){return new $.fn.init(e)};$.of=function(e){return $(function(t){return e})},$.ask=function(){return $(u)},$.fn=$.prototype={init:function(e){this.f=e,t(this,"Reader")},run:function(e){return this.f(e)},bind:function(e){var t=this;return $(function(n){return e(t.run(n)).run(n)})},ap:function(e){var t=this;return e.bind(function(e){return $(function(n){return e(t.run(n))})})},apTo:function(e){return e.ap(this)},map:function(e){var t=this;return $(function(n){return e(t.run(n))})},local:function(e){var t=this;return $(function(n){return t.run(e(n))})}},$.fn.init.prototype=$.fn,t($,"Reader"),t($.fn.init,"Reader"),$.isInstance=n("Reader"),$.isOfType=r("Reader");var Y=e.Free={},K=Y.Suspend=e.Suspend=function(e){return new Y.fn.init(e,!0)},Q=Y.Return=e.Return=function(e){return new Y.fn.init(e,!1)};function Z(e){return new Z.fn.init(e)}function J(e){(function(e){e.prototype.flatMap=e.prototype.chain=e.prototype.bind,e.pure=e.unit=e.of,e.prototype.of=e.of,c(e.prototype.append)&&(e.prototype.concat=e.prototype.append),e.prototype.point=e.prototype.pure=e.prototype.unit=e.prototype.of})(e),function(e){c(e.prototype.filter)&&(e.prototype.filterNot=function(e){return this.filter(function(t){return!e(t)})})}(e),function(e){e.prototype.join=function(){return this.flatMap(u)},e.map2=function(e){return function(t,n){return t.flatMap(function(t){return n.map(function(n){return e(t,n)})})}}}(e),function(e){c(e.prototype.map)||(e.prototype.map=function(e){return this.bind(l(this.of,e))})}(e),function(e){e.prototype.takeLeft=function(e){return m(this,e,function(e,t){return e})},e.prototype.takeRight=function(e){return m(this,e,function(e,t){return t})}}(e),function(e){c(e.prototype.toArray)&&(e.prototype.every=e.prototype.forall=function(e){return this.toArray().every(e)},e.prototype.exists=function(e){return this.toArray().some(e)})}(e),function(e){["equals","map","ap","chain"].filter(function(t){return c(e.prototype[t])}).forEach(function(t){e.prototype["fantasy-land/"+t]=e.prototype[t]})}(e),function(e){c(e.prototype.toArray)&&(e.prototype[Symbol.iterator]=function(){return this.toArray()[Symbol.iterator]()})}(e),function(e){c(e.prototype.toArray)&&(e.prototype.to=function(e){return e(this)})}(e)}return Y.of=function(e){return Q(e)},Y.liftF=function(e){return c(e)?K(l(Q,e)):K(e.map(Q))},Y.fn=Y.prototype={init:function(e,n){this.isSuspend=n,n?this.functor=e:this.val=e,t(this,"Free")},run:function(){return this.go(function(e){return e()})},bind:function(e){return this.isSuspend?c(this.functor)?K(l(function(t){return t.bind(e)},this.functor)):K(this.functor.map(function(t){return t.bind(e)})):e(this.val)},ap:function(e){return this.bind(function(t){return e.map(function(e){return e(t)})})},apTo:function(e){return e.ap(this)},resume:function(){return this.isSuspend?q(this.functor):G(this.val)},go1:function(e){return function t(n){return n.resume().cata(function(n){return t(e(n))},u)}(this)},go:function(e){for(var t=this.resume();t.isLeft();){var n=e(t.left());t=n.resume()}return t.right()}},Y.fn.init.prototype=Y.fn,t(Y,"Free"),t(Y.fn.init,"Free"),Y.isInstance=n("Free"),Y.isOfType=r("Free"),e.Identity=Z,Z.of=function(e){return new Z(e)},(Z.fn=Z.prototype={init:function(e){this.val=e,t(this,"Identity")},bind:function(e){return e(this.val)},get:function(){return this.val},forEach:function(e){e(this.val)},equals:function(e){return Z.isOfType(e)&&d(this.get())(e.get())},contains:function(e){return h(this.val,e)},toString:function(){return"Identity("+this.val+")"},inspect:function(){return this.toString()},ap:function(e){var t=this.val;return e.map(function(e){return e(t)})},apTo:function(e){return e.ap(this)},toArray:function(){return[this.get()]},toList:function(){return S(this.get(),P)},toSet:function(){return new Set(this)}}).init.prototype=Z.fn,t(Z,"Identity"),t(Z.fn.init,"Identity"),Z.isInstance=n("Identity"),Z.isOfType=r("Identity"),J(U),J(X),J(L),J(W),J(F),J(S),J(j),J($),J(Y),J(Z),e})?r.call(t,n,t,e):r)||(e.exports=i)},vLAJ:function(e,t,n){!function(t,n){"use strict";var r=function e(t,n){return new e.Instance(t,n||{})};r.VERSION="1.1.3",r.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},r.DOCUMENT=document,r.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,r.HAS_TOUCHEVENTS="ontouchstart"in t,r.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),r.NO_MOUSEEVENTS=r.HAS_TOUCHEVENTS&&r.IS_MOBILE||r.HAS_POINTEREVENTS,r.CALCULATE_INTERVAL=25;var i={},o=r.DIRECTION_DOWN="down",s=r.DIRECTION_LEFT="left",a=r.DIRECTION_UP="up",l=r.DIRECTION_RIGHT="right",c=r.POINTER_MOUSE="mouse",u=r.POINTER_TOUCH="touch",h=r.POINTER_PEN="pen",d=r.EVENT_START="start",p=r.EVENT_MOVE="move",f=r.EVENT_END="end",m=r.EVENT_RELEASE="release",g=r.EVENT_TOUCH="touch";r.READY=!1,r.plugins=r.plugins||{},r.gestures=r.gestures||{};var y=r.utils={extend:function(e,t,n){for(var r in t)!t.hasOwnProperty(r)||void 0!==e[r]&&n||(e[r]=t[r]);return e},on:function(e,t,n){e.addEventListener(t,n,!1)},off:function(e,t,n){e.removeEventListener(t,n,!1)},each:function(e,t,n){var r,i;if("forEach"in e)e.forEach(t,n);else if(void 0!==e.length){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return},inStr:function(e,t){return e.indexOf(t)>-1},inArray:function(e,t){if(e.indexOf){var n=e.indexOf(t);return-1!==n&&n}for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return!1},toArray:function(e){return Array.prototype.slice.call(e,0)},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){var t=[],n=[],r=[],i=[],o=Math.min,s=Math.max;return 1===e.length?{pageX:e[0].pageX,pageY:e[0].pageY,clientX:e[0].clientX,clientY:e[0].clientY}:(y.each(e,function(e){t.push(e.pageX),n.push(e.pageY),r.push(e.clientX),i.push(e.clientY)}),{pageX:(o.apply(Math,t)+s.apply(Math,t))/2,pageY:(o.apply(Math,n)+s.apply(Math,n))/2,clientX:(o.apply(Math,r)+s.apply(Math,r))/2,clientY:(o.apply(Math,i)+s.apply(Math,i))/2})},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){return 180*Math.atan2(t.clientY-e.clientY,t.clientX-e.clientX)/Math.PI},getDirection:function(e,t){return Math.abs(e.clientX-t.clientX)>=Math.abs(e.clientY-t.clientY)?e.clientX-t.clientX>0?s:l:e.clientY-t.clientY>0?a:o},getDistance:function(e,t){var n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==a||e==o},setPrefixedCss:function(e,t,n,r){var i=["","Webkit","Moz","O","ms"];t=y.toCamelCase(t);for(var o=0;o<i.length;o++){var s=t;if(i[o]&&(s=i[o]+s.slice(0,1).toUpperCase()+s.slice(1)),s in e.style){e.style[s]=(null==r||r)&&n||"";break}}},toggleBehavior:function(e,t,n){if(t&&e&&e.style){y.each(t,function(t,r){y.setPrefixedCss(e,r,t,n)});var r=n&&function(){return!1};"none"==t.userSelect&&(e.onselectstart=r),"none"==t.userDrag&&(e.ondragstart=r)}},toCamelCase:function(e){return e.replace(/[_-]([a-z])/g,function(e){return e[1].toUpperCase()})}};(r.Instance=function(e,t){var n=this;r.READY||(w.determineEventTypes(),y.each(r.gestures,function(e){x.register(e)}),w.onTouch(r.DOCUMENT,p,x.detect),w.onTouch(r.DOCUMENT,f,x.detect),r.READY=!0),this.element=e,this.enabled=!0,y.each(t,function(e,n){delete t[n],t[y.toCamelCase(n)]=e}),this.options=y.extend(y.extend({},r.defaults),t||{}),this.options.behavior&&y.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=w.onTouch(e,d,function(e){n.enabled&&e.eventType==d?x.startDetect(n,e):e.eventType==g&&x.detect(e)}),this.eventHandlers=[]}).prototype={on:function(e,t){var n=this;return w.on(n.element,e,t,function(e){n.eventHandlers.push({gesture:e,handler:t})}),n},off:function(e,t){var n=this;return w.off(n.element,e,t,function(e){var r=y.inArray({gesture:e,handler:t});!1!==r&&n.eventHandlers.splice(r,1)}),n},trigger:function(e,t){t||(t={});var n=r.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var i=this.element;return y.hasParent(t.target,i)&&(i=t.target),i.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this},dispose:function(){var e,t;for(y.toggleBehavior(this.element,this.options.behavior,!1),e=-1;t=this.eventHandlers[++e];)y.off(this.element,t.gesture,t.handler);return this.eventHandlers=[],w.off(this.element,i[d],this.eventStartHandler),null}};var _,v,b,w=r.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(e,t,n,r){var i=t.split(" ");y.each(i,function(t){y.on(e,t,n),r&&r(t)})},off:function(e,t,n,r){var i=t.split(" ");y.each(i,function(t){y.off(e,t,n),r&&r(t)})},onTouch:function(e,t,n){var o=this,s=function(i){var s,a=i.type.toLowerCase(),l=r.HAS_POINTEREVENTS,c=y.inStr(a,"mouse");c&&o.preventMouseEvents||(c&&t==d&&0===i.button?(o.preventMouseEvents=!1,o.shouldDetect=!0):l&&t==d?o.shouldDetect=1===i.buttons||C.matchType(u,i):c||t!=d||(o.preventMouseEvents=!0,o.shouldDetect=!0),l&&t!=f&&C.updatePointer(t,i),o.shouldDetect&&(s=o.doDetect.call(o,i,t,e,n)),s==f&&(o.preventMouseEvents=!1,o.shouldDetect=!1,C.reset()),l&&t==f&&C.updatePointer(t,i))};return this.on(e,i[t],s),s},doDetect:function(e,t,n,r){var i=this.getTouchList(e,t),o=t,s=i.trigger,a=i.length;t==d?s=g:t==f&&(s=m,a=i.length-(e.changedTouches?e.changedTouches.length:1)),a>0&&this.started&&(o=p),this.started=!0;var l=this.collectEventData(n,o,i,e);return t!=f&&r.call(x,l),s&&(l.changedLength=a,l.eventType=s,r.call(x,l),l.eventType=o,delete l.changedLength),o==f&&(r.call(x,l),this.started=!1),o},determineEventTypes:function(){var e;return i[d]=(e=r.HAS_POINTEREVENTS?t.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:r.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"])[0],i[p]=e[1],i[f]=e[2],i},getTouchList:function(e,t){if(r.HAS_POINTEREVENTS)return C.getTouchList();if(e.touches){if(t==p)return e.touches;var n=[],i=[].concat(y.toArray(e.touches),y.toArray(e.changedTouches)),o=[];return y.each(i,function(e){!1===y.inArray(n,e.identifier)&&o.push(e),n.push(e.identifier)}),o}return e.identifier=1,[e]},collectEventData:function(e,t,n,r){var i=u;return y.inStr(r.type,"mouse")||C.matchType(c,r)?i=c:C.matchType(h,r)&&(i=h),{center:y.getCenter(n),timeStamp:Date.now(),target:r.target,touches:n,eventType:t,pointerType:i,srcEvent:r,preventDefault:function(){var e=this.srcEvent;e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return x.stopDetect()}}}},C=r.PointerEvent={pointers:{},getTouchList:function(){var e=[];return y.each(this.pointers,function(t){e.push(t)}),e},updatePointer:function(e,t){e==f||e!=f&&1!==t.buttons?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t)},matchType:function(e,t){if(!t.pointerType)return!1;var n=t.pointerType,r={};return r[c]=n===(t.MSPOINTER_TYPE_MOUSE||c),r[u]=n===(t.MSPOINTER_TYPE_TOUCH||u),r[h]=n===(t.MSPOINTER_TYPE_PEN||h),r[e]},reset:function(){this.pointers={}}},x=r.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:y.extend({},t),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);var t=this.current.inst,n=t.options;return y.each(this.gestures,function(r){!this.stopped&&t.enabled&&n[r.name]&&r.handler.call(r,e,t)},this),this.current&&(this.current.lastEvent=e),e.eventType==f&&this.stopDetect(),e}},stopDetect:function(){this.previous=y.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(e,t,n,i,o){var s=this.current,a=!1,l=s.lastCalcEvent,c=s.lastCalcData;l&&e.timeStamp-l.timeStamp>r.CALCULATE_INTERVAL&&(t=l.center,n=e.timeStamp-l.timeStamp,i=e.center.clientX-l.center.clientX,o=e.center.clientY-l.center.clientY,a=!0),e.eventType!=g&&e.eventType!=m||(s.futureCalcEvent=e),s.lastCalcEvent&&!a||(c.velocity=y.getVelocity(n,i,o),c.angle=y.getAngle(t,e.center),c.direction=y.getDirection(t,e.center),s.lastCalcEvent=s.futureCalcEvent||e,s.futureCalcEvent=e),e.velocityX=c.velocity.x,e.velocityY=c.velocity.y,e.interimAngle=c.angle,e.interimDirection=c.direction},extendEventData:function(e){var t=this.current,n=t.startEvent,r=t.lastEvent||n;e.eventType!=g&&e.eventType!=m||(n.touches=[],y.each(e.touches,function(e){n.touches.push({clientX:e.clientX,clientY:e.clientY})}));var i=e.timeStamp-n.timeStamp,o=e.center.clientX-n.center.clientX,s=e.center.clientY-n.center.clientY;return this.getCalculatedData(e,r.center,i,o,s),y.extend(e,{startEvent:n,deltaTime:i,deltaX:o,deltaY:s,distance:y.getDistance(n.center,e.center),angle:y.getAngle(n.center,e.center),direction:y.getDirection(n.center,e.center),scale:y.getScale(n.touches,e.touches),rotation:y.getRotation(n.touches,e.touches)}),e},register:function(e){var t=e.defaults||{};return void 0===t[e.name]&&(t[e.name]=!0),y.extend(r.defaults,t,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}};_=!1,r.gestures.Drag={name:"drag",index:50,handler:function(e,t){var n=x.current;if(!(t.options.dragMaxTouches>0&&e.touches.length>t.options.dragMaxTouches))switch(e.eventType){case d:_=!1;break;case p:if(e.distance<t.options.dragMinDistance&&"drag"!=n.name)return;var r=n.startEvent.center;if("drag"!=n.name&&(n.name="drag",t.options.dragDistanceCorrection&&e.distance>0)){var i=Math.abs(t.options.dragMinDistance/e.distance);r.pageX+=e.deltaX*i,r.pageY+=e.deltaY*i,r.clientX+=e.deltaX*i,r.clientY+=e.deltaY*i,e=x.extendEventData(e)}(n.lastEvent.dragLockToAxis||t.options.dragLockToAxis&&t.options.dragLockMinDistance<=e.distance)&&(e.dragLockToAxis=!0);var c=n.lastEvent.direction;e.dragLockToAxis&&c!==e.direction&&(e.direction=y.isVertical(c)?e.deltaY<0?a:o:e.deltaX<0?s:l),_||(t.trigger("dragstart",e),_=!0),t.trigger("drag",e),t.trigger("drag"+e.direction,e);var u=y.isVertical(e.direction);(t.options.dragBlockVertical&&u||t.options.dragBlockHorizontal&&!u)&&e.preventDefault();break;case m:_&&e.changedLength<=t.options.dragMaxTouches&&(t.trigger("dragend",e),_=!1);break;case f:_=!1}},defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}},r.gestures.Gesture={name:"gesture",index:1337,handler:function(e,t){t.trigger(this.name,e)}},r.gestures.Hold={name:"hold",index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:function(e,t){var n=t.options,r=x.current;switch(e.eventType){case d:clearTimeout(v),r.name="hold",v=setTimeout(function(){r&&"hold"==r.name&&t.trigger("hold",e)},n.holdTimeout);break;case p:e.distance>n.holdThreshold&&clearTimeout(v);break;case m:clearTimeout(v)}}},r.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==m&&t.trigger(this.name,e)}},r.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(e,t){if(e.eventType==m){var n=e.touches.length,r=t.options;if(n<r.swipeMinTouches||n>r.swipeMaxTouches)return;(e.velocityX>r.swipeVelocityX||e.velocityY>r.swipeVelocityY)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},b=!1,r.gestures.Tap={name:"tap",index:100,handler:function(e,t){var n,r,i,o,s=t.options,a=x.current,l=x.previous;switch(e.eventType){case d:b=!1;break;case p:b=b||e.distance>s.tapMaxDistance;break;case f:!y.inStr(e.srcEvent.type,"cancel")&&e.deltaTime<s.tapMaxTime&&!b&&(n=l&&l.lastEvent&&(o=e,c(i=l.lastEvent)&&c(o)?c(o)-c(i):o.timeStamp-i.timeStamp),r=!1,l&&"tap"==l.name&&n&&n<s.doubleTapInterval&&e.distance<s.doubleTapDistance&&(t.trigger("doubletap",e),r=!0),r&&!s.tapAlways||(a.name="tap",t.trigger(a.name,e)))}function c(e){return e.srcEvent&&e.srcEvent.timeStamp?e.srcEvent.timeStamp:null}},defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}},r.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(e,t){t.options.preventMouse&&e.pointerType==c?e.stopDetect():(t.options.preventDefault&&e.preventDefault(),e.eventType==g&&t.trigger("touch",e))}},function(e){var t=!1;r.gestures.Transform={name:e,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:function(n,r){switch(n.eventType){case d:t=!1;break;case p:if(n.touches.length<2)return;var i=Math.abs(1-n.scale),o=Math.abs(n.rotation);if(i<r.options.transformMinScale&&o<r.options.transformMinRotation)return;x.current.name=e,t||(r.trigger(e+"start",n),t=!0),r.trigger(e,n),o>r.options.transformMinRotation&&r.trigger("rotate",n),i>r.options.transformMinScale&&(r.trigger("pinch",n),r.trigger("pinch"+(n.scale<1?"in":"out"),n));break;case m:t&&n.changedLength<2&&(r.trigger(e+"end",n),t=!1)}}}}("transform"),t.Hammer=r,e.exports&&(e.exports=r)}(window)},woRb:function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(2)),r(n(3)),r(n(1)),r(n(4))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eq=function e(t,n){var r=0;if(t===n)return!0;if("function"==typeof t.equals)return t.equals(n);if(t.length>0&&t.length===n.length){for(;r<t.length;r+=1)if(!e(t[r],n[r]))return!1;return!0}return!1}},function(e,t,n){"use strict";function r(e){return null!=e}Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(1);!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(i=t.EitherType||(t.EitherType={})),t.either=function(e,t){if(r(e)&&r(t))throw new TypeError("Cannot construct an Either with both a left and a right");if(!r(e)&&!r(t))throw new TypeError("Cannot construct an Either with neither a left nor a right");return r(e)&&!r(t)?s.left(e):!r(e)&&r(t)?s.right(t):void 0};var s=function(){function e(e,t,n){this.type=e,this.l=t,this.r=n,this.of=this.unit,this.chain=this.bind,this.lift=this.fmap,this.map=this.fmap}return e.left=function(t){return new e(i.Left,t)},e.right=function(t){return new e(i.Right,null,t)},e.prototype.unit=function(t){return e.right(t)},e.prototype.bind=function(t){return this.type===i.Right?t(this.r):e.left(this.l)},e.prototype.fmap=function(e){var t=this;return this.bind(function(n){return t.unit(e(n))})},e.prototype.caseOf=function(e){return this.type===i.Right?e.right(this.r):e.left(this.l)},e.prototype.equals=function(e){return e.type===this.type&&(this.type===i.Left&&o.eq(e.l,this.l)||this.type===i.Right&&o.eq(e.r,this.r))},e.prototype.do=function(e){void 0===e&&(e={});var t=Object.assign({left:function(e){},right:function(e){}},e);return this.caseOf(t),this},e}();t.Either=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1);!function(e){e[e.Nothing=0]="Nothing",e[e.Just=1]="Just"}(r=t.MaybeType||(t.MaybeType={})),t.maybe=function(e){return o.maybe(e)};var o=function(){function e(e,t){this.type=e,this.value=t,this.of=this.unit,this.chain=this.bind,this.lift=this.fmap,this.map=this.fmap}return e.sequence=function(t){if(Object.keys(t).filter(function(e){return t[e].type===r.Nothing}).length)return e.nothing();var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i].value);return e.just(n)},e.maybe=function(t){return null==t?new e(r.Nothing):new e(r.Just,t)},e.just=function(t){if(null==t)throw new TypeError("Cannot Maybe.just(null)");return new e(r.Just,t)},e.nothing=function(){return new e(r.Nothing)},e.isJust=function(e){return e.type===r.Just},e.isNothing=function(e){return e.type===r.Nothing},e.prototype.unit=function(t){return e.maybe(t)},e.prototype.bind=function(t){return this.type===r.Just?t(this.value):e.nothing()},e.prototype.fmap=function(e){var t=this;return this.bind(function(n){return t.unit(e(n))})},e.prototype.caseOf=function(e){return this.type===r.Just?e.just(this.value):e.nothing()},e.prototype.defaulting=function(t){return e.just(this.valueOr(t))},e.prototype.equals=function(e){return e.type===this.type&&(this.type===r.Nothing||i.eq(e.value,this.value))},e.prototype.valueOr=function(e){return this.valueOrCompute(function(){return e})},e.prototype.valueOrCompute=function(e){return this.type===r.Just?this.value:e()},e.prototype.valueOrThrow=function(e){if(this.type===r.Just)return this.value;throw e||new Error("No value is available.")},e.prototype.do=function(e){void 0===e&&(e={});var t=Object.assign({just:function(e){},nothing:function(){}},e);return this.caseOf(t),this},e}();o.all=function(e){return o.sequence(e)},t.Maybe=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writer=function(e,t){return n.writer(e,t)};var n=function(){function e(e,t){this.story=e,this.value=t,this.of=this.unit,this.chain=this.bind,this.lift=this.fmap,this.map=this.fmap}return e.writer=function(t,n){return new e(t,n)},e.tell=function(t){return new e([t],0)},e.prototype.unit=function(t){return new e([],t)},e.prototype.bind=function(t){var n=t(this.value);return new e(this.story.concat(n.story),n.value)},e.prototype.fmap=function(e){var t=this;return this.bind(function(n){return t.unit(e(n))})},e.prototype.caseOf=function(e){return e.writer(this.story,this.value)},e.prototype.equals=function(e){var t,n=!0;for(t=0;t<this.story.length;t+=1)n=n&&this.story[t]===e.story[t];return n&&this.value===e.value},e}();t.Writer=n}])},xutz:function(e,t,n){"use strict";(function(e){var r=n("XqMk"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.a.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();t.a=a}).call(this,n("3UD+")(e))},z6aY:function(e,t){var n=/[^\\];|^;/,r=/[^\\],|^,/;function i(e){return e.match(n)?o(e=e.replace(/\\,/g,","),";"):e.match(r)?o(e=e.replace(/\\;/g,";"),","):e.replace(/\\,/g,",").replace(/\\;/g,";")}function o(e,t){var n=new RegExp(t),r=new RegExp("\\\\"+t,"g");return(e=e.replace(r,"\u03a9\u03a9\u03a9")).match(n)?(e=e.split(t)).map(function(e){return e.replace(/\u03a9\u03a9\u03a9/g,t)}):e.replace(/\u03a9\u03a9\u03a9/g,t)}var s=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),a=["nickname","related","categories","pid"],l=["fn"];e.exports={parse:function(e){for(var t,n,r,o,s,a={},l=e.split(/\r\n|\r|\n/),c=l.length,u=0;u<c;u++)if(""!==l[u]&&"BEGIN:VCARD"!==l[u].toUpperCase()&&"END:VCARD"!==l[u].toUpperCase()){var h=l[u],d=function(e){return e+1<c&&(" "===l[e+1][0]||"\t"===l[e+1][0])};if(d(u))for(;d(u);)h+=l[u+1].trim(),u++;if(n=(t=h.split(":")).shift(),r=t.join(":"),s=!1,o={},n.match(/;/)){var p=(n=n.replace(/\\;/g,"\u03a9\u03a9\u03a9").replace(/\\,/,",")).split(";").map(function(e){return e.replace(/\u03a9\u03a9\u03a9/g,";")});n=p.shift(),p.forEach(function(e){var t=e.split("=");t[0]=t[0].toLowerCase(),0!==t[0].length&&(o[t[0]]?o[t[0]].push(t[1]):o[t[0]]=[t[1]])})}if(r=i(r=r.replace(/\\n/g,"\n")),n.match(/\./)){var f=n.split(".");n=f[1],s=f[0]}var m={value:r};Object.keys(o).length&&(m.meta=o),s&&(m.namespace=s),0!==n.indexOf("X-")&&(n=n.toLowerCase()),void 0===a[n]?a[n]=[m]:a[n].push(m)}return a},generate:function(e,t){var n=["BEGIN:VCARD"],r="";t&&!e.version&&(e.version=[{value:"3.0"}]),t&&!e.uid&&(e.uid=[{value:s()}]);var i=function(e){return void 0===e?"":e.replace(/\n/g,"\\n").replace(/;/g,"\\;").replace(/,/g,"\\,")};return Object.keys(e).forEach(function(t){e[t]&&"function"==typeof e[t].forEach&&e[t].forEach(function(e){if(void 0!==e.value&&(""!==e.value||-1!==l.indexOf(t))){if(e.value instanceof Array){for(var o=!0,s=0;s<e.value.length;s++)if(void 0!==e.value[s]&&""!==e.value[s]){o=!1;break}if(o)return}if(r="",e.namespace&&(r+=e.namespace+"."),r+=0===t.indexOf("X-")?t:t.toUpperCase(),"object"==typeof e.meta&&Object.keys(e.meta).forEach(function(t){"function"==typeof e.meta[t].forEach&&e.meta[t].forEach(function(e){var n;t.length>0&&("TYPE"===t.toUpperCase()?r+=";"+i(t.toUpperCase())+"="+(void 0===(n=e)?"":n.replace(/\n/g,"\\n").replace(/;/g,"\\;")):r+=";"+i(t.toUpperCase())+"="+i(e))})}),r+=":","string"==typeof e.value)r+=i(e.value);else{var c=-1!==a.indexOf(t)?",":";";r+=e.value.map(function(e){return i(e)}).join(c)}if(r.length>75){var u=r.substr(0,75),h=r.substr(75).match(/.{1,74}/g);n.push(u),h.forEach(function(e){n.push(" "+e)})}else n.push(r)}})}),n.push("END:VCARD"),n.join("\r\n")}}},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function s(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete(){}},l=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function c(e){return null!==e&&"object"==typeof e}const u=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(r(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){t=a instanceof u?d(a.errors):[a]}}if(l(s)){let e=-1,n=s.length;for(;++e<n;){const n=s[e];if(c(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof u?t=t.concat(d(a.errors)):t.push(a)}}}if(t)throw new u(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var t;return e.EMPTY=((t=new e).closed=!0,t),e})();function d(e){return e.reduce((e,t)=>e.concat(t instanceof u?t.errors:t),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,n)}}[p](){return this}static create(e,t,n){const r=new f(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends f{constructor(e,t,n,i){let o;super(),this._parentSubscriber=e;let s=this;r(t)?o=t:t&&(o=t.next,n=t.error,i=t.complete,t!==a&&(s=Object.create(t),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(e){return e}let _=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof f)return e;if(e[p])return e[p]()}return e||t||n?new f(e,t,n):new f(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof f?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=v(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[g](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=v(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function v(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const b=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class w extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class C extends f{constructor(e){super(e),this.destination=e}}let x=(()=>{class e extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new C(this)}lift(e){const t=new E(this,this);return t.operator=e,t}next(e){if(this.closed)throw new b;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new b;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new b;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new b;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new w(this,e))}asObservable(){const e=new _;return e.source=this,e}}return e.create=(e,t)=>new E(e,t),e})();class E extends x{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}function S(e){return e&&"function"==typeof e.schedule}function P(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new T(e,t))}}class T{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new I(e,this.project,this.thisArg))}}class I extends f{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const O=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function k(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const R=k(),A=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function M(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const D=e=>{if(e&&"function"==typeof e[g])return r=e,e=>{const t=r[g]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(A(e))return O(e);if(M(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,s),e);if(e&&"function"==typeof e[R])return t=e,e=>{const n=t[R]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=c(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,r};function F(e,t){return new _(n=>{const r=new h;let i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function L(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[g]}(e))return function(e,t){return new _(n=>{const r=new h;return r.add(t.schedule(()=>{const i=e[g]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(M(e))return function(e,t){return new _(n=>{const r=new h;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(A(e))return F(e,t);if(function(e){return e&&"function"==typeof e[R]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new _(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[R](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof _?e:new _(D(e))}class B extends f{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class N extends f{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function j(e,t){if(!t.closed)return e instanceof _?e.subscribe(t):D(e)(t)}function H(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(H((n,r)=>L(e(n,r)).pipe(P((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new z(e,n)))}class z{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new V(e,this.project,this.concurrent))}}class V extends N{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new B(this),n=this.destination;n.add(t);const r=j(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function U(e=Number.POSITIVE_INFINITY){return H(y,e)}function W(e,t){return t?F(e,t):new _(O(e))}function X(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return S(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof _?e[0]:U(t)(W(e,n))}function G(){return function(e){return e.lift(new q(e))}}class q{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new $(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class $ extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Y extends _{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new Q(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return G()(this)}}const K=(()=>{const e=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class Q extends C{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Z(){return new x}function J(){return e=>{return G()((t=Z,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,K);return r.source=e,r.subjectFactory=n,r})(e));var t}}function ee(e){for(let t in e)if(e[t]===ee)return t;throw Error("Could not find renamed property on target object.")}function te(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ne(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ne).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function re(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const ie=ee({__forward_ref__:ee});function oe(e){return e.__forward_ref__=oe,e.toString=function(){return ne(this())},e}function se(e){return ae(e)?e():e}function ae(e){return"function"==typeof e&&e.hasOwnProperty(ie)&&e.__forward_ref__===oe}class le extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function ce(e){return"string"==typeof e?e:null==e?"":String(e)}function ue(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ce(e)}function he(e,t){const n=t?` in ${t}`:"";throw new le("201",`No provider for ${ue(e)} found${n}`)}function de(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function pe(e){return{providers:e.providers||[],imports:e.imports||[]}}function fe(e){return me(e,ye)||me(e,ve)}function me(e,t){return e.hasOwnProperty(t)?e[t]:null}function ge(e){return e&&(e.hasOwnProperty(_e)||e.hasOwnProperty(be))?e[_e]:null}const ye=ee({"\u0275prov":ee}),_e=ee({"\u0275inj":ee}),ve=ee({ngInjectableDef:ee}),be=ee({ngInjectorDef:ee});var we=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let Ce;function xe(e){const t=Ce;return Ce=e,t}function Ee(e,t,n){const r=fe(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&we.Optional?null:void 0!==t?t:void he(ne(e),"Injector")}function Se(e){return{toString:e}.toString()}var Pe=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),Te=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const Ie="undefined"!=typeof globalThis&&globalThis,Oe="undefined"!=typeof window&&window,ke="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Re="undefined"!=typeof global&&global,Ae=Ie||Re||Oe||ke,Me={},De=[],Fe=ee({"\u0275cmp":ee}),Le=ee({"\u0275dir":ee}),Be=ee({"\u0275pipe":ee}),Ne=ee({"\u0275mod":ee}),je=ee({"\u0275loc":ee}),He=ee({"\u0275fac":ee}),ze=ee({__NG_ELEMENT_ID__:ee});let Ve=0;function Ue(e){return Se(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Pe.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||De,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Te.Emulated,id:"c",styles:e.styles||De,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,o=e.pipes;return n.id+=Ve++,n.inputs=$e(e.inputs,t),n.outputs=$e(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(We):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Xe):null,n})}function We(e){return Qe(e)||function(e){return e[Le]||null}(e)}function Xe(e){return function(e){return e[Be]||null}(e)}const Ge={};function qe(e){const t={type:e.type,bootstrap:e.bootstrap||De,declarations:e.declarations||De,imports:e.imports||De,exports:e.exports||De,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&Se(()=>{Ge[e.id]=e.type}),t}function $e(e,t){if(null==e)return Me;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const Ye=Ue;function Ke(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Qe(e){return e[Fe]||null}function Ze(e,t){const n=e[Ne]||null;if(!n&&!0===t)throw new Error(`Type ${ne(e)} does not have '\u0275mod' property.`);return n}function Je(e){return Array.isArray(e)&&"object"==typeof e[1]}function et(e){return Array.isArray(e)&&!0===e[1]}function tt(e){return 0!=(8&e.flags)}function nt(e){return 2==(2&e.flags)}function rt(e){return 1==(1&e.flags)}function it(e){return null!==e.template}function ot(e,t){return e.hasOwnProperty(He)?e[He]:null}class st{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function at(){return lt}function lt(e){return e.type.prototype.ngOnChanges&&(e.setInput=ut),ct}function ct(){const e=ht(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Me)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function ut(e,t,n,r){const i=ht(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:Me,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],l=s[a];o[a]=new st(l&&l.currentValue,t,s===Me),e[r]=t}function ht(e){return e.__ngSimpleChanges__||null}let dt;function pt(e){return!!e.listen}at.ngInherit=!0;const ft={createRenderer:(e,t)=>void 0!==dt?dt:"undefined"!=typeof document?document:void 0};function mt(e){for(;Array.isArray(e);)e=e[0];return e}function gt(e,t){return mt(t[e])}function yt(e,t){return mt(t[e.index])}function _t(e,t){return e.data[t]}function vt(e,t){return e[t]}function bt(e,t){const n=t[e];return Je(n)?n:n[0]}function wt(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Ct(e){return 4==(4&e[2])}function xt(e){return 128==(128&e[2])}function Et(e,t){return null==t?null:e[t]}function St(e){e[18]=0}function Pt(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Tt={lFrame:Qt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function It(){return Tt.bindingsEnabled}function Ot(){return Tt.lFrame.lView}function kt(){return Tt.lFrame.tView}function Rt(e){Tt.lFrame.contextLView=e}function At(){let e=Mt();for(;null!==e&&64===e.type;)e=e.parent;return e}function Mt(){return Tt.lFrame.currentTNode}function Dt(e,t){const n=Tt.lFrame;n.currentTNode=e,n.isParent=t}function Ft(){return Tt.lFrame.isParent}function Lt(){Tt.lFrame.isParent=!1}function Bt(){return Tt.isInCheckNoChangesMode}function Nt(e){Tt.isInCheckNoChangesMode=e}function jt(){const e=Tt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Ht(){return Tt.lFrame.bindingIndex}function zt(){return Tt.lFrame.bindingIndex++}function Vt(e){const t=Tt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Ut(e,t){const n=Tt.lFrame;n.bindingIndex=n.bindingRootIndex=e,Wt(t)}function Wt(e){Tt.lFrame.currentDirectiveIndex=e}function Xt(){return Tt.lFrame.currentQueryIndex}function Gt(e){Tt.lFrame.currentQueryIndex=e}function qt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function $t(e,t,n){if(n&we.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&we.Host||(r=qt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=Tt.lFrame=Kt();return r.currentTNode=t,r.lView=e,!0}function Yt(e){const t=Kt(),n=e[1];Tt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Kt(){const e=Tt.lFrame,t=null===e?null:e.child;return null===t?Qt(e):t}function Qt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Zt(){const e=Tt.lFrame;return Tt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Jt=Zt;function en(){const e=Zt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function tn(){return Tt.lFrame.selectedIndex}function nn(e){Tt.lFrame.selectedIndex=e}function rn(){const e=Tt.lFrame;return _t(e.tView,e.selectedIndex)}function on(){Tt.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function sn(){Tt.lFrame.currentNamespace=null}function an(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),o&&(e.viewHooks||(e.viewHooks=[])).push(-n,o),s&&((e.viewHooks||(e.viewHooks=[])).push(n,s),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,s)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function ln(e,t,n){hn(e,t,3,n)}function cn(e,t,n,r){(3&e[2])===n&&hn(e,t,n,r)}function un(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function hn(e,t,n,r){const i=null!=r?r:-1,o=t.length-1;let s=0;for(let a=void 0!==r?65535&e[18]:0;a<o;a++)if("number"==typeof t[a+1]){if(s=t[a],null!=r&&s>=r)break}else t[a]<0&&(e[18]+=65536),(s<i||-1==i)&&(dn(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function dn(e,t,n,r){const i=n[r]<0,o=n[r+1],s=e[i?-n[r]:n[r]];i?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,o.call(s)):o.call(s)}class pn{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function fn(e,t,n){const r=pt(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],l=n[i++];r?e.setAttribute(t,a,l,s):t.setAttributeNS(s,a,l)}else{const s=o,a=n[++i];gn(s)?r&&e.setProperty(t,s,a):r?e.setAttribute(t,s,a):t.setAttribute(s,a),i++}}return i}function mn(e){return 3===e||4===e||6===e}function gn(e){return 64===e.charCodeAt(0)}function yn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||_n(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function _n(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const n=e[o++];if("number"==typeof n){if(n===t){s=-1;break}if(n>t){s=o-1;break}}}for(;o<e.length;){const t=e[o];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function vn(e){return-1!==e}function bn(e){return 32767&e}function wn(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Cn=!0;function xn(e){const t=Cn;return Cn=e,t}let En=0;function Sn(e,t){const n=Tn(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Pn(r.data,e),Pn(t,null),Pn(r.blueprint,null));const i=In(e,t),o=e.injectorIndex;if(vn(i)){const e=bn(i),n=wn(i,t),r=n[1].data;for(let i=0;i<8;i++)t[o+i]=n[e+i]|r[e+i]}return t[o+8]=i,o}function Pn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Tn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function In(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function On(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ze)&&(r=n[ze]),null==r&&(r=n[ze]=En++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function kn(e,t,n){if(n&we.Optional)return e;he(t,"NodeInjector")}function Rn(e,t,n,r){if(n&we.Optional&&void 0===r&&(r=null),0==(n&(we.Self|we.Host))){const i=e[9],o=xe(void 0);try{return i?i.get(t,r,n&we.Optional):Ee(t,r,n&we.Optional)}finally{xe(o)}}return kn(r,t,n)}function An(e,t,n,r=we.Default,i){if(null!==e){const o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ze)?e[ze]:void 0;return"number"==typeof t?t>=0?255&t:Dn:t}(n);if("function"==typeof o){if(!$t(t,e,r))return r&we.Host?kn(i,n,r):Rn(t,n,r,i);try{const e=o();if(null!=e||r&we.Optional)return e;he(n)}finally{Jt()}}else if("number"==typeof o){let i=null,s=Tn(e,t),a=-1,l=r&we.Host?t[16][6]:null;for((-1===s||r&we.SkipSelf)&&(a=-1===s?In(e,t):t[s+8],-1!==a&&jn(r,!1)?(i=t[1],s=bn(a),t=wn(a,t)):s=-1);-1!==s;){const e=t[1];if(Nn(o,s,e.data)){const e=Fn(s,t,n,i,r,l);if(e!==Mn)return e}a=t[s+8],-1!==a&&jn(r,t[1].data[s+8]===l)&&Nn(o,s,t)?(i=e,s=bn(a),t=wn(a,t)):s=-1}}}return Rn(t,n,r,i)}const Mn={};function Dn(){return new Hn(At(),Ot())}function Fn(e,t,n,r,i,o){const s=t[1],a=s.data[e+8],l=Ln(a,s,n,null==r?nt(a)&&Cn:r!=s&&0!=(3&a.type),i&we.Host&&o===a);return null!==l?Bn(t,s,l,a):Mn}function Ln(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,l=e.directiveStart,c=o>>20,u=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<u;h++){const e=s[h];if(h<l&&n===e||h>=l&&e.type===n)return h}if(i){const e=s[l];if(e&&it(e)&&e.type===n)return l}return null}function Bn(e,t,n,r){let i=e[n];const o=t.data;if(i instanceof pn){const s=i;s.resolving&&function(e,t){throw new le("200",`Circular dependency in DI detected for ${e}`)}(ue(o[n]));const a=xn(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?xe(s.injectImpl):null;$t(e,r,we.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const r=lt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&xe(l),xn(a),s.resolving=!1,Jt()}}return i}function Nn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function jn(e,t){return!(e&we.Self||e&we.Host&&t)}class Hn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return An(this._tNode,this._lView,e,void 0,t)}}function zn(e){return Se(()=>{const t=e.prototype.constructor,n=t[He]||Vn(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[He]||Vn(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Vn(e){return ae(e)?()=>{const t=Vn(se(e));return t&&t()}:ot(e)}function Un(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(mn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(At(),e)}function Wn(e,t,n){return Se(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Xn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=de({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Gn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Gn(r,t)):t!==e&&t.push(r)}return t}function qn(e,t){e.forEach(e=>Array.isArray(e)?qn(e,t):t(e))}function $n(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Yn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Kn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function Qn(e,t,n){let r=Jn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Zn(e,t){const n=Jn(e,t);if(n>=0)return e[1|n]}function Jn(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=e[n<<1];if(t===o)return n<<1;o>t?i=n:r=n+1}return~(i<<1)}(e,t)}const er={},tr=/\n/gm,nr=ee({provide:String,useValue:ee});let rr;function ir(e){const t=rr;return rr=e,t}function or(e,t=we.Default){if(void 0===rr)throw new Error("inject() must be called from an injection context");return null===rr?Ee(e,void 0,t):rr.get(e,t&we.Optional?null:void 0,t)}function sr(e,t=we.Default){return(Ce||or)(se(e),t)}const ar=sr;function lr(e){const t=[];for(let n=0;n<e.length;n++){const r=se(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=we.Default;for(let t=0;t<r.length;t++){const i=r[t],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?e=i.token:n|=o:e=i}t.push(sr(e,n))}else t.push(sr(r))}return t}function cr(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const ur=cr(Wn("Inject",e=>({token:e})),-1),hr=cr(Wn("Optional"),8),dr=cr(Wn("SkipSelf"),4);let pr;function fr(e){var t;return(null===(t=function(){if(void 0===pr&&(pr=null,Ae.trustedTypes))try{pr=Ae.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return pr}())||void 0===t?void 0:t.createHTML(e))||e}class mr{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gr extends mr{getTypeName(){return"HTML"}}class yr extends mr{getTypeName(){return"Style"}}class _r extends mr{getTypeName(){return"Script"}}class vr extends mr{getTypeName(){return"URL"}}class br extends mr{getTypeName(){return"ResourceURL"}}function wr(e){return e instanceof mr?e.changingThisBreaksApplicationSecurity:e}function Cr(e,t){const n=xr(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function xr(e){return e instanceof mr&&e.getTypeName()||null}class Er{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(fr(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Sr{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=fr(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=fr(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Pr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Tr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ir(e){return(e=String(e)).match(Pr)||e.match(Tr)?e:"unsafe:"+e}function Or(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function kr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Rr=Or("area,br,col,hr,img,wbr"),Ar=Or("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Mr=Or("rp,rt"),Dr=kr(Mr,Ar),Fr=kr(Rr,kr(Ar,Or("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),kr(Mr,Or("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dr),Lr=Or("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Br=Or("srcset"),Nr=kr(Lr,Br,Or("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Or("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jr=Or("script,style,template");class Hr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Fr.hasOwnProperty(t))return this.sanitizedSomething=!0,!jr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,o=t.toLowerCase();if(!Nr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=e.value;Lr[o]&&(s=Ir(s)),Br[o]&&(r=s,s=(r=String(r)).split(",").map(e=>Ir(e.trim())).join(", ")),this.buf.push(" ",t,'="',Ur(s),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Fr.hasOwnProperty(t)&&!Rr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Ur(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const zr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vr=/([^\#-~ |!])/g;function Ur(e){return e.replace(/&/g,"&amp;").replace(zr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Vr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Wr;function Xr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Gr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function qr(e){const t=function(){const e=Ot();return e&&e[12]}();return t?t.sanitize(Gr.URL,e)||"":Cr(e,"URL")?wr(e):Ir(ce(e))}function $r(e){return e.ngDebugContext}function Yr(e){return e.ngOriginalError}function Kr(e,...t){e.error(...t)}class Qr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Kr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?$r(e)?$r(e):this._findContext(Yr(e)):null}_findOriginalError(e){let t=Yr(e);for(;t&&Yr(t);)t=Yr(t);return t}}function Zr(e,t){e.__ngContext__=t}const Jr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ae))();function ei(e){return{name:"document",target:e.ownerDocument}}function ti(e){return{name:"body",target:e.ownerDocument.body}}function ni(e){return e instanceof Function?e():e}var ri=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function ii(e,t){return(void 0)(e,t)}function oi(e){const t=e[3];return et(t)?t[3]:t}function si(e){return li(e[13])}function ai(e){return li(e[4])}function li(e){for(;null!==e&&!et(e);)e=e[4];return e}function ci(e,t,n,r,i){if(null!=r){let o,s=!1;et(r)?o=r:Je(r)&&(s=!0,r=r[0]);const a=mt(r);0===e&&null!==n?null==i?yi(t,n,a):gi(t,n,a,i||null,!0):1===e&&null!==n?gi(t,n,a,i||null,!0):2===e?function(e,t,n){const r=vi(e,t);r&&function(e,t,n,r){pt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function(e,t,n,r,i){const o=n[7];o!==mt(n)&&ci(t,e,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];Ti(i[1],i,e,t,r,o)}}(t,e,o,n,i)}}function ui(e,t,n){return pt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function hi(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Pt(i,-1)),n.splice(r,1)}function di(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const o=r[17];null!==o&&o!==e&&hi(o,r),t>0&&(e[n-1][4]=r[4]);const s=Yn(e,10+t);Ti(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function pi(e,t){if(!(256&t[2])){const n=t[11];pt(n)&&n.destroyNode&&Ti(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return fi(e[1],e);for(;t;){let n=null;if(Je(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)Je(t)&&fi(t[1],t),t=t[3];null===t&&(t=e),Je(t)&&fi(t[1],t),n=t&&t[4]}t=n}}(t)}}function fi(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof pn)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2)t[n+1].call(e[t[n]]);else t.call(e)}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const e=n[o+1],s="function"==typeof e?e(t):mt(t[e]),a=r[i=n[o+2]],l=n[o+3];"boolean"==typeof l?s.removeEventListener(n[o],a,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),o+=2}else{const e=r[i=n[o+1]];n[o].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&pt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&et(t[3])){n!==t[3]&&hi(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function mi(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===Te.None||t===Te.Emulated)return null}return yt(r,n)}(e,t.parent,n)}function gi(e,t,n,r,i){pt(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function yi(e,t,n){pt(e)?e.appendChild(t,n):t.appendChild(n)}function _i(e,t,n,r,i){null!==r?gi(e,t,n,r,i):yi(e,t,n)}function vi(e,t){return pt(e)?e.parentNode(t):t.parentNode}function bi(e,t,n){return wi(e,t,n)}let wi=function(e,t,n){return 40&e.type?yt(e,n):null};function Ci(e,t,n,r){const i=mi(e,r,t),o=t[11],s=bi(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)_i(o,i,n[a],s,!1);else _i(o,i,n,s,!1)}function xi(e,t){if(null!==t){const n=t.type;if(3&n)return yt(t,e);if(4&n)return Si(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return xi(e,n);{const n=e[t.index];return et(n)?Si(-1,n):mt(n)}}if(32&n)return ii(t,e)()||mt(e[t.index]);{const n=Ei(e,t);return null!==n?Array.isArray(n)?n[0]:xi(oi(e[16]),n):xi(e,t.next)}}return null}function Ei(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Si(e,t){const n=10+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return xi(e,r)}return t[7]}function Pi(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===t&&(a&&Zr(mt(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Pi(e,t,n.child,r,i,o,!1),ci(t,e,i,a,o);else if(32&l){const s=ii(n,r);let l;for(;l=s();)ci(t,e,i,l,o);ci(t,e,i,a,o)}else 16&l?Ii(e,t,r,n,i,o):ci(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Ti(e,t,n,r,i,o){Pi(n,r,e.firstChild,t,i,o,!1)}function Ii(e,t,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)ci(t,e,i,a[l],o);else Pi(e,t,a,s[3],i,o,!0)}function Oi(e,t,n){pt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ki(e,t,n){pt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Ri(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}function Ai(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==Ri(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Mi(e){return 4===e.type&&"ng-template"!==e.value}function Di(e,t,n){return t===(4!==e.type||n?e.value:"ng-template")}function Fi(e,t,n){let r=4;const i=e.attrs||[],o=function(e){for(let t=0;t<e.length;t++)if(mn(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!Di(e,l,n)||""===l&&1===t.length){if(Li(r))return!1;s=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!Ai(e.attrs,c,n)){if(Li(r))return!1;s=!0}continue}const u=Bi(8&r?"class":l,i,Mi(e),n);if(-1===u){if(Li(r))return!1;s=!0;continue}if(""!==c){let e;e=u>o?"":i[u+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==Ri(t,c,0)||2&r&&c!==e){if(Li(r))return!1;s=!0}}}}else{if(!s&&!Li(r)&&!Li(l))return!1;if(s&&Li(l))continue;s=!1,r=l|1&r}}return Li(r)||s}function Li(e){return 0==(1&e)}function Bi(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ni(e,t,n=!1){for(let r=0;r<t.length;r++)if(Fi(e,t[r],n))return!0;return!1}function ji(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function Hi(e,t){return e?":not("+t.trim()+")":t}function zi(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const t=e[++n];i+="["+s+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Li(s)||(t+=Hi(o,i),i=""),r=s,o=o||!Li(r);n++}return""!==i&&(t+=Hi(o,i)),t}const Vi={};function Ui(e){Wi(kt(),Ot(),tn()+e,Bt())}function Wi(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&ln(t,r,n)}else{const r=e.preOrderHooks;null!==r&&cn(t,r,0,n)}nn(n)}function Xi(e,t){return e<<17|t<<2}function Gi(e){return e>>17&32767}function qi(e){return 2|e}function $i(e){return(131068&e)>>2}function Yi(e,t){return-131069&e|t<<2}function Ki(e){return 1|e}function Qi(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=e.data[o];Gt(i),n.contentQueries(2,t[o],o)}}}function Zi(e,t,n,r,i,o,s,a,l,c){const u=t.blueprint.slice();return u[0]=i,u[2]=140|r,St(u),u[3]=u[15]=e,u[8]=n,u[10]=s||e&&e[10],u[11]=a||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=o,u[16]=2==t.type?e[16]:u,u}function Ji(e,t,n,r,i){let o=e.data[t];if(null===o)o=function(e,t,n,r,i){const o=Mt(),s=Ft(),a=e.data[t]=function(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(e,t,n,r,i),Tt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const e=function(){const e=Tt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===e?-1:e.injectorIndex}return Dt(o,!0),o}function eo(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function to(e,t,n){Yt(t);try{const r=e.viewQuery;null!==r&&Ao(1,r,n);const i=e.template;null!==i&&io(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Qi(e,t),e.staticViewQueries&&Ao(2,e.viewQuery,n);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)To(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,en()}}function no(e,t,n,r){const i=t[2];if(256==(256&i))return;Yt(t);const o=Bt();try{St(t),Tt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&io(e,t,n,2,r);const s=3==(3&i);if(!o)if(s){const n=e.preOrderCheckHooks;null!==n&&ln(t,n,null)}else{const n=e.preOrderHooks;null!==n&&cn(t,n,0,null),un(t,0)}if(function(e){for(let t=si(e);null!==t;t=ai(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Pt(r,1),n[2]|=1024}}}(t),function(e){for(let t=si(e);null!==t;t=ai(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];xt(n)&&no(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Qi(e,t),!o)if(s){const n=e.contentCheckHooks;null!==n&&ln(t,n)}else{const n=e.contentHooks;null!==n&&cn(t,n,1),un(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)nn(~r);else{const i=r,o=n[++e],s=n[++e];Ut(o,i),s(2,t[i])}}}finally{nn(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)So(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&Ao(2,l,r),!o)if(s){const n=e.viewCheckHooks;null!==n&&ln(t,n)}else{const n=e.viewHooks;null!==n&&cn(t,n,2),un(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Pt(t[3],-1))}finally{en()}}function ro(e,t,n,r){const i=t[10],o=!Bt(),s=Ct(t);try{o&&!s&&i.begin&&i.begin(),s&&to(e,t,r),no(e,t,n,r)}finally{o&&!s&&i.end&&i.end()}}function io(e,t,n,r,i){const o=tn();try{nn(-1),2&r&&t.length>20&&Wi(e,t,20,Bt()),n(r,i)}finally{nn(o)}}function oo(e,t,n){if(tt(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function so(e,t,n){It()&&(function(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Sn(n,t),Zr(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const r=e.data[a],o=it(r);o&&wo(t,n,r);const l=Bn(t,e,a,n);Zr(l,t),null!==s&&Co(0,a-i,l,r,0,s),o&&(bt(n.index,t)[8]=l)}}(e,t,n,yt(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Tt.lFrame.currentDirectiveIndex;try{nn(o);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];Wt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||go(r,i)}}finally{nn(-1),Wt(s)}}(e,t,n))}function ao(e,t,n=yt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}function lo(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=co(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function co(e,t,n,r,i,o,s,a,l,c){const u=20+r,h=u+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Vi);return n}(u,h),p="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function uo(e,t,n,r){const i=Do(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Fo(e).push(r,i.length-1))}function ho(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function po(e,t,n,r,i,o,s,a){const l=yt(t,n);let c,u=t.inputs;var h;!a&&null!=u&&(c=u[r])?(Bo(e,n,c,r,i),nt(t)&&function(e,t){const n=bt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,t.value||"",r):i,pt(o)?o.setProperty(l,r,i):gn(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function fo(e,t,n,r){let i=!1;if(It()){const o=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Ni(n,s.selectors,!1)&&(i||(i=[]),On(Sn(n,t),e,s.type),it(s)?(yo(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){i=!0,vo(n,e.data.length,o.length);for(let e=0;e<o.length;e++){const t=o[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,l=eo(e,t,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=yn(n.mergedAttrs,c.hostAttrs),bo(e,n,t,l,c),_o(l,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,o=[];let s=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=r[l],n=e.inputs,c=null===i||Mi(t)?null:xo(n,i);o.push(c),s=ho(n,l,s),a=ho(e.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(t.flags|=16),s.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=s,t.outputs=a}(e,n)}s&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new le("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,s)}return n.mergedAttrs=yn(n.mergedAttrs,n.attrs),i}function mo(e,t,n,r,i,o){const s=o.hostBindings;if(s){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const o=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function go(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function yo(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function _o(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;it(t)&&(n[""]=e)}}function vo(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function bo(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=ot(i.type)),s=new pn(o,it(i),null);e.blueprint[r]=s,n[r]=s,mo(e,t,0,r,eo(e,n,i.hostVars,Vi),i)}function wo(e,t,n){const r=yt(t,e),i=lo(n),o=e[10],s=Io(e,Zi(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=s}function Co(e,t,n,r,i,o){const s=o[t];if(null!==s){const e=r.setInput;for(let t=0;t<s.length;){const i=s[t++],o=s[t++],a=s[t++];null!==e?r.setInput(n,a,i,o):n[o]=a}}}function xo(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Eo(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function So(e,t){const n=bt(t,e);if(xt(n)){const e=n[1];80&n[2]?no(e,n,e.template,n[8]):n[5]>0&&Po(n)}}function Po(e){for(let n=si(e);null!==n;n=ai(n))for(let e=10;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];no(e,t,e.template,t[8])}else t[5]>0&&Po(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=bt(t[n],e);xt(r)&&r[5]>0&&Po(r)}}function To(e,t){const n=bt(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),to(r,n,n[8])}function Io(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Oo(e){for(;e;){e[2]|=64;const t=oi(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function ko(e,t,n){const r=t[10];r.begin&&r.begin();try{no(e,t,e.template,n)}catch(i){throw Lo(t,i),i}finally{r.end&&r.end()}}function Ro(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=wt(n),i=r[1];ro(i,r,i.template,n)}}(e[8])}function Ao(e,t,n){Gt(0),t(e,n)}const Mo=(()=>Promise.resolve(null))();function Do(e){return e[7]||(e[7]=[])}function Fo(e){return e.cleanup||(e.cleanup=[])}function Lo(e,t){const n=e[9],r=n?n.get(Qr,null):null;r&&r.handleError(t)}function Bo(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=t[s],c=e.data[s];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function No(e,t,n){const r=gt(t,e);!function(e,t,n){pt(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function jo(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const e=t[s];"number"==typeof e?o=e:1==o?i=re(i,e):2==o&&(r=re(r,e+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const Ho=new Xn("INJECTOR",-1);class zo{get(e,t=er){if(t===er){const t=new Error(`NullInjectorError: No provider for ${ne(e)}!`);throw t.name="NullInjectorError",t}return t}}const Vo=new Xn("Set Injector scope."),Uo={},Wo={},Xo=[];let Go;function qo(){return void 0===Go&&(Go=new zo),Go}function $o(e,t=null,n=null,r){return new Yo(e,n,t||qo(),r)}class Yo{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&qn(t,n=>this.processProvider(n,e,t)),qn([e],e=>this.processInjectorType(e,[],i)),this.records.set(Ho,Zo(void 0,this));const o=this.records.get(Vo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:ne(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=er,n=we.Default){this.assertNotDestroyed();const r=ir(this);try{if(!(n&we.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Xn)&&fe(e);t=n&&this.injectableDefInScope(n)?Zo(Ko(e),Uo):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&we.Self?qo():this.parent).get(e,t=n&we.Optional&&t===er?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(ne(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=ne(t);if(Array.isArray(t))i=t.map(ne).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):ne(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(tr,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{ir(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(ne(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=se(e)))return!1;let r=ge(e);const i=null==r&&e.ngModule||void 0,o=void 0===i?e:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=ge(i)),null==r)return!1;if(null!=r.imports&&!s){let e;n.push(o);try{qn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];qn(r,e=>this.processProvider(e,n,r||Xo))}}this.injectorDefTypes.add(o);const a=ot(o)||(()=>new o);this.records.set(o,Zo(a,Uo));const l=r.providers;if(null!=l&&!s){const t=e;qn(l,e=>this.processProvider(e,t,l))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=es(e=se(e))?e:se(e&&e.provide);const i=function(e,t,n){return Jo(e)?Zo(void 0,e.useValue):Zo(Qo(e),Uo)}(e);if(es(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=Zo(void 0,Uo,!0),t.factory=()=>lr(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===Uo&&(t.value=Wo,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function Ko(e){const t=fe(e),n=null!==t?t.factory:ot(e);if(null!==n)return n;if(e instanceof Xn)throw new Error(`Token ${ne(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=Kn(t,"?");throw new Error(`Can't resolve all parameters for ${ne(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[ye]||e[ve]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Qo(e,t,n){let r;if(es(e)){const t=se(e);return ot(t)||Ko(t)}if(Jo(e))r=()=>se(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...lr(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>sr(se(e.useExisting));else{const t=se(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ot(t)||Ko(t);r=()=>new t(...lr(e.deps))}var i;return r}function Zo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Jo(e){return null!==e&&"object"==typeof e&&nr in e}function es(e){return"function"==typeof e}const ts=function(e,t,n){return function(e,t=null,n=null,r){const i=$o(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let ns=(()=>{class e{static create(e,t){return Array.isArray(e)?ts(e,t,""):ts(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=er,e.NULL=new zo,e.\u0275prov=de({token:e,providedIn:"any",factory:()=>sr(Ho)}),e.__NG_ELEMENT_ID__=-1,e})();function rs(e,t){an(wt(e)[1],At())}function is(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(it(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=os(e.inputs),t.declaredInputs=os(e.declaredInputs),t.outputs=os(e.outputs);const n=i.hostBindings;n&&ls(e,n);const o=i.viewQuery,s=i.contentQueries;if(o&&ss(e,o),s&&as(e,s),te(e.inputs,i.inputs),te(e.declaredInputs,i.declaredInputs),te(e.outputs,i.outputs),it(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===is&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=yn(i.hostAttrs,n=yn(n,i.hostAttrs))}}(r)}function os(e){return e===Me?{}:e===De?[]:e}function ss(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function as(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function ls(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}let cs=null;function us(){if(!cs){const e=Ae.Symbol;if(e&&e.iterator)cs=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(cs=n)}}}return cs}class hs{constructor(e){this.wrapped=e}static wrap(e){return new hs(e)}static unwrap(e){return hs.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof hs}}function ds(e){return!!ps(e)&&(Array.isArray(e)||!(e instanceof Map)&&us()in e)}function ps(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function fs(e,t,n){return e[t]=n}function ms(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function gs(e,t,n,r){const i=ms(e,t,n);return ms(e,t+1,r)||i}function ys(e,t,n,r){const i=Ot();return ms(i,zt(),t)&&(kt(),function(e,t,n,r,i,o){const s=yt(e,t);!function(e,t,n,r,i,o,s){if(null==o)pt(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==s?ce(o):s(o,r||"",i);pt(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],s,o,e.value,n,r,i)}(rn(),i,e,t,n,r)),ys}function _s(e,t,n,r){return ms(e,zt(),n)?t+ce(n)+r:Vi}function vs(e,t,n,r,i,o,s,a){const l=Ot(),c=kt(),u=e+20,h=c.firstCreatePass?function(e,t,n,r,i,o,s,a,l){const c=t.consts,u=Ji(t,e,4,s||null,Et(c,a));fo(t,n,u,Et(c,l)),an(t,u);const h=u.tViews=co(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,n,r,i,o,s):c.data[u];Dt(h,!1);const d=l[11].createComment("");Ci(c,l,d,h),Zr(d,l),Io(l,l[u]=Eo(d,l,d,h)),rt(h)&&so(c,l,h),null!=s&&ao(l,h,a)}function bs(e){return vt(Tt.lFrame.contextLView,20+e)}function ws(e,t=we.Default){const n=Ot();return null===n?sr(e,t):An(At(),n,se(e),t)}function Cs(e,t,n){const r=Ot();return ms(r,zt(),t)&&po(kt(),rn(),r,e,t,r[11],n,!1),Cs}function xs(e,t,n,r,i){const o=i?"class":"style";Bo(e,n,t.inputs[o],o,r)}function Es(e,t,n,r){const i=Ot(),o=kt(),s=20+e,a=i[11],l=i[s]=ui(a,t,Tt.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,n,r,i,o,s){const a=t.consts,l=Ji(t,e,2,i,Et(a,o));return fo(t,n,l,Et(a,s)),null!==l.attrs&&jo(l,l.attrs,!1),null!==l.mergedAttrs&&jo(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,o,i,0,t,n,r):o.data[s];Dt(c,!0);const u=c.mergedAttrs;null!==u&&fn(a,l,u);const h=c.classes;null!==h&&ki(a,l,h);const d=c.styles;null!==d&&Oi(a,l,d),64!=(64&c.flags)&&Ci(o,i,l,c),0===Tt.lFrame.elementDepthCount&&Zr(l,i),Tt.lFrame.elementDepthCount++,rt(c)&&(so(o,i,c),oo(o,c,i)),null!==r&&ao(i,c)}function Ss(){let e=At();Ft()?Lt():(e=e.parent,Dt(e,!1));const t=e;Tt.lFrame.elementDepthCount--;const n=kt();n.firstCreatePass&&(an(n,e),tt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&xs(n,t,Ot(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&xs(n,t,Ot(),t.stylesWithoutHost,!1)}function Ps(e,t,n,r){Es(e,t,n,r),Ss()}function Ts(e,t,n){const r=Ot(),i=kt(),o=e+20,s=i.firstCreatePass?function(e,t,n,r,i){const o=t.consts,s=Et(o,r),a=Ji(t,e,8,"ng-container",s);return null!==s&&jo(a,s,!0),fo(t,n,a,Et(o,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,i,r,t,n):i.data[o];Dt(s,!0);const a=r[o]=r[11].createComment("");Ci(i,r,a,s),Zr(a,r),rt(s)&&(so(i,r,s),oo(i,s,r)),null!=n&&ao(r,s)}function Is(){let e=At();const t=kt();Ft()?Lt():(e=e.parent,Dt(e,!1)),t.firstCreatePass&&(an(t,e),tt(e)&&t.queries.elementEnd(e))}function Os(e,t,n){Ts(e,t,n),Is()}function ks(){return Ot()}function Rs(e){return!!e&&"function"==typeof e.then}function As(e){return!!e&&"function"==typeof e.subscribe}const Ms=As;function Ds(e,t,n=!1,r){const i=Ot(),o=kt(),s=At();return function(e,t,n,r,i,o,s=!1,a){const l=rt(r),c=e.firstCreatePass&&Fo(e),u=Do(t);let h=!0;if(3&r.type){const d=yt(r,t),p=a?a(d):Me,f=p.target||d,m=u.length,g=a?e=>a(mt(e[r.index])).target:r.index;if(pt(n)){let s=null;if(!a&&l&&(s=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const e=i[o];if(e===n&&i[o+1]===r){const e=t[7],n=i[o+2];return e.length>n?e[n]:null}"string"==typeof e&&(o+=2)}return null}(e,t,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Ls(r,t,o,!1);const e=n.listen(p.name||f,i,o);u.push(o,e),c&&c.push(i,g,m,m+1)}}else o=Ls(r,t,o,!0),f.addEventListener(i,o,s),u.push(o),c&&c.push(i,g,m,s)}else o=Ls(r,t,o,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(o),s=u.length;u.push(o,e),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,e,t,n,r),Ds}function Fs(e,t,n){try{return!1!==t(n)}catch(r){return Lo(e,r),!1}}function Ls(e,t,n,r){return function i(o){if(o===Function)return n;const s=2&e.flags?bt(e.index,t):t;0==(32&t[2])&&Oo(s);let a=Fs(t,n,o),l=i.__ngNextListenerFn__;for(;l;)a=Fs(t,l,o)&&a,l=l.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Bs(e=1){return function(e){return(Tt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Tt.lFrame.contextLView))[8]}(e)}function Ns(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const o=t[i];if("*"!==o){if(null===r?Ni(e,o,!0):ji(r,o))return i}else n=i}return n}function js(e){const t=Ot()[16][6];if(!t.projection){const n=t.projection=Kn(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?Ns(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function Hs(e,t=0,n){const r=Ot(),i=kt(),o=Ji(i,20+e,16,null,n||null);null===o.projection&&(o.projection=t),Lt(),64!=(64&o.flags)&&function(e,t,n){Ii(t[11],0,t,n,mi(e,n,t),bi(n.parent||t[6],n,t))}(i,r,o)}function zs(e,t,n){return Vs(e,"",t,"",n),zs}function Vs(e,t,n,r,i){const o=Ot(),s=_s(o,t,n,r);return s!==Vi&&po(kt(),rn(),o,e,s,o[11],i,!1),Vs}const Us=[];function Ws(e,t,n,r,i){const o=e[n+1],s=null===t;let a=r?Gi(o):$i(o),l=!1;for(;0!==a&&(!1===l||s);){const n=e[a+1];Xs(e[a],t)&&(l=!0,e[a+1]=r?Ki(n):qi(n)),a=r?Gi(n):$i(n)}l&&(e[n+1]=r?qi(o):Ki(o))}function Xs(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Jn(e,t)>=0}const Gs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qs(e){return e.substring(Gs.key,Gs.keyEnd)}function $s(e,t){const n=Gs.textEnd;return n===t?-1:(t=Gs.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Gs.key=t,n),Ys(e,t,n))}function Ys(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Ks(e,t,n){return Js(e,t,n,!1),Ks}function Qs(e,t){return Js(e,t,null,!0),Qs}function Zs(e,t){for(let n=function(e){return function(e){Gs.key=0,Gs.keyEnd=0,Gs.value=0,Gs.valueEnd=0,Gs.textEnd=e.length}(e),$s(e,Ys(e,0,Gs.textEnd))}(t);n>=0;n=$s(t,n))Qn(e,qs(t),!0)}function Js(e,t,n,r){const i=Ot(),o=kt(),s=Vt(2);o.firstUpdatePass&&ta(o,e,s,r),t!==Vi&&ms(i,s,t)&&ia(o,o.data[tn()],i,i[11],e,i[s+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=ne(wr(e)))),e}(t,n),r,s)}function ea(e,t){return t>=e.expandoStartIndex}function ta(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[tn()],s=ea(e,n);aa(o,r)&&null===t&&!s&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=Tt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=ra(n=na(null,e,t,n,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=na(i,e,t,n,r),null===o){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==$i(r))return e[Gi(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=na(null,e,t,n[1],r),n=ra(n,t.attrs,r),function(e,t,n,r){e[Gi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else o=function(e,t,n){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=ra(r,e[o].hostAttrs,n);return ra(r,t.attrs,n)}(e,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),n}(i,o,t,r),function(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Gi(s),l=$i(s);e[r]=n;let c,u=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||Jn(e,c)>0)&&(u=!0)}else c=n;if(i)if(0!==l){const t=Gi(e[a+1]);e[r+1]=Xi(t,a),0!==t&&(e[t+1]=Yi(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Xi(a,0),0!==a&&(e[a+1]=Yi(e[a+1],r)),a=r;else e[r+1]=Xi(l,0),0===a?a=r:e[l+1]=Yi(e[l+1],r),l=r;u&&(e[r+1]=qi(e[r+1])),Ws(e,c,r,!0),Ws(e,c,r,!1),function(e,t,n,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Jn(o,t)>=0&&(n[r+1]=Ki(n[r+1]))}(t,c,e,r,o),s=Xi(a,l),o?t.classBindings=s:t.styleBindings=s}(i,o,t,n,s,r)}}function na(e,t,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],r=ra(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function ra(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Qn(e,s,!!n||t[++o]))}return void 0===e?null:e}function ia(e,t,n,r,i,o,s,a){if(!(3&t.type))return;const l=e.data,c=l[a+1];sa(1==(1&c)?oa(l,t,n,i,$i(c),s):void 0)||(sa(o)||2==(2&c)&&(o=oa(l,null,n,i,a,s)),function(e,t,n,r,i){const o=pt(e);if(t)i?o?e.addClass(n,r):n.classList.add(r):o?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:ri.DashCase;if(null==i)o?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),t|=ri.Important),o?e.setStyle(n,r,i,t):n.style.setProperty(r,i,s?"important":"")}}}(r,s,gt(tn(),n),i,o))}function oa(e,t,n,r,i,o){const s=null===t;let a;for(;i>0;){const t=e[i],o=Array.isArray(t),l=o?t[1]:t,c=null===l;let u=n[i+1];u===Vi&&(u=c?Us:void 0);let h=c?Zn(u,r):l===r?u:void 0;if(o&&!sa(h)&&(h=Zn(t,r)),sa(h)&&(a=h,s))return a;const d=e[i+1];i=s?Gi(d):$i(d)}if(null!==t){let e=o?t.residualClasses:t.residualStyles;null!=e&&(a=Zn(e,r))}return a}function sa(e){return void 0!==e}function aa(e,t){return 0!=(e.flags&(t?16:32))}function la(e,t=""){const n=Ot(),r=kt(),i=e+20,o=r.firstCreatePass?Ji(r,i,1,t,null):r.data[i],s=n[i]=function(e,t){return pt(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Ci(r,n,s,o),Dt(o,!1)}function ca(e){return ua("",e,""),ca}function ua(e,t,n){const r=Ot(),i=_s(r,e,t,n);return i!==Vi&&No(r,tn(),i),ua}function ha(e,t,n,r,i){const o=Ot(),s=function(e,t,n,r,i,o){const s=gs(e,Ht(),n,i);return Vt(2),s?t+ce(n)+r+ce(i)+o:Vi}(o,e,t,n,r,i);return s!==Vi&&No(o,tn(),s),ha}function da(e,t,n){const r=Ot();return ms(r,zt(),t)&&po(kt(),rn(),r,e,t,r[11],n,!0),da}var pa=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let fa={};function ma(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=ga(t);if(n)return n;const r=t.split("-")[0];if(n=ga(r),n)return n;if("en"===r)return pa;throw new Error(`Missing locale data for the locale "${e}".`)}function ga(e){return e in fa||(fa[e]=Ae.ng&&Ae.ng.common&&Ae.ng.common.locales&&Ae.ng.common.locales[e]),fa[e]}var ya=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});let _a="en-US";function va(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(_a=e.toLowerCase().replace(/_/g,"-"))}function ba(e,t,n,r,i){if(e=se(e),Array.isArray(e))for(let o=0;o<e.length;o++)ba(e[o],t,n,r,i);else{const o=kt(),s=Ot();let a=es(e)?e:se(e.provide),l=Qo(e);const c=At(),u=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(es(e)||!e.multi){const r=new pn(l,i,ws),p=xa(a,t,i?u:u+d,h);-1===p?(On(Sn(c,s),o,a),wa(o,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[p]=r,s[p]=r)}else{const p=xa(a,t,u+d,h),f=xa(a,t,u,u+d),m=p>=0&&n[p],g=f>=0&&n[f];if(i&&!g||!i&&!m){On(Sn(c,s),o,a);const u=function(e,t,n,r,i){const o=new pn(e,n,ws);return o.multi=[],o.index=t,o.componentProviders=0,Ca(o,i,r&&!n),o}(i?Sa:Ea,n.length,i,r,l);!i&&g&&(n[f].providerFactory=u),wa(o,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(u),s.push(u)}else wa(o,e,p>-1?p:f,Ca(n[i?f:p],l,!i&&r));!i&&r&&g&&n[f].componentProviders++}}}function wa(e,t,n,r){const i=es(t);if(i||t.useClass){const o=(t.useClass||t).prototype.ngOnDestroy;if(o){const s=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=s.indexOf(n);-1===e?s.push(n,[r,o]):s[e+1].push(r,o)}else s.push(n,o)}}}function Ca(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function xa(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Ea(e,t,n,r){return Pa(this.multi,[])}function Sa(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Bn(n,n[1],this.providerFactory.index,r);o=t.slice(0,e),Pa(i,o);for(let n=e;n<t.length;n++)o.push(t[n])}else o=[],Pa(i,o);return o}function Pa(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Ta(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=kt();if(r.firstCreatePass){const i=it(e);ba(n,r.data,r.blueprint,i,!0),ba(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class Ia{}class Oa{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${ne(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let ka=(()=>{class e{}return e.NULL=new Oa,e})();function Ra(...e){}function Aa(e,t){return new Da(yt(e,t))}const Ma=function(){return Aa(At(),Ot())};let Da=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Ma,e})();function Fa(e){return e instanceof Da?e.nativeElement:e}class La{}let Ba=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Na(),e})();const Na=function(){const e=Ot(),t=bt(At().index,e);return function(e){return e[11]}(Je(t)?t:e)};let ja=(()=>{class e{}return e.\u0275prov=de({token:e,providedIn:"root",factory:()=>null}),e})();class Ha{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const za=new Ha("11.2.5");class Va{constructor(){}supports(e){return ds(e)}create(e){return new Wa(e)}}const Ua=(e,t)=>t;class Wa{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ua}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const o=!n||t&&t.currentIndex<$a(n,r,i)?t:n,s=$a(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);const e=s-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;t<=o&&o<e&&(i[n]=r+1)}i[o.previousIndex]=t-e}}s!==a&&e(o,s,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ds(e))throw new Error(`Error trying to diff '${ne(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),o=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[us()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),o=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new Xa(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new qa),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qa),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Xa{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ga{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class qa{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Ga,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $a(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class Ya{constructor(){}supports(e){return e instanceof Map||ps(e)}create(){return new Ka}}class Ka{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ps(e)))throw new Error(`Error trying to diff '${ne(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Qa(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Qa{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Za(){return new Ja([new Va])}let Ja=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Za()),deps:[[e,new dr,new hr]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=de({token:e,providedIn:"root",factory:Za}),e})();function el(){return new tl([new Ya])}let tl=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||el()),deps:[[e,new dr,new hr]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=de({token:e,providedIn:"root",factory:el}),e})();function nl(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(mt(o)),et(o))for(let e=10;e<o.length;e++){const t=o[e],n=t[1].firstChild;null!==n&&nl(t[1],t,n,r)}const s=n.type;if(8&s)nl(e,t,n.child,r);else if(32&s){const e=ii(n,t);let i;for(;i=e();)r.push(i)}else if(16&s){const e=Ei(t,n);if(Array.isArray(e))r.push(...e);else{const n=oi(t[16]);nl(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class rl{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return nl(t,e,t.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(et(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(di(e,n),Yn(t,n))}this._attachedToViewContainer=!1}pi(this._lView[1],this._lView)}onDestroy(e){uo(this._lView[1],this._lView,null,e)}markForCheck(){Oo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ko(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Nt(!0);try{ko(e,t,n)}finally{Nt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Ti(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class il extends rl{constructor(e){super(e),this._view=e}detectChanges(){Ro(this._view)}checkNoChanges(){!function(e){Nt(!0);try{Ro(e)}finally{Nt(!1)}}(this._view)}get context(){return null}}const ol=al;let sl=(()=>{class e{}return e.__NG_ELEMENT_ID__=ol,e.__ChangeDetectorRef__=!0,e})();function al(e=!1){return function(e,t,n){if(!n&&nt(e)){const n=bt(e.index,t);return new rl(n,n)}return 47&e.type?new rl(t[16],t):null}(At(),Ot(),e)}const ll=[new Ya],cl=new Ja([new Va]),ul=new tl(ll),hl=function(){return ml(At(),Ot())};let dl=(()=>{class e{}return e.__NG_ELEMENT_ID__=hl,e})();const pl=dl,fl=class extends pl{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Zi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),to(t,n,e),new rl(n)}};function ml(e,t){return 4&e.type?new fl(t,e,Aa(e,t)):null}class gl{}const yl=function(){return xl(At(),Ot())};let _l=(()=>{class e{}return e.__NG_ELEMENT_ID__=yl,e})();const vl=_l,bl=class extends vl{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Aa(this._hostTNode,this._hostLView)}get injector(){return new Hn(this._hostTNode,this._hostLView)}get parentInjector(){const e=In(this._hostTNode,this._hostLView);if(vn(e)){const t=wn(e,this._hostLView),n=bn(e);return new Hn(t[1].data[n+8],t)}return new Hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=wl(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const o=n||this.parentInjector;if(!i&&null==e.ngModule&&o){const e=o.get(gl,null);e&&(i=e)}const s=e.create(o,r,void 0,i);return this.insert(s.hostView,t),s}insert(e,t){const n=e._lView,r=n[1];if(et(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new bl(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),o=this._lContainer;!function(e,t,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],$n(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,o,i);const s=Si(i,o),a=n[11],l=vi(a,o[7]);return null!==l&&function(e,t,n,r,i,o){r[0]=i,r[6]=t,Ti(e,r,n,1,i,o)}(r,o[6],a,n,l,s),e.attachToViewContainerRef(),$n(Cl(o),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=wl(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=di(this._lContainer,t);n&&(Yn(Cl(this._lContainer),t),pi(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=di(this._lContainer,t);return n&&null!=Yn(Cl(this._lContainer),t)?new rl(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function wl(e){return e[8]}function Cl(e){return e[8]||(e[8]=[])}function xl(e,t){let n;const r=t[e.index];if(et(r))n=r;else{let i;if(8&e.type)i=mt(r);else{const n=t[11];i=n.createComment("");const r=yt(e,t);gi(n,vi(n,r),i,function(e,t){return pt(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Eo(r,t,i,e),Io(t,n)}return new bl(n,e,t)}const El={};class Sl extends ka{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Qe(e);return new Il(t,this.ngModule)}}function Pl(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Tl=new Xn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Jr});class Il extends Ia{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(zi).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Pl(this.componentDef.inputs)}get outputs(){return Pl(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const o=e.get(n,El,i);return o!==El||r===El?o:t.get(n,r,i)}}}(e,r.injector):e,o=i.get(La,ft),s=i.get(ja,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(pt(e))return e.selectRootElement(t,n===Te.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):ui(o.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Jr,clean:Mo,playerHandler:null,flags:0},d=co(0,null,null,1,0,null,null,null,null,null),p=Zi(null,d,h,u,null,null,o,a,s,i);let f,m;Yt(p);try{const e=function(e,t,n,r,i,o){const s=n[1];n[20]=e;const a=Ji(s,20,2,"#host",null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(jo(a,l,!0),null!==e&&(fn(i,e,l),null!==a.classes&&ki(i,e,a.classes),null!==a.styles&&Oi(i,e,a.styles)));const c=r.createRenderer(e,t),u=Zi(n,lo(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(On(Sn(a,n),s,t.type),yo(s,a),vo(a,n.length,1)),Io(n,u),n[20]=u}(c,this.componentDef,p,o,a);if(c)if(n)fn(a,c,["ng-version",za.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Li(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&fn(a,c,e),t&&t.length>0&&ki(a,c,t.join(" "))}if(m=_t(d,20),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,i){const o=n[1],s=function(e,t,n){const r=At();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),bo(e,r,t,eo(e,t,1,null),n));const i=Bn(t,e,r.directiveStart,r);Zr(i,t);const o=yt(r,t);return o&&Zr(o,t),i}(o,n,t);if(r.components.push(s),e[8]=s,i&&i.forEach(e=>e(s,t)),t.contentQueries){const e=At();t.contentQueries(1,s,e.directiveStart)}const a=At();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(nn(a.index),mo(n[1],a,0,a.directiveStart,a.directiveEnd,t),go(t,s)),s}(e,this.componentDef,p,h,[rs]),to(d,p,null)}finally{en()}return new Ol(this.componentType,f,Aa(m,p),p,m)}}class Ol extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new il(r),this.componentType=e}get injector(){return new Hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const kl=new Map;class Rl extends gl{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Sl(this);const n=Ze(e),r=e[je]||null;r&&va(r),this._bootstrapComponents=ni(n.bootstrap),this._r3Injector=$o(e,t,[{provide:gl,useValue:this},{provide:ka,useValue:this.componentFactoryResolver}],ne(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ns.THROW_IF_NOT_FOUND,n=we.Default){return e===ns||e===gl||e===Ho?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Al extends class{}{constructor(e){super(),this.moduleType=e,null!==Ze(e)&&function(e){const t=new Set;!function e(n){const r=Ze(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${ne(t)} vs ${ne(t.name)}`)}(i,kl.get(i),n),kl.set(i,n));const o=ni(r.imports);for(const s of o)t.has(s)||(t.add(s),e(s))}(e)}(e)}create(e){return new Rl(this.moduleType,e)}}function Ml(e,t,n){const r=jt()+e,i=Ot();return i[r]===Vi?fs(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function Dl(e,t,n,r){return Bl(Ot(),jt(),e,t,n,r)}function Fl(e,t,n,r,i){return Nl(Ot(),jt(),e,t,n,r,i)}function Ll(e,t){const n=e[t];return n===Vi?void 0:n}function Bl(e,t,n,r,i,o){const s=t+n;return ms(e,s,i)?fs(e,s+1,o?r.call(o,i):r(i)):Ll(e,s+1)}function Nl(e,t,n,r,i,o,s){const a=t+n;return gs(e,a,i,o)?fs(e,a+2,s?r.call(s,i,o):r(i,o)):Ll(e,a+2)}function jl(e,t,n,r,i,o,s,a){const l=t+n;return function(e,t,n,r,i){const o=gs(e,t,n,r);return ms(e,t+2,i)||o}(e,l,i,o,s)?fs(e,l+3,a?r.call(a,i,o,s):r(i,o,s)):Ll(e,l+3)}function Hl(e,t){const n=kt();let r;const i=e+20;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new le("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=ot(r.type)),s=xe(ws);try{const e=xn(!1),t=o();return xn(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,Ot(),i,t),t}finally{xe(s)}}function zl(e,t,n){const r=e+20,i=Ot(),o=vt(i,r);return Wl(i,Ul(i,r)?Bl(i,jt(),t,o.transform,n,o):o.transform(n))}function Vl(e,t,n,r){const i=e+20,o=Ot(),s=vt(o,i);return Wl(o,Ul(o,i)?Nl(o,jt(),t,s.transform,n,r,s):s.transform(n,r))}function Ul(e,t){return e[1].data[t].pure}function Wl(e,t){return hs.isWrapped(t)&&(t=hs.unwrap(t),e[Ht()]=Vi),t}const Xl=class extends x{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,i=e=>null,o=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(i=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(o=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return e instanceof h&&e.add(s),s}};function Gl(){return this._results[us()]()}class ql{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=us(),n=ql.prototype;n[t]||(n[t]=Gl)}get changes(){return this._changes||(this._changes=new Xl)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const n=Gn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class $l{constructor(e){this.queryList=e,this.matches=null}clone(){return new $l(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yl{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new Yl(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==cc(e,t).matches&&this.queries[t].setDirty()}}class Kl{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Ql{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Ql(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Zl{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Zl(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,Jl(t,i)),this.matchTNodeWithReadOption(e,t,Ln(t,e,i,!1,!1))}else n===dl?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ln(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Da||r===_l||r===dl&&4&t.type)this.addMatch(t.index,-2);else{const n=Ln(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Jl(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function ec(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Aa(e,t):4&e.type?ml(e,t):null}(t,e):-2===n?function(e,t,n){return n===Da?Aa(t,e):n===dl?ml(t,e):n===_l?xl(t,e):void 0}(e,t,r):Bn(e,e[1],n,t)}function tc(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,o=n.matches,s=[];for(let e=0;e<o.length;e+=2){const i=o[e];s.push(i<0?null:ec(t,r[i],o[e+1],n.metadata.read))}i.matches=s}return i.matches}function nc(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const s=tc(e,t,i,n);for(let e=0;e<o.length;e+=2){const n=o[e];if(n>0)r.push(s[e/2]);else{const i=o[e+1],s=t[-n];for(let e=10;e<s.length;e++){const t=s[e];t[17]===t[3]&&nc(t[1],t,i,r)}if(null!==s[9]){const e=s[9];for(let t=0;t<e.length;t++){const n=e[t];nc(n[1],n,i,r)}}}}}return r}function rc(e){const t=Ot(),n=kt(),r=Xt();Gt(r+1);const i=cc(n,r);if(e.dirty&&Ct(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?nc(n,t,r,[]):tc(n,t,i,r);e.reset(o,Fa),e.notifyOnChanges()}return!0}return!1}function ic(e,t,n){const r=kt();r.firstCreatePass&&(lc(r,new Kl(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),ac(r,Ot(),t)}function oc(e,t,n,r){const i=kt();if(i.firstCreatePass){const o=At();lc(i,new Kl(t,n,r),o.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}ac(i,Ot(),n)}function sc(){return e=Ot(),t=Xt(),e[19].queries[t].queryList;var e,t}function ac(e,t,n){const r=new ql(4==(4&n));uo(e,t,r,r.destroy),null===t[19]&&(t[19]=new Yl),t[19].queries.push(new $l(r))}function lc(e,t,n){null===e.queries&&(e.queries=new Ql),e.queries.track(new Zl(t,n))}function cc(e,t){return e.queries.getByIndex(t)}function uc(e,t){return ml(e,t)}function hc(e=we.Default){const t=al(!0);if(null!=t||e&we.Optional)return t;he("ChangeDetectorRef")}const dc=new Xn("Application Initializer");let pc=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Ra,this.reject=Ra,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Rs(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(sr(dc,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const fc=new Xn("AppId"),mc={provide:fc,useFactory:function(){return`${gc()}${gc()}${gc()}`},deps:[]};function gc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yc=new Xn("Platform Initializer"),_c=new Xn("Platform ID"),vc=new Xn("appBootstrapListener");let bc=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const wc=new Xn("LocaleId"),Cc=new Xn("DefaultCurrencyCode");class xc{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Ec=function(e){return new Al(e)},Sc=Ec,Pc=function(e){return Promise.resolve(Ec(e))},Tc=function(e){const t=Ec(e),n=ni(Ze(e).declarations).reduce((e,t)=>{const n=Qe(t);return n&&e.push(new Il(n)),e},[]);return new xc(t,n)},Ic=Tc,Oc=function(e){return Promise.resolve(Tc(e))};let kc=(()=>{class e{constructor(){this.compileModuleSync=Sc,this.compileModuleAsync=Pc,this.compileModuleAndAllComponentsSync=Ic,this.compileModuleAndAllComponentsAsync=Oc}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Rc=(()=>Promise.resolve(0))();function Ac(e){"undefined"==typeof Zone?Rc.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Mc{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xl(!1),this.onMicrotaskEmpty=new Xl(!1),this.onStable=new Xl(!1),this.onError=new Xl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&t,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=Ae.requestAnimationFrame,t=Ae.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ae,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Lc(e),Fc(e)},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Lc(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Bc(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),Nc(e)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return Bc(e),n.invoke(i,o,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),Nc(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Lc(e),Fc(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Mc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,Dc,Ra,Ra);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Dc={};function Fc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Lc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Bc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Nc(e){e._nesting--,Fc(e)}class jc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xl,this.onMicrotaskEmpty=new Xl,this.onStable=new Xl,this.onError=new Xl}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Hc=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mc.assertNotInAngularZone(),Ac(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ac(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(sr(Mc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),zc=(()=>{class e{constructor(){this._applications=new Map,Wc.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Wc.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class Vc{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let Uc,Wc=new Vc,Xc=!0,Gc=!1;function qc(){return Gc=!0,Xc}const $c=new Xn("AllowMultipleToken");function Yc(e,t,n=[]){const r=`Platform: ${t}`,i=new Xn(r);return(t=[])=>{let o=Kc();if(!o||o.injector.get($c,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:Vo,useValue:"platform"});!function(e){if(Uc&&!Uc.destroyed&&!Uc.injector.get($c,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Uc=e.get(Qc);const t=e.get(yc,null);t&&t.forEach(e=>e())}(ns.create({providers:e,name:r}))}return function(e){const t=Kc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Kc(){return Uc&&!Uc.destroyed?Uc:null}let Qc=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new jc:("zone.js"===e?void 0:e)||new Mc({enableLongStackTrace:qc(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Mc,useValue:n}];return n.run(()=>{const t=ns.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),o=i.injector.get(Qr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{o.handleError(e)}});i.onDestroy(()=>{eu(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Rs(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=i.injector.get(pc);return e.runInitializers(),e.donePromise.then(()=>(va(i.injector.get(wc,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=Zc({},t);return function(e,t,n){const r=new Al(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Jc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ne(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(sr(ns))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function Zc(e,t){return Array.isArray(t)?t.reduce(Zc,e):Object.assign(Object.assign({},e),t)}let Jc=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new _(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),s=new _(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Mc.assertNotInAngularZone(),Ac(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Mc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=X(o,s.pipe(J()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Ia?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(gl),i=n.create(ns.NULL,[],t||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Hc,null),a=s&&i.injector.get(zc);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),eu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;eu(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(vc,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(sr(Mc),sr(ns),sr(Qr),sr(ka),sr(pc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function eu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const tu=Yc(null,"core",[{provide:_c,useValue:"unknown"},{provide:Qc,deps:[ns]},{provide:zc,deps:[]},{provide:bc,deps:[]}]),nu=[{provide:Jc,useClass:Jc,deps:[Mc,ns,Qr,ka,pc]},{provide:Tl,deps:[Mc],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:pc,useClass:pc,deps:[[new hr,dc]]},{provide:kc,useClass:kc,deps:[]},mc,{provide:Ja,useFactory:function(){return cl},deps:[]},{provide:tl,useFactory:function(){return ul},deps:[]},{provide:wc,useFactory:function(e){return va(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new ur(wc),new hr,new dr]]},{provide:Cc,useValue:"USD"}];let ru=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(sr(Jc))},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:nu}),e})(),iu=null;function ou(){return iu}const su=new Xn("DocumentToken");let au=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:lu,token:e,providedIn:"platform"}),e})();function lu(){return sr(cu)}let cu=(()=>{class e extends au{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=ou().getLocation(),this._history=ou().getHistory()}getBaseHrefFromDOM(){return ou().getBaseHref(this._doc)}onPopState(e){ou().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){ou().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){uu()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){uu()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(sr(su))},e.\u0275prov=de({factory:hu,token:e,providedIn:"platform"}),e})();function uu(){return!!window.history.pushState}function hu(){return new cu(sr(su))}function du(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function pu(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function fu(e){return e&&"?"!==e[0]?"?"+e:e}let mu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:gu,token:e,providedIn:"root"}),e})();function gu(e){const t=sr(su).location;return new _u(sr(au),t&&t.origin||"")}const yu=new Xn("appBaseHref");let _u=(()=>{class e extends mu{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return du(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+fu(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+fu(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+fu(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(sr(au),sr(yu,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),vu=(()=>{class e{constructor(e,t){this._subject=new Xl,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=pu(wu(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+fu(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,wu(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+fu(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+fu(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(sr(mu),sr(au))},e.normalizeQueryParams=fu,e.joinWithSlash=du,e.stripTrailingSlash=pu,e.\u0275prov=de({factory:bu,token:e,providedIn:"root"}),e})();function bu(){return new vu(sr(mu),sr(au))}function wu(e){return e.replace(/\/index.html$/,"")}var Cu=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}({}),xu=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),Eu=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}({}),Su=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}({}),Pu=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}({}),Tu=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({});function Iu(e,t){return Mu(ma(e)[ya.DateFormat],t)}function Ou(e,t){return Mu(ma(e)[ya.TimeFormat],t)}function ku(e,t){return Mu(ma(e)[ya.DateTimeFormat],t)}function Ru(e,t){const n=ma(e),r=n[ya.NumberSymbols][t];if(void 0===r){if(t===Tu.CurrencyDecimal)return n[ya.NumberSymbols][Tu.Decimal];if(t===Tu.CurrencyGroup)return n[ya.NumberSymbols][Tu.Group]}return r}function Au(e){if(!e[ya.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[ya.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Mu(e,t){for(let n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function Du(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const Fu=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Lu={},Bu=/((?:[^GyYMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Nu=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}({}),ju=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}({}),Hu=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}({});function zu(e,t,n,r){let i=function(e){if(eh(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[t,n=1,r=1]=e.split("-").map(e=>+e);return Vu(t,n-1,r)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let n;if(n=e.match(Fu))return function(e){const t=new Date(0);let n=0,r=0;const i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,l=Number(e[6]||0),c=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return o.call(t,s,a,l,c),t}(n)}const t=new Date(e);if(!eh(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=Uu(n,t)||t;let o,s=[];for(;t;){if(o=Bu.exec(t),!o){s.push(t);break}{s=s.concat(o.slice(1));const e=s.pop();if(!e)break;t=e}}let a=i.getTimezoneOffset();r&&(a=Ju(r,a),i=function(e,t,n){const r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(Ju(t,r)-r))}(i,r));let l="";return s.forEach(e=>{const t=function(e){if(Zu[e])return Zu[e];let t;switch(e){case"G":case"GG":case"GGG":t=qu(Hu.Eras,Su.Abbreviated);break;case"GGGG":t=qu(Hu.Eras,Su.Wide);break;case"GGGGG":t=qu(Hu.Eras,Su.Narrow);break;case"y":t=Gu(ju.FullYear,1,0,!1,!0);break;case"yy":t=Gu(ju.FullYear,2,0,!0,!0);break;case"yyy":t=Gu(ju.FullYear,3,0,!1,!0);break;case"yyyy":t=Gu(ju.FullYear,4,0,!1,!0);break;case"Y":t=Qu(1);break;case"YY":t=Qu(2,!0);break;case"YYY":t=Qu(3);break;case"YYYY":t=Qu(4);break;case"M":case"L":t=Gu(ju.Month,1,1);break;case"MM":case"LL":t=Gu(ju.Month,2,1);break;case"MMM":t=qu(Hu.Months,Su.Abbreviated);break;case"MMMM":t=qu(Hu.Months,Su.Wide);break;case"MMMMM":t=qu(Hu.Months,Su.Narrow);break;case"LLL":t=qu(Hu.Months,Su.Abbreviated,Eu.Standalone);break;case"LLLL":t=qu(Hu.Months,Su.Wide,Eu.Standalone);break;case"LLLLL":t=qu(Hu.Months,Su.Narrow,Eu.Standalone);break;case"w":t=Ku(1);break;case"ww":t=Ku(2);break;case"W":t=Ku(1,!0);break;case"d":t=Gu(ju.Date,1);break;case"dd":t=Gu(ju.Date,2);break;case"E":case"EE":case"EEE":t=qu(Hu.Days,Su.Abbreviated);break;case"EEEE":t=qu(Hu.Days,Su.Wide);break;case"EEEEE":t=qu(Hu.Days,Su.Narrow);break;case"EEEEEE":t=qu(Hu.Days,Su.Short);break;case"a":case"aa":case"aaa":t=qu(Hu.DayPeriods,Su.Abbreviated);break;case"aaaa":t=qu(Hu.DayPeriods,Su.Wide);break;case"aaaaa":t=qu(Hu.DayPeriods,Su.Narrow);break;case"b":case"bb":case"bbb":t=qu(Hu.DayPeriods,Su.Abbreviated,Eu.Standalone,!0);break;case"bbbb":t=qu(Hu.DayPeriods,Su.Wide,Eu.Standalone,!0);break;case"bbbbb":t=qu(Hu.DayPeriods,Su.Narrow,Eu.Standalone,!0);break;case"B":case"BB":case"BBB":t=qu(Hu.DayPeriods,Su.Abbreviated,Eu.Format,!0);break;case"BBBB":t=qu(Hu.DayPeriods,Su.Wide,Eu.Format,!0);break;case"BBBBB":t=qu(Hu.DayPeriods,Su.Narrow,Eu.Format,!0);break;case"h":t=Gu(ju.Hours,1,-12);break;case"hh":t=Gu(ju.Hours,2,-12);break;case"H":t=Gu(ju.Hours,1);break;case"HH":t=Gu(ju.Hours,2);break;case"m":t=Gu(ju.Minutes,1);break;case"mm":t=Gu(ju.Minutes,2);break;case"s":t=Gu(ju.Seconds,1);break;case"ss":t=Gu(ju.Seconds,2);break;case"S":t=Gu(ju.FractionalSeconds,1);break;case"SS":t=Gu(ju.FractionalSeconds,2);break;case"SSS":t=Gu(ju.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=$u(Nu.Short);break;case"ZZZZZ":t=$u(Nu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=$u(Nu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=$u(Nu.Long);break;default:return null}return Zu[e]=t,t}(e);l+=t?t(i,n,a):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Vu(e,t,n){const r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Uu(e,t){const n=function(e){return ma(e)[ya.LocaleId]}(e);if(Lu[n]=Lu[n]||{},Lu[n][t])return Lu[n][t];let r="";switch(t){case"shortDate":r=Iu(e,Pu.Short);break;case"mediumDate":r=Iu(e,Pu.Medium);break;case"longDate":r=Iu(e,Pu.Long);break;case"fullDate":r=Iu(e,Pu.Full);break;case"shortTime":r=Ou(e,Pu.Short);break;case"mediumTime":r=Ou(e,Pu.Medium);break;case"longTime":r=Ou(e,Pu.Long);break;case"fullTime":r=Ou(e,Pu.Full);break;case"short":const t=Uu(e,"shortTime"),n=Uu(e,"shortDate");r=Wu(ku(e,Pu.Short),[t,n]);break;case"medium":const i=Uu(e,"mediumTime"),o=Uu(e,"mediumDate");r=Wu(ku(e,Pu.Medium),[i,o]);break;case"long":const s=Uu(e,"longTime"),a=Uu(e,"longDate");r=Wu(ku(e,Pu.Long),[s,a]);break;case"full":const l=Uu(e,"fullTime"),c=Uu(e,"fullDate");r=Wu(ku(e,Pu.Full),[l,c])}return r&&(Lu[n][t]=r),r}function Wu(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e}function Xu(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.substr(s.length-t)),o+s}function Gu(e,t,n=0,r=!1,i=!1){return function(o,s){let a=function(e,t){switch(e){case ju.FullYear:return t.getFullYear();case ju.Month:return t.getMonth();case ju.Date:return t.getDate();case ju.Hours:return t.getHours();case ju.Minutes:return t.getMinutes();case ju.Seconds:return t.getSeconds();case ju.FractionalSeconds:return t.getMilliseconds();case ju.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,o);if((n>0||a>-n)&&(a+=n),e===ju.Hours)0===a&&-12===n&&(a=12);else if(e===ju.FractionalSeconds)return l=t,Xu(a,3).substr(0,l);var l;const c=Ru(s,Tu.MinusSign);return Xu(a,t,c,r,i)}}function qu(e,t,n=Eu.Format,r=!1){return function(i,o){return function(e,t,n,r,i,o){switch(n){case Hu.Months:return function(e,t,n){const r=ma(e),i=Mu([r[ya.MonthsFormat],r[ya.MonthsStandalone]],t);return Mu(i,n)}(t,i,r)[e.getMonth()];case Hu.Days:return function(e,t,n){const r=ma(e),i=Mu([r[ya.DaysFormat],r[ya.DaysStandalone]],t);return Mu(i,n)}(t,i,r)[e.getDay()];case Hu.DayPeriods:const s=e.getHours(),a=e.getMinutes();if(o){const e=function(e){const t=ma(e);return Au(t),(t[ya.ExtraData][2]||[]).map(e=>"string"==typeof e?Du(e):[Du(e[0]),Du(e[1])])}(t),n=function(e,t,n){const r=ma(e);Au(r);const i=Mu([r[ya.ExtraData][0],r[ya.ExtraData][1]],t)||[];return Mu(i,n)||[]}(t,i,r),o=e.findIndex(e=>{if(Array.isArray(e)){const[t,n]=e,r=s>=t.hours&&a>=t.minutes,i=s<n.hours||s===n.hours&&a<n.minutes;if(t.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(e.hours===s&&e.minutes===a)return!0;return!1});if(-1!==o)return n[o]}return function(e,t,n){const r=ma(e),i=Mu([r[ya.DayPeriodsFormat],r[ya.DayPeriodsStandalone]],t);return Mu(i,n)}(t,i,r)[s<12?0:1];case Hu.Eras:return function(e,t){return Mu(ma(e)[ya.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,o,e,t,n,r)}}function $u(e){return function(t,n,r){const i=-1*r,o=Ru(n,Tu.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case Nu.Short:return(i>=0?"+":"")+Xu(s,2,o)+Xu(Math.abs(i%60),2,o);case Nu.ShortGMT:return"GMT"+(i>=0?"+":"")+Xu(s,1,o);case Nu.Long:return"GMT"+(i>=0?"+":"")+Xu(s,2,o)+":"+Xu(Math.abs(i%60),2,o);case Nu.Extended:return 0===r?"Z":(i>=0?"+":"")+Xu(s,2,o)+":"+Xu(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}function Yu(e){return Vu(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function Ku(e,t=!1){return function(n,r){let i;if(t){const e=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,t=n.getDate();i=1+Math.floor((t+e)/7)}else{const e=Yu(n),t=function(e){const t=Vu(e,0,1).getDay();return Vu(e,0,1+(t<=4?4:11)-t)}(e.getFullYear()),r=e.getTime()-t.getTime();i=1+Math.round(r/6048e5)}return Xu(i,e,Ru(r,Tu.MinusSign))}}function Qu(e,t=!1){return function(n,r){return Xu(Yu(n).getFullYear(),e,Ru(r,Tu.MinusSign),t)}}const Zu={};function Ju(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function eh(e){return e instanceof Date&&!isNaN(e.valueOf())}const th=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function nh(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}class rh{}let ih=(()=>{class e extends rh{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return ma(e)[ya.PluralCase]}(t||this.locale)(e)){case xu.Zero:return"zero";case xu.One:return"one";case xu.Two:return"two";case xu.Few:return"few";case xu.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(sr(wc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function oh(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}let sh=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(ds(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ne(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(ws(Ja),ws(tl),ws(Da),ws(Ba))},e.\u0275dir=Ye({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class ah{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lh=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ah(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new ch(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new ch(e,i);t.push(o)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(ws(_l),ws(dl),ws(Ja))},e.\u0275dir=Ye({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class ch{constructor(e,t){this.record=e,this.view=t}}let uh=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new hh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){dh("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){dh("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(ws(_l),ws(dl))},e.\u0275dir=Ye({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class hh{constructor(){this.$implicit=null,this.ngIf=null}}function dh(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ne(t)}'.`)}class ph{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let fh=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),e})(),mh=(()=>{class e{constructor(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new ph(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(ws(_l),ws(dl),ws(fh,1))},e.\u0275dir=Ye({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),e})(),gh=(()=>{class e{constructor(e,t,n){n._addDefault(new ph(e,t))}}return e.\u0275fac=function(t){return new(t||e)(ws(_l),ws(dl),ws(fh,1))},e.\u0275dir=Ye({type:e,selectors:[["","ngSwitchDefault",""]]}),e})(),yh=(()=>{class e{constructor(e,t,n){this._ngEl=e,this._differs=t,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){const[n,r]=e.split(".");null!=(t=null!=t&&r?`${t}${r}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(tl),ws(Ba))},e.\u0275dir=Ye({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})(),_h=(()=>{class e{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(this._shouldRecreateView(e)){const e=this._viewContainerRef;this._viewRef&&e.remove(e.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?e.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(e){const t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)}_hasContextShapeChanged(e){const t=Object.keys(e.previousValue||{}),n=Object.keys(e.currentValue||{});if(t.length===n.length){for(let e of n)if(-1===t.indexOf(e))return!0;return!1}return!0}_updateExistingContext(e){for(let t of Object.keys(e))this._viewRef.context[t]=this.ngTemplateOutletContext[t]}}return e.\u0275fac=function(t){return new(t||e)(ws(_l))},e.\u0275dir=Ye({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[at]}),e})();function vh(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${ne(e)}'`)}class bh{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class wh{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const Ch=new wh,xh=new bh;let Eh=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if(Rs(t))return Ch;if(As(t))return xh;throw vh(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(hc())},e.\u0275pipe=Ke({name:"async",type:e,pure:!1}),e})(),Sh=(()=>{class e{constructor(e){this.locale=e}transform(t,n="mediumDate",r,i){if(null==t||""===t||t!=t)return null;try{return zu(t,n,i||this.locale,r)}catch(o){throw vh(e,o.message)}}}return e.\u0275fac=function(t){return new(t||e)(ws(wc))},e.\u0275pipe=Ke({name:"date",type:e,pure:!0}),e})(),Ph=(()=>{class e{constructor(e){this.differs=e,this.keyValues=[]}transform(e,t=Th){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const n=this.differ.diff(e);return n&&(this.keyValues=[],n.forEachItem(e=>{this.keyValues.push({key:e.key,value:e.currentValue})}),this.keyValues.sort(t)),this.keyValues}}return e.\u0275fac=function(t){return new(t||e)(ws(tl))},e.\u0275pipe=Ke({name:"keyvalue",type:e,pure:!1}),e})();function Th(e,t){const n=e.key,r=t.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const i=String(n),o=String(r);return i==o?0:i<o?-1:1}let Ih=(()=>{class e{constructor(e){this._locale=e}transform(t,n,r){if(!function(e){return!(null==e||""===e||e!=e)}(t))return null;r=r||this._locale;try{return function(e,t,n){return function(e,t,n,r,i,o,s=!1){let a="",l=!1;if(isFinite(e)){let c=function(e){let t,n,r,i,o,s=Math.abs(e)+"",a=0;for((n=s.indexOf("."))>-1&&(s=s.replace(".","")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;"0"===s.charAt(r);r++);if(r===(o=s.length))t=[0],n=1;else{for(o--;"0"===s.charAt(o);)o--;for(n-=r,t=[],i=0;r<=o;r++,i++)t[i]=Number(s.charAt(r))}return n>22&&(t=t.splice(0,21),a=n-1,n=1),{digits:t,exponent:a,integerLen:n}}(e);s&&(c=function(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(c));let u=t.minInt,h=t.minFrac,d=t.maxFrac;if(o){const e=o.match(th);if(null===e)throw new Error(`${o} is not a valid digit info`);const t=e[1],n=e[3],r=e[5];null!=t&&(u=nh(t)),null!=n&&(h=nh(n)),null!=r?d=nh(r):null!=n&&h>d&&(d=h)}!function(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,i=r.length-e.integerLen;const o=Math.min(Math.max(t,i),n);let s=o+e.integerLen,a=r[s];if(s>0){r.splice(Math.max(e.integerLen,s));for(let e=s;e<r.length;e++)r[e]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let e=1;e<s;e++)r[e]=0}if(a>=5)if(s-1<0){for(let t=0;t>s;t--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=0!==o;const c=t+e.integerLen,u=r.reduceRight(function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,l&&(0===r[n]&&n>=c?r.pop():l=!1),t>=10?1:0},0);u&&(r.unshift(u),e.integerLen++)}(c,h,d);let p=c.digits,f=c.integerLen;const m=c.exponent;let g=[];for(l=p.every(e=>!e);f<u;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?g=p.splice(f,p.length):(g=p,p=[0]);const y=[];for(p.length>=t.lgSize&&y.unshift(p.splice(-t.lgSize,p.length).join(""));p.length>t.gSize;)y.unshift(p.splice(-t.gSize,p.length).join(""));p.length&&y.unshift(p.join("")),a=y.join(Ru(n,r)),g.length&&(a+=Ru(n,i)+g.join("")),m&&(a+=Ru(n,Tu.Exponential)+"+"+m)}else a=Ru(n,Tu.Infinity);return a=e<0&&!l?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(e,function(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=s[0],l=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let u=0;u<l.length;u++){const e=l.charAt(u);"0"===e?n.minFrac=n.maxFrac=u+1:"#"===e?n.maxFrac=u+1:n.posSuf+=e}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const e=i.length-n.posPre.length-n.posSuf.length,t=o.indexOf("#");n.negPre=o.substr(0,t).replace(/'/g,""),n.negSuf=o.substr(t+e).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(e,t){return ma(e)[ya.NumberFormats][t]}(t,Cu.Percent),Ru(t,Tu.MinusSign)),t,Tu.Group,Tu.Decimal,n,!0).replace(new RegExp("%","g"),Ru(t,Tu.PercentSign))}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(t),r,n)}catch(i){throw vh(e,i.message)}}}return e.\u0275fac=function(t){return new(t||e)(ws(wc))},e.\u0275pipe=Ke({name:"percent",type:e,pure:!0}),e})(),Oh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[{provide:rh,useClass:ih}]}),e})();function kh(e){return"browser"===e}class Rh extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new Rh,iu||(iu=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=Mh||(Mh=document.querySelector("base"),Mh)?Mh.getAttribute("href"):null;return null==t?null:(n=t,Ah||(Ah=document.createElement("a")),Ah.setAttribute("href",n),"/"===Ah.pathname.charAt(0)?Ah.pathname:"/"+Ah.pathname);var n}resetBaseElement(){Mh=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return oh(document.cookie,e)}}let Ah,Mh=null;const Dh=new Xn("TRANSITION_ID"),Fh=[{provide:dc,useFactory:function(e,t,n){return()=>{n.get(pc).donePromise.then(()=>{const n=ou();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Dh,su,ns],multi:!0}];class Lh{static init(){var e;e=new Lh,Wc=e}addToWindow(e){Ae.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Ae.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ae.getAllAngularRootElements=()=>e.getAllRootElements(),Ae.frameworkStabilizers||(Ae.frameworkStabilizers=[]),Ae.frameworkStabilizers.push(e=>{const t=Ae.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?ou().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const Bh=new Xn("EventManagerPlugins");let Nh=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(sr(Bh),sr(Mc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class jh{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=ou().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let Hh=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),zh=(()=>{class e extends Hh{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>ou().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(sr(su))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Vh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Uh=/%COMP%/g;function Wh(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Wh(e,i,n):(i=i.replace(Uh,e),n.push(i))}return n}function Xh(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Gh=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new qh(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Te.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new $h(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case Te.ShadowDom:return new Yh(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Wh(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(sr(Nh),sr(zh),sr(fc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class qh{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Vh[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=Vh[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=Vh[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(ri.DashCase|ri.Important)?e.style.setProperty(t,n,r&ri.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&ri.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Xh(n)):this.eventManager.addEventListener(e,t,Xh(n))}}class $h extends qh{constructor(e,t,n,r){super(e),this.component=n;const i=Wh(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Uh,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Uh,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Yh extends qh{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Wh(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const e=document.createElement("style");e.textContent=i[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Kh=(()=>{class e extends jh{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(sr(su))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Qh=["alt","control","meta","shift"],Zh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ed={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let td=(()=>{class e extends jh{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ou().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let o="";if(Qh.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Jh.hasOwnProperty(t)&&(t=Jh[t]))}return Zh[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Qh.forEach(r=>{r!=n&&(0,ed[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(sr(su))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),nd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return sr(rd)},token:e,providedIn:"root"}),e})(),rd=(()=>{class e extends nd{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case Gr.NONE:return t;case Gr.HTML:return Cr(t,"HTML")?wr(t):function(e,t){let n=null;try{Wr=Wr||function(e){const t=new Sr(e);return function(){try{return!!(new window.DOMParser).parseFromString(fr(""),"text/html")}catch(e){return!1}}()?new Er(t):t}(e);let r=t?String(t):"";n=Wr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Wr.getInertBodyElement(r)}while(r!==o);return fr((new Hr).sanitizeChildren(Xr(n)||n))}finally{if(n){const e=Xr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(t)).toString();case Gr.STYLE:return Cr(t,"Style")?wr(t):t;case Gr.SCRIPT:if(Cr(t,"Script"))return wr(t);throw new Error("unsafe value used in a script context");case Gr.URL:return xr(t),Cr(t,"URL")?wr(t):Ir(String(t));case Gr.RESOURCE_URL:if(Cr(t,"ResourceURL"))return wr(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return new gr(e)}bypassSecurityTrustStyle(e){return new yr(e)}bypassSecurityTrustScript(e){return new _r(e)}bypassSecurityTrustUrl(e){return new vr(e)}bypassSecurityTrustResourceUrl(e){return new br(e)}}return e.\u0275fac=function(t){return new(t||e)(sr(su))},e.\u0275prov=de({factory:function(){return e=sr(Ho),new rd(e.get(su));var e},token:e,providedIn:"root"}),e})();const id=Yc(tu,"browser",[{provide:_c,useValue:"browser"},{provide:yc,useValue:function(){Rh.makeCurrent(),Lh.init()},multi:!0},{provide:su,useFactory:function(){return function(e){dt=e}(document),document},deps:[]}]),od=[[],{provide:Vo,useValue:"root"},{provide:Qr,useFactory:function(){return new Qr},deps:[]},{provide:Bh,useClass:Kh,multi:!0,deps:[su,Mc,_c]},{provide:Bh,useClass:td,multi:!0,deps:[su]},[],{provide:Gh,useClass:Gh,deps:[Nh,zh,fc]},{provide:La,useExisting:Gh},{provide:Hh,useExisting:zh},{provide:zh,useClass:zh,deps:[su]},{provide:Hc,useClass:Hc,deps:[Mc]},{provide:Nh,useClass:Nh,deps:[Bh,Mc]},[]];let sd=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:fc,useValue:t.appId},{provide:Dh,useExisting:fc},Fh]}}}return e.\u0275fac=function(t){return new(t||e)(sr(e,12))},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:od,imports:[Oh,ru]}),e})();function ad(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function ld(...e){let t=e[e.length-1];return S(t)?(e.pop(),F(e,t)):W(e)}function cd(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function ud(){}function hd(e,t,n){return function(r){return r.lift(new dd(e,t,n))}}"undefined"!=typeof window&&window;class dd{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new pd(e,this.nextOrObserver,this.error,this.complete))}}class pd extends f{constructor(e,t,n,i){super(e),this._tapNext=ud,this._tapError=ud,this._tapComplete=ud,this._tapError=n||ud,this._tapComplete=i||ud,r(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||ud,this._tapError=t.error||ud,this._tapComplete=t.complete||ud)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class fd extends h{constructor(e,t){super()}schedule(e,t=0){return this}}class md extends fd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let gd=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class yd extends gd{constructor(e,t=gd.now){super(e,()=>yd.delegate&&yd.delegate!==this?yd.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return yd.delegate&&yd.delegate!==this?yd.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const _d=new yd(md);function vd(e,t=_d){return n=>n.lift(new bd(e,t))}class bd{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new wd(e,this.dueTime,this.scheduler))}}class wd extends f{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Cd,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function Cd(e){e.debouncedNext()}function xd(e,t){return function(n){return n.lift(new Ed(e,t))}}class Ed{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Sd(e,this.predicate,this.thisArg))}}class Sd extends f{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}const Pd=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})(),Td=new _(e=>e.complete());function Id(e){return e?function(e){return new _(t=>e.schedule(()=>t.complete()))}(e):Td}function Od(e){return t=>0===e?Id():t.lift(new kd(e))}class kd{constructor(e){if(this.total=e,this.total<0)throw new Pd}call(e,t){return t.subscribe(new Rd(e,this.total))}}class Rd extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function Ad(e){return null!=e&&"false"!=`${e}`}function Md(e,t=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function Dd(e){return Array.isArray(e)?e:[e]}function Fd(e){return null==e?"":"string"==typeof e?e:`${e}px`}function Ld(e){return e instanceof Da?e.nativeElement:e}let Bd;try{Bd="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(cJ){Bd=!1}let Nd,jd=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?kh(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Bd)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(sr(_c))},e.\u0275prov=de({factory:function(){return new e(sr(_c))},token:e,providedIn:"root"}),e})(),Hd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({}),e})();const zd=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Vd(){if(Nd)return Nd;if("object"!=typeof document||!document)return Nd=new Set(zd),Nd;let e=document.createElement("input");return Nd=new Set(zd.filter(t=>(e.setAttribute("type",t),e.type===t))),Nd}let Ud,Wd,Xd;function Gd(e){return function(){if(null==Ud&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ud=!0}))}finally{Ud=Ud||!1}return Ud}()?e:!!e.capture}function qd(){if(null==Wd){if("object"!=typeof document||!document)return Wd=!1,Wd;if("scrollBehavior"in document.documentElement.style)Wd=!0;else{const e=Element.prototype.scrollTo;Wd=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return Wd}function $d(e){if(function(){if(null==Xd){const e="undefined"!=typeof document?document.head:null;Xd=!(!e||!e.createShadowRoot&&!e.attachShadow)}return Xd}()){const t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}let Yd=(()=>{class e{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Kd=(()=>{class e{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,t)=>this._cleanupObserver(t))}observe(e){const t=Ld(e);return new _(e=>{const n=this._observeElement(t).subscribe(e);return()=>{n.unsubscribe(),this._unobserveElement(t)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const t=new x,n=this._mutationObserverFactory.create(e=>t.next(e));n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:t,stream:n}=this._observedElements.get(e);t&&t.disconnect(),n.complete(),this._observedElements.delete(e)}}}return e.\u0275fac=function(t){return new(t||e)(sr(Yd))},e.\u0275prov=de({factory:function(){return new e(sr(Yd))},token:e,providedIn:"root"}),e})(),Qd=(()=>{class e{constructor(e,t,n){this._contentObserver=e,this._elementRef=t,this._ngZone=n,this.event=new Xl,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Ad(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Md(e),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(vd(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(ws(Kd),ws(Da),ws(Mc))},e.\u0275dir=Ye({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e})(),Zd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[Yd]}),e})();function Jd(e,t){return(e.getAttribute(t)||"").match(/\S+/g)||[]}let ep=0;const tp=new Map;let np=null,rp=(()=>{class e{constructor(e){this._document=e}describe(e,t,n){if(!this._canBeDescribed(e,t))return;const r=ip(t,n);"string"!=typeof t?(op(t),tp.set(r,{messageElement:t,referenceCount:0})):tp.has(r)||this._createMessageElement(t,n),this._isElementDescribedByMessage(e,r)||this._addMessageReference(e,r)}removeDescription(e,t,n){if(!t||!this._isElementNode(e))return;const r=ip(t,n);if(this._isElementDescribedByMessage(e,r)&&this._removeMessageReference(e,r),"string"==typeof t){const e=tp.get(r);e&&0===e.referenceCount&&this._deleteMessageElement(r)}np&&0===np.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const e=this._document.querySelectorAll("[cdk-describedby-host]");for(let t=0;t<e.length;t++)this._removeCdkDescribedByReferenceIds(e[t]),e[t].removeAttribute("cdk-describedby-host");np&&this._deleteMessagesContainer(),tp.clear()}_createMessageElement(e,t){const n=this._document.createElement("div");op(n),n.textContent=e,t&&n.setAttribute("role",t),this._createMessagesContainer(),np.appendChild(n),tp.set(ip(e,t),{messageElement:n,referenceCount:0})}_deleteMessageElement(e){const t=tp.get(e),n=t&&t.messageElement;np&&n&&np.removeChild(n),tp.delete(e)}_createMessagesContainer(){if(!np){const e=this._document.getElementById("cdk-describedby-message-container");e&&e.parentNode&&e.parentNode.removeChild(e),np=this._document.createElement("div"),np.id="cdk-describedby-message-container",np.style.visibility="hidden",np.classList.add("cdk-visually-hidden"),this._document.body.appendChild(np)}}_deleteMessagesContainer(){np&&np.parentNode&&(np.parentNode.removeChild(np),np=null)}_removeCdkDescribedByReferenceIds(e){const t=Jd(e,"aria-describedby").filter(e=>0!=e.indexOf("cdk-describedby-message"));e.setAttribute("aria-describedby",t.join(" "))}_addMessageReference(e,t){const n=tp.get(t);!function(e,t,n){const r=Jd(e,t);r.some(e=>e.trim()==n.trim())||(r.push(n.trim()),e.setAttribute(t,r.join(" ")))}(e,"aria-describedby",n.messageElement.id),e.setAttribute("cdk-describedby-host",""),n.referenceCount++}_removeMessageReference(e,t){const n=tp.get(t);n.referenceCount--,function(e,t,n){const r=Jd(e,t).filter(e=>e!=n.trim());r.length?e.setAttribute(t,r.join(" ")):e.removeAttribute(t)}(e,"aria-describedby",n.messageElement.id),e.removeAttribute("cdk-describedby-host")}_isElementDescribedByMessage(e,t){const n=Jd(e,"aria-describedby"),r=tp.get(t),i=r&&r.messageElement.id;return!!i&&-1!=n.indexOf(i)}_canBeDescribed(e,t){if(!this._isElementNode(e))return!1;if(t&&"object"==typeof t)return!0;const n=null==t?"":`${t}`.trim(),r=e.getAttribute("aria-label");return!(!n||r&&r.trim()===n)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return e.\u0275fac=function(t){return new(t||e)(sr(su))},e.\u0275prov=de({factory:function(){return new e(sr(su))},token:e,providedIn:"root"}),e})();function ip(e,t){return"string"==typeof e?`${t||""}/${e}`:e}function op(e){e.id||(e.id="cdk-describedby-message-"+ep++)}class sp{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new x,this._typeaheadSubscription=h.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new x,this.change=new x,e instanceof ql&&e.changes.subscribe(e=>{if(this._activeItem){const t=e.toArray().indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(hd(e=>this._pressedLetters.push(e)),vd(e),xd(()=>this._pressedLetters.length>0),P(()=>this._pressedLetters.join(""))).subscribe(e=>{const t=this._getItemsArray();for(let n=1;n<t.length+1;n++){const r=(this._activeItemIndex+n)%t.length,i=t[r];if(!this._skipPredicateFn(i)&&0===i.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(t=>!e[t]||this._allowedModifierKeys.indexOf(t)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||cd(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),r=t[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof ql?this._items.toArray():this._items}}class ap extends sp{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class lp extends sp{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let cp=(()=>{class e{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const t=function(e){try{return e.frameElement}catch(cJ){return null}}((n=e).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(t){if(-1===hp(t))return!1;if(!this.isVisible(t))return!1}let r=e.nodeName.toLowerCase(),i=hp(e);return e.hasAttribute("contenteditable")?-1!==i:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){let t=e.nodeName.toLowerCase(),n="input"===t&&e.type;return"text"===n||"password"===n||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,t){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){let t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||up(e))}(e)&&!this.isDisabled(e)&&((null==t?void 0:t.ignoreVisibility)||this.isVisible(e))}}return e.\u0275fac=function(t){return new(t||e)(sr(jd))},e.\u0275prov=de({factory:function(){return new e(sr(jd))},token:e,providedIn:"root"}),e})();function up(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function hp(e){if(!up(e))return null;const t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class dp{constructor(e,t,n,r,i=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let n=0;n<t.length;n++)t[n].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[n]):t[n].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[n]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=0;n<t.length;n++){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(e)return e}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=t.length-1;n>=0;n--){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(e)return e}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Od(1)).subscribe(e)}}let pp=(()=>{class e{constructor(e,t,n){this._checker=e,this._ngZone=t,this._document=n}create(e,t=!1){return new dp(e,this._checker,this._ngZone,this._document,t)}}return e.\u0275fac=function(t){return new(t||e)(sr(cp),sr(Mc),sr(su))},e.\u0275prov=de({factory:function(){return new e(sr(cp),sr(Mc),sr(su))},token:e,providedIn:"root"}),e})(),fp=(()=>{class e{constructor(e,t,n){this._elementRef=e,this._focusTrapFactory=t,this._previouslyFocusedElement=null,this._document=n,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=Ad(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=Ad(e)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const t=e.autoCapture;t&&!t.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(pp),ws(su))},e.\u0275dir=Ye({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[at]}),e})();"undefined"!=typeof Element&&Element;const mp=new Xn("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),gp=new Xn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let yp=(()=>{class e{constructor(e,t,n,r){this._ngZone=t,this._defaultOptions=r,this._document=n,this._liveElement=e||this._createLiveElement()}announce(e,...t){const n=this._defaultOptions;let r,i;return 1===t.length&&"number"==typeof t[0]?i=t[0]:[r,i]=t,this.clear(),clearTimeout(this._previousTimeout),r||(r=n&&n.politeness?n.politeness:"polite"),null==i&&n&&(i=n.duration),this._liveElement.setAttribute("aria-live",r),this._ngZone.runOutsideAngular(()=>new Promise(t=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,t(),"number"==typeof i&&(this._previousTimeout=setTimeout(()=>this.clear(),i))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div");for(let n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}return e.\u0275fac=function(t){return new(t||e)(sr(mp,8),sr(Mc),sr(su),sr(gp,8))},e.\u0275prov=de({factory:function(){return new e(sr(mp,8),sr(Mc),sr(su),sr(gp,8))},token:e,providedIn:"root"}),e})();function _p(e){return 0===e.buttons}function vp(e){const t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const bp=new Xn("cdk-focus-monitor-default-options"),wp=Gd({passive:!0,capture:!0});let Cp=(()=>{class e{constructor(e,t,n,r){this._ngZone=e,this._platform=t,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=e=>{if(!this._lastTouchTarget){const t=_p(e)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(t)}},this._documentTouchstartListener=e=>{vp(e)?this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard"):(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=xp(e),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650))},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=e=>{const t=xp(e),n="focus"===e.type?this._onFocus:this._onBlur;for(let r=t;r;r=r.parentElement)n.call(this,e,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(e,t=!1){const n=Ld(e);if(!this._platform.isBrowser||1!==n.nodeType)return ld(null);const r=$d(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return t&&(i.checkChildren=!0),i.subject;const o={checkChildren:t,subject:new x,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(e){const t=Ld(e),n=this._elementInfo.get(t);n&&(n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(n))}focusVia(e,t,n){const r=Ld(e);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([e,n])=>this._originChanged(e,t,n)):(this._setOriginForCurrentEventQueue(t),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,t,n){n?e.classList.add(t):e.classList.remove(t)}_getFocusOrigin(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}_setClasses(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(e){const t=xp(e);return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}_onFocus(e,t){const n=this._elementInfo.get(t);n&&(n.checkChildren||t===xp(e))&&this._originChanged(t,this._getFocusOrigin(e),n)}_onBlur(e,t){const n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const t=e.rootNode,n=this._rootNodeFocusListenerCount.get(t)||0;n||this._ngZone.runOutsideAngular(()=>{t.addEventListener("focus",this._rootNodeFocusAndBlurListener,wp),t.addEventListener("blur",this._rootNodeFocusAndBlurListener,wp)}),this._rootNodeFocusListenerCount.set(t,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const e=this._getDocument(),t=this._getWindow();e.addEventListener("keydown",this._documentKeydownListener,wp),e.addEventListener("mousedown",this._documentMousedownListener,wp),e.addEventListener("touchstart",this._documentTouchstartListener,wp),t.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(e){const t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){const e=this._rootNodeFocusListenerCount.get(t);e>1?this._rootNodeFocusListenerCount.set(t,e-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,wp),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,wp),this._rootNodeFocusListenerCount.delete(t))}if(!--this._monitoredElementCount){const e=this._getDocument(),t=this._getWindow();e.removeEventListener("keydown",this._documentKeydownListener,wp),e.removeEventListener("mousedown",this._documentMousedownListener,wp),e.removeEventListener("touchstart",this._documentTouchstartListener,wp),t.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(e,t,n){this._setClasses(e,t),this._emitOrigin(n.subject,t),this._lastFocusOrigin=t}_getClosestElementsInfo(e){const t=[];return this._elementInfo.forEach((n,r)=>{(r===e||n.checkChildren&&r.contains(e))&&t.push([r,n])}),t}}return e.\u0275fac=function(t){return new(t||e)(sr(Mc),sr(jd),sr(su,8),sr(bp,8))},e.\u0275prov=de({factory:function(){return new e(sr(Mc),sr(jd),sr(su,8),sr(bp,8))},token:e,providedIn:"root"}),e})();function xp(e){return e.composedPath?e.composedPath()[0]:e.target}let Ep=(()=>{class e{constructor(e,t){this._elementRef=e,this._focusMonitor=t,this.cdkFocusChange=new Xl}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(e=>this.cdkFocusChange.emit(e))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(Cp))},e.\u0275dir=Ye({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),e})(),Sp=(()=>{class e{constructor(e,t){this._platform=e,this._document=t}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const t=this._document.defaultView||window,n=t&&t.getComputedStyle?t.getComputedStyle(e):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove("cdk-high-contrast-active"),e.remove("cdk-high-contrast-black-on-white"),e.remove("cdk-high-contrast-white-on-black");const t=this.getHighContrastMode();1===t?(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-black-on-white")):2===t&&(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-white-on-black"))}}}return e.\u0275fac=function(t){return new(t||e)(sr(jd),sr(su))},e.\u0275prov=de({factory:function(){return new e(sr(jd),sr(su))},token:e,providedIn:"root"}),e})(),Pp=(()=>{class e{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return e.\u0275fac=function(t){return new(t||e)(sr(Sp))},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Hd,Zd]]}),e})(),Tp=1;const Ip=(()=>Promise.resolve())(),Op={};function kp(e){return e in Op&&(delete Op[e],!0)}const Rp={setImmediate(e){const t=Tp++;return Op[t]=!0,Ip.then(()=>kp(t)&&e()),t},clearImmediate(e){kp(e)}};class Ap extends md{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=Rp.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(Rp.clearImmediate(t),e.scheduled=void 0)}}class Mp extends yd{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}const Dp=new Mp(Ap);function Fp(...e){return U(1)(ld(...e))}function Lp(...e){const t=e[e.length-1];return S(t)?(e.pop(),n=>Fp(e,n,t)):t=>Fp(e,t)}function Bp(e,t){return"function"==typeof t?n=>n.pipe(Bp((n,r)=>L(e(n,r)).pipe(P((e,i)=>t(n,e,r,i))))):t=>t.lift(new Np(e))}class Np{constructor(e){this.project=e}call(e,t){return t.subscribe(new jp(e,this.project))}}class jp extends N{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new B(this),r=this.destination;r.add(n),this.innerSubscription=j(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function Hp(e){return t=>t.lift(new zp(e))}class zp{constructor(e){this.notifier=e}call(e,t){const n=new Vp(e),r=j(this.notifier,new B(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}class Vp extends N{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Up(e,t){return new _(t?n=>t.schedule(Wp,0,{error:e,subscriber:n}):t=>t.error(e))}function Wp({error:e,subscriber:t}){t.error(e)}let Xp=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return ld(this.value);case"E":return Up(this.error);case"C":return Id()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();function Gp(e,t=_d){var n;const r=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new qp(r,t))}class qp{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new $p(e,this.delay,this.scheduler))}}class $p extends f{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,r=e.scheduler,i=e.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const t=Math.max(0,n[0].time-r.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule($p.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new Yp(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(Xp.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(Xp.createComplete()),this.unsubscribe()}}class Yp{constructor(e,t){this.time=e,this.notification=t}}class Kp{}function Qp(e,t){return{type:7,name:e,definitions:t,options:{}}}function Zp(e,t=null){return{type:4,styles:t,timings:e}}function Jp(e,t=null){return{type:2,steps:e,options:t}}function ef(e){return{type:6,styles:e,offset:null}}function tf(e,t,n){return{type:0,name:e,styles:t,options:n}}function nf(e){return{type:5,steps:e}}function rf(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function of(e=null){return{type:9,options:e}}function sf(e,t,n=null){return{type:11,selector:e,animation:t,options:n}}function af(e){Promise.resolve(null).then(e)}class lf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){af(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class cf{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const i=this.players.length;0==i?af(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==i&&this._onFinish()}),e.onDestroy(()=>{++n==i&&this._onDestroy()}),e.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class uf{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class hf extends uf{constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r}}class df extends uf{constructor(e,t,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class pf extends uf{constructor(e){super(),this.element=e instanceof Da?e.nativeElement:e}}class ff{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof hf?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof df?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof pf?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class mf extends ff{constructor(e,t,n,r,i){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");t.parentNode.insertBefore(n,t),this.outletElement.appendChild(t),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=i}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let n;return e.viewContainerRef?(n=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=t.create(e.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context);return n.rootNodes.forEach(e=>this.outletElement.appendChild(e)),n.detectChanges(),this.setDisposeFn(()=>{let e=t.indexOf(n);-1!==e&&t.remove(e)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let gf=(()=>{class e extends df{constructor(e,t){super(e,t)}}return e.\u0275fac=function(t){return new(t||e)(ws(dl),ws(_l))},e.\u0275dir=Ye({type:e,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[is]}),e})(),yf=(()=>{class e extends ff{constructor(e,t,n){super(),this._componentFactoryResolver=e,this._viewContainerRef=t,this._isInitialized=!1,this.attached=new Xl,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");e.setAttachedHost(this),t.parentNode.insertBefore(n,t),this._getRootNode().appendChild(t),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r=t.createComponent(n,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(e){e.setAttachedHost(this);const t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return e.\u0275fac=function(t){return new(t||e)(ws(ka),ws(_l),ws(su))},e.\u0275dir=Ye({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[is]}),e})(),_f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({}),e})();class vf{constructor(e,t){this._parentInjector=e,this._customTokens=t}get(e,t){const n=this._customTokens.get(e);return void 0!==n?n:this._parentInjector.get(e,t)}}const bf=new Xn("cdk-dir-doc",{providedIn:"root",factory:function(){return ar(su)}});let wf=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new Xl,e){const t=e.documentElement?e.documentElement.dir:null,n=(e.body?e.body.dir:null)||t;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(sr(bf,8))},e.\u0275prov=de({factory:function(){return new e(sr(bf,8))},token:e,providedIn:"root"}),e})(),Cf=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({}),e})();const xf=new Ha("11.2.4");function Ef(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Sf(e){switch(e.length){case 0:return new lf;case 1:return e[0];default:return new cf(e)}}function Pf(e,t,n,r,i={},o={}){const s=[],a=[];let l=-1,c=null;if(r.forEach(e=>{const n=e.offset,r=n==l,u=r&&c||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=t.normalizeStyleValue(n,r,a,s)}u[r]=a}),r||a.push(u),c=u,l=n}),s.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${s.join(e)}`)}return a}function Tf(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&If(n,"start",e)));break;case"done":e.onDone(()=>r(n&&If(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&If(n,"destroy",e)))}}function If(e,t,n){const r=n.totalTime,i=Of(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),o=e._data;return null!=o&&(i._data=o),i}function Of(e,t,n,r,i="",o=0,s){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function kf(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function Rf(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let Af=(e,t)=>!1,Mf=(e,t)=>!1,Df=(e,t,n)=>[];const Ff=Ef();(Ff||"undefined"!=typeof Element)&&(Af=(e,t)=>e.contains(t),Mf=(()=>{if(Ff||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):Mf}})(),Df=(e,t,n)=>{let r=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)r.push(n[e])}else{const n=e.querySelector(t);n&&r.push(n)}return r});let Lf=null,Bf=!1;function Nf(e){Lf||(Lf=("undefined"!=typeof document?document.body:null)||{},Bf=!!Lf.style&&"WebkitAppearance"in Lf.style);let t=!0;return Lf.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in Lf.style,!t&&Bf)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Lf.style),t}const jf=Mf,Hf=Af,zf=Df;function Vf(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let Uf=(()=>{class e{validateStyleProperty(e){return Nf(e)}matchesElement(e,t){return jf(e,t)}containsElement(e,t){return Hf(e,t)}query(e,t,n){return zf(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,i,o=[],s){return new lf(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Wf=(()=>{class e{}return e.NOOP=new Uf,e})();function Xf(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Gf(parseFloat(t[1]),t[2])}function Gf(e,t){switch(t){case"s":return 1e3*e;default:return e}}function qf(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,i=0,o="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=Gf(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Gf(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=e;if(!n){let n=!1,o=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(o,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:i,easing:o}}(e,t,n)}function $f(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Yf(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else $f(e,n);return n}function Kf(e,t,n){return n?t+":"+n+";":""}function Qf(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=Kf(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=Kf(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function Zf(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const i=sm(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),Ef()&&Qf(e))}function Jf(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=sm(t);e.style[n]=""}),Ef()&&Qf(e))}function em(e){return Array.isArray(e)?1==e.length?e[0]:Jp(e):e}const tm=new RegExp("{{\\s*(.+?)\\s*}}","g");function nm(e){let t=[];if("string"==typeof e){let n;for(;n=tm.exec(e);)t.push(n[1]);tm.lastIndex=0}return t}function rm(e,t,n){const r=e.toString(),i=r.replace(tm,(e,r)=>{let i=t[r];return t.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?e:i}function im(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const om=/-+([a-z0-9])/g;function sm(e){return e.replace(om,(...e)=>e[1].toUpperCase())}function am(e,t){return 0===e||0===t}function lm(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let o=t[0],s=[];if(r.forEach(e=>{o.hasOwnProperty(e)||s.push(e),o[e]=n[e]}),s.length)for(var i=1;i<t.length;i++){let n=t[i];s.forEach(function(t){n[t]=um(e,t)})}}return t}function cm(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function um(e,t){return window.getComputedStyle(e)[t]}function hm(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const i=r[1],o=r[2],s=r[3];t.push(fm(i,s)),"<"!=o[0]||"*"==i&&"*"==s||t.push(fm(s,i))}(e,n,t)):n.push(e),n}const dm=new Set(["true","1"]),pm=new Set(["false","0"]);function fm(e,t){const n=dm.has(e)||pm.has(e),r=dm.has(t)||pm.has(t);return(i,o)=>{let s="*"==e||e==i,a="*"==t||t==o;return!s&&n&&"boolean"==typeof i&&(s=i?dm.has(e):pm.has(e)),!a&&r&&"boolean"==typeof o&&(a=o?dm.has(t):pm.has(t)),s&&a}}const mm=new RegExp("s*:selfs*,?","g");function gm(e,t,n){return new ym(e).build(t,n)}class ym{constructor(e){this._driver=e}build(e,t){const n=new _m(t);return this._resetContextStyleTimingState(n),cm(this,em(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const i=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,i.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const i=this.visitTransition(e,t);n+=i.queryCount,r+=i.depCount,o.push(i)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(e=>{if(vm(e)){const t=e;Object.keys(t).forEach(e=>{nm(t[e]).forEach(e=>{o.hasOwnProperty(e)||i.add(e)})})}}),i.size){const n=im(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=cm(this,em(e.animation),t);return{type:1,matchers:hm(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:bm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>cm(this,e,t)),options:bm(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const i=e.steps.map(e=>{t.currentTime=n;const i=cm(this,e,t);return r=Math.max(r,t.currentTime),i});return t.currentTime=r,{type:3,steps:i,options:bm(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return wm(qf(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=wm(0,0,"");return e.dynamic=!0,e.strValue=r,e}return n=n||qf(r,t),wm(n.duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let i=e.styles?e.styles:ef({});if(5==i.type)r=this.visitKeyframes(i,t);else{let i=e.styles,o=!1;if(!i){o=!0;const e={};n.easing&&(e.easing=n.easing),i=ef(e)}t.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,t);s.isEmptyStep=o,r=s}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?"*"==e?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,i=null;return n.forEach(e=>{if(vm(e)){const t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,i=t.currentTime;n&&i>0&&(i-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=t.collectedStyles[t.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},i=nm(e);i.length&&i.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(vm(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(vm(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=l&&(r++,c=n.offset=l),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let u=0;r>0&&r<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(u=1/(c-1));const h=c-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,r)=>{const o=u>0?r==h?1:u*r:i[r],s=o*f;t.currentTime=d+p.delay+s,p.duration=s,this._validateStyleAst(e,t),e.offset=o,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:cm(this,em(e.animation),t),options:bm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:bm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:bm(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[i,o]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(mm,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,".ng-animating"),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+i:i,kf(t.collectedStyles,t.currentQuerySelector,{});const s=cm(this,em(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:e.selector,options:bm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:qf(e.timings,t.errors,!0);return{type:12,animation:cm(this,em(e.animation),t),timings:n,options:null}}}class _m{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function vm(e){return!Array.isArray(e)&&"object"==typeof e}function bm(e){var t;return e?(e=$f(e)).params&&(e.params=(t=e.params)?$f(t):null):e={},e}function wm(e,t,n){return{duration:e,delay:t,easing:n}}function Cm(e,t,n,r,i,o,s=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class xm{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Em=new RegExp(":enter","g"),Sm=new RegExp(":leave","g");function Pm(e,t,n,r,i,o={},s={},a,l,c=[]){return(new Tm).buildKeyframes(e,t,n,r,i,o,s,a,l,c)}class Tm{buildKeyframes(e,t,n,r,i,o,s,a,l,c=[]){l=l||new xm;const u=new Om(e,t,l,r,i,c,[]);u.options=a,u.currentTimeline.setStyles([o],null,u.errors,a),cm(this,n,u);const h=u.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(s).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([s],null,u.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[Cm(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const i=null!=n.duration?Xf(n.duration):null,o=null!=n.delay?Xf(n.delay):null;return 0!==i&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),cm(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const i=e.options;if(i&&(i.params||i.delay)&&(r=t.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Im);const e=Xf(i.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>cm(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?Xf(e.options.delay):0;e.steps.forEach(o=>{const s=t.createSubContext(e.options);i&&s.delayNextStep(i),cm(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return qf(t.params?rm(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,o=t.createSubContext().currentTimeline;o.easing=n.easing,e.styles.forEach(e=>{o.forwardTime((e.offset||0)*i),o.setStyles(e.styles,e.easing,t.errors,t.options),o.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(r+i),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},i=r.delay?Xf(r.delay):0;i&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Im);let o=n;const s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{t.currentQueryIndex=r;const s=t.createSubContext(e.options,n);i&&s.delayNextStep(i),n===t.element&&(a=s.currentTimeline),cm(this,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,i=e.timings,o=Math.abs(i.duration),s=o*(t.currentQueryTotal-1);let a=o*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;cm(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const Im={};class Om{constructor(e,t,n,r,i,o,s,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Im,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new km(this._driver,t,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=Xf(n.duration)),null!=n.delay&&(r.delay=Xf(n.delay));const i=n.params;if(i){let e=r.params;e||(e=this.options.params={}),Object.keys(i).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=rm(i[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,i=new Om(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=Im,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new Rm(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,i,o){let s=[];if(r&&s.push(this.element),e.length>0){e=(e=e.replace(Em,"."+this._enterClassName)).replace(Sm,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),s.push(...t)}return i||0!=s.length||o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),s}}class km{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new km(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||"*",this._currentKeyframe[e]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const i=r&&r.params||{},o=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t),r.forEach(e=>{n[e]="*"})):Yf(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(o).forEach(e=>{const t=rm(o[e],i,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:"*"),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Yf(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?e.add(n):"*"==r&&t.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=e.size?im(e.values()):[],o=t.size?im(t.values()):[];if(n){const e=r[0],t=$f(e);e.offset=0,t.offset=1,r=[e,t]}return Cm(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class Rm extends km{constructor(e,t,n,r,i,o,s=!1){super(e,t,o.delay),this.element=t,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],o=n+t,s=t/o,a=Yf(e[0],!1);a.offset=0,i.push(a);const l=Yf(e[0],!1);l.offset=Am(s),i.push(l);const c=e.length-1;for(let r=1;r<=c;r++){let s=Yf(e[r],!1);s.offset=Am((t+s.offset*n)/o),i.push(s)}n=o,t=0,r="",e=i}return Cm(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function Am(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class Mm{}class Dm extends Mm{normalizePropertyName(e,t){return sm(e)}normalizeStyleValue(e,t,n,r){let i="";const o=n.toString().trim();if(Fm[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return o+i}}const Fm=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Lm(e,t,n,r,i,o,s,a,l,c,u,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}const Bm={};class Nm{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,i){return e.some(e=>e(t,n,r,i))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],i=this._stateStyles[e],o=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):o}build(e,t,n,r,i,o,s,a,l,c){const u=[],h=this.ast.options&&this.ast.options.params||Bm,d=this.buildStyles(n,s&&s.params||Bm,u),p=a&&a.params||Bm,f=this.buildStyles(r,p,u),m=new Set,g=new Map,y=new Map,_="void"===r,v={params:Object.assign(Object.assign({},h),p)},b=c?[]:Pm(e,t,this.ast.animation,i,o,d,f,v,l,u);let w=0;if(b.forEach(e=>{w=Math.max(e.duration+e.delay,w)}),u.length)return Lm(t,this._triggerName,n,r,_,d,f,[],[],g,y,w,u);b.forEach(e=>{const n=e.element,r=kf(g,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const i=kf(y,n,{});e.postStyleProps.forEach(e=>i[e]=!0),n!==t&&m.add(n)});const C=im(m.values());return Lm(t,this._triggerName,n,r,_,d,f,b,C,g,y,w)}}class jm{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const n={},r=$f(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let o=i[e];o.length>1&&(o=rm(o,r,t)),n[e]=o})}}),n}}class Hm{constructor(e,t){this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new jm(e.style,e.options&&e.options.params||{})}),zm(this.states,"true","1"),zm(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new Nm(e,t,this.states))}),this.fallbackTransition=new Nm(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(i=>i.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function zm(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const Vm=new xm;class Um{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=gm(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,i=Pf(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],i=this._animations[e];let o;const s=new Map;if(i?(o=Pm(this._driver,t,i,"ng-enter","ng-leave",{},{},n,Vm,r),o.forEach(e=>{const t=kf(s,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,"*")})});const a=Sf(o.map(e=>{const t=s.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,r){const i=Of(t,"","","");return Tf(this._getPlayer(e),n,i,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Wm=[],Xm={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Gm={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class qm{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const t=$f(e);delete t.value,this.options=t}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const $m=new qm("void");class Ym{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ng(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var i;const o=kf(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};o.push(s);const a=kf(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(ng(e,"ng-trigger"),ng(e,"ng-trigger-"+t),a[t]=$m),()=>{this._engine.afterFlush(()=>{const e=o.indexOf(s);e>=0&&o.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const i=this._getTrigger(t),o=new Qm(this.id,t,e);let s=this._engine.statesByElement.get(e);s||(ng(e,"ng-trigger"),ng(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,s={}));let a=s[t];const l=new qm(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),s[t]=l,a||(a=$m),"void"!==l.value&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,l.params)){const t=[],n=i.matchStyles(a.value,a.params,t),r=i.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{Jf(e,n),Zf(e,r)})}return}const c=kf(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let u=i.matchTransition(a.value,l.value,e,l.params),h=!1;if(!u){if(!r)return;u=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:u,fromState:a,toState:l,player:o,isFallbackTransition:h}),h||(ng(e,"ng-animate-queued"),o.onStart(()=>{rg(e,"ng-animate-queued")})),o.onDone(()=>{let t=this.players.indexOf(o);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(o);e>=0&&n.splice(e,1)}}),this.players.push(o),c.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,".ng-trigger",!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,r){const i=this._engine.statesByElement.get(e);if(i){const o=[];if(Object.keys(i).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&Sf(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(t=>{const i=t.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||$m,a=new qm("void"),l=new Qm(this.id,i,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:o,fromState:s,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e.__ng_removed;r&&r!==Xm||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){ng(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(t=>{if(t.name==n.triggerName){const r=Of(i,n.triggerName,n.fromState.value,n.toState.value);r._data=e,Tf(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class Km{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new Ym(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=n[e[r]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(Zm(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Zm(t))return;const i=t.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ng(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),rg(e,"ng-animate-disabled"))}removeNode(e,t,n,r){if(Zm(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,i){return Zm(t)?this._fetchNamespace(e).listen(t,n,r,i):()=>{}}_buildInstruction(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,".ng-trigger",!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,".ng-animating",!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Sf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=Xm,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)ng(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?Sf(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new xm,r=[],i=new Map,o=[],s=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)c.add(t[n])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=tg(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n="ng-enter"+f++;p.set(t,n),e.forEach(e=>ng(e,n))});const m=[],g=new Set,y=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){const e=this.collectedLeaveElements[k],t=e.__ng_removed;t&&t.setForRemoval&&(m.push(e),g.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>g.add(e)):y.add(e))}const _=new Map,v=tg(h,Array.from(g));v.forEach((e,t)=>{const n="ng-leave"+f++;_.set(t,n),e.forEach(e=>ng(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>rg(e,n))}),v.forEach((e,t)=>{const n=_.get(t);e.forEach(e=>rg(e,n))}),m.forEach(e=>{this.processLeaveNode(e)})});const b=[],w=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(t).forEach(e=>{const t=e.player,i=e.element;if(b.push(t),this.collectedEnterElements.length){const e=i.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const c=!u||!this.driver.containsElement(u,i),h=_.get(i),d=p.get(i),f=this._buildInstruction(e,n,d,h,c);if(f.errors&&f.errors.length)w.push(f);else{if(c)return t.onStart(()=>Jf(i,f.fromStyles)),t.onDestroy(()=>Zf(i,f.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>Jf(i,f.fromStyles)),t.onDestroy(()=>Zf(i,f.toStyles)),void r.push(t);f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(i,f.timelines),o.push({instruction:f,player:t,element:i}),f.queriedElements.forEach(e=>kf(s,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=l.get(t);r||l.set(t,r=new Set),n.forEach(e=>r.add(e))})}});if(w.length){const e=[];w.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),b.forEach(e=>e.destroy()),this.reportError(e)}const C=new Map,x=new Map;o.forEach(e=>{const t=e.element;n.has(t)&&(x.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,C))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{kf(C,t,[]).push(e),e.destroy()})});const E=m.filter(e=>sg(e,a,l)),S=new Map;eg(S,this.driver,y,l,"*").forEach(e=>{sg(e,a,l)&&E.push(e)});const P=new Map;d.forEach((e,t)=>{eg(P,this.driver,new Set(e),a,"!")}),E.forEach(e=>{const t=S.get(e),n=P.get(e);S.set(e,Object.assign(Object.assign({},t),n))});const T=[],I=[],O={};o.forEach(e=>{const{element:t,player:o,instruction:s}=e;if(n.has(t)){if(c.has(t))return o.onDestroy(()=>Zf(t,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let e=O;if(x.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=x.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>x.set(t,e))}const n=this._buildAnimation(o.namespaceId,s,C,i,P,S);if(o.setRealPlayer(n),e===O)T.push(o);else{const t=this.playersByElement.get(e);t&&t.length&&(o.parentPlayer=Sf(t)),r.push(o)}}else Jf(t,s.fromStyles),o.onDestroy(()=>Zf(t,s.toStyles)),I.push(o),c.has(t)&&r.push(o)}),I.forEach(e=>{const t=i.get(e.element);if(t&&t.length){const n=Sf(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let k=0;k<m.length;k++){const e=m[k],t=e.__ng_removed;if(rg(e,"ng-leave"),t&&t.hasAnimation)continue;let n=[];if(s.size){let t=s.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,".ng-animating",!0);for(let e=0;e<r.length;e++){let t=s.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?ig(this,e,r):this.processLeaveNode(e)}return m.length=0,T.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),T}elementContainsData(e,t){let n=!1;const r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,i){let o=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(o=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||"void"==i;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),o}_beforeAnimationBuild(e,t,n){const r=t.element,i=t.isRemovalTransition?void 0:e,o=t.isRemovalTransition?void 0:t.triggerName;for(const s of t.timelines){const e=s.element,a=e!==r,l=kf(n,e,[]);this._getPreviousPlayers(e,a,i,o,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}Jf(r,t.fromStyles)}_buildAnimation(e,t,n,r,i,o){const s=t.triggerName,a=t.element,l=[],c=new Set,u=new Set,h=t.timelines.map(t=>{const h=t.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new lf(t.duration,t.delay);const p=h!==a,f=function(e){const t=[];return og(e,t),t}((n.get(h)||Wm).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),m=i.get(h),g=o.get(h),y=Pf(0,this._normalizer,0,t.keyframes,m,g),_=this._buildPlayer(t,y,f);if(t.subTimeline&&r&&u.add(h),p){const t=new Qm(e,s,h);t.setRealPlayer(_),l.push(t)}return _});l.forEach(e=>{kf(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>ng(e,"ng-animating"));const d=Sf(h);return d.onDestroy(()=>{c.forEach(e=>rg(e,"ng-animating")),Zf(a,t.toStyles)}),u.forEach(e=>{kf(r,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new lf(e.duration,e.delay)}}class Qm{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new lf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>Tf(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){kf(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Zm(e){return e&&1===e.nodeType}function Jm(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function eg(e,t,n,r,i){const o=[];n.forEach(e=>o.push(Jm(e)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(e=>{const n=o[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r.__ng_removed=Gm,s.push(r))}),e.set(r,o)});let a=0;return n.forEach(e=>Jm(e,o[a++])),s}function tg(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),i=new Map;function o(e){if(!e)return 1;let t=i.get(e);if(t)return t;const s=e.parentNode;return t=n.has(s)?s:r.has(s)?1:o(s),i.set(e,t),t}return t.forEach(e=>{const t=o(e);1!==t&&n.get(t).push(e)}),n}function ng(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function rg(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function ig(e,t,n){Sf(n).onDone(()=>e.processLeaveNode(t))}function og(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof cf?og(r.players,t):t.push(r)}}function sg(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(e=>i.add(e)):t.set(e,r),n.delete(e),!0}class ag{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new Km(e,t,n),this._timelineEngine=new Um(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,i){const o=e+"-"+r;let s=this._triggerCache[o];if(!s){const e=[],t=gm(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);s=function(e,t){return new Hm(e,t)}(r,t),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(t,r,s)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,i]=Rf(n);this._timelineEngine.command(e,t,i,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,i){if("@"==n.charAt(0)){const[e,r]=Rf(n);return this._timelineEngine.listen(e,t,r,i)}return this._transitionEngine.listen(e,t,n,r,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function lg(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=ug(t[0]),t.length>1&&(r=ug(t[t.length-1]))):t&&(n=ug(t)),n||r?new cg(e,n,r):null}let cg=(()=>{class e{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let i=e.initialStylesByElement.get(t);i||e.initialStylesByElement.set(t,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Zf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Zf(this._element,this._initialStyles),this._endStyles&&(Zf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Jf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Jf(this._element,this._endStyles),this._endStyles=null),Zf(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function ug(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];hg(i)&&(t=t||{},t[i]=e[i])}return t}function hg(e){return"display"===e||"position"===e}class dg{constructor(e,t,n,r,i,o,s){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=_g(e,"").trim();n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t=`${n}, ${t}`),yg(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),gg(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){pg(this._element,this._name,"paused")}resume(){pg(this._element,this._name,"running")}setPosition(e){const t=fg(this._element,this._name);this._position=e*this._duration,yg(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),gg(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=_g(e,"").split(","),r=mg(n,t);r>=0&&(n.splice(r,1),yg(e,"",n.join(",")))}(this._element,this._name))}}function pg(e,t,n){yg(e,"PlayState",n,fg(e,t))}function fg(e,t){const n=_g(e,"");return n.indexOf(",")>0?mg(n.split(","),t):mg([n],t)}function mg(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function gg(e,t,n){n?e.removeEventListener("animationend",t):e.addEventListener("animationend",t)}function yg(e,t,n,r){const i="animation"+t;if(null!=r){const t=e.style[i];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[i]=n}function _g(e,t){return e.style["animation"+t]||""}class vg{constructor(e,t,n,r,i,o,s,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new dg(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:um(this.element,n))})}this.currentSnapshot=e}}class bg extends lf{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=Vf(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class wg{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(e){return Nf(e)}matchesElement(e,t){return jf(e,t)}containsElement(e,t){return Hf(e,t)}query(e,t,n){return zf(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>Vf(e));let r=`@keyframes ${t} {\n`,i="";n.forEach(e=>{i=" ";const t=parseFloat(e.offset);r+=`${i}${100*t}% {\n`,i+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${t}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(e,t,n,r,i,o=[],s){const a=o.filter(e=>e instanceof vg),l={};am(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=lm(e,t,l));if(0==n)return new bg(e,c);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,u,t);document.querySelector("head").appendChild(h);const d=lg(e,t),p=new vg(e,t,u,n,r,i,c,d);return p.onDestroy(()=>{var e;(e=h).parentNode.removeChild(e)}),p}}class Cg{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:um(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class xg{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Eg().toString()),this._cssKeyframesDriver=new wg}validateStyleProperty(e){return Nf(e)}matchesElement(e,t){return jf(e,t)}containsElement(e,t){return Hf(e,t)}query(e,t,n){return zf(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const l={},c=o.filter(e=>e instanceof Cg);am(n,r)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const u=lg(e,t=lm(e,t=t.map(e=>Yf(e,!1)),l));return new Cg(e,t,a,u)}}function Eg(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let Sg=(()=>{class e extends Kp{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:Te.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?Jp(e):e;return Ig(this._renderer,null,t,"register",[n]),new Pg(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(sr(La),sr(su))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class Pg extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Tg(this._id,e,t||{},this._renderer)}}class Tg{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ig(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Ig(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}let Og=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new kg("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,i=t.id+"-"+this._currentId;this._currentId++,this.engine.register(i,e);const o=t=>{Array.isArray(t)?t.forEach(o):this.engine.registerTrigger(r,i,e,t.name,t)};return t.data.animation.forEach(o),new Rg(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(sr(La),sr(ag),sr(Mc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class kg{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Rg extends kg{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let Ag=(()=>{class e extends ag{constructor(e,t,n){super(e.body,t,n)}}return e.\u0275fac=function(t){return new(t||e)(sr(su),sr(Wf),sr(Mm))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Mg=new Xn("AnimationModuleType"),Dg=[{provide:Wf,useFactory:function(){return"function"==typeof Eg()?new xg:new wg}},{provide:Mg,useValue:"BrowserAnimations"},{provide:Kp,useClass:Sg},{provide:Mm,useFactory:function(){return new Dm}},{provide:ag,useClass:Ag},{provide:La,useFactory:function(e,t,n){return new Og(e,t,n)},deps:[Gh,ag,Mc]}];let Fg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:Dg,imports:[sd]}),e})();const Lg=["*",[["mat-option"],["ng-container"]]],Bg=["*","mat-option, ng-container"];function Ng(e,t){if(1&e&&Ps(0,"mat-pseudo-checkbox",4),2&e){const e=Bs();Cs("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function jg(e,t){if(1&e&&(Es(0,"span",5),la(1),Ss()),2&e){const e=Bs();Ui(1),ua("(",e.group.label,")")}}const Hg=["*"],zg=new Ha("11.2.4"),Vg=new Xn("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Ug,Wg=(()=>{class e{constructor(e,t,n){this._hasDoneGlobalChecks=!1,this._document=n,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=t,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const e=this._document.defaultView||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return qc()&&!this._isTestEnv()}_isTestEnv(){const e=this._getWindow();return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const t=getComputedStyle(e);t&&"none"!==t.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&zg.full!==xf.full&&console.warn("The Angular Material version ("+zg.full+") does not match the Angular CDK version ("+xf.full+").\nPlease ensure the versions of these two packages exactly match.")}}return e.\u0275fac=function(t){return new(t||e)(sr(Sp),sr(Vg,8),sr(su))},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Cf],Cf]}),e})();function Xg(e){return class extends e{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Ad(e)}}}function Gg(e,t){return class extends e{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const t=e||this.defaultColor;t!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),t&&this._elementRef.nativeElement.classList.add(`mat-${t}`),this._color=t)}}}function qg(e){return class extends e{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Ad(e)}}}function $g(e,t=0){return class extends e{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Md(e):this.defaultTabIndex}}}function Yg(e){return class extends e{constructor(...e){super(...e),this.errorState=!1,this.stateChanges=new x}updateErrorState(){const e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}}}try{Ug="undefined"!=typeof Intl}catch(cJ){Ug=!1}let Kg=(()=>{class e{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Qg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),e})();function Zg(e,t,n="mat"){e.changes.pipe(Lp(e)).subscribe(({length:e})=>{Jg(t,`${n}-2-line`,!1),Jg(t,`${n}-3-line`,!1),Jg(t,`${n}-multi-line`,!1),2===e||3===e?Jg(t,`${n}-${e}-line`,!0):e>3&&Jg(t,`${n}-multi-line`,!0)})}function Jg(e,t,n){const r=e.nativeElement.classList;n?r.add(t):r.remove(t)}let ey=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Wg],Wg]}),e})();class ty{constructor(e,t,n){this._renderer=e,this.element=t,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ny={enterDuration:450,exitDuration:400},ry=Gd({passive:!0}),iy=["mousedown","touchstart"],oy=["mouseup","mouseleave","touchend","touchcancel"];class sy{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ld(n))}fadeInRipple(e,t,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},ny),n.animation);n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=n.radius||function(e,t,n){const r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}(e,t,r),s=e-r.left,a=t-r.top,l=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=s-o+"px",c.style.top=a-o+"px",c.style.height=2*o+"px",c.style.width=2*o+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const u=new ty(this,c,n);return u.state=0,this._activeRipples.add(u),n.persistent||(this._mostRecentTransientRipple=u),this._runTimeoutOutsideZone(()=>{const e=u===this._mostRecentTransientRipple;u.state=1,n.persistent||e&&this._isPointerDown||u.fadeOut()},l),u}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const n=e.element,r=Object.assign(Object.assign({},ny),e.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}setupTriggerEvents(e){const t=Ld(e);t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(iy))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(oy),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=_p(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||t||n||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!vp(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let e=0;e<t.length;e++)this.fadeInRipple(t[e].clientX,t[e].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(e=>{this._triggerElement.addEventListener(e,this,ry)})})}_removeTriggerEvents(){this._triggerElement&&(iy.forEach(e=>{this._triggerElement.removeEventListener(e,this,ry)}),this._pointerUpEventsRegistered&&oy.forEach(e=>{this._triggerElement.removeEventListener(e,this,ry)}))}}const ay=new Xn("mat-ripple-global-options");let ly=(()=>{class e{constructor(e,t,n,r,i){this._elementRef=e,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new sy(this,t,e,n)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,t=0,n){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(Mc),ws(jd),ws(ay,8),ws(Mg,8))},e.\u0275dir=Ye({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,t){2&e&&Qs("mat-ripple-unbounded",t.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),e})(),cy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Wg,Hd],Wg]}),e})(),uy=(()=>{class e{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)(ws(Mg,8))},e.\u0275cmp=Ue({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,t){2&e&&Qs("mat-pseudo-checkbox-indeterminate","indeterminate"===t.state)("mat-pseudo-checkbox-checked","checked"===t.state)("mat-pseudo-checkbox-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,t){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),e})(),hy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Wg]]}),e})();const dy=new Xn("MAT_OPTION_PARENT_COMPONENT");class py{}const fy=Xg(py);let my=0,gy=(()=>{class e extends fy{constructor(e){var t;super(),this._labelId="mat-optgroup-label-"+my++,this._inert=null!==(t=null==e?void 0:e.inertGroups)&&void 0!==t&&t}}return e.\u0275fac=function(t){return new(t||e)(ws(dy,8))},e.\u0275dir=Ye({type:e,inputs:{label:"label"},features:[is]}),e})();const yy=new Xn("MatOptgroup");let _y=(()=>{class e extends gy{}return e.\u0275fac=function(t){return vy(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["mat-optgroup"]],hostAttrs:[1,"mat-optgroup"],hostVars:5,hostBindings:function(e,t){2&e&&(ys("role",t._inert?null:"group")("aria-disabled",t._inert?null:t.disabled.toString())("aria-labelledby",t._inert?null:t._labelId),Qs("mat-optgroup-disabled",t.disabled))},inputs:{disabled:"disabled"},exportAs:["matOptgroup"],features:[Ta([{provide:yy,useExisting:e}]),is],ngContentSelectors:Bg,decls:4,vars:2,consts:[["aria-hidden","true",1,"mat-optgroup-label",3,"id"]],template:function(e,t){1&e&&(js(Lg),Es(0,"span",0),la(1),Hs(2),Ss(),Hs(3,1)),2&e&&(Cs("id",t._labelId),Ui(1),ua("",t.label," "))},styles:[".mat-optgroup-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup-label[disabled]{cursor:default}[dir=rtl] .mat-optgroup-label{text-align:right}.mat-optgroup-label .mat-icon{margin-right:16px;vertical-align:middle}.mat-optgroup-label .mat-icon svg{vertical-align:top}[dir=rtl] .mat-optgroup-label .mat-icon{margin-left:16px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),e})();const vy=zn(_y);let by=0;class wy{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let Cy=(()=>{class e{constructor(e,t,n,r){this._element=e,this._changeDetectorRef=t,this._parent=n,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+by++,this.onSelectionChange=new Xl,this._stateChanges=new x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Ad(e)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,t){const n=this._getHostElement();"function"==typeof n.focus&&n.focus(t)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){13!==e.keyCode&&32!==e.keyCode||cd(e)||(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new wy(this,e))}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(void 0),ws(gy))},e.\u0275dir=Ye({type:e,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),e})(),xy=(()=>{class e extends Cy{constructor(e,t,n,r){super(e,t,n,r)}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(dy,8),ws(yy,8))},e.\u0275cmp=Ue({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,t){1&e&&Ds("click",function(){return t._selectViaInteraction()})("keydown",function(e){return t._handleKeydown(e)}),2&e&&(da("id",t.id),ys("tabindex",t._getTabIndex())("aria-selected",t._getAriaSelected())("aria-disabled",t.disabled.toString()),Qs("mat-selected",t.selected)("mat-option-multiple",t.multiple)("mat-active",t.active)("mat-option-disabled",t.disabled))},exportAs:["matOption"],features:[is],ngContentSelectors:Hg,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,t){1&e&&(js(),vs(0,Ng,1,2,"mat-pseudo-checkbox",0),Es(1,"span",1),Hs(2),Ss(),vs(3,jg,2,1,"span",2),Ps(4,"div",3)),2&e&&(Cs("ngIf",t.multiple),Ui(3),Cs("ngIf",t.group&&t.group._inert),Ui(1),Cs("matRippleTrigger",t._getHostElement())("matRippleDisabled",t.disabled||t.disableRipple))},directives:[uh,ly,uy],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),e})();function Ey(e,t,n){if(n.length){let r=t.toArray(),i=n.toArray(),o=0;for(let t=0;t<e+1;t++)r[t].group&&r[t].group===i[o]&&o++;return o}return 0}let Sy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[cy,Oh,Wg,hy]]}),e})();function Py(e,t,n,i){return r(n)&&(i=n,n=void 0),i?Py(e,t,n).pipe(P(e=>l(e)?i(...e):i(e))):new _(r=>{Ty(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function Ty(e,t,n,r,i){let o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const r=e;e.addEventListener(t,n,i),o=()=>r.removeEventListener(t,n,i)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const r=e;e.on(t,n),o=()=>r.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const r=e;e.addListener(t,n),o=()=>r.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let o=0,s=e.length;o<s;o++)Ty(e[o],t,n,r,i)}r.add(o)}function Iy(e){return!!e&&(e instanceof _||"function"==typeof e.lift&&"function"==typeof e.subscribe)}function Oy(e,t){return n=>n.lift(new ky(e,t))}class ky{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Ry(e,this.compare,this.keySelector))}}class Ry extends f{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}class Ay{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new My(e,this.durationSelector))}}class My extends N{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:t}=this;n=t(e)}catch(t){return this.destination.error(t)}const r=j(n,new B(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Dy(e){return!l(e)&&e-parseFloat(e)+1>=0}function Fy(e=0,t,n){let r=-1;return Dy(t)?r=Number(t)<1?1:Number(t):S(t)&&(n=t),S(n)||(n=_d),new _(t=>{const i=Dy(e)?e:+e-n.now();return n.schedule(Ly,i,{index:0,period:r,subscriber:t})})}function Ly(e){const{index:t,period:n,subscriber:r}=e;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function By(e,t=_d){return n=()=>Fy(e,t),function(e){return e.lift(new Ay(n))};var n}class Ny extends md{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}class jy extends yd{}const Hy=new jy(Ny);class zy extends f{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(zy.dispatch,this.delay,new Vy(e,this.destination)))}_next(e){this.scheduleMessage(Xp.createNext(e))}_error(e){this.scheduleMessage(Xp.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Xp.createComplete()),this.unsubscribe()}}class Vy{constructor(e,t){this.notification=e,this.destination=t}}class Uy extends x{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Wy(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new b;if(this.isStopped||this.hasError?o=h.EMPTY:(this.observers.push(e),o=new w(this,e)),r&&e.add(e=new zy(e,r)),t)for(let s=0;s<i&&!e.closed;s++)e.next(n[s]);else for(let s=0;s<i&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||Hy).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r}}class Wy{constructor(e,t){this.time=e,this.value=t}}function Xy(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,l=!1;return function(c){let u;s++,!i||a?(a=!1,i=new Uy(e,t,r),u=i.subscribe(this),o=c.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){l=!0,o=void 0,i.complete()}}),l&&(o=void 0)):u=i.subscribe(this),this.add(()=>{s--,u.unsubscribe(),u=void 0,o&&!l&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}class Gy{}class qy extends Gy{constructor(e){super(),this._data=e}connect(){return Iy(this._data)?this._data:ld(this._data)}disconnect(){}}class $y{constructor(e=!1,t,n=!0){this._multiple=e,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new x,t&&t.length&&(e?t.forEach(e=>this._markSelected(e)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}let Yy=(()=>{class e{constructor(){this._listeners=[]}notify(e,t){for(let n of this._listeners)n(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(t=>e!==t)}}ngOnDestroy(){this._listeners=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Ky=(()=>{class e{constructor(e,t,n){this._ngZone=e,this._platform=t,this._scrolled=new x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new _(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe(By(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ld()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(xd(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,e)&&t.push(r)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let n=Ld(t),r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Py(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(sr(Mc),sr(jd),sr(su,8))},e.\u0275prov=de({factory:function(){return new e(sr(Mc),sr(jd),sr(su,8))},token:e,providedIn:"root"}),e})(),Qy=(()=>{class e{constructor(e,t,n){this._platform=e,this._change=new x,this._changeListener=e=>{this._change.next(e)},this._document=n,t.runOutsideAngular(()=>{if(e.isBrowser){const e=this._getWindow();e.addEventListener("resize",this._changeListener),e.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,t=this._getWindow(),n=e.documentElement,r=n.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-r.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(By(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(sr(jd),sr(Mc),sr(su,8))},e.\u0275prov=de({factory:function(){return new e(sr(jd),sr(Mc),sr(su,8))},token:e,providedIn:"root"}),e})(),Zy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({}),e})(),Jy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Cf,Hd,Zy],Cf,Zy]}),e})();function e_(e,t=!1){return n=>n.lift(new t_(e,t))}class t_{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new n_(e,this.predicate,this.inclusive))}}class n_ extends f{constructor(e,t,n){super(e),this.predicate=t,this.inclusive=n,this.index=0}_next(e){const t=this.destination;let n;try{n=this.predicate(e,this.index++)}catch(r){return void t.error(r)}this.nextOrComplete(e,n)}nextOrComplete(e,t){const n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}const r_=qd();class i_{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Fd(-this._previousScrollPosition.left),e.style.top=Fd(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,n=this._document.body.style,r=t.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),r_&&(t.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),r_&&(t.scrollBehavior=r,n.scrollBehavior=i)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}class o_{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class s_{enable(){}disable(){}attach(){}}function a_(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function l_(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class c_{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:n}=this._viewportRuler.getViewportSize();a_(e,[{width:t,height:n,bottom:n,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let u_=(()=>{class e{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this.noop=()=>new s_,this.close=e=>new o_(this._scrollDispatcher,this._ngZone,this._viewportRuler,e),this.block=()=>new i_(this._viewportRuler,this._document),this.reposition=e=>new c_(this._scrollDispatcher,this._viewportRuler,this._ngZone,e),this._document=r}}return e.\u0275fac=function(t){return new(t||e)(sr(Ky),sr(Qy),sr(Mc),sr(su))},e.\u0275prov=de({factory:function(){return new e(sr(Ky),sr(Qy),sr(Mc),sr(su))},token:e,providedIn:"root"}),e})();class h_{constructor(e){if(this.scrollStrategy=new s_,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class d_{constructor(e,t,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class p_{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let f_=(()=>{class e{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(t){return new(t||e)(sr(su))},e.\u0275prov=de({factory:function(){return new e(sr(su))},token:e,providedIn:"root"}),e})(),m_=(()=>{class e extends f_{constructor(e){super(e),this._keydownListener=e=>{const t=this._attachedOverlays;for(let n=t.length-1;n>-1;n--)if(t[n]._keydownEvents.observers.length>0){t[n]._keydownEvents.next(e);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(sr(su))},e.\u0275prov=de({factory:function(){return new e(sr(su))},token:e,providedIn:"root"}),e})(),g_=(()=>{class e extends f_{constructor(e,t){super(e),this._platform=t,this._cursorStyleIsSet=!1,this._clickListener=e=>{const t=e.composedPath?e.composedPath()[0]:e.target,n=this._attachedOverlays.slice();for(let r=n.length-1;r>-1;r--){const i=n[r];if(!(i._outsidePointerEvents.observers.length<1)&&i.hasAttached()){if(i.overlayElement.contains(t))break;i._outsidePointerEvents.next(e)}}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("click",this._clickListener,!0),this._document.body.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=this._document.body.style.cursor,this._document.body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("click",this._clickListener,!0),this._document.body.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(sr(su),sr(jd))},e.\u0275prov=de({factory:function(){return new e(sr(su),sr(jd))},token:e,providedIn:"root"}),e})();const y_=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let __=(()=>{class e{constructor(e,t){this._platform=t,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){if(this._platform.isBrowser||y_){const e=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),y_?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return e.\u0275fac=function(t){return new(t||e)(sr(su),sr(jd))},e.\u0275prov=de({factory:function(){return new e(sr(su),sr(jd))},token:e,providedIn:"root"}),e})();class v_{constructor(e,t,n,r,i,o,s,a,l){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=o,this._document=s,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new x,this._attachments=new x,this._detachments=new x,this._locationChanges=h.EMPTY,this._backdropClickHandler=e=>this._backdropClick.next(e),this._keydownEvents=new x,this._outsidePointerEvents=new x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Od(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Fd(this._config.width),e.height=Fd(this._config.height),e.minWidth=Fd(this._config.minWidth),e.minHeight=Fd(this._config.minHeight),e.maxWidth=Fd(this._config.maxWidth),e.maxHeight=Fd(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e,t=this._backdropElement;if(!t)return;let n=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",n),t.parentNode&&t.parentNode.removeChild(t)),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",n)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(e,t,n){const r=e.classList;Dd(t).forEach(e=>{e&&(n?r.add(e):r.remove(e))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Hp(X(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const b_=/([A-Za-z%]+)$/;class w_{constructor(e,t,n,r,i){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new x,this._resizeSubscription=h.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=[];let i;for(let o of this._preferredPositions){let s=this._getOriginPoint(e,o),a=this._getOverlayPoint(s,t,o),l=this._getOverlayFit(a,t,n,o);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(l,a,n)?r.push({position:o,origin:s,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!i||i.overlayFit.visibleArea<l.visibleArea)&&(i={overlayFit:l,overlayPoint:a,originPoint:s,position:o,overlayRect:t})}if(r.length){let e=null,t=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>t&&(t=r,e=n)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&C_(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let n,r;if("center"==t.originX)n=e.left+e.width/2;else{const r=this._isRtl()?e.right:e.left,i=this._isRtl()?e.left:e.right;n="start"==t.originX?r:i}return r="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:n,y:r}}_getOverlayPoint(e,t,n){let r,i;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,i="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+i}}_getOverlayFit(e,t,n,r){const i=E_(t);let{x:o,y:s}=e,a=this._getOffset(r,"x"),l=this._getOffset(r,"y");a&&(o+=a),l&&(s+=l);let c=0-s,u=s+i.height-n.height,h=this._subtractOverflows(i.width,0-o,o+i.width-n.width),d=this._subtractOverflows(i.height,c,u),p=h*d;return{visibleArea:p,isCompletelyWithinViewport:i.width*i.height===p,fitsInViewportVertically:d===i.height,fitsInViewportHorizontally:h==i.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,i=n.right-t.x,o=x_(this._overlayRef.getConfig().minHeight),s=x_(this._overlayRef.getConfig().minWidth),a=e.fitsInViewportHorizontally||null!=s&&s<=i;return(e.fitsInViewportVertically||null!=o&&o<=r)&&a}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=E_(t),i=this._viewportRect,o=Math.max(e.x+r.width-i.width,0),s=Math.max(e.y+r.height-i.height,0),a=Math.max(i.top-n.top-e.y,0),l=Math.max(i.left-n.left-e.x,0);let c=0,u=0;return c=r.width<=i.width?l||-o:e.x<this._viewportMargin?i.left-n.left-e.x:0,u=r.height<=i.height?a||-s:e.y<this._viewportMargin?i.top-n.top-e.y:0,this._previousPushAmount={x:c,y:u},{x:e.x+c,y:e.y+u}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),n=new p_(e,t);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let i=0;i<t.length;i++)t[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let i,o,s,a,l,c;if("top"===t.overlayY)o=e.y,i=n.height-o+this._viewportMargin;else if("bottom"===t.overlayY)s=n.height-e.y+2*this._viewportMargin,i=n.height-s+this._viewportMargin;else{const t=Math.min(n.bottom-e.y+n.top,e.y),r=this._lastBoundingBoxSize.height;i=2*t,o=e.y-t,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-r/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)c=n.width-e.x+this._viewportMargin,a=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)l=e.x,a=n.right-e.x;else{const t=Math.min(n.right-e.x+n.left,e.x),r=this._lastBoundingBoxSize.width;a=2*t,l=e.x-t,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.x-r/2)}return{top:o,left:l,bottom:s,right:c,width:a,height:i}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=Fd(n.height),r.top=Fd(n.top),r.bottom=Fd(n.bottom),r.width=Fd(n.width),r.left=Fd(n.left),r.right=Fd(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(r.maxHeight=Fd(e)),i&&(r.maxWidth=Fd(i))}this._lastBoundingBoxSize=n,C_(this._boundingBox.style,r)}_resetBoundingBoxStyles(){C_(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){C_(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();C_(n,this._getExactOverlayY(t,e,r)),C_(n,this._getExactOverlayX(t,e,r))}else n.position="static";let s="",a=this._getOffset(t,"x"),l=this._getOffset(t,"y");a&&(s+=`translateX(${a}px) `),l&&(s+=`translateY(${l}px)`),n.transform=s.trim(),o.maxHeight&&(r?n.maxHeight=Fd(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Fd(o.maxWidth):i&&(n.maxWidth="")),C_(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},i=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=Fd(i.y),r}_getExactOverlayX(e,t,n){let r,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),r=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Fd(o.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:l_(e,n),isOriginOutsideView:a_(e,n),isOverlayClipped:l_(t,n),isOverlayOutsideView:a_(t,n)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Dd(e).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Da)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function C_(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function x_(e){if("number"!=typeof e&&null!=e){const[t,n]=e.split(b_);return n&&"px"!==n?null:parseFloat(t)}return e||null}function E_(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}class S_{constructor(e,t,n,r,i,o,s){this._preferredPositions=[],this._positionStrategy=new w_(n,r,i,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,n,r){const i=new d_(e,t,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}class P_{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:o,maxHeight:s}=n,a=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);e.position=this._cssPosition,e.marginLeft=a?"0":this._leftOffset,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,a?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let T_=(()=>{class e{constructor(e,t,n,r){this._viewportRuler=e,this._document=t,this._platform=n,this._overlayContainer=r}global(){return new P_}connectedTo(e,t,n){return new S_(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new w_(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(sr(Qy),sr(su),sr(jd),sr(__))},e.\u0275prov=de({factory:function(){return new e(sr(Qy),sr(su),sr(jd),sr(__))},token:e,providedIn:"root"}),e})(),I_=0,O_=(()=>{class e{constructor(e,t,n,r,i,o,s,a,l,c,u){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=o,this._ngZone=s,this._document=a,this._directionality=l,this._location=c,this._outsideClickDispatcher=u}create(e){const t=this._createHostElement(),n=this._createPaneElement(t),r=this._createPortalOutlet(n),i=new h_(e);return i.direction=i.direction||this._directionality.value,new v_(r,t,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id="cdk-overlay-"+I_++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Jc)),new mf(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(sr(u_),sr(__),sr(ka),sr(T_),sr(m_),sr(ns),sr(Mc),sr(su),sr(wf),sr(vu),sr(g_))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const k_=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],R_=new Xn("cdk-connected-overlay-scroll-strategy");let A_=(()=>{class e{constructor(e){this.elementRef=e}}return e.\u0275fac=function(t){return new(t||e)(ws(Da))},e.\u0275dir=Ye({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e})(),M_=(()=>{class e{constructor(e,t,n,r,i){this._overlay=e,this._dir=i,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=h.EMPTY,this._attachSubscription=h.EMPTY,this._detachSubscription=h.EMPTY,this._positionSubscription=h.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Xl,this.positionChange=new Xl,this.attach=new Xl,this.detach=new Xl,this.overlayKeydown=new Xl,this.overlayOutsideClick=new Xl,this._templatePortal=new df(t,n),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Ad(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Ad(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Ad(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Ad(e)}get push(){return this._push}set push(e){this._push=Ad(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=k_);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(e=>{this.overlayKeydown.next(e),27!==e.keyCode||this.disableClose||cd(e)||(e.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(e=>{this.overlayOutsideClick.next(e)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new h_({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}_updatePositionStrategy(e){const t=this.positions.map(e=>({originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||this.offsetX,offsetY:e.offsetY||this.offsetY,panelClass:e.panelClass||void 0}));return e.setOrigin(this.origin.elementRef).withPositions(t).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(e_(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(ws(O_),ws(dl),ws(_l),ws(R_),ws(wf,8))},e.\u0275dir=Ye({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[at]}),e})();const D_={provide:R_,deps:[O_],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};let F_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[O_,D_],imports:[[Cf,_f,Jy],Jy]}),e})();const L_=["mat-menu-item",""],B_=["*"];function N_(e,t){if(1&e){const e=ks();Es(0,"div",0),Ds("keydown",function(t){return Rt(e),Bs()._handleKeydown(t)})("click",function(){return Rt(e),Bs().closed.emit("click")})("@transformMenu.start",function(t){return Rt(e),Bs()._onAnimationStart(t)})("@transformMenu.done",function(t){return Rt(e),Bs()._onAnimationDone(t)}),Es(1,"div",1),Hs(2),Ss(),Ss()}if(2&e){const e=Bs();Cs("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),ys("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const j_={transformMenu:Qp("transformMenu",[tf("void",ef({opacity:0,transform:"scale(0.8)"})),rf("void => enter",Zp("120ms cubic-bezier(0, 0, 0.2, 1)",ef({opacity:1,transform:"scale(1)"}))),rf("* => void",Zp("100ms 25ms linear",ef({opacity:0})))]),fadeInItems:Qp("fadeInItems",[tf("showing",ef({opacity:1})),rf("void => *",[ef({opacity:0}),Zp("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},H_=new Xn("MatMenuContent"),z_=new Xn("MAT_MENU_PANEL");class V_{}const U_=qg(Xg(V_));let W_=(()=>{class e extends U_{constructor(e,t,n,r){super(),this._elementRef=e,this._focusMonitor=n,this._parentMenu=r,this.role="menuitem",this._hovered=new x,this._focused=new x,this._highlighted=!1,this._triggersSubmenu=!1,r&&r.addItem&&r.addItem(this)}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e,t;const n=this._elementRef.nativeElement.cloneNode(!0),r=n.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++){const t=r[i];null===(e=t.parentNode)||void 0===e||e.removeChild(t)}return(null===(t=n.textContent)||void 0===t?void 0:t.trim())||""}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(su),ws(Cp),ws(z_,8))},e.\u0275cmp=Ue({type:e,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,t){1&e&&Ds("click",function(e){return t._checkDisabled(e)})("mouseenter",function(){return t._handleMouseEnter()}),2&e&&(ys("role",t.role)("tabindex",t._getTabIndex())("aria-disabled",t.disabled.toString())("disabled",t.disabled||null),Qs("mat-menu-item",!0)("mat-menu-item-highlighted",t._highlighted)("mat-menu-item-submenu-trigger",t._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[is],attrs:L_,ngContentSelectors:B_,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(e,t){1&e&&(js(),Hs(0),Ps(1,"div",0)),2&e&&(Ui(1),Cs("matRippleDisabled",t.disableRipple||t.disabled)("matRippleTrigger",t._getHostElement()))},directives:[ly],encapsulation:2,changeDetection:0}),e})();const X_=new Xn("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let G_=0,q_=(()=>{class e{constructor(e,t,n){this._elementRef=e,this._ngZone=t,this._defaultOptions=n,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new ql,this._tabSubscription=h.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Xl,this.close=this.closed,this.panelId="mat-menu-panel-"+G_++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Ad(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Ad(e)}set panelClass(e){const t=this._previousPanelClass;t&&t.length&&t.split(" ").forEach(e=>{this._classList[e]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(e=>{this._classList[e]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new lp(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Lp(this._directDescendantItems),Bp(e=>X(...e.map(e=>e._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Lp(this._directDescendantItems),Bp(e=>X(...e.map(e=>e._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const t=e.keyCode,n=this._keyManager;switch(t){case 27:cd(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:38!==t&&40!==t||n.setFocusOrigin("keyboard"),n.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(Od(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const t=this._keyManager;if(t.setFocusOrigin(e).setFirstItemActive(),!t.activeItem&&this._directDescendantItems.length){let e=this._directDescendantItems.first._getHostElement().parentElement;for(;e;){if("menu"===e.getAttribute("role")){e.focus();break}e=e.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const t=`mat-elevation-z${Math.min(4+e,24)}`,n=Object.keys(this._classList).find(e=>e.startsWith("mat-elevation-z"));n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[t]=!0,this._previousElevation=t)}setPositionClasses(e=this.xPosition,t=this.yPosition){const n=this._classList;n["mat-menu-before"]="before"===e,n["mat-menu-after"]="after"===e,n["mat-menu-above"]="above"===t,n["mat-menu-below"]="below"===t}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Lp(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(e=>e._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(Mc),ws(X_))},e.\u0275dir=Ye({type:e,contentQueries:function(e,t,n){if(1&e&&(oc(n,H_,1),oc(n,W_,1),oc(n,W_,0)),2&e){let e;rc(e=sc())&&(t.lazyContent=e.first),rc(e=sc())&&(t._allItems=e),rc(e=sc())&&(t.items=e)}},viewQuery:function(e,t){if(1&e&&ic(dl,1),2&e){let e;rc(e=sc())&&(t.templateRef=e.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),e})(),$_=(()=>{class e extends q_{constructor(e,t,n){super(e,t,n)}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(Mc),ws(X_))},e.\u0275cmp=Ue({type:e,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,t){2&e&&ys("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Ta([{provide:z_,useExisting:e}]),is],ngContentSelectors:B_,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,t){1&e&&(js(),vs(0,N_,3,6,"ng-template"))},directives:[sh],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[j_.transformMenu,j_.fadeInItems]},changeDetection:0}),e})();const Y_=new Xn("mat-menu-scroll-strategy"),K_={provide:Y_,deps:[O_],useFactory:function(e){return()=>e.scrollStrategies.reposition()}},Q_=Gd({passive:!0});let Z_=(()=>{class e{constructor(e,t,n,r,i,o,s,a){this._overlay=e,this._element=t,this._viewContainerRef=n,this._menuItemInstance=o,this._dir=s,this._focusMonitor=a,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=h.EMPTY,this._hoverSubscription=h.EMPTY,this._menuCloseSubscription=h.EMPTY,this._handleTouchStart=e=>{vp(e)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Xl,this.onMenuOpen=this.menuOpened,this.menuClosed=new Xl,this.onMenuClose=this.menuClosed,this._scrollStrategy=r,this._parentMaterialMenu=i instanceof q_?i:void 0,t.nativeElement.addEventListener("touchstart",this._handleTouchStart,Q_),o&&(o._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(e=>{this._destroyMenu(e),"click"!==e&&"tab"!==e||!this._parentMaterialMenu||this._parentMaterialMenu.closed.emit(e)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Q_),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),t=e.getConfig();this._setPosition(t.positionStrategy),t.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof q_&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,t):this._element.nativeElement.focus(t)}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const t=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),!this.restoreFocus||"keydown"!==e&&this._openedBy&&this.triggersSubmenu()||this.focus(this._openedBy),this._openedBy=void 0,t instanceof q_?(t._resetAnimation(),t.lazyContent?t._animationDone.pipe(xd(e=>"void"===e.toState),Od(1),Hp(t.lazyContent._attached)).subscribe({next:()=>t.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),t.lazyContent&&t.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,t=this.menu.parentMenu;for(;t;)e++,t=t.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new h_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(e=>{this.menu.setPositionClasses("start"===e.connectionPair.overlayX?"after":"before","top"===e.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[t,n]="before"===this.menu.xPosition?["end","start"]:["start","end"],[r,i]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[o,s]=[r,i],[a,l]=[t,n],c=0;this.triggersSubmenu()?(l=t="before"===this.menu.xPosition?"start":"end",n=a="end"===t?"start":"end",c="bottom"===r?8:-8):this.menu.overlapTrigger||(o="top"===r?"bottom":"top",s="top"===i?"bottom":"top"),e.withPositions([{originX:t,originY:o,overlayX:a,overlayY:r,offsetY:c},{originX:n,originY:o,overlayX:l,overlayY:r,offsetY:c},{originX:t,originY:s,overlayX:a,overlayY:i,offsetY:-c},{originX:n,originY:s,overlayX:l,overlayY:i,offsetY:-c}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),t=this._overlayRef.detachments();return X(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:ld(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(xd(e=>e!==this._menuItemInstance),xd(()=>this._menuOpen)):ld(),t)}_handleMousedown(e){_p(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const t=e.keyCode;13!==t&&32!==t||(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===t&&"ltr"===this.dir||37===t&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(xd(e=>e===this._menuItemInstance&&!e.disabled),Gp(0,Dp)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof q_&&this.menu._isAnimating?this.menu._animationDone.pipe(Od(1),Gp(0,Dp),Hp(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new df(this.menu.templateRef,this._viewContainerRef)),this._portal}}return e.\u0275fac=function(t){return new(t||e)(ws(O_),ws(Da),ws(_l),ws(Y_),ws(z_,8),ws(W_,10),ws(wf,8),ws(Cp))},e.\u0275dir=Ye({type:e,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(e,t){1&e&&Ds("mousedown",function(e){return t._handleMousedown(e)})("keydown",function(e){return t._handleKeydown(e)})("click",function(e){return t._handleClick(e)}),2&e&&ys("aria-expanded",t.menuOpen||null)("aria-controls",t.menuOpen?t.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),e})(),J_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[K_],imports:[Wg]}),e})(),ev=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[K_],imports:[[Oh,Wg,cy,F_,J_],Zy,Wg,J_]}),e})();function tv(...e){if(1===e.length){const t=e[0];if(l(t))return nv(t,null);if(c(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return nv(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return nv(e=1===e.length&&l(e[0])?e[0]:e,null).pipe(P(e=>t(...e)))}return nv(e,null)}function nv(e,t){return new _(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const l=L(e[a]);let c=!1;n.add(l.subscribe({next:e=>{c||(c=!0,s++),i[a]=e},error:e=>n.error(e),complete:()=>{o++,o!==r&&c||(s===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}const rv=new Xn("NgValueAccessor"),iv={provide:rv,useExisting:oe(()=>ov),multi:!0};let ov=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(ws(Ba),ws(Da))},e.\u0275dir=Ye({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("change",function(e){return t.onChange(e.target.checked)})("blur",function(){return t.onTouched()})},features:[Ta([iv])]}),e})();const sv={provide:rv,useExisting:oe(()=>lv),multi:!0},av=new Xn("CompositionEventMode");let lv=(()=>{class e{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=ou()?ou().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(ws(Ba),ws(Da),ws(av,8))},e.\u0275dir=Ye({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Ds("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[Ta([sv])]}),e})();function cv(e){return null==e||0===e.length}function uv(e){return null!=e&&"number"==typeof e.length}const hv=new Xn("NgValidators"),dv=new Xn("NgAsyncValidators"),pv=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class fv{static min(e){return t=>{if(cv(t.value)||cv(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(cv(t.value)||cv(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return cv(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return cv(e.value)||pv.test(e.value)?null:{email:!0}}static minLength(e){return t=>cv(t.value)||!uv(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}static maxLength(e){return t=>uv(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}static pattern(e){if(!e)return fv.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(cv(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(mv);return 0==t.length?null:function(e){return yv(_v(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(mv);return 0==t.length?null:function(e){return tv(_v(e,t).map(gv)).pipe(P(yv))}}}function mv(e){return null!=e}function gv(e){const t=Rs(e)?L(e):e;return Ms(t),t}function yv(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function _v(e,t){return t.map(t=>t(e))}function vv(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function bv(e){return null!=e?fv.compose(vv(e)):null}function wv(e){return null!=e?fv.composeAsync(vv(e)):null}function Cv(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function xv(e){return e._rawValidators}function Ev(e){return e._rawAsyncValidators}let Sv=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e}),e})(),Pv=(()=>{class e extends Sv{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(t){return Tv(t||e)},e.\u0275dir=Ye({type:e,features:[is]}),e})();const Tv=zn(Pv);class Iv extends Sv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ov{constructor(e){this._cd=e}is(e){var t,n;return!!(null===(n=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===n?void 0:n[e])}}let kv=(()=>{class e extends Ov{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(ws(Iv,2))},e.\u0275dir=Ye({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&Qs("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[is]}),e})(),Rv=(()=>{class e extends Ov{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(ws(Pv,10))},e.\u0275dir=Ye({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&Qs("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[is]}),e})();const Av={provide:rv,useExisting:oe(()=>Mv),multi:!0};let Mv=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(ws(Ba),ws(Da))},e.\u0275dir=Ye({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},features:[Ta([Av])]}),e})();const Dv={provide:rv,useExisting:oe(()=>Lv),multi:!0};let Fv=(()=>{class e{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Lv=(()=>{class e{constructor(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Iv),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return e.\u0275fac=function(t){return new(t||e)(ws(Ba),ws(Da),ws(Fv),ws(ns))},e.\u0275dir=Ye({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("change",function(){return t.onChange()})("blur",function(){return t.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ta([Dv])]}),e})();const Bv={provide:rv,useExisting:oe(()=>Nv),multi:!0};let Nv=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(ws(Ba),ws(Da))},e.\u0275dir=Ye({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("change",function(e){return t.onChange(e.target.value)})("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},features:[Ta([Bv])]}),e})();const jv={provide:rv,useExisting:oe(()=>Hv),multi:!0};let Hv=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(t){return new(t||e)(ws(Ba),ws(Da))},e.\u0275dir=Ye({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&Ds("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ta([jv])]}),e})();const zv={provide:rv,useExisting:oe(()=>Vv),multi:!0};let Vv=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(void 0!==t.selectedOptions){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(t){return new(t||e)(ws(Ba),ws(Da))},e.\u0275dir=Ye({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&Ds("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ta([zv])]}),e})();function Uv(e,t){return[...t.path,e]}function Wv(e,t){qv(e,t,!0),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Yv(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Yv(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function Xv(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),$v(e,t,!0),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function Gv(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function qv(e,t,n){const r=xv(e);null!==t.validator?e.setValidators(Cv(r,t.validator)):"function"==typeof r&&e.setValidators([r]);const i=Ev(e);if(null!==t.asyncValidator?e.setAsyncValidators(Cv(i,t.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]),n){const n=()=>e.updateValueAndValidity();Gv(t._rawValidators,n),Gv(t._rawAsyncValidators,n)}}function $v(e,t,n){let r=!1;if(null!==e){if(null!==t.validator){const n=xv(e);if(Array.isArray(n)&&n.length>0){const i=n.filter(e=>e!==t.validator);i.length!==n.length&&(r=!0,e.setValidators(i))}}if(null!==t.asyncValidator){const n=Ev(e);if(Array.isArray(n)&&n.length>0){const i=n.filter(e=>e!==t.asyncValidator);i.length!==n.length&&(r=!0,e.setAsyncValidators(i))}}}if(n){const e=()=>{};Gv(t._rawValidators,e),Gv(t._rawAsyncValidators,e)}return r}function Yv(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Kv(e,t){qv(e,t,!1)}function Qv(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}const Zv=[ov,Nv,Mv,Hv,Vv,Lv];function Jv(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function eb(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{var t;e.constructor===lv?n=e:(t=e,Zv.some(e=>t.constructor===e)?r=e:i=e)}),i||r||n||null}function tb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function nb(e){return(sb(e)?e.validators:e)||null}function rb(e){return Array.isArray(e)?bv(e):e||null}function ib(e,t){return(sb(t)?t.asyncValidators:e)||null}function ob(e){return Array.isArray(e)?wv(e):e||null}function sb(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class ab{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=rb(this._rawValidators),this._composedAsyncValidatorFn=ob(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=rb(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ob(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const t=gv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof cb?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof ub&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Xl,this.statusChanges=new Xl}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class lb extends ab{constructor(e=null,t,n){super(nb(t),ib(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class cb extends ab{constructor(e,t,n){super(nb(t),ib(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof lb?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class ub extends ab{constructor(e,t,n){super(nb(t),ib(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof lb?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const hb={provide:Pv,useExisting:oe(()=>pb)},db=(()=>Promise.resolve(null))();let pb=(()=>{class e extends Pv{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Xl,this.form=new cb({},bv(e),wv(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){db.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Wv(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){db.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),tb(this._directives,e)})}addFormGroup(e){db.then(()=>{const t=this._findContainer(e.path),n=new cb({});Kv(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){db.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){db.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Jv(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(ws(hv,10),ws(dv,10))},e.\u0275dir=Ye({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Ds("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ta([hb]),is]}),e})();const fb={provide:Iv,useExisting:oe(()=>gb)},mb=(()=>Promise.resolve(null))();let gb=(()=>{class e extends Iv{constructor(e,t,n,r){super(),this.control=new lb,this._registered=!1,this.update=new Xl,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=eb(0,r)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Qv(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Uv(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Wv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){mb.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;mb.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(ws(Pv,9),ws(hv,10),ws(dv,10),ws(rv,10))},e.\u0275dir=Ye({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ta([fb]),is,at]}),e})(),yb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const _b=new Xn("NgModelWithFormControlWarning"),vb={provide:Iv,useExisting:oe(()=>bb)};let bb=(()=>{class e extends Iv{constructor(e,t,n,r){super(),this._ngModelWarningConfig=r,this.update=new Xl,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(t),this.valueAccessor=eb(0,n)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const t=e.form.previousValue;t&&Xv(t,this,!1),Wv(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Qv(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Xv(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return e.\u0275fac=function(t){return new(t||e)(ws(hv,10),ws(dv,10),ws(rv,10),ws(_b,8))},e.\u0275dir=Ye({type:e,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Ta([vb]),is,at]}),e._ngModelWarningSentOnce=!1,e})();const wb={provide:Pv,useExisting:oe(()=>Cb)};let Cb=(()=>{class e extends Pv{constructor(e,t){super(),this.validators=e,this.asyncValidators=t,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Xl,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($v(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return Wv(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){Xv(e.control||null,e,!1),tb(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,Jv(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=this.form.get(e.path);e.control!==t&&(Xv(e.control||null,e),t&&Wv(t,e),e.control=t)}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const t=this.form.get(e.path);Kv(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const t=this.form.get(e.path);t&&function(e,t){return $v(e,t,!1)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qv(this.form,this,!1),this._oldForm&&$v(this._oldForm,this,!1)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(ws(hv,10),ws(dv,10))},e.\u0275dir=Ye({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&Ds("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ta([wb]),is,at]}),e})();const xb={provide:Iv,useExisting:oe(()=>Eb)};let Eb=(()=>{class e extends Iv{constructor(e,t,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new Xl,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=eb(0,r)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Qv(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Uv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e.\u0275fac=function(t){return new(t||e)(ws(Pv,13),ws(hv,10),ws(dv,10),ws(rv,10),ws(_b,8))},e.\u0275dir=Ye({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ta([xb]),is,at]}),e._ngModelWarningSentOnce=!1,e})(),Sb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({}),e})(),Pb=(()=>{class e{group(e,t=null){const n=this._reduceControls(e);let r,i=null,o=null;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(i=null!=t.validators?t.validators:null,o=null!=t.asyncValidators?t.asyncValidators:null,r=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,o=null!=t.asyncValidator?t.asyncValidator:null)),new cb(n,{asyncValidators:o,updateOn:r,validators:i})}control(e,t,n){return new lb(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new ub(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof lb||e instanceof cb||e instanceof ub?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Tb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[Fv],imports:[Sb]}),e})(),Ib=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:_b,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[Pb,Fv],imports:[Sb]}),e})();function Ob(e,t){return H(e,t,1)}class kb{}class Rb{}class Ab{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ab?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ab;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ab?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Mb{encodeKey(e){return Db(e)}encodeValue(e){return Db(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function Db(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Fb{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Mb,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const r=e.indexOf("="),[i,o]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Fb({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function Lb(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Bb(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Nb(e){return"undefined"!=typeof FormData&&e instanceof FormData}class jb{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Ab),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new Fb,this.urlWithParams=t}serializeBody(){return null===this.body?null:Lb(this.body)||Bb(this.body)||Nb(this.body)||"string"==typeof this.body?this.body:this.body instanceof Fb?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Nb(this.body)?null:Bb(this.body)?this.body.type||null:Lb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fb?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(l=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),l)),new jb(t,n,i,{params:l,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Hb=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({});class zb{constructor(e,t=200,n="OK"){this.headers=e.headers||new Ab,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Vb extends zb{constructor(e={}){super(e),this.type=Hb.ResponseHeader}clone(e={}){return new Vb({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ub extends zb{constructor(e={}){super(e),this.type=Hb.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ub({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Wb extends zb{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Xb(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Gb=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof jb)r=e;else{let i,o;i=n.headers instanceof Ab?n.headers:new Ab(n.headers),n.params&&(o=n.params instanceof Fb?n.params:new Fb({fromObject:n.params})),r=new jb(e,t,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=ld(r).pipe(Ob(e=>this.handler.handle(e)));if(e instanceof jb||"events"===n.observe)return i;const o=i.pipe(xd(e=>e instanceof Ub));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(P(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return o.pipe(P(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return o.pipe(P(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return o.pipe(P(e=>e.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new Fb).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,Xb(n,t))}post(e,t,n={}){return this.request("POST",e,Xb(n,t))}put(e,t,n={}){return this.request("PUT",e,Xb(n,t))}}return e.\u0275fac=function(t){return new(t||e)(sr(kb))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class qb{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const $b=new Xn("HTTP_INTERCEPTORS");let Yb=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Kb=/^\)\]\}',?\n/;class Qb{}let Zb=(()=>{class e{constructor(){}build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Jb=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Ab(n.getAllResponseHeaders()),s=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new Vb({headers:o,status:t,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),l=null;204!==i&&(l=void 0===n.response?n.responseText:n.response),0===i&&(i=l?200:0);let c=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof l){const e=l;l=l.replace(Kb,"");try{l=""!==l?JSON.parse(l):null}catch(u){l=e,c&&(c=!1,l={error:u,text:l})}}c?(t.next(new Ub({body:l,headers:r,status:i,statusText:s,url:a||void 0})),t.complete()):t.error(new Wb({error:l,headers:r,status:i,statusText:s,url:a||void 0}))},a=e=>{const{url:r}=o(),i=new Wb({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let l=!1;const c=r=>{l||(t.next(o()),l=!0);let i={type:Hb.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},u=e=>{let n={type:Hb.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",u)),n.send(r),t.next({type:Hb.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",u)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(sr(Qb))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const ew=new Xn("XSRF_COOKIE_NAME"),tw=new Xn("XSRF_HEADER_NAME");class nw{}let rw=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=oh(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(sr(su),sr(_c),sr(ew))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),iw=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(sr(nw),sr(tw))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),ow=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get($b,[]);this.chain=e.reduceRight((e,t)=>new qb(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(sr(Rb),sr(ns))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),sw=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:iw,useClass:Yb}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:ew,useValue:t.cookieName}:[],t.headerName?{provide:tw,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[iw,{provide:$b,useExisting:iw,multi:!0},{provide:nw,useClass:rw},{provide:ew,useValue:"XSRF-TOKEN"},{provide:tw,useValue:"X-XSRF-TOKEN"}]}),e})(),aw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[Gb,{provide:kb,useClass:ow},Jb,{provide:Rb,useExisting:Jb},Zb,{provide:Qb,useExisting:Zb}],imports:[[sw.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();function lw(e){return function(t){const n=new cw(e),r=t.lift(n);return n.caught=r}}class cw{constructor(e){this.selector=e}call(e,t){return t.subscribe(new uw(e,this.selector,this.caught))}}class uw extends N{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new B(this);this.add(r);const i=j(n,r);i!==r&&this.add(i)}}}function hw(e){return t=>t.lift(new dw(e))}class dw{constructor(e){this.callback=e}call(e,t){return t.subscribe(new pw(e,this.callback))}}class pw extends f{constructor(e,t){super(e),this.add(new h(t))}}const fw=["*"];function mw(e){return Error(`Unable to find icon with the name "${e}"`)}function gw(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function yw(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}class _w{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let vw=(()=>{class e{constructor(e,t,n,r){this._httpClient=e,this._sanitizer=t,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(e,t,n){return this.addSvgIconInNamespace("",e,t,n)}addSvgIconLiteral(e,t,n){return this.addSvgIconLiteralInNamespace("",e,t,n)}addSvgIconInNamespace(e,t,n,r){return this._addSvgIconConfig(e,t,new _w(n,null,r))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,t,n,r){const i=this._sanitizer.sanitize(Gr.HTML,n);if(!i)throw yw(n);return this._addSvgIconConfig(e,t,new _w("",i,r))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,n){return this._addSvgIconSetConfig(e,new _w(t,null,n))}addSvgIconSetLiteralInNamespace(e,t,n){const r=this._sanitizer.sanitize(Gr.HTML,t);if(!r)throw yw(t);return this._addSvgIconSetConfig(e,new _w("",r,n))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const t=this._sanitizer.sanitize(Gr.RESOURCE_URL,e);if(!t)throw gw(e);const n=this._cachedIconsByUrl.get(t);return n?ld(bw(n)):this._loadSvgIconFromConfig(new _w(e,null)).pipe(hd(e=>this._cachedIconsByUrl.set(t,e)),P(e=>bw(e)))}getNamedSvgIcon(e,t=""){const n=ww(t,e);let r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(t,e),r)return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);const i=this._iconSetConfigs.get(t);return i?this._getSvgFromIconSetConfigs(e,i):Up(mw(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ld(bw(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(P(e=>bw(e)))}_getSvgFromIconSetConfigs(e,t){const n=this._extractIconWithNameFromAnySet(e,t);return n?ld(n):tv(t.filter(e=>!e.svgText).map(e=>this._loadSvgIconSetFromConfig(e).pipe(lw(t=>{const n=this._sanitizer.sanitize(Gr.RESOURCE_URL,e.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${t.message}`)),ld(null)})))).pipe(P(()=>{const n=this._extractIconWithNameFromAnySet(e,t);if(!n)throw mw(e);return n}))}_extractIconWithNameFromAnySet(e,t){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.svgText&&r.svgText.indexOf(e)>-1){const t=this._svgElementFromConfig(r),n=this._extractSvgIconFromSet(t,e,r.options);if(n)return n}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(hd(t=>e.svgText=t),P(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ld(null):this._fetchIcon(e).pipe(hd(t=>e.svgText=t))}_extractSvgIconFromSet(e,t,n){const r=e.querySelector(`[id="${t}"]`);if(!r)return null;const i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(i),this._setSvgAttributes(o,n)}_svgElementFromString(e){const t=this._document.createElement("DIV");t.innerHTML=e;const n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){const t=this._svgElementFromString("<svg></svg>"),n=e.attributes;for(let r=0;r<n.length;r++){const{name:e,value:i}=n[r];"id"!==e&&t.setAttribute(e,i)}for(let r=0;r<e.childNodes.length;r++)e.childNodes[r].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[r].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchIcon(e){var t;const{url:n,options:r}=e,i=null!==(t=null==r?void 0:r.withCredentials)&&void 0!==t&&t;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(Gr.RESOURCE_URL,n);if(!o)throw gw(n);const s=this._inProgressUrlFetches.get(o);if(s)return s;const a=this._httpClient.get(o,{responseType:"text",withCredentials:i}).pipe(hw(()=>this._inProgressUrlFetches.delete(o)),J());return this._inProgressUrlFetches.set(o,a),a}_addSvgIconConfig(e,t,n){return this._svgIconConfigs.set(ww(e,t),n),this}_addSvgIconSetConfig(e,t){const n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}_svgElementFromConfig(e){if(!e.svgElement){const t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}_getIconConfigFromResolvers(e,t){for(let r=0;r<this._resolvers.length;r++){const i=this._resolvers[r](t,e);if(i)return(n=i).url&&n.options?new _w(i.url,null,i.options):new _w(i,null)}var n}}return e.\u0275fac=function(t){return new(t||e)(sr(Gb,8),sr(nd),sr(su,8),sr(Qr))},e.\u0275prov=de({factory:function(){return new e(sr(Gb,8),sr(nd),sr(su,8),sr(Qr))},token:e,providedIn:"root"}),e})();function bw(e){return e.cloneNode(!0)}function ww(e,t){return e+":"+t}class Cw{constructor(e){this._elementRef=e}}const xw=Gg(Cw),Ew=new Xn("mat-icon-location",{providedIn:"root",factory:function(){const e=ar(su),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),Sw=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Pw=Sw.map(e=>`[${e}]`).join(", "),Tw=/^url\(['"]?#(.*?)['"]?\)$/;let Iw=(()=>{class e extends xw{constructor(e,t,n,r,i){super(e),this._iconRegistry=t,this._location=r,this._errorHandler=i,this._inline=!1,this._currentIconFetch=h.EMPTY,n||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Ad(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const t=e.querySelectorAll("style");for(let r=0;r<t.length;r++)t[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){const n=e.childNodes[t];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||e.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,t=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();t!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),t&&e.classList.add(t),this._previousFontSetClass=t),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const t=this._elementsWithExternalReferences;t&&t.forEach((t,n)=>{t.forEach(t=>{n.setAttribute(t.name,`url('${e}#${t.value}')`)})})}_cacheChildrenWithExternalReferences(e){const t=e.querySelectorAll(Pw),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<t.length;r++)Sw.forEach(e=>{const i=t[r],o=i.getAttribute(e),s=o?o.match(Tw):null;if(s){let t=n.get(i);t||(t=[],n.set(i,t)),t.push({name:e,value:s[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[t,n]=this._splitIconName(e);t&&(this._svgNamespace=t),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,t).pipe(Od(1)).subscribe(e=>this._setSvgElement(e),e=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${t}:${n}! ${e.message}`))})}}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(vw),Un("aria-hidden"),ws(Ew),ws(Qr))},e.\u0275cmp=Ue({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,t){2&e&&(ys("data-mat-icon-type",t._usingFontIcon()?"font":"svg")("data-mat-icon-name",t._svgName||t.fontIcon)("data-mat-icon-namespace",t._svgNamespace||t.fontSet),Qs("mat-icon-inline",t.inline)("mat-icon-no-color","primary"!==t.color&&"accent"!==t.color&&"warn"!==t.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[is],ngContentSelectors:fw,decls:1,vars:0,template:function(e,t){1&e&&(js(),Hs(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),e})(),Ow=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Wg],Wg]}),e})(),kw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Wg,cy],Wg]}),e})(),Rw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Wg],Wg]}),e})();function Aw(e){return new _(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?L(n):Id()).subscribe(t)})}class Mw{}let Dw=(()=>{class e extends Mw{getTranslation(e){return ld({})}}return e.\u0275fac=function(t){return Fw(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Fw=zn(Dw);class Lw{}let Bw=(()=>{class e{handle(e){return e.key}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function Nw(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;let n,r,i,o=typeof e;if(o==typeof t&&"object"==o){if(!Array.isArray(e)){if(Array.isArray(t))return!1;for(r in i=Object.create(null),e){if(!Nw(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&void 0!==t[r])return!1;return!0}if(!Array.isArray(t))return!1;if((n=e.length)==t.length){for(r=0;r<n;r++)if(!Nw(e[r],t[r]))return!1;return!0}}return!1}function jw(e){return null!=e}function Hw(e){return e&&"object"==typeof e&&!Array.isArray(e)}function zw(e,t){let n=Object.assign({},e);return Hw(e)&&Hw(t)&&Object.keys(t).forEach(r=>{Hw(t[r])?r in e?n[r]=zw(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}class Vw{}let Uw=(()=>{class e extends Vw{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(e,t){let n;return n="string"==typeof e?this.interpolateString(e,t):"function"==typeof e?this.interpolateFunction(e,t):e,n}getValue(e,t){let n="string"==typeof t?t.split("."):[t];t="";do{t+=n.shift(),!jw(e)||!jw(e[t])||"object"!=typeof e[t]&&n.length?n.length?t+=".":e=void 0:(e=e[t],t="")}while(n.length);return e}interpolateFunction(e,t){return e(t)}interpolateString(e,t){return t?e.replace(this.templateMatcher,(e,n)=>{let r=this.getValue(t,n);return jw(r)?r:e}):e}}return e.\u0275fac=function(t){return Ww(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Ww=zn(Uw);class Xw{}let Gw=(()=>{class e extends Xw{compile(e,t){return e}compileTranslations(e,t){return e}}return e.\u0275fac=function(t){return qw(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const qw=zn(Gw);class $w{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new Xl,this.onLangChange=new Xl,this.onDefaultLangChange=new Xl}}const Yw=new Xn("USE_STORE"),Kw=new Xn("USE_DEFAULT_LANG"),Qw=new Xn("DEFAULT_LANGUAGE"),Zw=new Xn("USE_EXTEND");let Jw=(()=>{class e{constructor(e,t,n,r,i,o=!0,s=!1,a=!1,l){this.store=e,this.currentLoader=t,this.compiler=n,this.parser=r,this.missingTranslationHandler=i,this.useDefaultLang=o,this.isolate=s,this.extend=a,this.pending=!1,this._onTranslationChange=new Xl,this._onLangChange=new Xl,this._onDefaultLangChange=new Xl,this._langs=[],this._translations={},this._translationRequests={},l&&this.setDefaultLang(l)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}setDefaultLang(e){if(e===this.defaultLang)return;let t=this.retrieveTranslations(e);void 0!==t?(null==this.defaultLang&&(this.defaultLang=e),t.pipe(Od(1)).subscribe(t=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(e===this.currentLang)return ld(this.translations[e]);let t=this.retrieveTranslations(e);return void 0!==t?(this.currentLang||(this.currentLang=e),t.pipe(Od(1)).subscribe(t=>{this.changeLang(e)}),t):(this.changeLang(e),ld(this.translations[e]))}retrieveTranslations(e){let t;return(void 0===this.translations[e]||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),t=this._translationRequests[e]),t}getTranslation(e){this.pending=!0;const t=this.currentLoader.getTranslation(e).pipe(Xy(1),Od(1));return this.loadingTranslations=t.pipe(P(t=>this.compiler.compileTranslations(t,e)),Xy(1),Od(1)),this.loadingTranslations.subscribe({next:t=>{this.translations[e]=this.extend&&this.translations[e]?Object.assign(Object.assign({},t),this.translations[e]):t,this.updateLangs(),this.pending=!1},error:e=>{this.pending=!1}}),t}setTranslation(e,t,n=!1){t=this.compiler.compileTranslations(t,e),this.translations[e]=(n||this.extend)&&this.translations[e]?zw(this.translations[e],t):t,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(e=>{-1===this.langs.indexOf(e)&&this.langs.push(e)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(e,t,n){let r;if(t instanceof Array){let r={},i=!1;for(let o of t)r[o]=this.getParsedResult(e,o,n),Iy(r[o])&&(i=!0);return i?tv(t.map(e=>Iy(r[e])?r[e]:ld(r[e]))).pipe(P(e=>{let n={};return e.forEach((e,r)=>{n[t[r]]=e}),n})):r}if(e&&(r=this.parser.interpolate(this.parser.getValue(e,t),n)),void 0===r&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(r=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],t),n)),void 0===r){let e={key:t,translateService:this};void 0!==n&&(e.interpolateParams=n),r=this.missingTranslationHandler.handle(e)}return void 0!==r?r:t}get(e,t){if(!jw(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(Ob(n=>Iy(n=this.getParsedResult(n,e,t))?n:ld(n)));{let n=this.getParsedResult(this.translations[this.currentLang],e,t);return Iy(n)?n:ld(n)}}getStreamOnTranslationChange(e,t){if(!jw(e)||!e.length)throw new Error('Parameter "key" required');return Fp(Aw(()=>this.get(e,t)),this.onTranslationChange.pipe(Bp(n=>{const r=this.getParsedResult(n.translations,e,t);return"function"==typeof r.subscribe?r:ld(r)})))}stream(e,t){if(!jw(e)||!e.length)throw new Error('Parameter "key" required');return Fp(Aw(()=>this.get(e,t)),this.onLangChange.pipe(Bp(n=>{const r=this.getParsedResult(n.translations,e,t);return Iy(r)?r:ld(r)})))}instant(e,t){if(!jw(e)||!e.length)throw new Error('Parameter "key" required');let n=this.getParsedResult(this.translations[this.currentLang],e,t);if(Iy(n)){if(e instanceof Array){let t={};return e.forEach((n,r)=>{t[e[r]]=e[r]}),t}return e}return n}set(e,t,n=this.currentLang){this.translations[n][e]=this.compiler.compile(t,n),this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}changeLang(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),null==this.defaultLang&&this.changeDefaultLang(e)}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.getTranslation(e)}resetLang(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==e?(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0]),e):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,e}}return e.\u0275fac=function(t){return new(t||e)(sr($w),sr(Mw),sr(Xw),sr(Vw),sr(Lw),sr(Kw),sr(Yw),sr(Zw),sr(Qw))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),eC=(()=>{class e{constructor(e,t){this.translate=e,this._ref=t,this.value=""}updateValue(e,t,n){let r=t=>{this.value=void 0!==t?t:e,this.lastKey=e,this._ref.markForCheck()};if(n){let i=this.translate.getParsedResult(n,e,t);Iy(i.subscribe)?i.subscribe(r):r(i)}this.translate.get(e,t).subscribe(r)}transform(e,...t){if(!e||!e.length)return e;if(Nw(e,this.lastKey)&&Nw(t,this.lastParams))return this.value;let n;if(jw(t[0])&&t.length)if("string"==typeof t[0]&&t[0].length){let e=t[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{n=JSON.parse(e)}catch(r){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${t[0]}`)}}else"object"!=typeof t[0]||Array.isArray(t[0])||(n=t[0]);return this.lastKey=e,this.lastParams=t,this.updateValue(e,n),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(t=>{this.lastKey&&t.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,n,t.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(t=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,n,t.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,n))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return e.\u0275fac=function(t){return new(t||e)(ws(Jw),hc())},e.\u0275pipe=Ke({name:"translate",type:e,pure:!1}),e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),tC=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[t.loader||{provide:Mw,useClass:Dw},t.compiler||{provide:Xw,useClass:Gw},t.parser||{provide:Vw,useClass:Uw},t.missingTranslationHandler||{provide:Lw,useClass:Bw},$w,{provide:Yw,useValue:t.isolate},{provide:Kw,useValue:t.useDefaultLang},{provide:Zw,useValue:t.extend},{provide:Qw,useValue:t.defaultLanguage},Jw]}}static forChild(t={}){return{ngModule:e,providers:[t.loader||{provide:Mw,useClass:Dw},t.compiler||{provide:Xw,useClass:Gw},t.parser||{provide:Vw,useClass:Uw},t.missingTranslationHandler||{provide:Lw,useClass:Bw},{provide:Yw,useValue:t.isolate},{provide:Kw,useValue:t.useDefaultLang},{provide:Zw,useValue:t.extend},{provide:Qw,useValue:t.defaultLanguage},Jw]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({}),e})();class nC extends f{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class rC extends f{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function iC(e,t,n,r,i=new rC(e,n,r)){if(!i.closed)return t instanceof _?t.subscribe(i):D(t)(i)}const oC={};class sC{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new aC(e,this.resultSelector))}}class aC extends nC{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(oC),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(iC(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===oC?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class lC{constructor(e){this.total=e}call(e,t){return t.subscribe(new cC(e,this.total))}}class cC extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}const uC=new Set;let hC,dC=(()=>{class e{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):pC}matchMedia(e){return this._platform.WEBKIT&&function(e){if(!uC.has(e))try{hC||(hC=document.createElement("style"),hC.setAttribute("type","text/css"),document.head.appendChild(hC)),hC.sheet&&(hC.sheet.insertRule(`@media ${e} {.fx-query-test{ }}`,0),uC.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return e.\u0275fac=function(t){return new(t||e)(sr(jd))},e.\u0275prov=de({factory:function(){return new e(sr(jd))},token:e,providedIn:"root"}),e})();function pC(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let fC=(()=>{class e{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return mC(Dd(e)).some(e=>this._registerQuery(e).mql.matches)}observe(e){let t=function(...e){let t,n;return S(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),W(e,n).lift(new sC(t))}(mC(Dd(e)).map(e=>this._registerQuery(e).observable));return t=Fp(t.pipe(Od(1)),t.pipe(e=>e.lift(new lC(1)),vd(0))),t.pipe(P(e=>{const t={matches:!1,breakpoints:{}};return e.forEach(({matches:e,query:n})=>{t.matches=t.matches||e,t.breakpoints[n]=e}),t}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e),n={observable:new _(e=>{const n=t=>this._zone.run(()=>e.next(t));return t.addListener(n),()=>{t.removeListener(n)}}).pipe(Lp(t),P(({matches:t})=>({query:e,matches:t})),Hp(this._destroySubject)),mql:t};return this._queries.set(e,n),n}}return e.\u0275fac=function(t){return new(t||e)(sr(dC),sr(Mc))},e.\u0275prov=de({factory:function(){return new e(sr(dC),sr(Mc))},token:e,providedIn:"root"}),e})();function mC(e){return e.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const gC={tooltipState:Qp("state",[tf("initial, void, hidden",ef({opacity:0,transform:"scale(0)"})),tf("visible",ef({transform:"scale(1)"})),rf("* => visible",Zp("200ms cubic-bezier(0, 0, 0.2, 1)",nf([ef({opacity:0,transform:"scale(0)",offset:0}),ef({opacity:.5,transform:"scale(0.99)",offset:.5}),ef({opacity:1,transform:"scale(1)",offset:1})]))),rf("* => hidden",Zp("100ms cubic-bezier(0, 0, 0.2, 1)",ef({opacity:0})))])},yC=Gd({passive:!0}),_C=new Xn("mat-tooltip-scroll-strategy"),vC={provide:_C,deps:[O_],useFactory:function(e){return()=>e.scrollStrategies.reposition({scrollThrottle:20})}},bC=new Xn("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let wC=(()=>{class e{constructor(e,t,n,r,i,o,s,a,l,c,u,h){this._overlay=e,this._elementRef=t,this._scrollDispatcher=n,this._viewContainerRef=r,this._ngZone=i,this._platform=o,this._ariaDescriber=s,this._focusMonitor=a,this._dir=c,this._defaultOptions=u,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new x,this._handleKeydown=e=>{this._isTooltipVisible()&&27===e.keyCode&&!cd(e)&&(e.preventDefault(),e.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=l,u&&(u.position&&(this.position=u.position),u.touchGestures&&(this.touchGestures=u.touchGestures)),i.runOutsideAngular(()=>{t.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=Ad(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Hp(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),e.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([t,n])=>{e.removeEventListener(t,n,yC)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const t=this._createOverlay();this._detach(),this._portal=this._portal||new hf(CC,this._viewContainerRef),this._tooltipInstance=t.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Hp(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),t=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(e);return t.positionChanges.pipe(Hp(this._destroyed)).subscribe(e=>{this._tooltipInstance&&e.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:t,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(Hp(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(){const e=this._overlayRef.getConfig().positionStrategy,t=this._getOrigin(),n=this._getOverlayPosition();e.withPositions([Object.assign(Object.assign({},t.main),n.main),Object.assign(Object.assign({},t.fallback),n.fallback)])}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,t=this.position;let n;"above"==t||"below"==t?n={originX:"center",originY:"above"==t?"top":"bottom"}:"before"==t||"left"==t&&e||"right"==t&&!e?n={originX:"start",originY:"center"}:("after"==t||"right"==t&&e||"left"==t&&!e)&&(n={originX:"end",originY:"center"});const{x:r,y:i}=this._invertPosition(n.originX,n.originY);return{main:n,fallback:{originX:r,originY:i}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,t=this.position;let n;"above"==t?n={overlayX:"center",overlayY:"bottom"}:"below"==t?n={overlayX:"center",overlayY:"top"}:"before"==t||"left"==t&&e||"right"==t&&!e?n={overlayX:"end",overlayY:"center"}:("after"==t||"right"==t&&e||"left"==t&&!e)&&(n={overlayX:"start",overlayY:"center"});const{x:r,y:i}=this._invertPosition(n.overlayX,n.overlayY);return{main:n,fallback:{overlayX:r,overlayY:i}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Od(1),Hp(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,t){return"above"===this.position||"below"===this.position?"top"===t?t="bottom":"bottom"===t&&(t="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:t}}_setupPointerEnterEventsIfNeeded(){!this._disabled&&this.message&&this._viewInitialized&&!this._passiveListeners.length&&(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",()=>this.hide()],["wheel",e=>this._wheelListener(e)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const t=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",t],["touchcancel",t])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([e,t])=>{this._elementRef.nativeElement.addEventListener(e,t,yC)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const t=(this._document||document).elementFromPoint(e.clientX,e.clientY),n=this._elementRef.nativeElement;t===n||n.contains(t)||this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const t=this._elementRef.nativeElement,n=t.style;("on"===e||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName)&&(n.userSelect=n.msUserSelect=n.webkitUserSelect=n.MozUserSelect="none"),"on"!==e&&t.draggable||(n.webkitUserDrag="none"),n.touchAction="none",n.webkitTapHighlightColor="transparent"}}}return e.\u0275fac=function(t){return new(t||e)(ws(O_),ws(Da),ws(Ky),ws(_l),ws(Mc),ws(jd),ws(rp),ws(Cp),ws(_C),ws(wf,8),ws(bC,8),ws(su))},e.\u0275dir=Ye({type:e,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]}),e})(),CC=(()=>{class e{constructor(e,t){this._changeDetectorRef=e,this._breakpointObserver=t,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new x,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}show(e){this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=null,this._markForCheck()},e)}hide(e){this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=null,this._markForCheck()},e)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(e){const t=e.toState;"hidden"!==t||this.isVisible()||this._onHide.next(),"visible"!==t&&"hidden"!==t||(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(ws(sl),ws(fC))},e.\u0275cmp=Ue({type:e,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,t){1&e&&Ds("click",function(){return t._handleBodyInteraction()},!1,ti)("auxclick",function(){return t._handleBodyInteraction()},!1,ti),2&e&&Ks("zoom","visible"===t._visibility?1:null)},decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(e,t){if(1&e&&(Es(0,"div",0),Ds("@state.start",function(){return t._animationStart()})("@state.done",function(e){return t._animationDone(e)}),Hl(1,"async"),la(2),Ss()),2&e){let e=null;Qs("mat-tooltip-handset",null==(e=zl(1,5,t._isHandset))?null:e.matches),Cs("ngClass",t.tooltipClass)("@state",t._visibility),Ui(2),ca(t.message)}},directives:[sh],pipes:[Eh],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[gC.tooltipState]},changeDetection:0}),e})(),xC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[vC],imports:[[Pp,Oh,F_,Wg],Wg,Zy]}),e})();n("GyMh");const EC=["floatingPanel"];function SC(e,t){1&e&&Hs(0,0,["*ngIf","isOpen"])}const PC=["*"],TC=["sidebar"];let IC=(()=>{class e{constructor(){this.subscriber=new x}ngOnDestroy(){this.subscriber.next(null),this.subscriber.complete(),this.subscriber.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e}),e})(),OC=(()=>{class e{constructor(){this.position={x:0,y:0},this.time=300,this.opened=new Xl,this.closed=new Xl,this.outsideClick=new Xl,this.isOpen=!1,this._isHide=!0}get styles(){return this.isOpen&&!this._isHide?{opacity:1}:{opacity:0}}get transition(){return`opacity ${this.time}ms`}handleClick(){this.outsideClick.emit()}open(){this._timerId&&(clearTimeout(this._timerId),this._timerId=null),this.isOpen=!0,this._isHide=!1}close(){this._isHide=!0,this._timerId=setTimeout(()=>this.isOpen=!1,this.time)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["eui-floating-panel"]],viewQuery:function(e,t){if(1&e&&ic(EC,1),2&e){let e;rc(e=sc())&&(t.floatingPanel=e.first)}},hostBindings:function(e,t){1&e&&Ds("click",function(){return t.handleClick()},!1,ei)},inputs:{position:"position",time:"time"},outputs:{opened:"opened",closed:"closed",outsideClick:"outsideClick"},ngContentSelectors:PC,decls:3,vars:8,consts:[[1,"floating-panel",3,"ngStyle","click"],["floatingPanel",""],[4,"ngIf"]],template:function(e,t){1&e&&(js(),Es(0,"div",0,1),Ds("click",function(e){return e.stopPropagation()}),vs(2,SC,1,0,"ng-content",2),Ss()),2&e&&(Ks("left",t.position.x,"px")("top",t.position.y,"px")("transition",t.transition),Cs("ngStyle",t.styles),Ui(2),Cs("ngIf",t.isOpen))},directives:[yh,uh],styles:[".floating-panel[_ngcontent-%COMP%]{position:absolute;border-right:1px solid #eee;border-radius:3px;box-shadow:0 8px 24px rgba(0,0,0,.2);background:#fff;opacity:0;z-index:1}"]}),e})(),kC=(()=>{class e{constructor(){this.float="left",this.opened=new Xl,this.closed=new Xl,this.outsideClick=new Xl}get styles(){let e;return e=this.isOpen?"left"===this.float?{left:0}:{right:0}:"left"===this.float?{left:-1*this.width+"px"}:{right:-1*this.width+"px"},e}handleClick(){this.outsideClick.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["eui-sidebar"]],viewQuery:function(e,t){if(1&e&&ic(TC,1),2&e){let e;rc(e=sc())&&(t.sidebar=e.first)}},hostBindings:function(e,t){1&e&&Ds("click",function(){return t.handleClick()},!1,ei)},inputs:{float:"float",isOpen:"isOpen",width:"width"},outputs:{opened:"opened",closed:"closed",outsideClick:"outsideClick"},ngContentSelectors:PC,decls:3,vars:3,consts:[[1,"sidebar",3,"ngStyle","click"],["sidebar",""]],template:function(e,t){1&e&&(js(),Es(0,"div",0,1),Ds("click",function(e){return e.stopPropagation()}),Hs(2),Ss()),2&e&&(Ks("width",t.width,"px"),Cs("ngStyle",t.styles))},directives:[yh],styles:[".sidebar[_ngcontent-%COMP%]{position:absolute;border-right:1px solid #eee;box-sizing:border-box;height:calc(100% - 4px);top:0;background:#fff;transition:right .3s,left .3s;z-index:2}"]}),e})(),RC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[aw,Oh,sd,Tb,ev,Ow,kw,xC,Rw,tC]]}),e})();function AC(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function MC(e,t){return function(n,r){t(n,r,e)}}function DC(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function FC(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}class LC extends x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(e){super.next(this._value=e)}}class BC extends class{constructor(){this.expansionModel=new $y(!0)}toggle(e){this.expansionModel.toggle(this._trackByValue(e))}expand(e){this.expansionModel.select(this._trackByValue(e))}collapse(e){this.expansionModel.deselect(this._trackByValue(e))}isExpanded(e){return this.expansionModel.isSelected(this._trackByValue(e))}toggleDescendants(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t.map(e=>this._trackByValue(e)))}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t.map(e=>this._trackByValue(e)))}_trackByValue(e){return this.trackBy?this.trackBy(e):e}}{constructor(e,t,n){super(),this.getLevel=e,this.isExpandable=t,this.options=n,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(e){const t=[];for(let n=this.dataNodes.indexOf(e)+1;n<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[n]);n++)t.push(this.dataNodes[n]);return t}expandAll(){this.expansionModel.select(...this.dataNodes.map(e=>this._trackByValue(e)))}}const NC=new Xn("CDK_TREE_NODE_OUTLET_NODE");let jC=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(ws(_l),ws(NC,8))},e.\u0275dir=Ye({type:e,selectors:[["","cdkTreeNodeOutlet",""]]}),e})();class HC{constructor(e){this.$implicit=e}}let zC=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(ws(dl))},e.\u0275dir=Ye({type:e,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),e})(),VC=(()=>{class e{constructor(e,t){this._differs=e,this._changeDetectorRef=t,this._onDestroy=new x,this._levels=new Map,this.viewChange=new LC({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter(e=>!e.when);this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;var t;(t=this._dataSource)&&"function"==typeof t.connect?e=this._dataSource.connect(this):Iy(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=ld(this._dataSource)),e&&(this._dataSubscription=e.pipe(Hp(this._onDestroy)).subscribe(e=>this.renderNodeChanges(e)))}renderNodeChanges(e,t=this._dataDiffer,n=this._nodeOutlet.viewContainer,r){const i=t.diff(e);i&&(i.forEachOperation((t,i,o)=>{if(null==t.previousIndex)this.insertNode(e[o],o,n,r);else if(null==o)n.remove(i),this._levels.delete(t.item);else{const e=n.get(i);n.move(e,o)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(n=>n.when&&n.when(t,e))||this._defaultNodeDef}insertNode(e,t,n,r){const i=this._getNodeDef(e,t),o=new HC(e);o.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==r&&this._levels.has(r)?this._levels.get(r)+1:0,this._levels.set(e,o.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(i.template,o,t),UC.mostRecentTreeNode&&(UC.mostRecentTreeNode.data=e)}}return e.\u0275fac=function(t){return new(t||e)(ws(Ja),ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["cdk-tree"]],contentQueries:function(e,t,n){if(1&e&&oc(n,zC,1),2&e){let e;rc(e=sc())&&(t._nodeDefs=e)}},viewQuery:function(e,t){if(1&e&&ic(jC,3),2&e){let e;rc(e=sc())&&(t._nodeOutlet=e.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,t){1&e&&Os(0,0)},directives:[jC],encapsulation:2}),e})(),UC=(()=>{class e{constructor(t,n){this._elementRef=t,this._tree=n,this._destroyed=new x,this._dataChanges=new x,e.mostRecentTreeNode=this,this._elementRef.nativeElement.classList.add("cdk-tree-node"),this.role="treeitem"}get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}_setExpanded(e){this._isAriaExpanded=e,this._elementRef.nativeElement.setAttribute("aria-expanded",`${e}`)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(e){let t=e.parentElement;for(;t&&!WC(t);)t=t.parentElement;return t?t.classList.contains("cdk-nested-tree-node")?Md(t.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngDoCheck(){this.isExpanded!=this._isAriaExpanded&&this._setExpanded(this.isExpanded)}ngOnDestroy(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(VC))},e.\u0275dir=Ye({type:e,selectors:[["cdk-tree-node"]],inputs:{role:"role"},exportAs:["cdkTreeNode"]}),e.mostRecentTreeNode=null,e})();function WC(e){const t=e.classList;return!(!(null==t?void 0:t.contains("cdk-nested-tree-node"))&&!(null==t?void 0:t.contains("cdk-tree")))}const XC=/([A-Za-z%]+)$/;let GC=(()=>{class e{constructor(e,t,n,r){this._treeNode=e,this._tree=t,this._element=n,this._dir=r,this._destroyed=new x,this.indentUnits="px",this._indent=40,this._setPadding(),r&&r.change.pipe(Hp(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?`${t*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const t=this._paddingIndent();if(t!==this._currentPadding||e){const e=this._element.nativeElement,n=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",r="paddingLeft"===n?"paddingRight":"paddingLeft";e.style[n]=t||"",e.style[r]="",this._currentPadding=t}}_setLevelInput(e){this._level=Md(e,null),this._setPadding()}_setIndentInput(e){let t=e,n="px";if("string"==typeof e){const r=e.split(XC);t=r[0],n=r[1]||n}this.indentUnits=n,this._indent=Md(t),this._setPadding()}}return e.\u0275fac=function(t){return new(t||e)(ws(UC),ws(VC),ws(Da),ws(wf,8))},e.\u0275dir=Ye({type:e,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),e})(),qC=(()=>{class e{constructor(e,t){this._tree=e,this._treeNode=t,this._recursive=!1}get recursive(){return this._recursive}set recursive(e){this._recursive=Ad(e)}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(ws(VC),ws(UC))},e.\u0275dir=Ye({type:e,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,t){1&e&&Ds("click",function(e){return t._toggle(e)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),e})(),$C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({}),e})();const YC=$g(Xg(UC));let KC=(()=>{class e extends YC{constructor(e,t,n){super(e,t),this._elementRef=e,this._tree=t,this.tabIndex=Number(n)||0,this._elementRef.nativeElement.classList.add("mat-tree-node")}ngOnInit(){super.ngOnInit()}ngDoCheck(){super.ngDoCheck()}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(VC),Un("tabindex"))},e.\u0275dir=Ye({type:e,selectors:[["mat-tree-node"]],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[Ta([{provide:UC,useExisting:e}]),is]}),e})(),QC=(()=>{class e extends zC{}return e.\u0275fac=function(t){return ZC(t||e)},e.\u0275dir=Ye({type:e,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[Ta([{provide:zC,useExisting:e}]),is]}),e})();const ZC=zn(QC);let JC=(()=>{class e extends GC{get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}}return e.\u0275fac=function(t){return ex(t||e)},e.\u0275dir=Ye({type:e,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[Ta([{provide:GC,useExisting:e}]),is]}),e})();const ex=zn(JC);let tx=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(ws(_l),ws(NC,8))},e.\u0275dir=Ye({type:e,selectors:[["","matTreeNodeOutlet",""]],features:[Ta([{provide:jC,useExisting:e}])]}),e})(),nx=(()=>{class e extends VC{}return e.\u0275fac=function(t){return rx(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["mat-tree"]],viewQuery:function(e,t){if(1&e&&ic(tx,3),2&e){let e;rc(e=sc())&&(t._nodeOutlet=e.first)}},hostAttrs:["role","tree",1,"mat-tree","cdk-tree"],exportAs:["matTree"],features:[Ta([{provide:VC,useExisting:e}]),is],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,t){1&e&&Os(0,0)},directives:[tx],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),e})();const rx=zn(nx);let ix=(()=>{class e extends qC{get recursive(){return this._recursive}set recursive(e){this._recursive=Ad(e)}}return e.\u0275fac=function(t){return ox(t||e)},e.\u0275dir=Ye({type:e,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[Ta([{provide:qC,useExisting:e}]),is]}),e})();const ox=zn(ix);let sx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[$C,Wg],Wg]}),e})();class ax{constructor(e,t,n,r){this.transformFunction=e,this.getLevel=t,this.isExpandable=n,this.getChildren=r}_flattenNode(e,t,n,r){const i=this.transformFunction(e,t);if(n.push(i),this.isExpandable(i)){const i=this.getChildren(e);i&&(Array.isArray(i)?this._flattenChildren(i,t,n,r):i.pipe(Od(1)).subscribe(e=>{this._flattenChildren(e,t,n,r)}))}return n}_flattenChildren(e,t,n,r){e.forEach((i,o)=>{let s=r.slice();s.push(o!=e.length-1),this._flattenNode(i,t+1,n,s)})}flattenNodes(e){let t=[];return e.forEach(e=>this._flattenNode(e,0,t,[])),t}expandFlattenedNodes(e,t){let n=[],r=[];return r[0]=!0,e.forEach(e=>{let i=!0;for(let t=0;t<=this.getLevel(e);t++)i=i&&r[t];i&&n.push(e),this.isExpandable(e)&&(r[this.getLevel(e)+1]=t.isExpanded(e))}),n}}class lx extends Gy{constructor(e,t,n=[]){super(),this._treeControl=e,this._treeFlattener=t,this._flattenedData=new LC([]),this._expandedData=new LC([]),this._data=new LC(n)}get data(){return this._data.value}set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(e){return X(e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe(P(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}function cx(e=0,t=_d){return(!Dy(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=_d),new _(n=>(n.add(t.schedule(ux,e,{subscriber:n,counter:0,period:e})),n))}function ux(e){const{subscriber:t,counter:n,period:r}=e;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}var hx=n("LvDl");function dx(e){return getComputedStyle(e)}function px(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r+="px"),e.style[n]=r}return e}function fx(e){var t=document.createElement("div");return t.className=e,t}var mx="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function gx(e,t){if(!mx)throw new Error("No element matching method supported");return mx.call(e,t)}function yx(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function _x(e,t){return Array.prototype.filter.call(e.children,function(e){return gx(e,t)})}var vx=function(e){return"ps__thumb-"+e},bx=function(e){return"ps__rail-"+e},wx=function(e){return"ps--active-"+e},Cx=function(e){return"ps--scrolling-"+e},xx={x:null,y:null};function Ex(e,t){var n=e.element.classList,r=Cx(t);n.contains(r)?clearTimeout(xx[t]):n.add(r)}function Sx(e,t){xx[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(Cx(t))},e.settings.scrollingThreshold)}var Px=function(e){this.element=e,this.handlers={}},Tx={isEmpty:{configurable:!0}};Px.prototype.bind=function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},Px.prototype.unbind=function(e,t){var n=this;this.handlers[e]=this.handlers[e].filter(function(r){return!(!t||r===t)||(n.element.removeEventListener(e,r,!1),!1)})},Px.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},Tx.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(Px.prototype,Tx);var Ix=function(){this.eventElements=[]};function Ox(e){if("function"==typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function kx(e,t,n,r,i){var o;if(void 0===r&&(r=!0),void 0===i&&(i=!1),"top"===t)o=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");o=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(e,t,n,r,i){var o=n[0],s=n[1],a=n[2],l=n[3],c=n[4],u=n[5];void 0===r&&(r=!0),void 0===i&&(i=!1);var h=e.element;e.reach[l]=null,h[a]<1&&(e.reach[l]="start"),h[a]>e[o]-e[s]-1&&(e.reach[l]="end"),t&&(h.dispatchEvent(Ox("ps-scroll-"+l)),t<0?h.dispatchEvent(Ox("ps-scroll-"+c)):t>0&&h.dispatchEvent(Ox("ps-scroll-"+u)),r&&function(e,t){Ex(e,t),Sx(e,t)}(e,l)),e.reach[l]&&(t||i)&&h.dispatchEvent(Ox("ps-"+l+"-reach-"+e.reach[l]))}(e,n,o,r,i)}function Rx(e){return parseInt(e,10)||0}Ix.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new Px(e),this.eventElements.push(t)),t},Ix.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},Ix.prototype.unbind=function(e,t,n){var r=this.eventElement(e);r.unbind(t,n),r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)},Ix.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]},Ix.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)};var Ax={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function Mx(e){var t=e.element,n=Math.floor(t.scrollTop),r=t.getBoundingClientRect();e.containerWidth=Math.ceil(r.width),e.containerHeight=Math.ceil(r.height),e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(_x(t,bx("x")).forEach(function(e){return yx(e)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(_x(t,bx("y")).forEach(function(e){return yx(e)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=Dx(e,Rx(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=Rx((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=Dx(e,Rx(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=Rx(n*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),function(e,t){var n={width:t.railXWidth},r=Math.floor(e.scrollTop);n.left=t.isRtl?t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-r:n.top=t.scrollbarXTop+r,px(t.scrollbarXRail,n);var i={top:r,height:t.railYHeight};t.isScrollbarYUsingRight?i.right=t.isRtl?t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:t.scrollbarYRight-e.scrollLeft:i.left=t.isRtl?t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:t.scrollbarYLeft+e.scrollLeft,px(t.scrollbarYRail,i),px(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),px(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(t,e),e.scrollbarXActive?t.classList.add(wx("x")):(t.classList.remove(wx("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=!0===e.isRtl?e.contentWidth:0),e.scrollbarYActive?t.classList.add(wx("y")):(t.classList.remove(wx("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)}function Dx(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function Fx(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=e.element,d=null,p=null,f=null;function m(t){t.touches&&t.touches[0]&&(t[i]=t.touches[0].pageY),h[l]=d+f*(t[i]-p),Ex(e,c),Mx(e),t.stopPropagation(),t.preventDefault()}function g(){Sx(e,c),e[u].classList.remove("ps--clicking"),e.event.unbind(e.ownerDocument,"mousemove",m)}function y(t,s){d=h[l],s&&t.touches&&(t[i]=t.touches[0].pageY),p=t[i],f=(e[r]-e[n])/(e[o]-e[a]),s?e.event.bind(e.ownerDocument,"touchmove",m):(e.event.bind(e.ownerDocument,"mousemove",m),e.event.once(e.ownerDocument,"mouseup",g),t.preventDefault()),e[u].classList.add("ps--clicking"),t.stopPropagation()}e.event.bind(e[s],"mousedown",function(e){y(e)}),e.event.bind(e[s],"touchstart",function(e){y(e,!0)})}var Lx={"click-rail":function(e){e.event.bind(e.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top;e.element.scrollTop+=(n>e.scrollbarYTop?1:-1)*e.containerHeight,Mx(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left;e.element.scrollLeft+=(n>e.scrollbarXLeft?1:-1)*e.containerWidth,Mx(e),t.stopPropagation()})},"drag-thumb":function(e){Fx(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),Fx(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(e){var t=e.element;e.event.bind(e.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&(gx(t,":hover")||gx(e.scrollbarX,":focus")||gx(e.scrollbarY,":focus"))){var r,i=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(i){if("IFRAME"===i.tagName)i=i.contentDocument.activeElement;else for(;i.shadowRoot;)i=i.shadowRoot.activeElement;if(gx(r=i,"input,[contenteditable]")||gx(r,"select,[contenteditable]")||gx(r,"textarea,[contenteditable]")||gx(r,"button,[contenteditable]"))return}var o=0,s=0;switch(n.which){case 37:o=n.metaKey?-e.contentWidth:n.altKey?-e.containerWidth:-30;break;case 38:s=n.metaKey?e.contentHeight:n.altKey?e.containerHeight:30;break;case 39:o=n.metaKey?e.contentWidth:n.altKey?e.containerWidth:30;break;case 40:s=n.metaKey?-e.contentHeight:n.altKey?-e.containerHeight:-30;break;case 32:s=n.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:s=e.containerHeight;break;case 34:s=-e.containerHeight;break;case 36:s=e.contentHeight;break;case 35:s=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==o||e.settings.suppressScrollY&&0!==s||(t.scrollTop-=s,t.scrollLeft+=o,Mx(e),function(n,r){var i=Math.floor(t.scrollTop);if(0===n){if(!e.scrollbarYActive)return!1;if(0===i&&r>0||i>=e.contentHeight-e.containerHeight&&r<0)return!e.settings.wheelPropagation}var o=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===o&&n<0||o>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}(o,s)&&n.preventDefault())}})},wheel:function(e){var t=e.element;function n(n){var r=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),i=r[0],o=r[1];if(!function(e,n,r){if(!Ax.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(e))return!1;for(var i=e;i&&i!==t;){if(i.classList.contains("ps__child--consume"))return!0;var o=dx(i);if(r&&o.overflowY.match(/(scroll|auto)/)){var s=i.scrollHeight-i.clientHeight;if(s>0&&(i.scrollTop>0&&r<0||i.scrollTop<s&&r>0))return!0}if(n&&o.overflowX.match(/(scroll|auto)/)){var a=i.scrollWidth-i.clientWidth;if(a>0&&(i.scrollLeft>0&&n<0||i.scrollLeft<a&&n>0))return!0}i=i.parentNode}return!1}(n.target,i,o)){var s=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(o?t.scrollTop-=o*e.settings.wheelSpeed:t.scrollTop+=i*e.settings.wheelSpeed,s=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(i?t.scrollLeft+=i*e.settings.wheelSpeed:t.scrollLeft-=o*e.settings.wheelSpeed,s=!0):(t.scrollTop-=o*e.settings.wheelSpeed,t.scrollLeft+=i*e.settings.wheelSpeed),Mx(e),(s=s||function(n,r){var i=Math.floor(t.scrollTop),o=0===t.scrollTop,s=i+t.offsetHeight===t.scrollHeight,a=0===t.scrollLeft,l=t.scrollLeft+t.offsetWidth===t.scrollWidth;return!(Math.abs(r)>Math.abs(n)?o||s:a||l)||!e.settings.wheelPropagation}(i,o))&&!n.ctrlKey&&(n.stopPropagation(),n.preventDefault())}}void 0!==window.onwheel?e.event.bind(t,"wheel",n):void 0!==window.onmousewheel&&e.event.bind(t,"mousewheel",n)},touch:function(e){if(Ax.supportsTouch||Ax.supportsIePointer){var t=e.element,n={},r=0,i={},o=null;Ax.supportsTouch?(e.event.bind(t,"touchstart",c),e.event.bind(t,"touchmove",u),e.event.bind(t,"touchend",h)):Ax.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",c),e.event.bind(t,"pointermove",u),e.event.bind(t,"pointerup",h)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",c),e.event.bind(t,"MSPointerMove",u),e.event.bind(t,"MSPointerUp",h)))}function s(n,r){t.scrollTop-=r,t.scrollLeft-=n,Mx(e)}function a(e){return e.targetTouches?e.targetTouches[0]:e}function l(e){return!(e.pointerType&&"pen"===e.pointerType&&0===e.buttons||(!e.targetTouches||1!==e.targetTouches.length)&&(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function c(e){if(l(e)){var t=a(e);n.pageX=t.pageX,n.pageY=t.pageY,r=(new Date).getTime(),null!==o&&clearInterval(o)}}function u(o){if(l(o)){var c=a(o),u={pageX:c.pageX,pageY:c.pageY},h=u.pageX-n.pageX,d=u.pageY-n.pageY;if(function(e,n,r){if(!t.contains(e))return!1;for(var i=e;i&&i!==t;){if(i.classList.contains("ps__child--consume"))return!0;var o=dx(i);if(r&&o.overflowY.match(/(scroll|auto)/)){var s=i.scrollHeight-i.clientHeight;if(s>0&&(i.scrollTop>0&&r<0||i.scrollTop<s&&r>0))return!0}if(n&&o.overflowX.match(/(scroll|auto)/)){var a=i.scrollWidth-i.clientWidth;if(a>0&&(i.scrollLeft>0&&n<0||i.scrollLeft<a&&n>0))return!0}i=i.parentNode}return!1}(o.target,h,d))return;s(h,d),n=u;var p=(new Date).getTime(),f=p-r;f>0&&(i.x=h/f,i.y=d/f,r=p),function(n,r){var i=Math.floor(t.scrollTop),o=t.scrollLeft,s=Math.abs(n),a=Math.abs(r);if(a>s){if(r<0&&i===e.contentHeight-e.containerHeight||r>0&&0===i)return 0===window.scrollY&&r>0&&Ax.isChrome}else if(s>a&&(n<0&&o===e.contentWidth-e.containerWidth||n>0&&0===o))return!0;return!0}(h,d)&&o.preventDefault()}}function h(){e.settings.swipeEasing&&(clearInterval(o),o=setInterval(function(){e.isInitialized?clearInterval(o):i.x||i.y?Math.abs(i.x)<.01&&Math.abs(i.y)<.01?clearInterval(o):(s(30*i.x,30*i.y),i.x*=.8,i.y*=.8):clearInterval(o)},10))}}},Bx=function(e,t){var n=this;if(void 0===t&&(t={}),"string"==typeof e&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var r in this.element=e,e.classList.add("ps"),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},t)this.settings[r]=t[r];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var i,o,s=function(){return e.classList.add("ps--focus")},a=function(){return e.classList.remove("ps--focus")};this.isRtl="rtl"===dx(e).direction,!0===this.isRtl&&e.classList.add("ps__rtl"),this.isNegativeScroll=(o=e.scrollLeft,e.scrollLeft=-1,i=e.scrollLeft<0,e.scrollLeft=o,i),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new Ix,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=fx(bx("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=fx(vx("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",a),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var l=dx(this.scrollbarXRail);this.scrollbarXBottom=parseInt(l.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=Rx(l.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=Rx(l.borderLeftWidth)+Rx(l.borderRightWidth),px(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=Rx(l.marginLeft)+Rx(l.marginRight),px(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=fx(bx("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=fx(vx("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",a),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var c=dx(this.scrollbarYRail);this.scrollbarYRight=parseInt(c.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=Rx(c.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(e){var t=dx(e);return Rx(t.width)+Rx(t.paddingLeft)+Rx(t.paddingRight)+Rx(t.borderLeftWidth)+Rx(t.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=Rx(c.borderTopWidth)+Rx(c.borderBottomWidth),px(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=Rx(c.marginTop)+Rx(c.marginBottom),px(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(e){return Lx[e](n)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(e){return n.onScroll(e)}),Mx(this)};Bx.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,px(this.scrollbarXRail,{display:"block"}),px(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=Rx(dx(this.scrollbarXRail).marginLeft)+Rx(dx(this.scrollbarXRail).marginRight),this.railYMarginHeight=Rx(dx(this.scrollbarYRail).marginTop)+Rx(dx(this.scrollbarYRail).marginBottom),px(this.scrollbarXRail,{display:"none"}),px(this.scrollbarYRail,{display:"none"}),Mx(this),kx(this,"top",0,!1,!0),kx(this,"left",0,!1,!0),px(this.scrollbarXRail,{display:""}),px(this.scrollbarYRail,{display:""}))},Bx.prototype.onScroll=function(e){this.isAlive&&(Mx(this),kx(this,"top",this.element.scrollTop-this.lastScrollTop),kx(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},Bx.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),yx(this.scrollbarX),yx(this.scrollbarY),yx(this.scrollbarXRail),yx(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},Bx.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};var Nx=Bx,jx=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),Hx="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,zx="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Vx="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(zx):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},Ux=["top","right","bottom","left","width","height","size","weight"],Wx="undefined"!=typeof MutationObserver,Xx=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&a()}function s(){Vx(o)}function a(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,20);i=e}return a}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){Hx&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Wx?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Hx&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Ux.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Gx=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},qx=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||zx},$x=Zx(0,0,0,0);function Yx(e){return parseFloat(e)||0}function Kx(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+Yx(e["border-"+n+"-width"])},0)}var Qx="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof qx(e).SVGGraphicsElement}:function(e){return e instanceof qx(e).SVGElement&&"function"==typeof e.getBBox};function Zx(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Jx=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Zx(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e,t=(e=this.target,Hx?Qx(e)?function(e){var t=e.getBBox();return Zx(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return $x;var r=qx(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n];t[i]=Yx(e["padding-"+i])}return t}(r),o=i.left+i.right,s=i.top+i.bottom,a=Yx(r.width),l=Yx(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==t&&(a-=Kx(r,"left","right")+o),Math.round(l+s)!==n&&(l-=Kx(r,"top","bottom")+s)),!function(e){return e===qx(e).document.documentElement}(e)){var c=Math.round(a+o)-t,u=Math.round(l+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(u)&&(l-=u)}return Zx(i.left,i.top,a,l)}(e):$x);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),eE=function(e,t){var n,r,i,o,s,a,l,c=(r=(n=t).x,i=n.y,o=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),Gx(l,{x:r,y:i,width:o,height:s,top:i,right:r+o,bottom:s+i,left:r}),l);Gx(this,{target:e,contentRect:c})},tE=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new jx,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof qx(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Jx(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof qx(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new eE(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),nE="undefined"!=typeof WeakMap?new WeakMap:new jx,rE=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Xx.getInstance(),r=new tE(t,n,this);nE.set(this,r)};["observe","unobserve","disconnect"].forEach(function(e){rE.prototype[e]=function(){var t;return(t=nE.get(this))[e].apply(t,arguments)}});var iE=void 0!==zx.ResizeObserver?zx.ResizeObserver:rE;const oE=new Xn("PERFECT_SCROLLBAR_CONFIG");class sE{constructor(e,t,n,r){this.x=e,this.y=t,this.w=n,this.h=r}}class aE{constructor(e,t){this.x=e,this.y=t}}const lE=["psScrollY","psScrollX","psScrollUp","psScrollDown","psScrollLeft","psScrollRight","psYReachEnd","psYReachStart","psXReachEnd","psXReachStart"];class cE{constructor(e={}){this.assign(e)}assign(e={}){for(const t in e)this[t]=e[t]}}let uE=(()=>{class e{constructor(e,t,n,r,i){this.zone=e,this.differs=t,this.elementRef=n,this.platformId=r,this.defaults=i,this.instance=null,this.ro=null,this.timeout=null,this.animation=null,this.configDiff=null,this.ngDestroy=new x,this.disabled=!1,this.psScrollY=new Xl,this.psScrollX=new Xl,this.psScrollUp=new Xl,this.psScrollDown=new Xl,this.psScrollLeft=new Xl,this.psScrollRight=new Xl,this.psYReachEnd=new Xl,this.psYReachStart=new Xl,this.psXReachEnd=new Xl,this.psXReachStart=new Xl}ngOnInit(){if(!this.disabled&&kh(this.platformId)){const e=new cE(this.defaults);e.assign(this.config),this.zone.runOutsideAngular(()=>{this.instance=new Nx(this.elementRef.nativeElement,e)}),this.configDiff||(this.configDiff=this.differs.find(this.config||{}).create(),this.configDiff.diff(this.config||{})),this.zone.runOutsideAngular(()=>{this.ro=new iE(()=>{this.update()}),this.elementRef.nativeElement.children[0]&&this.ro.observe(this.elementRef.nativeElement.children[0]),this.ro.observe(this.elementRef.nativeElement)}),this.zone.runOutsideAngular(()=>{lE.forEach(e=>{const t=e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`);Py(this.elementRef.nativeElement,t).pipe(By(20),Hp(this.ngDestroy)).subscribe(t=>{this[e].emit(t)})})})}}ngOnDestroy(){kh(this.platformId)&&(this.ngDestroy.next(),this.ngDestroy.complete(),this.ro&&this.ro.disconnect(),this.timeout&&"undefined"!=typeof window&&window.clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.instance&&this.instance.destroy()}),this.instance=null)}ngDoCheck(){!this.disabled&&this.configDiff&&kh(this.platformId)&&this.configDiff.diff(this.config||{})&&(this.ngOnDestroy(),this.ngOnInit())}ngOnChanges(e){e.disabled&&!e.disabled.isFirstChange()&&kh(this.platformId)&&e.disabled.currentValue!==e.disabled.previousValue&&(!0===e.disabled.currentValue?this.ngOnDestroy():!1===e.disabled.currentValue&&this.ngOnInit())}ps(){return this.instance}update(){"undefined"!=typeof window&&(this.timeout&&window.clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>{if(!this.disabled&&this.configDiff)try{this.zone.runOutsideAngular(()=>{this.instance&&this.instance.update()})}catch(e){}},0))}geometry(e="scroll"){return new sE(this.elementRef.nativeElement[e+"Left"],this.elementRef.nativeElement[e+"Top"],this.elementRef.nativeElement[e+"Width"],this.elementRef.nativeElement[e+"Height"])}position(e=!1){return!e&&this.instance?new aE(this.instance.reach.x||0,this.instance.reach.y||0):new aE(this.elementRef.nativeElement.scrollLeft,this.elementRef.nativeElement.scrollTop)}scrollable(e="any"){const t=this.elementRef.nativeElement;return"any"===e?t.classList.contains("ps--active-x")||t.classList.contains("ps--active-y"):"both"===e?t.classList.contains("ps--active-x")&&t.classList.contains("ps--active-y"):t.classList.contains("ps--active-"+e)}scrollTo(e,t,n){this.disabled||(null==t&&null==n?this.animateScrolling("scrollTop",e,n):(null!=e&&this.animateScrolling("scrollLeft",e,n),null!=t&&this.animateScrolling("scrollTop",t,n)))}scrollToX(e,t){this.animateScrolling("scrollLeft",e,t)}scrollToY(e,t){this.animateScrolling("scrollTop",e,t)}scrollToTop(e,t){this.animateScrolling("scrollTop",e||0,t)}scrollToLeft(e,t){this.animateScrolling("scrollLeft",e||0,t)}scrollToRight(e,t){this.animateScrolling("scrollLeft",this.elementRef.nativeElement.scrollWidth-this.elementRef.nativeElement.clientWidth-(e||0),t)}scrollToBottom(e,t){this.animateScrolling("scrollTop",this.elementRef.nativeElement.scrollHeight-this.elementRef.nativeElement.clientHeight-(e||0),t)}scrollToElement(e,t,n){if("string"==typeof e&&(e=this.elementRef.nativeElement.querySelector(e)),e){const r=e.getBoundingClientRect(),i=this.elementRef.nativeElement.getBoundingClientRect();this.elementRef.nativeElement.classList.contains("ps--active-x")&&this.animateScrolling("scrollLeft",r.left-i.left+this.elementRef.nativeElement.scrollLeft+(t||0),n),this.elementRef.nativeElement.classList.contains("ps--active-y")&&this.animateScrolling("scrollTop",r.top-i.top+this.elementRef.nativeElement.scrollTop+(t||0),n)}}animateScrolling(e,t,n){if(this.animation&&(window.cancelAnimationFrame(this.animation),this.animation=null),n&&"undefined"!=typeof window){if(t!==this.elementRef.nativeElement[e]){let r=0,i=0,o=performance.now(),s=this.elementRef.nativeElement[e];const a=(s-t)/2,l=c=>{i+=Math.PI/(n/(c-o)),r=Math.round(t+a+a*Math.cos(i)),this.elementRef.nativeElement[e]===s&&(i>=Math.PI?this.animateScrolling(e,t,0):(this.elementRef.nativeElement[e]=r,s=this.elementRef.nativeElement[e],o=c,this.animation=window.requestAnimationFrame(l)))};window.requestAnimationFrame(l)}}else this.elementRef.nativeElement[e]=t}}return e.\u0275fac=function(t){return new(t||e)(ws(Mc),ws(tl),ws(Da),ws(_c),ws(oE,8))},e.\u0275dir=Ye({type:e,selectors:[["","perfectScrollbar",""]],inputs:{disabled:"disabled",config:["perfectScrollbar","config"]},outputs:{psScrollY:"psScrollY",psScrollX:"psScrollX",psScrollUp:"psScrollUp",psScrollDown:"psScrollDown",psScrollLeft:"psScrollLeft",psScrollRight:"psScrollRight",psYReachEnd:"psYReachEnd",psYReachStart:"psYReachStart",psXReachEnd:"psXReachEnd",psXReachStart:"psXReachStart"},exportAs:["ngxPerfectScrollbar"],features:[at]}),e})(),hE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Oh],Oh]}),e})();const dE=["mat-button",""],pE=["*"],fE=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class mE{constructor(e){this._elementRef=e}}const gE=Gg(Xg(qg(mE)));let yE=(()=>{class e extends gE{constructor(e,t,n){super(e),this._focusMonitor=t,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of fE)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,t){e?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(e=>this._getHostElement().hasAttribute(e))}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(Cp),ws(Mg,8))},e.\u0275cmp=Ue({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,t){if(1&e&&ic(ly,1),2&e){let e;rc(e=sc())&&(t.ripple=e.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,t){2&e&&(ys("disabled",t.disabled||null),Qs("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-button-disabled",t.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[is],attrs:dE,ngContentSelectors:pE,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,t){1&e&&(js(),Es(0,"span",0),Hs(1),Ss(),Ps(2,"span",1),Ps(3,"span",2)),2&e&&(Ui(2),Qs("mat-button-ripple-round",t.isRoundButton||t.isIconButton),Cs("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",t.isIconButton)("matRippleTrigger",t._getHostElement()))},directives:[ly],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),e})(),_E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[cy,Wg],Wg]}),e})();const vE=["underline"],bE=["connectionContainer"],wE=["inputContainer"],CE=["label"];function xE(e,t){1&e&&(Ts(0),Es(1,"div",14),Ps(2,"div",15),Ps(3,"div",16),Ps(4,"div",17),Ss(),Es(5,"div",18),Ps(6,"div",15),Ps(7,"div",16),Ps(8,"div",17),Ss(),Is())}function EE(e,t){1&e&&(Es(0,"div",19),Hs(1,1),Ss())}function SE(e,t){if(1&e&&(Ts(0),Hs(1,2),Es(2,"span"),la(3),Ss(),Is()),2&e){const e=Bs(2);Ui(3),ca(e._control.placeholder)}}function PE(e,t){1&e&&Hs(0,3,["*ngSwitchCase","true"])}function TE(e,t){1&e&&(Es(0,"span",23),la(1," *"),Ss())}function IE(e,t){if(1&e){const e=ks();Es(0,"label",20,21),Ds("cdkObserveContent",function(){return Rt(e),Bs().updateOutlineGap()}),vs(2,SE,4,1,"ng-container",12),vs(3,PE,1,0,"ng-content",12),vs(4,TE,2,0,"span",22),Ss()}if(2&e){const e=Bs();Qs("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),Cs("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),ys("for",e._control.id)("aria-owns",e._control.id),Ui(2),Cs("ngSwitchCase",!1),Ui(1),Cs("ngSwitchCase",!0),Ui(1),Cs("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function OE(e,t){1&e&&(Es(0,"div",24),Hs(1,4),Ss())}function kE(e,t){if(1&e&&(Es(0,"div",25,26),Ps(2,"span",27),Ss()),2&e){const e=Bs();Ui(2),Qs("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function RE(e,t){1&e&&(Es(0,"div"),Hs(1,5),Ss()),2&e&&Cs("@transitionMessages",Bs()._subscriptAnimationState)}function AE(e,t){if(1&e&&(Es(0,"div",31),la(1),Ss()),2&e){const e=Bs(2);Cs("id",e._hintLabelId),Ui(1),ca(e.hintLabel)}}function ME(e,t){if(1&e&&(Es(0,"div",28),vs(1,AE,2,2,"div",29),Hs(2,6),Ps(3,"div",30),Hs(4,7),Ss()),2&e){const e=Bs();Cs("@transitionMessages",e._subscriptAnimationState),Ui(1),Cs("ngIf",e.hintLabel)}}const DE=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],FE=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let LE=0;const BE=new Xn("MatError");let NE=(()=>{class e{constructor(){this.id="mat-error-"+LE++}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["mat-error"]],hostAttrs:["role","alert",1,"mat-error"],hostVars:1,hostBindings:function(e,t){2&e&&ys("id",t.id)},inputs:{id:"id"},features:[Ta([{provide:BE,useExisting:e}])]}),e})();const jE={transitionMessages:Qp("transitionMessages",[tf("enter",ef({opacity:1,transform:"translateY(0%)"})),rf("void => enter",[ef({opacity:0,transform:"translateY(-5px)"}),Zp("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let HE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e}),e})(),zE=0;const VE=new Xn("MatHint");let UE=(()=>{class e{constructor(){this.align="start",this.id="mat-hint-"+zE++}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(e,t){2&e&&(ys("id",t.id)("align",null),Qs("mat-form-field-hint-end","end"===t.align))},inputs:{align:"align",id:"id"},features:[Ta([{provide:VE,useExisting:e}])]}),e})(),WE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["mat-label"]]}),e})(),XE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["mat-placeholder"]]}),e})();const GE=new Xn("MatPrefix");let qE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["","matPrefix",""]],features:[Ta([{provide:GE,useExisting:e}])]}),e})();const $E=new Xn("MatSuffix");let YE=0;class KE{constructor(e){this._elementRef=e}}const QE=Gg(KE,"primary"),ZE=new Xn("MAT_FORM_FIELD_DEFAULT_OPTIONS"),JE=new Xn("MatFormField");let eS=(()=>{class e extends QE{constructor(e,t,n,r,i,o,s,a){super(e),this._elementRef=e,this._changeDetectorRef=t,this._dir=r,this._defaults=i,this._platform=o,this._ngZone=s,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+YE++,this._labelId="mat-form-field-label-"+YE++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=i&&i.appearance?i.appearance:"legacy",this._hideRequiredMarker=!(!i||null==i.hideRequiredMarker)&&i.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const t=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&t!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Ad(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Lp(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Hp(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Hp(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),X(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Lp(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Lp(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Hp(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const t=this._control?this._control.ngControl:null;return t&&t[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Py(this._label.nativeElement,"transitionend").pipe(Od(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const t=this._hintChildren?this._hintChildren.find(e=>"start"===e.align):null,n=this._hintChildren?this._hintChildren.find(e=>"end"===e.align):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),n&&e.push(n.id)}else this._errorChildren&&e.push(...this._errorChildren.map(e=>e.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!e||!e.children.length||!e.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let t=0,n=0;const r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),o=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const i=r.getBoundingClientRect();if(0===i.width&&0===i.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const o=this._getStartEnd(i),s=e.children,a=this._getStartEnd(s[0].getBoundingClientRect());let l=0;for(let e=0;e<s.length;e++)l+=s[e].offsetWidth;t=Math.abs(a-o)-5,n=l>0?.75*l+10:0}for(let s=0;s<i.length;s++)i[s].style.width=`${t}px`;for(let s=0;s<o.length;s++)o[s].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(Da),ws(wf,8),ws(ZE,8),ws(jd),ws(Mc),ws(Mg,8))},e.\u0275cmp=Ue({type:e,selectors:[["mat-form-field"]],contentQueries:function(e,t,n){if(1&e&&(oc(n,HE,1),oc(n,HE,3),oc(n,WE,1),oc(n,WE,3),oc(n,XE,1),oc(n,BE,1),oc(n,VE,1),oc(n,GE,1),oc(n,$E,1)),2&e){let e;rc(e=sc())&&(t._controlNonStatic=e.first),rc(e=sc())&&(t._controlStatic=e.first),rc(e=sc())&&(t._labelChildNonStatic=e.first),rc(e=sc())&&(t._labelChildStatic=e.first),rc(e=sc())&&(t._placeholderChild=e.first),rc(e=sc())&&(t._errorChildren=e),rc(e=sc())&&(t._hintChildren=e),rc(e=sc())&&(t._prefixChildren=e),rc(e=sc())&&(t._suffixChildren=e)}},viewQuery:function(e,t){if(1&e&&(ic(vE,1),ic(bE,3),ic(wE,1),ic(CE,1)),2&e){let e;rc(e=sc())&&(t.underlineRef=e.first),rc(e=sc())&&(t._connectionContainerRef=e.first),rc(e=sc())&&(t._inputContainerRef=e.first),rc(e=sc())&&(t._label=e.first)}},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(e,t){2&e&&Qs("mat-form-field-appearance-standard","standard"==t.appearance)("mat-form-field-appearance-fill","fill"==t.appearance)("mat-form-field-appearance-outline","outline"==t.appearance)("mat-form-field-appearance-legacy","legacy"==t.appearance)("mat-form-field-invalid",t._control.errorState)("mat-form-field-can-float",t._canLabelFloat())("mat-form-field-should-float",t._shouldLabelFloat())("mat-form-field-has-label",t._hasFloatingLabel())("mat-form-field-hide-placeholder",t._hideControlPlaceholder())("mat-form-field-disabled",t._control.disabled)("mat-form-field-autofilled",t._control.autofilled)("mat-focused",t._control.focused)("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)("ng-untouched",t._shouldForward("untouched"))("ng-touched",t._shouldForward("touched"))("ng-pristine",t._shouldForward("pristine"))("ng-dirty",t._shouldForward("dirty"))("ng-valid",t._shouldForward("valid"))("ng-invalid",t._shouldForward("invalid"))("ng-pending",t._shouldForward("pending"))("_mat-animation-noopable",!t._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Ta([{provide:JE,useExisting:e}]),is],ngContentSelectors:FE,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,t){1&e&&(js(DE),Es(0,"div",0),Es(1,"div",1,2),Ds("click",function(e){return t._control.onContainerClick&&t._control.onContainerClick(e)}),vs(3,xE,9,0,"ng-container",3),vs(4,EE,2,0,"div",4),Es(5,"div",5,6),Hs(7),Es(8,"span",7),vs(9,IE,5,16,"label",8),Ss(),Ss(),vs(10,OE,2,0,"div",9),Ss(),vs(11,kE,3,4,"div",10),Es(12,"div",11),vs(13,RE,2,1,"div",12),vs(14,ME,5,2,"div",13),Ss(),Ss()),2&e&&(Ui(3),Cs("ngIf","outline"==t.appearance),Ui(1),Cs("ngIf",t._prefixChildren.length),Ui(5),Cs("ngIf",t._hasFloatingLabel()),Ui(1),Cs("ngIf",t._suffixChildren.length),Ui(1),Cs("ngIf","outline"!=t.appearance),Ui(1),Cs("ngSwitch",t._getDisplayedMessages()),Ui(1),Cs("ngSwitchCase","error"),Ui(1),Cs("ngSwitchCase","hint"))},directives:[uh,fh,mh,Qd],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[jE.transitionMessages]},changeDetection:0}),e})(),tS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Oh,Wg,Zd],Wg]}),e})();const nS=Gd({passive:!0});let rS=(()=>{class e{constructor(e,t){this._platform=e,this._ngZone=t,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Td;const t=Ld(e),n=this._monitoredElements.get(t);if(n)return n.subject;const r=new x,i="cdk-text-field-autofilled",o=e=>{"cdk-text-field-autofill-start"!==e.animationName||t.classList.contains(i)?"cdk-text-field-autofill-end"===e.animationName&&t.classList.contains(i)&&(t.classList.remove(i),this._ngZone.run(()=>r.next({target:e.target,isAutofilled:!1}))):(t.classList.add(i),this._ngZone.run(()=>r.next({target:e.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",o,nS),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:r,unlisten:()=>{t.removeEventListener("animationstart",o,nS)}}),r}stopMonitoring(e){const t=Ld(e),n=this._monitoredElements.get(t);n&&(n.unlisten(),n.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}}return e.\u0275fac=function(t){return new(t||e)(sr(jd),sr(Mc))},e.\u0275prov=de({factory:function(){return new e(sr(jd),sr(Mc))},token:e,providedIn:"root"}),e})(),iS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Hd]]}),e})();const oS=new Xn("MAT_INPUT_VALUE_ACCESSOR"),sS=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let aS=0;class lS{constructor(e,t,n,r){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=r}}const cS=Yg(lS);let uS=(()=>{class e extends cS{constructor(e,t,n,r,i,o,s,a,l,c){super(o,r,i,n),this._elementRef=e,this._platform=t,this.ngControl=n,this._autofillMonitor=a,this._formField=c,this._uid="mat-input-"+aS++,this.focused=!1,this.stateChanges=new x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>Vd().has(e));const u=this._elementRef.nativeElement,h=u.nodeName.toLowerCase();this._inputValueAccessor=s||u,this._previousNativeValue=this.value,this.id=this.id,t.IOS&&l.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",e=>{let t=e.target;t.value||t.selectionStart||t.selectionEnd||(t.setSelectionRange(1,1),t.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isNativeSelect&&(this.controlType=u.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Ad(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required}set required(e){this._required=Ad(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Vd().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Ad(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e===this.focused||this.readonly&&e||(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,t;const n=(null===(t=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===t?void 0:t.call(e))?null:this.placeholder;if(n!==this._previousPlaceholder){const e=this._elementRef.nativeElement;this._previousPlaceholder=n,n?e.setAttribute("placeholder",n):e.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){sS.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(jd),ws(Iv,10),ws(pb,8),ws(Cb,8),ws(Kg),ws(oS,10),ws(rS),ws(Mc),ws(JE,8))},e.\u0275dir=Ye({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(e,t){1&e&&Ds("focus",function(){return t._focusChanged(!0)})("blur",function(){return t._focusChanged(!1)})("input",function(){return t._onInput()}),2&e&&(da("disabled",t.disabled)("required",t.required),ys("id",t.id)("data-placeholder",t.placeholder)("readonly",t.readonly&&!t._isNativeSelect||null)("aria-invalid",t.errorState&&!t.empty)("aria-required",t.required),Qs("mat-input-server",t._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[Ta([{provide:HE,useExisting:e}]),is,at]}),e})(),hS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[Kg],imports:[[iS,tS,Wg],iS,tS]}),e})();function dS(e,t){if(1&e&&(on(),Ps(0,"circle",3)),2&e){const e=Bs();Ks("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),ys("r",e._getCircleRadius())}}function pS(e,t){if(1&e&&(on(),Ps(0,"circle",3)),2&e){const e=Bs();Ks("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),ys("r",e._getCircleRadius())}}function fS(e,t){if(1&e&&(on(),Ps(0,"circle",3)),2&e){const e=Bs();Ks("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),ys("r",e._getCircleRadius())}}function mS(e,t){if(1&e&&(on(),Ps(0,"circle",3)),2&e){const e=Bs();Ks("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),ys("r",e._getCircleRadius())}}const gS=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n";class yS{constructor(e){this._elementRef=e}}const _S=Gg(yS,"primary"),vS=new Xn("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let bS=(()=>{class e extends _S{constructor(t,n,r,i,o){super(t),this._elementRef=t,this._document=r,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const s=e._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),s.has(r.head)||s.set(r.head,new Set([100])),this._fallbackAnimation=n.EDGE||n.TRIDENT,this._noopAnimations="NoopAnimations"===i&&!!o&&!o._forceAnimations,o&&(o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}get diameter(){return this._diameter}set diameter(e){this._diameter=Md(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Md(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Md(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=$d(e)||this._document.head,this._attachStyleNode(),e.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,n=this._diameter,r=e._diameters;let i=r.get(t);if(!i||!i.has(n)){const e=this._document.createElement("style");e.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),e.textContent=this._getAnimationText(),t.appendChild(e),i||(i=new Set,r.set(t,i)),i.add(n)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(jd),ws(su,8),ws(Mg,8),ws(vS))},e.\u0275cmp=Ue({type:e,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(ys("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),Ks("width",t.diameter,"px")("height",t.diameter,"px"),Qs("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[is],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(on(),Es(0,"svg",0),vs(1,dS,1,9,"circle",1),vs(2,pS,1,7,"circle",2),Ss()),2&e&&(Ks("width",t.diameter,"px")("height",t.diameter,"px"),Cs("ngSwitch","indeterminate"===t.mode),ys("viewBox",t._getViewBox()),Ui(1),Cs("ngSwitchCase",!0),Ui(1),Cs("ngSwitchCase",!1))},directives:[fh,mh],styles:[gS],encapsulation:2,changeDetection:0}),e._diameters=new WeakMap,e})(),wS=(()=>{class e extends bS{constructor(e,t,n,r,i){super(e,t,n,r,i),this.mode="indeterminate"}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(jd),ws(su,8),ws(Mg,8),ws(vS))},e.\u0275cmp=Ue({type:e,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(e,t){2&e&&(Ks("width",t.diameter,"px")("height",t.diameter,"px"),Qs("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color"},features:[is],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(on(),Es(0,"svg",0),vs(1,fS,1,9,"circle",1),vs(2,mS,1,7,"circle",2),Ss()),2&e&&(Ks("width",t.diameter,"px")("height",t.diameter,"px"),Cs("ngSwitch","indeterminate"===t.mode),ys("viewBox",t._getViewBox()),Ui(1),Cs("ngSwitchCase",!0),Ui(1),Cs("ngSwitchCase",!1))},directives:[fh,mh],styles:[gS],encapsulation:2,changeDetection:0}),e})(),CS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Wg,Oh],Wg]}),e})();const xS=["*"],ES='.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n',SS=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],PS=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],TS=["text"];function IS(e,t){if(1&e&&Ps(0,"mat-pseudo-checkbox",5),2&e){const e=Bs();Cs("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}const OS=["*",[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]]],kS=["*","[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]"];class RS{}const AS=Xg(qg(RS));class MS{}const DS=qg(MS),FS=new Xn("MatList"),LS=new Xn("MatNavList");let BS=(()=>{class e extends AS{constructor(e){super(),this._elementRef=e,this._stateChanges=new x,"action-list"===this._getListType()&&e.nativeElement.classList.add("mat-action-list")}_getListType(){const e=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===e?"list":"mat-action-list"===e?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return e.\u0275fac=function(t){return new(t||e)(ws(Da))},e.\u0275cmp=Ue({type:e,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[Ta([{provide:FS,useExisting:e}]),is,at],ngContentSelectors:xS,decls:1,vars:0,template:function(e,t){1&e&&(js(),Hs(0))},styles:[ES],encapsulation:2,changeDetection:0}),e})(),NS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),e})(),jS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),e})(),HS=(()=>{class e extends DS{constructor(e,t,n,r){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new x,this._disabled=!1,this._isInteractiveList=!!(n||r&&"action-list"===r._getListType()),this._list=n||r;const i=this._getHostElement();"button"!==i.nodeName.toLowerCase()||i.hasAttribute("type")||i.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Hp(this._destroyed)).subscribe(()=>{t.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=Ad(e)}ngAfterContentInit(){Zg(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(LS,8),ws(FS,8))},e.\u0275cmp=Ue({type:e,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,t,n){if(1&e&&(oc(n,NS,1),oc(n,jS,1),oc(n,Qg,1)),2&e){let e;rc(e=sc())&&(t._avatar=e.first),rc(e=sc())&&(t._icon=e.first),rc(e=sc())&&(t._lines=e)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,t){2&e&&Qs("mat-list-item-disabled",t.disabled)("mat-list-item-avatar",t._avatar||t._icon)("mat-list-item-with-avatar",t._avatar||t._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[is],ngContentSelectors:PS,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,t){1&e&&(js(SS),Es(0,"div",0),Ps(1,"div",1),Hs(2),Es(3,"div",2),Hs(4,1),Ss(),Hs(5,2),Ss()),2&e&&(Ui(1),Cs("matRippleTrigger",t._getHostElement())("matRippleDisabled",t._isRippleDisabled()))},directives:[ly],encapsulation:2,changeDetection:0}),e})();class zS{}const VS=qg(zS);class US{}const WS=qg(US),XS={provide:rv,useExisting:oe(()=>$S),multi:!0};class GS{constructor(e,t,n){this.source=e,this.option=t,this.options=n}}let qS=(()=>{class e extends WS{constructor(e,t,n){super(),this._element=e,this._changeDetector=t,this.selectionList=n,this._selected=!1,this._disabled=!1,this._hasFocus=!1,this.checkboxPosition="after",this._inputsInitialized=!1}get color(){return this._color||this.selectionList.color}set color(e){this._color=e}get value(){return this._value}set value(e){this.selected&&!this.selectionList.compareWith(e,this.value)&&this._inputsInitialized&&(this.selected=!1),this._value=e}get disabled(){return this._disabled||this.selectionList&&this.selectionList.disabled}set disabled(e){const t=Ad(e);t!==this._disabled&&(this._disabled=t,this._changeDetector.markForCheck())}get selected(){return this.selectionList.selectedOptions.isSelected(this)}set selected(e){const t=Ad(e);t!==this._selected&&(this._setSelected(t),this.selectionList._reportValueChange())}ngOnInit(){const e=this.selectionList;e._value&&e._value.some(t=>e.compareWith(t,this._value))&&this._setSelected(!0);const t=this._selected;Promise.resolve().then(()=>{(this._selected||t)&&(this.selected=!0,this._changeDetector.markForCheck())}),this._inputsInitialized=!0}ngAfterContentInit(){Zg(this._lines,this._element)}ngOnDestroy(){this.selected&&Promise.resolve().then(()=>{this.selected=!1});const e=this._hasFocus,t=this.selectionList._removeOptionFromList(this);e&&t&&t.focus()}toggle(){this.selected=!this.selected}focus(){this._element.nativeElement.focus()}getLabel(){return this._text&&this._text.nativeElement.textContent||""}_isRippleDisabled(){return this.disabled||this.disableRipple||this.selectionList.disableRipple}_handleClick(){this.disabled||!this.selectionList.multiple&&this.selected||(this.toggle(),this.selectionList._emitChangeEvent([this]))}_handleFocus(){this.selectionList._setFocusedOption(this),this._hasFocus=!0}_handleBlur(){this.selectionList._onTouched(),this._hasFocus=!1}_getHostElement(){return this._element.nativeElement}_setSelected(e){return e!==this._selected&&(this._selected=e,e?this.selectionList.selectedOptions.select(this):this.selectionList.selectedOptions.deselect(this),this._changeDetector.markForCheck(),!0)}_markForCheck(){this._changeDetector.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(oe(()=>$S)))},e.\u0275cmp=Ue({type:e,selectors:[["mat-list-option"]],contentQueries:function(e,t,n){if(1&e&&(oc(n,NS,1),oc(n,jS,1),oc(n,Qg,1)),2&e){let e;rc(e=sc())&&(t._avatar=e.first),rc(e=sc())&&(t._icon=e.first),rc(e=sc())&&(t._lines=e)}},viewQuery:function(e,t){if(1&e&&ic(TS,1),2&e){let e;rc(e=sc())&&(t._text=e.first)}},hostAttrs:["role","option",1,"mat-list-item","mat-list-option","mat-focus-indicator"],hostVars:15,hostBindings:function(e,t){1&e&&Ds("focus",function(){return t._handleFocus()})("blur",function(){return t._handleBlur()})("click",function(){return t._handleClick()}),2&e&&(ys("aria-selected",t.selected)("aria-disabled",t.disabled)("tabindex",-1),Qs("mat-list-item-disabled",t.disabled)("mat-list-item-with-avatar",t._avatar||t._icon)("mat-primary","primary"===t.color)("mat-accent","primary"!==t.color&&"warn"!==t.color)("mat-warn","warn"===t.color)("mat-list-single-selected-option",t.selected&&!t.selectionList.multiple))},inputs:{disableRipple:"disableRipple",checkboxPosition:"checkboxPosition",color:"color",value:"value",selected:"selected",disabled:"disabled"},exportAs:["matListOption"],features:[is],ngContentSelectors:kS,decls:7,vars:5,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[3,"state","disabled",4,"ngIf"],[1,"mat-list-text"],["text",""],[3,"state","disabled"]],template:function(e,t){1&e&&(js(OS),Es(0,"div",0),Ps(1,"div",1),vs(2,IS,1,2,"mat-pseudo-checkbox",2),Es(3,"div",3,4),Hs(5),Ss(),Hs(6,1),Ss()),2&e&&(Qs("mat-list-item-content-reverse","after"==t.checkboxPosition),Ui(1),Cs("matRippleTrigger",t._getHostElement())("matRippleDisabled",t._isRippleDisabled()),Ui(1),Cs("ngIf",t.selectionList.multiple))},directives:[ly,uh,uy],encapsulation:2,changeDetection:0}),e})(),$S=(()=>{class e extends VS{constructor(e,t,n,r){super(),this._element=e,this._changeDetector=n,this._focusMonitor=r,this._multiple=!0,this._contentInitialized=!1,this.selectionChange=new Xl,this.tabIndex=0,this.color="accent",this.compareWith=(e,t)=>e===t,this._disabled=!1,this.selectedOptions=new $y(this._multiple),this._tabIndex=-1,this._onChange=e=>{},this._destroyed=new x,this._onTouched=()=>{}}get disabled(){return this._disabled}set disabled(e){this._disabled=Ad(e),this._markOptionsForCheck()}get multiple(){return this._multiple}set multiple(e){const t=Ad(e);t!==this._multiple&&(this._multiple=t,this.selectedOptions=new $y(this._multiple,this.selectedOptions.selected))}ngAfterContentInit(){var e;this._contentInitialized=!0,this._keyManager=new lp(this.options).withWrap().withTypeAhead().withHomeAndEnd().skipPredicate(()=>!1).withAllowedModifierKeys(["shiftKey"]),this._value&&this._setOptionsFromValues(this._value),this._keyManager.tabOut.pipe(Hp(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.options.changes.pipe(Lp(null),Hp(this._destroyed)).subscribe(()=>{this._updateTabIndex()}),this.selectedOptions.changed.pipe(Hp(this._destroyed)).subscribe(e=>{if(e.added)for(let t of e.added)t.selected=!0;if(e.removed)for(let t of e.removed)t.selected=!1}),null===(e=this._focusMonitor)||void 0===e||e.monitor(this._element).pipe(Hp(this._destroyed)).subscribe(e=>{if("keyboard"===e||"program"===e){const e=this._keyManager.activeItemIndex;e&&-1!==e?this._keyManager.setActiveItem(e):this._keyManager.setFirstItemActive()}})}ngOnChanges(e){const t=e.disableRipple,n=e.color;(t&&!t.firstChange||n&&!n.firstChange)&&this._markOptionsForCheck()}ngOnDestroy(){var e;null===(e=this._focusMonitor)||void 0===e||e.stopMonitoring(this._element),this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0}focus(e){this._element.nativeElement.focus(e)}selectAll(){this._setAllOptionsSelected(!0)}deselectAll(){this._setAllOptionsSelected(!1)}_setFocusedOption(e){this._keyManager.updateActiveItem(e)}_removeOptionFromList(e){const t=this._getOptionIndex(e);return t>-1&&this._keyManager.activeItemIndex===t&&(t>0?this._keyManager.updateActiveItem(t-1):0===t&&this.options.length>1&&this._keyManager.updateActiveItem(Math.min(t+1,this.options.length-1))),this._keyManager.activeItem}_keydown(e){const t=e.keyCode,n=this._keyManager,r=n.activeItemIndex,i=cd(e);switch(t){case 32:case 13:i||n.isTyping()||(this._toggleFocusedOption(),e.preventDefault());break;default:if(65===t&&this.multiple&&cd(e,"ctrlKey")&&!n.isTyping()){const t=this.options.some(e=>!e.disabled&&!e.selected);this._setAllOptionsSelected(t,!0,!0),e.preventDefault()}else n.onKeydown(e)}this.multiple&&(38===t||40===t)&&e.shiftKey&&n.activeItemIndex!==r&&this._toggleFocusedOption()}_reportValueChange(){if(this.options&&!this._isDestroyed){const e=this._getSelectedOptionValues();this._onChange(e),this._value=e}}_emitChangeEvent(e){this.selectionChange.emit(new GS(this,e[0],e))}writeValue(e){this._value=e,this.options&&this._setOptionsFromValues(e||[])}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}_setOptionsFromValues(e){this.options.forEach(e=>e._setSelected(!1)),e.forEach(e=>{const t=this.options.find(t=>!t.selected&&this.compareWith(t.value,e));t&&t._setSelected(!0)})}_getSelectedOptionValues(){return this.options.filter(e=>e.selected).map(e=>e.value)}_toggleFocusedOption(){let e=this._keyManager.activeItemIndex;if(null!=e&&this._isValidIndex(e)){let t=this.options.toArray()[e];!t||t.disabled||!this._multiple&&t.selected||(t.toggle(),this._emitChangeEvent([t]))}}_setAllOptionsSelected(e,t,n){const r=[];this.options.forEach(n=>{t&&n.disabled||!n._setSelected(e)||r.push(n)}),r.length&&(this._reportValueChange(),n&&this._emitChangeEvent(r))}_isValidIndex(e){return e>=0&&e<this.options.length}_getOptionIndex(e){return this.options.toArray().indexOf(e)}_markOptionsForCheck(){this.options&&this.options.forEach(e=>e._markForCheck())}_allowFocusEscape(){this._tabIndex=-1,setTimeout(()=>{this._tabIndex=0,this._changeDetector.markForCheck()})}_updateTabIndex(){this._tabIndex=0===this.options.length?-1:0}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),Un("tabindex"),ws(sl),ws(Cp))},e.\u0275cmp=Ue({type:e,selectors:[["mat-selection-list"]],contentQueries:function(e,t,n){if(1&e&&oc(n,qS,1),2&e){let e;rc(e=sc())&&(t.options=e)}},hostAttrs:["role","listbox",1,"mat-selection-list","mat-list-base"],hostVars:3,hostBindings:function(e,t){1&e&&Ds("keydown",function(e){return t._keydown(e)}),2&e&&ys("aria-multiselectable",t.multiple)("aria-disabled",t.disabled.toString())("tabindex",t._tabIndex)},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex",color:"color",compareWith:"compareWith",disabled:"disabled",multiple:"multiple"},outputs:{selectionChange:"selectionChange"},exportAs:["matSelectionList"],features:[Ta([XS]),is,at],ngContentSelectors:xS,decls:1,vars:0,template:function(e,t){1&e&&(js(),Hs(0))},styles:[ES],encapsulation:2,changeDetection:0}),e})(),YS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[ey,cy,Wg,hy,Oh],ey,Wg,hy,Rw]}),e})();class KS{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new QS(e,this.count,this.source))}}class QS extends f{constructor(e,t,n){super(e),this.count=t,this.source=n}error(e){if(!this.isStopped){const{source:t,count:n}=this;if(0===n)return super.error(e);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}}}var ZS={},JS={};function eP(e){for(var t=[],n=0,r=0,i=0;i<e.length;i+=1){var o=ZS[e[i]];if(void 0===o)throw new Error("Invalid character ("+e[i]+")");var s=32&o;if(r+=(o&=31)<<n,s)n+=5;else{var a=1&r;r>>>=1,t.push(a?0===r?-2147483648:-r:r),r=n=0}}return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(e,t){ZS[e]=t,JS[t]=e});let tP=(()=>{class e{constructor(e){this.httpBackend=e}logOnServer(e,t,n){const r=new jb("POST",e,t,n||{});return this.httpBackend.handle(r).pipe(xd(e=>e instanceof Ub),P(e=>e.body))}}return e.\u0275fac=function(t){return new(t||e)(sr(Rb))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const nP={TRACE:0,DEBUG:1,INFO:2,LOG:3,WARN:4,ERROR:5,FATAL:6,OFF:7};nP[nP.TRACE]="TRACE",nP[nP.DEBUG]="DEBUG",nP[nP.INFO]="INFO",nP[nP.LOG]="LOG",nP[nP.WARN]="WARN",nP[nP.ERROR]="ERROR",nP[nP.FATAL]="FATAL",nP[nP.OFF]="OFF";class rP{}class iP{constructor(e){this.config=e,this._config=e}get level(){return this._config.level}get serverLogLevel(){return this._config.serverLogLevel}updateConfig(e){this._config=this._clone(e)}getConfig(){return this._clone(this._config)}_clone(e){const t=new rP;return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}}const oP=["purple","teal","gray","gray","red","red","red"];class sP{static prepareMetaString(e,t,n,r){return`${e} ${t}${n?` [${n}:${r}]`:""}`}static getColor(e,t){switch(e){case nP.TRACE:return this.getColorFromConfig(nP.TRACE,t);case nP.DEBUG:return this.getColorFromConfig(nP.DEBUG,t);case nP.INFO:case nP.LOG:return this.getColorFromConfig(nP.INFO,t);case nP.WARN:case nP.ERROR:case nP.FATAL:return this.getColorFromConfig(nP.FATAL,t);case nP.OFF:default:return}}static getColorFromConfig(e,t){return t?t[e]:oP[e]}static prepareMessage(e){try{"string"==typeof e||e instanceof Error||(e=JSON.stringify(e,null,2))}catch(t){e='The provided "message" value could not be parsed with JSON.stringify().'}return e}static prepareAdditionalParameters(e){return null==e?null:e.map((e,t)=>{try{return"object"==typeof e&&JSON.stringify(e),e}catch(n){return`The additional[${t}] value could not be parsed using JSON.stringify().`}})}}class aP{constructor(e,t,n){this.fileName=e,this.lineNumber=t,this.columnNumber=n}toString(){return this.fileName+":"+this.lineNumber+":"+this.columnNumber}}let lP=(()=>{class e{constructor(e){this.httpBackend=e,this.sourceMapCache=new Map,this.logPositionCache=new Map}static getStackLine(e){const t=new Error;try{throw t}catch(n){try{let n=4;return t.stack.split("\n")[0].includes(".js:")||(n+=1),t.stack.split("\n")[n+(e||0)]}catch(n){return null}}}static getPosition(e){const t=e.lastIndexOf("/");let n=e.indexOf(")");n<0&&(n=void 0);const r=e.substring(t+1,n).split(":");return 3===r.length?new aP(r[0],+r[1],+r[2]):new aP("unknown",0,0)}static getTranspileLocation(e){let t=e.indexOf("(");t<0&&(t=e.lastIndexOf("@"),t<0&&(t=e.lastIndexOf(" ")));let n=e.indexOf(")");return n<0&&(n=void 0),e.substring(t+1,n)}static getMapFilePath(t){const n=e.getTranspileLocation(t),r=n.substring(0,n.lastIndexOf(":"));return r.substring(0,r.lastIndexOf(":"))+".map"}static getMapping(e,t){let n=0,r=0,i=0;const o=e.mappings.split(";");for(let s=0;s<o.length;s++){let a=0;const l=o[s].split(",");for(let o=0;o<l.length;o++){const c=eP(l[o]);if(c.length>=4&&(a+=c[0],n+=c[1],r+=c[2],i+=c[3]),s===t.lineNumber){if(a===t.columnNumber)return new aP(e.sources[n],r,i);if(o+1===l.length)return new aP(e.sources[n],r,0)}}}return new aP("unknown",0,0)}_getSourceMap(t,n){const r=new jb("GET",t),i=n.toString();if(this.logPositionCache.has(i))return this.logPositionCache.get(i);this.sourceMapCache.has(t)||this.sourceMapCache.set(t,this.httpBackend.handle(r).pipe(xd(e=>e instanceof Ub),P(e=>e.body),function(e=-1){return t=>t.lift(new KS(e,t))}(3),Xy(1)));const o=this.sourceMapCache.get(t).pipe(P(t=>e.getMapping(t,n)),lw(()=>ld(n)),Xy(1));return this.logPositionCache.set(i,o),o}getCallerDetails(t,n){const r=e.getStackLine(n);return r?ld([e.getPosition(r),e.getMapFilePath(r)]).pipe(Bp(([e,n])=>t?this._getSourceMap(n,e):ld(e))):ld(new aP("",0,0))}}return e.\u0275fac=function(t){return new(t||e)(sr(Rb))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const cP=["TRACE","DEBUG","INFO","LOG","WARN","ERROR","FATAL","OFF"];let uP=(()=>{class e{constructor(e,t,n,r,i){this.mapperService=e,this.httpService=t,this.platformId=r,this.datePipe=i,this._withCredentials=!1,this._isIE=kh(r)&&navigator&&navigator.userAgent&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.config=new iP(n),this._logFunc=this._isIE?this._logIE.bind(this):this._logModern.bind(this)}get level(){return this.config.level}get serverLogLevel(){return this.config.serverLogLevel}trace(e,...t){this._log(nP.TRACE,e,t)}debug(e,...t){this._log(nP.DEBUG,e,t)}info(e,...t){this._log(nP.INFO,e,t)}log(e,...t){this._log(nP.LOG,e,t)}warn(e,...t){this._log(nP.WARN,e,t)}error(e,...t){this._log(nP.ERROR,e,t)}fatal(e,...t){this._log(nP.FATAL,e,t)}setCustomHttpHeaders(e){this._customHttpHeaders=e}setCustomParams(e){this._customParams=e}setWithCredentialsOptionValue(e){this._withCredentials=e}registerMonitor(e){this._loggerMonitor=e}updateConfig(e){this.config.updateConfig(e)}getConfigSnapshot(){return this.config.getConfig()}_logIE(e,t,n,r){switch(r=r||[],e){case nP.WARN:console.warn(`${t} `,n,...r);break;case nP.ERROR:case nP.FATAL:console.error(`${t} `,n,...r);break;case nP.INFO:console.info(`${t} `,n,...r);break;default:console.log(`${t} `,n,...r)}}_logModern(e,t,n,r){const i=this.getConfigSnapshot().colorScheme,o=sP.getColor(e,i);switch(r=r||[],e){case nP.WARN:console.warn(`%c${t}`,`color:${o}`,n,...r);break;case nP.ERROR:case nP.FATAL:console.error(`%c${t}`,`color:${o}`,n,...r);break;case nP.INFO:console.info(`%c${t}`,`color:${o}`,n,...r);break;case nP.DEBUG:console.debug(`%c${t}`,`color:${o}`,n,...r);break;default:console.log(`%c${t}`,`color:${o}`,n,...r)}}_log(e,t,n=[],r=!0){const i=this.config.getConfig(),o=r&&i.serverLoggingUrl&&e>=i.serverLogLevel,s=e>=i.level;if(!t||!o&&!s)return;const a=cP[e];t="function"==typeof t?t():t;const l=sP.prepareAdditionalParameters(n),c=i.timestampFormat?this.datePipe.transform(new Date,i.timestampFormat):(new Date).toISOString();this.mapperService.getCallerDetails(i.enableSourceMaps,i.proxiedSteps).subscribe(r=>{const u={message:sP.prepareMessage(t),additional:l,level:e,timestamp:c,fileName:r.fileName,lineNumber:r.lineNumber.toString()};if(this._loggerMonitor&&s&&this._loggerMonitor.onLog(u),o){u.message=t instanceof Error?t.stack:t,u.message=sP.prepareMessage(u.message);const e=this._customHttpHeaders||new Ab;e.set("Content-Type","application/json");const n={headers:e,params:this._customParams||new Fb,responseType:i.httpResponseType||"json",withCredentials:this._withCredentials};this.httpService.logOnServer(i.serverLoggingUrl,u,n).subscribe(e=>{},e=>{this._log(nP.ERROR,`FAILED TO LOG ON SERVER: ${t}`,[e],!1)})}if(s&&!i.disableConsoleLogging){const o=sP.prepareMetaString(c,a,i.disableFileDetails?null:r.fileName,r.lineNumber.toString());return this._logFunc(e,o,t,n)}})}}return e.\u0275fac=function(t){return new(t||e)(sr(lP),sr(tP),sr(rP),sr(_c),sr(Sh))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const hP=["input"],dP=function(){return{enterDuration:150}},pP=["*"],fP=new Xn("mat-checkbox-default-options",{providedIn:"root",factory:mP});function mP(){return{color:"accent",clickAction:"check-indeterminate"}}let gP=0;const yP=mP(),_P={provide:rv,useExisting:oe(()=>CP),multi:!0};class vP{}class bP{constructor(e){this._elementRef=e}}const wP=$g(Gg(qg(Xg(bP))));let CP=(()=>{class e extends wP{constructor(e,t,n,r,i,o,s){super(e),this._changeDetectorRef=t,this._focusMonitor=n,this._ngZone=r,this._animationMode=o,this._options=s,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++gP,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new Xl,this.indeterminateChange=new Xl,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||yP,this.color=this.defaultColor=this._options.color||yP.color,this.tabIndex=parseInt(i)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=Ad(e)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const t=Ad(e);t!==this.disabled&&(this._disabled=t,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const t=e!=this._indeterminate;this._indeterminate=Ad(e),t&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(e){let t=this._currentCheckState,n=this._elementRef.nativeElement;if(t!==e&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(t,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);const e=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(e)},1e3)})}}_emitChangeEvent(){const e=new vP;e.source=this,e.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(e)}toggle(){this.checked=!this.checked}_onInputClick(e){var t;const n=null===(t=this._options)||void 0===t?void 0:t.clickAction;e.stopPropagation(),this.disabled||"noop"===n?this.disabled||"noop"!==n||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==n&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(e,t){e?this._focusMonitor.focusVia(this._inputElement,e,t):this._inputElement.nativeElement.focus(t)}_onInteractionEvent(e){e.stopPropagation()}_getAnimationClassForCheckStateTransition(e,t){if("NoopAnimations"===this._animationMode)return"";let n="";switch(e){case 0:if(1===t)n="unchecked-checked";else{if(3!=t)return"";n="unchecked-indeterminate"}break;case 2:n=1===t?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===t?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===t?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${n}`}_syncIndeterminate(e){const t=this._inputElement;t&&(t.nativeElement.indeterminate=e)}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(Cp),ws(Mc),Un("tabindex"),ws(Mg,8),ws(fP,8))},e.\u0275cmp=Ue({type:e,selectors:[["mat-checkbox"]],viewQuery:function(e,t){if(1&e&&(ic(hP,1),ic(ly,1)),2&e){let e;rc(e=sc())&&(t._inputElement=e.first),rc(e=sc())&&(t.ripple=e.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(e,t){2&e&&(da("id",t.id),ys("tabindex",null),Qs("mat-checkbox-indeterminate",t.indeterminate)("mat-checkbox-checked",t.checked)("mat-checkbox-disabled",t.disabled)("mat-checkbox-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[Ta([_P]),is],ngContentSelectors:pP,decls:17,vars:20,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(e,t){if(1&e&&(js(),Es(0,"label",0,1),Es(2,"span",2),Es(3,"input",3,4),Ds("change",function(e){return t._onInteractionEvent(e)})("click",function(e){return t._onInputClick(e)}),Ss(),Es(5,"span",5),Ps(6,"span",6),Ss(),Ps(7,"span",7),Es(8,"span",8),on(),Es(9,"svg",9),Ps(10,"path",10),Ss(),sn(),Ps(11,"span",11),Ss(),Ss(),Es(12,"span",12,13),Ds("cdkObserveContent",function(){return t._onLabelTextChange()}),Es(14,"span",14),la(15,"\xa0"),Ss(),Hs(16),Ss(),Ss()),2&e){const e=bs(1),n=bs(13);ys("for",t.inputId),Ui(2),Qs("mat-checkbox-inner-container-no-side-margin",!n.textContent||!n.textContent.trim()),Ui(1),Cs("id",t.inputId)("required",t.required)("checked",t.checked)("disabled",t.disabled)("tabIndex",t.tabIndex),ys("value",t.value)("name",t.name)("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby)("aria-checked",t._getAriaChecked())("aria-describedby",t.ariaDescribedby),Ui(2),Cs("matRippleTrigger",e)("matRippleDisabled",t._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",Ml(19,dP))}},directives:[ly,Qd],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-frame{border-style:dotted}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),e})(),xP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({}),e})(),EP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[cy,Wg,Zd,xP],Wg,xP]}),e})();const SP=["trigger"],PP=["panel"];function TP(e,t){if(1&e&&(Es(0,"span",8),la(1),Ss()),2&e){const e=Bs();Ui(1),ca(e.placeholder)}}function IP(e,t){if(1&e&&(Es(0,"span",12),la(1),Ss()),2&e){const e=Bs(2);Ui(1),ca(e.triggerValue)}}function OP(e,t){1&e&&Hs(0,0,["*ngSwitchCase","true"])}function kP(e,t){1&e&&(Es(0,"span",9),vs(1,IP,2,1,"span",10),vs(2,OP,1,0,"ng-content",11),Ss()),2&e&&(Cs("ngSwitch",!!Bs().customTrigger),Ui(2),Cs("ngSwitchCase",!0))}function RP(e,t){if(1&e){const e=ks();Es(0,"div",13),Es(1,"div",14,15),Ds("@transformPanel.done",function(t){return Rt(e),Bs()._panelDoneAnimatingStream.next(t.toState)})("keydown",function(t){return Rt(e),Bs()._handleKeydown(t)}),Hs(3,1),Ss(),Ss()}if(2&e){const e=Bs();Cs("@transformPanelWrap",void 0),Ui(1),n="mat-select-panel ",r=e._getPanelTheme(),i="",function(e,t,n,r){const i=kt(),o=Vt(2);i.firstUpdatePass&&ta(i,null,o,!0);const s=Ot();if(n!==Vi&&ms(s,o,n)){const r=i.data[tn()];if(aa(r,!0)&&!ea(i,o)){let e=r.classesWithoutHost;null!==e&&(n=re(e,n||"")),xs(i,r,s,n,!0)}else!function(e,t,n,r,i,o,s,a){i===Vi&&(i=Us);let l=0,c=0,u=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==u||null!==h;){const s=l<i.length?i[l+1]:void 0,d=c<o.length?o[c+1]:void 0;let p,f=null;u===h?(l+=2,c+=2,s!==d&&(f=h,p=d)):null===h||null!==u&&u<h?(l+=2,f=u):(c+=2,f=h,p=d),null!==f&&ia(e,t,n,r,f,p,!0,a),u=l<i.length?i[l]:null,h=c<o.length?o[c]:null}}(i,r,s,s[11],s[o+1],s[o+1]=function(e,t,n){if(null==n||""===n)return Us;const r=[],i=wr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),0,o)}}(Qn,Zs,_s(Ot(),n,r,i)),Ks("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),Cs("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),ys("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}var n,r,i}const AP=[[["mat-select-trigger"]],"*"],MP=["mat-select-trigger","*"],DP={transformPanelWrap:Qp("transformPanelWrap",[rf("* => void",sf("@transformPanel",[of()],{optional:!0}))]),transformPanel:Qp("transformPanel",[tf("void",ef({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),tf("showing",ef({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),tf("showing-multiple",ef({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),rf("void => *",Zp("120ms cubic-bezier(0, 0, 0.2, 1)")),rf("* => void",Zp("100ms 25ms linear",ef({opacity:0})))])};let FP=0;const LP=new Xn("mat-select-scroll-strategy"),BP=new Xn("MAT_SELECT_CONFIG"),NP={provide:LP,deps:[O_],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};class jP{constructor(e,t){this.source=e,this.value=t}}class HP{constructor(e,t,n,r,i){this._elementRef=e,this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=r,this.ngControl=i}}const zP=qg($g(Xg(Yg(HP)))),VP=new Xn("MatSelectTrigger");let UP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["mat-select-trigger"]],features:[Ta([{provide:VP,useExisting:e}])]}),e})(),WP=(()=>{class e extends zP{constructor(e,t,n,r,i,o,s,a,l,c,u,h,d,p){var f,m,g;super(i,r,s,a,c),this._viewportRuler=e,this._changeDetectorRef=t,this._ngZone=n,this._dir=o,this._parentFormField=l,this.ngControl=c,this._liveAnnouncer=d,this._defaultOptions=p,this._panelOpen=!1,this._compareWith=(e,t)=>e===t,this._uid="mat-select-"+FP++,this._triggerAriaLabelledBy=null,this._destroy=new x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+FP++,this._panelDoneAnimatingStream=new x,this._overlayPanelClass=(null===(f=this._defaultOptions)||void 0===f?void 0:f.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(g=null===(m=this._defaultOptions)||void 0===m?void 0:m.disableOptionCentering)&&void 0!==g&&g,this.ariaLabel="",this.optionSelectionChanges=Aw(()=>{const e=this.options;return e?e.changes.pipe(Lp(e),Bp(()=>X(...e.map(e=>e.onSelectionChange)))):this._ngZone.onStable.pipe(Od(1),Bp(()=>this.optionSelectionChanges))}),this.openedChange=new Xl,this._openedStream=this.openedChange.pipe(xd(e=>e),P(()=>{})),this._closedStream=this.openedChange.pipe(xd(e=>!e),P(()=>{})),this.selectionChange=new Xl,this.valueChange=new Xl,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==p?void 0:p.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=p.typeaheadDebounceInterval),this._scrollStrategyFactory=h,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(u)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=Ad(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=Ad(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Ad(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Md(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new $y(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Oy(),Hp(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Hp(this._destroy)).subscribe(e=>{e.added.forEach(e=>e.select()),e.removed.forEach(e=>e.deselect())}),this.options.changes.pipe(Lp(null),Hp(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){const t=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?t.setAttribute("aria-labelledby",e):t.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(e=>e.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const t=e.keyCode,n=40===t||38===t||37===t||39===t,r=13===t||32===t,i=this._keyManager;if(!i.isTyping()&&r&&!cd(e)||(this.multiple||e.altKey)&&n)e.preventDefault(),this.open();else if(!this.multiple){const t=this.selected;i.onKeydown(e);const n=this.selected;n&&t!==n&&this._liveAnnouncer.announce(n.viewValue,1e4)}}_handleOpenKeydown(e){const t=this._keyManager,n=e.keyCode,r=40===n||38===n,i=t.isTyping();if(r&&e.altKey)e.preventDefault(),this.close();else if(i||13!==n&&32!==n||!t.activeItem||cd(e))if(!i&&this._multiple&&65===n&&e.ctrlKey){e.preventDefault();const t=this.options.some(e=>!e.disabled&&!e.selected);this.options.forEach(e=>{e.disabled||(t?e.select():e.deselect())})}else{const n=t.activeItemIndex;t.onKeydown(e),this._multiple&&r&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==n&&t.activeItem._selectViaInteraction()}else e.preventDefault(),t.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(Od(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(e=>e.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(e=>this._selectValue(e)),this._sortValues();else{const t=this._selectValue(e);t?this._keyManager.updateActiveItem(t):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const t=this.options.find(t=>{if(this._selectionModel.isSelected(t))return!1;try{return null!=t.value&&this._compareWith(t.value,e)}catch(n){return!1}});return t&&this._selectionModel.select(t),t}_initKeyManager(){this._keyManager=new ap(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Hp(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Hp(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=X(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Hp(e)).subscribe(e=>{this._onSelect(e.source,e.isUserInput),e.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),X(...this.options.map(e=>e._stateChanges)).pipe(Hp(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,t){const n=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(n!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),n!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((t,n)=>this.sortComparator?this.sortComparator(t,n,e):e.indexOf(t)-e.indexOf(n)),this.stateChanges.next()}}_propagateChanges(e){let t=null;t=this.multiple?this.selected.map(e=>e.value):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(this._getChangeEvent(t)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._getLabelId();return this.ariaLabelledby?e+" "+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getLabelId(){var e;return(null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId())||""}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._getLabelId()+" "+this._valueId;return this.ariaLabelledby&&(e+=" "+this.ariaLabelledby),e}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty}}return e.\u0275fac=function(t){return new(t||e)(ws(Qy),ws(sl),ws(Mc),ws(Kg),ws(Da),ws(wf,8),ws(pb,8),ws(Cb,8),ws(JE,8),ws(Iv,10),Un("tabindex"),ws(LP),ws(yp),ws(BP,8))},e.\u0275dir=Ye({type:e,viewQuery:function(e,t){if(1&e&&(ic(SP,1),ic(PP,1),ic(M_,1)),2&e){let e;rc(e=sc())&&(t.trigger=e.first),rc(e=sc())&&(t.panel=e.first),rc(e=sc())&&(t.overlayDir=e.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[is,at]}),e})(),XP=(()=>{class e extends WP{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,t,n){const r=this._getItemHeight();return Math.min(Math.max(0,r*e-t+r/2),n)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Hp(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Od(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const t=Ey(e,this.options,this.optionGroups),n=this._getItemHeight();var r,i,o;this.panel.nativeElement.scrollTop=(i=n,(r=(e+t)*n)<(o=this.panel.nativeElement.scrollTop)?r:r+i>o+256?Math.max(0,r-256+i):o)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new jP(this,e)}_calculateOverlayOffsetX(){const e=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),t=this._viewportRuler.getViewportSize(),n=this._isRtl(),r=this.multiple?56:32;let i;if(this.multiple)i=40;else if(this.disableOptionCentering)i=16;else{let e=this._selectionModel.selected[0]||this.options.first;i=e&&e.group?32:16}n||(i*=-1);const o=0-(e.left+i-(n?r:0)),s=e.right+i-t.width+(n?0:r);o>0?i+=o+8:s>0&&(i-=s+8),this.overlayDir.offsetX=Math.round(i),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,t,n){const r=this._getItemHeight(),i=(r-this._triggerRect.height)/2,o=Math.floor(256/r);let s;return this.disableOptionCentering?0:(s=0===this._scrollTop?e*r:this._scrollTop===n?(e-(this._getItemCount()-o))*r+(r-(this._getItemCount()*r-256)%r):t-r/2,Math.round(-1*s-i))}_checkOverlayWithinViewport(e){const t=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),r=this._triggerRect.top-8,i=n.height-this._triggerRect.bottom-8,o=Math.abs(this._offsetY),s=Math.min(this._getItemCount()*t,256)-o-this._triggerRect.height;s>i?this._adjustPanelUp(s,i):o>r?this._adjustPanelDown(o,r,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,t){const n=Math.round(e-t);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,t,n){const r=Math.round(e-t);if(this._scrollTop+=r,this._offsetY+=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),t=this._getItemCount(),n=Math.min(t*e,256),r=t*e-n;let i;i=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),i+=Ey(i,this.options,this.optionGroups);const o=n/2;this._scrollTop=this._calculateOverlayScroll(i,o,r),this._offsetY=this._calculateOverlayOffsetY(i,o,r),this._checkOverlayWithinViewport(r)}_getOriginBasedOnOption(){const e=this._getItemHeight(),t=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-t+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return e.\u0275fac=function(t){return GP(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["mat-select"]],contentQueries:function(e,t,n){if(1&e&&(oc(n,VP,1),oc(n,xy,1),oc(n,yy,1)),2&e){let e;rc(e=sc())&&(t.customTrigger=e.first),rc(e=sc())&&(t.options=e),rc(e=sc())&&(t.optionGroups=e)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,t){1&e&&Ds("keydown",function(e){return t._handleKeydown(e)})("focus",function(){return t._onFocus()})("blur",function(){return t._onBlur()}),2&e&&(ys("id",t.id)("tabindex",t.tabIndex)("aria-controls",t.panelOpen?t.id+"-panel":null)("aria-expanded",t.panelOpen)("aria-label",t.ariaLabel||null)("aria-required",t.required.toString())("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-describedby",t._ariaDescribedby||null)("aria-activedescendant",t._getAriaActiveDescendant()),Qs("mat-select-disabled",t.disabled)("mat-select-invalid",t.errorState)("mat-select-required",t.required)("mat-select-empty",t.empty)("mat-select-multiple",t.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Ta([{provide:HE,useExisting:e},{provide:dy,useExisting:e}]),is],ngContentSelectors:MP,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,t){if(1&e&&(js(AP),Es(0,"div",0,1),Ds("click",function(){return t.toggle()}),Es(3,"div",2),vs(4,TP,2,1,"span",3),vs(5,kP,3,2,"span",4),Ss(),Es(6,"div",5),Ps(7,"div",6),Ss(),Ss(),vs(8,RP,4,14,"ng-template",7),Ds("backdropClick",function(){return t.close()})("attach",function(){return t._onAttached()})("detach",function(){return t.close()})),2&e){const e=bs(1);ys("aria-owns",t.panelOpen?t.id+"-panel":null),Ui(3),Cs("ngSwitch",t.empty),ys("id",t._valueId),Ui(1),Cs("ngSwitchCase",!0),Ui(1),Cs("ngSwitchCase",!1),Ui(3),Cs("cdkConnectedOverlayPanelClass",t._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",t._scrollStrategy)("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayOpen",t.panelOpen)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayMinWidth",null==t._triggerRect?null:t._triggerRect.width)("cdkConnectedOverlayOffsetY",t._offsetY)}},directives:[A_,fh,mh,M_,gh,sh],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px}\n'],encapsulation:2,data:{animation:[DP.transformPanelWrap,DP.transformPanel]},changeDetection:0}),e})();const GP=zn(XP);let qP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[NP],imports:[[Oh,F_,Sy,Wg],Zy,tS,Sy,Wg]}),e})();const $P=["input"],YP=function(){return{enterDuration:150}},KP=["*"],QP=new Xn("mat-radio-default-options",{providedIn:"root",factory:function(){return{color:"accent"}}});let ZP=0;const JP={provide:rv,useExisting:oe(()=>rT),multi:!0};class eT{constructor(e,t){this.source=e,this.value=t}}const tT=new Xn("MatRadioGroup");let nT=(()=>{class e{constructor(e){this._changeDetector=e,this._value=null,this._name="mat-radio-group-"+ZP++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new Xl}get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=Ad(e),this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=Ad(e),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(e=>{e.checked=this.value===e.value,e.checked&&(this._selected=e)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new eT(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275dir=Ye({type:e,inputs:{name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"}}),e})(),rT=(()=>{class e extends nT{}return e.\u0275fac=function(t){return iT(t||e)},e.\u0275dir=Ye({type:e,selectors:[["mat-radio-group"]],contentQueries:function(e,t,n){if(1&e&&oc(n,lT,1),2&e){let e;rc(e=sc())&&(t._radios=e)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[Ta([JP,{provide:tT,useExisting:e}]),is]}),e})();const iT=zn(rT);class oT{constructor(e){this._elementRef=e}}const sT=qg($g(oT));let aT=(()=>{class e extends sT{constructor(e,t,n,r,i,o,s,a){super(t),this._changeDetector=n,this._focusMonitor=r,this._radioDispatcher=i,this._animationMode=o,this._providerOverride=s,this._uniqueId="mat-radio-"+ ++ZP,this.id=this._uniqueId,this.change=new Xl,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=e,a&&(this.tabIndex=Md(a,0)),this._removeUniqueSelectionListener=i.listen((e,t)=>{e!==this.id&&t===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(e){const t=Ad(e);this._checked!==t&&(this._checked=t,t&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!t&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),t&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(e){this._setDisabled(Ad(e))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=Ad(e)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(e){this._color=e}get inputId(){return`${this.id||this._uniqueId}-input`}focus(e,t){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new eT(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(e){e.stopPropagation()}_onInputChange(e){e.stopPropagation();const t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),t&&this.radioGroup._emitChangeEvent())}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(ws(nT),ws(Da),ws(sl),ws(Cp),ws(Yy),ws(String),ws(void 0),ws(String))},e.\u0275dir=Ye({type:e,viewQuery:function(e,t){if(1&e&&ic($P,1),2&e){let e;rc(e=sc())&&(t._inputElement=e.first)}},inputs:{id:"id",checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change"},features:[is]}),e})(),lT=(()=>{class e extends aT{constructor(e,t,n,r,i,o,s,a){super(e,t,n,r,i,o,s,a)}}return e.\u0275fac=function(t){return new(t||e)(ws(tT,8),ws(Da),ws(sl),ws(Cp),ws(Yy),ws(Mg,8),ws(QP,8),Un("tabindex"))},e.\u0275cmp=Ue({type:e,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(e,t){1&e&&Ds("focus",function(){return t._inputElement.nativeElement.focus()}),2&e&&(ys("tabindex",null)("id",t.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),Qs("mat-radio-checked",t.checked)("mat-radio-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-primary","primary"===t.color)("mat-accent","accent"===t.color)("mat-warn","warn"===t.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[is],ngContentSelectors:KP,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(e,t){if(1&e&&(js(),Es(0,"label",0,1),Es(2,"span",2),Ps(3,"span",3),Ps(4,"span",4),Es(5,"input",5,6),Ds("change",function(e){return t._onInputChange(e)})("click",function(e){return t._onInputClick(e)}),Ss(),Es(7,"span",7),Ps(8,"span",8),Ss(),Ss(),Es(9,"span",9),Es(10,"span",10),la(11,"\xa0"),Ss(),Hs(12),Ss(),Ss()),2&e){const e=bs(1);ys("for",t.inputId),Ui(5),Cs("id",t.inputId)("checked",t.checked)("disabled",t.disabled)("tabIndex",t.tabIndex)("required",t.required),ys("name",t.name)("value",t.value)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby)("aria-describedby",t.ariaDescribedby),Ui(2),Cs("matRippleTrigger",e)("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Ml(18,YP)),Ui(2),Qs("mat-radio-label-before","before"==t.labelPosition)}},directives:[ly],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:transform ease 280ms,background-color ease 280ms;width:20px;transform:scale(0.001)}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5)}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),e})(),cT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[cy,Wg],Wg]}),e})();const uT=Math.round,hT=Math.min,dT=Math.max,pT=e=>"string"==typeof e&&e.includes("%"),fT=e=>e<1?uT(e):e,mT=e=>(e=Number.parseFloat(e),Number.isNaN(e)||e<0||e>1?1:e),gT=e=>e.a<1&&e.a>=0,yT=e=>hT(1,dT(0,e)),_T="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",vT=e=>new RegExp(_T).test(e),bT=e=>vT(e.r)&&vT(e.g)&&vT(e.b),wT=`[\\s|\\(]+(${_T})[,|\\s]+(${_T})[,|\\s]+(${_T})\\s*\\)?`,CT=`[\\s|\\(]+(${_T})[,|\\s]+(${_T})[,|\\s]+(${_T})[,|\\s]+(${_T})\\s*\\)?`;function xT(e,t){(e=>"string"==typeof e&&e.includes(".")&&1===Number.parseFloat(e))(e)&&(e="100%");const n=pT(e);return e=hT(t,dT(0,Number.parseFloat(e))),n&&(e=Number.parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)}function ET(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ST(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function PT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ST(Object(n),!0).forEach(function(t){ET(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ST(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const TT=e=>Number.parseInt(e,16),IT=e=>TT(e)/255,OT=e=>e<=1?100*e+"%":e,kT=e=>{const[t,n,r]=[e._r,e._g,e._b].map(e=>uT(e));return{r:t,g:n,b:r,a:e._roundA}},RT=e=>({r:e._r,g:e._g,b:e._b,a:e._a}),AT=e=>{const[t,n,r]=[e.r,e.g,e.b].map(e=>255*xT(e,255));return{r:t,g:n,b:r,a:mT(e.a)}},MT=e=>{const[t,n,r]=[e.r,e.g,e.b].map(e=>`${uT(100*xT(e,255))}%`);return{r:t,g:n,b:r,a:e.a}},DT=e=>1===e.a?`rgb(${e.r}, ${e.g}, ${e.b})`:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,FT=e=>1===e.a?[e.r,e.g,e.b]:[e.r,e.g,e.b,uT(255*e.a)],LT=(e,t)=>{const n=FT(e).map(e=>e.toString(16)).map(e=>{return 1===(t=e).length?`0${t}`:`${t}`;var t});return t&&n.every(e=>e.charAt(0)===e.charAt(1))?n.map(e=>e.charAt(0)).join(""):n.join("")},BT=(e,t)=>LT(PT(PT({},e),{},{a:1}),t);function NT(e,t){const n=new aI(e),r=new aI(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)}function jT(e,t,n){const r=NT(e,t),i=function(e){let t,n;return t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}(n);let o=!1;switch(i.level+i.size){case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break;default:o=r>=4.5}return o}function HT(e,t,n={}){const{includeFallbackColors:r,level:i,size:o}=n;let s,a=null,l=0;return t.forEach(t=>{s=NT(e,t),s>l&&(l=s,a=new aI(t))}),jT(e,a,{level:i,size:o})||!r?a:(n.includeFallbackColors=!1,HT(e,["#fff","#000"],n))}function zT(e,t){return{monochromatic:qT,analogous:GT,complement:VT,splitcomplement:XT,triad:UT,tetrad:WT}[e](...t)}function VT(e){const t=new aI(e).toHsl();return t.h=(t.h+180)%360,new aI(t)}function UT(e){const t=new aI(e).toHsl(),{h:n}=t;return[new aI(e),new aI({h:(n+120)%360,s:t.s,l:t.l}),new aI({h:(n+240)%360,s:t.s,l:t.l})]}function WT(e){const t=new aI(e).toHsl(),{h:n}=t;return[new aI(e),new aI({h:(n+90)%360,s:t.s,l:t.l}),new aI({h:(n+180)%360,s:t.s,l:t.l}),new aI({h:(n+270)%360,s:t.s,l:t.l})]}function XT(e){const t=new aI(e).toHsl(),{h:n}=t;return[new aI(e),new aI({h:(n+72)%360,s:t.s,l:t.l}),new aI({h:(n+216)%360,s:t.s,l:t.l})]}function GT(e,t,n){t=t||6,n=n||30;const r=new aI(e).toHsl(),i=360/n,o=[new aI(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(new aI(r));return o}function qT(e,t){t=t||6;const n=new aI(e).toHsv();let{h:r,s:i,v:o}=n;const s=[],a=1/t;for(;t--;)s.push(new aI({h:r,s:i,v:o})),o=(o+a)%1;return s}function $T(e,t){const n={invert:YT,desaturate:KT,saturate:QT,greyscale:ZT,lighten:JT,brighten:eI,darken:tI,spin:nI}[e](...t),[r]=t;return r._r=n._r,r._g=n._g,r._b=n._b,r.setAlpha(n._a),r}function YT(e){const t=new aI(e).toRgb();return t.r=dT(0,hT(255,255-t.r)),t.g=dT(0,hT(255,255-t.g)),t.b=dT(0,hT(255,255-t.b)),new aI(t)}function KT(e,t){t=0===t?0:t||10;const n=new aI(e).toHsl();return n.s-=t/100,n.s=yT(n.s),new aI(n)}function QT(e,t){t=0===t?0:t||10;const n=new aI(e).toHsl();return n.s+=t/100,n.s=yT(n.s),new aI(n)}function ZT(e){return new aI(e).desaturate(100)}function JT(e,t){t=0===t?0:t||10;const n=new aI(e).toHsl();return n.l+=t/100,n.l=yT(n.l),new aI(n)}function eI(e,t){t=0===t?0:t||10;const n=new aI(e).toRgb();return n.r=dT(0,hT(255,n.r-uT(-t/100*255))),n.g=dT(0,hT(255,n.g-uT(-t/100*255))),n.b=dT(0,hT(255,n.b-uT(-t/100*255))),new aI(n)}function tI(e,t){t=0===t?0:t||10;const n=new aI(e).toHsl();return n.l-=t/100,n.l=yT(n.l),new aI(n)}function nI(e,t){const n=new aI(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new aI(n)}class rI{constructor(e,t,n={}){this.api=e,this.id=t,this.options=n}use(e){return this.wanted=e,this}parse(e){const t=this.api.findColor(e);return{as:e=>Object.assign(t,{format:e}),rgba:{r:t.r,g:t.g,b:t.b,a:t.a},valueOf:()=>t}}print(e,t){return this.api.print(t,e)}complete(e){const t=this.toString(e);return delete this.wanted,t}}const iI={format:!1,ok:!1,r:0,g:0,b:0,a:1};let oI=0;const sI=new class{constructor(){this.colorspaces={},this.options={alphaFormat:"rgb",shortHex:!1,upperCaseHex:!1}}set(e){Object.assign(this.options,e);for(const t in this.colorspaces)({}).hasOwnProperty.call(this.colorspaces,t)&&Object.assign(this.colorspaces[t].options,e)}add(e,t){return this.colorspaces[e]=new rI(this,e,PT(PT({},this.options),t)),t.alias&&t.alias.forEach(t=>{this.colorspaces[t]=this.colorspaces[e]}),this.colorspaces[e]}findColor(e){const t=PT({},iI);if(e="string"==typeof e?e.trim().toLowerCase():e)for(const n in this.colorspaces)if(this.colorspaces[n].shouldHandleInput(e)){Object.assign(t,this.colorspaces[n].toRgb(e)),t.format=t.format||n,t.ok=!0;break}return t}raw(e,t){return t in this.colorspaces?this.colorspaces[t].toRaw(e):{r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}}print(e,t,n){const r=n;return(n=n||t)in this.colorspaces?this.colorspaces[n].use(r).complete(e):`[${e.r}, ${e.g}, ${e.b}, ${255*e.a}]`}};class aI{constructor(e,t={}){if((e=e||"")instanceof aI)return e;const n=sI.findColor(e);this._originalInput=e,this._r=fT(n.r),this._g=fT(n.g),this._b=fT(n.b),this._a=n.a,this._roundA=uT(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._ok=n.ok,this._tc_id=aI.newId(),sI.set(t)}static newId(){return oI++}static registerFormat(e,t={}){return sI.add(e,t)}static equals(e,t){return!(!e||!t)&&new aI(e).toRgbString()===new aI(t).toRgbString()}static fromRatio(e,t){if("object"==typeof e){const t={};for(const n in e)({}).hasOwnProperty.call(e,n)&&(t[n]="a"===n?e[n]:OT(e[n]));e=t}return new aI(e,t)}static readability(e,t){return NT(e,t)}static isReadable(e,t,n){return jT(e,t,n)}static mostReadable(e,t,n){return HT(e,t,n)}static mix(e,t,n){return function(e,t,n){n=0===n?0:n||50;const r=new aI(e).toRgb(),i=new aI(t).toRgb(),o=n/100;return new aI({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})}(e,t,n)}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}isValid(){return this._ok}getOriginalInput(){return this._originalInput}getFormat(){return this._format}getAlpha(){return this._a}getBrightness(){return(299*(e=this.toRgb()).r+587*e.g+114*e.b)/1e3;var e}getLuminance(){return function(e,t){let n,r,i;const o=t.r/255,s=t.g/255,a=t.b/255;return n=o<=.03928?o/12.92:((o+.055)/1.055)**2.4,r=s<=.03928?s/12.92:((s+.055)/1.055)**2.4,i=a<=.03928?a/12.92:((a+.055)/1.055)**2.4,.2126*n+.7152*r+.0722*i}(this.toRgb(),RT(this))}toString(e){return sI.print(kT(this),this._format,e)}toName(){return sI.print(kT(this),"name","toName")}toRgb(){return RT(this)}toRgbString(){return DT(kT(this))}toRgbArray(){return FT(kT(this))}toPercentageRgb(){return MT(RT(this))}toPercentageRgbString(){return DT(MT(kT(this)))}toHex(e){return BT(kT(this),e)}toHexString(e){return`#${this.toHex(e)}`}toHex8(e){return LT(kT(this),e)}toHex8String(e){return`#${this.toHex8(e)}`}toHsv(){return sI.raw(RT(this),"hsv")}toHsvString(){return sI.print(RT(this),this._format,"hsv")}toHsl(){return sI.raw(RT(this),"hsl")}toHslString(){return sI.print(RT(this),this._format,"hsl")}setAlpha(e){return this._a=mT(e),this._roundA=uT(100*this._a)/100,this}clone(){return new aI(this.toString())}lighten(...e){return $T("lighten",[this,...e])}brighten(...e){return $T("brighten",[this,...e])}darken(...e){return $T("darken",[this,...e])}desaturate(...e){return $T("desaturate",[this,...e])}saturate(...e){return $T("saturate",[this,...e])}greyscale(...e){return $T("greyscale",[this,...e])}invert(...e){return $T("invert",[this,...e])}spin(...e){return $T("spin",[this,...e])}analogous(...e){return zT("analogous",[this,...e])}complement(...e){return zT("complement",[this,...e])}monochromatic(...e){return zT("monochromatic",[this,...e])}splitcomplement(...e){return zT("splitcomplement",[this,...e])}triad(...e){return zT("triad",[this,...e])}tetrad(...e){return zT("tetrad",[this,...e])}}const lI={rgb:new RegExp(`rgb${wT}`),rgba:new RegExp(`rgba${CT}`)};function cI(e){let t,n,r,i,o;return(o=lI.rgb.exec(e))?([t,n,r]=o.splice(1,3),{r:t,g:n,b:r}):!!(o=lI.rgba.exec(e))&&([t,n,r,i]=o.splice(1,4),{r:t,g:n,b:r,a:i})}const uI=aI.registerFormat("rgb");uI.shouldHandleInput=e=>"object"==typeof e&&bT(e)&&!pT(e.r)||cI(e),uI.toRgb=e=>"object"==typeof e&&AT(e)||AT(cI(e)),uI.toRaw=e=>e,uI.toString=e=>DT(e);const hI=aI.registerFormat("prgb");hI.shouldHandleInput=e=>{if("string"==typeof e){const t=cI(e);return t&&pT(t.r)}return bT(e)&&pT(e.r)},hI.toRgb=e=>AT("object"==typeof e?e:cI(e)),hI.toRaw=e=>MT(e),hI.toString=e=>DT(MT(e));const dI=aI.registerFormat("hex",{alias:["hex3","hex6"]}),pI={hex3:/^#?([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,hex6:/^#?([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/},fI=(e,t=dI.options.shortHex)=>`#${dI.options.upperCaseHex?BT(e,t).toUpperCase():BT(e,t)}`;dI.shouldHandleInput=e=>pI.hex6.test(e)||pI.hex3.test(e),dI.toRgb=e=>function(e){let t;if(t=pI.hex3.exec(e)){const[e,n,r]=t.splice(1,3).map(e=>`${e}${e}`).map(e=>TT(e));return{r:e,g:n,b:r,a:1}}if(t=pI.hex6.exec(e)){const[e,n,r]=t.splice(1,3).map(e=>TT(e));return{r:e,g:n,b:r,a:1}}return!1}(e),dI.toRaw=e=>e,dI.toString=e=>/^hex6?$/.test(dI.wanted)?fI(e):"hex3"===dI.wanted?fI(e,!0):gT(e)?"hex"===dI.options.alphaFormat?fI(e):dI.print(dI.options.alphaFormat,e):fI(e);const mI=aI.registerFormat("hex8",{alias:["hex4"]}),gI={hex4:/^#?([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,hex8:/^#?([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/},yI=(e,t=mI.options.shortHex)=>`#${mI.options.upperCaseHex?LT(e,t).toUpperCase():LT(e,t)}`;mI.shouldHandleInput=e=>gI.hex8.test(e)||gI.hex4.test(e),mI.toRgb=e=>function(e){let t;if(t=gI.hex4.exec(e)){const e=IT(`${t[4]}${t[4]}`),[n,r,i]=t.splice(1,3).map(e=>`${e}${e}`).map(e=>TT(e));return{r:n,g:r,b:i,a:e}}if(t=gI.hex8.exec(e)){const e=IT(t[4]),[n,r,i]=t.splice(1,3).map(e=>TT(e));return{r:n,g:r,b:i,a:e}}return!1}(e),mI.toRaw=e=>e,mI.toString=e=>"hex4"===mI.wanted?yI(e,!0):"hex8"===mI.wanted?yI(e):gT(e)?"hex"===mI.options.alphaFormat?yI(e):mI.print(mI.options.alphaFormat,e):yI(e);const _I=aI.registerFormat("hsl"),vI={hsl:new RegExp(`hsl${wT}`),hsla:new RegExp(`hsla${CT}`)};function bI(e){const t=xT(e.r,255),n=xT(e.g,255),r=xT(e.b,255),i=e.a||1,o=dT(t,n,r),s=hT(t,n,r);let a,l;const c=(o+s)/2;if(o===s)a=0,l=0;else{const e=o-s;switch(l=c>.5?e/(2-o-s):e/(o+s),o){case t:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-t)/e+2;break;default:a=(t-n)/e+4}a/=6}return{h:a,s:l,l:c,a:i}}function wI(e){const t=xT(e.h,360),n=xT(OT(e.s),100),r=xT(OT(e.l),100),i=e.a||1;let o,s,a;function l(e,t,n){return(n=(n=n<0?n+1:n)>1?n-1:n)<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0===n)o=r,s=r,a=r;else{const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;o=l(i,e,t+1/3),s=l(i,e,t),a=l(i,e,t-1/3)}return{r:255*o,g:255*s,b:255*a,a:i}}function CI(e){let t,n,r,i,o;return(o=vI.hsl.exec(e))?([t,n,r]=o.splice(1,3),{h:t,s:n,l:r}):!!(o=vI.hsla.exec(e))&&([t,n,r,i]=o.splice(1,4),{h:t,s:n,l:r,a:i})}_I.shouldHandleInput=e=>{return"object"==typeof e&&vT((t=e).h)&&vT(t.s)&&vT(t.l)||CI(e);var t},_I.toRgb=e=>"object"==typeof e&&wI(e)||wI(CI(e)),_I.toRaw=e=>function(e){let{h:t,s:n,l:r,a:i}=e;return t*=360,{h:t,s:n,l:r,a:i}}(bI(e)),_I.toString=e=>function(e){let{h:t,s:n,l:r,a:i}=e;return t=uT(360*t),n=uT(100*n),r=uT(100*r),1===i?`hsl(${t}, ${n}%, ${r}%)`:`hsla(${t}, ${n}%, ${r}%, ${i})`}(bI(e));const xI=aI.registerFormat("hsv"),EI={hsv:new RegExp(`hsv${wT}`),hsva:new RegExp(`hsva${CT}`)};function SI(e){const t=xT(e.r,255),n=xT(e.g,255),r=xT(e.b,255),i=e.a||1,o=dT(t,n,r),s=hT(t,n,r),a=o-s;let l;const c=0===o?0:a/o,u=o;if(o===s)l=0;else{switch(o){case t:l=(n-r)/a+(n<r?6:0);break;case n:l=(r-t)/a+2;break;default:l=(t-n)/a+4}l/=6}return{h:l,s:c,v:u,a:i}}function PI(e){const t=6*xT(e.h,360),n=xT(OT(e.s),100),r=xT(OT(e.v),100),i=e.a||1,o=Math.floor(t),s=t-o,a=r*(1-n),l=r*(1-s*n),c=r*(1-(1-s)*n),u=o%6;return{r:255*[r,l,a,a,c,r][u],g:255*[c,r,r,l,a,a][u],b:255*[a,a,c,r,r,l][u],a:i}}function TI(e){let t,n,r,i,o;return(o=EI.hsv.exec(e))?([t,n,r]=o.splice(1,3),{h:t,s:n,v:r}):!!(o=EI.hsva.exec(e))&&([t,n,r,i]=o.splice(1,4),{h:t,s:n,v:r,a:i})}xI.shouldHandleInput=e=>{return"object"==typeof e&&vT((t=e).h)&&vT(t.s)&&vT(t.v)||TI(e);var t},xI.toRgb=e=>"object"==typeof e&&PI(e)||PI(TI(e)),xI.toRaw=e=>function(e){let{h:t,s:n,v:r,a:i}=e;return t*=360,{h:t,s:n,v:r,a:i}}(SI(e)),xI.toString=e=>function(e){let{h:t,s:n,v:r,a:i}=e;return t=uT(360*t),n=uT(100*n),r=uT(100*r),1===i?`hsv(${t}, ${n}%, ${r}%)`:`hsva(${t}, ${n}%, ${r}%, ${i})`}(SI(e));const II=aI.registerFormat("name",{alias:["toName"]}),OI={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32",transparent:"00000000"},kI=function(e){const t={};for(const n in e)({}).hasOwnProperty.call(e,n)&&(t[e[n]]=n);return t}(OI);function RI(e,t){return new aI(e,t)}function AI(e,t){if(1&e){const e=ks();Es(0,"button",3),Ds("click",function(){return Rt(e),Bs().setTransparent()}),Ps(1,"span",4),Ss()}}function MI(e,t){if(1&e){const e=ks();Es(0,"mcc-color-picker-option",5),Ds("colorSelected",function(t){return Rt(e),Bs().setColor(t)}),Ss()}if(2&e){const e=t.$implicit,n=Bs();Cs("color",e)("selectedColor",n.selectedColor)}}function DI(e,t){}function FI(e,t){1&e&&vs(0,DI,0,0,"ng-template",7),2&e&&(Bs(2),Cs("cdkPortalOutlet",bs(3)))}II.shouldHandleInput=e=>OI[e],II.toRgb=e=>II.parse(OI[e]).rgba,II.toRaw=e=>e,II.toString=e=>0===e.a?"transparent":(!gT(e)||"toName"!==II.wanted)&&(gT(e)&&"name"===II.wanted?`#${BT(e)}`:gT(e)?II.print(II.options.alphaFormat,e):kI[BT(e,!0)]||!1),RI.equals=aI.equals,RI.registerFormat=aI.registerFormat,RI.fromRatio=aI.fromRatio,RI.mix=aI.mix,RI.readability=aI.readability,RI.isReadable=aI.isReadable,RI.mostReadable=aI.mostReadable,RI.names=OI;const LI=function(e,t){return{empty:e,disabled:t}};function BI(e,t){if(1&e){const e=ks();Ts(0),Es(1,"button",3,4),Ds("click",function(){return Rt(e),Bs().toggle()}),Ps(3,"span",5),Ss(),vs(4,FI,1,1,"ng-template",6),Ds("backdropClick",function(){return Rt(e),Bs().backdropClick()}),Is()}if(2&e){const e=bs(2),t=Bs();Ui(1),Cs("ngClass",Fl(5,LI,t.selectedColor===t.emptyColor,t.disabled)),Ui(2),Ks("background-color",t.selectedColor),Ui(1),Cs("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayOpen",t.isOpen)}}function NI(e,t){}function jI(e,t){1&e&&vs(0,NI,0,0,"ng-template",7),2&e&&(Bs(),Cs("cdkPortalOutlet",bs(3)))}function HI(e,t){if(1&e){const e=ks();Es(0,"mcc-color-picker-selector",11),Ds("changeSelectedColor",function(t){return Rt(e),Bs(2).updateTmpSelectedColor(t)}),Hl(1,"async"),Ss()}if(2&e){const e=Bs(2);Cs("selectedColor",zl(1,3,e.tmpSelectedColor$))("hideHexForms",e.hideHexForms)("height",e.colorPickerSelectorHeight)}}function zI(e,t){if(1&e){const e=ks();Ts(0),Es(1,"mcc-color-picker-collection",12),Ds("changeColor",function(t){return Rt(e),Bs(2).updateTmpSelectedColor(t)}),Hl(2,"async"),Ss(),Is()}if(2&e){const e=Bs(2);Ui(1),Cs("label",e.usedColorLabel)("size",e.usedSizeColors)("transparent",!e.hideTransparent)("hideEmpty",e.hideEmpty)("colors",zl(2,5,e.usedColors$))}}function VI(e,t){if(1&e){const e=ks();Ts(0),Es(1,"mcc-color-picker-collection",12),Ds("changeColor",function(t){return Rt(e),Bs(2).updateTmpSelectedColor(t)}),Hl(2,"async"),Ss(),Is()}if(2&e){const e=Bs(2);Ui(1),Cs("label",e.usedColorLabel)("size",e.usedSizeColors)("transparent",!e.hideTransparent)("hideEmpty",e.hideEmpty)("colors",zl(2,5,e.usedColors$))}}function UI(e,t){if(1&e){const e=ks();Es(0,"div",13),Ps(1,"div",14),Es(2,"button",15),Ds("click",function(){return Rt(e),Bs(2).cancelSelection()}),la(3),Ss(),Es(4,"button",16),Ds("click",function(){return Rt(e),Bs(2).confirmSelectedColor()}),la(5),Ss(),Ss()}if(2&e){const e=Bs(2);Ui(3),ua(" ",e.btnCancelLabel," "),Ui(2),ua(" ",e.btnConfirmLabel," ")}}const WI=function(e){return{"alpha-enabled":e}};function XI(e,t){if(1&e&&(Es(0,"div",8),vs(1,HI,2,5,"mcc-color-picker-selector",9),vs(2,zI,3,7,"ng-container",0),Hs(3),vs(4,VI,3,7,"ng-container",0),vs(5,UI,6,2,"div",10),Ss()),2&e){const e=Bs();Cs("ngClass",Dl(5,WI,e.alpha)),Ui(1),Cs("ngIf",!e.hideColorPickerSelector),Ui(1),Cs("ngIf",!e.hideUsedColors&&"top"==e.usedColorsPosition),Ui(2),Cs("ngIf",!e.hideUsedColors&&"bottom"==e.usedColorsPosition),Ui(1),Cs("ngIf",!e.hideButtons)}}const GI=["*"],qI=["hueContainer"],$I=["block"],YI=["blockPointer"],KI=["blockCanvas"],QI=["hueSelector"],ZI=["alpha"],JI=["alphaContainer"];function eO(e,t){if(1&e&&(Es(0,"div",15,16),Ps(2,"canvas",17,18),Ss()),2&e){const e=Bs();Ks("height",e.height,"px"),Ui(2),Cs("height",e.stripHeight)("width",e.stripWidth)}}function tO(e,t){1&e&&(Es(0,"mat-form-field",22),Ps(1,"input",27),Ss()),2&e&&Cs("ngClass",Bs(2).textClass)}function nO(e,t){if(1&e&&(Ts(0),Es(1,"form",19),Es(2,"mat-form-field",20),Ps(3,"input",21),Ss(),Ss(),Es(4,"form",19),Es(5,"mat-form-field",22),Ps(6,"input",23),Ss(),Es(7,"mat-form-field",22),Ps(8,"input",24),Ss(),Es(9,"mat-form-field",22),Ps(10,"input",25),Ss(),vs(11,tO,2,1,"mat-form-field",26),Ss(),Is()),2&e){const e=Bs();Ui(1),Cs("formGroup",e.hexForm),Ui(1),Cs("ngClass",e.textClass),Ui(2),Cs("formGroup",e.rgbaForm),Ui(1),Cs("ngClass",e.textClass),Ui(1),Cs("placeholder",e.colorPickerCollectionService.alpha?"RGBA":"RGB"),Ui(1),Cs("ngClass",e.textClass),Ui(2),Cs("ngClass",e.textClass),Ui(2),Cs("ngIf",e.colorPickerCollectionService.alpha)}}const rO=function(e){return{"height.px":e}},iO=["button"];function oO(e,t){1&e&&Ps(0,"mat-icon")}function sO(e,t){if(1&e&&Ps(0,"mat-icon",8),2&e){const e=Bs(3);Cs("svgIcon",e.selectedColorSvgIcon)("ngClass",e.getIconColorClassForColor(e.color))}}function aO(e,t){if(1&e&&(Es(0,"mat-icon",10),la(1),Ss()),2&e){const e=Bs(4);Cs("ngClass",e.getIconColorClassForColor(e.color)),Ui(1),ca(e.selectedColorIcon)}}function lO(e,t){1&e&&vs(0,aO,2,2,"mat-icon",9),2&e&&Cs("ngIf",!Bs(3).selectedColorSvgIcon)}function cO(e,t){if(1&e&&(vs(0,sO,1,2,"mat-icon",6),vs(1,lO,1,1,"ng-template",null,7,uc)),2&e){const e=bs(2);Cs("ngIf",Bs(2).selectedColorSvgIcon)("ngIfElse",e)}}function uO(e,t){if(1&e&&(Ts(0),vs(1,oO,1,0,"mat-icon",4),vs(2,cO,3,2,"ng-template",null,5,uc),Is()),2&e){const e=bs(3),t=Bs();Ui(1),Cs("ngIf",!t.isColorSelected(t.color))("ngIfElse",e)}}const hO=new Xn("empty-color"),dO=new Xn("used-colors"),pO=new Xn("selected-color-icon"),fO=new Xn("selected-color-svg-icon"),mO=new Xn("disable-selected-color-icon"),gO=new Xn("enable-alpha-selector"),yO=new Xn("color-string-format");function _O(e){const t=new aI(e);return t.isValid()?t:null}function vO(e){return e?e.getAlpha()<1?e.toHex8String().toUpperCase():e.toHexString().toUpperCase():null}function bO(e){return e?e.toRgbString():null}function wO(e,t){switch(t){case"hex":return vO(e);case"rgb":return bO(e);case"hsl":return function(e){return e?e.toHslString():null}(e)}}let CO=(()=>{class e{constructor(e){this.emptyColor=e,this._selectedColor=new LC("")}changeSelectedColor(e){e===this.emptyColor&&this._selectedColor.next(e);const t=_O(e);if(!e||!t)return;const n=wO(t,this.format);this._selectedColor.next(n)}getSelectedColor(){return this._selectedColor.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(sr(hO))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),xO=(()=>{class e{constructor(e,t,n){this.changeDetectorRef=e,this.colorPickerCollectionService=t,this.emptyColor=n,this._hideEmpty=!1,this.size=30,this._transparent=!1,this.changeColor=new Xl}set hideEmpty(e){this._hideEmpty=Ad(e)}get label(){return this._label}set label(e){this._label=e}get colors(){return this._colors}set colors(e){const t=[];e.forEach(e=>{if("string"==typeof e){const n=_O(e);n&&t.push(wO(n,this.colorPickerCollectionService.format))}else{const n=e?_O(e.value):null;n&&t.push({value:wO(n,this.colorPickerCollectionService.format),text:e.text})}}),this._colors=t}set transparent(e){this._transparent=Ad(e)}get transparent(){return this._transparent}get selectedColor(){return this._selectedColor}ngOnInit(){this.colorPickerCollectionService.getSelectedColor().subscribe(e=>{this._selectedColor=e,this.changeDetectorRef.detectChanges()})}ngAfterContentChecked(){this._colors&&this._colors.length!==this.size&&(this._colors=this._colors.slice(0,this.size).concat(new Array(this._getCollectionDiffSize())),this.changeDetectorRef.markForCheck())}_getCollectionDiffSize(){return this._colors.length>this.size||this._hideEmpty?0:this.size-this._colors.length}setTransparent(){this.changeColor.emit(this.emptyColor)}setColor(e){const t="string"==typeof e?e:e.value;this.colorPickerCollectionService.changeSelectedColor(t),this.changeColor.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(ws(sl),ws(CO),ws(hO))},e.\u0275cmp=Ue({type:e,selectors:[["mcc-color-picker-collection"]],inputs:{size:"size",hideEmpty:"hideEmpty",label:"label",colors:"colors",transparent:"transparent"},outputs:{changeColor:"changeColor"},decls:5,vars:3,consts:[["role","listbox","aria-label","Select a color",1,"mcc-color-picker-collection"],["mat-mini-fab","","class","mcc-color-picker-remove-color mat-elevation-z0","role","option","aria-label","transparent",3,"click",4,"ngIf"],[3,"color","selectedColor","colorSelected",4,"ngFor","ngForOf"],["mat-mini-fab","","role","option","aria-label","transparent",1,"mcc-color-picker-remove-color","mat-elevation-z0",3,"click"],[1,"mcc-color-picker-transparent"],[3,"color","selectedColor","colorSelected"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"h3"),la(2),Ss(),vs(3,AI,2,0,"button",1),vs(4,MI,1,2,"mcc-color-picker-option",2),Ss()),2&e&&(Ui(2),ca(t.label),Ui(1),Cs("ngIf",t.transparent),Ui(1),Cs("ngForOf",t.colors))},directives:function(){return[uh,lh,yE,IO]},styles:["button[_ngcontent-%COMP%]{cursor:pointer;height:22px;margin:3px;width:22px}.mcc-color-picker-collection[_ngcontent-%COMP%]{min-height:50px;padding:10px 18px}.mcc-color-picker-collection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);font-size:12px;font-weight:700;margin:0 0 10px;text-transform:uppercase}.mcc-color-picker-remove-color[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e1e1e1}.mcc-color-picker-remove-color[_ngcontent-%COMP%]   .mcc-color-picker-transparent[_ngcontent-%COMP%]{-webkit-transform:translateY(-4px) translateX(0) rotate(45deg);border-bottom:1px solid red;display:block;height:1px;transform:translateY(-4px) translateX(0) rotate(45deg);width:20px}"],changeDetection:0}),e})(),EO=(()=>{class e{constructor(e,t){this.emptyColor=e,this.usedColors=t,this._usedColors=new LC([]);const n=[];t.forEach(e=>{_O(e)&&n.push(e)}),this._usedColors.next(n)}addColor(e){const t=_O(e);if(!e||!t)return;const n=this._usedColors.getValue();n.includes(e)||(n.push(e),this._usedColors.next(n))}getUsedColors(){return this._usedColors.asObservable()}resetUsedColors(){this._usedColors.next([])}}return e.\u0275fac=function(t){return new(t||e)(sr(hO),sr(dO))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),SO=(()=>{class e{constructor(e,t,n,r,i,o,s){this.elementRef=e,this.changeDetectorRef=t,this.colorPickerService=n,this.colorPickerCollectionService=r,this.emptyColor=i,this._disabled=!1,this._usedColorLabel="Used Colors",this._reverseUsedColor=!1,this._usedColorsPosition="top",this._hideHexForms=!1,this._hideEmpty=!1,this._hideTransparent=!1,this._hideUsedColors=!1,this._isOpen=!1,this._overlay=!0,this._hideButtons=!1,this._colorPickerSelectorHeight=170,this._hideColorPickerSelector=!1,this.usedSizeColors=30,this.btnCancelLabel="Cancel",this.btnConfirmLabel="Confirm",this._alpha=!1,this.change=new Xl,this.selected=new Xl,this.clickOut=new Xl,this.canceled=new Xl,this._collectionSubs=[],this._alpha=o,this.format=s}set disabled(e){this._disabled=Ad(e)}get disabled(){return this._disabled}get usedColorLabel(){return this._usedColorLabel}set usedColorLabel(e){this._usedColorLabel=e}set usedColorStart(e){if(e&&e.length>0)for(const t of e)this.colorPickerService.addColor(t)}set reverseUsedColors(e){this._reverseUsedColor=Ad(e)}get reverseUsedColors(){return this._reverseUsedColor}set usedColorsPosition(e){this._usedColorsPosition=e}get usedColorsPosition(){return this._usedColorsPosition}set hideHexForms(e){this._hideHexForms=Ad(e)}get hideHexForms(){return this._hideHexForms}set hideEmpty(e){this._hideEmpty=Ad(e)}get hideEmpty(){return this._hideEmpty}set hideTransparent(e){this._hideTransparent=Ad(e)}get hideTransparent(){return this._hideTransparent}set hideUsedColors(e){this._hideUsedColors=Ad(e)}get hideUsedColors(){return this._hideUsedColors}get selectedColor(){return this._selectedColor}set selectedColor(e){this._selectedColor!==e&&this.changeDetectorRef.markForCheck();const t=_O(e);this._selectedColor=t?wO(t,this.format):this.emptyColor}set isOpen(e){this._isOpen=Ad(e),this.changeDetectorRef.detectChanges()}get isOpen(){return this._isOpen}set overlay(e){this._overlay=Ad(e)}get overlay(){return this._overlay}set hideButtons(e){this._hideButtons=Ad(e)}get hideButtons(){return this._hideButtons}set colorPickerSelectorHeight(e){this._colorPickerSelectorHeight=e}get colorPickerSelectorHeight(){return this._colorPickerSelectorHeight}set hideColorPickerSelector(e){this._hideColorPickerSelector=Ad(e)}get hideColorPickerSelector(){return this._hideColorPickerSelector}set alpha(e){this._alpha=Ad(e)}get alpha(){return this._alpha}get tmpSelectedColor$(){return this._tmpSelectedColor.asObservable()}get usedColors$(){return this.colorPickerService.getUsedColors().pipe(P(e=>e.map(e=>{const t=_O(e);if(this._alpha||1===t.getAlpha())return wO(t,this.format)})),P(e=>this._reverseUsedColor?[...e].reverse():e))}ngOnInit(){this.colorPickerCollectionService.alpha=this._alpha,this.colorPickerCollectionService.format=this.format,this._selectedColor||(this._selectedColor=this.emptyColor),this._tmpSelectedColor=new LC(this._selectedColor)}ngAfterContentInit(){this._collections&&this._collections.forEach(e=>{const t=e.changeColor.subscribe(e=>{this.updateTmpSelectedColor(e)});this._collectionSubs.push(t)}),this.selected.subscribe(e=>this.colorPickerCollectionService.changeSelectedColor(e))}ngOnDestroy(){this._collectionSubs&&this._collectionSubs.forEach(e=>{e&&!e.closed&&e.unsubscribe()})}_updateSelectedColor(){if(this._isOpen||!this.overlay){const e=this._tmpSelectedColor.getValue();this._selectedColor!==e?(this._selectedColor=e,this.selected.emit(e)):this.selected.emit(e)}}toggle(){this._disabled||(this._isOpen=!this._isOpen,this._selectedColor!==this.emptyColor&&this.colorPickerService.addColor(this._selectedColor),this.colorPickerCollectionService.changeSelectedColor(this._selectedColor))}backdropClick(){this._hideButtons?this.confirmSelectedColor():this.cancelSelection(),this.clickOut.emit(),this.changeDetectorRef.detectChanges()}updateTmpSelectedColor(e){const t=_O(e),n=e===this.emptyColor?e:wO(t,this.format);this._tmpSelectedColor.next(n),this._selectedColor!==n&&(this.change.emit(n),this._hideButtons&&this._updateSelectedColor())}cancelSelection(){this._tmpSelectedColor.next(this._selectedColor),this.colorPickerCollectionService.changeSelectedColor(this.selectedColor),this.canceled.emit(),this.toggle()}confirmSelectedColor(){this._updateSelectedColor(),this.toggle()}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(EO),ws(CO),ws(hO),ws(gO),ws(yO))},e.\u0275cmp=Ue({type:e,selectors:[["mcc-color-picker"]],contentQueries:function(e,t,n){if(1&e&&oc(n,xO,0),2&e){let e;rc(e=sc())&&(t._collections=e)}},inputs:{usedSizeColors:"usedSizeColors",btnCancelLabel:"btnCancelLabel",btnConfirmLabel:"btnConfirmLabel",format:"format",disabled:"disabled",usedColorLabel:"usedColorLabel",usedColorStart:"usedColorStart",reverseUsedColors:"reverseUsedColors",usedColorsPosition:"usedColorsPosition",hideHexForms:"hideHexForms",hideEmpty:["hideEmptyUsedColors","hideEmpty"],hideTransparent:["hideTransparentUsedColors","hideTransparent"],hideUsedColors:"hideUsedColors",selectedColor:"selectedColor",isOpen:"isOpen",overlay:"overlay",hideButtons:"hideButtons",colorPickerSelectorHeight:"colorPickerSelectorHeight",hideColorPickerSelector:"hideColorPickerSelector",alpha:"alpha"},outputs:{change:"change",selected:"selected",clickOut:"clickOut",canceled:"canceled"},features:[Ta([CO])],ngContentSelectors:GI,decls:4,vars:2,consts:[[4,"ngIf"],["cdkPortal",""],["overlayPanel","cdkPortal"],["type","button","cdkOverlayOrigin","",1,"btn-picker",3,"ngClass","click"],["triggerButton","cdkOverlayOrigin"],[1,"btn-picker-background"],["cdkConnectedOverlay","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","mcc-color-picker-backdrop","cdkConnectedOverlayPush","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","backdropClick"],[3,"cdkPortalOutlet"],["role","dialog","aria-label","Color picker",1,"mcc-color-picker-overlay","mat-elevation-z4",3,"ngClass"],[3,"selectedColor","hideHexForms","height","changeSelectedColor",4,"ngIf"],["class","mcc-color-picker-actions",4,"ngIf"],[3,"selectedColor","hideHexForms","height","changeSelectedColor"],[3,"label","size","transparent","hideEmpty","colors","changeColor"],[1,"mcc-color-picker-actions"],[2,"flex","1 auto"],["mat-button","","role","button","aria-label","Cancel",3,"click"],["mat-button","","role","button","aria-label","Confirm",3,"click"]],template:function(e,t){1&e&&(js(),vs(0,BI,5,8,"ng-container",0),vs(1,jI,1,1,void 0,0),vs(2,XI,6,7,"ng-template",1,2,uc)),2&e&&(Cs("ngIf",t.overlay),Ui(1),Cs("ngIf",!t.overlay))},directives:function(){return[uh,gf,A_,sh,M_,yf,TO,xO,yE]},pipes:function(){return[Eh]},styles:['.btn-picker[_ngcontent-%COMP%]{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path d="M1 2V0h1v1H0v1z" fill-opacity="0.1"/></svg>\');background-repeat:repeat;background-size:14px;border:2px solid #ddd;border-radius:3px;cursor:pointer;height:25px;position:relative;width:25px}.btn-picker[_ngcontent-%COMP%]   .btn-picker-background[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0}.btn-picker.empty[_ngcontent-%COMP%]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfAQMAAAAlYIR6AAAABlBMVEX/////EBC8L+WmAAAAJ0lEQVR42mM4wAAED0DEBxBRASJsQIQciOAHEewNQIIZpJCRjgr5AP7LD2UBZrkqAAAAAElFTkSuQmCC")!important;background-repeat:no-repeat;background-size:auto}.btn-picker.disabled[_ngcontent-%COMP%]{opacity:.5}.mcc-color-picker-overlay[_ngcontent-%COMP%]{background:#fff;border-radius:4px;display:flex;flex-direction:column;font-family:Roboto,sans-serif;min-height:80px;padding:0;position:relative;width:270px}.mcc-color-picker-overlay.alpha-enabled[_ngcontent-%COMP%]{width:316px}.mcc-color-picker-overlay[_ngcontent-%COMP%]   .mcc-color-picker-preview[_ngcontent-%COMP%]{height:8px;width:100%}.transparent[_ngcontent-%COMP%]{-webkit-transform:translateY(-2px) translateX(-11px) rotate(45deg);border-bottom:2px solid red;display:block;height:2px;position:absolute;transform:translateY(-3px) translateX(-2px) rotate(45deg);width:32px}.mcc-color-picker-actions[_ngcontent-%COMP%]{border-top:1px solid #ddd;display:flex;padding:4px}.mcc-color-picker-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:uppercase}  mat-form-field mcc-color-picker .btn-picker{margin-left:4px;margin-right:4px}'],changeDetection:0}),e})();const PO=new aI("white");let TO=(()=>{class e{constructor(e,t,n,r){this.formBuilder=e,this.renderer=t,this.colorPickerCollectionService=n,this.emptyColor=r,this._height=170,this._selectedColor=PO,this._hideHexForms=!1,this.changeSelectedColor=new Xl,this._tmpSelectedColor=new LC(this._selectedColor),this.textClass="black",this._isPressed=!1,this._mouseDownListeners=[],this._temporaryMouseListeners=[],this._selectorWidth=240,this._stripWidth=20}set hueContainer(e){this._sc=e}set height(e){this._height=e}get height(){return this._height}get stripHeight(){return this._height-10}set selectedColor(e){if(e===this.emptyColor)this.noColor=!0,this._selectedColor=_O(this.emptyColor)||PO;else{const t=_O(e);t&&(this._selectedColor=t.setAlpha(t._roundA),this.noColor=!1)}}set hideHexForms(e){this._hideHexForms=e}get hideHexForms(){return this._hideHexForms}get selectorWidth(){return this._selectorWidth}get stripWidth(){return this._stripWidth}get tmpSelectedColorAsRgba$(){return this._tmpSelectedColor.asObservable().pipe(P(bO),Oy())}ngOnInit(){this._latestBlockCoordinates={x:this._selectorWidth-1,y:Math.floor(this._height/2)},this._tmpSelectedColor.next(this._selectedColor),this._tmpSelectedColorSub=this._tmpSelectedColor.subscribe(e=>{if(this.textClass=e.isDark()&&e.getAlpha()>.3?"white":"black",this.noColor)this.changeSelectedColor.emit(this.emptyColor),this.colorPickerCollectionService.changeSelectedColor(this.emptyColor);else{const t=wO(e,this.colorPickerCollectionService.format);this.changeSelectedColor.emit(t),this.colorPickerCollectionService.changeSelectedColor(t)}}),this.hexForm=this.formBuilder.group({hexCode:new lb(vO(this._selectedColor),{validators:[fv.pattern(/^#([0-9A-F]{8}|[0-9A-F]{6})$/gi)],updateOn:"change"})});const e={},t=this._selectedColor.toRgb(),n=[t.r,t.g,t.b,t.a];["R","G","B"].forEach((t,r)=>e[t]=new lb(n[r],{validators:[fv.min(0),fv.max(255),fv.required],updateOn:"change"})),e.A=new lb(this._selectedColor.getAlpha(),{validators:[fv.min(0),fv.max(1),fv.required]}),this.rgbaForm=this.formBuilder.group(e),this._watchFormChanges()}ngOnChanges(e){if("selectedColor"in e&&!this._isPressed){const e=this._selectedColor;this._updateHexForm(e),this._updateRGBAForm(e),this.setSelectorPositions(e),this._drawBlockSelector(e),this.colorPickerCollectionService.alpha&&this._drawAlphaSelector(e),this._tmpSelectedColor.next(e)}}ngOnDestroy(){this._mouseDownListeners.forEach(e=>e()),this._temporaryMouseListeners.forEach(e=>e()),this._tmpSelectedColorSub&&!this._tmpSelectedColorSub.closed&&this._tmpSelectedColorSub.unsubscribe(),this._hexValuesSub&&!this._hexValuesSub.closed&&this._hexValuesSub.unsubscribe(),this._rgbValuesSub&&!this._rgbValuesSub.closed&&this._rgbValuesSub.unsubscribe()}ngAfterViewInit(){this._mouseDownListeners.push(this.renderer.listen(this._block.nativeElement,"touchstart",e=>{e.cancelable&&(e.preventDefault(),this._isPressed=!0,this._selectionTargetPosition=this._block.nativeElement.getBoundingClientRect(),this._listenToMouseForBlock(),this.changeColor({x:e.targetTouches[0].clientX-this._selectionTargetPosition.x,y:e.targetTouches[0].clientY-this._selectionTargetPosition.y}))})),this._mouseDownListeners.push(this.renderer.listen(this._block.nativeElement,"mousedown",e=>{e.preventDefault(),this._isPressed=!0,this._selectionTargetPosition=this._block.nativeElement.getBoundingClientRect(),this._listenToMouseForBlock(),this.changeColor({x:e.offsetX,y:e.offsetY})})),this._blockContext=this._bc.nativeElement.getContext("2d"),this._blockContext.rect(0,0,this._bc.nativeElement.width,this._bc.nativeElement.height),this._mouseDownListeners.push(this.renderer.listen(this._hueSelector.nativeElement,"touchstart",e=>{e.cancelable&&(e.preventDefault(),this._isPressed=!0,this._selectionTargetPosition=this._hueSelector.nativeElement.getBoundingClientRect(),this._listenToMouseForHue(),this.changeHue(e.targetTouches[0].clientY-this._selectionTargetPosition.y))})),this._mouseDownListeners.push(this.renderer.listen(this._hueSelector.nativeElement,"mousedown",e=>{e.preventDefault(),this._isPressed=!0,this._selectionTargetPosition=this._hueSelector.nativeElement.getBoundingClientRect(),this._listenToMouseForHue(),this.changeHue(e.offsetY)})),this.colorPickerCollectionService.alpha&&(this._drawAlphaSelector(this._selectedColor),this._mouseDownListeners.push(this.renderer.listen(this._alpha.nativeElement,"touchstart",e=>{e.cancelable&&(e.preventDefault(),this._isPressed=!0,this._selectionTargetPosition=this._alpha.nativeElement.getBoundingClientRect(),this._listenToMouseForAlpha(),this.changeAlpha(e.targetTouches[0].clientY-this._selectionTargetPosition.y))})),this._mouseDownListeners.push(this.renderer.listen(this._alpha.nativeElement,"mousedown",e=>{e.preventDefault(),this._isPressed=!0,this._selectionTargetPosition=this._alpha.nativeElement.getBoundingClientRect(),this._listenToMouseForAlpha(),this.changeAlpha(e.offsetY)})),this._alphaContext=this._alpha.nativeElement.getContext("2d")),this._drawHueSelector(),this._drawBlockSelector(this._selectedColor),this.colorPickerCollectionService.alpha&&this._drawAlphaSelector(this._selectedColor),this.setSelectorPositions(this._selectedColor)}_listenToMouseForBlock(){this._preventTextSelection(),this._temporaryMouseListeners.push(this.renderer.listen(this._block.nativeElement,"touchmove",e=>{if(e.cancelable){e.preventDefault();const t=this._getCoordinatesForPosition(e.targetTouches[0].clientX,e.targetTouches[0].clientY);this.changeColor(t)}})),this._temporaryMouseListeners.push(this.renderer.listen(this._block.nativeElement,"mousemove",e=>{1===e.buttons&&this.changeColor({x:e.offsetX,y:e.offsetY})})),this._registerMouseUpListeners(),this._temporaryMouseListeners.push(this.renderer.listen(document,"mousemove",e=>{if(this._isPressed&&e.target!==this._block.nativeElement){const t=this._getCoordinatesForPosition(e.clientX,e.clientY);this.changeColor(t)}}))}_listenToMouseForHue(){this._preventTextSelection(),this._temporaryMouseListeners.push(this.renderer.listen(this._hueSelector.nativeElement,"touchmove",e=>{if(e.cancelable){e.preventDefault();const t=this._getYForPosition(e.targetTouches[0].clientY);this.changeHue(t)}})),this._temporaryMouseListeners.push(this.renderer.listen(this._hueSelector.nativeElement,"mousemove",e=>{1===e.buttons&&this.changeHue(e.offsetY)})),this._registerMouseUpListeners(),this._temporaryMouseListeners.push(this.renderer.listen(document,"mousemove",e=>{if(this._isPressed&&e.target!==this._hueSelector.nativeElement){const t=this._getYForPosition(e.clientY);this.changeHue(t)}}))}_listenToMouseForAlpha(){this._preventTextSelection(),this._temporaryMouseListeners.push(this.renderer.listen(this._alpha.nativeElement,"touchmove",e=>{if(e.cancelable){e.preventDefault();const t=this._getYForPosition(e.targetTouches[0].clientY);this.changeAlpha(t)}})),this._temporaryMouseListeners.push(this.renderer.listen(this._alpha.nativeElement,"mousemove",e=>{1===e.buttons&&this.changeAlpha(e.offsetY)})),this._registerMouseUpListeners(),this._temporaryMouseListeners.push(this.renderer.listen(document,"mousemove",e=>{if(this._isPressed&&e.target!==this._alpha.nativeElement){const t=this._getYForPosition(e.clientY);this.changeAlpha(t)}}))}_preventTextSelection(){this._temporaryMouseListeners.push(this.renderer.listen(document,"selectstart",e=>{e.preventDefault()}))}_registerMouseUpListeners(){this._temporaryMouseListeners.push(this.renderer.listen(document,"touchend",e=>{e.cancelable&&(e.preventDefault(),this._isPressed=!1,this._temporaryMouseListeners.forEach(e=>e()))})),this._temporaryMouseListeners.push(this.renderer.listen(document,"mouseup",e=>{e.preventDefault(),this._isPressed=!1,this._temporaryMouseListeners.forEach(e=>e())}))}_getCoordinatesForPosition(e,t){let n,r;return n=e<this._selectionTargetPosition.left?0:e>this._selectionTargetPosition.right?this._selectionTargetPosition.width:e-this._selectionTargetPosition.left,r=t<this._selectionTargetPosition.top?0:t>this._selectionTargetPosition.bottom?this._selectionTargetPosition.height:t-this._selectionTargetPosition.top,{x:n,y:r}}_getYForPosition(e){let t;return t=e<this._selectionTargetPosition.top?0:e>this._selectionTargetPosition.bottom?this._selectionTargetPosition.height:e-this._selectionTargetPosition.top,t}_drawHueSelector(){this._hueSelectorContext=this._hueSelector.nativeElement.getContext("2d"),this._hueSelectorContext.rect(0,0,this._hueSelector.nativeElement.width,this._hueSelector.nativeElement.height);const e=this._hueSelectorContext.createLinearGradient(0,0,0,this._bc.nativeElement.height);e.addColorStop(0,"hsl(0, 100%, 50%)"),e.addColorStop(.125,"hsl(45, 100%, 50%)"),e.addColorStop(.25,"hsl(90, 100%, 50%)"),e.addColorStop(.375,"hsl(135, 100%, 50%)"),e.addColorStop(.5,"hsl(180, 100%, 50%)"),e.addColorStop(.625,"hsl(225, 100%, 50%)"),e.addColorStop(.75,"hsl(270, 100%, 50%)"),e.addColorStop(.875,"hsl(315, 100%, 50%)"),e.addColorStop(1,"hsl(360, 100%, 50%)"),this._hueSelectorContext.fillStyle=e,this._hueSelectorContext.fill()}_drawAlphaSelector(e){if(this._alphaContext){this._alphaContext.clearRect(0,0,this._alpha.nativeElement.width,this._alpha.nativeElement.height);const t=this._alphaContext.createLinearGradient(0,0,0,this._bc.nativeElement.height);t.addColorStop(0,`rgba(${e.toRgb().r}, ${e.toRgb().g}, ${e.toRgb().b}, 1)`),t.addColorStop(1,`rgba(${e.toRgb().r}, ${e.toRgb().g}, ${e.toRgb().b}, 0)`),this._alphaContext.fillStyle=t,this._alphaContext.fillRect(0,0,this._alpha.nativeElement.width,this._alpha.nativeElement.height)}}_drawBlockSelector(e){if(this._blockContext){this._blockContext.fillStyle=`hsl(${e.toHsl().h}, 100%, 50%)`,this._blockContext.fillRect(0,0,this._bc.nativeElement.width,this._bc.nativeElement.height);const t=this._hueSelectorContext.createLinearGradient(1,0,this._bc.nativeElement.width-1,0);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),this._blockContext.fillStyle=t,this._blockContext.fillRect(0,0,this._bc.nativeElement.width,this._bc.nativeElement.height);const n=this._hueSelectorContext.createLinearGradient(0,1,0,this._bc.nativeElement.height-1);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),this._blockContext.fillStyle=n,this._blockContext.fillRect(0,0,this._bc.nativeElement.width,this._bc.nativeElement.height)}}_watchFormChanges(){this._hexValuesSub=this.hexForm.valueChanges.subscribe(e=>{if(this.hexForm.valid){const t=new aI(e.hexCode);this._updateRGBAForm(t),this._drawBlockSelector(t),this.colorPickerCollectionService.alpha&&this._drawAlphaSelector(t),this.setSelectorPositions(t),this._tmpSelectedColor.next(t)}}),this._rgbValuesSub=this.rgbaForm.valueChanges.subscribe(e=>{if(this.rgbaForm.valid){const t=new aI({r:e.R,g:e.G,b:e.B,a:e.A});this._updateHexForm(t),this._drawBlockSelector(t),this.colorPickerCollectionService.alpha&&this._drawAlphaSelector(t),this.setSelectorPositions(t),this._tmpSelectedColor.next(t)}})}_updateRGBAForm(e){if(!this.rgbaForm)return;const t={R:e.toRgb().r,G:e.toRgb().g,B:e.toRgb().b,A:e.toRgb().a};this.rgbaForm.setValue(t,{emitEvent:!1})}_updateHexForm(e){if(!this.hexForm)return;const t=vO(e),n=this.hexForm.get("hexCode");n.setValue(t,{emitEvent:!1,onlySelf:!0}),n.updateValueAndValidity({emitEvent:!1,onlySelf:!0})}changeHue(e){if(e<=this.stripHeight){this.setHueSelector(e);const t=this._hueSelectorContext.getImageData(this.stripWidth/2,e,1,1).data,n=new aI({r:t[0],g:t[1],b:t[2]});this._drawBlockSelector(n),this.changeColor()}}changeAlpha(e){if(e<=this.stripHeight){this.setAlphaSelector(e);const t=Number(((this.stripHeight-e)/this.stripHeight).toFixed(2)),n=this._selectedColor.clone().setAlpha(t);this._updateRGBAForm(n),this._updateHexForm(n),this._tmpSelectedColor.next(n),this.noColor=!1}}changeColor(e){const t=e||this._latestBlockCoordinates;if(t.x<=this._selectorWidth&&t.y<=this._height){this.setXYSelector(t);const e=this._blockContext.getImageData(t.x?t.x-1:t.x,t.y?t.y-1:t.y,1,1).data,n=new aI({r:e[0],g:e[1],b:e[2],a:this._selectedColor.getAlpha()});this._updateRGBAForm(n),this._updateHexForm(n),this.colorPickerCollectionService.alpha&&this._drawAlphaSelector(n),this._tmpSelectedColor.next(n),this.noColor=!1}}setSelectorPositions(e){const t=this.getHueOffsets(e);this.setHueSelector(t);const n=this.getXYOffsets(e);this.setXYSelector(n);const r=this.getAlphaOffset(e);this.setAlphaSelector(r)}setXYSelector(e){this._bp&&(this.renderer.setStyle(this._bp.nativeElement,"transform",`translate(${e.x-6}px, ${e.y-6}px)`),this._latestBlockCoordinates=e)}setHueSelector(e){this._sc&&this.renderer.setStyle(this._sc.nativeElement,"background-position-y",`${e}px`)}setAlphaSelector(e){this._ac&&this.renderer.setStyle(this._ac.nativeElement,"background-position-y",`${e}px`)}getXYOffsets(e){const t=e.toHsv();return{x:this._selectorWidth*t.s,y:this._height-this._height*t.v}}getHueOffsets(e){return this.stripHeight/360*e.toHsl().h}getAlphaOffset(e){return this.stripHeight-this.stripHeight*e.getAlpha()}}return e.\u0275fac=function(t){return new(t||e)(ws(Pb),ws(Ba),ws(CO),ws(hO))},e.\u0275cmp=Ue({type:e,selectors:[["mcc-color-picker-selector"]],viewQuery:function(e,t){if(1&e&&(ic(qI,1),ic($I,1),ic(YI,1),ic(KI,1),ic(QI,1),ic(ZI,1),ic(JI,1)),2&e){let e;rc(e=sc())&&(t.hueContainer=e.first),rc(e=sc())&&(t._block=e.first),rc(e=sc())&&(t._bp=e.first),rc(e=sc())&&(t._bc=e.first),rc(e=sc())&&(t._hueSelector=e.first),rc(e=sc())&&(t._alpha=e.first),rc(e=sc())&&(t._ac=e.first)}},inputs:{height:"height",selectedColor:"selectedColor",hideHexForms:"hideHexForms"},outputs:{changeSelectedColor:"changeSelectedColor"},features:[at],decls:16,vars:22,consts:[[1,"mcc-color-picker-selector",3,"ngStyle"],[1,"mcc-picker-selector"],["block",""],["id","picker",3,"height","width"],["blockCanvas",""],[1,"mcc-picker-position",2,"top","0","left","0"],["blockPointer",""],[1,"mcc-colors-position",2,"background-position-y","0",3,"ngClass"],["hueContainer",""],["id","colors",3,"height","width"],["hueSelector",""],["class","mcc-alpha-position","style","background-position-y: 0;",3,"height",4,"ngIf"],[1,"mcc-color-picker-selector-preview"],[1,"mcc-color-picker-selector-preview-background"],[4,"ngIf"],[1,"mcc-alpha-position",2,"background-position-y","0"],["alphaContainer",""],["id","alpha",1,"mcc-alpha-background",3,"height","width"],["alpha",""],[3,"formGroup"],["floatLabel","always","appearance","legacy",1,"hex-input",3,"ngClass"],["matInput","","placeholder","HEX","formControlName","hexCode"],["floatLabel","always","appearance","legacy",1,"rgb-input",3,"ngClass"],["matInput","","type","number","formControlName","R",3,"placeholder"],["matInput","","type","number","formControlName","G"],["matInput","","type","number","formControlName","B"],["class","rgb-input","floatLabel","always","appearance","legacy",3,"ngClass",4,"ngIf"],["matInput","","type","number","formControlName","A"]],template:function(e,t){1&e&&(Es(0,"div",0),Ps(1,"div",1,2),Ps(3,"canvas",3,4),Ps(5,"div",5,6),Es(7,"div",7,8),Ps(9,"canvas",9,10),Ss(),vs(11,eO,4,4,"div",11),Ss(),Es(12,"div",12),Es(13,"div",13),Hl(14,"async"),Ss(),vs(15,nO,12,8,"ng-container",14),Ss()),2&e&&(Cs("ngStyle",Dl(18,rO,t.height)),Ui(1),Ks("height",t.height,"px")("width",t.selectorWidth,"px"),Ui(2),Cs("height",t.height)("width",t.selectorWidth),Ui(4),Ks("height",t.height,"px"),Cs("ngClass",Dl(20,WI,t.colorPickerCollectionService.alpha)),Ui(2),Cs("height",t.stripHeight)("width",t.stripWidth),Ui(2),Cs("ngIf",t.colorPickerCollectionService.alpha),Ui(2),Ks("background-color",zl(14,16,t.tmpSelectedColorAsRgba$)),Ui(2),Cs("ngIf",!t.hideHexForms&&!t.noColor))},directives:[yh,sh,uh,yb,Rv,Cb,eS,uS,lv,kv,Eb,Mv],pipes:[Eh],styles:['canvas#alpha[_ngcontent-%COMP%], canvas#colors[_ngcontent-%COMP%]{margin:5px}canvas[_ngcontent-%COMP%]:hover{cursor:crosshair}.mcc-picker-selector[_ngcontent-%COMP%]{cursor:crosshair;left:0;position:absolute;top:0;z-index:10}.mcc-picker-position[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);border:1px solid #ddd;border-radius:50%;height:10px;position:absolute;width:10px;z-index:1}.mcc-colors-position[_ngcontent-%COMP%]{background-image:url("data:image/gif;base64,R0lGODdhHgAIALMAAAAAADU1NTk5OUJCQkpKSlZWVltbW2pqaoCAgP///wAAAAAAAAAAAAAAAAAAAAAAACH5BAkAAAoALAAAAAAeAAgAAAQw0BhFq734yjJm/p8xFEVAeGCqGERACmahgkUrvPH81cFdnjoQy8VBBTOiguSokkQAADs=");background-repeat:no-repeat;position:absolute;right:0;top:0;width:30px;z-index:1}.mcc-colors-position.alpha-enabled[_ngcontent-%COMP%]{right:40px}.mcc-alpha-position[_ngcontent-%COMP%]{background-image:url("data:image/gif;base64,R0lGODdhHgAIALMAAAAAADU1NTk5OUJCQkpKSlZWVltbW2pqaoCAgP///wAAAAAAAAAAAAAAAAAAAAAAACH5BAkAAAoALAAAAAAeAAgAAAQw0BhFq734yjJm/p8xFEVAeGCqGERACmahgkUrvPH81cFdnjoQy8VBBTOiguSokkQAADs=");background-repeat:no-repeat;position:absolute;right:5px;top:0;width:30px;z-index:1}.mcc-alpha-background[_ngcontent-%COMP%]{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path d="M1 2V0h1v1H0v1z" fill-opacity="0.1"/></svg>\');background-repeat:repeat;background-size:14px;bottom:0;left:0;position:absolute;right:0;top:0}.mcc-color-picker-selector[_ngcontent-%COMP%]{height:170px}  mat-form-field{font-size:11px;font-weight:700}  mat-form-field.black,   mat-form-field.black label.mat-form-field-label{color:rgba(0,0,0,.87)!important}  mat-form-field.black .mat-form-field-underline{background-color:rgba(0,0,0,.87)!important}  mat-form-field.white,   mat-form-field.white label.mat-form-field-label{color:#fff!important}  mat-form-field.white .mat-form-field-underline{background-color:#fff!important}.mcc-color-picker-selector-preview[_ngcontent-%COMP%]{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path d="M1 2V0h1v1H0v1z" fill-opacity="0.1"/></svg>\');background-repeat:repeat;background-size:14px;border-bottom:1px solid #e1e1e1;box-sizing:content-box;height:40px;padding:15px;position:relative}.mcc-color-picker-selector-preview[_ngcontent-%COMP%]   .mcc-color-picker-selector-preview-background[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0}.mcc-color-picker-selector-preview[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:inline-block;position:relative}.mcc-color-picker-selector-preview[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .mcc-color-picker-selector-preview[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.mcc-color-picker-selector-preview[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.mcc-color-picker-selector-preview[_ngcontent-%COMP%]   .hex-input[_ngcontent-%COMP%]{margin-right:20px;width:86px}.mcc-color-picker-selector-preview[_ngcontent-%COMP%]   .hex-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.mcc-color-picker-selector-preview[_ngcontent-%COMP%]   .rgb-input[_ngcontent-%COMP%]{margin-right:4px;width:32px}.mcc-color-picker-selector-preview[_ngcontent-%COMP%]   .rgb-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;font-weight:400}'],changeDetection:0}),e})(),IO=(()=>{class e{constructor(e,t,n,r,i){this.render=e,this.emptyColor=t,this.selectedColorIcon=n,this.selectedColorSvgIcon=r,this.disableSelectedIcon=i,this.colorSelected=new Xl,this._color=t}get color(){return this._color}set color(e){this._color=e}get ariaLabel(){if(!this.color)return null;let e;return e="string"==typeof this.color?this.color:this.color.text,e}get backgroundColor(){if(!this.color)return null;let e;return e="string"==typeof this.color?this.color:this.color.text,_O(e)?e:void 0}getIconColorClassForColor(e){const t=_O("string"==typeof e?e:e.value);if(t)return t.isDark()&&t.getAlpha()>.3?"white":"black"}isColorSelected(e){return!!e&&("string"==typeof e?this.selectedColor===e:this.selectedColor===e.value)}}return e.\u0275fac=function(t){return new(t||e)(ws(Ba),ws(hO),ws(pO),ws(fO),ws(mO))},e.\u0275cmp=Ue({type:e,selectors:[["mcc-color-picker-option"]],viewQuery:function(e,t){if(1&e&&ic(iO,1),2&e){let e;rc(e=sc())&&(t.button=e.first)}},inputs:{color:"color",selectedColor:"selectedColor"},outputs:{colorSelected:"colorSelected"},decls:4,vars:5,consts:[["mat-mini-fab","","role","option",1,"mat-elevation-z0","option-background",3,"disabled","click"],["button",""],[1,"option-color"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["selectionIcon",""],["class","mat-svg-icon",3,"svgIcon","ngClass",4,"ngIf","ngIfElse"],["selectionFontIcon",""],[1,"mat-svg-icon",3,"svgIcon","ngClass"],["class","mat-font-icon",3,"ngClass",4,"ngIf"],[1,"mat-font-icon",3,"ngClass"]],template:function(e,t){1&e&&(Es(0,"button",0,1),Ds("click",function(){return t.colorSelected.emit(t.color)}),Ps(2,"span",2),vs(3,uO,4,2,"ng-container",3),Ss()),2&e&&(Cs("disabled",!t.color||t.color===t.emptyColor),ys("aria-label",t.ariaLabel),Ui(2),Ks("background-color",t.backgroundColor),Ui(1),Cs("ngIf",!t.disableSelectedIcon))},directives:[yE,uh,Iw,sh],styles:['button[_ngcontent-%COMP%]{cursor:pointer;height:22px;margin:3px;width:22px}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative}button[_ngcontent-%COMP%]   mat-icon.black[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)!important;fill:rgba(0,0,0,.87)!important}button[_ngcontent-%COMP%]   mat-icon.white[_ngcontent-%COMP%]{color:#fff!important;fill:#fff!important}button.black[_ngcontent-%COMP%], button.black[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)!important}button.white[_ngcontent-%COMP%], button.white[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff!important}button[_ngcontent-%COMP%]   .mat-font-icon[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;height:10px;margin:-1.3rem 0 0 -.15rem;width:10px}button[_ngcontent-%COMP%]   .mat-svg-icon[_ngcontent-%COMP%]{margin:-1.3rem 0 0;width:14px}.option-background[_ngcontent-%COMP%]{background-color:transparent!important;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path d="M1 2V0h1v1H0v1z" fill-opacity="0.1"/></svg>\');background-repeat:repeat;background-size:14px;position:relative}.option-color[_ngcontent-%COMP%]{background-color:#d3d3d3;border-radius:12px;bottom:0;left:0;position:absolute;right:0;top:0}'],changeDetection:0}),e})();const OO=[];let kO=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:mO,useValue:t.disable_selected_icon||!1},{provide:gO,useValue:t.enable_alpha_selector||!1},{provide:pO,useValue:t.selected_icon||"done"},{provide:fO,useValue:t.selected_svg_icon||null},{provide:hO,useValue:"empty_color"in t?t.empty_color:"none"},{provide:dO,useValue:t.used_colors||[]},{provide:yO,useValue:t.color_string_format||"hex"}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[EO,{provide:mO,useValue:!1},{provide:gO,useValue:!1},{provide:pO,useValue:"done"},{provide:fO,useValue:null},{provide:hO,useValue:"none"},{provide:dO,useValue:OO},{provide:yO,useValue:"hex"}],imports:[[Oh,_f,F_,Ib,_E,tS,hS,Ow]]}),e})();const RO=new Xn("WindowToken","undefined"!=typeof window&&window.document?{providedIn:"root",factory:()=>window}:void 0);let AO=(()=>{class e{constructor(e,t){this.document=e,this.window=t,this.copySubject=new x,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(e){this.config=e}copy(e){if(!this.isSupported||!e)return this.pushCopyResponse({isSuccess:!1,content:e});const t=this.copyFromContent(e);return this.pushCopyResponse(t?{content:e,isSuccess:t}:{isSuccess:!1,content:e})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(e){if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){if(e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(e,t=!0){try{this.selectTarget(e);const n=this.copyText();return this.clearSelection(t?e:void 0,this.window),n&&this.isCopySuccessInIE11()}catch(n){return!1}}isCopySuccessInIE11(){const e=this.window.clipboardData;return!(e&&e.getData&&!e.getData("Text"))}copyFromContent(e,t=this.document.body){if(this.tempTextArea&&!t.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{t.appendChild(this.tempTextArea)}catch(r){throw new Error("Container should be a Dom element")}}this.tempTextArea.value=e;const n=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),n}destroy(e=this.document.body){this.tempTextArea&&(e.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(e){return e.select(),e.setSelectionRange(0,e.value.length),e.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(e,t){var n;e&&e.focus(),null===(n=t.getSelection())||void 0===n||n.removeAllRanges()}createTempTextArea(e,t){const n="rtl"===e.documentElement.getAttribute("dir");let r;return r=e.createElement("textarea"),r.style.fontSize="12pt",r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style[n?"right":"left"]="-9999px",r.style.top=(t.pageYOffset||e.documentElement.scrollTop)+"px",r.setAttribute("readonly",""),r}pushCopyResponse(e){this.copySubject.next(e)}pushCopyReponse(e){this.pushCopyResponse(e)}}return e.\u0275fac=function(t){return new(t||e)(sr(su),sr(RO,8))},e.\u0275prov=de({factory:function(){return new e(sr(su),sr(RO,8))},token:e,providedIn:"root"}),e})();const MO=["primaryValueBar"];class DO{constructor(e){this._elementRef=e}}const FO=Gg(DO,"primary"),LO=new Xn("mat-progress-bar-location",{providedIn:"root",factory:function(){const e=ar(su),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}});let BO=0,NO=(()=>{class e extends FO{constructor(e,t,n,r){super(e),this._elementRef=e,this._ngZone=t,this._animationMode=n,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new Xl,this._animationEndSubscription=h.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+BO++;const i=r?r.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${i}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===n}get value(){return this._value}set value(e){this._value=jO(Md(e)||0)}get bufferValue(){return this._bufferValue}set bufferValue(e){this._bufferValue=jO(e||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=this._primaryValueBar.nativeElement;this._animationEndSubscription=Py(e,"transitionend").pipe(xd(t=>t.target===e)).subscribe(()=>{"determinate"!==this.mode&&"buffer"!==this.mode||this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(Mc),ws(Mg,8),ws(LO,8))},e.\u0275cmp=Ue({type:e,selectors:[["mat-progress-bar"]],viewQuery:function(e,t){if(1&e&&ic(MO,1),2&e){let e;rc(e=sc())&&(t._primaryValueBar=e.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"mat-progress-bar"],hostVars:4,hostBindings:function(e,t){2&e&&(ys("aria-valuenow","indeterminate"===t.mode||"query"===t.mode?null:t.value)("mode",t.mode),Qs("_mat-animation-noopable",t._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[is],decls:9,vars:4,consts:[["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(e,t){1&e&&(on(),Es(0,"svg",0),Es(1,"defs"),Es(2,"pattern",1),Ps(3,"circle",2),Ss(),Ss(),Ps(4,"rect",3),Ss(),sn(),Ps(5,"div",4),Ps(6,"div",5,6),Ps(8,"div",7)),2&e&&(Ui(2),Cs("id",t.progressbarId),Ui(2),ys("fill",t._rectangleFillValue),Ui(1),Cs("ngStyle",t._bufferTransform()),Ui(1),Cs("ngStyle",t._primaryTransform()))},directives:[yh],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),e})();function jO(e,t=0,n=100){return Math.max(t,Math.min(n,e))}let HO=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Oh,Wg],Wg]}),e})();function zO(e,t){1&e&&Hs(0)}const VO=["*"];function UO(e,t){}const WO=function(e){return{animationDuration:e}},XO=function(e,t){return{value:e,params:t}},GO=["tabBodyWrapper"],qO=["tabHeader"];function $O(e,t){}function YO(e,t){1&e&&vs(0,$O,0,0,"ng-template",9),2&e&&Cs("cdkPortalOutlet",Bs().$implicit.templateLabel)}function KO(e,t){1&e&&la(0),2&e&&ca(Bs().$implicit.textLabel)}function QO(e,t){if(1&e){const e=ks();Es(0,"div",6),Ds("click",function(){Rt(e);const n=t.$implicit,r=t.index,i=Bs(),o=bs(1);return i._handleClick(n,o,r)})("cdkFocusChange",function(n){Rt(e);const r=t.index;return Bs()._tabFocusChanged(n,r)}),Es(1,"div",7),vs(2,YO,1,1,"ng-template",8),vs(3,KO,1,1,"ng-template",8),Ss(),Ss()}if(2&e){const e=t.$implicit,n=t.index,r=Bs();Qs("mat-tab-label-active",r.selectedIndex==n),Cs("id",r._getTabLabelId(n))("disabled",e.disabled)("matRippleDisabled",e.disabled||r.disableRipple),ys("tabIndex",r._getTabIndex(e,n))("aria-posinset",n+1)("aria-setsize",r._tabs.length)("aria-controls",r._getTabContentId(n))("aria-selected",r.selectedIndex==n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),Ui(2),Cs("ngIf",e.templateLabel),Ui(1),Cs("ngIf",!e.templateLabel)}}function ZO(e,t){if(1&e){const e=ks();Es(0,"mat-tab-body",10),Ds("_onCentered",function(){return Rt(e),Bs()._removeTabBodyWrapperHeight()})("_onCentering",function(t){return Rt(e),Bs()._setTabBodyWrapperHeight(t)}),Ss()}if(2&e){const e=t.$implicit,n=t.index,r=Bs();Qs("mat-tab-body-active",r.selectedIndex==n),Cs("id",r._getTabContentId(n))("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",r.animationDuration),ys("aria-labelledby",r._getTabLabelId(n))}}const JO=["tabListContainer"],ek=["tabList"],tk=["nextPaginator"],nk=["previousPaginator"],rk=new Xn("MatInkBarPositioner",{providedIn:"root",factory:function(){return e=>({left:e?(e.offsetLeft||0)+"px":"0",width:e?(e.offsetWidth||0)+"px":"0"})}});let ik=(()=>{class e{constructor(e,t,n,r){this._elementRef=e,this._ngZone=t,this._inkBarPositioner=n,this._animationMode=r}alignToElement(e){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(e))}):this._setStyles(e)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(e){const t=this._inkBarPositioner(e),n=this._elementRef.nativeElement;n.style.left=t.left,n.style.width=t.width}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(Mc),ws(rk),ws(Mg,8))},e.\u0275dir=Ye({type:e,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(e,t){2&e&&Qs("_mat-animation-noopable","NoopAnimations"===t._animationMode)}}),e})();const ok=new Xn("MatTabContent"),sk=new Xn("MatTabLabel");class ak{}const lk=Xg(ak),ck=new Xn("MAT_TAB_GROUP");let uk=(()=>{class e extends lk{constructor(e,t){super(),this._viewContainerRef=e,this._closestTabGroup=t,this.textLabel="",this._contentPortal=null,this._stateChanges=new x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new df(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&(this._templateLabel=e)}}return e.\u0275fac=function(t){return new(t||e)(ws(_l),ws(ck))},e.\u0275cmp=Ue({type:e,selectors:[["mat-tab"]],contentQueries:function(e,t,n){if(1&e&&(oc(n,sk,1),oc(n,ok,3,dl)),2&e){let e;rc(e=sc())&&(t.templateLabel=e.first),rc(e=sc())&&(t._explicitContent=e.first)}},viewQuery:function(e,t){if(1&e&&ic(dl,3),2&e){let e;rc(e=sc())&&(t._implicitContent=e.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[is,at],ngContentSelectors:VO,decls:1,vars:0,template:function(e,t){1&e&&(js(),vs(0,zO,1,0,"ng-template"))},encapsulation:2}),e})();const hk={translateTab:Qp("translateTab",[tf("center, void, left-origin-center, right-origin-center",ef({transform:"none"})),tf("left",ef({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),tf("right",ef({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),rf("* => left, * => right, left => center, right => center",Zp("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),rf("void => left-origin-center",[ef({transform:"translate3d(-100%, 0, 0)"}),Zp("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),rf("void => right-origin-center",[ef({transform:"translate3d(100%, 0, 0)"}),Zp("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let dk=(()=>{class e extends yf{constructor(e,t,n,r){super(e,t,r),this._host=n,this._centeringSub=h.EMPTY,this._leavingSub=h.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Lp(this._host._isCenterPosition(this._host._position))).subscribe(e=>{e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(ws(ka),ws(_l),ws(oe(()=>fk)),ws(su))},e.\u0275dir=Ye({type:e,selectors:[["","matTabBodyHost",""]],features:[is]}),e})(),pk=(()=>{class e{constructor(e,t,n){this._elementRef=e,this._dir=t,this._dirChangeSubscription=h.EMPTY,this._translateTabComplete=new x,this._onCentering=new Xl,this._beforeCentering=new Xl,this._afterLeavingCenter=new Xl,this._onCentered=new Xl(!0),this.animationDuration="500ms",t&&(this._dirChangeSubscription=t.change.subscribe(e=>{this._computePositionAnimationState(e),n.markForCheck()})),this._translateTabComplete.pipe(Oy((e,t)=>e.fromState===t.fromState&&e.toState===t.toState)).subscribe(e=>{this._isCenterPosition(e.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(e.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(e){this._positionIndex=e,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){const t=this._isCenterPosition(e.toState);this._beforeCentering.emit(t),t&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(e){return"center"==e||"left-origin-center"==e||"right-origin-center"==e}_computePositionAnimationState(e=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==e?"left":"right":this._positionIndex>0?"ltr"==e?"right":"left":"center"}_computePositionFromOrigin(e){const t=this._getLayoutDirection();return"ltr"==t&&e<=0||"rtl"==t&&e>0?"left-origin-center":"right-origin-center"}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(wf,8),ws(sl))},e.\u0275dir=Ye({type:e,inputs:{animationDuration:"animationDuration",position:"position",_content:["content","_content"],origin:"origin"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),e})(),fk=(()=>{class e extends pk{constructor(e,t,n){super(e,t,n)}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(wf,8),ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["mat-tab-body"]],viewQuery:function(e,t){if(1&e&&ic(yf,1),2&e){let e;rc(e=sc())&&(t._portalHost=e.first)}},hostAttrs:[1,"mat-tab-body"],features:[is],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(e,t){1&e&&(Es(0,"div",0,1),Ds("@translateTab.start",function(e){return t._onTranslateTabStarted(e)})("@translateTab.done",function(e){return t._translateTabComplete.next(e)}),vs(2,UO,0,0,"ng-template",2),Ss()),2&e&&Cs("@translateTab",Fl(3,XO,t._position,Dl(1,WO,t.animationDuration)))},directives:[dk],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[hk.translateTab]}}),e})();const mk=new Xn("MAT_TABS_CONFIG");let gk=0;class yk{}class _k{constructor(e){this._elementRef=e}}const vk=Gg(qg(_k),"primary");let bk=(()=>{class e extends vk{constructor(e,t,n,r){super(e),this._changeDetectorRef=t,this._animationMode=r,this._tabs=new ql,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=h.EMPTY,this._tabLabelSubscription=h.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new Xl,this.focusChange=new Xl,this.animationDone=new Xl,this.selectedTabChange=new Xl(!0),this._groupId=gk++,this.animationDuration=n&&n.animationDuration?n.animationDuration:"500ms",this.disablePagination=!(!n||null==n.disablePagination)&&n.disablePagination,this.dynamicHeight=!(!n||null==n.dynamicHeight)&&n.dynamicHeight}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(e){this._dynamicHeight=Ad(e)}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=Md(e,null)}get animationDuration(){return this._animationDuration}set animationDuration(e){this._animationDuration=/^\d+$/.test(e)?e+"ms":e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){const t=this._elementRef.nativeElement;t.classList.remove(`mat-background-${this.backgroundColor}`),e&&t.classList.add(`mat-background-${e}`),this._backgroundColor=e}ngAfterContentChecked(){const e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){const t=null==this._selectedIndex;t||this.selectedTabChange.emit(this._createChangeEvent(e)),Promise.resolve().then(()=>{this._tabs.forEach((t,n)=>t.isActive=n===e),t||this.selectedIndexChange.emit(e)})}this._tabs.forEach((t,n)=>{t.position=n-e,null==this._selectedIndex||0!=t.position||t.origin||(t.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const e=this._tabs.toArray();for(let t=0;t<e.length;t++)if(e[t].isActive){this._indexToSelect=this._selectedIndex=t;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Lp(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(e=>e._closestTabGroup===this)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}_focusChanged(e){this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){const t=new yk;return t.index=e,this._tabs&&this._tabs.length&&(t.tab=this._tabs.toArray()[e]),t}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=X(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const t=this._tabBodyWrapper.nativeElement;t.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(t.style.height=e+"px")}_removeTabBodyWrapperHeight(){const e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,t,n){e.disabled||(this.selectedIndex=t.focusIndex=n)}_getTabIndex(e,t){return e.disabled?null:this.selectedIndex===t?0:-1}_tabFocusChanged(e,t){e&&(this._tabHeader.focusIndex=t)}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(mk,8),ws(Mg,8))},e.\u0275dir=Ye({type:e,inputs:{headerPosition:"headerPosition",animationDuration:"animationDuration",disablePagination:"disablePagination",dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[is]}),e})(),wk=(()=>{class e extends bk{constructor(e,t,n,r){super(e,t,n,r)}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(mk,8),ws(Mg,8))},e.\u0275cmp=Ue({type:e,selectors:[["mat-tab-group"]],contentQueries:function(e,t,n){if(1&e&&oc(n,uk,1),2&e){let e;rc(e=sc())&&(t._allTabs=e)}},viewQuery:function(e,t){if(1&e&&(ic(GO,1),ic(qO,1)),2&e){let e;rc(e=sc())&&(t._tabBodyWrapper=e.first),rc(e=sc())&&(t._tabHeader=e.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(e,t){2&e&&Qs("mat-tab-group-dynamic-height",t.dynamicHeight)("mat-tab-group-inverted-header","below"===t.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[Ta([{provide:ck,useExisting:e}]),is],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(e,t){1&e&&(Es(0,"mat-tab-header",0,1),Ds("indexFocused",function(e){return t._focusChanged(e)})("selectFocusedIndex",function(e){return t.selectedIndex=e}),vs(2,QO,4,14,"div",2),Ss(),Es(3,"div",3,4),vs(5,ZO,1,8,"mat-tab-body",5),Ss()),2&e&&(Cs("selectedIndex",t.selectedIndex||0)("disableRipple",t.disableRipple)("disablePagination",t.disablePagination),Ui(2),Cs("ngForOf",t._tabs),Ui(1),Qs("_mat-animation-noopable","NoopAnimations"===t._animationMode),Ui(2),Cs("ngForOf",t._tabs))},directives:function(){return[Ik,lh,Ek,ly,Ep,uh,yf,fk]},styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),e})();class Ck{}const xk=Xg(Ck);let Ek=(()=>{class e extends xk{constructor(e){super(),this.elementRef=e}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return e.\u0275fac=function(t){return new(t||e)(ws(Da))},e.\u0275dir=Ye({type:e,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(e,t){2&e&&(ys("aria-disabled",!!t.disabled),Qs("mat-tab-disabled",t.disabled))},inputs:{disabled:"disabled"},features:[is]}),e})();const Sk=Gd({passive:!0});let Pk=(()=>{class e{constructor(e,t,n,r,i,o,s){this._elementRef=e,this._changeDetectorRef=t,this._viewportRuler=n,this._dir=r,this._ngZone=i,this._platform=o,this._animationMode=s,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new Xl,this.indexFocused=new Xl,i.runOutsideAngular(()=>{Py(e.nativeElement,"mouseleave").pipe(Hp(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){e=Md(e),this._selectedIndex!=e&&(this._selectedIndexChanged=!0,this._selectedIndex=e,this._keyManager&&this._keyManager.updateActiveItem(e))}ngAfterViewInit(){Py(this._previousPaginator.nativeElement,"touchstart",Sk).pipe(Hp(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Py(this._nextPaginator.nativeElement,"touchstart",Sk).pipe(Hp(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const e=this._dir?this._dir.change:ld(null),t=this._viewportRuler.change(150),n=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new lp(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(n):n(),X(e,t,this._items.changes).pipe(Hp(this._destroyed)).subscribe(()=>{Promise.resolve().then(n),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Hp(this._destroyed)).subscribe(e=>{this.indexFocused.emit(e),this._setTabFocus(e)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!cd(e))switch(e.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e));break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){const e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){this._isValidIndex(e)&&this.focusIndex!==e&&this._keyManager&&this._keyManager.setActiveItem(e)}_isValidIndex(e){if(!this._items)return!0;const t=this._items?this._items.toArray()[e]:null;return!!t&&!t.disabled}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();const t=this._tabListContainer.nativeElement,n=this._getLayoutDirection();t.scrollLeft="ltr"==n?0:t.scrollWidth-t.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const e=this.scrollDistance,t="ltr"===this._getLayoutDirection()?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(t)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){return this._scrollTo(this._scrollDistance+("before"==e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;const t=this._items?this._items.toArray()[e]:null;if(!t)return;const n=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:r,offsetWidth:i}=t.elementRef.nativeElement;let o,s;"ltr"==this._getLayoutDirection()?(o=r,s=o+i):(s=this._tabList.nativeElement.offsetWidth-r,o=s-i);const a=this.scrollDistance,l=this.scrollDistance+n;o<a?this.scrollDistance-=a-o+60:s>l&&(this.scrollDistance+=s-l+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const e=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=e}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,t=e?e.elementRef.nativeElement:null;t?this._inkBar.alignToElement(t):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,t){t&&null!=t.button&&0!==t.button||(this._stopInterval(),Fy(650,100).pipe(Hp(X(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:t,distance:n}=this._scrollHeader(e);(0===n||n>=t)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const t=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(t,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:t,distance:this._scrollDistance}}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(Qy),ws(wf,8),ws(Mc),ws(jd),ws(Mg,8))},e.\u0275dir=Ye({type:e,inputs:{disablePagination:"disablePagination"}}),e})(),Tk=(()=>{class e extends Pk{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,o,s),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Ad(e)}_itemSelected(e){e.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(Qy),ws(wf,8),ws(Mc),ws(jd),ws(Mg,8))},e.\u0275dir=Ye({type:e,inputs:{disableRipple:"disableRipple"},features:[is]}),e})(),Ik=(()=>{class e extends Tk{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,o,s)}}return e.\u0275fac=function(t){return new(t||e)(ws(Da),ws(sl),ws(Qy),ws(wf,8),ws(Mc),ws(jd),ws(Mg,8))},e.\u0275cmp=Ue({type:e,selectors:[["mat-tab-header"]],contentQueries:function(e,t,n){if(1&e&&oc(n,Ek,0),2&e){let e;rc(e=sc())&&(t._items=e)}},viewQuery:function(e,t){if(1&e&&(ic(ik,3),ic(JO,3),ic(ek,3),ic(tk,1),ic(nk,1)),2&e){let e;rc(e=sc())&&(t._inkBar=e.first),rc(e=sc())&&(t._tabListContainer=e.first),rc(e=sc())&&(t._tabList=e.first),rc(e=sc())&&(t._nextPaginator=e.first),rc(e=sc())&&(t._previousPaginator=e.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(e,t){2&e&&Qs("mat-tab-header-pagination-controls-enabled",t._showPaginationControls)("mat-tab-header-rtl","rtl"==t._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[is],ngContentSelectors:VO,decls:13,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(e,t){1&e&&(js(),Es(0,"div",0,1),Ds("click",function(){return t._handlePaginatorClick("before")})("mousedown",function(e){return t._handlePaginatorPress("before",e)})("touchend",function(){return t._stopInterval()}),Ps(2,"div",2),Ss(),Es(3,"div",3,4),Ds("keydown",function(e){return t._handleKeydown(e)}),Es(5,"div",5,6),Ds("cdkObserveContent",function(){return t._onContentChanges()}),Es(7,"div",7),Hs(8),Ss(),Ps(9,"mat-ink-bar"),Ss(),Ss(),Es(10,"div",8,9),Ds("mousedown",function(e){return t._handlePaginatorPress("after",e)})("click",function(){return t._handlePaginatorClick("after")})("touchend",function(){return t._stopInterval()}),Ps(12,"div",2),Ss()),2&e&&(Qs("mat-tab-header-pagination-disabled",t._disableScrollBefore),Cs("matRippleDisabled",t._disableScrollBefore||t.disableRipple),Ui(5),Qs("_mat-animation-noopable","NoopAnimations"===t._animationMode),Ui(5),Qs("mat-tab-header-pagination-disabled",t._disableScrollAfter),Cs("matRippleDisabled",t._disableScrollAfter||t.disableRipple))},directives:[ly,Qd,ik],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),e})(),Ok=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[Oh,Wg,_f,cy,Zd,Pp],Wg]}),e})();function kk(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Rk(e,t,n){for(let o=0;o<28;o+=7){const r=e>>>o,i=!(r>>>7==0&&0==t);if(n.push(255&(i?128|r:r)),!i)return}const r=e>>>28&15|(7&t)<<4,i=!(t>>3==0);if(n.push(255&(i?128|r:r)),i){for(let e=3;e<31;e+=7){const r=t>>>e,i=!(r>>>7==0);if(n.push(255&(i?128|r:r)),!i)return}n.push(t>>>31&1)}}function Ak(e){let t="-"==e[0];t&&(e=e.slice(1));let n=0,r=0;function i(t,i){const o=Number(e.slice(t,i));r*=1e6,n=1e6*n+o,n>=4294967296&&(r+=n/4294967296|0,n%=4294967296)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),[t,n,r]}function Mk(e,t){if(t<=2097151)return""+(4294967296*t+e);let n=(e>>>24|t<<8)>>>0&16777215,r=t>>16&65535,i=(16777215&e)+6777216*n+6710656*r,o=n+8147497*r,s=2*r,a=1e7;function l(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return i>=a&&(o+=Math.floor(i/a),i%=a),o>=a&&(s+=Math.floor(o/a),o%=a),l(s,0)+l(o,s)+l(i,1)}function Dk(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function Fk(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;0!=(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}const Lk=function(){const e=new DataView(new ArrayBuffer(8));return void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}();function Bk(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const Nk=/^-?[0-9]+$/;class jk{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=4294967296*this.hi+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}let Hk=(()=>{class e extends jk{static from(t){if(Lk)switch(typeof t){case"string":if("0"==t)return this.ZERO;if(""==t)throw new Error("string is no integer");t=Lk.C(t);case"number":if(0===t)return this.ZERO;t=Lk.C(t);case"bigint":if(!t)return this.ZERO;if(t<Lk.UMIN)throw new Error("signed value for ulong");if(t>Lk.UMAX)throw new Error("ulong too large");return Lk.V.setBigUint64(0,t,!0),new e(Lk.V.getInt32(0,!0),Lk.V.getInt32(4,!0))}else switch(typeof t){case"string":if("0"==t)return this.ZERO;if(t=t.trim(),!Nk.test(t))throw new Error("string is no integer");let[n,r,i]=Ak(t);if(n)throw new Error("signed value");return new e(r,i);case"number":if(0==t)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");if(t<0)throw new Error("signed value for ulong");return new e(t,t/4294967296)}throw new Error("unknown value "+typeof t)}toString(){return Lk?this.toBigInt().toString():Mk(this.lo,this.hi)}toBigInt(){return Bk(Lk),Lk.V.setInt32(0,this.lo,!0),Lk.V.setInt32(4,this.hi,!0),Lk.V.getBigUint64(0,!0)}}return e.ZERO=new e(0,0),e})(),zk=(()=>{class e extends jk{static from(t){if(Lk)switch(typeof t){case"string":if("0"==t)return this.ZERO;if(""==t)throw new Error("string is no integer");t=Lk.C(t);case"number":if(0===t)return this.ZERO;t=Lk.C(t);case"bigint":if(!t)return this.ZERO;if(t<Lk.MIN)throw new Error("ulong too small");if(t>Lk.MAX)throw new Error("ulong too large");return Lk.V.setBigInt64(0,t,!0),new e(Lk.V.getInt32(0,!0),Lk.V.getInt32(4,!0))}else switch(typeof t){case"string":if("0"==t)return this.ZERO;if(t=t.trim(),!Nk.test(t))throw new Error("string is no integer");let[n,r,i]=Ak(t),o=new e(r,i);return n?o.negate():o;case"number":if(0==t)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");return t>0?new e(t,t/4294967296):new e(-t,-t/4294967296).negate()}throw new Error("unknown value "+typeof t)}isNegative(){return 0!=(2147483648&this.hi)}negate(){let t=~this.hi,n=this.lo;return n?n=1+~n:t+=1,new e(n,t)}toString(){if(Lk)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+Mk(e.lo,e.hi)}return Mk(this.lo,this.hi)}toBigInt(){return Bk(Lk),Lk.V.setInt32(0,this.lo,!0),Lk.V.setInt32(4,this.hi,!0),Lk.V.getBigInt64(0,!0)}}return e.ZERO=new e(0,0),e})();const Vk=e=>String.fromCharCode.apply(String,e);class Uk{constructor(e){this.varint64=kk,this.uint32=Fk,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case Zk.Bit64:this.pos+=4;case Zk.Bit32:this.pos+=4;break;case Zk.LengthDelimited:let e=this.uint32();this.pos+=e;break;case Zk.Varint:for(;128&this.buf[this.pos++];);}return this.assertBounds(),this.buf.slice(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new zk(...this.varint64())}uint64(){return new Hk(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,new zk(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new Hk(this.sfixed32(),this.sfixed32())}sfixed64(){return new zk(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.slice(t,this.pos)}string(){return function(e){if(e.length<1)return"";let t,n=0,r=[],i=[],o=0,s=e.length;for(;n<s;)t=e[n++],t<128?i[o++]=t:t>191&&t<224?i[o++]=(31&t)<<6|63&e[n++]:t>239&&t<365?(t=((7&t)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,i[o++]=55296+(t>>10),i[o++]=56320+(1023&t)):i[o++]=(15&t)<<12|(63&e[n++])<<6|63&e[n++],o>8191&&(r.push(Vk(i)),o=0);return r.length?(o&&r.push(Vk(i.slice(0,o))),r.join("")):Vk(i.slice(0,o))}(this.bytes())}}function Wk(e,t){if(!e)throw new Error(t)}function Xk(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function Gk(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function qk(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}class $k{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Gk(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Xk(e),Dk(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){qk(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Gk(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Xk(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Xk(e),Dk(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=zk.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=Hk.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=zk.from(e);return Rk(t.lo,t.hi,this.buf),this}sint64(e){let t=zk.from(e),n=t.hi>>31;return Rk(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=Hk.from(e);return Rk(t.lo,t.hi,this.buf),this}}var Yk;!function(e){e.symbol=Symbol("protobuf-ts/unknown"),e.onRead=(n,r,i,o,s)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:o,data:s})},e.onWrite=(t,n,r)=>{for(let{no:i,wireType:o,data:s}of e.list(n))r.tag(i,o).raw(s)},e.list=(n,r)=>{if(t(n)){let t=n[e.symbol];return r?t.filter(e=>e.no==r):t}return[]},e.last=(t,n)=>e.list(t,n).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(Yk||(Yk={}));const Kk={readUnknownField:!0,readerFactory:e=>new Uk(e)},Qk={writeUnknownFields:!0,writerFactory:()=>new $k};var Zk=function(e){return e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32",e}({});function Jk(e,t,n){let r,i,o=n;for(let s of e.fields){let e=s.localName;if(s.oneof){const n=o[s.oneof];if(void 0===n)continue;if(r=n[e],i=t[s.oneof],i.oneofKind=n.oneofKind,void 0===r){delete i[e];continue}}else if(r=o[e],i=t,void 0===r)continue;switch(s.kind){case"scalar":case"enum":i[e]=s.repeat?r.concat():r;break;case"message":let t=s.T();if(s.repeat)for(let n=0;n<r.length;n++)i[e][n]=t.create(r[n]);else void 0===i[e]?i[e]=t.create(r):t.mergePartial(i[e],r);break;case"map":switch(s.V.kind){case"scalar":case"enum":Object.assign(i[e],r);break;case"message":let t=s.V.T();for(let n of Object.keys(r))i[e][n]=t.create(r[n])}}}}function eR(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);"_"==i?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):n.push(0==r?i.toLowerCase():i)}return n.join("")}var tR=function(e){return e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64",e}({}),nR=function(e){return e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER",e}({}),rR=function(e){return e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED",e}({});function iR(e){var t,n,r,i;return e.localName=null!==(t=e.localName)&&void 0!==t?t:eR(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:eR(e.name),e.repeat=null!==(r=e.repeat)&&void 0!==r?r:rR.NO,e.opt=null!==(i=e.opt)&&void 0!==i?i:!e.repeat&&!e.oneof&&"message"==e.kind,e}function oR(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}class sR{constructor(e){this.info=e}prepare(){if(this.data)return;const e=[],t=[],n=[];for(let r of this.info.fields)if(r.oneof)n.includes(r.oneof)||(n.push(r.oneof),e.push(r.oneof),t.push(r.oneof));else switch(t.push(r.localName),r.kind){case"scalar":case"enum":r.opt&&!r.repeat||e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t,n=!1){if(t<0)return!0;if(null==e||"object"!=typeof e)return!1;this.prepare();let r=Object.keys(e),i=this.data;if(r.length<i.req.length||i.req.some(e=>!r.includes(e)))return!1;if(!n&&r.some(e=>!i.known.includes(e)))return!1;if(t<1)return!0;for(const o of i.oneofs){const r=e[o];if(!oR(r))return!1;if(void 0===r.oneofKind)continue;const i=this.info.fields.find(e=>e.localName===r.oneofKind);if(!i)return!1;if(!this.field(r[r.oneofKind],i,n,t))return!1}for(const o of this.info.fields)if(void 0===o.oneof&&!this.field(e[o.localName],o,n,t))return!1;return!0}field(e,t,n,r){let i=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:i?this.scalars(e,t.T,r,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:i?this.scalars(e,tR.INT32,r):this.scalar(e,tR.INT32);case"message":return void 0===e||(i?this.messages(e,t.T(),n,r):this.message(e,t.T(),n,r));case"map":if("object"!=typeof e||null===e)return!1;if(r<2)return!0;if(!this.mapKeys(e,t.K,r))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,r,t.V.L);case"enum":return this.scalars(Object.values(e),tR.INT32,r);case"message":return this.messages(Object.values(e),t.V.T(),n,r)}}return!0}message(e,t,n,r){return n?t.isAssignable(e,r):t.is(e,r)}messages(e,t,n,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(n){for(let n=0;n<e.length&&n<r;n++)if(!t.isAssignable(e[n],r-1))return!1}else for(let i=0;i<e.length&&i<r;i++)if(!t.is(e[i],r-1))return!1;return!0}scalar(e,t,n){let r=typeof e;switch(t){case tR.UINT64:case tR.FIXED64:case tR.INT64:case tR.SFIXED64:case tR.SINT64:switch(n){case nR.BIGINT:return"bigint"==r;case nR.NUMBER:return"number"==r&&!isNaN(e);default:return"string"==r}case tR.BOOL:return"boolean"==r;case tR.STRING:return"string"==r;case tR.BYTES:return e instanceof Uint8Array;case tR.DOUBLE:case tR.FLOAT:return"number"==r&&!isNaN(e);default:return"number"==r&&Number.isInteger(e)}}scalars(e,t,n,r){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e))for(let i=0;i<e.length&&i<n;i++)if(!this.scalar(e[i],t,r))return!1;return!0}mapKeys(e,t,n){let r=Object.keys(e);switch(t){case tR.INT32:case tR.FIXED32:case tR.SFIXED32:case tR.SINT32:case tR.UINT32:return this.scalars(r.slice(0,n).map(e=>parseInt(e)),t,n);case tR.BOOL:return this.scalars(r.slice(0,n).map(e=>"true"==e||"false"!=e&&e),t,n);default:return this.scalars(r,t,n,nR.STRING)}}}function aR(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}let lR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),cR=[];for(let uJ=0;uJ<lR.length;uJ++)cR[lR[uJ].charCodeAt(0)]=uJ;function uR(e,t){switch(t){case nR.BIGINT:return e.toBigInt();case nR.NUMBER:return e.toNumber();default:return e.toString()}}cR["-".charCodeAt(0)]=lR.indexOf("+"),cR["_".charCodeAt(0)]=lR.indexOf("/");class hR{constructor(e){this.info=e}prepare(){if(void 0===this.fMap){this.fMap={};for(const e of this.info.fields)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,n){if(!e){let e=aR(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,n){this.prepare();const r=[];for(const[o,s]of Object.entries(e)){const e=this.fMap[o];if(!e){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${o}`);continue}const a=e.localName;let l;if(e.oneof){if(r.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(e.oneof),l=t[e.oneof]={oneofKind:a}}else l=t;if("map"==e.kind){if(null===s)continue;this.assert(null!==(i=s)&&"object"==typeof i&&!Array.isArray(i),e.name,s);const t=l[a];for(const[r,i]of Object.entries(s)){let o;switch(this.assert(null!==i,e.name+" map value",null),e.V.kind){case"message":o=e.V.T().internalJsonRead(i,n);break;case"enum":o=this.enum(e.V.T(),i,e.name);break;case"scalar":o=this.scalar(i,e.V.T,e.V.L,e.name)}this.assert(void 0!==o,e.name+" map value",i);let s=r;e.K==tR.BOOL&&(s="true"==s||"false"!=s&&s),s=this.scalar(s,e.K,nR.STRING,e.name).toString(),t[s]=o}}else if(e.repeat){if(null===s)continue;this.assert(Array.isArray(s),e.name,s);const t=l[a];for(const r of s){let i;switch(this.assert(null!==r,e.name,null),e.kind){case"message":i=e.T().internalJsonRead(r,n);break;case"enum":i=this.enum(e.T(),r,e.name);break;case"scalar":i=this.scalar(r,e.T,e.L,e.name)}this.assert(void 0!==i,e.name,s),t.push(i)}}else switch(e.kind){case"message":if(null===s&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}l[a]=e.T().internalJsonRead(s,n,l[a]);break;case"enum":l[a]=this.enum(e.T(),s,e.name);break;case"scalar":l[a]=this.scalar(s,e.T,e.L,e.name)}}var i}enum(e,t,n){if("google.protobuf.NullValue"==e[0]&&Wk(null===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return Wk(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let r=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(r=t.substring(e[2].length));let i=e[1][r];return Wk("number"==typeof i,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),i}Wk(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,r){let i;try{switch(t){case tR.DOUBLE:case tR.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){i="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){i="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let r=Number(e);if(Number.isNaN(r)){i="not a number";break}if(!Number.isFinite(r)){i="too large or small";break}return t==tR.FLOAT&&qk(r),r;case tR.INT32:case tR.FIXED32:case tR.SFIXED32:case tR.SINT32:case tR.UINT32:if(null===e)return 0;let o;if("number"==typeof e?o=e:""===e?i="empty string":"string"==typeof e&&(e.trim().length!==e.length?i="extra whitespace":o=Number(e)),void 0===o)break;return t==tR.UINT32?Gk(o):Xk(o),o;case tR.INT64:case tR.SFIXED64:case tR.SINT64:if(null===e)return uR(zk.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return uR(zk.from(e),n);case tR.FIXED64:case tR.UINT64:if(null===e)return uR(Hk.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return uR(Hk.from(e),n);case tR.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case tR.STRING:if(null===e)return"";if("string"!=typeof e){i="extra whitespace";break}try{encodeURIComponent(e)}catch(i){i="invalid UTF8";break}return e;case tR.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,r=new Uint8Array(t),i=0,o=0,s=0;for(let a=0;a<e.length;a++){if(n=cR[e.charCodeAt(a)],void 0===n)switch(e[a]){case"=":o=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(o){case 0:s=n,o=1;break;case 1:r[i++]=s<<2|(48&n)>>4,s=n,o=2;break;case 2:r[i++]=(15&s)<<4|(60&n)>>2,s=n,o=3;break;case 3:r[i++]=(3&s)<<6|n,o=0}}if(1==o)throw Error("invalid base64 string.");return r.subarray(0,i)}(e)}}catch(o){i=o.message}this.assert(!1,r+(i?" - "+i:""),e)}}class dR{constructor(e){this.info=e}write(e,t){const n={},r=e;for(const i of this.info.fields.filter(e=>!e.oneof)){let e=this.field(i,r[i.localName],t);void 0!==e&&(n[t.useProtoFieldName?i.name:i.jsonName]=e)}for(const i of this.info.fields){if(!i.oneof)continue;const e=r[i.oneof];if(e.oneofKind!==i.localName)continue;let o;o=this.field(i,e[i.localName],"scalar"==i.kind||"enum"==i.kind?{enumAsInteger:t.enumAsInteger,useProtoFieldName:t.useProtoFieldName,emitDefaultValues:!0}:t),Wk(void 0!==o),n[t.useProtoFieldName?i.name:i.jsonName]=o}return n}field(e,t,n){let r;if("map"==e.kind){Wk("object"==typeof t&&null!==t);const i={};switch(e.V.kind){case"scalar":for(const[n,s]of Object.entries(t)){const t=this.scalar(e.V.T,s,e.name,!1,!0);Wk(void 0!==t),i[n.toString()]=t}break;case"message":const r=e.V.T();for(const[s,a]of Object.entries(t)){const t=this.message(r,a,e.name,n);Wk(void 0!==t),i[s.toString()]=t}break;case"enum":const o=e.V.T();for(const[s,a]of Object.entries(t)){Wk(void 0===a||"number"==typeof a);const t=this.enum(o,a,e.name,!1,!0,n.enumAsInteger);Wk(void 0!==t),i[s.toString()]=t}}(n.emitDefaultValues||Object.keys(i).length>0)&&(r=i)}else if(e.repeat){Wk(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){const r=this.scalar(e.T,t[n],e.name,e.opt,!0);Wk(void 0!==r),i.push(r)}break;case"enum":const r=e.T();for(let s=0;s<t.length;s++){Wk(void 0===t[s]||"number"==typeof t[s]);const o=this.enum(r,t[s],e.name,e.opt,!0,n.enumAsInteger);Wk(void 0!==o),i.push(o)}break;case"message":const o=e.T();for(let s=0;s<t.length;s++){const r=this.message(o,t[s],e.name,n);Wk(void 0!==r),i.push(r)}}(n.emitDefaultValues||i.length>0||n.emitDefaultValues)&&(r=i)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,n)}return r}enum(e,t,n,r,i,o){if("google.protobuf.NullValue"==e[0])return null;if(void 0!==t){if(0!==t||i||r)return Wk("number"==typeof t),Wk(Number.isInteger(t)),o||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else Wk(r)}message(e,t,n,r){return void 0===t?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,n,r,i){if(void 0===t)return void Wk(r);const o=i||r;switch(e){case tR.INT32:case tR.SFIXED32:case tR.SINT32:return 0===t?o?0:void 0:(Xk(t),t);case tR.FIXED32:case tR.UINT32:return 0===t?o?0:void 0:(Gk(t),t);case tR.FLOAT:qk(t);case tR.DOUBLE:return 0===t?o?0:void 0:(Wk("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case tR.STRING:return""===t?o?"":void 0:(Wk("string"==typeof t),t);case tR.BOOL:return!1===t?!o&&void 0:(Wk("boolean"==typeof t),t);case tR.UINT64:case tR.FIXED64:Wk("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let e=Hk.from(t);if(e.isZero()&&!o)return;return e.toString();case tR.INT64:case tR.SFIXED64:case tR.SINT64:Wk("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let n=zk.from(t);if(n.isZero()&&!o)return;return n.toString();case tR.BYTES:return Wk(t instanceof Uint8Array),t.byteLength?function(e){let t,n="",r=0,i=0;for(let o=0;o<e.length;o++)switch(t=e[o],r){case 0:n+=lR[t>>2],i=(3&t)<<4,r=1;break;case 1:n+=lR[i|t>>4],i=(15&t)<<2,r=2;break;case 2:n+=lR[i|t>>6],n+=lR[63&t],r=0}return r&&(n+=lR[i],n+="=",1==r&&(n+="=")),n}(t):o?"":void 0}}}function pR(e,t=nR.STRING){switch(e){case tR.BOOL:return!1;case tR.UINT64:case tR.FIXED64:return uR(Hk.ZERO,t);case tR.INT64:case tR.SFIXED64:case tR.SINT64:return uR(zk.ZERO,t);case tR.DOUBLE:case tR.FLOAT:return 0;case tR.BYTES:return new Uint8Array(0);case tR.STRING:return"";default:return 0}}class fR{constructor(e){this.info=e}prepare(){this.fieldNoToField||(this.fieldNoToField=new Map(this.info.fields.map(e=>[e.no,e])))}read(e,t,n,r){this.prepare();const i=void 0===r?e.len:e.pos+r;for(;e.pos<i;){const[r,i]=e.tag(),o=this.fieldNoToField.get(r);if(!o){let o=n.readUnknownField;if("throw"==o)throw new Error(`Unknown field ${r} (wire type ${i}) for ${this.info.typeName}`);let s=e.skip(i);!1!==o&&(!0===o?Yk.onRead:o)(this.info.typeName,t,r,i,s);continue}let s=t,a=o.repeat,l=o.localName;switch(o.oneof&&(s=s[o.oneof],s.oneofKind!==l&&(s=t[o.oneof]={oneofKind:l})),o.kind){case"scalar":case"enum":let t="enum"==o.kind?tR.INT32:o.T,r="scalar"==o.kind?o.L:void 0;if(a){let n=s[l];if(i==Zk.LengthDelimited&&t!=tR.STRING&&t!=tR.BYTES){let i=e.uint32()+e.pos;for(;e.pos<i;)n.push(this.scalar(e,t,r))}else n.push(this.scalar(e,t,r))}else s[l]=this.scalar(e,t,r);break;case"message":if(a){let t=s[l],r=o.T().internalBinaryRead(e,e.uint32(),n);t.push(r)}else s[l]=o.T().internalBinaryRead(e,e.uint32(),n,s[l]);break;case"map":let[c,u]=this.mapEntry(o,e,n);s[l][c]=u}}}mapEntry(e,t,n){let r,i,o=t.uint32(),s=t.pos+o;for(;t.pos<s;){let[o,s]=t.tag();switch(o){case 1:r=e.K==tR.BOOL?t.bool().toString():this.scalar(t,e.K,nR.STRING);break;case 2:switch(e.V.kind){case"scalar":i=this.scalar(t,e.V.T,e.V.L);break;case"enum":i=t.int32();break;case"message":i=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw new Error(`Unknown field ${o} (wire type ${s}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===r){let t=pR(e.K);r=e.K==tR.BOOL?t.toString():t}if(void 0===i)switch(e.V.kind){case"scalar":i=pR(e.V.T,e.V.L);break;case"enum":i=0;break;case"message":i=e.V.T().create()}return[r,i]}scalar(e,t,n){switch(t){case tR.INT32:return e.int32();case tR.STRING:return e.string();case tR.BOOL:return e.bool();case tR.DOUBLE:return e.double();case tR.FLOAT:return e.float();case tR.INT64:return uR(e.int64(),n);case tR.UINT64:return uR(e.uint64(),n);case tR.FIXED64:return uR(e.fixed64(),n);case tR.FIXED32:return e.fixed32();case tR.BYTES:return e.bytes();case tR.UINT32:return e.uint32();case tR.SFIXED32:return e.sfixed32();case tR.SFIXED64:return uR(e.sfixed64(),n);case tR.SINT32:return e.sint32();case tR.SINT64:return uR(e.sint64(),n)}}}class mR{constructor(e){this.info=e}prepare(){this.fields||(this.fields=this.info.fields.concat().sort((e,t)=>e.no-t.no))}write(e,t,n){this.prepare();for(const i of this.fields){let r,o,s=i.repeat,a=i.localName;if(i.oneof){const t=e[i.oneof];if(t.oneofKind!==a)continue;r=t[a],o=!0}else r=e[a],o=!1;switch(i.kind){case"scalar":case"enum":let e="enum"==i.kind?tR.INT32:i.T;if(s)if(Wk(Array.isArray(r)),s==rR.PACKED)this.packed(t,e,i.no,r);else for(const n of r)this.scalar(t,e,i.no,n,!0);else void 0===r?Wk(i.opt):this.scalar(t,e,i.no,r,o||i.opt);break;case"message":if(s){Wk(Array.isArray(r));for(const e of r)this.message(t,n,i.T(),i.no,e)}else this.message(t,n,i.T(),i.no,r);break;case"map":Wk("object"==typeof r&&null!==r);for(const[o,s]of Object.entries(r))this.mapEntry(t,n,i,o,s)}}let r=n.writeUnknownFields;!1!==r&&(!0===r?Yk.onWrite:r)(this.info.typeName,e,t)}mapEntry(e,t,n,r,i){e.tag(n.no,Zk.LengthDelimited),e.fork();let o=r;switch(n.K){case tR.INT32:case tR.FIXED32:case tR.UINT32:case tR.SFIXED32:case tR.SINT32:o=Number.parseInt(r);break;case tR.BOOL:Wk("true"==r||"false"==r),o="true"==r}switch(this.scalar(e,n.K,1,o,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,i,!0);break;case"enum":this.scalar(e,tR.INT32,2,i,!0);break;case"message":this.message(e,t,n.V.T(),2,i)}e.join()}message(e,t,n,r,i){void 0!==i&&(n.internalBinaryWrite(i,e.tag(r,Zk.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,r,i){let[o,s,a]=this.scalarInfo(t,r);a&&!i||(e.tag(n,o),e[s](r))}packed(e,t,n,r){if(!r.length)return;Wk(t!==tR.BYTES&&t!==tR.STRING),e.tag(n,Zk.LengthDelimited),e.fork();let[,i]=this.scalarInfo(t);for(let o=0;o<r.length;o++)e[i](r[o]);e.join()}scalarInfo(e,t){let n,r=Zk.Varint,i=void 0===t,o=0===t;switch(e){case tR.INT32:n="int32";break;case tR.STRING:o=i||!t.length,r=Zk.LengthDelimited,n="string";break;case tR.BOOL:o=!1===t,n="bool";break;case tR.UINT32:n="uint32";break;case tR.DOUBLE:r=Zk.Bit64,n="double";break;case tR.FLOAT:r=Zk.Bit32,n="float";break;case tR.INT64:o=i||zk.from(t).isZero(),n="int64";break;case tR.UINT64:o=i||Hk.from(t).isZero(),n="uint64";break;case tR.FIXED64:o=i||Hk.from(t).isZero(),r=Zk.Bit64,n="fixed64";break;case tR.BYTES:o=i||!t.byteLength,r=Zk.LengthDelimited,n="bytes";break;case tR.FIXED32:r=Zk.Bit32,n="fixed32";break;case tR.SFIXED32:r=Zk.Bit32,n="sfixed32";break;case tR.SFIXED64:o=i||zk.from(t).isZero(),r=Zk.Bit64,n="sfixed64";break;case tR.SINT32:n="sint32";break;case tR.SINT64:o=i||zk.from(t).isZero(),n="sint64"}return[r,n,i||o]}}const gR={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},yR={ignoreUnknownFields:!1},_R=Object.values;function vR(e,t,n){if(t===n)return!0;if(e!==tR.BYTES)return!1;let r=t,i=n;if(r.length!==i.length)return!1;for(let o=0;o<r.length;o++)if(r[o]!=i[o])return!1;return!0}function bR(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!vR(e,t[r],n[r]))return!1;return!0}function wR(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}class CR{constructor(e,t){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(iR),this.refTypeCheck=new sR(this),this.refJsonReader=new hR(this),this.refJsonWriter=new dR(this),this.refBinReader=new fR(this),this.refBinWriter=new mR(this)}create(e){let t=function(e){let t={};for(let n of e.fields){let e=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=pR(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&Jk(this,t,e),t}clone(e){let t=this.create();return Jk(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let e=r.localName,i=r.oneof?t[r.oneof][e]:t[e],o=r.oneof?n[r.oneof][e]:n[e];switch(r.kind){case"enum":case"scalar":let e="enum"==r.kind?tR.INT32:r.T;if(!(r.repeat?bR(e,i,o):vR(e,i,o)))return!1;break;case"map":if(!("message"==r.V.kind?wR(r.V.T(),_R(i),_R(o)):bR("enum"==r.V.kind?tR.INT32:r.V.T,_R(i),_R(o))))return!1;break;case"message":let t=r.T();if(!(r.repeat?wR(t,i,o):t.equals(i,o)))return!1}}return!0}(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){Jk(this,e,t)}fromBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},Kk),e):Kk}(t);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},yR),e):yR}(t))}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},gR),e):gR}(t))}toJsonString(e,t){var n;let r=this.toJson(e,t);return JSON.stringify(r,null,null!==(n=null==t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},Qk),e):Qk}(t);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let r=null!=n?n:this.create();return this.refJsonReader.read(e,r,t),r}throw new Error(`Unable to parse message ${this.typeName} from JSON ${aR(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create();return this.refBinReader.read(e,i,n,t),i}}var xR;!function(e){e[e.ASSETS=0]="ASSETS",e[e.UPLOADS=1]="UPLOADS",e[e.ANY=2]="ANY"}(xR||(xR={}));const ER=new class extends CR{constructor(){super("ImageConfig",[{no:1,name:"root",kind:"scalar",opt:!0,T:9},{no:2,name:"reason",kind:"scalar",opt:!0,T:9},{no:3,name:"sources",kind:"enum",opt:!0,T:()=>["ImageConfig.Sources",xR]}])}create(e){const t={};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.root=e.string();break;case 2:i.reason=e.string();break;case 3:i.sources=e.int32();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){void 0!==e.root&&t.tag(1,Zk.LengthDelimited).string(e.root),void 0!==e.reason&&t.tag(2,Zk.LengthDelimited).string(e.reason),void 0!==e.sources&&t.tag(3,Zk.Varint).int32(e.sources);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},SR=new class extends CR{constructor(){super("NumberConfig",[{no:1,name:"constraints",kind:"message",repeat:1,T:()=>PR},{no:2,name:"format",kind:"scalar",opt:!0,T:9}])}create(e){const t={constraints:[]};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.constraints.push(PR.internalBinaryRead(e,e.uint32(),n));break;case 2:i.format=e.string();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){for(let i=0;i<e.constraints.length;i++)PR.internalBinaryWrite(e.constraints[i],t.tag(1,Zk.LengthDelimited).fork(),n).join();void 0!==e.format&&t.tag(2,Zk.LengthDelimited).string(e.format);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},PR=new class extends CR{constructor(){super("NumberConstraint",[{no:1,name:"reason",kind:"scalar",opt:!0,T:9},{no:2,name:"min",kind:"message",oneof:"rule",T:()=>TR},{no:3,name:"max",kind:"message",oneof:"rule",T:()=>IR},{no:4,name:"isInteger",kind:"message",oneof:"rule",T:()=>OR}])}create(e){const t={rule:{oneofKind:void 0}};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.reason=e.string();break;case 2:i.rule={oneofKind:"min",min:TR.internalBinaryRead(e,e.uint32(),n,i.rule.min)};break;case 3:i.rule={oneofKind:"max",max:IR.internalBinaryRead(e,e.uint32(),n,i.rule.max)};break;case 4:i.rule={oneofKind:"isInteger",isInteger:OR.internalBinaryRead(e,e.uint32(),n,i.rule.isInteger)};break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){void 0!==e.reason&&t.tag(1,Zk.LengthDelimited).string(e.reason),"min"===e.rule.oneofKind&&TR.internalBinaryWrite(e.rule.min,t.tag(2,Zk.LengthDelimited).fork(),n).join(),"max"===e.rule.oneofKind&&IR.internalBinaryWrite(e.rule.max,t.tag(3,Zk.LengthDelimited).fork(),n).join(),"isInteger"===e.rule.oneofKind&&OR.internalBinaryWrite(e.rule.isInteger,t.tag(4,Zk.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},TR=new class extends CR{constructor(){super("NumberMinRule",[{no:1,name:"value",kind:"scalar",T:1}])}create(e){const t={value:0};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.double();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,Zk.Bit64).double(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},IR=new class extends CR{constructor(){super("NumberMaxRule",[{no:1,name:"value",kind:"scalar",T:1}])}create(e){const t={value:0};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.double();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,Zk.Bit64).double(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},OR=new class extends CR{constructor(){super("NumberIsIntegerRule",[{no:1,name:"value",kind:"scalar",T:8}])}create(e){const t={value:!1};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.bool();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){!1!==e.value&&t.tag(1,Zk.Varint).bool(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},kR=new class extends CR{constructor(){super("VariantConfig",[{no:1,name:"variants",kind:"message",repeat:1,T:()=>RR},{no:2,name:"reason",kind:"scalar",opt:!0,T:9}])}create(e){const t={variants:[]};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.variants.push(RR.internalBinaryRead(e,e.uint32(),n));break;case 2:i.reason=e.string();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){for(let i=0;i<e.variants.length;i++)RR.internalBinaryWrite(e.variants[i],t.tag(1,Zk.LengthDelimited).fork(),n).join();void 0!==e.reason&&t.tag(2,Zk.LengthDelimited).string(e.reason);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},RR=new class extends CR{constructor(){super("Variant",[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9}])}create(e){const t={value:""};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.string();break;case 2:i.title=e.string();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){""!==e.value&&t.tag(1,Zk.LengthDelimited).string(e.value),void 0!==e.title&&t.tag(2,Zk.LengthDelimited).string(e.title);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},AR=new class extends CR{constructor(){super("StringConfig",[{no:1,name:"constraints",kind:"message",repeat:1,T:()=>MR}])}create(e){const t={constraints:[]};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.constraints.push(MR.internalBinaryRead(e,e.uint32(),n));break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){for(let i=0;i<e.constraints.length;i++)MR.internalBinaryWrite(e.constraints[i],t.tag(1,Zk.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},MR=new class extends CR{constructor(){super("StringConstraint",[{no:1,name:"reason",kind:"scalar",opt:!0,T:9},{no:2,name:"pattern",kind:"message",oneof:"rule",T:()=>DR},{no:3,name:"minLength",kind:"message",oneof:"rule",T:()=>FR},{no:4,name:"maxLength",kind:"message",oneof:"rule",T:()=>LR},{no:5,name:"minLines",kind:"message",oneof:"rule",T:()=>BR},{no:6,name:"maxLines",kind:"message",oneof:"rule",T:()=>NR},{no:7,name:"minLengthPerLine",kind:"message",oneof:"rule",T:()=>jR},{no:8,name:"maxLengthPerLine",kind:"message",oneof:"rule",T:()=>HR}])}create(e){const t={rule:{oneofKind:void 0}};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.reason=e.string();break;case 2:i.rule={oneofKind:"pattern",pattern:DR.internalBinaryRead(e,e.uint32(),n,i.rule.pattern)};break;case 3:i.rule={oneofKind:"minLength",minLength:FR.internalBinaryRead(e,e.uint32(),n,i.rule.minLength)};break;case 4:i.rule={oneofKind:"maxLength",maxLength:LR.internalBinaryRead(e,e.uint32(),n,i.rule.maxLength)};break;case 5:i.rule={oneofKind:"minLines",minLines:BR.internalBinaryRead(e,e.uint32(),n,i.rule.minLines)};break;case 6:i.rule={oneofKind:"maxLines",maxLines:NR.internalBinaryRead(e,e.uint32(),n,i.rule.maxLines)};break;case 7:i.rule={oneofKind:"minLengthPerLine",minLengthPerLine:jR.internalBinaryRead(e,e.uint32(),n,i.rule.minLengthPerLine)};break;case 8:i.rule={oneofKind:"maxLengthPerLine",maxLengthPerLine:HR.internalBinaryRead(e,e.uint32(),n,i.rule.maxLengthPerLine)};break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){void 0!==e.reason&&t.tag(1,Zk.LengthDelimited).string(e.reason),"pattern"===e.rule.oneofKind&&DR.internalBinaryWrite(e.rule.pattern,t.tag(2,Zk.LengthDelimited).fork(),n).join(),"minLength"===e.rule.oneofKind&&FR.internalBinaryWrite(e.rule.minLength,t.tag(3,Zk.LengthDelimited).fork(),n).join(),"maxLength"===e.rule.oneofKind&&LR.internalBinaryWrite(e.rule.maxLength,t.tag(4,Zk.LengthDelimited).fork(),n).join(),"minLines"===e.rule.oneofKind&&BR.internalBinaryWrite(e.rule.minLines,t.tag(5,Zk.LengthDelimited).fork(),n).join(),"maxLines"===e.rule.oneofKind&&NR.internalBinaryWrite(e.rule.maxLines,t.tag(6,Zk.LengthDelimited).fork(),n).join(),"minLengthPerLine"===e.rule.oneofKind&&jR.internalBinaryWrite(e.rule.minLengthPerLine,t.tag(7,Zk.LengthDelimited).fork(),n).join(),"maxLengthPerLine"===e.rule.oneofKind&&HR.internalBinaryWrite(e.rule.maxLengthPerLine,t.tag(8,Zk.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},DR=new class extends CR{constructor(){super("StringPatternRule",[{no:1,name:"value",kind:"scalar",T:9}])}create(e){const t={value:""};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.string();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){""!==e.value&&t.tag(1,Zk.LengthDelimited).string(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},FR=new class extends CR{constructor(){super("StringMinLengthRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,Zk.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},LR=new class extends CR{constructor(){super("StringMaxLengthRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,Zk.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},BR=new class extends CR{constructor(){super("StringMinLinesRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,Zk.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},NR=new class extends CR{constructor(){super("StringMaxLinesRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,Zk.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},jR=new class extends CR{constructor(){super("StringMinLengthPerLineRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,Zk.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},HR=new class extends CR{constructor(){super("StringMaxLengthPerLineRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,Zk.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},zR=new class extends CR{constructor(){super("Schema",[{no:1,name:"name",kind:"scalar",opt:!0,T:9},{no:2,name:"titleTemplate",kind:"scalar",T:9},{no:3,name:"fields",kind:"message",repeat:1,T:()=>VR}])}create(e){const t={titleTemplate:"",fields:[]};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.name=e.string();break;case 2:i.titleTemplate=e.string();break;case 3:i.fields.push(VR.internalBinaryRead(e,e.uint32(),n));break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){void 0!==e.name&&t.tag(1,Zk.LengthDelimited).string(e.name),""!==e.titleTemplate&&t.tag(2,Zk.LengthDelimited).string(e.titleTemplate);for(let i=0;i<e.fields.length;i++)VR.internalBinaryWrite(e.fields[i],t.tag(3,Zk.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},VR=new class extends CR{constructor(){super("Field",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"required",kind:"scalar",opt:!0,T:8},{no:3,name:"string",kind:"message",oneof:"config",T:()=>AR},{no:4,name:"variant",kind:"message",oneof:"config",T:()=>kR},{no:5,name:"number",kind:"message",oneof:"config",T:()=>SR},{no:9,name:"image",kind:"message",oneof:"config",T:()=>ER},{no:6,name:"title",kind:"scalar",opt:!0,T:9},{no:7,name:"prompt",kind:"scalar",opt:!0,T:9},{no:8,name:"description",kind:"scalar",opt:!0,T:9}])}create(e){const t={name:"",config:{oneofKind:void 0}};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.name=e.string();break;case 2:i.required=e.bool();break;case 3:i.config={oneofKind:"string",string:AR.internalBinaryRead(e,e.uint32(),n,i.config.string)};break;case 4:i.config={oneofKind:"variant",variant:kR.internalBinaryRead(e,e.uint32(),n,i.config.variant)};break;case 5:i.config={oneofKind:"number",number:SR.internalBinaryRead(e,e.uint32(),n,i.config.number)};break;case 9:i.config={oneofKind:"image",image:ER.internalBinaryRead(e,e.uint32(),n,i.config.image)};break;case 6:i.title=e.string();break;case 7:i.prompt=e.string();break;case 8:i.description=e.string();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){""!==e.name&&t.tag(1,Zk.LengthDelimited).string(e.name),void 0!==e.required&&t.tag(2,Zk.Varint).bool(e.required),"string"===e.config.oneofKind&&AR.internalBinaryWrite(e.config.string,t.tag(3,Zk.LengthDelimited).fork(),n).join(),"variant"===e.config.oneofKind&&kR.internalBinaryWrite(e.config.variant,t.tag(4,Zk.LengthDelimited).fork(),n).join(),"number"===e.config.oneofKind&&SR.internalBinaryWrite(e.config.number,t.tag(5,Zk.LengthDelimited).fork(),n).join(),"image"===e.config.oneofKind&&ER.internalBinaryWrite(e.config.image,t.tag(9,Zk.LengthDelimited).fork(),n).join(),void 0!==e.title&&t.tag(6,Zk.LengthDelimited).string(e.title),void 0!==e.prompt&&t.tag(7,Zk.LengthDelimited).string(e.prompt),void 0!==e.description&&t.tag(8,Zk.LengthDelimited).string(e.description);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},UR=new class extends CR{constructor(){super("DataSet",[{no:1,name:"embedded",kind:"message",oneof:"schema",T:()=>zR},{no:3,name:"linked",kind:"scalar",oneof:"schema",T:9},{no:2,name:"rows",kind:"message",repeat:1,T:()=>WR},{no:4,name:"schemaName",kind:"scalar",opt:!0,T:9}])}create(e){const t={schema:{oneofKind:void 0},rows:[]};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:i.schema={oneofKind:"embedded",embedded:zR.internalBinaryRead(e,e.uint32(),n,i.schema.embedded)};break;case 3:i.schema={oneofKind:"linked",linked:e.string()};break;case 2:i.rows.push(WR.internalBinaryRead(e,e.uint32(),n));break;case 4:i.schemaName=e.string();break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}internalBinaryWrite(e,t,n){"embedded"===e.schema.oneofKind&&zR.internalBinaryWrite(e.schema.embedded,t.tag(1,Zk.LengthDelimited).fork(),n).join(),"linked"===e.schema.oneofKind&&t.tag(3,Zk.LengthDelimited).string(e.schema.linked);for(let i=0;i<e.rows.length;i++)WR.internalBinaryWrite(e.rows[i],t.tag(2,Zk.LengthDelimited).fork(),n).join();void 0!==e.schemaName&&t.tag(4,Zk.LengthDelimited).string(e.schemaName);let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}},WR=new class extends CR{constructor(){super("Row",[{no:1,name:"cells",kind:"map",K:9,V:{kind:"scalar",T:9}}])}create(e){const t={cells:{}};return void 0!==e&&Jk(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!=r?r:this.create(),o=e.pos+t;for(;e.pos<o;){let[t,r]=e.tag();switch(t){case 1:this.binaryReadMap1(i.cells,e,n);break;default:let o=n.readUnknownField;if("throw"===o)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let s=e.skip(r);!1!==o&&(!0===o?Yk.onRead:o)(this.typeName,i,t,r,s)}}return i}binaryReadMap1(e,t,n){let r,i,o=t.uint32(),s=t.pos+o;for(;t.pos<s;){let[e,n]=t.tag();switch(e){case 1:r=t.string();break;case 2:i=t.string();break;default:throw new globalThis.Error("unknown map entry field for field Row.cells")}}e[null!=r?r:""]=null!=i?i:""}internalBinaryWrite(e,t,n){for(let i of Object.keys(e.cells))t.tag(1,Zk.LengthDelimited).fork().tag(1,Zk.LengthDelimited).string(i).tag(2,Zk.LengthDelimited).string(e.cells[i]).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?Yk.onWrite:r)(this.typeName,e,t),t}};class XR{static getFieldConfig(e){if(null==e.config)return null;switch(e.config.oneofKind){case"string":return e.config.string;case"number":return e.config.number;case"variant":return e.config.variant;case"image":return e.config.image;default:throw new Error(`The field config type ${e.config.oneofKind} is not supported.`)}}static getStringConfig(e){return"string"==e.config.oneofKind?e.config.string:null}static getNumberConfig(e){return"number"==e.config.oneofKind?e.config.number:null}static getVariantConfig(e){return"variant"==e.config.oneofKind?e.config.variant:null}static getImageConfig(e){return"image"==e.config.oneofKind?e.config.image:null}static getStringRule(e){if(null==e.rule)return null;switch(e.rule.oneofKind){case"pattern":return e.rule.pattern;case"minLength":return e.rule.minLength;case"maxLength":return e.rule.maxLength;case"minLines":return e.rule.minLines;case"maxLines":return e.rule.maxLines;case"minLengthPerLine":return e.rule.minLengthPerLine;case"maxLengthPerLine":return e.rule.maxLengthPerLine;default:throw new Error(`The string rule type ${e.rule.oneofKind} is not supported.`)}}static getNumberRule(e){if(null==e.rule)return null;switch(e.rule.oneofKind){case"min":return e.rule.min;case"max":return e.rule.max;case"isInteger":return e.rule.isInteger;default:throw new Error(`The number rule type ${e.rule.oneofKind} is not supported.`)}}static getConstraintRuleDisplayName(e){if(null==(null==e?void 0:e.rule))return null;switch(e.rule.oneofKind){case"pattern":return"Pattern";case"minLength":return"Min characters";case"maxLength":return"Max characters";case"minLines":return"Min number of lines";case"maxLines":return"Max number of lines";case"minLengthPerLine":return"Min characters per line";case"maxLengthPerLine":return"Max characters per line";case"min":return"Min value";case"max":return"Max value";case"isInteger":return"Only integer";default:throw new Error(`The rule type ${e.rule.oneofKind} is not supported.`)}}static getSupportedRuleTypes(e){if(null==e)return;const t="string"==typeof e?e:e.oneofKind;return"string"==t?this.supportedStringRuleTypes.slice():"number"==t?this.supportedNumberRuleTypes.slice():"variant"==t?["variants"]:"image"==t?["root"]:void 0}static createConfig(e,t){switch(e){case"number":return this._buildOneofItem(e,SR.create({constraints:this._createNumberConstraints(t)}));case"variant":return this._buildOneofItem(e,kR.create(this._createVariantConfig(t[0])));case"string":return this._buildOneofItem(e,AR.create({constraints:this._createStringConstraints(t)}));case"image":return this._buildOneofItem(e,ER.create(this._createImageConfig(t[0])));case void 0:return;default:throw new Error(`Unknown config type: ${e}`)}}static _buildOneofItem(e,t){const n={oneofKind:e};return n[e]=t,n}static _createNumberConstraints(e){const t=[];for(let n of e){let e={};switch(n.ruleType){case"isInteger":e.rule=this._buildOneofItem(n.ruleType,OR.create({value:this.toBool(n.value)}));break;case"min":e.rule=this._buildOneofItem(n.ruleType,TR.create({value:this.toNumber(n.value)}));break;case"max":e.rule=this._buildOneofItem(n.ruleType,IR.create({value:this.toNumber(n.value)}));break;default:continue}null!=n.reason&&(e.reason=n.reason),t.push(e)}return t}static _createVariantConfig(e){return null==e?{}:{variants:e.variants,reason:e.reason}}static _createImageConfig(e){return null==e?{}:{root:e.value,reason:e.reason,sources:(()=>{switch(e.sources){case"Assets":case 0:return xR.ASSETS;case"Uploads":case 1:return xR.UPLOADS;case"Any":case 2:default:return xR.ANY}})()}}static _createStringConstraints(e){const t=[];for(let n of e){const e={};switch(n.ruleType){case"minLength":e.rule=this._buildOneofItem(n.ruleType,FR.create({value:this.toNumber(n.value)}));break;case"maxLength":e.rule=this._buildOneofItem(n.ruleType,LR.create({value:this.toNumber(n.value)}));break;case"minLengthPerLine":e.rule=this._buildOneofItem(n.ruleType,jR.create({value:this.toNumber(n.value)}));break;case"maxLengthPerLine":e.rule=this._buildOneofItem(n.ruleType,HR.create({value:this.toNumber(n.value)}));break;case"minLines":e.rule=this._buildOneofItem(n.ruleType,BR.create({value:this.toNumber(n.value)}));break;case"maxLines":e.rule=this._buildOneofItem(n.ruleType,NR.create({value:this.toNumber(n.value)}));break;case"pattern":e.rule=this._buildOneofItem(n.ruleType,DR.create({value:n.value}));break;default:continue}null!=n.reason&&(e.reason=n.reason),t.push(e)}return t}static toNumber(e){if(void 0!==e){const t=Number(e);if(isNaN(t))throw new Error(`A ${e} is not a number. Ensure that you did not mistype in a feature file.`);return t}return e}static toBool(e){return void 0!==e?"boolean"==typeof e?e:"true"===e.toLowerCase():e}}XR.supportedStringRuleTypes=["pattern","minLength","maxLength","minLines","maxLines","minLengthPerLine","maxLengthPerLine"],XR.supportedNumberRuleTypes=["min","max","isInteger"];var GR,qR=n("sHUD");!function(e){e.ok="ok",e.missing="missing",e.required="required",e.stringPattern="stringPattern",e.stringMinLength="stringMinLength",e.stringMaxLength="stringMaxLength",e.stringMinLengthPerLine="stringMinLengthPerLine",e.stringMaxLengthPerLine="stringMaxLengthPerLine",e.stringMinLines="stringMinLines",e.stringMaxLines="stringMaxLines",e.variantNotInList="variantNotInList",e.numberIsNumber="numberIsNumber",e.numberMin="numberMin",e.numberMax="numberMax",e.numberIsInteger="numberIsInteger",e.imageRoot="imageRoot",e.noSuchField="noSuchField"}(GR||(GR={}));class $R{static fromField(e,t,n,r){var i,o;switch(null===(i=e.config)||void 0===i?void 0:i.oneofKind){case"number":return new QR(e,t,n,r);case"string":return new KR(e,t,n,r);case"variant":return new ZR(e,t,n);case"image":return new JR(e,t,n);default:throw new Error(`Cannot create validation problem for the field of type ${null===(o=e.config)||void 0===o?void 0:o.oneofKind} because it is not supported.`)}}}class YR{constructor(e,t,n){this.fieldName=e,this.reason=n,this.rule=t}static processReason(e,t,n){let r=e.replace("{value}",t);return void 0!==n&&(r=r.replace("{constraint}",n)),r}}class KR extends YR{static getRuleByConstraint(e){switch(e.rule.oneofKind){case"maxLength":return GR.stringMaxLength;case"minLength":return GR.stringMinLength;case"maxLengthPerLine":return GR.stringMaxLengthPerLine;case"minLengthPerLine":return GR.stringMinLengthPerLine;case"maxLines":return GR.stringMaxLines;case"minLines":return GR.stringMinLines;case"pattern":return GR.stringPattern;default:throw new Error(`String validation problem rule for ${e.rule.oneofKind} is not defined.`)}}static getDefaultReason(e,t,n){switch(t.rule.oneofKind){case"maxLength":return`The ${e.name} field length is greater than ${t.rule.maxLength.value}`;case"minLength":return`The ${e.name} field length is less than ${t.rule.minLength.value}`;case"maxLengthPerLine":return`The length of the longest line in ${e.name} field is greater than ${t.rule.maxLengthPerLine.value}`;case"minLengthPerLine":return`The length of the shortest line in ${e.name} field is less than ${t.rule.minLengthPerLine.value}`;case"maxLines":return`The number of lines in ${e.name} is greater than ${t.rule.maxLines.value}`;case"minLines":return`The number of lines in ${e.name} is less than ${t.rule.minLines.value}`;case"pattern":return`The ${e.name} field is ${n} but it does not match a specified pattern /${t.rule.pattern.value}/`;default:throw new Error(`String validation problem rule for ${t.rule.oneofKind} is not defined.`)}}constructor(e,t,n,r){var i;super(e.name,KR.getRuleByConstraint(t),YR.processReason(null!==(i=t.reason)&&void 0!==i?i:KR.getDefaultReason(e,t,n),n,r))}}class QR extends YR{static getRuleByConstraint(e){switch(e.rule.oneofKind){case"isInteger":return GR.numberIsInteger;case"min":return GR.numberMin;case"max":return GR.numberMax;default:throw new Error(`Number validation problem rule for ${e.rule.oneofKind} is not defined.`)}}static getDefaultReason(e,t,n){switch(t.rule.oneofKind){case"max":return`The ${e.name} field is ${n} but it should be not greater than ${t.rule.max.value}.`;case"min":return`The ${e.name} field is ${n} but it should be not less than ${t.rule.min.value}.`;case"isInteger":return`The ${e.name} field is ${n} but it must be an integer number.`;default:throw new Error(`Number validation problem rule for ${t.rule.oneofKind} is not defined.`)}}constructor(e,t,n,r){var i;super(e.name,QR.getRuleByConstraint(t),YR.processReason(null!==(i=t.reason)&&void 0!==i?i:QR.getDefaultReason(e,t,n),n,r))}}class ZR extends YR{constructor(e,t,n){var r;super(e.name,GR.variantNotInList,YR.processReason(null!==(r=t.reason)&&void 0!==r?r:`The value ${n} of ${e.name} must be one of ${t.variants.map(e=>e.value).join(", ")}`,n))}}class JR extends YR{constructor(e,t,n){var r;super(e.name,GR.imageRoot,YR.processReason(null!==(r=t.reason)&&void 0!==r?r:`The image ${n} in the ${e.name} field must be located in the ${t.root} folder`,n))}}class eA extends YR{constructor(e){super(e,GR.ok,"")}}function tA(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function nA(e){return function t(n){return 0===arguments.length||tA(n)?t:e.apply(this,arguments)}}var rA=nA(function(e){return null==e});function iA(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var oA=Object.prototype.toString,sA=function(){return"[object Arguments]"===oA.call(arguments)?function(e){return"[object Arguments]"===oA.call(e)}:function(e){return iA("callee",e)}}(),aA=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)},lA=nA(function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():aA(e)?[]:function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)?"":function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)?{}:sA(e)?function(){return arguments}():void 0});function cA(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return tA(n)?t:nA(function(t){return e(n,t)});default:return tA(n)&&tA(r)?t:tA(n)?nA(function(t){return e(t,r)}):tA(r)?nA(function(t){return e(n,t)}):e(n,r)}}}function uA(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function hA(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}var dA="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},pA=!{toString:null}.propertyIsEnumerable("toString"),fA=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],mA=function(){return arguments.propertyIsEnumerable("length")}(),gA=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},yA=nA("function"!=typeof Object.keys||mA?function(e){if(Object(e)!==e)return[];var t,n,r=[],i=mA&&sA(e);for(t in e)!iA(t,e)||i&&"length"===t||(r[r.length]=t);if(pA)for(n=fA.length-1;n>=0;)iA(t=fA[n],e)&&!gA(r,t)&&(r[r.length]=t),n-=1;return r}:function(e){return Object(e)!==e?[]:Object.keys(e)}),_A=nA(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function vA(e,t,n,r){var i=uA(e);function o(e,t){return bA(e,t,n.slice(),r.slice())}return!hA(function(e,t){return!hA(o,t,e)},uA(t),i)}function bA(e,t,n,r){if(dA(e,t))return!0;var i,o=_A(e);if(o!==_A(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(null==(i=String(e.constructor).match(/^function (\w*)/))?"":i[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!dA(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!dA(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var s=n.length-1;s>=0;){if(n[s]===e)return r[s]===t;s-=1}switch(o){case"Map":return e.size===t.size&&vA(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&vA(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=yA(e);if(a.length!==yA(t).length)return!1;var l=n.concat([e]),c=r.concat([t]);for(s=a.length-1;s>=0;){var u=a[s];if(!iA(u,t)||!bA(t[u],e[u],l,c))return!1;s-=1}return!0}var wA=cA(function(e,t){return bA(e,t,[],[])}),CA=nA(function(e){return null!=e&&wA(e,lA(e))});function xA(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,o){return t.apply(this,arguments)};case 6:return function(e,n,r,i,o,s){return t.apply(this,arguments)};case 7:return function(e,n,r,i,o,s,a){return t.apply(this,arguments)};case 8:return function(e,n,r,i,o,s,a,l){return t.apply(this,arguments)};case 9:return function(e,n,r,i,o,s,a,l,c){return t.apply(this,arguments)};case 10:return function(e,n,r,i,o,s,a,l,c,u){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function EA(e,t,n){return function(){for(var r=[],i=0,o=e,s=0;s<t.length||i<arguments.length;){var a;s<t.length&&(!tA(t[s])||i>=arguments.length)?a=t[s]:(a=arguments[i],i+=1),r[s]=a,tA(a)||(o-=1),s+=1}return o<=0?n.apply(this,r):xA(o,EA(e,r,n))}}var SA=cA(function(e,t){return 1===e?nA(t):xA(e,EA(e,[],t))}),PA=nA(function(e){return SA(e.length,e)}),TA=cA(function(e,t){return t<e?t:e}),IA=cA(function(e,t){return t>e?t:e}),OA=cA(function(e,t){return e<t}),kA=cA(function(e,t){return e>t});class RA{constructor(e){this.checkMissing=e=>e.hasOwnProperty(this.field.name)?Object(qR.Right)(e[this.field.name]):Object(qR.Left)(new YR(this.field.name,GR.missing,`Data must contain ${RA.getFieldDisplayName(this.field)} field.`)),this.checkRequired=e=>this.field.required&&this.isOmitted(e)?Object(qR.Left)(new YR(this.field.name,GR.required,`The ${RA.getFieldDisplayName(this.field)} field cannot be empty.`)):this.getOptionalFieldResult(e),this.getOptionalFieldResult=e=>this.isOmitted(e)?Object(qR.Left)(new eA(this.field.name)):Object(qR.Right)(e),this.checkConfig=e=>qR.Maybe.fromUndefined(class{static Build(e){switch(e.config.oneofKind){case"string":return new MA(e);case"number":return new DA(e);case"variant":return new FA(e);case"image":return new LA(e);default:return}}}.Build(this.field)).map(t=>t.validate(e)).getOrElse(Object(qR.Right)(e)),this.field=e}validate(e){return this.checkMissing(e).chain(this.checkRequired).chain(this.checkConfig)}isOmitted(e){return rA(e)||CA(e)}static getFieldDisplayName(e){return null!=e.title&&""!=e.title.trim()?e.title:e.name}}class AA{constructor(e){this._field=e}validate(e){return Object(qR.Right)(e)}checkConstraint(e,t){return PA(this.checkIfRuleIsSet)(e,qR.Maybe.fromUndefined(this.findConstraintByRuleName(e)),t,(t,n)=>$R.fromField(this._field,this.findConstraintByRuleName(e),n,t))}checkIfRuleIsSet(e,t,n,r,i){return t.cata(()=>Object(qR.Right)(i),t=>n(i,t.rule[e].value)?Object(qR.Left)(r(t.rule[e].value,i)):Object(qR.Right)(i))}}class MA extends AA{constructor(e){super(e),this._config=XR.getStringConfig(e)}findConstraintByRuleName(e){var t,n;return(null!==(n=null===(t=this._config)||void 0===t?void 0:t.constraints)&&void 0!==n?n:[]).find(t=>t.rule.oneofKind==e)}validate(e){return super.validate(e).chain(this.checkConstraint("pattern",(e,t)=>!RegExp(t).test(e))).chain(this.checkConstraint("minLength",(e,t)=>e.length<t)).chain(this.checkConstraint("maxLength",(e,t)=>e.length>t)).chain(this.checkConstraint("minLines",(e,t)=>MA.getLines(e).length<t)).chain(this.checkConstraint("maxLines",(e,t)=>MA.getLines(e).length>t)).chain(this.checkConstraint("minLengthPerLine",(e,t)=>MA.getLineLengthBy(TA,e)<t)).chain(this.checkConstraint("maxLengthPerLine",(e,t)=>MA.getLineLengthBy(IA,e)>t))}}MA.getLines=e=>e.split(/(\r\n|\r|\n)/).filter(e=>"\n"!==e),MA.getLineLengthBy=(e,t)=>MA.getLines(t).map(e=>e.length).reduce(e);class DA extends AA{constructor(e){super(e),this.validate=e=>super.validate(e).chain(this.checkIsNumber).chain(this.checkConstraint("isInteger",(e,t)=>t&&!Number.isInteger(e))).chain(this.checkConstraint("min",OA)).chain(this.checkConstraint("max",kA)),this.checkIsNumber=e=>isNaN(Number(e))?Object(qR.Left)(new YR(this._field.name,GR.numberIsNumber,`The ${RA.getFieldDisplayName(this._field)} field value ${e} is not a number.`)):Object(qR.Right)(Number(e)),this._config=XR.getNumberConfig(e)}findConstraintByRuleName(e){var t,n;return(null!==(n=null===(t=this._config)||void 0===t?void 0:t.constraints)&&void 0!==n?n:[]).find(t=>t.rule.oneofKind==e)}}class FA{constructor(e){this._config=XR.getVariantConfig(e),this._field=e}validate(e){var t;return(null===(t=this._config)||void 0===t?void 0:t.variants.every(t=>t.value!==e))?Object(qR.Left)($R.fromField(this._field,this._config,e,null)):Object(qR.Right)(e)}}class LA{constructor(e){this._config=XR.getImageConfig(e),this._field=e}validate(e){var t,n;let r=null!==(n=null===(t=this._config)||void 0===t?void 0:t.root)&&void 0!==n?n:"/";return r.startsWith("/")||(r=`/${r}`),e.startsWith(r)?Object(qR.Right)(e):Object(qR.Left)($R.fromField(this._field,this._config,e,null))}}class BA{constructor(e){this.interpolateString=(e,t)=>e.replace(/{([^}]+)}/g,(e,n)=>{var r;return null!==(r=t[n])&&void 0!==r?r:""}),this.schema=e}validateValue(e,t){return this.findFieldByName(e).map(e=>new RA(e)).toEither(new YR(e,GR.noSuchField,`The ${e} field does not exist in a schema.`)).bind(n=>n.validate({[e]:t})).cata(e=>e,t=>new eA(e))}validate(e){var t;return(null!==(t=this.schema.fields)&&void 0!==t?t:[]).map(t=>new RA(t).validate(e)).map(e=>e.cata(e=>e,e=>new eA(e)))}buildTitle(e){return this.interpolateString(this.schema.titleTemplate,e)}findFieldByName(e){return qR.Maybe.fromNull(this.schema.fields.find(t=>t.name===e))}}const NA=["searchInput"],jA=["newTreeNode"],HA=["editTreeNode"];function zA(e,t){if(1&e){const e=ks();Es(0,"div",5),Es(1,"button",6),Ds("click",function(t){Rt(e);const n=Bs();return n.startCreating(t,n.NodeType.Folder)}),Ss(),Es(2,"button",7),Ds("click",function(t){Rt(e);const n=Bs();return n.startCreating(t,n.NodeType.File)}),Ss(),Es(3,"button",8),Ds("click",function(t){Rt(e);const n=Bs();return n.startEditing(t,n.activeNode)}),Ss(),Es(4,"button",9),Ds("click",function(){Rt(e);const t=Bs();return t.delete(t.activeNode)}),Ss(),Ss()}if(2&e){const e=Bs();Ui(3),Cs("disabled",null==e.activeNode),Ui(1),Cs("disabled",null==e.activeNode)}}function VA(e,t){1&e&&(Es(0,"div",10),Ps(1,"mat-spinner",11),Ss()),2&e&&(Ui(1),Cs("diameter",40))}function UA(e,t){1&e&&(Es(0,"div",12),la(1," Tree is empty "),Ss())}function WA(e,t){if(1&e){const e=ks();Es(0,"mat-list-item",22),Ds("click",function(){Rt(e);const n=t.$implicit;return Bs(3).selectSearchResult(n)}),Es(1,"mat-icon",23),la(2),Ss(),Es(3,"h4",24),la(4),Ss(),Es(5,"p",24),la(6),Ss(),Ss()}if(2&e){const e=t.$implicit,n=Bs(3);Ui(2),ca(e.type===n.NodeType.Folder?"folder":"note"),Ui(2),ca(e.name),Ui(2),ca(e.path)}}function XA(e,t){if(1&e&&(Es(0,"mat-list",20),vs(1,WA,7,3,"mat-list-item",21),Ss()),2&e){const e=Bs(2);Ui(1),Cs("ngForOf",e.searchResults)}}function GA(e,t){1&e&&(Es(0,"div"),la(1," No results "),Ss())}function qA(e,t){if(1&e){const e=ks();Es(0,"div",13),Es(1,"mat-form-field",14),Es(2,"mat-icon",15),la(3,"search"),Ss(),Es(4,"input",16,17),Ds("ngModelChange",function(t){return Rt(e),Bs().searchInputValue=t}),Ss(),Ss(),vs(6,XA,2,1,"mat-list",18),vs(7,GA,2,0,"div",19),Ss()}if(2&e){const e=bs(5),t=Bs();Ui(4),Cs("placeholder","Search")("ngModel",t.searchInputValue),Ui(2),Cs("ngIf",e.value),Ui(1),Cs("ngIf",e.value&&!t.searchResults.length)}}function $A(e,t){1&e&&Ps(0,"img",32),2&e&&zs("src",Bs().$implicit.previewUrl,qr)}function YA(e,t){1&e&&Ps(0,"div",33)}const KA=function(e){return{"background-highlight":e}};function QA(e,t){if(1&e){const e=ks();Es(0,"mat-tree-node",29),Ds("click",function(){Rt(e);const n=t.$implicit;return Bs(2).selectNode(n)})("keyup.enter",function(){Rt(e);const n=t.$implicit;return Bs(2).selectNode(n)}),vs(1,$A,1,1,"img",30),vs(2,YA,1,0,"div",31),Es(3,"label"),la(4),Ss(),Ss()}if(2&e){const e=t.$implicit,n=Bs(2);Cs("matTreeNodePaddingIndent",n.nodeIndent)("ngClass",Dl(5,KA,n.activeNode===e)),Ui(1),Cs("ngIf",e.previewUrl),Ui(1),Cs("ngIf",!e.previewUrl),Ui(2),ca(e.name)}}function ZA(e,t){if(1&e){const e=ks();Es(0,"mat-tree-node",34,35),Ps(2,"button",36),Es(3,"mat-form-field"),Es(4,"input",37,38),Ds("keyup.enter",function(){Rt(e);const t=bs(5);return Bs(2).create(t.value)}),Ss(),Ss(),Ss()}2&e&&Cs("matTreeNodePaddingIndent",Bs(2).nodeIndent)}function JA(e,t){if(1&e){const e=ks();Es(0,"mat-tree-node",34,39),Ps(2,"button",36),Es(3,"mat-form-field"),Es(4,"input",40,38),Ds("keyup.enter",function(){Rt(e);const t=bs(5);return Bs(2).update(t.value)}),Ss(),Ss(),Ss()}if(2&e){const e=t.$implicit;Cs("matTreeNodePaddingIndent",Bs(2).nodeIndent),Ui(4),zs("value",e.name)}}function eM(e,t){1&e&&Ps(0,"mat-spinner",45),2&e&&Cs("diameter",30)}function tM(e,t){if(1&e){const e=ks();Es(0,"mat-tree-node",41),Ds("click",function(){Rt(e);const n=t.$implicit;return Bs(2).loadChilds(n)})("keyup.enter",function(){Rt(e);const n=t.$implicit,r=Bs(2);return r.treeControl.toggle(n),r.loadChilds(n)}),Ps(1,"div",42),Ps(2,"div",43),Es(3,"label"),la(4),Ss(),vs(5,eM,1,1,"mat-spinner",44),Ss()}if(2&e){const e=t.$implicit,n=Bs(2);Cs("matTreeNodePaddingIndent",n.nodeIndent)("ngClass",Dl(6,KA,n.activeNode===e)),Ui(1),Qs("expanded",n.treeControl.isExpanded(e)),Ui(3),ca(e.name),Ui(1),Cs("ngIf",e.loading)}}function nM(e,t){if(1&e&&(Es(0,"mat-tree",25),vs(1,QA,5,7,"mat-tree-node",26),vs(2,ZA,6,1,"mat-tree-node",27),vs(3,JA,6,2,"mat-tree-node",27),vs(4,tM,6,8,"mat-tree-node",28),Ss()),2&e){const e=Bs();Cs("dataSource",e.dataSource)("treeControl",e.treeControl),Ui(2),Cs("matTreeNodeDefWhen",e.helper.isNewNode),Ui(1),Cs("matTreeNodeDefWhen",e.helper.isEditing),Ui(1),Cs("matTreeNodeDefWhen",e.helper.hasChild)}}function rM(e,t){1&e&&Ps(0,"img",4),2&e&&Cs("src",Bs().selectedNode.previewUrl,qr)}const iM=function(e){return{disabled:e}};function oM(e,t){1&e&&Os(0)}function sM(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit;Ui(1),ca(e.message)}}function aM(e,t){if(1&e&&(Ts(0,8),vs(1,sM,2,1,"mat-error",9),Is()),2&e){const e=t.$implicit,n=Bs(2);Ui(1),Cs("ngIf",n.form.hasError(e.name)&&e.message)}}function lM(e,t){if(1&e){const e=ks();Es(0,"button",13),Ds("click",function(t){return Rt(e),Bs(3).onCancel(t)}),la(1),Ss()}if(2&e){const e=Bs(3);Cs("disabled",e.disabled||e.saving),Ui(1),ua(" ",e.configuration.cancelText," ")}}function cM(e,t){if(1&e&&(Es(0,"div",10),vs(1,lM,2,2,"button",11),Es(2,"button",12),la(3),Ss(),Ss()),2&e){const e=Bs(2);Ui(1),Cs("ngIf",e.configuration.showCancel),Ui(1),Cs("disabled",!e.form.valid||e.disabled||e.saving),Ui(1),ua(" ",e.configuration.saveText," ")}}const uM=function(e){return{fields:e}};function hM(e,t){if(1&e){const e=ks();Es(0,"form",4),Ds("submit",function(t){return Rt(e),Bs().onSubmit(t)}),vs(1,oM,1,0,"ng-container",5),vs(2,aM,2,1,"ng-container",6),Hs(3),vs(4,cM,4,3,"div",7),Ss()}if(2&e){const e=Bs(),t=bs(3);Cs("formGroup",e.form),Ui(1),Cs("ngTemplateOutlet",t)("ngTemplateOutletContext",Dl(5,uM,e.fields)),Ui(1),Cs("ngForOf",e.formValidators),Ui(2),Cs("ngIf",e.configuration.showButtons)}}function dM(e,t){1&e&&(Es(0,"div",14),Ps(1,"mat-spinner",15),Ss())}function pM(e,t){if(1&e&&(Es(0,"div",22),la(1),Ss()),2&e){const e=Bs(2).$implicit;Ui(1),ca(e.label)}}function fM(e,t){1&e&&Os(0)}const mM=function(e,t,n){return{horizontal:e,vertical:t,"with-label":n}};function gM(e,t){if(1&e&&(Es(0,"div",20),vs(1,pM,2,1,"div",21),vs(2,fM,1,0,"ng-container",5),Ss()),2&e){const e=Bs().$implicit;Bs(2);const t=bs(3);Cs("ngClass",(4,n=mM,r="horizontal"===e.orientation,i="vertical"===e.orientation,o=e.label,jl(Ot(),jt(),4,n,r,i,o,undefined))),Ui(1),Cs("ngIf",e.label),Ui(1),Cs("ngTemplateOutlet",t)("ngTemplateOutletContext",Dl(8,uM,e.fields))}var n,r,i,o}function yM(e,t){1&e&&Os(0)}const _M=function(e){return{field:e}};function vM(e,t){if(1&e){const e=ks();Es(0,"div",23),Ds("mouseenter",function(){Rt(e);const t=Bs().$implicit;return Bs(2).mouseEnter.emit(t)})("mouseleave",function(){Rt(e);const t=Bs().$implicit;return Bs(2).mouseLeave.emit(t)}),vs(1,yM,1,0,"ng-container",5),Ss()}if(2&e){const e=Bs().$implicit,t=Bs(2),n=bs(5);Qs("invalid",t.form.get(e.name).invalid),Ui(1),Cs("ngTemplateOutlet",n)("ngTemplateOutletContext",Dl(4,_M,e))}}function bM(e,t){if(1&e&&(Ts(0),Ts(1,17),vs(2,gM,3,10,"div",18),vs(3,vM,2,6,"div",19),Is(),Is()),2&e){const e=t.$implicit;Ui(1),Cs("ngSwitch",e.type),Ui(1),Cs("ngSwitchCase","wrap")}}function wM(e,t){1&e&&vs(0,bM,4,2,"ng-container",16),2&e&&Cs("ngForOf",t.fields)}function CM(e,t){1&e&&Ps(0,"span",30)}function xM(e,t){if(1&e&&(Es(0,"div",28),la(1),vs(2,CM,1,0,"span",29),Ss()),2&e){const e=Bs().field;Ui(1),ua(" ",e.label," "),Ui(1),Cs("ngIf",e.isModified)}}function EM(e,t){if(1&e&&(Es(0,"div",31),la(1),Ss()),2&e){const e=Bs().field;Ui(1),ca(e.description)}}function SM(e,t){if(1&e){const e=ks();Es(0,"button",32),Ds("click",function(){Rt(e);const t=Bs().field;return Bs().form.get(t.name).setValue(null)}),la(1),Ss()}if(2&e){const e=Bs().field,t=Bs();Cs("disabled",t.form.get(e.name).disabled),ys("aria-label","Clear"),Ui(1),ua(" ",t.configuration.clearText," ")}}function PM(e,t){if(1&e){const e=ks();vs(0,xM,3,2,"div",24),vs(1,EM,2,1,"div",25),Ts(2,26),Ds("focus",function(t){return Rt(e),Bs().focus.emit(t)})("blur",function(t){return Rt(e),Bs().blur.emit(t)}),Is(),vs(3,SM,2,3,"button",27)}if(2&e){const e=t.field,n=Bs();Cs("ngIf",e.label&&"checkbox"!==e.type),Ui(1),Cs("ngIf",e.description),Ui(1),Cs("field",e)("group",n.form)("allComponents",n.formComponents),Ui(1),Cs("ngIf",e.allowClear&&n.form.get(e.name).value)}}const TM=["*"],IM=["formInput"],OM=["showButton"];function kM(e,t){if(1&e){const e=ks();Ts(0),Es(1,"button",6),Ds("mousedown",function(){return Rt(e),Bs().startIncrease()})("mouseup",function(){return Rt(e),Bs().stop()})("mouseleave",function(){return Rt(e),Bs().stop()}),Ps(2,"div",7),Ss(),Es(3,"button",8),Ds("mousedown",function(){return Rt(e),Bs().startDecrease()})("mouseup",function(){return Rt(e),Bs().stop()})("mouseleave",function(){return Rt(e),Bs().stop()}),Ps(4,"div",7),Ss(),Is()}}function RM(e,t){if(1&e){const e=ks();Ts(0),Es(1,"button",9,10),Ds("click",function(){return Rt(e),Bs().showPasswordText()}),Ss(),Is()}}function AM(e,t){if(1&e){const e=ks();Ts(0),Es(1,"button",11),Ds("click",function(){return Rt(e),Bs().copyValueToClipboard()}),la(2," Copy "),Ss(),Is()}}function MM(e,t){if(1&e&&(Es(0,"mat-hint",12),la(1),Ss()),2&e){const e=Bs();Ui(1),ha(" ",e.field.maxLength-(null==e.formControl.value?null:e.formControl.value.length)||0," ",e.field.maxLengthHint," ")}}function DM(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit,t=Bs();Ui(1),ca(e.message||t.formControl.getError(e.name))}}function FM(e,t){if(1&e&&(Ts(0,13),vs(1,DM,2,1,"mat-error",3),Is()),2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function LM(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit;Ui(1),ca(e.message)}}function BM(e,t){if(1&e&&(Ts(0,13),vs(1,LM,2,1,"mat-error",3),Is()),2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function NM(e,t){if(1&e&&(Es(0,"mat-hint",5),la(1),Ss()),2&e){const e=Bs();Ui(1),ha("",(null==e.formControl.value?null:e.formControl.value.length)||0,"/",e.field.maxLength,"")}}function jM(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit,t=Bs();Ui(1),ca(e.message||t.formControl.getError(e.name))}}function HM(e,t){if(1&e&&(Ts(0,6),vs(1,jM,2,1,"mat-error",4),Is()),2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function zM(e,t){1&e&&(Es(0,"mat-error"),la(1,"Passwords mismathed!"),Ss())}const VM=["selectedImage"];function UM(e,t){if(1&e){const e=ks();Es(0,"img",7,8),Ds("load",function(t){return Rt(e),Bs(2).showImage(t.target)}),Hl(2,"async"),Hl(3,"image"),Ss()}if(2&e){const e=Bs(2);Cs("src",zl(2,1,Vl(3,3,e.selectedOption.imageUrl,e.selectedOption.headers)),qr)}}function WM(e,t){1&e&&(Es(0,"mat-option"),la(1),Ss()),2&e&&(Ui(1),ca("None"))}function XM(e,t){if(1&e){const e=ks();Es(0,"img",7),Ds("load",function(t){return Rt(e),Bs(3).showImage(t.target)}),Hl(1,"async"),Hl(2,"image"),Ss()}if(2&e){const e=Bs().$implicit;Cs("src",zl(1,1,Vl(2,3,e.value.imageUrl,e.value.headers)),qr)}}function GM(e,t){if(1&e&&(Es(0,"mat-option",9),vs(1,XM,3,6,"img",4),la(2),Ss()),2&e){const e=t.$implicit;Cs("value",Bs(2).getItemKey(e.key))("disabled",e.value.disabled),Ui(1),Cs("ngIf",e.value.imageUrl),Ui(1),ua(" ",e.value.label," ")}}function qM(e,t){if(1&e){const e=ks();Es(0,"mat-select",3),Ds("selectionChange",function(){return Rt(e),Bs().hideImage()})("opened",function(t){Rt(e);const n=Bs();return n.focus.next({event:t,field:n.field})})("closed",function(t){Rt(e);const n=Bs();return n.blur.next({event:t,field:n.field})}),Es(1,"mat-select-trigger"),vs(2,UM,4,6,"img",4),la(3),Ss(),vs(4,WM,2,1,"mat-option",5),vs(5,GM,3,4,"mat-option",6),Hl(6,"keyvalue"),Ss()}if(2&e){const e=Bs();Cs("placeholder",e.field.placeholder)("formControlName",e.field.name)("panelClass",e.field.imageType?"image-"+e.field.imageType:""),Ui(2),Cs("ngIf",null==e.selectedOption?null:e.selectedOption.imageUrl),Ui(1),ua(" ",null==e.selectedOption?null:e.selectedOption.label," "),Ui(1),Cs("ngIf",e.field.allowUnselect),Ui(1),Cs("ngForOf",Vl(6,7,e.options,e.sort))}}function $M(e,t){if(1&e){const e=ks();Es(0,"img",7),Ds("load",function(t){return Rt(e),Bs(2).showImage(t.target)}),Hl(1,"async"),Hl(2,"image"),Ss()}if(2&e){const e=Bs(2);Cs("src",zl(1,1,Vl(2,3,e.selectedOption.imageUrl,e.selectedOption.headers)),qr)}}function YM(e,t){1&e&&(Es(0,"mat-option"),la(1),Ss()),2&e&&(Ui(1),ca("None"))}function KM(e,t){if(1&e){const e=ks();Es(0,"img",7),Ds("load",function(t){return Rt(e),Bs(4).showImage(t.target)}),Hl(1,"async"),Hl(2,"image"),Ss()}if(2&e){const e=Bs().$implicit;Cs("src",zl(1,1,Vl(2,3,e.value.imageUrl,e.value.headers)),qr)}}function QM(e,t){if(1&e&&(Es(0,"mat-option",9),vs(1,KM,3,6,"img",4),la(2),Ss()),2&e){const e=t.$implicit;Cs("value",Bs(3).getItemKey(e.key))("disabled",e.value.disabled),Ui(1),Cs("ngIf",e.value.imageUrl),Ui(1),ua(" ",e.value.label," ")}}function ZM(e,t){if(1&e&&(Es(0,"mat-optgroup",11),vs(1,QM,3,4,"mat-option",6),Hl(2,"keyvalue"),Ss()),2&e){const e=t.$implicit,n=Bs(2);Cs("label",e.key)("disabled",e.value.disabled),Ui(1),Cs("ngForOf",Vl(2,3,e.value.options,n.sort))}}function JM(e,t){if(1&e){const e=ks();Es(0,"mat-select",3),Ds("selectionChange",function(){return Rt(e),Bs().hideImage()})("opened",function(t){Rt(e);const n=Bs();return n.focus.next({event:t,field:n.field})})("closed",function(t){Rt(e);const n=Bs();return n.blur.next({event:t,field:n.field})}),Es(1,"mat-select-trigger"),vs(2,$M,3,6,"img",4),la(3),Ss(),vs(4,YM,2,1,"mat-option",5),vs(5,ZM,3,6,"mat-optgroup",10),Hl(6,"keyvalue"),Ss()}if(2&e){const e=Bs();Cs("placeholder",e.field.placeholder)("formControlName",e.field.name)("panelClass",e.field.imageType?"image-"+e.field.imageType:""),Ui(2),Cs("ngIf",null==e.selectedOption?null:e.selectedOption.imageUrl),Ui(1),ua(" ",null==e.selectedOption?null:e.selectedOption.label," "),Ui(1),Cs("ngIf",e.field.allowUnselect),Ui(1),Cs("ngForOf",zl(6,7,e.options))}}function eD(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit,t=Bs();Ui(1),ca(e.message||t.formControl.getError(e.name))}}function tD(e,t){if(1&e&&(Ts(0,12),vs(1,eD,2,1,"mat-error",5),Is()),2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function nD(e,t){if(1&e&&(Es(0,"span"),la(1),Ss()),2&e){const e=Bs(2);Ui(1),ha(" (+",(null==e.formControl.value?null:e.formControl.value.length)-1," ",2===(null==e.formControl.value?null:e.formControl.value.length)?"other":"others",") ")}}function rD(e,t){if(1&e&&(Ps(0,"img",8),Hl(1,"async"),Hl(2,"image")),2&e){const e=Bs().$implicit;Cs("src",zl(1,1,Vl(2,3,e.value.imageUrl,e.value.headers)),qr)}}function iD(e,t){if(1&e&&(Es(0,"mat-option",6),vs(1,rD,3,6,"img",7),la(2),Ss()),2&e){const e=t.$implicit;Cs("value",Bs(2).getItemKey(e.key))("disabled",e.value.disabled),Ui(1),Cs("ngIf",e.value.imageUrl),Ui(1),ua(" ",e.value.label," ")}}function oD(e,t){if(1&e){const e=ks();Es(0,"mat-select",3),Ds("opened",function(t){Rt(e);const n=Bs();return n.focus.next({event:t,field:n.field})})("closed",function(t){Rt(e);const n=Bs();return n.blur.next({event:t,field:n.field})}),Es(1,"mat-select-trigger"),la(2),vs(3,nD,2,2,"span",4),Ss(),vs(4,iD,3,4,"mat-option",5),Hl(5,"keyvalue"),Ss()}if(2&e){const e=Bs();Cs("placeholder",e.field.placeholder)("formControlName",e.field.name),Ui(2),ua(" ",e.selectedValueLabel," "),Ui(1),Cs("ngIf",(null==e.formControl.value?null:e.formControl.value.length)>1),Ui(1),Cs("ngForOf",zl(5,5,e.options))}}function sD(e,t){if(1&e&&(Es(0,"span"),la(1),Ss()),2&e){const e=Bs(2);Ui(1),ha(" (+",(null==e.formControl.value?null:e.formControl.value.length)-1," ",2===(null==e.formControl.value?null:e.formControl.value.length)?"other":"others",") ")}}function aD(e,t){if(1&e&&(Ps(0,"img",8),Hl(1,"async"),Hl(2,"image")),2&e){const e=Bs().$implicit;Cs("src",zl(1,1,Vl(2,3,e.value.imageUrl,e.value.headers)),qr)}}function lD(e,t){if(1&e&&(Es(0,"mat-option",6),vs(1,aD,3,6,"img",7),la(2),Ss()),2&e){const e=t.$implicit;Cs("value",Bs(3).getItemKey(e.key))("disabled",e.value.disabled),Ui(1),Cs("ngIf",e.value.imageUrl),Ui(1),ua(" ",e.value.label," ")}}function cD(e,t){if(1&e&&(Es(0,"mat-optgroup",10),vs(1,lD,3,4,"mat-option",5),Hl(2,"keyvalue"),Ss()),2&e){const e=t.$implicit;Cs("label",e.key)("disabled",e.value.disabled),Ui(1),Cs("ngForOf",zl(2,3,e.value.options))}}function uD(e,t){if(1&e){const e=ks();Es(0,"mat-select",3),Ds("opened",function(t){Rt(e);const n=Bs();return n.focus.next({event:t,field:n.field})})("closed",function(t){Rt(e);const n=Bs();return n.blur.next({event:t,field:n.field})}),Es(1,"mat-select-trigger"),la(2),vs(3,sD,2,2,"span",4),Ss(),vs(4,cD,3,5,"mat-optgroup",9),Hl(5,"keyvalue"),Ss()}if(2&e){const e=Bs();Cs("placeholder",e.field.placeholder)("formControlName",e.field.name),Ui(2),ua(" ",e.selectedValueLabel," "),Ui(1),Cs("ngIf",(null==e.formControl.value?null:e.formControl.value.length)>1),Ui(1),Cs("ngForOf",zl(5,5,e.options))}}function hD(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit,t=Bs();Ui(1),ca(e.message||t.formControl.getError(e.name))}}function dD(e,t){if(1&e&&(Ts(0,11),vs(1,hD,2,1,"mat-error",4),Is()),2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function pD(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit,t=Bs();Ui(1),ca(e.message||t.formControl.getError(e.name))}}function fD(e,t){if(1&e&&(Ts(0,4),vs(1,pD,2,1,"mat-error",5),Is()),2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function mD(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit;Ui(1),ca(e.message)}}function gD(e,t){if(1&e&&(Ts(0,4),vs(1,mD,2,1,"mat-error",5),Is()),2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function yD(e,t){if(1&e&&Os(0,4),2&e){const e=t.$implicit,n=Bs();Cs("field",e)("group",n.formControl)}}function _D(e,t){if(1&e&&(Ts(0,5),Es(1,"mat-error"),la(2),Ss(),Is()),2&e){const e=t.$implicit;Ui(2),ca(e.key)}}function vD(e,t){if(1&e){const e=ks();Es(0,"mat-radio-button",4),Ds("focus",function(t){Rt(e);const n=Bs();return n.focus.next({event:t,field:n.field})})("blur",function(t){Rt(e);const n=Bs();return n.blur.next({event:t,field:n.field})}),la(1),Ss()}if(2&e){const e=t.$implicit;Cs("value",Bs().getItemKey(e.key)),Ui(1),ua(" ",e.value.label," ")}}function bD(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit,t=Bs(2);Ui(1),ca(e.message||t.formControl.getError(e.name))}}function wD(e,t){if(1&e&&(Ts(0,6),vs(1,bD,2,1,"mat-error",3),Is()),2&e){const e=t.$implicit,n=Bs(2);Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function CD(e,t){if(1&e&&(Ts(0),vs(1,wD,2,1,"ng-container",5),Is()),2&e){const e=Bs();Ui(1),Cs("ngForOf",e.field.validations)}}function xD(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit,t=Bs(2);Ui(1),ua(" ",e.message||t.formControl.getError(e.name),"")}}function ED(e,t){if(1&e&&(Ts(0),vs(1,xD,2,1,"mat-error",8),Is()),2&e){const e=t.$implicit,n=Bs(2);Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function SD(e,t){if(1&e&&(Ts(0,6),vs(1,ED,2,1,"ng-container",7),Is()),2&e){const e=Bs();Ui(1),Cs("ngForOf",e.field.validations)}}function PD(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit,t=Bs();Ui(1),ca(e.message||t.formControl.getError(e.name))}}function TD(e,t){if(1&e&&(Ts(0,4),vs(1,PD,2,1,"mat-error",5),Is()),2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function ID(e,t){if(1&e&&(Es(0,"mat-error"),la(1),Ss()),2&e){const e=Bs().$implicit;Ui(1),ca(e.message)}}function OD(e,t){if(1&e&&(Ts(0,4),vs(1,ID,2,1,"mat-error",5),Is()),2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngIf",n.formControl.hasError(e.name))}}function kD(e,t){1&e&&(Es(0,"div",13),Ps(1,"mat-spinner",14),Ss()),2&e&&(Ui(1),Cs("diameter",40))}function RD(e,t){if(1&e){const e=ks();Es(0,"au-storage-tree",15),Ds("choose",function(t){return Rt(e),Bs(2).changeSelectMedia(t)})("finishChoose",function(t){return Rt(e),Bs(2).changeSelectMediaFinish(t)}),Ss()}2&e&&Cs("items",Bs(2).nodes)}function AD(e,t){if(1&e&&(Es(0,"mat-tab",9),Hl(1,"translate"),Es(2,"div",10),vs(3,kD,2,1,"div",11),vs(4,RD,1,1,"au-storage-tree",12),Ss(),Ss()),2&e){const e=Bs();Cs("label",zl(1,3,"MEDIA_LIBRARY")),Ui(3),Cs("ngIf",!e.nodes),Ui(1),Cs("ngIf",e.nodes)}}function MD(e,t){if(1&e){const e=ks();Es(0,"au-file",23),Ds("selectFile",function(){Rt(e);const t=Bs().index;return Bs(3).changeSelectFile(t)})("cancel",function(){Rt(e);const t=Bs().index;return Bs(3).cancelUploadFile(t)}),Ss()}2&e&&Cs("file",Bs().$implicit)}function DD(e,t){if(1&e&&(Ts(0),vs(1,MD,1,1,"au-file",22),Is()),2&e){const e=Bs(3);Ui(1),Cs("ngIf",e.files.length)}}function FD(e,t){if(1&e&&(Es(0,"div",20),vs(1,DD,2,1,"ng-container",21),Ss()),2&e){const e=Bs(2);Ui(1),Cs("ngForOf",e.files)}}function LD(e,t){if(1&e){const e=ks();Es(0,"mat-tab",9),Hl(1,"translate"),Es(2,"div",16),Es(3,"div",17),Es(4,"au-dropzone",18),Ds("files",function(t){return Rt(e),Bs().uploadFile(t)}),Ss(),Ss(),vs(5,FD,2,1,"div",19),Ss(),Ss()}if(2&e){const e=Bs();Cs("label",zl(1,6,"UPLOAD_FILE")),Ui(4),Cs("multiply",e.multiply)("minimize",e.files.length)("acceptFiles",e.acceptFiles)("maxFileSize",e.maxFileSize),Ui(1),Cs("ngIf",e.files.length)}}const BD=function(e){return{"hide-tab":e}};function ND(e,t){if(1&e&&(Es(0,"span",13),la(1),Hl(2,"percent"),Ss()),2&e){const e=Bs();Ui(1),ca(zl(2,1,e.file.progress))}}function jD(e,t){if(1&e&&(Es(0,"div"),Ps(1,"mat-progress-bar",14),Ss()),2&e){const e=Bs();Ui(1),Cs("value",100*e.file.progress)}}function HD(e,t){if(1&e&&(Es(0,"div",15),la(1),Hl(2,"fileSize"),Ss()),2&e){const e=Bs();Ui(1),ua(" ",zl(2,1,e.file.file.size)," ")}}function zD(e,t){if(1&e&&(Es(0,"div",16),la(1),Hl(2,"translate"),Ss()),2&e){const e=Bs();Ui(1),ua(" ",zl(2,1,e.file.errorText)," ")}}function VD(e,t){if(1&e){const e=ks();Es(0,"button",17),Ds("click",function(t){return Rt(e),Bs().cancelUpload(t)}),Es(1,"mat-icon"),la(2,"close"),Ss(),Ss()}}function UD(e,t){1&e&&Ps(0,"div",18)}const WD=function(e){return{selected:e}},XD=function(e){return{border:e}};function GD(e,t){if(1&e){const e=ks();Es(0,"cdk-tree-node",3),Es(1,"div",4),Ds("click",function(){Rt(e);const n=t.$implicit;return Bs().selectNode(n)})("dblclick",function(){Rt(e);const n=t.$implicit;return Bs().finishSelectNode(n)}),Ps(2,"button",5),Ps(3,"div",6),Es(4,"span",7),la(5),Ss(),Ss(),Ss()}if(2&e){const e=t.$implicit,n=Bs();Ks("display",n.shouldRender(e)?"flex":"none"),Cs("cdkTreeNodePaddingIndent","30px")("ngClass",Dl(14,WD,e===n.activeNode)),Ui(3),Ks("background",e.previewCSS)("background-size",e.previewCSS?"contain":"")("background-repeat",e.previewCSS?"no-repeat":"")("background-position",e.previewCSS?"center":""),Cs("ngClass",Dl(16,XD,e.previewCSS)),Ui(2),ca(e.name)}}function qD(e,t){if(1&e&&(Es(0,"cdk-tree-node",8),Es(1,"div",9),Ds("click",function(){const e=t.$implicit;return e.isExpanded=!e.isExpanded}),Es(2,"button",10),Ds("click",function(){const e=t.$implicit;return e.isExpanded=!e.isExpanded}),Es(3,"mat-icon",11),la(4),Ss(),Ss(),Ps(5,"div",12),Es(6,"span",7),la(7),Ss(),Ss(),Ss()),2&e){const e=t.$implicit,n=Bs();Ks("display",n.shouldRender(e)?"flex":"none"),Cs("cdkTreeNodePaddingIndent","20px"),Ui(2),Ks("visibility",e.expandable?"visible":"hidden"),ys("aria-label","Toggle "+e.name),Ui(2),ua(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),Ui(3),ca(e.name)}}const $D=function(e,t){return{active:e,minimize:t}};function YD(e,t){1&e&&(Ps(0,"img",4),Hl(1,"sanitize"),Hl(2,"async")),2&e&&Cs("src",zl(1,1,zl(2,3,Bs().selected.preview)),qr)}let KD=(()=>{class e{}return e.TREE_NODE_INDENT=20,e.TREE_PANEL_MAX_HEIGHT=300,e.TREE_SEARCH_DEBOUCE_TIME=500,e.EXPLORER_PANEL_MAX_HEIGHT=628,e})();class QD{constructor(e){this.children=[],Object.assign(this,e)}}var ZD=function(e){return e[e.Folder=0]="Folder",e[e.File=1]="File",e}({});class JD{constructor(e){this.childrenChange=new LC([]),Object.assign(this,e)}get children(){return this.childrenChange.value}get children$(){return this.childrenChange.asObservable()}}class eF{}let tF=(()=>{let e=class{constructor(){this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.getLevel=e=>e.level,this.getChildren=e=>e.children$,this.hasChild=(e,t)=>t.expandable,this.isNewNode=(e,t)=>t.creating,this.isEditing=(e,t)=>t.editing,this.isExpandable=e=>e.expandable,this.transformer=(e,t)=>{const n=this.nestedNodeMap.get(e),r=n&&n.name===e.name?n:new eF;return r.id=e.id,r.name=e.name,r.level=t,r.type=e.type,r.previewUrl=e.previewUrl,r.expandable=e.type===ZD.Folder,r.editing=e.editing,r.creating=e.creating,r.loading=e.loading,this.flatNodeMap.set(r,e),this.nestedNodeMap.set(e,r),r}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),nF=(()=>{let e=class{constructor(){this.idCounter=0,this.treeNodeMap=new Map,this.nestedNodeMap=new Map,this.toNestedNode=(e,t)=>{const n=new JD({id:e.id||this.idCounter++,name:e.name,type:e.type,parentId:e.parentId||t?t.id:null,previewUrl:e.previewUrl,path:t?t.path+"/"+e.name:e.name});if(e.children){const t=e.children.map(e=>this.toNestedNode(e,n));n.childrenChange.next(t)}return this.treeNodeMap.set(e,n),this.nestedNodeMap.set(n,e),n}}transform(e){return this.treeNodeMap.clear(),this.nestedNodeMap.clear(),this.idCounter=0,e.map(e=>this.toNestedNode(e))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),rF=(()=>{let e=class{static findNode(e,t){if(void 0===e)return null;if("number"==typeof e||"string"==typeof e||null===e){const t=e;e=e=>e.id===t}for(const n of t){if(e(n))return n;if(n.children&&n.children.length){const t=this.findNode(e,n.children);if(null!==t)return t}}return null}static removeNode(e,t){if("number"==typeof e||"string"==typeof e){const t=e;e=e=>e.id===t}const n=t.findIndex(e);if(n>-1)return t.splice(n,1);for(const r of t)if(r.children&&r.children.length){const t=this.removeNode(e,r.children);if(t)return t}}static addChild(e,t){const n=this.findNode(e.parentId,t);null!==n&&(n.children.push(e),n.childrenChange.next(n.children))}static filterNodesByName(e,t){return e?t.map(t=>this.findAllByName(e,t)).reduce((e,t)=>e.concat(t),[]):t}static findAllByName(e,t){const n=[];if(t.name.indexOf(e)>-1&&n.push(t),t.children)for(const r of t.children)n.push(...this.findAllByName(e,r));return n}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),iF=(()=>{let e=class{constructor(e){this.nodeTransformer=e,this.initialized=!1,this.loading=!1,this.dataChange=new LC([])}initialize(e,t,n,r,i){if(Object(hx.isNil)(e))this.onlineMode(t,n,r,i),this.loading=!0,this.loadNodesFunction().subscribe(e=>{const t=this.nodeTransformer.transform(e);this.dataChange.next(t),this.loading=!1,this.initialized=!0});else{const t=this.nodeTransformer.transform(e);this.offlineMode(t),this.dataChange.next(t),this.initialized=!0}}startNodeCreating(e,t){const n=new JD({parentId:t,type:e,creating:!0});n.parentId?rF.addChild(n,this.dataChange.value):this.dataChange.value.push(n),this.refresh()}stopNodeCreating(){rF.removeNode(e=>e.creating,this.dataChange.value),this.refresh()}startNodeEditing(e){rF.findNode(e,this.dataChange.value).editing=!0,this.refresh(!0)}stopNodeEditing(){const e=rF.findNode(e=>e.editing,this.dataChange.value);e&&(e.editing=!1,this.refresh(!0))}createNode(e){this.loading=!0;const t=rF.findNode(e=>e.creating,this.dataChange.value);this.createFunction(e,t.type,t.parentId).pipe(hw(()=>this.loading=!1)).subscribe(e=>{const n=t.parentId?rF.findNode(t.parentId,this.dataChange.value):null,r=this.nodeTransformer.toNestedNode(e,n);rF.removeNode(e=>e.creating,this.dataChange.value),r.parentId?rF.addChild(r,this.dataChange.value):this.dataChange.value.push(r),this.refresh()})}updateNode(e){this.loading=!0;const t=rF.findNode(e=>e.editing,this.dataChange.value);this.updateFunction(t.id,e).pipe(hw(()=>this.loading=!1)).subscribe(e=>{t.editing=!1,t.name=e.name,this.refresh()})}deleteNode(e){this.loading=!0,this.deleteFunction(e).pipe(hw(()=>this.loading=!1)).subscribe(()=>{rF.removeNode(t=>t.id===e,this.dataChange.value),this.refresh()})}loadChildren(e){e.loading=!0,this.refresh();const t=this.getTreeNode(e);this.loadNodesFunction(t).pipe(P(t=>t.map(t=>this.nodeTransformer.toNestedNode(t,e))),hw(()=>{e.loading=!1,this.refresh()})).subscribe(t=>{e.childrenChange.next(t),this.refresh()})}refresh(e=!1){if(e){const e=this.dataChange.value;this.dataChange.next([]),this.dataChange.next(e)}else this.dataChange.next(this.dataChange.value)}getTreeNode(e){return this.nodeTransformer.nestedNodeMap.get(e)}getNestedNode(e){return this.nodeTransformer.treeNodeMap.get(e)}onlineMode(e,t,n,r){this.createFunction=e,this.updateFunction=t,this.deleteFunction=n,this.loadNodesFunction=r}offlineMode(e){this.createFunction=(e,t,n)=>ld(new QD({name:e,type:t,parentId:n})),this.updateFunction=(e,t)=>ld(new QD({id:e,name:t})),this.deleteFunction=e=>ld(),this.loadNodesFunction=e=>ld(e&&e.children||[])}};return e.\u0275fac=function(t){return new(t||e)(sr(nF))},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e=AC([DC("design:paramtypes",[nF])],e),e})();class oF extends BC{expandParents(e){const t=this.getParent(e);this.expand(t),t&&this.getLevel(t)>0&&this.expandParents(t)}getParent(e){const t=this.getLevel(e);if(t<1)return null;for(let n=this.dataNodes.indexOf(e)-1;n>=0;n--){const e=this.dataNodes[n];if(this.getLevel(e)<t)return e}}}var sF;let aF=(()=>{let e=sF=class{constructor(e,t,n){this.store=e,this.helper=t,this.scroll=n,this.NodeType=ZD,this.nodeIndent=KD.TREE_NODE_INDENT,this.showControls=!0,this.showSearch=!1,this.allowSelectFiles=!0,this.allowSelectFolders=!0,this.selectOnlyLeafs=!1,this.openRootFolder=!1,this.selectionChange=new Xl,this.searchInputValue="",this.searchResults=[],this.propagateChange=()=>{},this.propagateTouch=()=>{},this.treeFlattener=new ax(t.transformer,t.getLevel,t.isExpandable,t.getChildren),this.treeControl=new oF(t.getLevel,t.isExpandable),this.dataSource=new lx(this.treeControl,this.treeFlattener)}ngOnInit(){this.store.dataChange.asObservable().subscribe(e=>{this.dataSource.data=e}),this.store.initialize(this.nodes,this.createNodeFunction,this.updateNodeFunction,this.deleteNodeFunction,this.loadNodesFunction),this.openRootFolder&&this.treeControl.expand(this.treeControl.dataNodes[0])}ngAfterViewInit(){this.searchInput&&Py(this.searchInput.nativeElement,"input").pipe(vd(KD.TREE_SEARCH_DEBOUCE_TIME),P(e=>e.target.value)).subscribe(e=>{this.searchInputValue=e,this.searchResults=rF.filterNodesByName(this.searchInputValue,this.dataSource.data)})}ngOnChanges(e){}clickout(e){(!this.newNodeRef||!this.newNodeRef.nativeElement.contains(e.target))&&this.store.stopNodeCreating(),(!this.editNodeRef||!this.editNodeRef.nativeElement.contains(e.target))&&this.store.stopNodeEditing()}selectNode(e,t=!1){if(e.type===ZD.Folder&&!this.allowSelectFolders)return;if(e.type===ZD.File&&!this.allowSelectFiles)return;const n=this.helper.flatNodeMap.get(e),r=this.store.getTreeNode(n);n.children&&n.children.length&&this.selectOnlyLeafs||(this.activeNode=e,t||(this.selectionChange.emit(r),this.propagateChange(r),this.propagateTouch()))}loadChilds(e){if(this.selectNode(e),!this.treeControl.isExpanded(e))return;const t=this.helper.flatNodeMap.get(e);this.store.loadChildren(t)}startCreating(e,t){e.preventDefault(),e.stopPropagation();const n=this.helper.flatNodeMap.get(this.activeNode),r=n?n.type===ZD.Folder?n.id:n.parentId:null;this.treeControl.expand(this.activeNode),this.store.startNodeCreating(t,r)}create(e){this.store.createNode(e)}startEditing(e,t){e.preventDefault(),e.stopPropagation(),Object(hx.isNil)(t)||this.store.startNodeEditing(t.id)}update(e){this.store.updateNode(e)}delete(e){Object(hx.isNil)(e)||(this.activeNode=null,this.store.deleteNode(e.id))}selectSearchResult(e){this.searchInputValue="",this.searchResults=this.dataSource.data;const t=this.helper.nestedNodeMap.get(e);this.selectNode(t),this.treeControl.collapseAll(),this.treeControl.expandParents(t),this.treeControl.isExpandable(t)&&this.treeControl.expand(t)}writeValue(e){if(!e||!this.nodes)return;const t=rF.findNode(t=>Object(hx.isEqual)(e,t),this.nodes||[]);if(!t)return;const n=this.store.getNestedNode(t),r=this.helper.nestedNodeMap.get(n);r&&r!==this.activeNode&&(this.selectNode(r,!0),this.treeControl.expandParents(r))}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}setDisabledState(e){this.disabled=e}};return e.\u0275fac=function(t){return new(t||e)(ws(iF),ws(tF),ws(Ky))},e.\u0275cmp=Ue({type:e,selectors:[["au-tree"]],viewQuery:function(e,t){if(1&e&&(ic(NA,1),ic(jA,1),ic(HA,1)),2&e){let e;rc(e=sc())&&(t.searchInput=e.first),rc(e=sc())&&(t.newNodeRef=e.first),rc(e=sc())&&(t.editNodeRef=e.first)}},hostBindings:function(e,t){1&e&&Ds("click",function(e){return t.clickout(e)},!1,ei)},inputs:{nodeIndent:"nodeIndent",showControls:"showControls",showSearch:"showSearch",allowSelectFiles:"allowSelectFiles",allowSelectFolders:"allowSelectFolders",selectOnlyLeafs:"selectOnlyLeafs",openRootFolder:"openRootFolder",nodes:"nodes",createNodeFunction:"createNodeFunction",updateNodeFunction:"updateNodeFunction",deleteNodeFunction:"deleteNodeFunction",loadNodesFunction:"loadNodesFunction"},outputs:{selectionChange:"selectionChange"},features:[Ta([iF,tF,nF,{provide:rv,useExisting:oe(()=>sF),multi:!0}]),at],decls:5,vars:5,consts:[["class","configs-panel",4,"ngIf"],["class","main-loader-container",4,"ngIf"],["class","tree-empty-text",4,"ngIf"],["class","search-container",4,"ngIf"],[3,"dataSource","treeControl",4,"ngIf"],[1,"configs-panel"],["mat-button","",1,"bo-icon","bo-icon-folder-plus_24",3,"click"],["mat-button","",1,"bo-icon","bo-icon-file-plus_24",3,"click"],["mat-button","",1,"bo-icon","bo-icon-pen_24",3,"disabled","click"],["mat-button","",1,"bo-icon","bo-icon-trash_24",3,"disabled","click"],[1,"main-loader-container"],[1,"main-loader",3,"diameter"],[1,"tree-empty-text"],[1,"search-container"],["appearance","outline"],["matPrefix",""],["matInput","",3,"placeholder","ngModel","ngModelChange"],["searchInput",""],["class","search-result",4,"ngIf"],[4,"ngIf"],[1,"search-result"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["mat-list-icon",""],["mat-line",""],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","","tabindex","0",3,"matTreeNodePaddingIndent","ngClass","click","keyup.enter",4,"matTreeNodeDef"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","","matTreeNodeToggle","","tabindex","0",3,"matTreeNodePaddingIndent","ngClass","click","keyup.enter",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","","matTreeNodePadding","","tabindex","0",3,"matTreeNodePaddingIndent","ngClass","click","keyup.enter"],[3,"src",4,"ngIf"],["class","bo-icon bo-icon-file_20",4,"ngIf"],[3,"src"],[1,"bo-icon","bo-icon-file_20"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent"],["newTreeNode",""],["mat-icon-button","","disabled",""],["matInput","","placeholder","New item...",3,"keyup.enter"],["nameInput",""],["editTreeNode",""],["matInput","",3,"value","keyup.enter"],["matTreeNodePadding","","matTreeNodeToggle","","tabindex","0",3,"matTreeNodePaddingIndent","ngClass","click","keyup.enter"],[1,"bo-icon","bo-icon-caret-right-rounded_20"],[1,"bo-icon","bo-icon-folder_20"],[3,"diameter",4,"ngIf"],[3,"diameter"]],template:function(e,t){1&e&&(vs(0,zA,5,2,"div",0),vs(1,VA,2,1,"div",1),vs(2,UA,2,0,"div",2),vs(3,qA,8,4,"div",3),vs(4,nM,5,5,"mat-tree",4)),2&e&&(Cs("ngIf",t.showControls),Ui(1),Cs("ngIf",t.store.loading),Ui(1),Cs("ngIf",!t.store.loading&&t.dataSource&&0===t.dataSource.data.length),Ui(1),Cs("ngIf",t.showSearch),Ui(1),Cs("ngIf",!t.searchInputValue))},directives:[uh,yE,wS,eS,Iw,qE,uS,lv,kv,gb,BS,lh,HS,jS,Qg,nx,QC,KC,ix,JC,sh],styles:['.configs-panel[_ngcontent-%COMP%]{padding:6px 8px}.configs-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:36px;padding:0;font-size:24px;color:#90959a}.configs-panel[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.5}.search-container[_ngcontent-%COMP%]{padding:0 8px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-tree-node[_ngcontent-%COMP%]{min-height:32px;cursor:pointer}.mat-tree-node[_ngcontent-%COMP%]:focus{background-color:#f4f6f8}.mat-tree-node.background-highlight[_ngcontent-%COMP%]{background-color:#eaf9ff}.mat-tree-node[_ngcontent-%COMP%]   .bo-icon[_ngcontent-%COMP%]{font-size:20px}.mat-tree-node[_ngcontent-%COMP%]   .bo-icon-caret-right-rounded_20[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:10px}.mat-tree-node[_ngcontent-%COMP%]   .bo-icon-file_20[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]   .bo-icon-folder_20[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.mat-tree-node[_ngcontent-%COMP%]   .bo-icon-file_20[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]   .bo-icon-folder_20[_ngcontent-%COMP%]{color:#c8cacd}.mat-tree-node[_ngcontent-%COMP%]   .bo-icon-caret-right-rounded_20[_ngcontent-%COMP%]{color:#90959a}.mat-tree-node[_ngcontent-%COMP%]   .bo-icon-caret-right-rounded_20.expanded[_ngcontent-%COMP%]{transform:rotate(90deg)}.mat-tree-node[_ngcontent-%COMP%]   .bo-icon-file_20[_ngcontent-%COMP%]{margin-left:30px}.mat-tree-node[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain;width:34px;height:34px;border:1px solid #eaeaec;border-radius:2px;position:relative;margin-top:4px;margin-bottom:4px}.mat-tree-node[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fff;background-image:url(projects/back-office/src/assets/images/image-placeholder-36.svg);background-position:center;background-repeat:no-repeat}.mat-tree-node[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.main-loader-container[_ngcontent-%COMP%]{padding:10px}.main-loader[_ngcontent-%COMP%]{margin:auto}.tree-empty-text[_ngcontent-%COMP%]{padding:15px;background-color:#fff}']}),e=sF=AC([DC("design:paramtypes",[iF,tF,Ky])],e),e})();class lF{constructor(e){this.overlayRef=e,this.nodeSelected=new x,this._beforeClose=new x,this._afterClosed=new x}close(e){null!=e&&this.nodeSelected.next(e),this.nodeSelected.complete(),this.componentInstance.animationStateChanged.pipe(xd(e=>"start"===e.phaseName),Od(1)).subscribe(()=>{this._beforeClose.next(),this._beforeClose.complete(),this.overlayRef.detachBackdrop()}),this.componentInstance.animationStateChanged.pipe(xd(e=>"done"===e.phaseName&&"void"===e.toState),Od(1)).subscribe(()=>{this.overlayRef.dispose(),this._afterClosed.next(),this._afterClosed.complete(),this.componentInstance=null}),this.componentInstance.startExitAnimation()}afterClosed(){return this._afterClosed.asObservable()}beforeClose(){return this._beforeClose.asObservable()}}const cF=new Xn("TREE_CONFIG"),uF=(new Xn("TREE_REMOTE_SERVICE"),{transformPanelWrap:Qp("transformPanelWrap",[rf("* => void",sf("@transformPanel",[of()],{optional:!0}))]),transformPanel:Qp("transformPanel",[tf("void",ef({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),tf("showing",ef({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),tf("showing-multiple",ef({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),rf("void => *",Zp("120ms cubic-bezier(0, 0, 0.2, 1)")),rf("* => void",Zp("100ms 25ms linear",ef({opacity:0})))]),fadeInContent:Qp("fadeInContent",[tf("showing",ef({opacity:1})),rf("void => showing",[ef({opacity:0}),Zp("150ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])});let hF=(()=>{let e=class{constructor(e,t){this.treeOverlayRef=e,this.treeConfig=t,this.treePanelMaxHeight=KD.TREE_PANEL_MAX_HEIGHT,this.animationState="showing",this.animationStateChanged=new Xl}ngOnInit(){}onAnimationStart(e){this.animationStateChanged.emit(e)}onAnimationDone(e){this.animationStateChanged.emit(e)}startExitAnimation(){this.animationState="void"}selectNode(e){this.selectedNode=e}close(e){this.treeOverlayRef.close(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(lF),ws(cF))},e.\u0275cmp=Ue({type:e,selectors:[["au-tree-overlay"]],decls:10,vars:20,consts:[["cdkTrapFocus","","cdkTrapFocusAutoCapture","",1,"tree-panel-wrap"],[1,"tree-panel"],["perfectScrollbar","",1,"tree-container"],[3,"nodes","ngModel","nodeIndent","showControls","showSearch","allowSelectFiles","allowSelectFolders","selectOnlyLeafs","createNodeFunction","updateNodeFunction","deleteNodeFunction","loadNodesFunction","openRootFolder","ngModelChange"],["configsTree",""],[1,"buttons-container"],["mat-button","","type","button",3,"click"],["mat-flat-button","","type","button","color","primary","cdkFocusInitial","",3,"disabled","click"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"div",1),Ds("@transformPanel.start",function(e){return t.onAnimationStart(e)})("@transformPanel.done",function(e){return t.onAnimationDone(e)}),Es(2,"div",2),Es(3,"au-tree",3,4),Ds("ngModelChange",function(e){return t.selectedNode=e}),Ss(),Ss(),Es(5,"div",5),Es(6,"button",6),Ds("click",function(){return t.close()}),la(7),Ss(),Es(8,"button",7),Ds("click",function(){return t.close(t.selectedNode)}),la(9),Ss(),Ss(),Ss(),Ss()),2&e&&(Cs("@transformPanelWrap",void 0),Ui(1),Cs("@transformPanel",t.animationState),Ui(1),Ks("max-height",t.treePanelMaxHeight,"px"),Ui(1),Cs("nodes",t.nodes)("ngModel",t.selectedNode)("nodeIndent",t.treeConfig.nodeIndent)("showControls",!1)("showSearch",t.treeConfig.showSearch)("allowSelectFiles",t.treeConfig.allowSelectFiles)("allowSelectFolders",t.treeConfig.allowSelectFolders)("selectOnlyLeafs",t.treeConfig.selectOnlyLeafs)("createNodeFunction",t.treeConfig.createNodeFunction)("updateNodeFunction",t.treeConfig.updateNodeFunction)("deleteNodeFunction",t.treeConfig.deleteNodeFunction)("loadNodesFunction",t.treeConfig.loadNodesFunction)("openRootFolder",t.treeConfig.openRootFolder),Ui(4),ua(" ",t.treeConfig.cancelText," "),Ui(1),Cs("disabled",!t.selectedNode),Ui(1),ua(" ",t.treeConfig.saveText," "))},directives:[fp,uE,aF,kv,gb,yE],styles:[".tree-panel[_ngcontent-%COMP%]{min-width:100%;padding-top:8px;padding-bottom:10px;border-radius:3px;background-color:#fff;box-shadow:0 8px 24px rgba(0,0,0,.25)}.tree-container[_ngcontent-%COMP%]{overflow:hidden;border-bottom:1px solid #eaeaec;position:relative}.buttons-container[_ngcontent-%COMP%]{padding:0 10px;margin-top:8px;text-align:right}button[_ngcontent-%COMP%]{margin-left:10px}"],data:{animation:[uF.transformPanelWrap,uF.transformPanel]}}),e=AC([MC(1,ur(cF)),DC("design:paramtypes",[lF,Object])],e),e})();const dF={hasBackdrop:!0,panelClass:"au-tree-overlay-panel",treeConfig:{nodeIndent:KD.TREE_NODE_INDENT,allowSelectFiles:!0,allowSelectFolders:!0,saveText:"Select",cancelText:"Cancel"}};let pF=(()=>{let e=class{constructor(e,t,n){this.injector=e,this.overlay=t,this.viewportRuler=n}open(e,t){const n=Object(hx.merge)(dF,e),r=this.createOverlay(n,t),i=new lF(r),o=this.attachTreeContainer(r,n,i);return o.nodes=e.treeConfig.nodes,o.selectedNode=e.treeConfig.selectedNode,i.componentInstance=o,r.backdropClick().subscribe(e=>i.close()),i}createOverlay(e,t){const n=this.getOverlayConfig(e,t);return this.overlay.create(n)}getOverlayConfig(e,t){const n=this.overlay.position().flexibleConnectedTo(t).withGrowAfterOpen(!0).withPositions(this.calculatePositions(t));return new h_({hasBackdrop:e.hasBackdrop,backdropClass:e.backdropClass,panelClass:e.panelClass,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:n})}createInjector(e,t){const n=new WeakMap;return n.set(lF,t),n.set(cF,e.treeConfig),new vf(this.injector,n)}attachTreeContainer(e,t,n){const r=this.createInjector(t,n),i=new hf(hF,null,r);return e.attach(i).instance}calculatePositions(e){const t=this.viewportRuler.getViewportSize();return e.nativeElement.getBoundingClientRect().top>t.height/2?[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"}]:[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]}};return e.\u0275fac=function(t){return new(t||e)(sr(ns),sr(O_),sr(Qy))},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e=AC([DC("design:paramtypes",[ns,O_,Qy])],e),e})();var fF;let mF=(()=>{let e=fF=class{constructor(e,t){this.treeOverlayService=e,this.elementRef=t,this.nodeIndent=KD.TREE_NODE_INDENT,this.showSearch=!1,this.allowSelectFiles=!0,this.allowSelectFolders=!0,this.selectOnlyLeafs=!1,this.openRootFolder=!1,this.disabledControl=!1,this.focus=new Xl,this.blur=new Xl}ngOnInit(){}open(){if(!this.disabledControl){const e=this.treeOverlayService.open({backdropClass:"cdk-overlay-transparent-backdrop",treeConfig:{nodeIndent:this.nodeIndent,showSearch:this.showSearch,allowSelectFiles:this.allowSelectFiles,allowSelectFolders:this.allowSelectFolders,selectOnlyLeafs:this.selectOnlyLeafs,openRootFolder:this.openRootFolder,nodes:this.nodes,selectedNode:this.selectedNode,createNodeFunction:this.createNodeFunction,updateNodeFunction:this.updateNodeFunction,deleteNodeFunction:this.deleteNodeFunction,loadNodesFunction:this.loadNodesFunction}},this.elementRef);this.focus.next(),e.afterClosed().subscribe(()=>this.blur.next()),e.nodeSelected.subscribe(e=>{this.onChange(e),this.blur.next()})}}onChange(e){this.selectedNode=e,this.selectedNodePath=e?this.getNodePath(e):null;const t=this.selectedNode;this.propagateChange(t),this.propagateTouch(t)}writeValue(e){this.selectedNode=e,this.selectedNodePath=e?this.getNodePath(e):null}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}setDisabledState(e){this.disabled=e}getNodePath(e){if(!this.nodes)return e.name;const t=rF.findNode(t=>Object(hx.isEqual)(e,t),this.nodes),n=this.findParent(t||e,this.nodes);if(n){const t=this.getNodePath(n);return"/"===t?e.name:t+"/"+e.name}return""===e.name?"":"/"===e.name?e.name:"/"+e.name}findParent(e,t){for(const n of t.filter(e=>e.children&&e.children.length)){if(n.children.some(t=>t===e))return n;const t=this.findParent(e,n.children);if(t)return t}return null}};return e.\u0275fac=function(t){return new(t||e)(ws(pF),ws(Da))},e.\u0275cmp=Ue({type:e,selectors:[["au-tree-select"]],inputs:{nodeIndent:"nodeIndent",showSearch:"showSearch",allowSelectFiles:"allowSelectFiles",allowSelectFolders:"allowSelectFolders",selectOnlyLeafs:"selectOnlyLeafs",openRootFolder:"openRootFolder",disabledControl:"disabledControl",nodes:"nodes",createNodeFunction:"createNodeFunction",updateNodeFunction:"updateNodeFunction",deleteNodeFunction:"deleteNodeFunction",loadNodesFunction:"loadNodesFunction"},outputs:{focus:"focus",blur:"blur"},features:[Ta([pF,{provide:rv,useExisting:oe(()=>fF),multi:!0}])],decls:5,vars:6,consts:[["appearance","outline",3,"click"],["matInput","",1,"cdk-visually-hidden",3,"disabled","keyup.enter"],[1,"on-preview-value",3,"ngClass"],["class","image-square",3,"src",4,"ngIf"],[1,"image-square",3,"src"]],template:function(e,t){1&e&&(Es(0,"mat-form-field",0),Ds("click",function(){return t.open()}),Es(1,"input",1),Ds("keyup.enter",function(){return t.open()}),Ss(),Es(2,"span",2),vs(3,rM,1,1,"img",3),la(4),Ss(),Ss()),2&e&&(Ui(1),Cs("disabled",t.disabledControl),Ui(1),Cs("ngClass",Dl(4,iM,t.disabledControl)),Ui(1),Cs("ngIf",null==t.selectedNode?null:t.selectedNode.previewUrl),Ui(1),ua(" ",t.selectedNodePath||"Not selected"," "))},directives:[eS,uS,sh,uh],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%;cursor:pointer}input[_ngcontent-%COMP%]{cursor:pointer}.on-preview-value[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center;flex-direction:row}img[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain;width:46px;height:46px;border:1px solid #eaeaec;border-radius:2px;position:relative;margin-right:9px}.disabled[_ngcontent-%COMP%]{color:#00000061}"]}),e=fF=AC([DC("design:paramtypes",[pF,Da])],e),e})(),gF=(()=>{let e=class{constructor(e){this.logger=e}debug(e,...t){this.logger&&this.logger.debug(e,...t)}};return e.\u0275fac=function(t){return new(t||e)(sr(uP,8))},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e=AC([MC(0,hr()),DC("design:paramtypes",[uP])],e),e})();const yF={suppressScrollX:!0};let _F=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[gF,{provide:oE,useValue:yF}],imports:[[Oh,Tb,hE,_E,sx,Ow,tS,hS,CS,YS,F_,Jy,Pp]]}),e})();class vF{constructor(e){this.allowClear=!1,this.isModified=!1,this.validations=[],this.asyncValidations=[],Object.assign(this,e)}}class bF extends vF{constructor(e){super(),this.type="input",this.inputType="text",this.readonly=!1,this.isCopy=!1,Object.assign(this,e)}}class wF extends vF{constructor(e){super(),this.type="textarea",this.readonly=!1,Object.assign(this,e)}}class CF extends vF{constructor(e){super(),this.type="select",this.withGroups=!1,Object.assign(this,e)}}class xF extends vF{constructor(e){super(),this.type="explorer",Object.assign(this,e)}}class EF{constructor(e){this.showButtons=!0,this.showCancel=!0,this.saveText="Save",this.cancelText="Cancel",this.clearText="Clear",Object.assign(this,e)}}let SF=(()=>{let e=class{constructor(e){this.fb=e}static getItemKey(e){const t=Number(e);return isNaN(t)?e:t}createFormGroup(e,t){const n=this.createFormGroupInternal(e);return n.setValidators(t),n}validateAllFormFields(e){Object.keys(e.controls).forEach(t=>{e.get(t).markAsTouched({onlySelf:!0})})}createFormGroupInternal(e){const t=e=>{if("group"===e.type){const t=e,n=this.createFormGroupInternal(t.fields);return n.setValidators(this.bindValidations(t.validations||[])),{name:t.name,control:n}}if("wrap"===e.type){const n=e.fields.map(e=>t(e));return[].concat(...n)}const n=this.fb.control(e.value,this.bindValidations(e.validations||[]),...e.asyncValidations.map(e=>e.validator));return{name:e.name,control:n}},n=e.map(e=>t(e)),r=[].concat(...n).reduce((e,t)=>(e[t.name]=t.control,e),{});return this.fb.group(r)}bindValidations(e){if(e.length<=0)return null;const t=e.filter(e=>!!e.validator).map(e=>e.validator);return fv.compose(t)}};return e.\u0275fac=function(t){return new(t||e)(sr(Pb))},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e=AC([DC("design:paramtypes",[Pb])],e),e})(),PF=(()=>{let e=class{constructor(e,t,n,r){this.formHelper=e,this.cd=t,this.el=n,this.platformId=r,this.fields=[],this.formValidators=[],this.configuration=new EF,this.saving=!1,this.disabled=!1,this.submit=new Xl,this.cancel=new Xl,this.mouseEnter=new Xl,this.mouseLeave=new Xl,this.focus=new Xl,this.blur=new Xl,this.valueChanges=new Xl,this.formChanges=new Xl,this.formComponents=[]}ngOnInit(){}ngOnChanges(e){e.fields&&e.fields.currentValue&&(this.valueChangesSubscription&&!this.valueChangesSubscription.closed&&this.valueChangesSubscription.unsubscribe(),this.form=this.formHelper.createFormGroup(this.fields,this.formValidators.map(e=>e.validator)),this.valueChangesSubscription=this.form.valueChanges.subscribe(e=>{this.valueChanges.emit(e)})),e.disabled&&this.disabledStateChanged(e.disabled.currentValue),e.configuration&&(this.configuration=Object.assign(Object.assign({},new EF),this.configuration)),this.cd.detectChanges(),this.formChanges.emit(this.form)}ngOnDestroy(){this.valueChangesSubscription&&!this.valueChangesSubscription.closed&&this.valueChangesSubscription.unsubscribe()}onSubmit(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),this.form.valid?this.submit.emit(this.form.value):this.form.markAllAsTouched()}onCancel(e){this.cancel.emit()}validate(){return this.form.invalid&&(this.form.markAllAsTouched(),this.markForCheckDynamicComponents(),this.scrollToFirstInvalid()),this.form.valid}scrollToFirstInvalid(){if(this.form.valid||!kh(this.platformId))return;this.cd.detectChanges();const e=this.el.nativeElement.querySelector(".field-wrapper.invalid");if(null==e)return;const t=e.getBoundingClientRect();t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)||window.scrollTo({top:t.top,behavior:"smooth"})}markForCheckDynamicComponents(){for(const e of this.formComponents)e.injector.get(sl).markForCheck()}disabledStateChanged(e){this.form&&(e?this.form.enabled&&this.form.disable({emitEvent:!1}):this.form.disabled&&this.form.enable({emitEvent:!1}))}};return e.\u0275fac=function(t){return new(t||e)(ws(SF),ws(sl),ws(Da),ws(_c))},e.\u0275cmp=Ue({type:e,selectors:[["au-dynamic-form"]],inputs:{fields:"fields",formValidators:"formValidators",configuration:"configuration",saving:"saving",disabled:"disabled"},outputs:{submit:"submit",cancel:"cancel",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",focus:"focus",blur:"blur",valueChanges:"valueChanges",formChanges:"formChanges"},features:[Ta([SF]),at],ngContentSelectors:TM,decls:6,vars:2,consts:[["class","dynamic-form","autocomplete","off",3,"formGroup","submit",4,"ngIf"],["class","form-loader",4,"ngIf"],["fieldsTemplate",""],["fieldTemplate",""],["autocomplete","off",1,"dynamic-form",3,"formGroup","submit"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],["class","dynamic-form-buttons","align","end",4,"ngIf"],["ngProjectAs","mat-error",5,["mat-error"]],[4,"ngIf"],["align","end",1,"dynamic-form-buttons"],["mat-stroked-button","","type","button",3,"disabled","click",4,"ngIf"],["mat-flat-button","","type","submit","color","primary",3,"disabled"],["mat-stroked-button","","type","button",3,"disabled","click"],[1,"form-loader"],[1,"form-loader__spinner"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","fields-wrapper",3,"ngClass",4,"ngSwitchCase"],["class","field-wrapper",3,"invalid","mouseenter","mouseleave",4,"ngSwitchDefault"],[1,"fields-wrapper",3,"ngClass"],["class","fields-group-label",4,"ngIf"],[1,"fields-group-label"],[1,"field-wrapper",3,"mouseenter","mouseleave"],["class","field-label",4,"ngIf"],["class","field-description",4,"ngIf"],["dynamicField","",3,"field","group","allComponents","focus","blur"],["mat-button","","color","primary","disableRipple","","class","animated fadeIn field-reset",3,"disabled","click",4,"ngIf"],[1,"field-label"],["class","modified",4,"ngIf"],[1,"modified"],[1,"field-description"],["mat-button","","color","primary","disableRipple","",1,"animated","fadeIn","field-reset",3,"disabled","click"]],template:function(e,t){1&e&&(js(),vs(0,hM,5,7,"form",0),vs(1,dM,2,0,"div",1),vs(2,wM,1,1,"ng-template",null,2,uc),vs(4,PM,4,6,"ng-template",null,3,uc)),2&e&&(Cs("ngIf",t.form),Ui(1),Cs("ngIf",!t.form))},directives:function(){return[uh,yb,Rv,Cb,_h,lh,NE,yE,wS,fh,mh,gh,sh,BF]},styles:[".field-wrapper[_ngcontent-%COMP%]:not(:last-child), .fields-wrapper[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}.fields-wrapper.vertical[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]:last-child{margin-bottom:0}.fields-wrapper.horizontal[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.fields-wrapper.horizontal[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]{box-sizing:border-box;width:50%;margin-bottom:0}.fields-wrapper.horizontal[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]:nth-child(odd){padding-right:10px}.fields-wrapper.horizontal[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]:nth-child(even){padding-left:10px}.fields-wrapper.with-label[_ngcontent-%COMP%] + .field-wrapper[_ngcontent-%COMP%], .fields-wrapper.with-label[_ngcontent-%COMP%] + .fields-wrapper[_ngcontent-%COMP%], .fields-wrapper.with-label[_ngcontent-%COMP%]:not(:first-child){padding-top:20px;box-shadow:inset 0 1px 0 #dfe3e8}.fields-group-label[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:500;line-height:19px}.field-label[_ngcontent-%COMP%]{margin-bottom:4px;font-weight:500;font-size:14px;line-height:20px}.field-description[_ngcontent-%COMP%]{margin-bottom:8px;font-size:12px;line-height:16px;color:#90959a}.field-reset[_ngcontent-%COMP%]{vertical-align:top;min-width:auto;padding:12px 0;margin-bottom:-12px;font-weight:400;line-height:16px}.dynamic-form-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:12px}mat-error[_ngcontent-%COMP%]{font-size:12px}.modified[_ngcontent-%COMP%]{width:4px;height:4px;background:#1fb6ff;border-radius:50%;display:inline-block;vertical-align:middle}"]}),e=AC([MC(3,ur(_c)),DC("design:paramtypes",[SF,sl,Da,Object])],e),e})(),TF=(()=>{let e=class{constructor(e,t){this.sanitizer=t,this.httpClient=new Gb(e)}transform(e,t){let n=new Ab;return null!=t&&Object.entries(t).forEach(([e,t])=>n=n.set(e,t)),this.httpClient.get(e,{responseType:"blob",headers:n}).pipe(P(e=>{const t=URL.createObjectURL(e);return this.sanitizer.bypassSecurityTrustUrl(t)}))}};return e.\u0275fac=function(t){return new(t||e)(ws(Rb),ws(nd))},e.\u0275pipe=Ke({name:"image",type:e,pure:!0}),e=AC([DC("design:paramtypes",[Rb,nd])],e),e})(),IF=(()=>{class e{constructor(e){this.cd=e,this.blur=new x,this.focus=new x,this.componentAlive=!0}get $blur(){return this.blur.asObservable()}get $focus(){return this.focus.asObservable()}get formControl(){return this.group.get(this.field.name)}ngOnInit(){this.formControl.valueChanges.pipe(e_(()=>this.componentAlive)).subscribe(()=>{this.formControl.markAsTouched({onlySelf:!0}),this.cd.markForCheck()})}ngOnDestroy(){this.componentAlive=!1}}return e.\u0275fac=function(e){!function(){throw new Error("invalid")}()},e.\u0275dir=Ye({type:e}),e})(),OF=(()=>{let e=class extends IF{constructor(e){super(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-checkbox"]],features:[is],decls:3,vars:3,consts:[[3,"formGroup"],["color","primary",3,"formControlName","focus","blur"]],template:function(e,t){1&e&&(Es(0,"section",0),Es(1,"mat-checkbox",1),Ds("focus",function(e){return t.focus.next({event:e,field:t.field})})("blur",function(e){return t.blur.next({event:e,field:t.field})}),la(2),Ss(),Ss()),2&e&&(Cs("formGroup",t.group),Ui(1),Cs("formControlName",t.field.name),Ui(1),ua(" ",t.field.label," "))},directives:[Rv,Cb,CP,kv,Eb],styles:[""]}),e=AC([DC("design:paramtypes",[sl])],e),e})(),kF=(()=>{let e=class extends IF{constructor(e,t){super(e),this.clipboardService=t,this.NUMBER_INPUT_INTERVAL=50,this.NUMBER_INPUT_DELAY=200}startIncrease(){this.numberIncrease(),this.timer=cx(this.NUMBER_INPUT_INTERVAL).pipe(Gp(this.NUMBER_INPUT_DELAY)).subscribe(()=>this.numberIncrease())}startDecrease(){this.numberDecrease(),this.timer=cx(this.NUMBER_INPUT_INTERVAL).pipe(Gp(this.NUMBER_INPUT_DELAY)).subscribe(()=>this.numberDecrease())}stop(){this.timer&&this.timer.unsubscribe()}numberIncrease(){this.formInput.nativeElement.stepUp(),this.formControl.setValue(this.formInput.nativeElement.value)}numberDecrease(){this.formInput.nativeElement.stepDown(),this.formControl.setValue(this.formInput.nativeElement.value)}copyValueToClipboard(){this.clipboardService.copyFromContent(this.formControl.value),abp.notify.success("Copied to clipboard")}showPasswordText(){const e=this.formInput.nativeElement,t=this.showButton.nativeElement;e.type="password"===e.type?"text":"password","password"===e.type?(t.classList.remove("bo-icon-hidden_24"),t.classList.add("bo-icon-show_24")):(t.classList.remove("bo-icon-show_24"),t.classList.add("bo-icon-hidden_24"))}};return e.\u0275fac=function(t){return new(t||e)(ws(sl),ws(AO))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-input"]],viewQuery:function(e,t){if(1&e&&(ic(IM,1),ic(OM,1)),2&e){let e;rc(e=sc())&&(t.formInput=e.first),rc(e=sc())&&(t.showButton=e.first)}},features:[is],decls:9,vars:14,consts:[["appearance","outline",3,"formGroup"],["matInput","",3,"formControlName","placeholder","type","readonly","step","blur","focus"],["formInput",""],[4,"ngIf"],["class","mat-hint","align","start",4,"ngIf"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],["mat-button","","disableRipple","","type","button","tabindex","-1",1,"number-increase",3,"mousedown","mouseup","mouseleave"],[1,"number-arrow"],["mat-button","","disableRipple","","type","button","tabindex","-1",1,"number-decrease",3,"mousedown","mouseup","mouseleave"],["type","button","tabindex","-1",1,"show-hidden-text-button","bo-icon","bo-icon-show_24",3,"click"],["showButton",""],["mat-button","","disableRipple","","type","button","tabindex","-1",1,"copy-button",3,"click"],["align","start",1,"mat-hint"],["ngProjectAs","mat-error",5,["mat-error"]]],template:function(e,t){1&e&&(Es(0,"mat-form-field",0),Es(1,"input",1,2),Ds("blur",function(e){return t.blur.next({event:e,field:t.field})})("focus",function(e){return t.focus.next({event:e,field:t.field})}),Ss(),vs(3,kM,5,0,"ng-container",3),vs(4,RM,3,0,"ng-container",3),vs(5,AM,3,0,"ng-container",3),vs(6,MM,2,2,"mat-hint",4),vs(7,FM,2,1,"ng-container",5),vs(8,BM,2,1,"ng-container",5),Ss()),2&e&&(Qs("number-field","number"===t.field.inputType),Cs("formGroup",t.group),Ui(1),Cs("formControlName",t.field.name)("placeholder",t.field.placeholder)("type",t.field.inputType)("readonly",t.field.readonly)("step",t.field.step),Ui(2),Cs("ngIf","number"===t.field.inputType),Ui(1),Cs("ngIf","password"===t.field.inputType),Ui(1),Cs("ngIf",t.field.isCopy),Ui(1),Cs("ngIf",t.field.maxLength&&t.field.maxLengthHint),Ui(1),Cs("ngForOf",t.field.validations),Ui(1),Cs("ngForOf",t.field.asyncValidations))},directives:[eS,Rv,Cb,uS,lv,kv,Eb,uh,lh,yE,UE,NE],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field.number-field[_ngcontent-%COMP%]{max-width:190px;margin-right:20px}.copy-button[_ngcontent-%COMP%]{min-width:auto;width:64px;padding:0;position:absolute;right:-11px;top:-8px;border-left:1px solid #c4cdd5;border-radius:0!important;font-family:Roboto;font-size:14px;font-style:normal;font-weight:400;color:#606870}.show-hidden-text-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:auto;width:24px;height:24px;padding:0;position:absolute;right:65px;top:-2px;font-size:24px;color:#606870;background-color:transparent;border:none;cursor:pointer}"]}),e=AC([DC("design:paramtypes",[sl,AO])],e),e})(),RF=(()=>{let e=class extends IF{constructor(e){super(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-textarea"]],features:[is],decls:6,vars:7,consts:[["appearance","outline",3,"formGroup"],["matInput","",3,"formControlName","placeholder","readonly","focus","blur"],["align","end",4,"ngIf"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],[4,"ngIf"],["align","end"],["ngProjectAs","mat-error",5,["mat-error"]]],template:function(e,t){1&e&&(Es(0,"mat-form-field",0),Es(1,"textarea",1),Ds("focus",function(e){return t.focus.next({event:e,field:t.field})})("blur",function(e){return t.blur.next({event:e,field:t.field})}),la(2,"    "),Ss(),vs(3,NM,2,2,"mat-hint",2),vs(4,HM,2,1,"ng-container",3),vs(5,zM,2,0,"mat-error",4),Ss()),2&e&&(Cs("formGroup",t.group),Ui(1),Cs("formControlName",t.field.name)("placeholder",t.field.placeholder)("readonly",t.field.readonly),Ui(2),Cs("ngIf",t.field.maxLength),Ui(1),Cs("ngForOf",t.field.validations),Ui(1),Cs("ngIf",t.formControl.hasError("mismatchedPasswords")))},directives:[eS,Rv,Cb,uS,lv,kv,Eb,uh,lh,UE,NE],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{min-height:104px}"]}),e=AC([DC("design:paramtypes",[sl])],e),e})(),AF=(()=>{let e=class extends IF{constructor(e){super(e),this.getItemKey=e=>SF.getItemKey(e),this.sort=(e,t)=>e.value.order-t.value.order}get selectedOption(){const e=this.formControl.value;if(!Object(hx.isNil)(e)){if(this.field.withGroups){const t=Object.keys(this.field.options).map(e=>this.field.options[e]).find(t=>!Object(hx.isNil)(t.options[e]));return t?t.options[e]:void 0}return this.field.options[e]}}get options(){return this.field.options}showImage(e){"stretch"===this.field.imageType&&e.classList.add("loaded")}hideImage(){"stretch"===this.field.imageType&&this.selectedImage&&this.selectedImage.nativeElement.classList.remove("loaded")}};return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-select"]],viewQuery:function(e,t){if(1&e&&ic(VM,1),2&e){let e;rc(e=sc())&&(t.selectedImage=e.first)}},features:[is],decls:4,vars:5,consts:[["appearance","outline",3,"formGroup","ngClass"],[3,"placeholder","formControlName","panelClass","selectionChange","opened","closed",4,"ngIf"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],[3,"placeholder","formControlName","panelClass","selectionChange","opened","closed"],[3,"src","load",4,"ngIf"],[4,"ngIf"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"src","load"],["selectedImage",""],[3,"value","disabled"],[3,"label","disabled",4,"ngFor","ngForOf"],[3,"label","disabled"],["ngProjectAs","mat-error",5,["mat-error"]]],template:function(e,t){1&e&&(Es(0,"mat-form-field",0),vs(1,qM,7,10,"mat-select",1),vs(2,JM,7,9,"mat-select",1),vs(3,tD,2,1,"ng-container",2),Ss()),2&e&&(Cs("formGroup",t.group)("ngClass",t.field.imageType?"image-"+t.field.imageType:""),Ui(1),Cs("ngIf",!t.field.withGroups),Ui(1),Cs("ngIf",t.field.withGroups),Ui(1),Cs("ngForOf",t.field.validations))},directives:[eS,Rv,Cb,sh,uh,lh,XP,kv,Eb,UP,xy,_y,NE],pipes:[Ph,Eh,TF],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e=AC([DC("design:paramtypes",[sl])],e),e})(),MF=(()=>{let e=class extends IF{constructor(e){super(e),this.getItemKey=e=>SF.getItemKey(e)}get options(){return this.field.options}get selectedValueLabel(){return this.formControl.value&&this.formControl.value.length?this.field.withGroups?(e=>{const t=Object.keys(this.field.options).map(e=>this.field.options[e]).find(t=>!Object(hx.isNil)(t.options[e]));return t?t.options[e].label:void 0})(this.formControl.value[0]):this.field.options[this.formControl.value[0]].label:""}};return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-multiselect"]],features:[is],decls:4,vars:4,consts:[["appearance","outline",3,"formGroup"],["multiple","",3,"placeholder","formControlName","opened","closed",4,"ngIf"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],["multiple","",3,"placeholder","formControlName","opened","closed"],[4,"ngIf"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[3,"src",4,"ngIf"],[3,"src"],[3,"label","disabled",4,"ngFor","ngForOf"],[3,"label","disabled"],["ngProjectAs","mat-error",5,["mat-error"]]],template:function(e,t){1&e&&(Es(0,"mat-form-field",0),vs(1,oD,6,7,"mat-select",1),vs(2,uD,6,7,"mat-select",1),vs(3,dD,2,1,"ng-container",2),Ss()),2&e&&(Cs("formGroup",t.group),Ui(1),Cs("ngIf",!t.field.withGroups),Ui(1),Cs("ngIf",t.field.withGroups),Ui(1),Cs("ngForOf",t.field.validations))},directives:[eS,Rv,Cb,uh,lh,XP,kv,Eb,UP,xy,_y,NE],pipes:[Ph,Eh,TF],styles:[".mat-form-field[_ngcontent-%COMP%]{display:block}"]}),e=AC([DC("design:paramtypes",[sl])],e),e})(),DF=(()=>{let e=class extends IF{constructor(e){super(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-tree"]],features:[is],decls:5,vars:16,consts:[[3,"formGroup"],[3,"formControlName","showSearch","nodes","nodeIndent","allowSelectFiles","allowSelectFolders","selectOnlyLeafs","createNodeFunction","updateNodeFunction","deleteNodeFunction","loadNodesFunction","openRootFolder","disabledControl","focus","blur"],[1,"mat-form-field-subscript-wrapper"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],["ngProjectAs","mat-error",5,["mat-error"]],[4,"ngIf"]],template:function(e,t){1&e&&(Es(0,"section",0),Es(1,"au-tree-select",1),Ds("focus",function(e){return t.focus.next({event:e,field:t.field})})("blur",function(e){return t.blur.next({event:e,field:t.field})}),Ss(),Es(2,"div",2),vs(3,fD,2,1,"ng-container",3),vs(4,gD,2,1,"ng-container",3),Ss(),Ss()),2&e&&(Cs("formGroup",t.group),Ui(1),Cs("formControlName",t.field.name)("showSearch",t.field.showSearch)("nodes",t.field.nodes)("nodeIndent",t.field.nodeIndent)("allowSelectFiles",t.field.allowSelectFiles)("allowSelectFolders",t.field.allowSelectFolders)("selectOnlyLeafs",t.field.selectOnlyLeafs)("createNodeFunction",t.field.createNodeFunction)("updateNodeFunction",t.field.updateNodeFunction)("deleteNodeFunction",t.field.deleteNodeFunction)("loadNodesFunction",t.field.loadNodesFunction)("openRootFolder",t.field.openRootFolder)("disabledControl",t.group.get(t.field.name).disabled),Ui(2),Cs("ngForOf",t.field.validations),Ui(1),Cs("ngForOf",t.field.asyncValidations))},directives:[Rv,Cb,mF,kv,Eb,lh,uh,NE],styles:[""]}),e=AC([DC("design:paramtypes",[sl])],e),e})(),FF=(()=>{let e=class extends IF{constructor(e){super(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-group"]],features:[is],decls:5,vars:6,consts:[[1,"form-group-wrapper",3,"formGroup"],[3,"formControlName"],["dynamicField","",3,"field","group",4,"ngFor","ngForOf"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],["dynamicField","",3,"field","group"],["ngProjectAs","mat-error",5,["mat-error"]]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"div",1),vs(2,yD,1,2,"ng-container",2),vs(3,_D,3,1,"ng-container",3),Hl(4,"keyvalue"),Ss(),Ss()),2&e&&(Cs("formGroup",t.group),Ui(1),Cs("formControlName",t.field.name),Ui(1),Cs("ngForOf",t.field.fields),Ui(1),Cs("ngForOf",zl(4,4,t.formControl.errors)))},directives:function(){return[Rv,Cb,kv,Eb,lh,BF,NE]},pipes:function(){return[Ph]},styles:[""]}),e=AC([DC("design:paramtypes",[sl])],e),e})();const LF={input:kF,textarea:RF,select:AF,multiselect:MF,checkbox:OF,tree:DF,radio:(()=>{let e=class extends IF{constructor(e){super(e),this.getItemKey=e=>SF.getItemKey(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-radio"]],features:[is],decls:5,vars:6,consts:[[3,"formGroup"],["color","primary","aria-labelledby","radio-group-label",3,"formControlName"],[3,"value","focus","blur",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","focus","blur"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],["ngProjectAs","mat-error",5,["mat-error"]]],template:function(e,t){1&e&&(Es(0,"section",0),Es(1,"mat-radio-group",1),vs(2,vD,2,2,"mat-radio-button",2),Hl(3,"keyvalue"),Ss(),vs(4,CD,2,1,"ng-container",3),Ss()),2&e&&(Cs("formGroup",t.group),Ui(1),Cs("formControlName",t.field.name),Ui(1),Cs("ngForOf",zl(3,4,t.field.options)),Ui(2),Cs("ngIf",t.formControl.touched))},directives:[Rv,Cb,rT,kv,Eb,lh,uh,lT,NE],pipes:[Ph],styles:[""]}),e=AC([DC("design:paramtypes",[sl])],e),e})(),"rgb-color":(()=>{let e=class extends IF{constructor(e){super(e)}selectColor(e){this.formInput.nativeElement.value=e,this.formControl.setValue(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-rgb-color"]],viewQuery:function(e,t){if(1&e&&ic(IM,1),2&e){let e;rc(e=sc())&&(t.formInput=e.first)}},features:[is],decls:6,vars:7,consts:[[3,"formGroup"],["()","",3,"selectedColor","hideUsedColors","selected"],["appearance","outline"],["matInput","",3,"formControlName","maxLength","minLength","focus","blur"],["formInput",""],["ngProjectAs","mat-error",5,["mat-error"],4,"ngIf"],["ngProjectAs","mat-error",5,["mat-error"]],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(e,t){1&e&&(Es(0,"section",0),Es(1,"mcc-color-picker",1),Ds("selected",function(e){return t.formControl.markAsTouched(),t.selectColor(e)}),Ss(),Es(2,"mat-form-field",2),Es(3,"input",3,4),Ds("focus",function(e){return t.focus.next({event:e,field:t.field})})("blur",function(e){return t.blur.next({event:e,field:t.field})}),Ss(),vs(5,SD,2,1,"ng-container",5),Ss(),Ss()),2&e&&(Cs("formGroup",t.group),Ui(1),Cs("selectedColor",t.formControl.value)("hideUsedColors",!0),Ui(2),Cs("formControlName",t.field.name)("maxLength",7)("minLength",4),Ui(2),Cs("ngIf",t.formControl.touched))},directives:[Rv,Cb,SO,eS,uS,lv,kv,Eb,uh,lh,NE],styles:["section[_ngcontent-%COMP%]{display:inline-block}.mat-form-field[_ngcontent-%COMP%]{width:120px;margin-right:20px}"]}),e=AC([DC("design:paramtypes",[sl])],e),e})(),explorer:(()=>{let e=class extends IF{constructor(e){super(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(sl))},e.\u0275cmp=Ue({type:e,selectors:[["au-form-explorer"]],features:[is],decls:5,vars:10,consts:[[3,"formGroup"],[3,"formControlName","acceptFiles","allowMediaLib","allowUpload","maxFileSize","multiply","root","blur","focus"],[1,"mat-form-field-subscript-wrapper"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],["ngProjectAs","mat-error",5,["mat-error"]],[4,"ngIf"]],template:function(e,t){1&e&&(Es(0,"section",0),Es(1,"au-storage-select",1),Ds("blur",function(e){return t.blur.next({event:e,field:t.field})})("focus",function(e){return t.focus.next({event:e,field:t.field})}),Ss(),Es(2,"div",2),vs(3,TD,2,1,"ng-container",3),vs(4,OD,2,1,"ng-container",3),Ss(),Ss()),2&e&&(Cs("formGroup",t.group),Ui(1),Cs("formControlName",t.field.name)("acceptFiles",t.field.acceptFiles)("allowMediaLib",t.field.allowMediaLib)("allowUpload",t.field.allowUpload)("maxFileSize",t.field.maxFileSize)("multiply",t.field.multiply)("root",t.field.root),Ui(2),Cs("ngForOf",t.field.validations),Ui(1),Cs("ngForOf",t.field.asyncValidations))},directives:function(){return[Rv,Cb,oL,kv,Eb,lh,uh,NE]},styles:["section[_ngcontent-%COMP%]{position:relative}section[_ngcontent-%COMP%]   .mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{margin-top:22px;font-size:12px;line-height:1.5}section[_ngcontent-%COMP%]   .mat-form-field-subscript-wrapper[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{color:#dc3545}"]}),e=AC([DC("design:paramtypes",[sl])],e),e})(),wrap:FF,group:FF};let BF=(()=>{let e=class{constructor(e,t){this.resolver=e,this.container=t,this.blur=new Xl,this.focus=new Xl,this._subscriber=new x}ngOnInit(){const e=this.resolver.resolveComponentFactory(LF[this.field.type]);this.componentRef=this.container.createComponent(e),this.componentRef.instance.field=this.field,this.componentRef.instance.group=this.group,this.componentRef.instance.$focus.pipe(Hp(this._subscriber)).subscribe(e=>this.focus.emit(e)),this.componentRef.instance.$blur.pipe(Hp(this._subscriber)).subscribe(e=>this.blur.emit(e)),this.allComponents.push(this.componentRef)}ngOnDestroy(){const e=this.allComponents.indexOf(this.componentRef,0);e>-1&&this.allComponents.splice(e,1),this._subscriber.next(null),this._subscriber.complete(),this._subscriber.unsubscribe()}};return e.\u0275fac=function(t){return new(t||e)(ws(ka),ws(_l))},e.\u0275dir=Ye({type:e,selectors:[["","dynamicField",""]],inputs:{field:"field",group:"group",allComponents:"allComponents"},outputs:{blur:"blur",focus:"focus"}}),e=AC([DC("design:paramtypes",[ka,_l])],e),e})();var NF=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.PROGRESS=2]="PROGRESS",e}({});class jF{constructor(e){this.file=e,this.status=NF.PROGRESS,this.progress=0}set preview(e){this._preview=e,e.then(e=>{this.previewUrl=e,this.previewCSS=`url(${e})`})}get preview(){return this._preview}init(e){}}class HF{constructor(){}}let zF=(()=>{let e=class{uploadFile(e){return new _(t=>{let n=0;const r=setInterval(()=>{n+=200,t.next({type:Hb.UploadProgress,loaded:n,total:1e4}),console.warn(`Upload file ${e.name}. Status: ${n}/10000`),1e4===n&&clearInterval(r)},200)})}createPreview(e){return FC(this,void 0,void 0,function*(){const t=yield e.arrayBuffer();return URL.createObjectURL(new Blob([t]))})}createTreePreview(e){return FC(this,void 0,void 0,function*(){return""})}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),VF=(()=>{let e=class{constructor(e){this._uploadSrv=e,this.responses=new Map}handleUploadFile(e){const t=new x;return this.responses.set(e,t),{progress:this._uploadSrv.uploadFile(e).pipe(xd(e=>(e instanceof Ub&&t.next(e.body),e.type===Hb.UploadProgress)),P(e=>Math.round(100*e.loaded/e.total)/100)),result:t.asObservable()}}};return e.\u0275fac=function(t){return new(t||e)(sr(zF))},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e=AC([DC("design:paramtypes",[zF])],e),e})(),UF=(()=>{let e=class{getFiles(){return new Promise((e,t)=>setTimeout(()=>{Math.random()<.95?e([{id:"1",folderId:"",name:"folder"}]):t("Error")},2e3))}getFolders(){return new Promise((e,t)=>setTimeout(()=>{Math.random()<.95?e([{id:"1",path:"/directory",name:"folder"}]):t("Error")},2e3))}getFile(e){return new Promise((t,n)=>setTimeout(()=>{Math.random()<.95?t({id:e,folderId:"",name:"File.jpg"}):n("Error")},2e3))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();class WF{constructor(e){this.id=e.id,this.expandable=e.expandable,this.preview=e.preview,this.name=e.name,this.level=e.level,this.isExpanded=e.isExpanded,this.parentId=this.parentId,this.init()}init(){this.preview.then(e=>{this.previewUrl=e,this.previewCSS=`url(${e})`})}}let XF=(()=>{let e=class{constructor(e,t){this._mediaLibSrv=e,this._expSrv=t}createTree(e){return FC(this,void 0,void 0,function*(){const t=yield this._mediaLibSrv.getFolders(),n=yield this._mediaLibSrv.getFiles(),r=new Map;t.forEach(e=>{r.set(e.id,{name:e.name,id:e.id,children:[],preview:Promise.resolve("")});const n=e.path.split("/").filter(e=>""!==e);if(n.length>1){const r=t.find(e=>e.name===n[n.length-2]);e.parentId=r.id}}),t.forEach(e=>{const t=r.get(e.parentId);if(t){const n=r.get(e.id);t.children.push(n)}});const i=this._findRootNode(e,r);return yield this._addFiles(n,r),[i]})}_addFiles(e,t){return FC(this,void 0,void 0,function*(){e.forEach(({id:e,folderId:n,name:r},i)=>FC(this,void 0,void 0,function*(){const i=t.get(n||"0");i&&i.children.push({name:r,id:e,children:[],parentId:n,preview:this._expSrv.createTreePreview(e)})}))})}_findRootNode(e,t){let n;if(e){const r=e.split("/").filter(e=>""!==e);t.forEach(e=>{e.name===r[r.length-1]&&(n=e)})}if(n)return t.get(n.id);{const e={name:"/",id:"0",children:[],preview:Promise.resolve("")};return t.forEach(t=>{t.parentId||e.children.push(t)}),e}}buildTree(e="/"){return FC(this,void 0,void 0,function*(){const t=yield this.createTree(e),n=[],r=(e,t)=>{n.push(new WF({name:e.name,level:t,expandable:!!e.children.length,id:e.id,preview:e.preview,parentId:e.parentId})),e.children.length&&e.children.forEach(e=>r(e,t+1))};return r(t[0],0),Promise.resolve(n)})}};return e.\u0275fac=function(t){return new(t||e)(sr(UF),sr(zF))},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e=AC([DC("design:paramtypes",[UF,zF])],e),e})();var GF;let qF=(()=>{let e=GF=class{constructor(e,t,n){this._explorerSrv=e,this._treeBuilderSrv=t,this._expUpSrv=n,this.files=[],this.selectedTab=0,this.close=new Xl,this.selectMedia=new Xl,this.selectFile=new Xl,this._progress=[],this.propagateChange=()=>{},this.propagateTouch=()=>{}}get disabled(){const e=this.files[this.selectedFileIndex],t=()=>null==this.selectedFileIndex||e.status===NF.ERROR||e.status===NF.PROGRESS;return this.allowMediaLib?this.allowUpload?void(this.allowMediaLib&&this.allowUpload&&(0===this.selectedTab||t())):!this.selectedMedia:t()}ngOnInit(){return FC(this,void 0,void 0,function*(){this.allowMediaLib&&(this.nodes=yield this._treeBuilderSrv.buildTree(this.root))})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}setDisabledState(e){this.isDisabled=e}writeValue(e){console.warn(e)}uploadFile(e){const t=e.map(e=>new jF(e));this.files=this.multiply?[...this.files,...t]:t,t.forEach(e=>{if(this.acceptFiles&&!this.checkType(e.file.type))e.status=NF.ERROR,e.errorText="INVALID_FILE_TYPE",e.preview=this._expUpSrv.createPreview(e.file);else if(e.file.size<this.maxFileSize){const{progress:t,result:n}=this._explorerSrv.handleUploadFile(e.file);e.preview=this._expUpSrv.createPreview(e.file);const r=t.subscribe(t=>e.progress=t,t=>{e.status=NF.ERROR,e.errorText=t.error.title,r.unsubscribe(),i.unsubscribe()}),i=n.subscribe(t=>{e.content=t,e.status=NF.SUCCESS,this.multiply||(this.selectedFileIndex=0,e.isSelected=!0),r.unsubscribe(),i.unsubscribe()});this._progress.push({fileProgress:e,progress:r,result:i})}else e.status=NF.ERROR,e.errorText="EXCEEDED_FILE_SIZE",e.preview=this._expUpSrv.createPreview(e.file)})}cancelUploadFile(e){const{fileProgress:t,progress:n,result:r}=this._progress[e];(n||r)&&(n.unsubscribe(),r.unsubscribe(),t.status=NF.ERROR,t.errorText="ABORTED")}changeSelectFile(e){this.files.forEach(e=>e.isSelected=!1),this.selectedFileIndex=e,this.files[e].isSelected=!0}changeSelectMedia(e){this.selectedMedia=e}changeSelectMediaFinish(e){this.selectedMedia=e,this.emitMediaPayload()}finishSelection(){this.allowMediaLib?this.allowUpload?this.allowMediaLib&&this.allowUpload&&(0===this.selectedTab?this.emitMediaPayload():this.emitFilePayload()):this.emitMediaPayload():this.emitFilePayload()}emitMediaPayload(){const e=new HF;e.name=this.selectedMedia.name,e.preview=this.selectedMedia.preview,e.payload=this.selectedMedia,this.selectMedia.emit(e)}emitFilePayload(){const e=new HF,t=this.files[this.selectedFileIndex];e.name=t.file.name,e.preview=t.preview,e.payload=t.content,this.selectFile.emit(e)}checkType(e){return this.acceptFiles.split(",").includes(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(VF),ws(XF),ws(zF))},e.\u0275cmp=Ue({type:e,selectors:[["au-explorer"]],inputs:{acceptFiles:"acceptFiles",maxFileSize:"maxFileSize",multiply:"multiply",allowUpload:"allowUpload",allowMediaLib:"allowMediaLib",root:"root"},outputs:{close:"close",selectMedia:"selectMedia",selectFile:"selectFile"},features:[Ta([{provide:rv,useExisting:oe(()=>GF),multi:!0}])],decls:19,vars:16,consts:[[1,"se-component"],[1,"se-head"],["mat-icon-button","","aria-label","Close storage explorer",3,"click"],[3,"click"],[3,"ngClass","selectedIndex","selectedIndexChange"],[3,"label",4,"ngIf"],[1,"se-footer"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-stroked-button","",3,"click"],[3,"label"],[1,"se-body-media"],["class","media-spinner",4,"ngIf"],[3,"items","choose","finishChoose",4,"ngIf"],[1,"media-spinner"],[3,"diameter"],[3,"items","choose","finishChoose"],[1,"se-body-upload"],[1,"se-drop-zone-container"],[3,"multiply","minimize","acceptFiles","maxFileSize","files"],["class","se-files-container",4,"ngIf"],[1,"se-files-container"],[4,"ngFor","ngForOf"],["class","se-file-item",3,"file","selectFile","cancel",4,"ngIf"],[1,"se-file-item",3,"file","selectFile","cancel"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"div",1),Es(2,"span"),la(3),Hl(4,"translate"),Ss(),Es(5,"button",2),Ds("click",function(){return t.close.emit()}),Es(6,"mat-icon"),la(7,"close"),Ss(),Ss(),Ss(),Es(8,"div",3),Ds("click",function(e){return e.stopPropagation()}),Es(9,"mat-tab-group",4),Ds("selectedIndexChange",function(e){return t.selectedTab=e}),vs(10,AD,5,5,"mat-tab",5),vs(11,LD,6,8,"mat-tab",5),Ss(),Ss(),Es(12,"div",6),Es(13,"button",7),Ds("click",function(){return t.finishSelection()}),la(14),Hl(15,"translate"),Ss(),Es(16,"button",8),Ds("click",function(){return t.close.emit()}),la(17),Hl(18,"translate"),Ss(),Ss(),Ss()),2&e&&(Ui(3),ca(zl(4,8,"SELECT_IMAGE")),Ui(6),Cs("ngClass",Dl(14,BD,!t.allowMediaLib||!t.allowUpload))("selectedIndex",t.selectedTab),Ui(1),Cs("ngIf",t.allowMediaLib),Ui(1),Cs("ngIf",t.allowUpload),Ui(2),Cs("disabled",t.disabled),Ui(1),ua(" ",zl(15,10,"SELECT")," "),Ui(3),ua(" ",zl(18,12,"CANCEL")," "))},directives:function(){return[yE,Iw,wk,sh,uh,uk,wS,KF,QF,lh,$F]},pipes:function(){return[eC]},styles:[".se-component[_ngcontent-%COMP%]{min-width:500px}.se-component[_ngcontent-%COMP%]   .se-head[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #eee;font-weight:500;font-family:Roboto;font-size:16px;display:flex;justify-content:space-between;align-items:center}.se-component[_ngcontent-%COMP%]   .se-footer[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;padding:16px 20px;border-top:1px solid #eee}.se-component[_ngcontent-%COMP%]   .se-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){margin-left:8px}.se-component[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]{padding:0 20px;min-width:none}.se-component[_ngcontent-%COMP%]   .se-body-media[_ngcontent-%COMP%]{max-height:330px;min-height:330px;height:100%}.se-component[_ngcontent-%COMP%]   .se-body-media[_ngcontent-%COMP%]   .media-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.se-component[_ngcontent-%COMP%]   .se-body-upload[_ngcontent-%COMP%]   .se-drop-zone-container[_ngcontent-%COMP%]{padding:20px}.se-component[_ngcontent-%COMP%]   .se-body-upload[_ngcontent-%COMP%]   .se-files-container[_ngcontent-%COMP%]{max-height:125px;overflow-y:auto;padding:0 0 20px}.se-component[_ngcontent-%COMP%]   .se-body-upload[_ngcontent-%COMP%]   .se-files-container[_ngcontent-%COMP%]   .se-file-item[_ngcontent-%COMP%]{display:block;margin-bottom:10px}.se-component[_ngcontent-%COMP%]   .se-body-upload[_ngcontent-%COMP%]   .se-files-container[_ngcontent-%COMP%]   .se-file-item[_ngcontent-%COMP%]:first-child{margin-top:10px}.se-component[_ngcontent-%COMP%]   .se-body-upload[_ngcontent-%COMP%]   .se-files-container[_ngcontent-%COMP%]   .se-file-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.se-component[_ngcontent-%COMP%]   .hide-tab[_ngcontent-%COMP%]   .mat-tab-label-container[_ngcontent-%COMP%]{display:none!important}"]}),e=GF=AC([DC("design:paramtypes",[VF,XF,zF])],e),e})(),$F=(()=>{let e=class{constructor(){this.selectFile=new Xl,this.cancel=new Xl}get isProgress(){return this.file.status===NF.PROGRESS}get isError(){return this.file.status===NF.ERROR}get isSuccess(){return this.file.status===NF.SUCCESS}get status(){return NF}fileClick(){this.selectFile.emit()}cancelUpload(e){e.stopPropagation(),this.cancel.emit()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["au-file"]],inputs:{file:"file"},outputs:{selectFile:"selectFile",cancel:"cancel"},decls:15,vars:21,consts:[[1,"se-file",3,"ngClass","dblclick","click"],[1,"se-file-preview"],[1,"img",3,"ngClass"],[1,"se-file-info"],[1,"se-file-info-labels"],[1,"file-name"],["class","percent",4,"ngIf"],[4,"ngIf"],["class","file-size",4,"ngIf"],["class","file-error",4,"ngIf"],[1,"se-file-actions"],["mat-icon-button","","aria-label","Cancel uploading file",3,"click",4,"ngIf"],["class","se-success-upload",4,"ngIf"],[1,"percent"],["mode","determinate",3,"value"],[1,"file-size"],[1,"file-error"],["mat-icon-button","","aria-label","Cancel uploading file",3,"click"],[1,"se-success-upload"]],template:function(e,t){1&e&&(Es(0,"div",0),Ds("dblclick",function(){return t.fileClick()})("click",function(){return t.fileClick()}),Es(1,"div",1),Ps(2,"div",2),Ss(),Es(3,"div",3),Es(4,"div",4),Es(5,"span",5),la(6),Ss(),vs(7,ND,3,3,"span",6),Ss(),Ts(8),vs(9,jD,2,1,"div",7),vs(10,HD,3,3,"div",8),vs(11,zD,3,3,"div",9),Is(),Ss(),Es(12,"div",10),vs(13,VD,3,0,"button",11),vs(14,UD,1,0,"div",12),Ss(),Ss()),2&e&&(Cs("ngClass",Dl(17,WD,t.file.isSelected)),Ui(2),Ks("background",t.file.previewCSS)("background-size",t.file.previewCSS?"contain":"")("background-repeat",t.file.previewCSS?"no-repeat":"")("background-position",t.file.previewCSS?"center":""),Cs("ngClass",Dl(19,XD,t.file.previewCSS)),Ui(4),ca(t.file.file.name),Ui(1),Cs("ngIf",t.isProgress),Ui(2),Cs("ngIf",t.isProgress),Ui(1),Cs("ngIf",t.isSuccess),Ui(1),Cs("ngIf",t.isError),Ui(2),Cs("ngIf",t.isProgress),Ui(1),Cs("ngIf",t.isSuccess))},directives:function(){return[sh,uh,NO,yE,Iw]},pipes:function(){return[Ih,YF,eC]},styles:[".se-file[_ngcontent-%COMP%]{display:flex;height:64px;padding:0 20px;cursor:pointer}.se-file.selected[_ngcontent-%COMP%]{background:#f5f5f5}.se-file[_ngcontent-%COMP%]   .se-file-preview[_ngcontent-%COMP%]{margin-right:16px}.se-file[_ngcontent-%COMP%]   .se-file-preview[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{background:url(\"data:image/svg+xml,%3Csvg width='64' height='64' viewBox='0 0 64 64' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M38.8956 6.89559C37.8954 5.8954 36.5389 5.3335 35.1244 5.3335H16.0002C14.5857 5.3335 13.2292 5.8954 12.229 6.89559C11.2288 7.89579 10.6669 9.25234 10.6669 10.6668V53.3335C10.6669 54.748 11.2288 56.1045 12.229 57.1047C13.2292 58.1049 14.5857 58.6668 16.0002 58.6668H48.0002C49.4147 58.6668 50.7712 58.1049 51.7714 57.1047C52.7716 56.1045 53.3335 54.748 53.3335 53.3335V23.5426C53.3335 22.1281 52.7716 20.7716 51.7714 19.7714L38.8956 6.89559Z' fill='%238FDAFF'/%3E%3Cpath d='M34.6669 8V24H50.6669L34.6669 8Z' fill='white'/%3E%3C/svg%3E%0A\") 0 0/cover;width:64px;min-width:64px;max-width:64px;height:64px;min-height:64px;max-height:64px;overflow:hidden;box-sizing:border-box;border-radius:3px}.se-file[_ngcontent-%COMP%]   .se-file-preview[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border:1px solid #ccc}.se-file[_ngcontent-%COMP%]   .se-file-info[_ngcontent-%COMP%]{padding:16px 0;display:flex;flex-direction:column;width:100%}.se-file[_ngcontent-%COMP%]   .se-file-info[_ngcontent-%COMP%]   .se-file-info-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.se-file[_ngcontent-%COMP%]   .se-file-info[_ngcontent-%COMP%]   .se-file-info-labels[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%], .se-file[_ngcontent-%COMP%]   .se-file-info[_ngcontent-%COMP%]   .se-file-info-labels[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:20px;font-family:Roboto}.se-file[_ngcontent-%COMP%]   .se-file-info[_ngcontent-%COMP%]   .se-file-info-labels[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{max-width:325px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.se-file[_ngcontent-%COMP%]   .se-file-info[_ngcontent-%COMP%]   .file-error[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:20px;font-family:Roboto;color:red}.se-file[_ngcontent-%COMP%]   .se-file-actions[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 5px}.se-file[_ngcontent-%COMP%]   .se-file-actions[_ngcontent-%COMP%]   .se-success-upload[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml,%3Csvg width='36' height='36' viewBox='0 0 36 36' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='18' cy='18' r='18' fill='%2352C41A'/%3E%3Cpath d='M24.6961 13.396L15.5295 22.5627L11.3628 18.396' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E\");background-position:center;background-repeat:no-repeat;width:40px;height:40px}.se-file[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-weight:400;font-family:Roboto;font-size:14px;line-height:20px;color:#686868}"]}),e})(),YF=(()=>{let e=class{transform(e,t="MB",n=2){switch(t){case"B":return`${e} ${t}`;case"KB":return`${(e/1024).toFixed(n)} ${t}`;case"MB":return`${(e/Math.pow(1024,2)).toFixed(n)} ${t}`;case"GB":return`${(e/Math.pow(1024,3)).toFixed(n)} ${t}`;case"TB":return`${(e/Math.pow(1024,4)).toFixed(n)} ${t}`;default:return`${e} ${t}`}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=Ke({name:"fileSize",type:e,pure:!0}),e})(),KF=(()=>{let e=class{constructor(){this.treeNodes=[],this.choose=new Xl,this.finishChoose=new Xl,this.treeControl=new BC(e=>e.level,e=>e.expandable),this.hasChild=(e,t)=>t.expandable}set items(e){this.dataSource=new qy(e),this.treeNodes=e}getParentNode(e){for(let t=this.treeNodes.indexOf(e)-1;t>=0;t--)if(this.treeNodes[t].level===e.level-1)return this.treeNodes[t];return null}shouldRender(e){let t=this.getParentNode(e);for(;t;){if(!t.isExpanded)return!1;t=this.getParentNode(t)}return!0}selectNode(e){this.activeNode=e,this.choose.emit(e)}finishSelectNode(e){this.activeNode=e,this.finishChoose.emit(e)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["au-storage-tree"]],inputs:{items:"items"},outputs:{choose:"choose",finishChoose:"finishChoose"},decls:3,vars:3,consts:[[3,"dataSource","treeControl"],["cdkTreeNodePadding","","class","example-tree-node",3,"cdkTreeNodePaddingIndent","display","ngClass",4,"cdkTreeNodeDef"],["cdkTreeNodePadding","","class","example-tree-node",3,"cdkTreeNodePaddingIndent","display",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],["cdkTreeNodePadding","",1,"example-tree-node",3,"cdkTreeNodePaddingIndent","ngClass"],[1,"node",3,"click","dblclick"],["mat-icon-button","","disabled","",1,"node-button"],[1,"img",3,"ngClass"],[1,"node-name"],["cdkTreeNodePadding","",1,"example-tree-node",3,"cdkTreeNodePaddingIndent"],[1,"node",3,"click"],["mat-icon-button","","cdkTreeNodeToggle","",1,"node-button",3,"click"],[1,"mat-icon-rtl-mirror"],[1,"folder"]],template:function(e,t){1&e&&(Es(0,"cdk-tree",0),vs(1,GD,6,18,"cdk-tree-node",1),vs(2,qD,8,8,"cdk-tree-node",2),Ss()),2&e&&(Cs("dataSource",t.dataSource)("treeControl",t.treeControl),Ui(2),Cs("cdkTreeNodeDefWhen",t.hasChild))},directives:[VC,zC,UC,GC,sh,yE,qC,Iw],styles:[".example-tree-node[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}.example-tree-node.selected[_ngcontent-%COMP%], .example-tree-node[_ngcontent-%COMP%]:hover{background:#f5f5f5}.example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:8px 0}.example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:64px;min-width:64px;max-width:64px;height:64px;min-height:64px;max-height:64px;overflow:hidden;box-sizing:border-box;border-radius:3px;background-size:cover;background-image:url(\"data:image/svg+xml,%3Csvg width='64' height='64' viewBox='0 0 64 64' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M38.8956 6.89559C37.8954 5.8954 36.5389 5.3335 35.1244 5.3335H16.0002C14.5857 5.3335 13.2292 5.8954 12.229 6.89559C11.2288 7.89579 10.6669 9.25234 10.6669 10.6668V53.3335C10.6669 54.748 11.2288 56.1045 12.229 57.1047C13.2292 58.1049 14.5857 58.6668 16.0002 58.6668H48.0002C49.4147 58.6668 50.7712 58.1049 51.7714 57.1047C52.7716 56.1045 53.3335 54.748 53.3335 53.3335V23.5426C53.3335 22.1281 52.7716 20.7716 51.7714 19.7714L38.8956 6.89559Z' fill='%238FDAFF'/%3E%3Cpath d='M34.6669 8V24H50.6669L34.6669 8Z' fill='white'/%3E%3C/svg%3E%0A\");margin-right:8px}.example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .img.border[_ngcontent-%COMP%]{border:1px solid #ccc}.example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-name[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:20px;font-family:Roboto}.example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-button[_ngcontent-%COMP%]{max-width:20px;max-height:20px;line-height:20px}.example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-button[_ngcontent-%COMP%]:disabled{display:none}.example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-button[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{max-width:20px;max-height:20px;line-height:20px!important}.example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%], .example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]{width:64px;height:64px;margin-right:8px}.example-tree-node[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml,%3Csvg width='64' height='64' viewBox='0 0 64 64' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M28.2402 12.2398C27.2268 11.2265 25.8668 10.6665 24.4535 10.6665H10.6668C7.7335 10.6665 5.36016 13.0665 5.36016 15.9998L5.3335 47.9998C5.3335 50.9332 7.7335 53.3332 10.6668 53.3332H53.3335C56.2668 53.3332 58.6668 50.9332 58.6668 47.9998V21.3332C58.6668 18.3998 56.2668 15.9998 53.3335 15.9998H32.0002L28.2402 12.2398Z' fill='%238FDAFF'/%3E%3C/svg%3E%0A\")}"]}),e})(),QF=(()=>{let e=class{constructor(){this.files=new Xl,this.isActive=!1}dropFile(e){e.preventDefault(),e.stopPropagation(),this.isActive=!1,this.files.emit(this.multiply?Array.from(e.dataTransfer.files):[e.dataTransfer.files.item(0)])}markSpaceAsActive(e){e.preventDefault(),this.isActive=!0}markSpaceAsInactive(e){e.preventDefault(),this.isActive=!1}selectFiles(e){this.files.emit(Array.from(e.target.files))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["au-dropzone"]],inputs:{multiply:"multiply",acceptFiles:"acceptFiles",maxFileSize:"maxFileSize",minimize:"minimize"},outputs:{files:"files"},decls:14,vars:23,consts:[["for","uploader","dropzone","copy",1,"upload-space",3,"ngClass","drop","dragover","dragleave"],[1,"upload-space-label"],[1,"label"],["for","uploader"],[1,"max-size"],["type","file","id","uploader","name","uploader",1,"drop-zone-input",3,"multiple","accept","change"]],template:function(e,t){1&e&&(Es(0,"label",0),Ds("drop",function(e){return t.dropFile(e)})("dragover",function(e){return t.markSpaceAsActive(e)})("dragleave",function(e){return t.markSpaceAsInactive(e)}),Es(1,"div",1),Es(2,"div",2),la(3),Hl(4,"translate"),Hl(5,"translate"),Es(6,"label",3),la(7),Hl(8,"translate"),Ss(),Ss(),Es(9,"div",4),la(10),Hl(11,"translate"),Hl(12,"fileSize"),Ss(),Ss(),Ss(),Es(13,"input",5),Ds("change",function(e){return t.selectFiles(e)}),Ss()),2&e&&(Cs("ngClass",Fl(20,$D,t.isActive,t.minimize)),Ui(3),ha(" ",zl(4,8,"DROP_IMAGE"),", ",zl(5,10,"OR")," "),Ui(4),ca(zl(8,12,"BROWSE")),Ui(3),ha(" ",zl(11,14,"MAX_FILE_SIZE")," ",function(e,t,n,r,i){const o=Ot(),s=vt(o,32);return Wl(o,Ul(o,32)?jl(o,jt(),16,s.transform,n,"MB",0,s):s.transform(n,"MB",0))}(0,0,t.maxFileSize)," "),Ui(3),Cs("multiple",t.multiply)("accept",t.acceptFiles))},directives:[sh],pipes:[eC,YF],styles:[".upload-space[_ngcontent-%COMP%]{display:block;border:1px dashed #e5e5e5!important;cursor:pointer;box-sizing:border-box;min-height:290px;display:flex;justify-content:center;align-items:center}.upload-space.minimize[_ngcontent-%COMP%]{min-height:185px}.upload-space[_ngcontent-%COMP%]   .upload-space-label[_ngcontent-%COMP%]{font-family:Roboto}.upload-space[_ngcontent-%COMP%]   .upload-space-label[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px;text-align:center}.upload-space[_ngcontent-%COMP%]   .upload-space-label[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#1fb6ff;cursor:pointer}.upload-space[_ngcontent-%COMP%]   .upload-space-label[_ngcontent-%COMP%]   .max-size[_ngcontent-%COMP%]{color:#686868;font-size:14px;line-height:20px;text-align:center}.upload-space.active[_ngcontent-%COMP%]{border:1px dashed #2b8eff!important}.drop-zone-input[_ngcontent-%COMP%]{display:none}"]}),e})(),ZF=(()=>{let e=class{constructor(e){this._sanitizer=e}transform(e){return this._sanitizer.bypassSecurityTrustResourceUrl(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(nd))},e.\u0275pipe=Ke({name:"sanitize",type:e,pure:!0}),e=AC([DC("design:paramtypes",[nd])],e),e})();class JF{constructor(e){this.overlayRef=e,this.selected=new x,this._beforeClose=new x,this._afterClosed=new x}close(e){null!=e&&this.selected.next(e),this.selected.complete(),this.componentInstance.animationStateChanged.pipe(xd(e=>"start"===e.phaseName),Od(1)).subscribe(()=>{this._beforeClose.next(),this._beforeClose.complete(),this.overlayRef.detachBackdrop()}),this.componentInstance.animationStateChanged.pipe(xd(e=>"done"===e.phaseName&&"void"===e.toState),Od(1)).subscribe(()=>{this.overlayRef.dispose(),this._afterClosed.next(),this._afterClosed.complete(),this.componentInstance=null}),this.componentInstance.startExitAnimation()}afterClosed(){return this._afterClosed.asObservable()}beforeClose(){return this._beforeClose.asObservable()}}const eL=new Xn("STORAGE_OVERLAY_CONFIG");let tL=(()=>{let e=class{constructor(e,t){this.storageOverlayRef=e,this.config=t,this.treePanelMaxHeight=KD.EXPLORER_PANEL_MAX_HEIGHT,this.animationState="showing",this.animationStateChanged=new Xl}ngOnInit(){}onAnimationStart(e){this.animationStateChanged.emit(e)}onAnimationDone(e){this.animationStateChanged.emit(e)}startExitAnimation(){this.animationState="void"}selectItem(e){this.selected=e,this.storageOverlayRef.close(this.selected)}close(e){this.storageOverlayRef.close(e)}};return e.\u0275fac=function(t){return new(t||e)(ws(JF),ws(eL))},e.\u0275cmp=Ue({type:e,selectors:[["au-storage-overlay"]],decls:4,vars:10,consts:[["cdkTrapFocus","","cdkTrapFocusAutoCapture","",1,"tree-panel-wrap"],[1,"tree-panel"],["perfectScrollbar","",1,"tree-container"],[3,"acceptFiles","maxFileSize","multiply","allowUpload","allowMediaLib","root","close","selectMedia","selectFile"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"div",1),Ds("@transformPanel.start",function(e){return t.onAnimationStart(e)})("@transformPanel.done",function(e){return t.onAnimationDone(e)}),Es(2,"div",2),Es(3,"au-explorer",3),Ds("close",function(){return t.close()})("selectMedia",function(e){return t.selectItem(e)})("selectFile",function(e){return t.selectItem(e)}),Ss(),Ss(),Ss(),Ss()),2&e&&(Cs("@transformPanelWrap",void 0),Ui(1),Cs("@transformPanel",t.animationState),Ui(1),Ks("max-height",t.treePanelMaxHeight,"px"),Ui(1),Cs("acceptFiles",t.config.explorerConfig.acceptFiles)("maxFileSize",t.config.explorerConfig.maxFileSize)("multiply",t.config.explorerConfig.multiply)("allowUpload",t.config.explorerConfig.allowUpload)("allowMediaLib",t.config.explorerConfig.allowMediaLib)("root",t.config.explorerConfig.root))},directives:[qF],styles:[".tree-panel[_ngcontent-%COMP%]{min-width:100%;border-radius:3px;background-color:#fff;box-shadow:0 8px 24px rgba(0,0,0,.25)}.tree-container[_ngcontent-%COMP%]{overflow:hidden;position:relative}.buttons-container[_ngcontent-%COMP%]{padding:0 10px;margin-top:8px;text-align:right}button[_ngcontent-%COMP%]{margin-left:10px}"],data:{animation:[uF.transformPanelWrap,uF.transformPanel]}}),e=AC([MC(1,ur(eL)),DC("design:paramtypes",[JF,Object])],e),e})();const nL={hasBackdrop:!0,panelClass:"au-tree-overlay-panel",explorerConfig:{multiply:!1,allowMediaLib:!0,allowUpload:!0}};let rL=(()=>{let e=class{constructor(e,t,n){this.injector=e,this.overlay=t,this.viewportRuler=n}open(e,t){const n=Object(hx.merge)(nL,e),r=this.createOverlay(n,t),i=new JF(r),o=this.attachTreeContainer(r,n,i);return i.componentInstance=o,r.backdropClick().subscribe(()=>i.close()),i}createOverlay(e,t){const n=this.getOverlayConfig(e,t);return this.overlay.create(n)}getOverlayConfig(e,t){const n=this.overlay.position().flexibleConnectedTo(t).withGrowAfterOpen(!0).withPositions(this.calculatePositions(t));return new h_({hasBackdrop:e.hasBackdrop,backdropClass:e.backdropClass,panelClass:e.panelClass,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:n})}createInjector(e,t){const n=new WeakMap;return n.set(JF,t),n.set(eL,e),new vf(this.injector,n)}attachTreeContainer(e,t,n){const r=this.createInjector(t,n),i=new hf(tL,null,r);return e.attach(i).instance}calculatePositions(e){const t=this.viewportRuler.getViewportSize();return e.nativeElement.getBoundingClientRect().top>t.height/2?[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"}]:[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]}};return e.\u0275fac=function(t){return new(t||e)(sr(ns),sr(O_),sr(Qy))},e.\u0275prov=de({token:e,factory:function(t){return e.\u0275fac(t)}}),e=AC([DC("design:paramtypes",[ns,O_,Qy])],e),e})();var iL;let oL=(()=>{let e=iL=class{constructor(e,t,n,r){this.storageOverlay=e,this.elementRef=t,this._mediaLibSrv=n,this._expUpSrv=r,this.focus=new Xl,this.blur=new Xl}open(e){if(!this.disabled){const t=this.storageOverlay.open({backdropClass:"cdk-overlay-transparent-backdrop",explorerConfig:{acceptFiles:this.acceptFiles,allowMediaLib:this.allowMediaLib,allowUpload:this.allowUpload,maxFileSize:this.maxFileSize,multiply:this.multiply,root:this.root}},this.elementRef);this.focus.emit(e),t.selected.subscribe(e=>{this.onChange(e),this.blur.emit()})}}ngOnInit(){}onChange(e){this.selected=e;const t=this.selected;this.propagateChange(t),this.propagateTouch(t)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}setDisabledState(e){this.disabled=e}writeValue(e){"string"==typeof e&&this._mediaLibSrv.getFile(e).then(t=>{const n=new HF;n.name=t.name,n.preview=this._expUpSrv.createTreePreview(e),this.selected=n}),e||(this.selected=null)}};return e.\u0275fac=function(t){return new(t||e)(ws(rL),ws(Da),ws(UF),ws(zF))},e.\u0275cmp=Ue({type:e,selectors:[["au-storage-select"]],inputs:{acceptFiles:"acceptFiles",allowMediaLib:"allowMediaLib",allowUpload:"allowUpload",maxFileSize:"maxFileSize",multiply:"multiply",root:"root"},outputs:{focus:"focus",blur:"blur"},features:[Ta([rL,{provide:rv,useExisting:oe(()=>iL),multi:!0}])],decls:5,vars:6,consts:[["appearance","outline",3,"click"],["matInput","",1,"cdk-visually-hidden",3,"disabled","keyup.enter"],[1,"on-preview-value",3,"ngClass"],["class","image-square",3,"src",4,"ngIf"],[1,"image-square",3,"src"]],template:function(e,t){1&e&&(Es(0,"mat-form-field",0),Ds("click",function(e){return t.open(e)}),Es(1,"input",1),Ds("keyup.enter",function(e){return t.open(e)}),Ss(),Es(2,"span",2),vs(3,YD,3,5,"img",3),la(4),Ss(),Ss()),2&e&&(Ui(1),Cs("disabled",t.disabled),Ui(1),Cs("ngClass",Dl(4,iM,t.disabled)),Ui(1),Cs("ngIf",null==t.selected?null:t.selected.preview),Ui(1),ua(" ",(null==t.selected?null:t.selected.name)||"Not selected"," "))},directives:[eS,uS,sh,uh],pipes:[ZF,Eh],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%;cursor:pointer;overflow:hidden}.mat-form-field.mat-form-field-disabled[_ngcontent-%COMP%]{cursor:default}input[_ngcontent-%COMP%]{cursor:pointer}input[_ngcontent-%COMP%]:disabled{cursor:default}.on-preview-value[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center;flex-direction:row;white-space:nowrap;text-overflow:ellipsis}.on-preview-value.disabled[_ngcontent-%COMP%]{color:#00000061}img[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain;width:46px;height:46px;border:1px solid #eaeaec;border-radius:2px;position:relative;margin-right:9px}"]}),e=iL=AC([DC("design:paramtypes",[rL,Da,UF,zF])],e),e})();class sL{getTranslation(e){return new _(e=>e.next({SELECT_IMAGE:"Select image",MEDIA_LIBRARY:"Media Library",UPLOAD_FILE:"Upload File",DROP_IMAGE:"Drop your image here",OR:"or",BROWSE:"browse",MAX_FILE_SIZE:"Max file size is",SELECT:"Select",CANCEL:"Cancel",EXCEEDED_FILE_SIZE:"File size exceeded",INVALID_FILE_TYPE:"Invalid file type",ABORTED:"Upload aborted"}))}}let aL=(()=>{let e=class{constructor(e){this.translate=e,this.translate.setDefaultLang("en"),this.translate.use("en")}};return e.\u0275fac=function(t){return new(t||e)(sr(Jw))},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[VF,zF,XF,UF,rL],imports:[[_E,HO,Ok,xC,ev,CS,Fg,Ow,tS,hS,tC.forRoot({loader:{provide:Mw,useClass:sL}}),$C],tS,hS]}),e=AC([DC("design:paramtypes",[Jw])],e),e})(),lL=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[],imports:[[Oh,Tb,Ib,kO,_F,aL,tS,CS,_E,hS,EP,qP,Ow,cT,xC]]}),e})();const cL=["\u2022","\u25cb","\xa4","\u2665","\u2666","\u2663","\u2660","\u2191","\u2193","\u2192","\u2190","\u25b2","\u25bc","\u25ba","\u25c4","\xa9","\xae","\xa7","\u2122","\xa5","\u20ac","\xa2","\xa3"],uL=[.25,.5,.75,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3],hL=[3,2,1.5,1,.5];var dL,pL,fL;function mL(e){var t;switch(null==e?void 0:e.unit){case dL.Mm:return.352777778;case dL.Cm:return.0352777778;case dL.Inch:return.0138888889;case dL.Custom:return null!==(t=null==e?void 0:e.customUnitScale)&&void 0!==t?t:1;case dL.Point:default:return 1}}!function(e){e.Mm="Mm",e.Inch="Inch",e.Cm="Cm",e.Point="Point",e.Custom="Custom"}(dL||(dL={})),function(e){e[e.Default=0]="Default",e[e.Html=1]="Html",e[e.None=2]="None"}(pL||(pL={})),function(e){e.Overlay="Overlay",e.Normal="Normal"}(fL||(fL={}));const gL={configuration:{stubImages:{barcode:{postScriptName:"ArialMT",text:"SampleText"}},rulers:{enabled:!0,unit:dL.Point,origin:{X:0,Y:0}},historySize:0,violationService:{enabled:!0,textCropViolationWarningEnabled:!1,violationWarningButtonsEnabled:!0,qualityChangeContainersEnabled:!0,bleedViolationWarningEnabled:!1,safetyLineViolationWarningEnabled:!1,regionViolationWarningEnabled:!1,qualityMeter:{enabled:!0,qualityLevels:{bad:50,warning:100},renderingDpi:300}}},canvas:{selectionColor:"rgb(48, 194, 255)",resizeGripLineColor:"rgb(48, 194, 255)",rotationGripLineColor:"rgb(48, 194, 255)",selectionWidth:1,resizeGripSize:8,handleButtonCssClass:"cc-icon-placeholder-handle",doneButtonCssClass:"cc-icon-placeholder-done",selectImageButtonCssClass:"cc-icon-placeholder-select",canvasItemHoverEnabled:!1,violationWarningButtonsEnabled:!0,qualityChangeContainersEnabled:!1},extras:{clearSelectionOnDocumentClick:!0,rulerScale:1/72},handlersConfig:{snapLinesHandler:{snapElements:{items:{enabled:!1,color:"rgb(255,0,255)",priority:0,tolerance:5},printArea:{enabled:!1,color:"rgb(255,0,255)",priority:0,tolerance:5},region:{enabled:!1,color:"rgb(255,0,255)",priority:0,tolerance:5},safetyLines:{enabled:!1,color:"rgb(255,0,255)",priority:0,tolerance:5}}}}};var yL,_L,vL=(_L=function(e,t){return(_L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}_L(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),bL=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wL=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},CL=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(wL(arguments[t]));return e},xL=function(){function e(){this._listeners=[]}return e.prototype.add=function(e){this._listeners.includes(e)||this._listeners.push(e)},e.prototype.remove=function(e){this._listeners=this._listeners.filter(function(t){return t!==e})},e.prototype.listenersCount=function(){return this._listeners.length},e.prototype.notify=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{for(var i=bL(this._listeners),o=i.next();!o.done;o=i.next()){var s=o.value;s.apply(void 0,CL(n))}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e}(),EL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vL(t,e),t.prototype.add=function(t){e.prototype.add.call(this,t)},t.prototype.remove=function(t){e.prototype.remove.call(this,t)},t.prototype.notify=function(t){e.prototype.notify.call(this,t)},t.prototype.fire=function(e){this.notify(e)},t}(xL),SL=function(e){function t(t){var n=e.call(this)||this;return n._sender=t,n}return vL(t,e),t.prototype.add=function(t){e.prototype.add.call(this,t)},t.prototype.remove=function(t){e.prototype.remove.call(this,t)},t.prototype.notify=function(t){e.prototype.notify.call(this,this._sender,t)},t.prototype.fire=function(e){this.notify(e)},t}(xL),PL=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n._sender=t,n}return vL(t,e),t.prototype.add=function(t){e.prototype.add.call(this,t)},t.prototype.remove=function(t){e.prototype.remove.call(this,t)},t.prototype.notify=function(t,n){e.prototype.notify.call(this,t,n)},t}(xL),TL=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),IL=function(e){function t(n){var r=e.call(this,n)||this;return r.name="CustomersCanvasException",Object.setPrototypeOf(r,t.prototype),r}return TL(t,e),t.prototype.toString=function(){return this.name+": "+this.message},t.prototype.toJSON=function(){return{name:this.name,innerException:this.innerException,message:this.message}},t}(Error),OL=function(e){function t(n){var r=e.call(this,n)||this;return r.name="NotImplementedException",Object.setPrototypeOf(r,t.prototype),r}return TL(t,e),t}(IL),kL=function(e){function t(n){var r=e.call(this,n)||this;return r.name="ArgumentException",Object.setPrototypeOf(r,t.prototype),r}return TL(t,e),t}(IL),RL=function(e){function t(n){var r=e.call(this,n)||this;return r.name="ArgumentNullException",Object.setPrototypeOf(r,t.prototype),r}return TL(t,e),t}(kL),AL=function(e){function t(n){var r=e.call(this,n)||this;return r.name="OutOfRangeException",Object.setPrototypeOf(r,t.prototype),r}return TL(t,e),t}(IL),ML=function(e){function t(n){var r=e.call(this,n)||this;return r.name="InvalidOperationException",Object.setPrototypeOf(r,t.prototype),r}return TL(t,e),t}(IL),DL=(TL(function e(t){var n=yL.call(this,t)||this;return n.name="UnexpectedDataException",Object.setPrototypeOf(n,e.prototype),n},yL=IL),function(){function e(e){this._value="00000000-0000-0000-0000-000000000000",null!=e?this.set(e):this.generateNewGuid()}return e.prototype.set=function(e){if(!this.isValid(e))throw new IL(e+"is incorrect uuid!");this._value=e},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.isValid=function(e){return e=e.toUpperCase(),null!=new RegExp("\\b(?:[A-F0-9]{8})(?:-[A-F0-9]{4}){3}-(?:[A-F0-9]{12})\\b").exec(e)},e.prototype.generateNewGuid=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});this.set(t)},e.prototype.toString=function(){return this._value},e.prototype.equals=function(e){return e._value===this._value},e}()),FL=n("F/us"),LL={IsIos:function(){return(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream},GetIosVersion:function(){if(null==navigator.appVersion||!LL.IsIos())return[];var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return null==e?[]:e.slice(1).map(function(e){return parseInt(e,10)}).map(function(e){return isNaN(e)?null:e})},IosMajorVersion:function(){var e=navigator.userAgent,t=e.indexOf("OS ");if(t>-1)return Number(e.substr(t+3,3).replace("_",".").charAt(0))},IsAndroid:function(){return!!navigator.userAgent.toLowerCase().match(/(android)/)},IsTouchDevice:function(){return LL.IsIos()||LL.IsAndroid()||LL.IsTouchIE()},IsNativeAndroidBrowser:function(){var e=navigator.userAgent;return e.indexOf("Mozilla/5.0")>-1&&e.indexOf("Android ")>-1&&e.indexOf("AppleWebKit")>-1&&!(e.indexOf("Chrome")>-1)},IsGoogleChrome:function(){return"object"==typeof window.chrome},IsSafari:function(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")},IsSafariOrSafariWebView:function(){return LL.IsSafari()||LL.IsIos()},IsFirefox:function(){return-1!==navigator.userAgent.indexOf("Firefox")&&-1===navigator.userAgent.indexOf("Seamonkey")},IsTouchIE:function(){return-1!==navigator.userAgent.indexOf("Trident")&&-1!==navigator.userAgent.indexOf("Touch")},IsIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0},IsEdge:function(){return-1!=navigator.userAgent.indexOf("Edge")},GetEdgeHtmlVersion:function(){return LL.IsEdge()?navigator.userAgent.match(/Edge\/(\d+).(\d+)/).slice(1).map(function(e){return parseInt(e,10)}).map(function(e){return isNaN(e)?null:e}):[]},get devicePixelRatio(){return null!=window.devicePixelRatio?window.devicePixelRatio:1},get screenDpi(){return 96*LL.devicePixelRatio},IsSmallScreen:function(){return window.innerWidth<=500}},BL=LL,NL=function(e,t){return e===t||e!=e&&t!=t},jL=function(e,t){for(var n=e.length;n--;)if(NL(e[n][0],t))return n;return-1},HL=Array.prototype.splice;function zL(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}zL.prototype.clear=function(){this.__data__=[],this.size=0},zL.prototype.delete=function(e){var t=this.__data__,n=jL(t,e);return!(n<0||(n==t.length-1?t.pop():HL.call(t,n,1),--this.size,0))},zL.prototype.get=function(e){var t=this.__data__,n=jL(t,e);return n<0?void 0:t[n][1]},zL.prototype.has=function(e){return jL(this.__data__,e)>-1},zL.prototype.set=function(e,t){var n=this.__data__,r=jL(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var VL,UL=zL,WL=n("Ju5/"),XL=WL.a.Symbol,GL=Object.prototype,qL=GL.hasOwnProperty,$L=GL.toString,YL=XL?XL.toStringTag:void 0,KL=Object.prototype.toString,QL=XL?XL.toStringTag:void 0,ZL=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":QL&&QL in Object(e)?function(e){var t=qL.call(e,YL),n=e[YL];try{e[YL]=void 0;var r=!0}catch(o){}var i=$L.call(e);return r&&(t?e[YL]=n:delete e[YL]),i}(e):function(e){return KL.call(e)}(e)},JL=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},eB=function(e){if(!JL(e))return!1;var t=ZL(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},tB=WL.a["__core-js_shared__"],nB=(VL=/[^.]+$/.exec(tB&&tB.keys&&tB.keys.IE_PROTO||""))?"Symbol(src)_1."+VL:"",rB=Function.prototype.toString,iB=function(e){if(null!=e){try{return rB.call(e)}catch(t){}try{return e+""}catch(t){}}return""},oB=/^\[object .+?Constructor\]$/,sB=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aB=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!JL(e)||(t=e,nB&&nB in t))&&(eB(e)?sB:oB).test(iB(e));var t}(n)?n:void 0},lB=aB(WL.a,"Map"),cB=aB(Object,"create"),uB=Object.prototype.hasOwnProperty,hB=Object.prototype.hasOwnProperty;function dB(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}dB.prototype.clear=function(){this.__data__=cB?cB(null):{},this.size=0},dB.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},dB.prototype.get=function(e){var t=this.__data__;if(cB){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return uB.call(t,e)?t[e]:void 0},dB.prototype.has=function(e){var t=this.__data__;return cB?void 0!==t[e]:hB.call(t,e)},dB.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=cB&&void 0===t?"__lodash_hash_undefined__":t,this};var pB=dB,fB=function(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function mB(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mB.prototype.clear=function(){this.size=0,this.__data__={hash:new pB,map:new(lB||UL),string:new pB}},mB.prototype.delete=function(e){var t=fB(this,e).delete(e);return this.size-=t?1:0,t},mB.prototype.get=function(e){return fB(this,e).get(e)},mB.prototype.has=function(e){return fB(this,e).has(e)},mB.prototype.set=function(e,t){var n=fB(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var gB=mB;function yB(e){var t=this.__data__=new UL(e);this.size=t.size}yB.prototype.clear=function(){this.__data__=new UL,this.size=0},yB.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},yB.prototype.get=function(e){return this.__data__.get(e)},yB.prototype.has=function(e){return this.__data__.has(e)},yB.prototype.set=function(e,t){var n=this.__data__;if(n instanceof UL){var r=n.__data__;if(!lB||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new gB(r)}return n.set(e,t),this.size=n.size,this};var _B=yB,vB=function(){try{var e=aB(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),bB=function(e,t,n){"__proto__"==t&&vB?vB(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},wB=Object.prototype.hasOwnProperty,CB=function(e,t,n){var r=e[t];wB.call(e,t)&&NL(r,n)&&(void 0!==n||t in e)||bB(e,t,n)},xB=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=r?r(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),i?bB(n,a,l):CB(n,a,l)}return n},EB=function(e){return null!=e&&"object"==typeof e},SB=function(e){return EB(e)&&"[object Arguments]"==ZL(e)},PB=Object.prototype,TB=PB.hasOwnProperty,IB=PB.propertyIsEnumerable,OB=SB(function(){return arguments}())?SB:function(e){return EB(e)&&TB.call(e,"callee")&&!IB.call(e,"callee")},kB=Array.isArray,RB=n("WOAq"),AB=/^(?:0|[1-9]\d*)$/,MB=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&AB.test(e))&&e>-1&&e%1==0&&e<t},DB=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},FB={};FB["[object Float32Array]"]=FB["[object Float64Array]"]=FB["[object Int8Array]"]=FB["[object Int16Array]"]=FB["[object Int32Array]"]=FB["[object Uint8Array]"]=FB["[object Uint8ClampedArray]"]=FB["[object Uint16Array]"]=FB["[object Uint32Array]"]=!0,FB["[object Arguments]"]=FB["[object Array]"]=FB["[object ArrayBuffer]"]=FB["[object Boolean]"]=FB["[object DataView]"]=FB["[object Date]"]=FB["[object Error]"]=FB["[object Function]"]=FB["[object Map]"]=FB["[object Number]"]=FB["[object Object]"]=FB["[object RegExp]"]=FB["[object Set]"]=FB["[object String]"]=FB["[object WeakMap]"]=!1;var LB=function(e){return function(t){return e(t)}},BB=n("xutz"),NB=BB.a&&BB.a.isTypedArray,jB=NB?LB(NB):function(e){return EB(e)&&DB(e.length)&&!!FB[ZL(e)]},HB=Object.prototype.hasOwnProperty,zB=function(e,t){var n=kB(e),r=!n&&OB(e),i=!n&&!r&&Object(RB.a)(e),o=!n&&!r&&!i&&jB(e),s=n||r||i||o,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=a.length;for(var c in e)!t&&!HB.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||MB(c,l))||a.push(c);return a},VB=Object.prototype,UB=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||VB)},WB=function(e,t){return function(n){return e(t(n))}},XB=WB(Object.keys,Object),GB=Object.prototype.hasOwnProperty,qB=function(e){return null!=e&&DB(e.length)&&!eB(e)},$B=function(e){return qB(e)?zB(e):function(e){if(!UB(e))return XB(e);var t=[];for(var n in Object(e))GB.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},YB=Object.prototype.hasOwnProperty,KB=function(e){return qB(e)?zB(e,!0):function(e){if(!JL(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=UB(e),n=[];for(var r in e)("constructor"!=r||!t&&YB.call(e,r))&&n.push(r);return n}(e)},QB=n("3/ER"),ZB=function(){return[]},JB=Object.prototype.propertyIsEnumerable,eN=Object.getOwnPropertySymbols,tN=eN?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var r=-1,i=null==t?0:t.length,o=0,s=[];++r<i;){var a=t[r];JB.call(e,a)&&(s[o++]=a)}return s}(eN(e)))}:ZB,nN=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},rN=WB(Object.getPrototypeOf,Object),iN=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)nN(t,tN(e)),e=rN(e);return t}:ZB,oN=function(e,t,n){var r=t(e);return kB(e)?r:nN(r,n(e))},sN=function(e){return oN(e,$B,tN)},aN=function(e){return oN(e,KB,iN)},lN=aB(WL.a,"DataView"),cN=aB(WL.a,"Promise"),uN=aB(WL.a,"Set"),hN=aB(WL.a,"WeakMap"),dN=iB(lN),pN=iB(lB),fN=iB(cN),mN=iB(uN),gN=iB(hN),yN=ZL;(lN&&"[object DataView]"!=yN(new lN(new ArrayBuffer(1)))||lB&&"[object Map]"!=yN(new lB)||cN&&"[object Promise]"!=yN(cN.resolve())||uN&&"[object Set]"!=yN(new uN)||hN&&"[object WeakMap]"!=yN(new hN))&&(yN=function(e){var t=ZL(e),n="[object Object]"==t?e.constructor:void 0,r=n?iB(n):"";if(r)switch(r){case dN:return"[object DataView]";case pN:return"[object Map]";case fN:return"[object Promise]";case mN:return"[object Set]";case gN:return"[object WeakMap]"}return t});var _N=yN,vN=Object.prototype.hasOwnProperty,bN=WL.a.Uint8Array,wN=function(e){var t=new e.constructor(e.byteLength);return new bN(t).set(new bN(e)),t},CN=/\w*$/,xN=XL?XL.prototype:void 0,EN=xN?xN.valueOf:void 0,SN=Object.create,PN=function(){function e(){}return function(t){if(!JL(t))return{};if(SN)return SN(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),TN=BB.a&&BB.a.isMap,IN=TN?LB(TN):function(e){return EB(e)&&"[object Map]"==_N(e)},ON=BB.a&&BB.a.isSet,kN=ON?LB(ON):function(e){return EB(e)&&"[object Set]"==_N(e)},RN={};RN["[object Arguments]"]=RN["[object Array]"]=RN["[object ArrayBuffer]"]=RN["[object DataView]"]=RN["[object Boolean]"]=RN["[object Date]"]=RN["[object Float32Array]"]=RN["[object Float64Array]"]=RN["[object Int8Array]"]=RN["[object Int16Array]"]=RN["[object Int32Array]"]=RN["[object Map]"]=RN["[object Number]"]=RN["[object Object]"]=RN["[object RegExp]"]=RN["[object Set]"]=RN["[object String]"]=RN["[object Symbol]"]=RN["[object Uint8Array]"]=RN["[object Uint8ClampedArray]"]=RN["[object Uint16Array]"]=RN["[object Uint32Array]"]=!0,RN["[object Error]"]=RN["[object Function]"]=RN["[object WeakMap]"]=!1;var AN=function e(t,n,r,i,o,s){var a,l=1&n,c=2&n,u=4&n;if(r&&(a=o?r(t,i,o,s):r(t)),void 0!==a)return a;if(!JL(t))return t;var h=kB(t);if(h){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&vN.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!l)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(t,a)}else{var d=_N(t),p="[object Function]"==d||"[object GeneratorFunction]"==d;if(Object(RB.a)(t))return Object(QB.a)(t,l);if("[object Object]"==d||"[object Arguments]"==d||p&&!o){if(a=c||p?{}:function(e){return"function"!=typeof e.constructor||UB(e)?{}:PN(rN(e))}(t),!l)return c?function(e,t){return xB(e,iN(e),t)}(t,function(e,t){return e&&xB(t,KB(t),e)}(a,t)):function(e,t){return xB(e,tN(e),t)}(t,function(e,t){return e&&xB(t,$B(t),e)}(a,t))}else{if(!RN[d])return o?t:{};a=function(e,t,n){var r,i,o=e.constructor;switch(t){case"[object ArrayBuffer]":return wN(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var n=t?wN(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?wN(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(i=new(r=e).constructor(r.source,CN.exec(r))).lastIndex=r.lastIndex,i;case"[object Set]":return new o;case"[object Symbol]":return EN?Object(EN.call(e)):{}}}(t,d,l)}}s||(s=new _B);var f=s.get(t);if(f)return f;s.set(t,a),kN(t)?t.forEach(function(i){a.add(e(i,n,r,i,t,s))}):IN(t)&&t.forEach(function(i,o){a.set(o,e(i,n,r,o,t,s))});var m=h?void 0:(u?c?aN:sN:c?KB:$B)(t);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n););}(m||t,function(i,o){m&&(i=t[o=i]),CB(a,o,e(i,n,r,o,t,s))}),a},MN=function(){function e(e,t){this.x=0,this.y=0,this.x=e||0,this.y=t||0}return e.prototype.rotate=function(t){return this.rotateAt(t,new e(0,0))},e.prototype.rotateAt=function(t,n){n||(n=new e(0,0));var r=zN(t),i=Math.cos(r)*(this.x-n.x)-Math.sin(r)*(this.y-n.y)+n.x,o=Math.sin(r)*(this.x-n.x)+Math.cos(r)*(this.y-n.y)+n.y;return this.x=i,this.y=o,this},e.prototype.translate=function(e,t){return this.x=this.x+e,this.y=this.y+t,this},e.prototype.scale=function(e,t){return this.x=this.x*e,this.y=this.y*t,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(e,t){return null!=e&&WN(this.x,e.x,t)&&WN(this.y,e.y,t)},e.isEqual=function(e,t,n){return void 0===n&&(n=1e-4),null==e&&null==t||null!=e&&null!=t&&e.equals(t)},e.prototype.distance=function(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))},e.prototype.transform=function(t,n){return null==n&&(n=new e),this.translate(-n.x,-n.y),this.scale(t.scaleX,t.scaleY),this.rotate(t.angle),this.translate(t.translateX,t.translateY),this.translate(n.x,n.y),this},e.prototype.toString=function(){return[this.x,this.y].join(",")},e.prototype.toIPoint=function(){return{x:this.x,y:this.y}},e.fromIPoint=function(t){return new e(t.x,t.y)},e.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},e.prototype.isOrigin=function(){return 0===this.x&&0===this.y},e}(),DN=function(){function e(e,t,n,r,i,o){if(6==arguments.length)this.setTransform(e,t,n,r,i,o);else{if(0!=arguments.length)throw new Error("Arguments error");this.setTransform(1,0,0,1,0,0)}}return e.prototype.setTransform=function(e,t,n,r,i,o){this.m00=e,this.m10=t,this.m01=n,this.m11=r,this.m02=i,this.m12=o},e.prototype.transformPoint=function(e,t){void 0===t&&(t=!1);var n=t?new MN:e,r=e.x,i=e.y;return n.x=r*this.m00+i*this.m01+this.m02,n.y=r*this.m10+i*this.m11+this.m12,n},e.prototype.concatenate=function(e){var t=this.m00,n=this.m01;return this.m00=e.m00*t+e.m10*n,this.m01=e.m01*t+e.m11*n,this.m02+=e.m02*t+e.m12*n,this.m10=e.m00*(t=this.m10)+e.m10*(n=this.m11),this.m11=e.m01*t+e.m11*n,this.m12+=e.m02*t+e.m12*n,this},e.prototype.rotate=function(t){t=zN(t);var n=Math.cos(t),r=Math.sin(t);return this.concatenate(new e(n,r,-r,n,0,0))},e.prototype.rotateAt=function(e,t,n){return this.translate(t,n),this.rotate(e),this.translate(-t,-n),this},e.prototype.scale=function(t,n){return this.concatenate(new e(t,0,0,n,0,0))},e.prototype.scaleRelativeToPoint=function(t,n,r){return this.concatenate(new e(t,0,0,n,r.x*(1-t),r.y*(1-n)))},e.prototype.translate=function(t,n){return this.concatenate(new e(1,0,0,1,t,n))},Object.defineProperty(e.prototype,"angle",{get:function(){return VN(Math.atan(-this.m01/this.m00))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return Math.sqrt(this.m00*this.m00+this.m10*this.m10)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return Math.sqrt(this.m01*this.m01+this.m11*this.m11)},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12)},e.prototype.updateObjectByMatrix=function(e,t,n){if(null==e)throw new kL("object cannot be null");if(!FL.isNumber(e[t])||!FL.isNumber(e[t]))throw new kL("object members by given keys nust be a numbers!");var r=this.transformPoint(new MN(e[t],e[n]));return e[t]=r.x,e[n]=r.y,e},e}(),FN=function(){function e(e,t,n,r){this._propertyChanged=new PL,this._left="number"==typeof e?e:0,this._top="number"==typeof t?t:0,this._width="number"==typeof n?n:2,this._height="number"==typeof r?r:2,this._id=Math.random().toString()}return e.prototype.toJSON=function(){return{left:this.left,top:this.top,width:this.width,height:this.height,id:this._id}},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){WN(t,this._left,e._tolerance)||(this._left=t,this._propertyChanged.notify(this,"left"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},set:function(t){WN(t,this._top,e._tolerance)||(this._top=t,this._propertyChanged.notify(this,"top"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){WN(t,this._width,e._tolerance)||(this._width=t,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){WN(t,this._height,e._tolerance)||(this._height=t,this._propertyChanged.notify(this,"height"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.FromLTRB=function(t,n,r,i){return new e(t,n,r-t,i-n)},e.FromObject=function(t){return new e(t.left,t.top,t.width,t.height)},e.intersect=function(t,n){var r=Math.max(t.left,n.left),i=Math.min(t.right,n.right),o=Math.max(t.top,n.top),s=Math.min(t.bottom,n.bottom);return i>=r&&s>=o?new e(r,o,i-r,s-o):e.empty},e.union=function(t,n){var r=Math.min(t.left,n.left),i=Math.max(t.left+t.width,n.left+n.width),o=Math.min(t.top,n.top);return new e(r,o,i-r,Math.max(t.top+t.height,n.top+n.height)-o)},Object.defineProperty(e,"empty",{get:function(){return new e(0,0,-1,-1)},enumerable:!0,configurable:!0}),e.prototype.equals=function(t){return e.isEqual(this,t)},e.isEqual=function(e,t,n){return void 0===n&&(n=1e-4),null==e&&null==t||null!=e&&null!=t&&WN(e.left,t.left,n)&&WN(e.top,t.top,n)&&WN(e.width,t.width,n)&&WN(e.height,t.height,n)},e.prototype.contains=function(e,t,n){if(null==t&&(t=!1),t){"number"!=typeof n&&(n=1e-4);var r=this.left,i=this.top,o=this.left+this.width,s=this.top+this.height;return(e.x>r||WN(e.x,r,n))&&(e.y>i||WN(e.y,i,n))&&(e.x<o||WN(e.x,o,n))&&(e.y<s||WN(e.y,s,n))}return e.x>this.left&&e.y>this.top&&e.x<this.left+this.width&&e.y<this.top+this.height},e.prototype.containsRectangle=function(e){var t=new MN(e.left,e.top),n=new MN(e.right,e.bottom);return this.contains(t,!0)&&this.contains(n,!0)},e.prototype.clone=function(){return new e(this.left,this.top,this.width,this.height)},e.prototype.isEmpty=function(){return this.width<=0||this.height<=0},e.prototype.inflate=function(e){this.left-=e,this.top-=e,this.width+=2*e,this.height+=2*e},e.prototype.intersectsWith=function(e){return e.left<this.right&&this.left<e.right&&e.top<this.bottom&&this.top<e.bottom},e.prototype.updateByMatrix=function(e){if(0!==e.angle)throw new kL("RectangleF cannot be transformed by angle!");var t=new MN(this.left,this.top),n=new MN(this.right,this.bottom),r=e.transformPoint(t),i=e.transformPoint(n);return this.left=r.x,this.top=r.y,this.right=i.x,this.bottom=i.y,this},e.prototype.getShrinked=function(t){return e.FromLTRB(this.left-t.left,this.top-t.top,this.right+t.right,this.bottom+t.bottom)},e.prototype.toString=function(){return[this.left,this.top,this.width,this.height].join(",")},e.fromString=function(t){var n=t.replace(", ",",").split(",");return new e(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]))},e.getMatrix=function(e,t){var n=new DN,r=e.center,i=t.center;return n.scaleRelativeToPoint(t.width/e.width,t.height/e.height,r),n.translate((i.x-r.x)/n.scaleX,(i.y-r.y)/n.scaleY),n},e.getOverallBounds=function(t){return FL.isEmpty(t)?e.empty:t.reduce(function(t,n){return null==t?n.clone():e.union(t,n)})},Object.defineProperty(e.prototype,"right",{get:function(){return this.left+this.width},set:function(e){this.width=e-this.left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.top+this.height},set:function(e){this.height=e-this.top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return new MN(this.left+this.width/2,this.top+this.height/2)},enumerable:!0,configurable:!0}),e.prototype.addPropertyChanged=function(e){this._propertyChanged.add(e)},e.prototype.removePropertyChanged=function(e){this._propertyChanged.remove(e)},e._tolerance=1e-6,e}(),LN=function(e,t,n){var r=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),i=Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2),o=Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2),s=0;o*i!=0&&(s=UN(-1,(-r+o+i)/(2*Math.sqrt(o)*Math.sqrt(i)),1));var a=function(e,t,n){return e.x*t.y+e.y*n.x+t.x*n.y-(n.x*t.y+t.x*e.y+n.y*e.x)}(e,t,n),l=Math.acos(s);return a>0&&(l=-l),VN(l)},BN=function(e){return(e%=360)<0&&(e+=360),e},NN=function(e,t){return e.x*t.x+e.y*t.y},jN=function(e,t,n){var r=new MN(n.x-t.x,n.y-t.y),i=new MN(e.x-t.x,e.y-t.y),o=NN(i,r);if(o<=0)return HN(e,t);var s=NN(r,r);if(s<o)return HN(e,n);var a=o/s,l=new MN(t.x+r.x*a,t.y+r.y*a);return HN(e,l)},HN=function(e,t){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},zN=function(e){return Math.PI*e/180},VN=function(e){return 180*e/Math.PI},UN=function(e,t,n){return Math.max(e,Math.min(n,t))},WN=function(e,t,n){return"number"==typeof e&&"number"==typeof t&&("number"!=typeof n&&(n=1e-4),0!=n?Math.abs(e-t)<=n:e==t)},XN=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},GN=function(){function e(e,t){this._name="",this._points=[],this._name=e?e.toUpperCase():"",this._points=t||[]}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.getPoint=function(e){return this._points[e]},Object.defineProperty(e.prototype,"length",{get:function(){return this._points.length},enumerable:!0,configurable:!0}),e.prototype.transform=function(e,t){for(var n=0;n<this.length;n++)this.getPoint(n).transform(e,t)},e.prototype.rotateAt=function(e,t){for(var n=0;n<this.length;n++)this.getPoint(n).rotateAt(e,t)},e.prototype.translate=function(e,t){for(var n=0;n<this.length;n++)this.getPoint(n).translate(e,t)},e.prototype.draw=function(e){switch(this.name){case"Z":e.closePath();break;case"M":e.moveTo(this.getPoint(0).x,this.getPoint(0).y);break;case"L":e.lineTo(this.getPoint(0).x,this.getPoint(0).y);break;case"Q":e.quadraticCurveTo(this.getPoint(0).x,this.getPoint(0).y,this.getPoint(1).x,this.getPoint(1).y);break;case"C":e.bezierCurveTo(this.getPoint(0).x,this.getPoint(0).y,this.getPoint(1).x,this.getPoint(1).y,this.getPoint(2).x,this.getPoint(2).y)}},e.prototype.toString=function(){for(var e=this.name,t=0;t<this.length;t++)e+=" "+this.getPoint(t).x+" "+this.getPoint(t).y;return e},e.prototype.clone=function(){return new e(this.name,this._points.map(function(e){return e.clone()}))},e}(),qN=function(){function e(){this._path=new $N}return e.prototype.moveTo=function(e,t){this._path.moveTo(e,t)},e.prototype.lineTo=function(e,t){this._path.lineTo(e,t)},e.prototype.quadraticCurveTo=function(e,t,n,r){this._path.quadraticTo(e,t,n,r)},e.prototype.bezierCurveTo=function(e,t,n,r,i,o){this._path.cubicTo(e,t,n,r,i,o)},e.prototype.closePath=function(){this._path.close()},Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),e}(),$N=function(){function e(e){this._pathChangedEvent=new EL,this._segments=[],null!=e&&this._fromString(e)}return Object.defineProperty(e.prototype,"length",{get:function(){return this._segments.length},enumerable:!0,configurable:!0}),e.prototype.addPathChanged=function(e){this._pathChangedEvent.add(e)},e.prototype.removePathChanged=function(e){this._pathChangedEvent.remove(e)},e.prototype.moveTo=function(e,t){this._segments.push(new GN("M",[new MN(e,t)])),this._onPathChanged()},e.prototype.lineTo=function(e,t){this._segments.push(new GN("L",[new MN(e,t)])),this._onPathChanged()},e.prototype.quadraticTo=function(e,t,n,r){this._segments.push(new GN("Q",[new MN(e,t),new MN(n,r)])),this._onPathChanged()},e.prototype.cubicTo=function(e,t,n,r,i,o){this._segments.push(new GN("C",[new MN(e,t),new MN(n,r),new MN(i,o)])),this._onPathChanged()},e.prototype.close=function(){this._segments.push(new GN("Z")),this._onPathChanged()},e.prototype._onPathChanged=function(){this._pathChangedEvent.notify()},e.prototype.transform=function(e,t){for(var n=0;n<this.length;n++)this._segments[n].transform(e,t)},e.prototype.rotateAt=function(e,t){for(var n=0;n<this.length;n++)this._segments[n].rotateAt(e,t)},e.prototype.translate=function(e,t){for(var n=0;n<this.length;n++)this._segments[n].translate(e,t)},e.prototype.draw=function(e){if(e){e.beginPath();for(var t=0;t<this.length;t++)this._segments[t].draw(e)}},e.prototype.toString=function(){for(var e="",t=0;t<this.length;t++)e+=this._segments[t].toString(),t<this._segments.length-1&&(e+=" ");return e},e.prototype.clone=function(){return new e(this.toString())},e.prototype.equals=function(e){return this.isEqual(e)},e.prototype.isEqual=function(e){return null!=e&&this.toString()===e.toString()},e.prototype.addPath=function(e){var t,n;try{for(var r=XN(e._segments),i=r.next();!i.done;i=r.next())this._segments.push(i.value.clone())}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.toTextWhizzPath=function(e){var t,n,r=new e.Path;try{for(var i=XN(this._segments),o=i.next();!o.done;o=i.next()){var s=o.value;switch(s.name){case"Z":r.close();break;case"M":r.moveTo(s.getPoint(0).x,s.getPoint(0).y);break;case"L":r.lineTo(s.getPoint(0).x,s.getPoint(0).y);break;case"Q":r.curveTo3(s.getPoint(0).x,s.getPoint(0).y,s.getPoint(1).x,s.getPoint(1).y);break;case"C":r.curveTo4(s.getPoint(0).x,s.getPoint(0).y,s.getPoint(1).x,s.getPoint(1).y,s.getPoint(2).x,s.getPoint(2).y)}}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.fromTextWhizzPath=function(e){var t=new qN;return e.parse(t),t.path},e.prototype._fromString=function(e){for(var t=e.split(" "),n=0;n<t.length;){for(var r=t[n],i=n+1,o=[];i<t.length;){var s=parseFloat(t[i]);if(isNaN(s)||!isFinite(s))break;o.push(s),i++}for(var a=0,l=[];a<o.length;)l.push(new MN(o[a],o[a+1])),a+=2;var c=new GN(r,l);this._segments.push(c),n=i}},e.rectangle=function(t,n,r,i){var o=new e;return o.moveTo(t,n),o.lineTo(t+r,n),o.lineTo(t+r,n+i),o.lineTo(t,n+i),o.lineTo(t,n),o.close(),o},e.ellipse=function(t,n,r,i){var o=r/2,s=i/2,a=new e;return a.moveTo(t,n+s),a.cubicTo(t,n+s-.5517*s,t+o-.5517*o,n,t+o,n),a.cubicTo(t+o+.5517*o,n,t+r,n+s-.5517*s,t+r,n+s),a.cubicTo(t+r,n+s+.5517*s,t+o+.5517*o,n+i,t+o,n+i),a.cubicTo(t+o-.5517*o,n+i,t,n+s+.5517*s,t,n+s),a.close(),a},e.roundedRectangle=function(t,n,r,i,o){if(null==o)return e.rectangle(t,n,r,i);var s=new e,a=t,l=n,c=o[0].width,u=o[0].height,h=o[1].width,d=o[1].height,p=o[2].width,f=o[2].height,m=o[3].width,g=o[3].height;return(WN(c,0)||WN(u,0))&&(c=u=0),(WN(h,0)||WN(d,0))&&(h=d=0),(WN(p,0)||WN(f,0))&&(p=f=0),(WN(m,0)||WN(g,0))&&(m=g=0),s.moveTo(a+c,l),WN(c+h,r)||s.lineTo(a+r-h,l),WN(h,0)||WN(d,0)||s.cubicTo(a+r-h*(1-.5517),l,a+r,l+d*(1-.5517),a+r,l+d),WN(d+f,i)||s.lineTo(a+r,l+i-f),WN(p,0)||WN(f,0)||s.cubicTo(a+r,l+i-f*(1-.5517),a+r-p*(1-.5517),l+i,a+r-p,l+i),WN(p+m,r)||s.lineTo(a+m,l+i),WN(m,0)||WN(g,0)||s.cubicTo(a+m*(1-.5517),l+i,a,l+i-g*(1-.5517),a,l+i-g),WN(g+u,i)||s.lineTo(a,l+u),WN(c,0)||WN(u,0)||s.cubicTo(a,l+u*(1-.5517),a+c*(1-.5517),l,a+c,l),s.close(),s},e.rotatedRectangle=function(t){var n=t.getUpperLeftCorner(),r=t.getUpperRightCorner(),i=t.getBottomRightCorner(),o=t.getBottomLeftCorner(),s=new e;return s.moveTo(n.x,n.y),s.lineTo(r.x,r.y),s.lineTo(i.x,i.y),s.lineTo(o.x,o.y),s.lineTo(n.x,n.y),s.close(),s},e}(),YN=function(){function e(e,t,n,r,i){this._angle=0,this._scaleX=0,this._scaleY=0,this._translateX=0,this._translateY=0,this._transformChangedEvent=new EL,this._angle=i||0,this._scaleX=e||0===e?e:1,this._scaleY=t||0===e?t:1,this._translateX=n||0,this._translateY=r||0}return e.prototype.addTransformChanged=function(e){this._transformChangedEvent.add(e)},e.prototype.removeTransformChanged=function(e){this._transformChangedEvent.remove(e)},e.prototype._setProperty=function(e,t,n){void 0===n&&(n=!1);var r="_"+e;this[r]!==t&&(this[r]=t,n||this._transformChangedEvent.notify())},Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),e.prototype.setAngle=function(e,t){this._setProperty("angle",e,t)},Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._scaleX},enumerable:!0,configurable:!0}),e.prototype.setScaleX=function(e,t){this._setProperty("scaleX",e,t)},Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._scaleY},enumerable:!0,configurable:!0}),e.prototype.setScaleY=function(e,t){this._setProperty("scaleY",e,t)},Object.defineProperty(e.prototype,"translateX",{get:function(){return this._translateX},enumerable:!0,configurable:!0}),e.prototype.setTranslateX=function(e,t){this._setProperty("translateX",e,t)},Object.defineProperty(e.prototype,"translateY",{get:function(){return this._translateY},enumerable:!0,configurable:!0}),e.prototype.setTranslateY=function(e,t){this._setProperty("translateY",e,t)},e.prototype.move=function(e,t){var n=this.clone();null!=e&&this.setTranslateX(this._translateX+e,!0),null!=t&&this.setTranslateY(this._translateY+t,!0),n.equals(this)||this._transformChangedEvent.notify()},e.prototype.rotate=function(e){null==e||WN(e,0)||(this._angle+=e,this._transformChangedEvent.notify())},e.prototype.clone=function(){return new e(this._scaleX,this._scaleY,this._translateX,this._translateY,this._angle)},e.prototype.equals=function(e,t){return null!=e&&WN(this._scaleX,e._scaleX,t)&&WN(this._scaleY,e._scaleY,t)&&WN(this._translateX,e._translateX,t)&&WN(this._translateY,e._translateY,t)&&WN(this._angle,e._angle,t)},e.isEqual=function(e,t,n){return void 0===n&&(n=1e-4),null==e&&null==t||null!=e&&null!=t&&e.equals(t,n)},e.prototype.toMatrix=function(){var e=this._angle,t=Math.sin(zN(e)),n=Math.cos(zN(e));return new DN(n*this._scaleX,t*this._scaleX,-t*this._scaleY,n*this._scaleY,this._translateX,this._translateY)},e.prototype.clear=function(e){var t=void 0===e?{}:e,n=t.keepAngle,r=void 0!==n&&n,i=t.supressOnChanged,o=void 0!==i&&i;this._scaleX=1,this._scaleY=1,this._translateX=0,this._translateY=0,r||(this._angle=0),o||this._transformChangedEvent.notify()},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return WN(this._scaleX,1)&&WN(this._scaleY,1)&&WN(this._translateX,0)&&WN(this._translateY,0)&&WN(this._angle,0)},enumerable:!0,configurable:!0}),e}(),KN=function(){function e(e,t,n,r,i){this.centerX=e||0,this.centerY=t||0,this.width=n||0===n?n:2,this.height=r||0===r?r:2,this.angle=i||0}return e.prototype.getSimplifiedObject=function(){return{centerX:this.centerX,centerY:this.centerY,width:this.width,height:this.height,angle:this.angle}},e.prototype.clone=function(){return new e(this.centerX,this.centerY,this.width,this.height,this.angle)},Object.defineProperty(e.prototype,"bounds",{get:function(){for(var e=new MN(this.centerX,this.centerY),t=this.width,n=this.height,r=[new MN(-t/2,-n/2),new MN(-t/2,n/2),new MN(t/2,-n/2),new MN(t/2,n/2)],i=0,o=0,s=0,a=0,l=0;l<4;l++)r[l].rotate(this.angle),(r[l].x<i||0===l)&&(i=r[l].x),(r[l].y<o||0===l)&&(o=r[l].y),(r[l].x>s||0===l)&&(s=r[l].x),(r[l].y>a||0===l)&&(a=r[l].y);return new FN(i+e.x,o+e.y,s-i,a-o)},enumerable:!0,configurable:!0}),e.prototype.equals=function(e,t){return null!=e&&WN(this.centerX,e.centerX,t)&&WN(this.centerY,e.centerY,t)&&WN(this.width,e.width,t)&&WN(this.height,e.height,t)&&WN(this.angle,e.angle,t)},e.prototype.getUpperLeftCorner=function(){var e=new MN(-this.width/2,-this.height/2);return(e=e.rotate(this.angle)).translate(this.centerX,this.centerY)},e.prototype.getUpperCenterPoint=function(){var e=new MN(0,-this.height/2);return(e=e.rotate(this.angle)).translate(this.centerX,this.centerY)},e.prototype.getLeftCenterPoint=function(){var e=new MN(-this.width/2,0);return(e=e.rotate(this.angle)).translate(this.centerX,this.centerY)},e.prototype.getUpperRightCorner=function(){var e=new MN(this.width/2,-this.height/2);return(e=e.rotate(this.angle)).translate(this.centerX,this.centerY)},e.prototype.getBottomRightCorner=function(){var e=new MN(this.width/2,this.height/2);return(e=e.rotate(this.angle)).translate(this.centerX,this.centerY)},e.prototype.getBottomLeftCorner=function(){var e=new MN(-this.width/2,this.height/2);return(e=e.rotate(this.angle)).translate(this.centerX,this.centerY)},e.prototype._checkProjectionIntersection=function(e,t){var n=this._getProjections(e),r=this._getProjections(t);return n.left<=r.right&&n.right>=r.left&&n.top<=r.bottom&&n.bottom>=r.top},e.prototype._getProjections=function(e){var t,n,r,i;t=n=e[0].x,r=i=e[0].y;for(var o=1;o<e.length;o++)t=Math.min(t,e[o].x),n=Math.max(n,e[o].x),r=Math.min(r,e[o].y),i=Math.max(i,e[o].y);return{left:t,right:n,top:r,bottom:i}},e.prototype.intersectsWith=function(e){var t=this.clone(),n=e.clone();if(!WN(this.angle,0)){var r=t.angle;t.angle=0,(i=n.center).rotateAt(-r,t.center),n.center=i,n.angle-=r}var i,o=[t.getUpperLeftCorner(),t.getUpperRightCorner(),t.getBottomRightCorner(),t.getBottomLeftCorner()],s=[n.getUpperLeftCorner(),n.getUpperRightCorner(),n.getBottomRightCorner(),n.getBottomLeftCorner()],a=this._checkProjectionIntersection(o,s),l=!0;return a&&!WN(this.angle,e.angle)&&(t=this.clone(),r=(n=e.clone()).angle,n.angle=0,(i=t.center).rotateAt(-r,n.center),t.center=i,t.angle-=r,o=[t.getUpperLeftCorner(),t.getUpperRightCorner(),t.getBottomRightCorner(),t.getBottomLeftCorner()],s=[n.getUpperLeftCorner(),n.getUpperRightCorner(),n.getBottomRightCorner(),n.getBottomLeftCorner()],l=this._checkProjectionIntersection(o,s)),a&&l},Object.defineProperty(e.prototype,"location",{get:function(){return this.getUpperLeftCorner()},set:function(e){var t=this.getUpperLeftCorner();this.centerX=this.centerX+(e.x-t.x),this.centerY=this.centerY+(e.y-t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return new MN(this.centerX,this.centerY)},set:function(e){this.centerX=e.x,this.centerY=e.y},enumerable:!0,configurable:!0}),e.prototype.rotateAt=function(e,t){var n=this.center;return n.rotateAt(e,t),this.center=n,this.angle+=e,this},e.prototype.translate=function(e,t){this.centerX+=e,this.centerY+=t},e.prototype.setTransform=function(e){null==e||e.equals(new YN)||(this.width*=e.scaleX,this.height*=e.scaleY,this.angle+=e.angle,this.centerX+=e.translateX,this.centerY+=e.translateY)},e.prototype.getTransform=function(e){if(null==e||this.equals(e))return new YN;var t=e.center;return new YN(0===e.width?0:this.width/e.width,0===e.height?0:this.height/e.height,this.centerX-t.x,this.centerY-t.y,this.angle-e.angle)},e.prototype.transform=function(e,t){this.rotateAt(e.angle,t),e.setAngle(0),this.setTransform(e)},e.prototype.toString=function(){return[this.centerX,this.centerY,this.width,this.height,this.angle].join(",")},e.prototype.toRectangleF=function(){return new FN(this.centerX-this.width/2,this.centerY-this.height/2,this.width,this.height)},e.prototype.contains=function(e){var t=this.clone();t.angle=0;var n=e.clone();return n.rotateAt(-this.angle,this.center),t.bounds.contains(n)},e.prototype.getCornerByIndex=function(e){switch(e){case 0:return this.getUpperLeftCorner();case 1:return this.getUpperRightCorner();case 2:return this.getBottomRightCorner();case 3:return this.getBottomLeftCorner();default:return null}},e.prototype.transformByMatrix=function(e){var t=this.clone();return t.center=e.transformPoint(t.center),t.width*=e.scaleX,t.height*=e.scaleY,t.angle+=e.angle,t},e.union=function(t,n){var r=t.clone(),i=n.clone(),o=r.angle,s=r.center;r.angle=0,i.rotateAt(-o,s);var a=FN.union(r.bounds,i.bounds),l=new MN(a.left+a.width/2,a.top+a.height/2),c=new e;c.center=l;var u=-1===Math.sign(t.width)||-1===Math.sign(t.width)?-1:1,h=-1===Math.sign(t.height)||-1===Math.sign(n.height)?-1:1;return c.width=a.width*u,c.height=a.height*h,c.rotateAt(o,s),c},e.fromRectangleF=function(t,n){return new e(t.left+t.width/2,t.top+t.height/2,t.width,t.height,"number"==typeof n?n:0)},e.FromLTRB=function(t,n,r,i){return e.fromRectangleF(FN.FromLTRB(t,n,r,i))},e.getRectWithOffset=function(e,t){if(null==e)throw new kL("RotatedRectangleF.getRectWithOffset: rectangle cannot be null!");return null==t||t.isOrigin()?e.clone():e.transformByMatrix((new DN).translate(t.x,t.y))},e}(),QN=function(){function e(e,t){this.width=0,this.height=0,this.width=e,this.height=t}return e.prototype.clone=function(){return new e(this.width,this.height)},e.prototype.toString=function(){return[this.width,this.height].join(",")},e.prototype.updateByMatrix=function(e){return e.updateObjectByMatrix(this,"width","height"),this},e}(),ZN=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JN=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ej=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(JN(arguments[t]));return e};function tj(e,t,n){var r=!1;return null!=n&&(r="boolean"==typeof n?n:n.ignoreCase),(e=r?e.toLowerCase():e)===(r?t.toLowerCase():t)}function nj(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.pop();if(0===t.length&&""===r)return e;var i="/";if(r=r.replace(/^(\/|\s)+/g,""),e=e.replace(/(\/|\s)+$/g,""),0===t.length)return e+i+r;var o=FL(t).map(function(e){return e.replace(/^(\/|\s)+/g,"").replace(/(\/|\s)+$/g,"")});return FL.flatten([e,o,r]).join(i)}function rj(e,t){if(null==e&&null==t)return!0;if(null==e&&null!=t||null!=e&&null==t)return!1;var n=typeof e;return n===typeof t&&("string"===n||"boolean"===n?e===t:"number"===n?WN(e,t):Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&ij(e,t):("function"==typeof e.equals&&"function"==typeof t.equals?function(e,t){return e.equals(t)}:function(e,t){return e==t})(e,t))}function ij(e,t){return null==e?e===t:e.reduce(function(e,n,r){return e&&rj(n,t[r])},!0)}function oj(e,t){return e.reduce(function(e,n,r){return e&&n==t[r]},!0)}function sj(e){return null==e||""===e.trim()}function aj(e){return!(sj(e)||!e.startsWith("<"))&&null==(new DOMParser).parseFromString("<root>"+e+"</root>","application/xml").querySelector("parsererror")}function lj(e,t){var n,r,i,o;void 0===t&&(t=" ");var s,a,l=(new DOMParser).parseFromString("<root>"+e+"</root>","application/xml");if(null==l.querySelector("parsererror")){try{for(var c=ZN(Array.from(l.querySelectorAll("br"))),u=c.next();!u.done;u=c.next())u.value.textContent=t}catch(y){n={error:y}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}var h=Array.from(l.querySelectorAll("p, li"));if(h.length>1){var d=FL.without(h,h[h.length-1]);try{for(var p=ZN(d),f=p.next();!f.done;f=p.next()){var m=f.value,g=document.createElementNS("application/xml","span");g.textContent=t,m.appendChild(g)}}catch(_){i={error:_}}finally{try{f&&!f.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}return l.querySelector("root").textContent}return console.warn("Bad value",l),s=e,(a=(new DOMParser).parseFromString("<span></span>","application/xml")).querySelector("span").textContent=s,(new XMLSerializer).serializeToString(a).replace("<span>","").replace("</span>","").replace("<span/>","").replace("<span />","")}function cj(e,t,n){if((o=n,null==o&&(o={}),FL.defaults(o,{deep:!1,ignoreNull:!0}),n=o).ignoreNull)for(var r=0;r<t.length;r++){var i=AN(t[r],5);s(i),t[r]=i}var o;return n.deep?(function e(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var i=t,o=ej(n),s=function(t){for(var n in t)t.hasOwnProperty(n)&&("object"==typeof t[n]&&null!=i[n]?"object"==typeof i[n]?i[n]=e(i[n],t[n]):i=t[n]:i[n]=t[n])},a=0;a<o.length;a++){var l=o[a];s(l)}return i}).apply(void 0,ej([e],t)):Object.assign.apply(Object,ej([e],t));function s(e){var t,n;try{for(var r=ZN(Object.keys(e)),i=r.next();!i.done;i=r.next()){var o=i.value,a=e[o];null===a?e.hasOwnProperty(o)?delete e[o]:e[o]=void 0:"object"==typeof a&&s(a)}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}}function uj(e,t){return cj(e,[t],{deep:!0})}function hj(e,t){return null!=t?t:e}function dj(e,t){return void 0!==t?t:e}function pj(e,t){var n;if("number"!=typeof(n="string"==typeof e&&/%$/.test(e)?t*Number(e.split(/%/)[0])/100:Number(e))||isNaN(n))throw new kL("'"+e+"' is not a number or percent string");return n}new Map;var fj,mj=function(){function e(e,t){void 0===t&&(t=""),this._name="",this._propertyChanged=new PL,this.id=null!=e?e:(new DL).toString(),this.name=t,null==this._tags&&(this._tags={})}return Object.defineProperty(e.prototype,"version",{get:function(){return"6.5.4"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._propertyChanged.notify(this,"name"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this._tags},set:function(e){if(null==e)throw new kL("value is null!");this._tags=e},enumerable:!0,configurable:!0}),e.prototype._copy=function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),t.name=e.name,n?t.generateNewIds():t.id=e.id,null!=this.tags)for(var i in t.tags={},e.tags)t.tags[i]=FL.clone(e.tags[i])},e.prototype.getSimplifiedObject=function(e){var t=function(e,t){null==t?t=[]:"string"==typeof t&&(t=[t]);var n=[];for(var r in e)n.push(r);return n.filter(function(n){var r,i;try{for(var o=ZN(["_","$$"]),s=o.next();!s.done;s=o.next())if(n.startsWith(s.value))return!1}catch(a){r={error:a}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!t.some(function(e){return e===n})&&"function"!=typeof e[n]}).reduce(function(t,n){return t[n]=e[n],t},{})}(this,e);return t.tags=this.tags,t.id=this.id.toString(),t},e.prototype.generateNewIds=function(){this._generateNewId()},e.prototype._generateNewId=function(){this.id=(new DL).toString()},e.prototype.toString=function(){return this.name},e.prototype.addPropertyChanged=function(e){this._propertyChanged.add(e)},e.prototype.removePropertyChanged=function(e){this._propertyChanged.remove(e)},e.prototype.equals=function(e){return this.name===e.name&&this.version===e.version},e}(),gj=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yj=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return gj(t,e),Object.defineProperty(t.prototype,"parentContainer",{get:function(){return this._parentContainer},set:function(e){this._parentContainer=e,this._onContainerChanged()},enumerable:!0,configurable:!0}),t.prototype._onContainerChanged=function(){},t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r),i&&(n.parentContainer=t.parentContainer)},t.prototype.clone=function(e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.type!==t.type)throw new OL(".clone() method must be overriden in "+this.type+" class");var r=new t;return this._copy(this,r,e,n),r},t.prototype.update=function(e){this._copy(e,this,!0,!1)},t.prototype.getSimplifiedObject=function(t){FL.isArray(t)||FL.isString(t)||(t=[]);var n=e.prototype.getSimplifiedObject.call(this,["parentContainer"].concat(t));return n.$type=this.type,n},t.type="base",t}(mj),_j=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vj=function(e){function t(){var n=e.call(this)||this;return n.type=t.type,n}return _j(t,e),t.prototype._copy=function(t,n,r,i){return e.prototype._copy.call(this,t,n,r,i),n.sourceDpi=t.sourceDpi,n.smartObjectDpi=t.smartObjectDpi,n.smartObjectRectangle=t.smartObjectRectangle,n.smartObjectSize=t.smartObjectSize,n.smartObjectStorageId=t.smartObjectStorageId,null!=t.warpControlPoints&&(n.warpControlPoints=t.warpControlPoints.map(function(e){return e})),null!=t.projectiveTransform&&(n.projectiveTransform=t.projectiveTransform.map(function(e){return e})),null!=t.vectorMask&&(n.vectorMask=t.vectorMask.map(function(e){return e})),n},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this.sourceDpi,t.sourceDpi)&&rj(this.smartObjectDpi,t.smartObjectDpi)&&FL.isEqual(this.smartObjectRectangle,t.smartObjectRectangle)&&FL.isEqual(this.smartObjectSize,t.smartObjectSize)&&rj(this.smartObjectStorageId,t.smartObjectStorageId)&&oj(this.warpControlPoints,t.warpControlPoints)&&oj(this.projectiveTransform,t.projectiveTransform)&&oj(this.vectorMask,t.vectorMask)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="SmartItem",t}(yj),bj="The item already belongs to this collection, or to another collection.",wj=n("AGOE");n("+P9r"),function(e){e.Move="Move",e.Add="Add",e.Remove="Remove"}(fj||(fj={}));var Cj,xj,Ej=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sj=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Pj=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Sj(arguments[t]));return e};xj=(Cj=wj).from,Cj.from=function(e){return e instanceof Ij?e:xj(e)};var Tj,Ij=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._collection=[],this.constructor=function(e){throw new OL},this._itemAddedEvent=new EL,this._itemRemovedEvent=new EL,this._itemMovedEvent=new EL,this._enumerable=wj.from(this._collection),0!==e.length&&this.setRange(e)}return e.prototype.setRange=function(e){this.clear(),this.addRange(e)},e.prototype.addRange=function(t){var n;t instanceof e&&(t=t._collection),"getEnumerator"in(n=t)&&"toArray"in n&&(t=t.toArray());for(var r=0;r<t.length;r++)this.add(t[r])},e.prototype.add=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{for(var i=Ej(n),o=i.next();!o.done;o=i.next()){var s=o.value;this.insertAt(this._collection.length,s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.push=function(e){return this.add(e),this.length},e.prototype.insertAt=function(e,t){var n,r,i;Array.isArray(t)||(t=[t]);try{for(var o=Ej(t),s=o.next();!s.done;s=o.next())this._checkIfItemExists(l=s.value)}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}if(e<0||e>this._collection.length)throw new AL;(i=this._collection).splice.apply(i,Pj([e,0],t));for(var a=0;a<t.length;a++){var l;this._onItemAdded(this._collection.indexOf(l=t[a]),l)}},e.prototype.remove=function(e){if(!this.contains(e))throw new kL("The item was not found in this collection.");return this.removeAt(this.indexOf(e))},e.prototype.removeAt=function(e){if(e<0||e>this._collection.length-1)throw new AL;var t=this._collection[e];return this._collection.splice(e,1),this._onItemRemoved(e,t),t},e.prototype.removeRange=function(e,t){for(var n=this._collection.slice(),r=this._collection.splice(e,t-e+1),i=0;i<r.length;i++){var o=r[i];this._onItemRemoved(n.indexOf(o),o)}return r},e.prototype.move=function(e,t,n){"boolean"!=typeof n&&(n=!1);var r=this._collection[e];return r&&e>=0&&t>=0&&e!=t&&(this._collection.splice(e,1),this._collection.splice(t,0,r),n||this._onItemMoved(e,t)),r},e.prototype.clear=function(){for(var e=this.length-1;e>=0;e--)this.removeAt(e)},e.prototype.replaceAt=function(e,t){if(t<0||t>this._collection.length-1)throw new AL;this._collection[t]=e},Object.defineProperty(e.prototype,"length",{get:function(){return this._collection.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return this.getItem(e)},e.prototype.set=function(e,t){throw new OL},e.prototype.getItem=function(e){return this._collection[e]},e.prototype._checkIfItemExists=function(e){if(this.contains(e))throw new kL(bj)},e.prototype._onItemAdded=function(e,t){this._itemAddedEvent.notify({item:t,index:e,type:fj.Add})},e.prototype.add_itemAdded=function(e){this._itemAddedEvent.add(e)},e.prototype.remove_itemAdded=function(e){this._itemAddedEvent.remove(e)},e.prototype._onItemRemoved=function(e,t){this._itemRemovedEvent.notify({item:t,index:e,type:fj.Remove})},e.prototype.add_itemRemoved=function(e){this._itemRemovedEvent.add(e)},e.prototype.remove_itemRemoved=function(e){this._itemRemovedEvent.remove(e)},e.prototype._onItemMoved=function(e,t){this._itemMovedEvent.notify({oldIndex:e,newIndex:t,type:fj.Move})},e.prototype.add_itemMoved=function(e){this._itemMovedEvent.add(e)},e.prototype.remove_itemMoved=function(e){this._itemMovedEvent.remove(e)},e.prototype.add_collectionChanged=function(e){this.add_itemMoved(e),this.add_itemRemoved(e),this.add_itemAdded(e)},e.prototype.remove_collectionChanged=function(e){this.remove_itemMoved(e),this.remove_itemRemoved(e),this.remove_itemAdded(e)},e.prototype[Symbol.iterator]=function(){return this._collection.values()},e.prototype.toArray=function(){return this._collection.slice()},e.prototype.getEnumerator=function(){return this._enumerable.getEnumerator()},e.prototype.traverseBreadthFirst=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).traverseBreadthFirst.apply(e,Pj(t))},e.prototype.traverseDepthFirst=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).traverseDepthFirst.apply(e,Pj(t))},e.prototype.flatten=function(){return this._enumerable.flatten()},e.prototype.pairwise=function(e){return this._enumerable.pairwise(e)},e.prototype.scan=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).scan.apply(e,Pj(t))},e.prototype.select=function(e){return this._enumerable.select(e)},e.prototype.selectMany=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).selectMany.apply(e,Pj(t))},e.prototype.where=function(e){return this._enumerable.where(e)},e.prototype.choose=function(e){return this._enumerable.choose(e)},e.prototype.ofType=function(e){return this._enumerable.ofType(e)},e.prototype.zip=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).zip.apply(e,Pj(t))},e.prototype.merge=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).merge.apply(e,Pj(t))},e.prototype.join=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).join.apply(e,Pj(t))},e.prototype.groupJoin=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).groupJoin.apply(e,Pj(t))},e.prototype.all=function(e){return this._enumerable.all(e)},e.prototype.any=function(e){return this._enumerable.any(e)},e.prototype.isEmpty=function(){return this._enumerable.isEmpty()},e.prototype.concat=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).concat.apply(e,Pj(t))},e.prototype.alternate=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).alternate.apply(e,Pj(t))},e.prototype.defaultIfEmpty=function(e){return this._enumerable.defaultIfEmpty(e)},e.prototype.distinct=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).distinct.apply(e,Pj(t))},e.prototype.distinctUntilChanged=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).distinctUntilChanged.apply(e,Pj(t))},e.prototype.except=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).except.apply(e,Pj(t))},e.prototype.intersect=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).intersect.apply(e,Pj(t))},e.prototype.union=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).union.apply(e,Pj(t))},e.prototype.sequenceEqual=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).sequenceEqual.apply(e,Pj(t))},e.prototype.orderBy=function(e){return this._enumerable.orderBy(e)},e.prototype.orderByDescending=function(e){return this._enumerable.orderByDescending(e)},e.prototype.reverse=function(){return this._enumerable.reverse()},e.prototype.shuffle=function(){return this._enumerable.shuffle()},e.prototype.weightedSample=function(e){return this._enumerable.weightedSample(e)},e.prototype.groupBy=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).groupBy.apply(e,Pj(t))},e.prototype.partitionBy=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).partitionBy.apply(e,Pj(t))},e.prototype.buffer=function(e){return this._enumerable.buffer(e)},e.prototype.aggregate=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).aggregate.apply(e,Pj(t))},e.prototype.average=function(e){return this._enumerable.average(e)},e.prototype.count=function(e){return this._enumerable.count(e)},e.prototype.max=function(e){return this._enumerable.max(e)},e.prototype.min=function(e){return this._enumerable.min(e)},e.prototype.maxBy=function(e){return this._enumerable.maxBy(e)},e.prototype.minBy=function(e){return this._enumerable.minBy(e)},e.prototype.sum=function(e){return this._enumerable.sum(e)},e.prototype.elementAt=function(e){return this._enumerable.elementAt(e)},e.prototype.elementAtOrDefault=function(e,t){return this._enumerable.elementAtOrDefault(e,t)},e.prototype.first=function(e){return this._enumerable.first(e)},e.prototype.firstOrDefault=function(e,t){return"function"==typeof e?this._enumerable.firstOrDefault(e,t):this._enumerable.firstOrDefault(t)},e.prototype.last=function(e){return this._enumerable.last(e)},e.prototype.lastOrDefault=function(e,t){return"function"==typeof e?this._enumerable.lastOrDefault(e,t):this._enumerable.lastOrDefault(t)},e.prototype.single=function(e){return this._enumerable.single(e)},e.prototype.singleOrDefault=function(e,t){return this._enumerable.singleOrDefault(e,t)},e.prototype.skip=function(e){return this._enumerable.skip(e)},e.prototype.skipWhile=function(e){return this._enumerable.skipWhile(e)},e.prototype.take=function(e){return this._enumerable.take(e)},e.prototype.takeWhile=function(e){return this._enumerable.takeWhile(e)},e.prototype.takeExceptLast=function(e){return this._enumerable.takeExceptLast(e)},e.prototype.takeFromLast=function(e){return this._enumerable.takeFromLast(e)},e.prototype.indexOf=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).indexOf.apply(e,Pj(t))},e.prototype.lastIndexOf=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).lastIndexOf.apply(e,Pj(t))},e.prototype.asEnumerable=function(){return this._enumerable},e.prototype.cast=function(){return this._enumerable.cast()},e.prototype.toLookup=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).toLookup.apply(e,Pj(t))},e.prototype.toObject=function(e,t){return this._enumerable.toObject(e,t)},e.prototype.toDictionary=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).toDictionary.apply(e,Pj(t))},e.prototype.toJSONString=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).toJSONString.apply(e,Pj(t))},e.prototype.toJoinedString=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).toJoinedString.apply(e,Pj(t))},e.prototype.doAction=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).doAction.apply(e,Pj(t))},e.prototype.forEach=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).forEach.apply(e,Pj(t))},e.prototype.write=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).write.apply(e,Pj(t))},e.prototype.writeLine=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).writeLine.apply(e,Pj(t))},e.prototype.force=function(){return this._enumerable.force()},e.prototype.letBind=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).letBind.apply(e,Pj(t))},e.prototype.share=function(){return this._enumerable.share()},e.prototype.memoize=function(){return this._enumerable.memoize()},e.prototype.catchError=function(e){return this._enumerable.catchError(e)},e.prototype.finallyAction=function(e){return this._enumerable.finallyAction(e)},e.prototype.log=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).log.apply(e,Pj(t))},e.prototype.trace=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).trace.apply(e,Pj(t))},e.prototype.insert=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).insert.apply(e,Pj(t))},e.prototype.contains=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._enumerable).contains.apply(e,Pj(t))},e}();!function(e){e[e.Normal=0]="Normal",e[e.Grayscale=1]="Grayscale",e[e.Solid=2]="Solid"}(Tj||(Tj={}));var Oj=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kj=function(e){function t(t,n){var r=e.call(this)||this;return r._items=new Ij,r._visible=!0,r.parentComponent=null,r.locked=!1,r.renderingType=Tj.Normal,r.type="Container",r.region=null,r._onItemAdded=function(e){e.item.parentContainer=r},r._items=new Ij,r._items.add_itemAdded(r._onItemAdded),null!=t&&r.items.setRange(t),null!=n&&(r.name=n),r}return Oj(t,e),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this._propertyChanged.notify(this,"visible"))},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){var t=e.prototype.getSimplifiedObject.call(this,["parentComponent","version"]);return t.version=this.version,t},t.prototype.generateNewIds=function(){this._generateNewId(),this._items.forEach(function(e){return e.generateNewIds()})},t.prototype._copy=function(t,n,r){e.prototype._copy.call(this,t,n,r),n.items.addRange(t.items.toArray().map(function(e){return e.clone(r)})),n.locked=t.locked,n.visible=t.visible,n.renderingType=t.renderingType,n.translationKey=t.translationKey,n.region=null!=t.region?t.region.clone():null},t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t}(mj),Rj=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.locked=!0,t.noPrint=!1,t.noShow=!1,t.size=null,t}return Oj(t,e),t.prototype._copy=function(t,n,r){e.prototype._copy.call(this,t,n,r),n.noPrint=t.noPrint,n.noShow=t.noShow,n.size=null!=t.size?t.size.clone():null},t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t}(kj),Aj=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.locked=!1,t.type="SurfaceContainer",t}return Oj(t,e),t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t}(kj),Mj=function(e){function t(){var t=e.call(this)||this;return t.type="SpotColorContainer",t.renderingType=Tj.Grayscale,t}return Oj(t,e),t.prototype._copy=function(t,n,r){e.prototype._copy.call(this,t,n,r),n.previewColor=t.previewColor},t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t}(Aj),Dj=function(e){function t(){var t=e.call(this)||this;return t.type="TextureContainer",t.renderingType=Tj.Solid,t}return Oj(t,e),Object.defineProperty(t.prototype,"previewTextureSource",{get:function(){return this._previewTextureSource},set:function(e){e!==this._previewTextureSource&&(this._previewTextureSource=e,this._propertyChanged.notify(this,"previewTextureSource"))},enumerable:!0,configurable:!0}),t.prototype._copy=function(t,n,r){return e.prototype._copy.call(this,t,n,r),n.previewTextureSource=null!=t.previewTextureSource?t.previewTextureSource.clone():null,n.previewTextureName=t.previewTextureName,n},t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t.prototype.getSimplifiedObject=function(t){FL.isArray(t)||FL.isString(t)||(t=[]);var n=e.prototype.getSimplifiedObject.call(this);return n.previewTextureSource={id:this.previewTextureSource.id,width:this.previewTextureSource.width,height:this.previewTextureSource.height,isVector:this.previewTextureSource.isVector,pageIndex:this.previewTextureSource.pageIndex,url:this.previewTextureSource.url,actualSize:this.previewTextureSource.actualSize,saveAspectRatio:this.previewTextureSource.saveAspectRatio,origin:this.previewTextureSource.origin},n},t}(Aj),Fj=new(function(){function e(){this.data={},this._typeDictionary={}}return e.prototype.getPropertyMetadata=function(e,t){var n=e.type;if(null==n)return null;if(null==this._typeDictionary[n]){this._typeDictionary[n]=[];for(var r=e;null!=r.constructor.type;)this._typeDictionary[n].push(r.constructor.type),r=Object.getPrototypeOf(r)}for(var i=0;i<this._typeDictionary[n].length;i++){var o=this._typeDictionary[n][i];if(null!=this.data[o]){var s=this.data[o][t];if(null!=s)return s}}return null},e}());function Lj(e){return function(t,n){var r=t.constructor.type;null==Fj.data[r]&&(Fj.data[r]={});var i=Fj.data[r];null==i[n]&&(i[n]={type:null!=e.enumObject?"enum":typeof t[n],displayName:null!=e&&null!=e.displayName?e.displayName:n,propertyFactory:e.factory,values:null!=e.enumObject?Object.keys(e.enumObject).map(function(t){return e.enumObject[t]}).filter(function(e){return"string"==typeof e}):null,ignore:null==e.ignore||e.ignore})}}var Bj,Nj=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},jj=function(){function e(t,n,r){void 0===r&&(r=!0),this._edgeConstraint=null,this._cornerArbitraryConstraint=null,this.propertyChanged=new EL,this.type=e.type,this.edge=n,this._setCornerValues(t,n,r)}return Object.defineProperty(e.prototype,"edgeConstraint",{set:function(e){var t=this.edge;this._edgeConstraint=e,this.edge!==t&&this.propertyChanged.notify()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edge",{get:function(){return null!=this._edgeConstraint?this._edgeConstraint:this._edge},set:function(e){this._edge!==e&&(this._edge=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"corner",{get:function(){return this._corner},set:function(e){if(null==e)throw new RL("corner cannot be null");this._corner!==e&&(this._corner=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),e.prototype._setCornerValues=function(t,n,r){this.corner=t&&n?r?[e.arbitrary,e.proportional]:[e.proportional,e.arbitrary]:t?[e.proportional]:n?[e.arbitrary]:[]},e.prototype.getCornerProportional=function(){return this.corner.includes(e.proportional)},e.prototype.getCornerArbitrary=function(){return null!=this._cornerArbitraryConstraint?this._cornerArbitraryConstraint:this.corner.includes(e.arbitrary)},e.prototype.setCornerProportional=function(e){var t=this.getCornerArbitrary();this._setCornerValues(e,t,!0)},e.prototype.setCornerArbitrary=function(e){var t=this.getCornerProportional();this._setCornerValues(t,e,!0)},e.prototype.setCornerArbitraryConstraint=function(e){var t=this.getCornerArbitrary();this._cornerArbitraryConstraint=e,this.getCornerArbitrary()!==t&&this.propertyChanged.notify()},e.prototype.clone=function(){var t=new e(!0,!0);return t.edge=this.edge,t.corner=this.corner.slice(),t},e.prototype.equals=function(e){return this.edge===e.edge&&FL.isEqual(this.corner,e.corner)},Object.defineProperty(e.prototype,"data",{get:function(){return{Edge:this.edge,Corner:this.corner}},enumerable:!0,configurable:!0}),e._fromData=function(t){if(null==t)return new e(!1,!1);var n=new e(!0,!0);return n.corner=t.Corner,n.edge=t.Edge,n},e.prototype.getSimplifiedObject=function(){var e={};return e.edge=this.edge,e.corner=this.corner,e},e.arbitrary="Arbitrary",e.proportional="Proportional",e.type="ResizeGripsPermissions",function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([Lj({ignore:!0}),Nj("design:type",Boolean),Nj("design:paramtypes",[Boolean])],e.prototype,"edgeConstraint",null),e}(),Hj=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},zj=function(){function e(t){var n=this;void 0===t&&(t=!0),this._allowRotateConstraint=null,this.propertyChanged=new EL,this._firePropertyChanged=function(){return n.propertyChanged.notify()},this.type=e.type,this.allowDelete=t,this.allowMoveHorizontal=t,this.allowMoveVertical=t,this.allowRotate=t,this.allowDragAndDrop=t,this.resizeGrips=new jj(t,t)}return Object.defineProperty(e.prototype,"allowDelete",{get:function(){return this._allowDelete},set:function(e){this._allowDelete!==e&&(this._allowDelete=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowMoveHorizontal",{get:function(){return this._allowMoveHorizontal},set:function(e){this._allowMoveHorizontal!==e&&(this._allowMoveHorizontal=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowMoveVertical",{get:function(){return this._allowMoveVertical},set:function(e){this._allowMoveVertical!==e&&(this._allowMoveVertical=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowRotateConstraint",{set:function(e){var t=this.allowRotate;this._allowRotateConstraint=e,this.allowRotate!==t&&this.propertyChanged.notify()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowRotate",{get:function(){return null!=this._allowRotateConstraint?this._allowRotateConstraint:this._allowRotate},set:function(e){this._allowRotate!==e&&(this._allowRotate=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowDragAndDrop",{get:function(){return this._allowDragAndDrop},set:function(e){this._allowDragAndDrop!==e&&(this._allowDragAndDrop=e,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizeGrips",{get:function(){return this._resizeGrips},set:function(e){null!=this.resizeGrips&&null!=this.resizeGrips.propertyChanged&&this.resizeGrips.propertyChanged.remove(this._firePropertyChanged),this._resizeGrips=e,null!=this.resizeGrips.propertyChanged&&this.resizeGrips.propertyChanged.add(this._firePropertyChanged),this.propertyChanged.notify()},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;return t.allowDelete=this.allowDelete,t.allowDragAndDrop=this.allowDragAndDrop,t.allowMoveHorizontal=this.allowMoveHorizontal,t.allowMoveVertical=this.allowMoveVertical,t.allowRotate=this.allowRotate,t.allowRotateConstraint=this.allowRotateConstraint,t.resizeGrips=this.resizeGrips.clone(),t},e.prototype.equals=function(e){return this.allowDelete===e.allowDelete&&this.allowDragAndDrop===e.allowDragAndDrop&&this.allowMoveHorizontal===e.allowMoveHorizontal&&this.allowMoveVertical===e.allowMoveVertical&&this.allowRotate===e.allowRotate&&this.allowRotateConstraint===e.allowRotateConstraint&&rj(this.resizeGrips,e.resizeGrips)},e.prototype.getSimplifiedObject=function(){var e={};return e.allowDelete=this.allowDelete,e.resizeGrips=this.resizeGrips.getSimplifiedObject(),e.allowMoveHorizontal=this.allowMoveHorizontal,e.allowMoveVertical=this.allowMoveVertical,e.allowRotate=this.allowRotate,e.allowDragAndDrop=this.allowDragAndDrop,e},e.CreateFromRaw=function(t){var n=FL.extend(new jj(!0,!0),t.resizeGrips),r=FL.extend(new e,t);return r.resizeGrips=n,r},e.type="ManipulationPermissions",function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([Lj({ignore:!0}),Hj("design:type",Boolean),Hj("design:paramtypes",[Boolean])],e.prototype,"allowRotateConstraint",null),e}(),Vj=function(){function e(){this._noPrint=!1,this._noShow=!1,this.propertyChanged=new EL}return Object.defineProperty(e.prototype,"noPrint",{get:function(){return this._noPrint},set:function(e){this._noPrint!==e&&(this._noPrint=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noShow",{get:function(){return this._noShow},set:function(e){this._noShow!==e&&(this._noShow=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;return t.noShow=this.noShow,t.noPrint=this.noPrint,t},e.prototype.equals=function(e){return this.noShow===e.noShow&&this.noPrint===e.noPrint},e.prototype.getSimplifiedObject=function(){var e={};return e.noPrint=this.noPrint,e.noShow=this.noShow,e},e}(),Uj=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Wj=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Xj=function(){function e(t){void 0===t&&(t=!0),this._showDeleteButton=!0,this._showEditButton=!0,this._showSelectButton=!0,this._showEditButtonConstraint=null,this.propertyChanged=new EL,this.showSelectButtonConstraint=null,this.type=e.type,this.showDeleteButton=t,this.showEditButton=t,this.showSelectButton=t}return Object.defineProperty(e.prototype,"showDeleteButton",{get:function(){return this._showDeleteButton},set:function(e){this._showDeleteButton!==e&&(this._showDeleteButton=e,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEditButton",{get:function(){return null!=this.showEditButtonConstraint?this.showEditButtonConstraint:this._showEditButton},set:function(e){this._showEditButton!==e&&(this._showEditButton=e,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEditButtonConstraint",{get:function(){return this._showEditButtonConstraint},set:function(e){this.showEditButtonConstraint!==e&&(this._showEditButtonConstraint=e,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelectButton",{get:function(){return null!=this.showSelectButtonConstraint?this.showSelectButtonConstraint:this._showSelectButton},set:function(e){this._showSelectButton!==e&&(this._showSelectButton=e,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){var e={};return e.showDeleteButton=this.showDeleteButton,e.showEditButton=this.showEditButton,e.showSelectButton=this.showSelectButton,e.showEditButtonConstraint=this.showEditButtonConstraint,e.showSelectButtonConstraint=this.showSelectButtonConstraint,e},e.prototype.clone=function(){var t=new e;return t.showDeleteButton=this._showDeleteButton,t.showEditButton=this._showEditButton,t.showEditButtonConstraint=this.showEditButtonConstraint,t.showSelectButton=this._showSelectButton,t.showSelectButtonConstraint=this.showSelectButtonConstraint,t},e.prototype.equals=function(e){return this.showDeleteButton==e.showDeleteButton&&this.showEditButton===e.showEditButton&&this.showEditButtonConstraint===e.showEditButtonConstraint&&this.showSelectButton===e.showSelectButton&&this.showSelectButtonConstraint===e.showSelectButtonConstraint},e.type="ItemToolbarPermissions",Uj([Lj({ignore:!0}),Wj("design:type",Boolean)],e.prototype,"showSelectButtonConstraint",void 0),Uj([Lj({ignore:!0}),Wj("design:type",Boolean),Wj("design:paramtypes",[Boolean])],e.prototype,"showEditButtonConstraint",null),e}(),Gj=function(){function e(e){var t=this;this._allowZOrderChange=!0,this._allowOpacityChange=!0,this._allowRemoveOnLayoutChange=!0,this._firePropertyChanged=function(){return t.propertyChanged.fire()},this.propertyChanged=new EL,null==e&&(e=!0),this.allowZOrderChange=e,this.allowOpacityChange=e,this.allowRemoveOnLayoutChange=e,this.itemToolbarPermissions=new Xj(e)}return Object.defineProperty(e.prototype,"allowZOrderChange",{get:function(){return this._allowZOrderChange},set:function(e){this._allowZOrderChange!==e&&(this._allowZOrderChange=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowOpacityChange",{get:function(){return this._allowOpacityChange},set:function(e){this._allowOpacityChange!==e&&(this._allowOpacityChange=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowRemoveOnLayoutChange",{get:function(){return this._allowRemoveOnLayoutChange},set:function(e){this._allowRemoveOnLayoutChange!==e&&(this._allowRemoveOnLayoutChange=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemToolbarPermissions",{get:function(){return this._itemToolbarPermissions},set:function(e){rj(this,e)||(null!=this.itemToolbarPermissions&&null!=this.itemToolbarPermissions.propertyChanged&&this.itemToolbarPermissions.propertyChanged.remove(this._firePropertyChanged),this._itemToolbarPermissions=e,null!=this.itemToolbarPermissions.propertyChanged&&this.itemToolbarPermissions.propertyChanged.add(this._firePropertyChanged),this.propertyChanged.fire())},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){var e={};return e.allowZOrderChange=this.allowZOrderChange,e.allowOpacityChange=this.allowOpacityChange,e.allowRemoveOnLayoutChange=this.allowRemoveOnLayoutChange,e.itemToolbarPermissions=this.itemToolbarPermissions.getSimplifiedObject(),e},e.prototype.clone=function(){var t=new e;return t.allowZOrderChange=this.allowZOrderChange,t.allowOpacityChange=this.allowOpacityChange,t.allowRemoveOnLayoutChange=this.allowRemoveOnLayoutChange,t.itemToolbarPermissions=this.itemToolbarPermissions.clone(),t},e.prototype.equals=function(e){return this.allowOpacityChange===e.allowOpacityChange&&this.allowOpacityChange===e.allowOpacityChange&&this.allowRemoveOnLayoutChange===e.allowRemoveOnLayoutChange&&rj(this.itemToolbarPermissions,e.itemToolbarPermissions)},e}(),qj=function(){function e(){this._displayInObjectInspector=!0,this.propertyChanged=new EL}return Object.defineProperty(e.prototype,"displayInObjectInspector",{get:function(){return this._displayInObjectInspector},set:function(e){this._displayInObjectInspector!==e&&(this._displayInObjectInspector=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){var e={};return e.displayInObjectInspector=this.displayInObjectInspector,e},e.prototype.clone=function(){var t=new e;return t.displayInObjectInspector=this.displayInObjectInspector,t},e.prototype.equals=function(e){return this.displayInObjectInspector===e.displayInObjectInspector},e}(),$j=function(){function e(e){this._previewFromServer=!1,this.preview=null,this.profileId=null,null!=e&&(sj(e.preview)||(this._previewFromServer=!0),"string"!=typeof e&&this._init(e))}return Object.defineProperty(e.prototype,"previewFromServer",{get:function(){return this._previewFromServer},enumerable:!0,configurable:!0}),e.prototype.needUpdate=function(e){var t="RgbColor"===this.type;return(!t||t&&null!=this.profileId&&this.profileId!==e)&&!this.previewFromServer},e.prototype.equals=function(e,t){return void 0===t&&(t=!1),e.profileId===this.profileId&&(t||e.preview===this.preview)},e.prototype.getData=function(){return{preview:this.preview,profileId:this.profileId,type:this.type}},e.prototype._init=function(e){sj(e.preview)||(this.preview=e.preview),sj(e.profileId)||(this.profileId=e.profileId)},e.prototype._validateString=function(e){if(sj(e))throw new kL("Value must be a non-empty string")},e.prototype._validateNumber=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=255),"number"!=typeof e)throw new kL("Value must be a number");if(e<t||e>n)throw new kL("Value must be in range ["+t+", "+n+"]")},e.equals=function(e,t){return null==e&&null==t||null!=e&&e.equals(t)},e}(),Yj=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kj=function(e){function t(t){var n=e.call(this,t)||this;if(n._r=0,n._g=0,n._b=0,n._a=0,null==t)return n;var r="Incorrect RgbColor format: "+JSON.stringify(t);if("string"==typeof t){var i=t;if(0!==t.indexOf("#")&&0!==t.indexOf("rgb")&&null==(i=n._parseNamedColor(t))&&console.warn("Unknown rgb color name: "+t),n._tryInitFromRgba(i))return n;if(n._tryInitFromRgb(i))return n;n._tryInitFromHex(i)||console.warn(r)}else try{n._init(t)}catch(o){console.warn(r)}return n}return Yj(t,e),t.prototype._parseNamedColor=function(e){if(window.getComputedStyle){var t=document.createElement("div");t.style.color=e,document.body.appendChild(t);var n=window.getComputedStyle(t).color;return document.body.removeChild(t),n}return console.warn("Unable to parse rgb color string "+e),null},t.prototype._tryInitFromRgba=function(e){var n=t.matchRgba(e);if(null!=n&&6===n.length){var r=parseInt((255*parseFloat(n[4])).toFixed(0));return r=Math.max(r,0),r=Math.min(r,255),this._init({r:+n[1],g:+n[2],b:+n[3],a:r}),!0}return!1},t.prototype._tryInitFromRgb=function(e){var n=t.matchRgb(e);return null!=n&&4===n.length&&(this._init({r:+n[1],g:+n[2],b:+n[3],a:255}),!0)},t.prototype._tryInitFromHex=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return null!=t&&4===t.length&&(this._init({r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:255}),!0)},Object.defineProperty(t.prototype,"type",{get:function(){return"RgbColor"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(e){this._r=e,this._updatePreview()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._g},set:function(e){this._g=e,this._updatePreview()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._b},set:function(e){this._b=e,this._updatePreview()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(e){this._a=e,this._updatePreview()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.a},enumerable:!0,configurable:!0}),t.matchRgba=function(e){return t._rgba.lastIndex=0,t._rgba.exec(e)},t.matchRgb=function(e){return t._rgb.lastIndex=0,t._rgb.exec(e)},t.prototype.getData=function(){var t=e.prototype.getData.call(this);return t.r=this.r,t.g=this.g,t.b=this.b,t.a=this.a,t},t.prototype.clone=function(){return new t(this)},t.prototype.toString=function(){return this._getPreview()},t.prototype.equals=function(n){return n instanceof t&&e.prototype.equals.call(this,n)},t.prototype._getPreview=function(){if(255===this.a)return"rgb("+this.r+","+this.g+","+this.b+")";var e=(this.a/255).toFixed(7);return"rgba("+this.r+","+this.g+","+this.b+","+e+")"},t.prototype._init=function(t){e.prototype._init.call(this,t),t.a=null!=t.a?t.a:255,this._validateNumber(t.r),this._validateNumber(t.g),this._validateNumber(t.b),this._validateNumber(t.a),this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this._updatePreview()},t.prototype._updatePreview=function(){this.preview=this._getPreview()},t._rgba=/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\,\s*(\d{1,}(\.\d{1,})?)\s*\)\s*;{0,1}\s*$/g,t._rgb=/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*;{0,1}\s*$/g,t}($j),Qj=function(){function e(){}return e.isValidRgbColor=function(e){return!sj(e)&&(null!=Kj.matchRgb(e)||null!=Kj.matchRgba(e))},e.convertPercentToByte=function(e){return UN(0,parseInt((255*parseFloat(e)/100).toFixed(0)),255)},e.convertByteToPercent=function(e){return(e/255*100).toFixed(0)+"%"},e}(),Zj=function(){function e(e,t,n){this._sourceString=e,this._regexArray=t,this._maxValue=n}return e.prototype.validate=function(){var e=function(e,t){return"ComponentName - "+e+", Value - "+t+"; "},t="";this._validate(this._regexArray[1])||(t=t.concat(e("C",this._regexArray[1]))),this._validate(this._regexArray[2])||(t=t.concat(e("M",this._regexArray[2]))),this._validate(this._regexArray[3])||(t=t.concat(e("Y",this._regexArray[3]))),this._validate(this._regexArray[4])||(t=t.concat(e("K",this._regexArray[4]))),null==this._regexArray[5]||this._validate(this._regexArray[5])||(t=t.concat(e("A",this._regexArray[5]))),t.length>0&&(t=t.substring(0,t.length-2),console.warn("Invalid value of CMYK components. SourceString: "+this._sourceString+"; InvalidComponents: "+t+"."))},e.prototype._validate=function(e){var t=parseFloat(e);return t>=0&&t<=this._maxValue},e}(),Jj=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eH=function(e){function t(t){var n=e.call(this,t)||this;if(n.c=255,n.m=255,n.y=255,n.k=255,n.a=255,null==t)return n;var r="Incorrect CmykColor format: "+JSON.stringify(t);if("string"==typeof t)n._tryInitFromPercentCmyk(t)||n._tryInitFromRelativeCmyk(t)||n._tryInitFromDeviceCmyk(t)?n._previewFromServer=Qj.isValidRgbColor(n.preview):console.warn(r);else try{n._init(t)}catch(i){console.warn(r)}return n}return Jj(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"CmykColor"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.a},enumerable:!0,configurable:!0}),t.prototype._tryInitFromDeviceCmyk=function(e){var t=/^\s*device-cmyk\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\,\s*(\d{1,3})\s*(\,\s*(\d{1,}(\.\d{1,})?))?\s*(\,\s*(.*)\s*)?\)\s*;{0,1}\s*$/g.exec(e);if(null!=t&&10===t.length){var n={c:+t[1],m:+t[2],y:+t[3],k:+t[4],preview:t[9]};return null!=t[6]&&(n.a=this._convertRelativeToByte(t[6])),this._init(n),!0}return!1},t.prototype._tryInitFromPercentCmyk=function(e){var t=/^\s*cmyk\(\s*(\d{1,3}(?:\.\d{1,})?)%\s*,\s*(\d{1,3}(?:\.\d{1,})?)%\s*,\s*(\d{1,3}(?:\.\d{1,})?)%\s*,\s*(\d{1,3}(?:\.\d{1,})?)%\s*(?:\,\s*(\d{1,3}(?:\.\d{1,})?)%)?\s*(?:\,\s*(.*)\s*)?\);{0,1}\s*$/g.exec(e);if(null!=t&&7===t.length){new Zj(e,t,100).validate();var n={c:Qj.convertPercentToByte(t[1]),m:Qj.convertPercentToByte(t[2]),y:Qj.convertPercentToByte(t[3]),k:Qj.convertPercentToByte(t[4]),preview:t[6]};return null!=t[5]&&(n.a=Qj.convertPercentToByte(t[5])),this._init(n),!0}return!1},t.prototype._tryInitFromRelativeCmyk=function(e){var t=/^\s*cmyk\(\s*(\d{1,3}(?:\.\d{1,})?)\s*,\s*(\d{1,3}(?:\.\d{1,})?)\s*,\s*(\d{1,3}(?:\.\d{1,})?)\s*,\s*(\d{1,3}(?:\.\d{1,})?)\s*(?:\,\s*(\d{1,3}(?:\.\d{1,})?))?\s*(?:\,\s*(.*)\s*)?\);{0,1}\s*$/g.exec(e);if(null!=t&&7===t.length){new Zj(e,t,1).validate();var n={c:this._convertRelativeToByte(t[1]),m:this._convertRelativeToByte(t[2]),y:this._convertRelativeToByte(t[3]),k:this._convertRelativeToByte(t[4]),preview:t[6]};return null!=t[5]&&(n.a=this._convertAlpha(t[5])),this._init(n),!0}return!1},t.prototype._convertRelativeToByte=function(e){return UN(0,parseInt((255*parseFloat(e)).toFixed(0)),255)},t.prototype._convertAlpha=function(e){return UN(parseInt((255*parseFloat(e)).toFixed(0)),0,255)},t.prototype.clone=function(){return new t(this)},t.prototype.getData=function(){var t=e.prototype.getData.call(this);return t.c=this.c,t.m=this.m,t.y=this.y,t.k=this.k,t.a=this.a,t},t.prototype.equals=function(n,r){return void 0===r&&(r=!1),n instanceof t&&e.prototype.equals.call(this,n,r)&&n instanceof t&&this.c===n.c&&this.m===n.m&&this.y===n.y&&this.k===n.k&&this.a===n.a},t.prototype.toString=function(){var e="cmyk("+this._toRelative(this.c)+","+this._toRelative(this.m)+","+this._toRelative(this.y)+","+this._toRelative(this.k)+","+this._toRelative(this.a);return null!=this.preview&&(e+=","+this.preview),e+")"},t.prototype._toRelative=function(e){return(e/255).toFixed(7)},t.prototype._getPreview=function(){return this.preview},t.prototype._init=function(t){e.prototype._init.call(this,t),t.a=null!=t.a?t.a:255,this._validateNumber(t.c),this._validateNumber(t.m),this._validateNumber(t.y),this._validateNumber(t.k),this._validateNumber(t.a),this.c=t.c,this.m=t.m,this.y=t.y,this.k=t.k,this.a=t.a},t}($j),tH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nH=function(e){function t(t){var n=e.call(this,t)||this;if(n.l=0,n.a=255,null==t)return n;try{n._init(t)}catch(r){console.warn("Incorrect GrayscaleColor format: "+JSON.stringify(t))}return n}return tH(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"GrayscaleColor"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.a},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this)},t.prototype.equals=function(n){return n instanceof t&&e.prototype.equals.call(this,n)&&n instanceof t&&this.l===n.l&&this.a===n.a},t.prototype.toString=function(){return this._getPreview()},t.prototype.getData=function(){var t=e.prototype.getData.call(this);return t.l=this.l,t.a=this.a,t},t.prototype._getPreview=function(){if(255===this.a)return"rgb("+this.l+","+this.l+","+this.l+")";var e=(this.a/255).toFixed(7);return"rgba("+this.l+","+this.l+","+this.l+","+e+")"},t.prototype._init=function(t){e.prototype._init.call(this,t),t.a=null!=t.a?t.a:255,this._validateNumber(t.l),this._validateNumber(t.a),this.l=t.l,this.a=t.a,null==this.preview&&(this.preview=this._getPreview())},t}($j),rH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iH=function(e){function t(t){var n=e.call(this,t)||this;if(n.l=0,n.a=-128,n.b=-128,n.alpha=0,null==t)return n;var r="Incorrect LabColor format: "+JSON.stringify(t);if("string"==typeof t)n._tryInitFromString(t)?n._previewFromServer=Qj.isValidRgbColor(n.preview):console.warn(r);else try{n._init(t)}catch(i){console.warn(r)}return n}return rH(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"LabColor"},enumerable:!0,configurable:!0}),t.prototype._tryInitFromString=function(e){t._lab.lastIndex=0;var n=t._lab.exec(e);return null!=n&&8===n.length&&(this._init({l:+n[1],a:+n[2],b:+n[3],alpha:null!=n[5]?Qj.convertPercentToByte(n[5]):255,preview:null!=n[7]?n[7]:null}),!0)},t.prototype.clone=function(){return new t(this)},t.prototype.equals=function(n){return n instanceof t&&e.prototype.equals.call(this,n)&&n instanceof t&&this.l===n.l&&this.a===n.a&&this.b===n.b&&this.alpha===n.alpha},t.prototype.toString=function(){var e="lab("+this.l+","+this.a+","+this.b+","+Qj.convertByteToPercent(this.alpha);return null!=this.preview&&(e+=","+this.preview),e+")"},t.prototype.getData=function(){var t=e.prototype.getData.call(this);return t.l=this.l,t.a=this.a,t.b=this.b,t.alpha=this.alpha,t},t.prototype._getPreview=function(){return this.preview},t.prototype._init=function(t){e.prototype._init.call(this,t),t.alpha=null!=t.alpha?t.alpha:255,this._validateNumber(t.l),this._validateNumber(t.a,-128,127),this._validateNumber(t.b,-128,127),this._validateNumber(t.alpha),this.l=t.l,this.a=t.a,this.b=t.b,this.alpha=t.alpha},t._lab=/^\s*lab\(\s*(\d{1,3})\s*,\s*(-*\d{1,3})\s*,\s*(-*\d{1,3})\s*(,\s*(\d{1,3})%)?\s*(\,\s*(.*)\s*)?\)\s*;{0,1}\s*$/g,t}($j),oH=function(){function e(){}return e.registerColor=function(t,n,r){t&&(e._createFunctionByType[t]=r),n&&(e._createFunctionByName[n]=r)},Object.defineProperty(e,"rgbColorProfileId",{set:function(t){e._rgbColorProfileId=t},enumerable:!0,configurable:!0}),e._updateRgbColor=function(t){return FL.isEmpty(null==t?void 0:t.profileId)&&(t.profileId=e._rgbColorProfileId),t},e.createColor=function(t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);try{return t instanceof $j?t:"string"==typeof t?0===t.indexOf("device-cmyk")||0===t.indexOf("cmyk")?new eH(t):0===t.indexOf("lab")?new iH(t):0===t.indexOf("spot")?e._createColorByName("spot",t):r?e._updateRgbColor(new Kj(t)):new Kj(t):e._fromData(t,r)}catch(i){if(!1!==n)throw i;return console.warn("Unable to create color from value "+JSON.stringify(t)+". Error: "+i),new Kj("rgba(0,0,0,1)")}},e._createColorByName=function(t,n){if(!e._createFunctionByName[t])throw"Color with name '"+t+"' was not registered in ColorFactory";return new(0,e._createFunctionByName[t])(n)},e._createColorByType=function(t,n){if(!e._createFunctionByType[t])throw"Color with type name '"+t+"' was not registered in ColorFactory";return new(0,e._createFunctionByType[t])(n)},e._fromData=function(t,n){if(void 0===n&&(n=!1),null==t)throw"Value cannot be null";var r=t.type;if("RgbColor"===r)return n?e._updateRgbColor(new Kj(t)):new Kj(t);if("CmykColor"===r)return new eH(t);if("GrayscaleColor"===r)return new nH(t);if("LabColor"===r)return new iH(t);if("SpotColor"===r)return e._createColorByType("SpotColor",t);throw"Unsupported color type "+r},e._createFunctionByType={},e._createFunctionByName={},e}(),sH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aH=function(e){function t(t){var n=e.call(this,t)||this;if(null==t)return n;var r="Incorrect SpotColor format: "+JSON.stringify(t);if("string"==typeof t)n._tryInitFromString(t)?n._previewFromServer=Qj.isValidRgbColor(n.preview):console.warn(r);else try{n._init(t)}catch(i){console.warn(r)}return n}return sH(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"SpotColor"},enumerable:!0,configurable:!0}),t.prototype._tryInitFromString=function(e){t._spot.lastIndex=0;var n=t._spot.exec(e);return null!=n&&10===n.length&&(this._init({inkName:n[1].replace(/'/g,"").replace(/\"/g,""),inkColor:oH.createColor(n[2]),inkSolidity:null!=n[4]?+n[4]:1,tint:null!=n[7]?Qj.convertPercentToByte(n[7]):255,preview:null!=n[9]?n[9]:null}),!0)},t.prototype.toString=function(){var e=this.inkColor.clone();return e.preview=null,"spot('"+this.inkName+"',"+e.toString()+","+this.inkSolidity+","+Qj.convertByteToPercent(this.tint)+","+this.preview+")"},t.prototype.clone=function(){return new t(this)},t.prototype.equals=function(n){return n instanceof t&&e.prototype.equals.call(this,n)&&n instanceof t&&this.inkName===n.inkName&&this.inkColor.equals(n.inkColor)&&this.inkSolidity===n.inkSolidity&&this.alpha===n.alpha&&this.tint===n.tint},t.prototype.getData=function(){var t=e.prototype.getData.call(this);return t.inkName=this.inkName,t.inkColor=this.inkColor.getData(),t.inkSolidity=this.inkSolidity,t.alpha=this.alpha,t.tint=this.tint,t},t.prototype._getPreview=function(){return this.preview},t.prototype._init=function(t){e.prototype._init.call(this,t),t.alpha=null!=t.alpha?t.alpha:255,t.tint=null!=t.tint?t.tint:255;var n=oH.createColor(t.inkColor,!0);this._validateString(t.inkName),this._validateNumber(t.inkSolidity,0,1),this._validateNumber(t.alpha),this._validateNumber(t.tint),this.inkName=t.inkName,this.inkColor=n,this.inkSolidity=t.inkSolidity,this.alpha=t.alpha,this.tint=t.tint},t._spot=/^\s*spot\(\s*([^()]*)\s*,\s*(.{3,4}\([^()]*\))\s*(,\s*(\d{1}(\.\d{1,})?))?\s*(,\s*(\d{1,3})%)?\s*(,\s*(.*)\s*)?\)\s*;{0,1}\s*$/g,t}($j);oH.registerColor("SpotColor","spot",aH),function(e){e[e.None=0]="None",e[e.Square=1]="Square",e[e.Tight=2]="Tight"}(Bj||(Bj={}));var lH,cH=function(){function e(){this.styles=[],this.clipartColors=[]}return e.fromRaw=function(t){var n=new e;return n.text=t.text,n.stroke=t.stroke,n.shadow=t.shadow,n.img=t.img,n.border=t.border,n.fill=t.fill,n.textFill=t.textFill,n.line=t.line,n.altline=t.altline,n.horizontal=t.horizontal,n.vertical=t.vertical,n.barcode=t.barcode,n.styles=null!=t.styles?t.styles.slice(0):null,n.clipartColors=null!=t.clipartColors?t.clipartColors.slice(0):null,n},e.prototype.clone=function(){var t=new e;return t.text=this.text,t.stroke=this.stroke,t.shadow=this.shadow,t.img=this.img,t.border=this.border,t.fill=this.fill,t.textFill=this.textFill,t.line=this.line,t.altline=this.altline,t.horizontal=this.horizontal,t.vertical=this.vertical,t.barcode=this.barcode,t.styles=null!=this.styles?this.styles.slice(0):null,t.clipartColors=null!=this.clipartColors?this.clipartColors.slice(0):null,t},e.prototype.equals=function(e){return this.text===e.text&&this.stroke===e.stroke&&this.shadow===e.shadow&&this.img===e.img&&this.border===e.border&&this.fill===e.fill&&this.textFill===e.textFill&&this.line===e.line&&this.altline===e.altline&&this.horizontal===e.horizontal&&this.vertical===e.vertical&&this.barcode===e.barcode&&ij(this.styles,e.styles)&&ij(this.clipartColors,e.clipartColors)},e}();function uH(){return function(e,t){var n="_"+t;Object.defineProperty(e,t,{get:function(){return this[n]},set:function(e){var r=typeof e;if(null!=e&&"boolean"!==r&&"number"!==r&&"string"!==r&&("object"!==r||"function"!=typeof e.equals))throw new kL("PropertyChanged decorator works only for simple types or objects with equals method");rj(this[n],e)||(this[n]=e,this._propertyChanged.notify(this,t))},configurable:!0,enumerable:!0})}}!function(e){e.Normal="Normal",e.Multiply="Multiply",e.Screen="Screen",e.Overlay="Overlay",e.Darken="Darken",e.Lighten="Lighten",e.ColorDodge="ColorDodge",e.ColorBurn="ColorBurn",e.HardLight="HardLight",e.SoftLight="SoftLight",e.Difference="Difference",e.Exclusion="Exclusion",e.None="None"}(lH||(lH={}));var hH,dH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pH=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},fH=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},mH=function(e){function t(n){var r=e.call(this)||this;return r.type=t.type,null==n&&(n=!0),r._allowSafetyLines=n,r._allowRegion=n,r._allowBleedArea=n,r}return dH(t,e),t.prototype.clone=function(e){void 0===e&&(e=null);var n=null!=e?e:new t;return n.allowSafetyLines=this.allowSafetyLines,n.allowRegion=this.allowRegion,n.allowBleedArea=this.allowBleedArea,n},t.prototype.equals=function(e){return this.type===e.type&&this.allowSafetyLines===e.allowSafetyLines&&this.allowRegion===e.allowRegion&&this.allowBleedArea===e.allowBleedArea},t.type="ViolationSettings",pH([uH(),fH("design:type",Boolean)],t.prototype,"allowSafetyLines",void 0),pH([uH(),fH("design:type",Boolean)],t.prototype,"allowRegion",void 0),pH([uH(),fH("design:type",Boolean)],t.prototype,"allowBleedArea",void 0),t}(mj),gH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yH=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},_H=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},vH=function(e){function t(){var n=e.call(this)||this;n._visible=!0,n._locked=!1,n._opacity=1,n._fromLayout=!1,n._textWrappingMode=Bj.None,n._isVariable=!1,n._blendMode=lH.Normal,n._ignorePermissionsChange=!1,n._mask=null,n._onPermissionsChanged=function(){n._ignorePermissionsChange||(n._ignorePermissionsChange=!0,n.applyPermissionsConstrain(),n._ignorePermissionsChange=!1,n._propertyChanged.notify(n,"permissions"))},n._parentGroupItem=null,n.themeBinding=new cH,n._onTransformChanged=function(e){n._propertyChanged.notify(n,"transform")},n._onMaskChanged=function(e){n._propertyChanged.notify(n,"mask")},n._changedEvent=new SL(n),n._changingEvent=new EL,n.type=t.type;var r=new Gj;return r.allowRemoveOnLayoutChange=!1,n.itemPermissions=r,n.setManipulationPermissions(new zj),n.visualizationPermissions=new Vj,n.frontendPermissions=new qj,n._setViolationSettings(new mH,!0),n.setTransform(new YN),n}return gH(t,e),t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.itemPermissions=t._itemPermissions.clone(),n.visible=t._visible,n.locked=t._locked,n.opacity=t._opacity,n.isVariable=t._isVariable,n.textWrappingMode=t._textWrappingMode,n.setManipulationPermissions(t._manipulationPermissions.clone()),n.visualizationPermissions=t._visualizationPermissions.clone(),n.frontendPermissions=t._frontendPermissions.clone(),n.violationSettings=t._violationSettings.clone(),n.transform=t._transform.clone(),n.containerName=t.containerName,n.themeBinding=t.themeBinding.clone(),n.mask=null!=t.mask?t.mask.clone():null,n.blendMode=t.blendMode},t.prototype.equals=function(t){var n=e.prototype.equals.call(this,t),r=rj(this._itemPermissions,t._itemPermissions),i=rj(this._visible,t._visible),o=rj(this._locked,t._locked),s=rj(this._opacity,t._opacity),a=rj(this._isVariable,t._isVariable),l=rj(this._textWrappingMode,t._textWrappingMode),c=rj(this._manipulationPermissions,t._manipulationPermissions),u=rj(this._visualizationPermissions,t._visualizationPermissions),h=rj(this._frontendPermissions,t._frontendPermissions),d=rj(this._transform,t._transform),p=rj(this._violationSettings,t._violationSettings),f=rj(this.containerName,t.containerName),m=rj(this.themeBinding,t.themeBinding),g=rj(this._mask,t._mask),y=rj(this.blendMode,t.blendMode);return n&&r&&i&&o&&s&&a&&l&&c&&u&&h&&d&&p&&f&&m&&g&&y},Object.defineProperty(t.prototype,"manipulationPermissions",{get:function(){return this.getManipulationPermissions()},set:function(e){this.setManipulationPermissions(e)},enumerable:!0,configurable:!0}),t.prototype.getManipulationPermissions=function(){return this._manipulationPermissions},t.prototype.setManipulationPermissions=function(e){if(null==e)throw new kL("manipulationPermissions cannot be null");rj(this._manipulationPermissions,e)||(null!=this._manipulationPermissions&&this._manipulationPermissions.propertyChanged.remove(this._onPermissionsChanged),this._manipulationPermissions=e,this.applyPermissionsConstrain(),this._manipulationPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"manipulationPermissions"))},Object.defineProperty(t.prototype,"visualizationPermissions",{get:function(){return this._visualizationPermissions},set:function(e){if(null==e)throw new kL("visualizationPermissions cannot be null");rj(this._visualizationPermissions,e)||(null!=this._visualizationPermissions&&this._visualizationPermissions.propertyChanged.remove(this._onPermissionsChanged),this._visualizationPermissions=e,this.applyPermissionsConstrain(),this._visualizationPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"visualizationPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemPermissions",{get:function(){return this._itemPermissions},set:function(e){if(null==e)throw new kL("itemPermissions cannot be null");rj(this._itemPermissions,e)||(null!=this._itemPermissions&&this._itemPermissions.propertyChanged.remove(this._onPermissionsChanged),this._itemPermissions=e,this.applyPermissionsConstrain(),this._itemPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"itemPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frontendPermissions",{get:function(){return this._frontendPermissions},set:function(e){if(null==e)throw new kL("frontendPermissions cannot be null");rj(this._frontendPermissions,e)||(null!=this._frontendPermissions&&this._frontendPermissions.propertyChanged.remove(this._onPermissionsChanged),this._frontendPermissions=e,this.applyPermissionsConstrain(),this._frontendPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"frontendPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(e){this._setViolationSettings(e)},enumerable:!0,configurable:!0}),t.prototype._setViolationSettings=function(e,t){if(void 0===t&&(t=!1),null==e)throw new kL("violationSettings cannot be null");rj(this._violationSettings,e)||(null!=this._violationSettings&&this._violationSettings.removePropertyChanged(this._onPermissionsChanged),this._violationSettings=e,this.applyPermissionsConstrain(),this._violationSettings.addPropertyChanged(this._onPermissionsChanged),this._propertyChanged.notify(this,"violationSettings"))},t.prototype.applyPermissionsConstrain=function(){this.isRenderTypeIsNormal||(this.itemPermissions.allowOpacityChange=!1)},t.prototype._onContainerChanged=function(){e.prototype._onContainerChanged.call(this),this.applyPermissionsConstrain()},Object.defineProperty(t.prototype,"parentGroupItem",{get:function(){return this._parentGroupItem},set:function(e){this._parentGroupItem=e,null!=e&&(this.parentContainer=this._parentGroupItem.parentContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this._blendMode!==e&&(this._blendMode=e,this._propertyChanged.notify(this,"blendMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},set:function(e){this.setTransform(e)},enumerable:!0,configurable:!0}),t.prototype.setTransform=function(e,t){void 0===t&&(t=!1),this._transform&&this._transform.removeTransformChanged(this._onTransformChanged);var n=!1;YN.isEqual(this._transform,e)||(this._transform=e,n=!0),this._transform&&this._transform.addTransformChanged(this._onTransformChanged),!t&&n&&this._propertyChanged.notify(this,"transform")},Object.defineProperty(t.prototype,"textWrappingMode",{get:function(){return this._textWrappingMode},set:function(e){this._textWrappingMode!==e&&(this._textWrappingMode=e,this._propertyChanged.notify(this,"textWrappingMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locked",{get:function(){return this._locked},set:function(e){this._locked!==e&&(this._locked=e,this._propertyChanged.notify(this,"locked"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){rj(this.mask,e)||(null!=this._mask&&this._mask.removeMaskChanged(this._onMaskChanged),this._mask=e,null!=this._mask&&this._mask.addMaskChanged(this._onMaskChanged),this._propertyChanged.notify(this,"mask"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this._propertyChanged.notify(this,"visible"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){WN(this._opacity,e)||(this._opacity=e,this._propertyChanged.notify(this,"opacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVariable",{get:function(){return this._isVariable},set:function(e){if(this._isVariable!==e){if(!this._canSetIsVariable())throw new ML("Unable to set isVariable on item of type '"+this.type+"'");this._isVariable=e,this._propertyChanged.notify(this,"isVariable")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fromLayout",{get:function(){return this._fromLayout},set:function(e){this._fromLayout!==e&&(this._fromLayout=e,this._propertyChanged.notify(this,"fromLayout"))},enumerable:!0,configurable:!0}),t.prototype.canSetIsVariable=function(){return this._canSetIsVariable()},t.prototype._canSetIsVariable=function(){return!1},t.prototype._getParentContainer=function(){return null!=this.parentContainer?this.parentContainer:null},t.prototype.getSimplifiedObject=function(t){FL.isArray(t)||FL.isString(t)||(t=[]);var n=e.prototype.getSimplifiedObject.call(this,["_changedEvent","_changingEvent","manipulationPermissions","itemPermissions","visualizationPermissions","frontendPermissions","renderingType","isRenderTypeIsNormal","parentGroupItem"].concat(t));return n.manipulationPermissions=this.manipulationPermissions.getSimplifiedObject(),n.itemPermissions=this.itemPermissions.getSimplifiedObject(),n.visualizationPermissions=this.visualizationPermissions.getSimplifiedObject(),n.frontendPermissions=this.frontendPermissions.getSimplifiedObject(),n.mask=null!=this.mask?this.mask.getSimplifiedObject():null,n},t.prototype.getItemChangedEvent=function(){return this._changedEvent},t.prototype.getItemChangingEvent=function(){return this._changingEvent},t.prototype._getThemeBinding=function(e){return null!=e?e:this.themeBinding},t.prototype._applyThemeColor=function(e,t,n){if(null!=e&&null!=t[e]){var r=oH.createColor(t[e]);if(r)return n(r),!0}return!1},Object.defineProperty(t.prototype,"isRenderTypeIsNormal",{get:function(){return this.renderingType===Tj.Normal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingType",{get:function(){return this.parentContainer instanceof Aj?this.parentContainer.renderingType:Tj.Normal},enumerable:!0,configurable:!0}),t.type="item",yH([Lj({enumObject:lH,displayName:"Blend mode"}),_H("design:type",String),_H("design:paramtypes",[String])],t.prototype,"blendMode",null),yH([Lj({enumObject:Bj}),_H("design:type",Number),_H("design:paramtypes",[Number])],t.prototype,"textWrappingMode",null),yH([Lj({displayName:"Locked"}),_H("design:type",Boolean),_H("design:paramtypes",[Boolean])],t.prototype,"locked",null),t}(yj),bH=function(){function e(e){this._allowChangeBorderWidth=!0,this._allowChangeFillColor=!0,this._allowChangeBorderColor=!0,this.propertyChanged=new EL,null==e&&(e=!0),this.allowChangeBorderWidth=e,this.allowChangeFillColor=e,this.allowChangeBorderColor=e}return Object.defineProperty(e.prototype,"allowChangeBorderWidth",{get:function(){return this._allowChangeBorderWidth},set:function(e){this._allowChangeBorderWidth!==e&&(this._allowChangeBorderWidth=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeFillColor",{get:function(){return this._allowChangeFillColor},set:function(e){this._allowChangeFillColor!==e&&(this._allowChangeFillColor=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeBorderColor",{get:function(){return this._allowChangeBorderColor},set:function(e){this._allowChangeBorderColor!==e&&(this._allowChangeBorderColor=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;return t.allowChangeBorderColor=this.allowChangeBorderColor,t.allowChangeBorderWidth=this.allowChangeBorderWidth,t.allowChangeFillColor=this.allowChangeFillColor,t},e.prototype.getSimplifiedObject=function(){var e={};return e.allowChangeBorderWidth=this.allowChangeBorderWidth,e.allowChangeFillColor=this.allowChangeFillColor,e.allowChangeBorderColor=this.allowChangeBorderColor,e},e.prototype.equals=function(e){return this.allowChangeBorderColor===e.allowChangeBorderColor&&this.allowChangeFillColor===e.allowChangeFillColor&&this.allowChangeBorderWidth===e.allowChangeBorderWidth},e}(),wH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),CH=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},xH=function(){function e(e){this._defaultValue=e}return e.prototype.getDefaultValue=function(){return this._defaultValue},Object.defineProperty(e.prototype,"type",{get:function(){return typeof this._defaultValue},enumerable:!0,configurable:!0}),e}(),EH=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._objectConstructor=e,this._args=t}return e.prototype.getDefaultValue=function(){var e;return new((e=this._objectConstructor).bind.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(CH(arguments[t]));return e}([void 0],this._args)))},Object.defineProperty(e.prototype,"type",{get:function(){return typeof this._objectConstructor},enumerable:!0,configurable:!0}),e}(),SH=function(e){function t(){return e.call(this,$j,[{type:"cmyk",getDefaultValue:function(){return new eH({c:0,m:0,y:0,k:100})}},{type:"rgb",getDefaultValue:function(){return new Kj({r:0,g:0,b:0,a:255})}},{type:"spot",getDefaultValue:function(){return new aH({inkName:"inkName",inkColor:new eH({c:0,m:0,y:0,k:100}),inkSolidity:100})}},{type:"grayscale",getDefaultValue:function(){return new nH({l:0})}},{type:"lab",getDefaultValue:function(){return new iH({l:0,a:0,b:0})}}])||this}return wH(t,e),t}(function(){function e(e,t){this._abstractObjectClass=e,this._derivedClassesData=t}return e.prototype.getDefaultValue=function(e){var t=this._derivedClassesData.find(function(t){return t.type===e});if(null==t)throw new IL("Type "+e+" is not defined! Try on of these values: "+this.derivedTypes.join(", ")+".");return t.getDefaultValue()},Object.defineProperty(e.prototype,"type",{get:function(){return this._abstractObjectClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"derivedTypes",{get:function(){return this._derivedClassesData.map(function(e){return e.type})},enumerable:!0,configurable:!0}),e}()),PH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),TH=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},IH=function(e){function t(n){var r=e.call(this,n)||this;return r.type=t.type,null==n&&(n=!0),r._allowShape=n,r}return PH(t,e),t.prototype.clone=function(n){void 0===n&&(n=null);var r=null!=n?n:new t;return r.allowShape=this.allowShape,e.prototype.clone.call(this,r)},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.allowShape===t.allowShape},t.type="ShapeViolationSettings",function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([uH(),TH("design:type",Boolean)],t.prototype,"allowShape",void 0),t}(mH),OH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kH=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},RH=function(e){function t(n){var r=e.call(this)||this;return r._borderWidth=1,r._fillColor=new Kj("rgba(112,112,112,1)"),r._borderColor=new Kj("rgba(0,0,0,1)"),r._altBorderColor=null,r._dash=[],r._fixedBorderWidth=!1,r._overprintStroke=!1,r._overprintFill=!1,r.sourcePathId=null,r.sourcePathLoaded=!1,r._stubPath=null,r._pathLoadedEvent=new EL,r.type=t.type,r.sourcePath=null!=n?n:new $N(""),r.sourceRectangle=new FN(0,0,10,10),r.shapePermissions=new bH,r._setViolationSettings(new IH,!0),r._ignorePermissionsChange=!0,r.manipulationPermissions.resizeGrips=new jj(!0,!0),r.itemPermissions.itemToolbarPermissions.showEditButton=!1,r.itemPermissions.itemToolbarPermissions.showSelectButton=!1,r._ignorePermissionsChange=!1,r}return OH(t,e),Object.defineProperty(t.prototype,"fixedBorderWidth",{get:function(){return this._fixedBorderWidth},set:function(e){this._fixedBorderWidth!==e&&(this._fixedBorderWidth=e,this._propertyChanged.notify(this,"fixedBorderWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderWidth",{get:function(){return this._borderWidth},set:function(e){this._borderWidth!==e&&(this._borderWidth=e,this._propertyChanged.notify(this,"borderWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourcePath",{get:function(){return this._sourcePath},set:function(e){rj(this._sourcePath,e)||(this._sourcePath=e,!0!==this.sourcePathLoaded&&this._propertyChanged.notify(this,"sourcePath"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceRectangle",{get:function(){return this._sourceRectangle},set:function(e){FN.isEqual(this._sourceRectangle,e)||(this._sourceRectangle=e,this._propertyChanged.notify(this,"sourceRectangle"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderColor",{get:function(){return this._borderColor},set:function(e){$j.equals(this._borderColor,e)||(this._borderColor=e,this._propertyChanged.notify(this,"borderColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overprintStroke",{get:function(){return this._overprintStroke},set:function(e){this._overprintStroke!==e&&(this._overprintStroke=e,this._propertyChanged.notify(this,"overprintStroke"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillColor",{get:function(){return this._fillColor},set:function(e){$j.equals(this._fillColor,e)||(this._fillColor=e,this._propertyChanged.notify(this,"fillColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overprintFill",{get:function(){return this._overprintFill},set:function(e){this._overprintFill!==e&&(this._overprintFill=e,this._propertyChanged.notify(this,"overprintFill"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altBorderColor",{get:function(){return this._altBorderColor},set:function(e){$j.equals(this._altBorderColor,e)||(this._altBorderColor=e,this._propertyChanged.notify(this,"altBorderColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dash",{get:function(){return this._dash},set:function(e){FL.isEqual(this._dash,e)||(this._dash=e,this._propertyChanged.notify(this,"dash"))},enumerable:!0,configurable:!0}),t.prototype.applyPermissionsConstrain=function(){e.prototype.applyPermissionsConstrain.call(this),this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=!1,this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=!1,this.isRenderTypeIsNormal||(this.shapePermissions.allowChangeBorderColor=!1,this.shapePermissions.allowChangeFillColor=!1)},Object.defineProperty(t.prototype,"shapePermissions",{get:function(){return this._shapePermissions},set:function(e){if(null==e)throw new kL("shapePermissions cannot be null");rj(this._shapePermissions,e)||(null!=this._shapePermissions&&this._shapePermissions.propertyChanged.remove(this._onPermissionsChanged),this._shapePermissions=e,this.applyPermissionsConstrain(),this._shapePermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"shapePermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(e){this._setViolationSettings(e)},enumerable:!0,configurable:!0}),t.prototype._setViolationSettings=function(t,n){if(void 0===n&&(n=!1),!(n||t instanceof IH))throw new kL("Shape ViolationSettings property must has ShapeViolationSettings type!");e.prototype._setViolationSettings.call(this,t,n)},t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.shapePermissions=null!=t._shapePermissions?t._shapePermissions.clone():null,n._stubPath=null!=t._stubPath?t._stubPath.clone():null,n.dash=FL.clone(t._dash),n.altBorderColor=null!=t._altBorderColor?t._altBorderColor.clone():null,n.fillColor=null!=t._fillColor?t._fillColor.clone():null,n.borderColor=null!=t._borderColor?t._borderColor.clone():null,n.sourceRectangle=null!=t._sourceRectangle?t._sourceRectangle.clone():null,null!=t.sourcePathId?n.sourcePathId=t.sourcePathId:n.sourcePath=null!=t._sourcePath?t._sourcePath.clone():null,n.borderWidth=t._borderWidth,n.fixedBorderWidth=t.fixedBorderWidth,n.overprintStroke=t.overprintStroke,n.overprintFill=t.overprintFill},t.prototype.equals=function(t){var n=e.prototype.equals.call(this,t),r=rj(this._shapePermissions,t._shapePermissions),i=rj(this._stubPath,t._stubPath),o=rj(this._dash,t._dash),s=rj(this._altBorderColor,t._altBorderColor),a=rj(this._fillColor,t._fillColor),l=rj(this._borderColor,t._borderColor),c=rj(this._sourceRectangle,t._sourceRectangle),u=rj(this.sourcePathId,t.sourcePathId),h=rj(this._sourcePath,t._sourcePath),d=rj(this._borderWidth,t._borderWidth),p=rj(this._fixedBorderWidth,t._fixedBorderWidth),f=rj(this._overprintStroke,t._overprintStroke),m=rj(this._overprintFill,t._overprintFill);return n&&r&&i&&o&&s&&a&&l&&c&&u&&h&&d&&p&&f&&m},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.prototype.getSimplifiedObject=function(t){var n=e.prototype.getSimplifiedObject.call(this,["shapePermissions"].concat(t));return n.shapePermissions=this.shapePermissions.getSimplifiedObject(),n.sourcePath=null==this.sourcePathId&&null!=this.sourcePath?this.sourcePath.toString():null,n},t.prototype._onPathLoaded=function(){this._pathLoadedEvent.notify(this)},t.prototype.getPathLoadedEvent=function(){return this._pathLoadedEvent},t.type="ShapeItem",function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([Lj({factory:new SH,displayName:"Alternative border color"}),kH("design:type",$j),kH("design:paramtypes",[$j])],t.prototype,"altBorderColor",null),t}(vH),AH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),MH=function(e){function t(n){void 0===n&&(n=new FN(0,0,10,10));var r=e.call(this,$N.rectangle(n.left,n.top,n.width,n.height))||this;return r.type=t.type,r.sourceRectangle=n,r}return AH(t,e),t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="RectangleItem",t}(RH),DH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),FH=function(e){function t(){var n=e.call(this)||this;return n._maskOpacity=.45,n._parentPlaceholder=null,n.type=t.type,n.borderWidth=0,n.fillColor=new Kj("rgba(0, 0, 0, 0)"),n._ignorePermissionsChange=!0,n.itemPermissions.itemToolbarPermissions.showEditButton=!0,n._ignorePermissionsChange=!1,n}return DH(t,e),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._maskOpacity},set:function(e){WN(this._maskOpacity,e)||(this._maskOpacity=e,this._propertyChanged.notify(this,"maskOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentPlaceholder",{get:function(){return this._parentPlaceholder},set:function(e){this._parentPlaceholder=e,this._propertyChanged.notify(this,"parentPlaceholder")},enumerable:!0,configurable:!0}),t.prototype.applyPermissionsConstrain=function(){null!=this.parentPlaceholder&&(this.parentPlaceholder.isCoverMode?(this.manipulationPermissions.resizeGrips.edgeConstraint=!1,this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(!1),this.manipulationPermissions.allowRotateConstraint=!1):(this.manipulationPermissions.resizeGrips.edgeConstraint=null,this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(null),this.manipulationPermissions.allowRotateConstraint=null),this.parentPlaceholder.applyPermissionsConstrain()),this.isRenderTypeIsNormal||(this.itemPermissions.allowOpacityChange=!1,this.shapePermissions.allowChangeBorderColor=!1,this.shapePermissions.allowChangeFillColor=!1)},t.prototype.getSimplifiedObject=function(t){return FL.isArray(t)||FL.isString(t)||(t=[]),e.prototype.getSimplifiedObject.call(this,["parentPlaceholder"].concat(t))},t.prototype._canSetIsVariable=function(){return!0},t.prototype._getPrintAreaBounds=function(){var e=null!=this.parentContainer?this.parentContainer:null!=this.parentPlaceholder?this.parentPlaceholder.parentContainer:null;return e instanceof Aj?e.parentComponent.bounds:null},t.prototype._getParentContainer=function(){return null!=this.parentPlaceholder?this.parentPlaceholder.parentContainer:null},t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n._maskOpacity=t._maskOpacity,n.isVariable=t.isVariable},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._maskOpacity,t._maskOpacity)&&rj(this.isVariable,t.isVariable)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="ContentItem",t}(MH),LH=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};!function(e){e.Miter="Miter",e.Round="Round",e.Bevel="Bevel"}(hH||(hH={}));var BH,NH,jH,HH,zH,VH,UH=function(){function e(t){this._color=new Kj("rgb(0,0,0)"),this._size=0,this._lineJoin=hH.Miter,this.type=e.type,this._propertyChanged=new PL,null!=t&&(this.color=null!=t.color?t.color:new Kj("rgb(0,0,0)"),this.size=null!=t.size?t.size:0,this.lineJoin=null!=t.lineJoin?t.lineJoin:hH.Miter)}return Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){$j.equals(this._color,e)||(this._color=e,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size!==e&&(this._size=e,this._propertyChanged.notify(this,"size"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this._propertyChanged.notify(this,"lineJoin"))},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this)},e._from_data=function(t){return null==t?null:new e({color:oH.createColor(t.color),size:"number"==typeof t.size?t.size:0,lineJoin:"string"==typeof t.lineJoin?t.lineJoin:hH.Miter})},e.prototype.equals=function(t){return t instanceof e&&this.color.equals(t.color)&&WN(this.size,t.size)&&this.lineJoin==t.lineJoin},e.equals=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.equals(t)},e.prototype.getSimplifiedObject=function(){return{color:this.color.toString(),size:this.size,lineJoin:this.lineJoin}},e.prototype.addPropertyChanged=function(e){this._propertyChanged.add(e)},e.prototype.removePropertyChanged=function(e){this._propertyChanged.remove(e)},e.type="StrokeSettings",function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([Lj({enumObject:hH}),LH("design:type",String),LH("design:paramtypes",[String])],e.prototype,"lineJoin",null),e}(),WH=function(){function e(e){this._color=new Kj("rgb(0,0,0)"),this._angle=0,this._distance=0,this._size=0,this._propertyChanged=new PL,null!=e&&(this.color=null!=e.color?e.color:new Kj("rgb(0,0,0)"),this.angle=null!=e.angle?e.angle:0,this.distance=null!=e.distance?e.distance:0,this.size=null!=e.size?e.size:0)}return Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){$j.equals(this._color,e)||(this._color=e,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle!==e&&(this._angle=e,this._propertyChanged.notify(this,"angle"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(e){this._distance!==e&&(this._distance=e,this._propertyChanged.notify(this,"distance"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size!==e&&(this._size=e,this._propertyChanged.notify(this,"size"))},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this)},e._from_data=function(t){return null==t?null:new e({color:oH.createColor(t.color),angle:"number"==typeof t.angle?t.angle:0,distance:"number"==typeof t.distance?t.distance:0,size:"number"==typeof t.size?t.size:0})},e.prototype.equals=function(t){return t instanceof e&&this.color.equals(t.color)&&WN(this.angle,t.angle)&&WN(this.distance,t.distance)&&WN(this.size,t.size)},e.equals=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.equals(t)},e.prototype.getSimplifiedObject=function(){return{color:this.color.toString(),angle:this.angle,distance:this.distance,size:this.size}},e.prototype.addPropertyChanged=function(e){this._propertyChanged.add(e)},e.prototype.removePropertyChanged=function(e){this._propertyChanged.remove(e)},e}(),XH=function(){function e(e){this.propertyChanged=new EL,null==e&&(e=!0),this.allowChangeText=e,this.allowChangeFont=e,this.allowChangeFontSize=e,this.allowChangeFontColor=e,this.allowChangeTextAlignment=e,this.allowChangeTextBIU=e,this.allowChangeShadow=e,this.allowChangeStroke=e,this.allowChangeLeading=e,this.allowTextFormatting=null}return Object.defineProperty(e.prototype,"allowChangeText",{get:function(){return this._allowChangeText},set:function(e){this._allowChangeText!==e&&(this._allowChangeText=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeFont",{get:function(){return this._allowChangeFont},set:function(e){this._allowChangeFont!==e&&(this._allowChangeFont=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeFontSize",{get:function(){return this._allowChangeFontSize},set:function(e){this._allowChangeFontSize!==e&&(this._allowChangeFontSize=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeFontColor",{get:function(){return this._allowChangeFontColor},set:function(e){this._allowChangeFontColor!==e&&(this._allowChangeFontColor=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeTextAlignment",{get:function(){return this._allowChangeTextAlignment},set:function(e){this._allowChangeTextAlignment!==e&&(this._allowChangeTextAlignment=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeTextBIU",{get:function(){return this._allowChangeTextBIU},set:function(e){this._allowChangeTextBIU!==e&&(this._allowChangeTextBIU=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeShadow",{get:function(){return this._allowChangeShadow},set:function(e){this._allowChangeShadow!==e&&(this._allowChangeShadow=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeStroke",{get:function(){return this._allowChangeStroke},set:function(e){this._allowChangeStroke!==e&&(this._allowChangeStroke=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeLeading",{get:function(){return this._allowChangeLeading},set:function(e){this._allowChangeLeading!==e&&(this._allowChangeLeading=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowTextFormatting",{get:function(){return this._allowTextFormatting},set:function(e){this._allowTextFormatting!==e&&(this._allowTextFormatting=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;return t.allowChangeFont=this.allowChangeFont,t.allowChangeFontColor=this.allowChangeFontColor,t.allowChangeFontSize=this.allowChangeFontSize,t.allowChangeShadow=this.allowChangeShadow,t.allowChangeStroke=this.allowChangeStroke,t.allowChangeText=this.allowChangeText,t.allowChangeTextAlignment=this.allowChangeTextAlignment,t.allowChangeTextBIU=this.allowChangeTextBIU,t.allowChangeLeading=this.allowChangeLeading,t.allowTextFormatting=this.allowTextFormatting,t},e.prototype.equals=function(e){return this.allowChangeFont===e.allowChangeFont&&this.allowChangeFontColor===e.allowChangeFontColor&&this.allowChangeFontSize===e.allowChangeFontSize&&this.allowChangeShadow===e.allowChangeShadow&&this.allowChangeStroke===e.allowChangeStroke&&this.allowChangeText===e.allowChangeText&&this.allowChangeTextAlignment===e.allowChangeTextAlignment&&this.allowChangeTextBIU===e.allowChangeTextBIU&&this.allowChangeLeading===e.allowChangeLeading&&this.allowTextFormatting===e.allowTextFormatting},e.prototype.getSimplifiedObject=function(){var e={};return e.allowChangeText=this.allowChangeText,e.allowChangeFont=this.allowChangeFont,e.allowChangeFontSize=this.allowChangeFontSize,e.allowChangeFontColor=this.allowChangeFontColor,e.allowChangeTextAlignment=this.allowChangeTextAlignment,e.allowChangeTextBIU=this.allowChangeTextBIU,e.allowChangeShadow=this.allowChangeShadow,e.allowChangeStroke=this.allowChangeStroke,e.allowChangeLeading=this.allowChangeLeading,e.allowTextFormatting=this.allowTextFormatting,e},e}();!function(e){e[e.ShrinkToContentWidth=0]="ShrinkToContentWidth",e[e.StretchToContentWidth=1]="StretchToContentWidth",e[e.ShrinkOrStretchToContentWidth=2]="ShrinkOrStretchToContentWidth",e[e.ShrinkToContentHeight=3]="ShrinkToContentHeight",e[e.StretchToContentHeight=4]="StretchToContentHeight",e[e.ShrinkOrStretchToContentHeight=5]="ShrinkOrStretchToContentHeight",e[e.ShrinkToContent=6]="ShrinkToContent",e[e.StretchToContent=7]="StretchToContent",e[e.ShrinkOrStretchToContent=8]="ShrinkOrStretchToContent"}(BH||(BH={})),function(e){e[e.Size=0]="Size",e[e.Scale=1]="Scale"}(NH||(NH={})),function(e){e[e.Clip=0]="Clip",e[e.FitToWidth=1]="FitToWidth",e[e.FitToBox=2]="FitToBox",e[e.ExpandBox=3]="ExpandBox"}(jH||(jH={})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right",e[e.Justify=3]="Justify",e[e.LastLeft=4]="LastLeft",e[e.LastRight=5]="LastRight",e[e.LastCenter=6]="LastCenter"}(HH||(HH={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Bottom=2]="Bottom"}(zH||(zH={})),function(e){e[e.Ascent=0]="Ascent",e[e.CapHeight=1]="CapHeight",e[e.Leading=2]="Leading",e[e.XHeight=3]="XHeight",e[e.Fixed=4]="Fixed"}(VH||(VH={}));var GH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qH=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},$H=function(e){function t(n){var r=e.call(this,n)||this;return r.type=t.type,null==n&&(n=!0),r._allowTextCrop=n,r}return GH(t,e),t.prototype.clone=function(){var n=new t;return n.allowTextCrop=this.allowTextCrop,e.prototype.clone.call(this,n)},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.allowTextCrop===t.allowTextCrop},t.type="TextViolationSettings",function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([uH(),qH("design:type",Boolean)],t.prototype,"allowTextCrop",void 0),t}(IH),YH=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KH=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},QH=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ZH=function(e){function t(n,r,i){var o=e.call(this)||this;o._text="",o._originalText="",o._underline=!1,o._color=new Kj("rgb(0,0,0)"),o._alignment=HH.Left,o._tracking=0,o._leading=0,o._checkTextCrop=!0,o._overlapLinesEnabled=!1,o._verticalScale=1,o._horizontalScale=1,o._stroke=null,o._shadow=null,o._previewScale=1,o._placeholders=new Ij,o._displayText=null,o._colorPalette=new Ij,o._baselineShift=0,o._overprintText=!1,o.values=[],o._maxLineLength=null,o._maxLineCount=null,o.isTextPlaceholder=!1,o.textColorForAbnormalRendering=new Kj("rgb(0,0,0)"),o.type=t.type,o._onFontPropertyChanged=function(e,t){o._propertyChanged.notify(o,"font")},o._onShadowPropertyChanged=function(e,t){o._propertyChanged.notify(o,"shadow")},o._onStrokePropertyChanged=function(e,t){o._propertyChanged.notify(o,"stroke")},o.borderWidth=0,o.fillColor=new Kj("rgba(0, 0, 0, 0)"),o.text=null!=n?n:"",o._font=new t.FontSettings(r,null!=i?i:10),o._subscribeFontPropertyChanged(),o.textPermissions=new XH,o._setViolationSettings(new $H,!0);var s=function(){o._displayText=null,o._propertyChanged.notify(o,"text")};return o._placeholders.add_itemAdded(function(e){return e.item.addPropertyChanged(s)}),o._placeholders.add_itemRemoved(function(e){return e.item.removePropertyChanged(s)}),o._ignorePermissionsChange=!0,o.itemPermissions.allowRemoveOnLayoutChange=!0,o.itemPermissions.itemToolbarPermissions.showEditButton=!0,o._ignorePermissionsChange=!1,o}return YH(t,e),Object.defineProperty(t.prototype,"maxLineCount",{get:function(){return this._maxLineCount},set:function(e){this._maxLineCount!==e&&(this._maxLineCount=e,this._displayText=null,this._propertyChanged.notify(this,"maxLineCount"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLineLength",{get:function(){return this._maxLineLength},set:function(e){this._maxLineLength!==e&&(this._maxLineLength=e,this._displayText=null,this._propertyChanged.notify(this,"maxLineLength"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previewScale",{get:function(){return this._previewScale},set:function(e){WN(this._previewScale,e)||(this._previewScale=e,this._propertyChanged.notify(this,"previewScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){UH.equals(this._stroke,e)||(this._unsubscribeStrokePropertyChanged(),this._stroke=e,this._subscribeStrokePropertyChanged(),this._propertyChanged.notify(this,"stroke"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadow",{get:function(){return this._shadow},set:function(e){null==this._shadow&&null==e||null!=e&&e.equals(this._shadow)||(this._unsubscribeShadowPropertyChanged(),this._shadow=e,this._subscribeShadowPropertyChanged(),this._propertyChanged.notify(this,"shadow"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalScale",{get:function(){return this._horizontalScale},set:function(e){WN(this._horizontalScale,e)||(this._horizontalScale=e,this._propertyChanged.notify(this,"horizontalScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalScale",{get:function(){return this._verticalScale},set:function(e){WN(this._verticalScale,e)||(this._verticalScale=e,this._propertyChanged.notify(this,"verticalScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkTextCrop",{get:function(){return this._checkTextCrop},set:function(e){this._checkTextCrop!==e&&(this._checkTextCrop=e,this._propertyChanged.notify(this,"checkTextCrop"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlapLinesEnabled",{get:function(){return this._overlapLinesEnabled},set:function(e){this._overlapLinesEnabled!==e&&(this._overlapLinesEnabled=e,this._propertyChanged.notify(this,"overlapLinesEnabled"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this._alignment},set:function(e){this._alignment!==e&&(this._alignment=e,this._propertyChanged.notify(this,"alignment"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tracking",{get:function(){return this._tracking},set:function(e){WN(this._tracking,e)||(this._tracking=e,this._propertyChanged.notify(this,"tracking"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(e){WN(this._leading,e)||(this._leading=e,this._propertyChanged.notify(this,"leading"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalText",{get:function(){return null!=this._originalText?this._originalText:""},set:function(e){this._originalText=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"underline",{get:function(){return this._underline},set:function(e){this._underline!==e&&(this._underline=e,this._propertyChanged.notify(this,"underline"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this._font},set:function(e){t.FontSettings.equals(this._font,e)||(this._unsubscribeFontPropertyChanged(),this._font=e,this._subscribeFontPropertyChanged(),this._propertyChanged.notify(this,"font"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return null==this._displayText&&(this._displayText=this.getUpdatedText(this._text)),this._text=this._displayText,this._text},set:function(e){this._text!==e&&(this._text=e,this._displayText=null,this._propertyChanged.notify(this,"text"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){$j.equals(this._color,e)||(this._color=e,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baselineShift",{get:function(){return this._baselineShift},set:function(e){WN(this._baselineShift,e)||(this._baselineShift=e,this._propertyChanged.notify(this,"baselineShift"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overprintText",{get:function(){return this._overprintText},set:function(e){e!=this._overprintText&&(this._overprintText=e,this._propertyChanged.notify(this,"overprintText"))},enumerable:!0,configurable:!0}),t.prototype.getUpdatedText=function(e){var t,n,r=e;this.placeholders.length>0&&(r=this._replaceInStringPlaceholders());var i=null!==(t=this._maxLineCount)&&void 0!==t?t:0,o=null!==(n=this._maxLineLength)&&void 0!==n?n:0;if(i>0||o>0){aj(r)&&(r=lj(e,"\n"));var s=r.split("\n");if(i>0&&s.length>i&&(s=s.splice(0,i)),o>0)for(var a=0;a<s.length;a++)s[a].length>o&&(s[a]=s[a].substr(0,o));return s.join("\n")}return r},Object.defineProperty(t.prototype,"placeholders",{get:function(){return this._placeholders},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorPalette",{get:function(){return this._colorPalette},enumerable:!0,configurable:!0}),t.prototype._canSetIsVariable=function(){return!0},Object.defineProperty(t.prototype,"previewFontSize",{get:function(){return this.font.size*this.previewScale},set:function(e){this.font.size=e/this.previewScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previewLeading",{get:function(){return this.leading*this.previewScale},set:function(e){this.leading=e/this.previewScale},enumerable:!0,configurable:!0}),t.prototype.applyPermissionsConstrain=function(){e.prototype.applyPermissionsConstrain.call(this),this.itemPermissions.itemToolbarPermissions.showSelectButton=!1,this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=!(null!=this.textPermissions&&!this.textPermissions.allowChangeText)&&null,this.isRenderTypeIsNormal||(this.textPermissions.allowChangeFontColor=!1,this.textPermissions.allowChangeShadow=!1,this.textPermissions.allowChangeStroke=!1)},Object.defineProperty(t.prototype,"textPermissions",{get:function(){return this._textPermissions},set:function(e){if(null==e)throw new kL("textPermissions cannot be null");rj(this._textPermissions,e)||(null!=this._textPermissions&&this._textPermissions.propertyChanged.remove(this._onPermissionsChanged),this._textPermissions=e,this.applyPermissionsConstrain(),this._textPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"textPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(e){this._setViolationSettings(e)},enumerable:!0,configurable:!0}),t.prototype._setViolationSettings=function(t,n){if(void 0===n&&(n=!1),!(n||t instanceof $H))throw new kL("Shape ViolationSettings property must has TextViolationSettings type!");e.prototype._setViolationSettings.call(this,t,n)},t.prototype._subscribeFontPropertyChanged=function(){null!=this._font&&this._font.addPropertyChanged(this._onFontPropertyChanged)},t.prototype._unsubscribeFontPropertyChanged=function(){null!=this._font&&this._font.removePropertyChanged(this._onFontPropertyChanged)},t.prototype._subscribeShadowPropertyChanged=function(){null!=this._shadow&&this._shadow.addPropertyChanged(this._onShadowPropertyChanged)},t.prototype._unsubscribeShadowPropertyChanged=function(){null!=this._shadow&&this._shadow.removePropertyChanged(this._onShadowPropertyChanged)},t.prototype._subscribeStrokePropertyChanged=function(){null!=this._stroke&&this._stroke.addPropertyChanged(this._onStrokePropertyChanged)},t.prototype._unsubscribeStrokePropertyChanged=function(){null!=this._stroke&&this._stroke.removePropertyChanged(this._onStrokePropertyChanged)},t.prototype.getSimplifiedObject=function(t){var n=e.prototype.getSimplifiedObject.call(this,["_placeholders","currentTextImage","textPermissions","textForTextWhizz","shadow","stroke"].concat(t));return n.placeholders=this.placeholders.toArray(),n.textPermissions=this.textPermissions.getSimplifiedObject(),n.font=this.font.getSimplifiedObject(),n.shadow=null!=this.shadow?this.shadow.getSimplifiedObject():null,n.stroke=null!=this.stroke?this.stroke.getSimplifiedObject():null,n},t.prototype._replaceInStringPlaceholders=function(){return aj(this.originalText)?this._replaceInStringPlaceholdersValueInRichText():this._replaceInStringPlaceholdersValueInPlainText()},t.prototype._replaceInStringPlaceholdersValueInPlainText=function(){var e=this.originalText;return this.placeholders.forEach(function(t){e=e.replace(t.id,t.value)}),e},t.prototype._replaceInStringPlaceholdersValueInRichText=function(){if(null==this._originalTextDom){var e=new DOMParser;this._originalTextDom=e.parseFromString("<xml>"+this.originalText+"</xml>","text/xml")}var t=this._originalTextDom.cloneNode(!0),n=t.getElementsByTagName("span");this.placeholders.forEach(function(e){if(null!=n&&n.length)for(var t=0;t<n.length;t++){var r=n[t];null!=r.textContent&&(r.textContent=r.textContent.replace(e.id,e.value))}});var r=(new XMLSerializer).serializeToString(t);return r.substr(0,r.length-6).substr(5)},t.prototype._copy=function(t,n,r,i){var o,s;if(e.prototype._copy.call(this,t,n,r,i),n.textPermissions=t._textPermissions.clone(),n.placeholders.setRange(t.placeholders.toArray().map(function(e){return e.clone()})),n.color=t._color.clone(),n.text=t._text,n.font=t._font.clone(),n.underline=t._underline,n.originalText=t._originalText,n.leading=t._leading,n.tracking=t._tracking,n.alignment=t._alignment,n.checkTextCrop=t._checkTextCrop,n.verticalScale=t._verticalScale,n.horizontalScale=t._horizontalScale,n.shadow=null!=t._shadow?t._shadow.clone():null,n.stroke=null!=t._stroke?t._stroke.clone():null,n.previewScale=t._previewScale,n._maxLineCount=t._maxLineCount,n.isTextPlaceholder=t.isTextPlaceholder,n.maxLineLength=t.maxLineLength,n.overlapLinesEnabled=t.overlapLinesEnabled,n.colorPalette.setRange(t.colorPalette.toArray().map(function(e){return e.clone()})),n.baselineShift=t.baselineShift,n.overprintText=t.overprintText,null!=t.values){n.values=[];try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t.values),l=a.next();!l.done;l=a.next())n.values.push(l.value.clone())}catch(c){o={error:c}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}}},t.prototype.equals=function(t){var n=e.prototype.equals.call(this,t),r=rj(this._textPermissions,t._textPermissions),i=ij(this._placeholders.toArray(),t._placeholders.toArray()),o=rj(this._color,t._color),s=rj(this._text,t._text),a=rj(this._font,t._font),l=rj(this._underline,t._underline),c=rj(this._originalText,t._originalText),u=rj(this._leading,t._leading),h=rj(this._tracking,t._tracking),d=rj(this._alignment,t._alignment),p=rj(this._checkTextCrop,t._checkTextCrop),f=rj(this._verticalScale,t._verticalScale),m=rj(this._previewScale,t._previewScale),g=rj(this._maxLineCount,t._maxLineCount),y=rj(this.isTextPlaceholder,t.isTextPlaceholder),_=rj(this._maxLineLength,t._maxLineLength),v=rj(this._overlapLinesEnabled,t._overlapLinesEnabled),b=rj(this._stroke,t._stroke),w=ij(this.values,t.values),C=ij(this._colorPalette.toArray(),t._colorPalette.toArray()),x=rj(this._baselineShift,t._baselineShift),E=rj(this._overprintText,t._overprintText);return n&&r&&i&&o&&s&&a&&l&&c&&u&&h&&d&&p&&f&&m&&g&&y&&_&&v&&b&&w&&C&&x&&E},t.prototype.isEmptyText=function(){return""===this.text},t.prototype.isEmptyXmlText=function(){return"<p></p>"===this.text||"<p><span></span></p>"===this.text},t.prototype.isEmpty=function(){return!this.isTextPlaceholder&&(this.isEmptyText()||this.isEmptyXmlText())},t.type="baseText",KH([Lj({factory:new xH(1),displayName:"Max line count"}),QH("design:type",Number),QH("design:paramtypes",[Number])],t.prototype,"maxLineCount",null),KH([Lj({factory:new xH(50),displayName:"Max line length"}),QH("design:type",Number),QH("design:paramtypes",[Number])],t.prototype,"maxLineLength",null),KH([Lj({factory:new EH(UH),displayName:"Stroke"}),QH("design:type",UH),QH("design:paramtypes",[UH])],t.prototype,"stroke",null),KH([Lj({factory:new EH(WH),displayName:"Shadow"}),QH("design:type",WH),QH("design:paramtypes",[WH])],t.prototype,"shadow",null),KH([Lj({enumObject:HH}),QH("design:type",Number),QH("design:paramtypes",[Number])],t.prototype,"alignment",null),t}(MH);!function(e){var t=function(e){function t(t,n){void 0===n&&(n=10);var r=e.call(this)||this;return r._fauxBold=!1,r._fauxItalic=!1,r._allCaps=!1,r._openTypeFeatures=[],r.$_propertyChanged=new PL,r._postScriptName=t,r._size=n,r}return YH(t,e),t.prototype.clone=function(){var e=new t(this._postScriptName,this._size);return e._openTypeFeatures=FL.clone(this._openTypeFeatures),e.allCaps=this._allCaps,e.fauxItalic=this._fauxItalic,e.fauxBold=this._fauxBold,e},Object.defineProperty(t.prototype,"fauxBold",{get:function(){return this._fauxBold},set:function(e){this._fauxBold!==e&&(this._fauxBold=e,this.$_propertyChanged.notify(this,"fauxBold"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fauxItalic",{get:function(){return this._fauxItalic},set:function(e){this._fauxItalic!==e&&(this._fauxItalic=e,this.$_propertyChanged.notify(this,"fauxItalic"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allCaps",{get:function(){return this._allCaps},set:function(e){this._allCaps!==e&&(this._allCaps=e,this.$_propertyChanged.notify(this,"allCaps"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openTypeFeatures",{get:function(){return this._openTypeFeatures},set:function(e){this._openTypeFeatures!==e&&(this._openTypeFeatures=e,this.$_propertyChanged.notify(this,"openTypeFeatures"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"postScriptName",{get:function(){return this._postScriptName},set:function(e){this._postScriptName!==e&&(this._postScriptName=e,this.$_propertyChanged.notify(this,"postScriptName"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(e){WN(this._size,e)||(this._size=e,this.$_propertyChanged.notify(this,"size"))},enumerable:!0,configurable:!0}),t.prototype.addPropertyChanged=function(e){this.$_propertyChanged.add(e)},t.prototype.removePropertyChanged=function(e){this.$_propertyChanged.remove(e)},t.equals=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.equals(t)},t.prototype.equals=function(e){return this.postScriptName===e.postScriptName&&this.size===e.size&&this.fauxBold===e.fauxBold&&this.fauxItalic===e.fauxItalic&&this.allCaps===e.allCaps&&FL.isEqual(this.openTypeFeatures,e.openTypeFeatures)},t.prototype.getSimplifiedObject=function(){return{allCaps:this.allCaps,fauxBold:this.fauxBold,fauxItalic:this.fauxItalic,openTypeFeatures:this.openTypeFeatures,postScriptName:this.postScriptName,size:this.size}},t}(mj);e.FontSettings=t;var n=function(){function e(e,t){this.name=e,this.text=t}return e.prototype.equals=function(e){return null!=e&&rj(this.name,e.name)&&rj(this.text,e.text)},e.prototype.clone=function(){return new e(this.name,this.text)},e}();e.BaseTextValue=n}(ZH||(ZH={}));var JH,ez,tz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nz=function(e){function t(n,r,i,o){var s=e.call(this,n,i,o)||this;return s._isVertical=!1,s.type=t.type,s._textRectangle=null!=r?r:new FN,s}return tz(t,e),Object.defineProperty(t.prototype,"textRectangle",{get:function(){return this._textRectangle},set:function(e){FN.isEqual(this._textRectangle,e)||(this._textRectangle=e,this._propertyChanged.notify(this,"textRectangle"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVertical",{get:function(){return this._isVertical},set:function(e){this._isVertical!==e&&(this._isVertical=e,this._propertyChanged.notify(this,"isVertical"))},enumerable:!0,configurable:!0}),t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.isVertical=t.isVertical,n.textRectangle=t.textRectangle},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._isVertical,t._isVertical)&&rj(this._textRectangle,t._textRectangle)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="AutoScaledTextItem",t}(ZH),rz=function(){function e(){this._allowChangeBarcodeType=!0,this._allowChangeBarcodeContent=!0,this._allowChangeBarcodeColor=!0,this.propertyChanged=new EL}return Object.defineProperty(e.prototype,"allowChangeBarcodeType",{get:function(){return this._allowChangeBarcodeType},set:function(e){this._allowChangeBarcodeType!==e&&(this._allowChangeBarcodeType=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeBarcodeContent",{get:function(){return this._allowChangeBarcodeContent},set:function(e){this._allowChangeBarcodeContent!==e&&(this._allowChangeBarcodeContent=e,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeBarcodeColor",{get:function(){return this._allowChangeBarcodeColor},set:function(e){this._allowChangeBarcodeColor!==e&&(this._allowChangeBarcodeColor=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){var e={};return e.allowChangeBarcodeType=this.allowChangeBarcodeType,e.allowChangeBarcodeContent=this.allowChangeBarcodeContent,e.allowChangeBarcodeColor=this.allowChangeBarcodeColor,e},e.prototype.clone=function(){var t=new e;return t.allowChangeBarcodeType=this.allowChangeBarcodeType,t.allowChangeBarcodeContent=this.allowChangeBarcodeContent,t.allowChangeBarcodeColor=this.allowChangeBarcodeColor,t},e.prototype.equals=function(e){return this.allowChangeBarcodeColor===e.allowChangeBarcodeColor&&this.allowChangeBarcodeContent===e.allowChangeBarcodeContent&&this.allowChangeBarcodeType===e.allowChangeBarcodeType},e}();!function(e){e.AZTEC="AZTEC",e.CODABAR="CODABAR",e.CODE_39="CODE_39",e.CODE_93="CODE_93",e.CODE_128="CODE_128",e.DATA_MATRIX="DATA_MATRIX",e.EAN_8="EAN_8",e.EAN_13="EAN_13",e.ITF="ITF",e.PDF_417="PDF_417",e.QR_CODE="QR_CODE",e.UPC_A="UPC_A",e.UPC_E="UPC_E",e.MSI="MSI",e.PLESSEY="PLESSEY",e.IMB="IMB"}(JH||(JH={})),function(e){e.None="None",e.VCard="VCard",e.Phone="Phone",e.Url="Url"}(ez||(ez={}));var iz,oz=n("z6aY"),sz=function(){function e(e){if(this.barcodeFormat=JH.QR_CODE,this.barcodeSubType=ez.None,FL.isString(e))try{e=JSON.parse(e)}catch(t){console.warn("Unable to parse BarcodeData from string ",e,t),e=null}FL.isObject(e)&&FL.extend(this,e)}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return FL.isEmpty(this.firstName)&&FL.isEmpty(this.lastName)&&FL.isEmpty(this.organization)&&FL.isEmpty(this.position)&&FL.isEmpty(this.email)&&FL.isEmpty(this.mobilePhone)&&FL.isEmpty(this.url)&&FL.isEmpty(this.phone)&&FL.isEmpty(this.barcodeValue)},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return null!=e&&this.barcodeFormat===e.barcodeFormat&&this.barcodeSubType===e.barcodeSubType&&this.firstName===e.firstName&&this.lastName===e.lastName&&this.organization===e.organization&&this.position===e.position&&this.email===e.email&&this.mobilePhone===e.mobilePhone&&this.url===e.url&&this.phone===e.phone&&this.barcodeValue===e.barcodeValue},e.prototype._isEmpty=function(e){return FL.isEmpty(null!=e?e.trim():null)},e.prototype.toVCardString=function(){return oz.generate({n:[{value:[this.lastName,this.firstName,"","",""]}],"email;internet":[{value:this.email}],org:[{value:this.organization}],"tel;cell":[{value:this.mobilePhone}],"tel;work":[{value:this.phone}],title:[{value:this.position}],url:[{value:this.url}]})},e.fromVCardString=function(t){var n=null!=t?oz.parse(t):{},r=new e;return r.barcodeFormat=JH.QR_CODE,r.barcodeSubType=ez.VCard,r.email=n.email&&n.email[0]&&n.email[0].value,r.lastName=n.n&&n.n[0]&&n.n[0].value[0],r.firstName=n.n&&n.n[0]&&n.n[0].value[1],r.organization=n.org&&n.org[0]&&n.org[0].value,r.mobilePhone=n.tel&&n.tel[0]&&n.tel[0].value,r.phone=n.tel&&n.tel[1]&&n.tel[1].value,r.position=n.title&&n.title[0]&&n.title[0].value,r.url=n.url&&n.url[0]&&n.url[0].value,r},e}(),az=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lz=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},cz=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},uz=function(e){function t(n,r,i,o){var s=e.call(this)||this;return s._barcodeContent="",s._barcodeFormat=JH.QR_CODE,s._barcodeOptions=new hz,s._barcodeSubType=ez.Url,s._color=new Kj("rgb(0,0,0)"),s.type=t.type,s._onOptionsPropertyChanged=function(e,t){s._propertyChanged.notify(s,"barcodeOptions")},s._barcodePermissions=new rz,s._barcodeOptions.pureBarcode=!0,s._ignorePermissionsChange=!1,s.manipulationPermissions.resizeGrips=new jj(!0,!1),s.itemPermissions.itemToolbarPermissions.showEditButton=!0,s.shapePermissions.allowChangeFillColor=!0,s.barcodePermissions.allowChangeBarcodeType=!1,s.barcodePermissions.allowChangeBarcodeColor=!0,s.barcodePermissions.allowChangeBarcodeContent=!0,s._ignorePermissionsChange=!0,s.fillColor=new Kj("rgba(255,255,255,1)"),null!=n&&(s._barcodeFormat=n),null!=r&&(s._barcodeContent=r),null!=i&&(s._barcodeOptions=i),s._subscribeOptionsPropertyChanged(),null!=o&&(s.sourceRectangle=o),s.applyPermissionsConstrain(),s}return az(t,e),Object.defineProperty(t.prototype,"barcodePermissions",{get:function(){return this._barcodePermissions},set:function(e){if(null==e)throw new kL("barcodePermissions cannot be null");rj(this._barcodePermissions,e)||(this._barcodePermissions.propertyChanged.remove(this._onPermissionsChanged),this._barcodePermissions=e,this._barcodePermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"barcodeContent",{get:function(){return this._barcodeContent},set:function(e){this._barcodeContent!==e&&(this._barcodeContent=e,this._propertyChanged.notify(this,"barcodeContent"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"barcodeFormat",{get:function(){return this._barcodeFormat},set:function(e){this._barcodeFormat!==e&&(this._barcodeFormat=e,this._propertyChanged.notify(this,"barcodeFormat"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"barcodeSubType",{get:function(){return this._barcodeSubType},set:function(e){this._barcodeSubType!==e&&(this._barcodeSubType=e,this._propertyChanged.notify(this,"barcodeSubType"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color.equals(e)||(this._color=e,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"barcodeOptions",{get:function(){return this._barcodeOptions},set:function(e){JSON.stringify(this._barcodeOptions)!==JSON.stringify(e)&&(this._unsubscribeOptionsPropertyChanged(),this._barcodeOptions=e,this._subscribeOptionsPropertyChanged(),this._propertyChanged.notify(this,"barcodeOptions"))},enumerable:!0,configurable:!0}),t.prototype._subscribeOptionsPropertyChanged=function(){null!=this._barcodeOptions&&this._barcodeOptions.addPropertyChanged(this._onOptionsPropertyChanged)},t.prototype._unsubscribeOptionsPropertyChanged=function(){null!=this._barcodeOptions&&this._barcodeOptions.removePropertyChanged(this._onOptionsPropertyChanged)},Object.defineProperty(t.prototype,"isQrCode",{get:function(){return this.barcodeFormat===JH.QR_CODE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSquareCode",{get:function(){return this.barcodeFormat===JH.QR_CODE||this.barcodeFormat===JH.DATA_MATRIX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLinearBarcode",{get:function(){return this.barcodeFormat===JH.EAN_13||this.barcodeFormat===JH.EAN_8||this.barcodeFormat==JH.CODE_128||this.barcodeFormat===JH.UPC_A||this.barcodeFormat===JH.UPC_E},enumerable:!0,configurable:!0}),t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.barcodePermissions=t.barcodePermissions.clone(),n.barcodeContent=t.barcodeContent,n.barcodeFormat=t.barcodeFormat,n.barcodeSubType=t.barcodeSubType,n.color=t.color.clone(),n.barcodeOptions=new hz,n.barcodeOptions.width=t.barcodeOptions.width,n.barcodeOptions.height=t.barcodeOptions.height,n.barcodeOptions.margin=t.barcodeOptions.margin,n.barcodeOptions.pureBarcode=t.barcodeOptions.pureBarcode,n.barcodeOptions.errorCorrection=t.barcodeOptions.errorCorrection,n.barcodeOptions.characterSet=t.barcodeOptions.characterSet,n.barcodeOptions.pdf417Compact=t.barcodeOptions.pdf417Compact,n.barcodeOptions.pdf417Compaction=t.barcodeOptions.pdf417Compaction,n.barcodeOptions.pdf417Dimensions=t.barcodeOptions.pdf417Dimensions,n.barcodeOptions.disableEci=t.barcodeOptions.disableEci,n.barcodeOptions.code128ForceCodesetB=t.barcodeOptions.code128ForceCodesetB,n.barcodeOptions.aztecLayers=t.barcodeOptions.aztecLayers,n.barcodeOptions.qrVersion=t.barcodeOptions.qrVersion},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._barcodePermissions,t._barcodePermissions)&&rj(this._barcodeContent,t._barcodeContent)&&rj(this._barcodeFormat,t._barcodeFormat)&&rj(this._barcodeSubType,t._barcodeSubType)&&rj(this._color,t._color)&&rj(this._barcodeOptions,t._barcodeOptions)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.prototype.getSimplifiedObject=function(t){FL.isArray(t)||FL.isString(t)||(t=[]);var n=e.prototype.getSimplifiedObject.call(this,["barcodePermissions","isQrCode","isLinearBarcode","isSquareCode","barcodeData"].concat(t));return n.barcodePermissions=this.barcodePermissions.getSimplifiedObject(),n},t.prototype.applyPermissionsConstrain=function(){null!=this.itemPermissions&&null!=this.itemPermissions.itemToolbarPermissions&&(this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=null==this.barcodePermissions||this.barcodePermissions.allowChangeBarcodeContent?null:this.barcodePermissions.allowChangeBarcodeContent,this.itemPermissions.itemToolbarPermissions.showSelectButton=!1)},Object.defineProperty(t.prototype,"barcodeData",{get:function(){var e=new sz;switch(e.barcodeSubType=this.barcodeSubType,e.barcodeFormat=this.barcodeFormat,e.barcodeFormat){default:e.barcodeValue=this.barcodeContent;break;case JH.QR_CODE:switch(this.barcodeSubType){case ez.Phone:e.phone=this.barcodeContent;break;case ez.Url:e.url=this.barcodeContent;break;case ez.VCard:return sz.fromVCardString(this.barcodeContent)}}return e},enumerable:!0,configurable:!0}),t.prototype.applyBarcodeData=function(e){this.barcodeFormat=e.barcodeFormat,this.barcodeSubType=null!=e.barcodeSubType?e.barcodeSubType:this.barcodeFormat===JH.QR_CODE?ez.Phone:ez.None;var t="";switch(this.barcodeFormat){case JH.QR_CODE:switch(this.barcodeSubType){case ez.Phone:t=e.phone;break;case ez.None:case ez.Url:t=e.url;break;case ez.VCard:t=e.toVCardString()}break;default:t=e.barcodeValue}this.barcodeContent=t},t.type="BarcodeItem",lz([Lj({enumObject:JH}),cz("design:type",String),cz("design:paramtypes",[String])],t.prototype,"barcodeFormat",null),lz([Lj({enumObject:ez}),cz("design:type",String),cz("design:paramtypes",[String])],t.prototype,"barcodeSubType",null),t}(FH),hz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return az(t,e),t.prototype.equals=function(e){return null!=e&&rj(this.width,e.width)&&rj(this.height,e.height)&&rj(this.margin,e.margin)&&rj(this.pureBarcode,e.pureBarcode)&&rj(this.errorCorrection,e.errorCorrection)&&rj(this.characterSet,e.characterSet)&&rj(this.pdf417Compact,e.pdf417Compact)&&rj(this.pdf417Compaction,e.pdf417Compaction)&&FL.isEqual(this.pdf417Dimensions,e.pdf417Dimensions)&&rj(this.disableEci,e.disableEci)&&rj(this.code128ForceCodesetB,e.code128ForceCodesetB)&&rj(this.aztecLayers,e.aztecLayers)&&rj(this.qrVersion,e.qrVersion)},t.type="EncodingOptions",lz([uH(),Lj({factory:new xH(0)}),cz("design:type",Number)],t.prototype,"width",void 0),lz([uH(),Lj({factory:new xH(0)}),cz("design:type",Number)],t.prototype,"height",void 0),lz([uH(),Lj({factory:new xH(0)}),cz("design:type",Number)],t.prototype,"margin",void 0),lz([uH(),Lj({factory:new xH(!0)}),cz("design:type",Boolean)],t.prototype,"pureBarcode",void 0),lz([uH(),Lj({factory:new xH("")}),cz("design:type",String)],t.prototype,"errorCorrection",void 0),lz([uH(),Lj({factory:new xH("")}),cz("design:type",String)],t.prototype,"characterSet",void 0),lz([uH(),Lj({factory:new xH(!1)}),cz("design:type",Boolean)],t.prototype,"pdf417Compact",void 0),lz([uH(),Lj({factory:new xH("")}),cz("design:type",String)],t.prototype,"pdf417Compaction",void 0),lz([uH(),cz("design:type",Object)],t.prototype,"pdf417Dimensions",void 0),lz([uH(),Lj({factory:new xH(!1)}),cz("design:type",Boolean)],t.prototype,"disableEci",void 0),lz([uH(),Lj({factory:new xH(!1)}),cz("design:type",Boolean)],t.prototype,"code128ForceCodesetB",void 0),lz([uH(),Lj({factory:new xH(0)}),cz("design:type",Number)],t.prototype,"aztecLayers",void 0),lz([uH(),Lj({factory:new xH(0)}),cz("design:type",Number)],t.prototype,"qrVersion",void 0),t}(mj),dz=function(){function e(e){this.FirstLineIndent=0,this.SpaceAfter=0,this.SpaceBefore=0,this.LeftIndent=0,this.RightIndent=0,null!=e&&(this.FirstLineIndent="number"==typeof e.FirstLineIndent?e.FirstLineIndent:0,this.SpaceAfter="number"==typeof e.SpaceAfter?e.SpaceAfter:0,this.SpaceBefore="number"==typeof e.SpaceBefore?e.SpaceBefore:0,this.LeftIndent="number"==typeof e.LeftIndent?e.LeftIndent:0,this.RightIndent="number"==typeof e.RightIndent?e.RightIndent:0)}return e.prototype.equals=function(t){return t instanceof e&&WN(this.FirstLineIndent,t.FirstLineIndent)&&WN(this.SpaceAfter,t.SpaceAfter)&&WN(this.SpaceBefore,t.SpaceBefore)&&WN(this.LeftIndent,t.LeftIndent)&&WN(this.RightIndent,t.RightIndent)},e.equals=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.equals(t)},e.prototype.clone=function(){return new e(this)},e}(),pz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fz=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},mz=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},gz=function(e){function t(n,r,i,o){var s=e.call(this,n,i,o)||this;return s._textRectangle=new FN,s._verticalAlignment=zH.Top,s._isVertical=!1,s._paragraphSettings=new dz,s._wrappingPath=null,s._wrappingMargin=7,s._scheduledFitMode=null,s._shrinkMode=NH.Size,s._overflowStrategy=jH.Clip,s._originalVerticalScale=1,s._originalHorizontalScale=1,s._firstBaselineOffset=VH.Ascent,s._firstBaselineMinOffset=0,s.characterLimit=null,s.type=t.type,null!=r&&(s.textRectangle=r,s.sourcePath=$N.rectangle(r.left,r.top,r.width,r.height)),s}return pz(t,e),Object.defineProperty(t.prototype,"textRectangle",{get:function(){return this._textRectangle},set:function(e){FN.isEqual(this._textRectangle,e)||(this._textRectangle=e,this._propertyChanged.notify(this,"textRectangle"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlignment",{get:function(){return this._verticalAlignment},set:function(e){this._verticalAlignment!==e&&(this._verticalAlignment=e,this._propertyChanged.notify(this,"verticalAlignment"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVertical",{get:function(){return this._isVertical},set:function(e){this._isVertical!==e&&(this._isVertical=e,this._propertyChanged.notify(this,"isVertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paragraphSettings",{get:function(){return this._paragraphSettings},set:function(e){this._paragraphSettings.equals(e)||(this._paragraphSettings=e,this._propertyChanged.notify(this,"paragraphSettings"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrappingPath",{get:function(){return this._wrappingPath},set:function(e){null==this._wrappingPath&&null==e||null!=this._wrappingPath&&this._wrappingPath.isEqual(e)||(this._wrappingPath=e,this._propertyChanged.notify(this,"wrappingPath"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrappingMargin",{get:function(){return this._wrappingMargin},set:function(e){this._wrappingMargin!==e&&(this._wrappingMargin=e,this._propertyChanged.notify(this,"wrappingMargin"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scheduledFitMode",{get:function(){return this._scheduledFitMode},set:function(e){this._scheduledFitMode!==e&&(this._scheduledFitMode=e,null!=e&&this._propertyChanged.notify(this,"scheduledFitMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shrinkMode",{get:function(){return this._shrinkMode},set:function(e){this._shrinkMode!==e&&(this._shrinkMode=e,null!=e&&this._propertyChanged.notify(this,"shrinkMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overflowStrategy",{get:function(){return this._overflowStrategy},set:function(e){this._overflowStrategy!==e&&(this._overflowStrategy=e,null!=e&&this._propertyChanged.notify(this,"overflowStrategy"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalVerticalScale",{get:function(){return this._originalVerticalScale},set:function(e){this._originalVerticalScale!==e&&(this._originalVerticalScale=e,null!=e&&this._propertyChanged.notify(this,"originalVerticalScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHorizontalScale",{get:function(){return this._originalHorizontalScale},set:function(e){this._originalHorizontalScale!==e&&(this._originalHorizontalScale=e,null!=e&&this._propertyChanged.notify(this,"originalHorizontalScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstBaselineOffset",{get:function(){return this._firstBaselineOffset},set:function(e){this._firstBaselineOffset!==e&&(this._firstBaselineOffset=e,null!=e&&this._propertyChanged.notify(this,"firstBaselineOffset"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstBaselineMinOffset",{get:function(){return this._firstBaselineMinOffset},set:function(e){WN(this._firstBaselineMinOffset,e)||(this._firstBaselineMinOffset=e,null!=e&&this._propertyChanged.notify(this,"firstBaselineMinOffset"))},enumerable:!0,configurable:!0}),t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.isVertical=t.isVertical,n.textRectangle=t.textRectangle.clone(),n.verticalAlignment=t.verticalAlignment,n.paragraphSettings=t.paragraphSettings.clone(),n.wrappingPath=null!=t.wrappingPath?t.wrappingPath.clone():null,n.wrappingMargin=t.wrappingMargin,n.scheduledFitMode=t.scheduledFitMode,n.shrinkMode=t.shrinkMode,n.overflowStrategy=t.overflowStrategy,n.originalVerticalScale=t.originalVerticalScale,n.originalHorizontalScale=t.originalHorizontalScale,n.characterLimit=t.characterLimit,n.firstBaselineOffset=t.firstBaselineOffset,n.firstBaselineMinOffset=t.firstBaselineMinOffset},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._isVertical,t._isVertical)&&rj(this._textRectangle,t._textRectangle)&&rj(this._verticalAlignment,t._verticalAlignment)&&rj(this._paragraphSettings,t._paragraphSettings)&&rj(this._wrappingPath,t._wrappingPath)&&rj(this._wrappingMargin,t._wrappingMargin)&&rj(this._scheduledFitMode,t._scheduledFitMode)&&rj(this._shrinkMode,t._shrinkMode)&&rj(this._overflowStrategy,t._overflowStrategy)&&rj(this._originalVerticalScale,t._originalVerticalScale)&&rj(this._originalHorizontalScale,t._originalHorizontalScale)&&rj(this.characterLimit,t.characterLimit)&&rj(this.firstBaselineOffset,t.firstBaselineOffset)&&rj(this.firstBaselineMinOffset,t.firstBaselineMinOffset)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="BoundedTextItem",fz([Lj({factory:new xH(50),displayName:"Character Limit"}),mz("design:type",Number)],t.prototype,"characterLimit",void 0),fz([Lj({enumObject:zH}),mz("design:type",Number),mz("design:paramtypes",[Number])],t.prototype,"verticalAlignment",null),fz([Lj({factory:new EH($N),displayName:"Wrapping path"}),mz("design:type",$N),mz("design:paramtypes",[$N])],t.prototype,"wrappingPath",null),fz([Lj({enumObject:BH}),mz("design:type",Number),mz("design:paramtypes",[Number])],t.prototype,"scheduledFitMode",null),fz([Lj({enumObject:NH}),mz("design:type",Number),mz("design:paramtypes",[Number])],t.prototype,"shrinkMode",null),fz([Lj({enumObject:jH}),mz("design:type",Number),mz("design:paramtypes",[Number])],t.prototype,"overflowStrategy",null),t}(ZH),yz=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_z=function(){function e(){this.propertyChanged=new EL,this.allowReplaceContentConstraint=null,this._allowReplaceContent=!0,this.allowUngroupContraint=null,this._allowUngroup=!0,this.allowSelectNestedItemsContraint=null,this._allowSelectNestedItems=!0}return Object.defineProperty(e.prototype,"allowReplaceContent",{get:function(){return null!=this.allowReplaceContentConstraint?this.allowReplaceContentConstraint:this._allowReplaceContent},set:function(e){this._allowReplaceContent!==e&&(this._allowReplaceContent=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowUngroup",{get:function(){return null!=this.allowUngroupContraint?this.allowUngroupContraint:this._allowUngroup},set:function(e){this._allowUngroup!==e&&(this._allowUngroup=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowSelectNestedItems",{get:function(){return null!=this.allowSelectNestedItemsContraint?this.allowSelectNestedItemsContraint:this._allowSelectNestedItems},set:function(e){this._allowSelectNestedItems!==e&&(this._allowSelectNestedItems=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){return{allowReplaceContent:this._allowReplaceContent,allowSelectNestedItems:this._allowSelectNestedItems,allowUngroup:this._allowUngroup}},e.prototype.clone=function(){var t=new e;return t.allowReplaceContent=this._allowReplaceContent,t.allowReplaceContentConstraint=this.allowReplaceContentConstraint,t.allowSelectNestedItems=this._allowSelectNestedItems,t.allowSelectNestedItemsContraint=this.allowSelectNestedItemsContraint,t.allowUngroup=this._allowUngroup,t.allowUngroupContraint=this.allowUngroupContraint,t},e.prototype.equals=function(e){return this.allowReplaceContent===e.allowReplaceContent&&this.allowReplaceContentConstraint===e.allowReplaceContentConstraint&&this.allowSelectNestedItems===e.allowSelectNestedItems&&this.allowSelectNestedItemsContraint===e.allowSelectNestedItemsContraint&&this.allowUngroup===e.allowUngroup&&this.allowUngroupContraint===e.allowUngroupContraint},function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([Lj({ignore:!0}),yz("design:type",Boolean)],e.prototype,"allowReplaceContentConstraint",void 0),e}(),vz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bz=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},wz=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(bz(arguments[t]));return e},Cz=function(e){function t(n){var r=e.call(this)||this;return r.items=new Ij,r.type=t.type,r.groupItemPermissions=new _z,r._ignorePermissionsChange=!0,r._groupItemPermissions.allowReplaceContent=!1,r._ignorePermissionsChange=!1,r.items.add_itemAdded(function(e){e.item.parentGroupItem=r,r._propertyChanged.notify(r,"items")}),r.items.add_itemRemoved(function(e){e.item.parentGroupItem=null,r._propertyChanged.notify(r,"items")}),null!=n&&r.items.addRange(n),r}return vz(t,e),Object.defineProperty(t.prototype,"groupItemPermissions",{get:function(){return this._groupItemPermissions},set:function(e){if(null==e)throw new kL("groupItemPermissions cannot be null");rj(this._groupItemPermissions,e)||(null!=this._groupItemPermissions&&this._groupItemPermissions.propertyChanged.remove(this._onPermissionsChanged),this._groupItemPermissions=e,this._groupItemPermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),t.prototype.addItems=function(e,t){var n;null!=t&&(e=e.reverse()),null!=e&&0!==e.length&&(null!=t&&t>-1?this.items.insertAt(t,e):(n=this.items).add.apply(n,wz(e)))},t.prototype._onContainerChanged=function(){var e=this;this.applyToItems(function(t){t.parentContainer=e.parentContainer})},t.prototype.addItem=function(e,t){null!=t&&t>-1?this.items.insertAt(t,e):this.items.add(e)},t.prototype.removeItems=function(e){var t,n;if(null!=e&&e.length>0)try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=r.next();!i.done;i=r.next())this.items.remove(i.value)}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},t.prototype.getNestedItems=function(e){void 0===e&&(e=!1);for(var n=[],r=wz(this.items);r.length>0;){var i=r.shift();i instanceof t&&(r.splice.apply(r,wz([r.indexOf(i),0],i.items)),e)||n.push(i)}return n},t.prototype.getSimplifiedObject=function(t){void 0===t&&(t=[]);var n=e.prototype.getSimplifiedObject.call(this,["groupManipulationPermissions","itemRemovedEvent","groupItemPermissions","items"].concat(t));return n.items=this.items.toArray().map(function(e){return e.getSimplifiedObject()}),n.groupItemPermissions=this.groupItemPermissions.getSimplifiedObject(),n},t.prototype._copy=function(t,n,r,i){if(e.prototype._copy.call(this,t,n,r,i),!(t.items.length<=0)){var o=t.items.toArray().map(function(e){return e.clone(r,i)});n.items.clear(),n.items.addRange(o),n.groupItemPermissions=t.groupItemPermissions.clone()}},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.prototype.applyPermissionsConstrain=function(){e.prototype.applyPermissionsConstrain.call(this),this.itemPermissions.itemToolbarPermissions.showEditButton=!1,this.itemPermissions.itemToolbarPermissions.showSelectButton=!1},t.prototype.applyToItems=function(e){this.items.forEach(e)},Object.defineProperty(t.prototype,"manipulationPermissions",{get:function(){if(0===this.items.length)return this.groupManipulationPermissions;var e=this.groupManipulationPermissions.clone();return this.getNestedItems(!0).forEach(function(t){e.allowDelete=e.allowDelete&&t.manipulationPermissions.allowDelete}),Object.freeze(e),e},set:function(e){throw new Error("You cannot use ManipulationPermissions setter with GroupItem. Use groupManipulationPermissions setter instead")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupManipulationPermissions",{get:function(){return e.prototype.getManipulationPermissions.call(this)},set:function(t){e.prototype.setManipulationPermissions.call(this,t)},enumerable:!0,configurable:!0}),t.prototype.isChildVisible=function(e){return!0},t.prototype.equals=function(t){var n=e.prototype.equals.call(this,t),r=rj(this.groupItemPermissions,t.groupItemPermissions),i=ij(wz(this.items),wz(t.items));return n&&r&&i},t.type="GroupItem",t}(vH),xz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ez=function(){return(Ez=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Sz=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Pz=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Sz(arguments[t]));return e},Tz=function(e){function t(n,r){void 0===r&&(r=null);var i=e.call(this,n)||this;return i.type=t.type,i._colorGroups=[],i._onItemAdded=function(e){t._generateColorGroups([e.item]).forEach(function(e){var t;if(e.targets=e.targets.filter(function(e){return!i.colorGroups.some(function(t){return t.targets.some(function(t){return t.itemId===e.itemId&&t.prop===e.prop})})}),!(e.targets.length<1)){var n=i.colorGroups.find(function(t){return t.color.equals(e.color)});null!=n?(t=n.targets).push.apply(t,Pz(e.targets)):(null==i.themeBinding.clipartColors&&(i.themeBinding.clipartColors=new Array(i.colorGroups.length).fill(null)),i.colorGroups.push(e),i.themeBinding.clipartColors.push(null))}})},i._onItemRemoved=function(e){var t=e.item.id;i.colorGroups.forEach(function(e){e.targets.some(function(e){return e.itemId===t})&&(e.targets=e.targets.filter(function(e){return e.itemId!==t}))}),i.colorGroups.some(function(e){return 0===e.targets.length})&&i.colorGroups.filter(function(e){return 0===e.targets.length}).map(function(e){return i.colorGroups.indexOf(e)}).forEach(function(e){i.colorGroups.splice(e,1),i.themeBinding.clipartColors.splice(e,1)})},i._ignorePermissionsChange=!0,i.groupItemPermissions.allowSelectNestedItems=!1,i.groupItemPermissions.allowUngroup=!1,i._ignorePermissionsChange=!1,i.colorGroups=null!=r?r:t._generateColorGroups(i.items.toArray()),i.items.add_itemAdded(i._onItemAdded),i.items.add_itemRemoved(i._onItemRemoved),i}return xz(t,e),t.prototype.getSimplifiedObject=function(t){return void 0===t&&(t=[]),e.prototype.getSimplifiedObject.call(this,t)},t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i);var o=t.colorGroups.map(function(e){return e.clone()});if(r){var s=n.items.toArray().map(function(e){return e.id}),a=t.items.toArray().map(function(e){return e.id}),l=o.reduce(function(e,t){return Pz(e,t.targets)},[]);s.forEach(function(e,t){return l.filter(function(e){return e.itemId===a[t]}).forEach(function(t){return t.itemId=e})})}n.colorGroups=o},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.prototype.applyPermissionsConstrain=function(){e.prototype.applyPermissionsConstrain.call(this),null!=this.groupItemPermissions&&(this.groupItemPermissions.allowSelectNestedItemsContraint=!1,this.groupItemPermissions.allowUngroupContraint=!1)},Object.defineProperty(t.prototype,"colorGroups",{get:function(){return this._colorGroups},set:function(e){this._colorGroups=e},enumerable:!0,configurable:!0}),t.prototype.setColor=function(e,t){var n=this;if(!this.colorGroups.includes(e))throw Error("Unexpected colorgroup");var r=t instanceof $j?t:t.color;e.color.equals(r)||(t instanceof $j||(null==this.themeBinding.clipartColors&&(this.themeBinding.clipartColors=new Array(this.colorGroups.length).fill(null)),this.themeBinding.clipartColors[this.colorGroups.indexOf(e)]=t.title),e.targets.forEach(function(e){var t=e.prop,i=e.itemId,o=n.items.first(function(e){return e.id===i});if(!(o instanceof RH))throw new Error("Unexpected item in colorgroup");n._setShapeItemColor(t,o,r.clone())}),e.color=r.clone(),this._propertyChanged.notify(this,"colorGroups"))},t._generateColorGroups=function(e){return e.filter(function(e){return e instanceof RH}).reduce(function(e,t){var n=e.find(function(e){return e.color.equals(t.fillColor)});if(null==n&&(n=new Iz(t.fillColor),e.push(n)),n.targets.push({itemId:t.id,prop:iz.FillColor}),t.borderWidth>0){var r=e.find(function(e){return e.color.equals(t.borderColor)});null==r&&(r=new Iz(t.borderColor),e.push(r)),r.targets.push({itemId:t.id,prop:iz.BorderColor})}return e},[])},t.prototype._setShapeItemColor=function(e,t,n){switch(e){case iz.BorderColor:t.borderColor=n;break;case iz.FillColor:t.fillColor=n}},t.type="ClipartItem",t}(Cz),Iz=function(){function e(e,t){void 0===t&&(t=[]),this.color=e,this.targets=t}return e.prototype.clone=function(){return new e(this.color.clone(),Pz(this.targets.map(function(e){return Ez({},e)})))},e}();!function(e){e[e.BorderColor=0]="BorderColor",e[e.FillColor=1]="FillColor"}(iz||(iz={}));var Oz,kz=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Rz=function(){function e(e){this._allowChangeImage=!0,this.allowEditImageConstraint=null,this._allowEditImage=!0,this._allowKeepOverlayColor=!1,this.propertyChanged=new EL,null==e&&(e=!0),this.allowChangeImage=e,this.allowEditImage=e,this.allowKeepOverlayColor=e}return Object.defineProperty(e.prototype,"allowChangeImage",{get:function(){return this._allowChangeImage},set:function(e){this._allowChangeImage!==e&&(this._allowChangeImage=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowEditImage",{get:function(){return null!=this.allowEditImageConstraint?this.allowEditImageConstraint:this._allowEditImage},set:function(e){this._allowEditImage!==e&&(this._allowEditImage=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowKeepOverlayColor",{get:function(){return this._allowKeepOverlayColor},set:function(e){this._allowKeepOverlayColor!==e&&(this._allowKeepOverlayColor=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;return t.allowChangeImage=this.allowChangeImage,t.allowEditImage=this.allowEditImage,t.allowKeepOverlayColor=this.allowKeepOverlayColor,t},e.prototype.equals=function(e){return this.allowChangeImage===e.allowChangeImage&&this.allowEditImage===e.allowEditImage&&this.allowKeepOverlayColor===e.allowKeepOverlayColor},e.prototype.getSimplifiedObject=function(){var e={};return e.allowChangeImage=this.allowChangeImage,e.allowEditImage=this.allowEditImage,e.allowKeepOverlayColor=this.allowKeepOverlayColor,e},function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([Lj({ignore:!0}),kz("design:type",Boolean)],e.prototype,"allowEditImageConstraint",void 0),e}(),Az=function(){function e(){var e=this;this._onPermissionsChanged=function(){e.propertyChanged.notify()},this.propertyChanged=new EL,this._imagePermissions=new Rz,this._barcodePermissions=new rz,this._imagePermissions.propertyChanged.add(this._onPermissionsChanged),this._barcodePermissions.propertyChanged.add(this._onPermissionsChanged)}return Object.defineProperty(e.prototype,"barcodePermissions",{get:function(){return this._barcodePermissions},set:function(e){if(null==e)throw new kL("barcodePermissions cannot be null");this._barcodePermissions.propertyChanged.remove(this._onPermissionsChanged),this._barcodePermissions=e,this._barcodePermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imagePermissions",{get:function(){return this._imagePermissions},set:function(e){if(null==e)throw new kL("imagePermissions cannot be null");this._imagePermissions.propertyChanged.remove(this._onPermissionsChanged),this._imagePermissions=e,this._imagePermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged()},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){return{imagePermissions:this.imagePermissions.getSimplifiedObject(),barcodePermissions:this.barcodePermissions.getSimplifiedObject()}},e.prototype.clone=function(){var t=new e;return t.barcodePermissions=this.barcodePermissions.clone(),t.imagePermissions=this.imagePermissions.clone(),t},e.prototype.equals=function(e){return rj(this.barcodePermissions,e.barcodePermissions)&&rj(this.imagePermissions,e.imagePermissions)},e}(),Mz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dz=function(e){function t(n,r,i,o){var s=e.call(this,n,i,o)||this;return s._textPath=new $N,s._fitToPath=!1,s._stretch=!1,s._originalFontSize=0,s._fitToPathStep=1,s._start=0,s.type=t.type,null!=r&&(s.textPath=r),s._ignorePermissionsChange=!0,s.manipulationPermissions.resizeGrips.setCornerArbitrary(!1),s.manipulationPermissions.resizeGrips.edge=!1,s._ignorePermissionsChange=!1,s}return Mz(t,e),Object.defineProperty(t.prototype,"textPath",{get:function(){return this._textPath},set:function(e){this._textPath.equals(e)||(this._textPath=e,this._propertyChanged.notify(this,"textPath"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitToPath",{get:function(){return this._fitToPath},set:function(e){this._fitToPath!==e&&(this._fitToPath=e,this._propertyChanged.notify(this,"fitToPath"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stretch",{get:function(){return this._stretch},set:function(e){this._stretch!==e&&(this._stretch=e,this._propertyChanged.notify(this,"stretch"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this._start},set:function(e){this._start!==e&&(this._start=e,this._propertyChanged.notify(this,"start"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},set:function(e){this._end!==e&&(this._end=e,this._propertyChanged.notify(this,"end"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalFontSize",{get:function(){return this._originalFontSize},set:function(e){WN(this._originalFontSize,e)||(this._originalFontSize=e,this._propertyChanged.notify(this,"originalFontSize"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitToPathStep",{get:function(){return this._fitToPathStep},set:function(e){WN(this._fitToPathStep,e)||(this._fitToPathStep=e,this._propertyChanged.notify(this,"fitToPathStep"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLineCount",{get:function(){return 1},set:function(e){throw new ML("Max Line Count of Curved Text can not be redefined!")},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(t){return e.prototype.getSimplifiedObject.call(this,["maxLineCount"].concat(t))},t.prototype.applyPermissionsConstrain=function(){e.prototype.applyPermissionsConstrain.call(this),null!=this.manipulationPermissions&&(this.manipulationPermissions.resizeGrips.setCornerArbitrary(!1),this.manipulationPermissions.resizeGrips.edge=!1)},t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.textPath=t.textPath.clone(),n.fitToPath=t.fitToPath,n.stretch=t.stretch,n.originalFontSize=t.originalFontSize,n.fitToPathStep=t.fitToPathStep,n.start=t.start,n.end=t.end},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._textPath,t._textPath)&&rj(this._fitToPath,t._fitToPath)&&rj(this._stretch,t._stretch)&&rj(this._originalFontSize,t._originalFontSize)&&rj(this._fitToPathStep,t._fitToPathStep)&&rj(this._start,t._start)&&rj(this._end,t._end)&&rj(this._textPath,t._textPath)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="CurvedTextItem",t}(ZH),Fz=function(){function e(e){this._allowChangeLineWidth=!0,this._allowChangeLineColor=!0,this.propertyChanged=new EL,null==e&&(e=!0),this.allowChangeLineWidth=e,this.allowChangeLineColor=e}return Object.defineProperty(e.prototype,"allowChangeLineWidth",{get:function(){return this._allowChangeLineWidth},set:function(e){this._allowChangeLineWidth!==e&&(this._allowChangeLineWidth=e,this.propertyChanged.notify("allowChangeLineWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowChangeLineColor",{get:function(){return this._allowChangeLineColor},set:function(e){this._allowChangeLineColor!==e&&(this._allowChangeLineColor=e,this.propertyChanged.notify("allowChangeLineColor"))},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){var e={};return e.allowChangeLineWidth=this.allowChangeLineWidth,e.allowChangeLineColor=this.allowChangeLineColor,e},e.prototype.clone=function(){var t=new e;return t.allowChangeLineWidth=this.allowChangeLineWidth,t.allowChangeLineColor=this.allowChangeLineColor,t},e.prototype.equals=function(e){return this.allowChangeLineColor===e.allowChangeLineColor&&this.allowChangeLineWidth===e.allowChangeLineWidth},e}(),Lz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bz=function(e){function t(n,r){var i=e.call(this)||this;return i._width=4,i._color=new Kj("rgba(0, 0, 0, 1)"),i._sourcePoint0=new MN,i._sourcePoint1=new MN,i._fixedWidth=!1,i._overprintStroke=!1,i.lineColorForAbnormalRendering=new Kj("rgb(0,0,0)"),i.type=t.type,i._sourcePoint0=null!=n?n:new MN,i._sourcePoint1=null!=r?r:new MN,i._linePermissions=new Fz,i._linePermissions.propertyChanged.add(i._onPermissionsChanged),i._ignorePermissionsChange=!0,i.itemPermissions.itemToolbarPermissions.showEditButton=!1,i.itemPermissions.itemToolbarPermissions.showSelectButton=!1,i._ignorePermissionsChange=!1,i}return Lz(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){WN(this._width,e)||(this._width=e,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){$j.equals(this._color,e)||(this._color=e,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourcePoint0",{get:function(){return this._sourcePoint0},set:function(e){MN.isEqual(this._sourcePoint0,e)||(this._sourcePoint0=e,this._propertyChanged.notify(this,"sourcePoint0"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourcePoint1",{get:function(){return this._sourcePoint1},set:function(e){MN.isEqual(this._sourcePoint1,e)||(this._sourcePoint1=e,this._propertyChanged.notify(this,"sourcePoint1"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedWidth",{get:function(){return this._fixedWidth},set:function(e){this._fixedWidth!==e&&(this._fixedWidth=e,this._propertyChanged.notify(this,"fixedWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linePermissions",{get:function(){return this._linePermissions},set:function(e){if(null==e)throw new kL("linePermissions cannot be null");rj(this._linePermissions,e)||(this._linePermissions.propertyChanged.remove(this._onPermissionsChanged),this._linePermissions=e,this._linePermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overprintStroke",{get:function(){return this._overprintStroke},set:function(e){e!=this._overprintStroke&&(this._overprintStroke=e,this._propertyChanged.notify(this,"overprintStroke"))},enumerable:!0,configurable:!0}),t.prototype._subscribeToPermissionChanged=function(){this._linePermissions.propertyChanged.add(this._onPermissionsChanged)},t.prototype._unsubscribeFromPermissionChanged=function(){this._linePermissions.propertyChanged.remove(this._onPermissionsChanged)},t.prototype.applyPermissionsConstrain=function(){e.prototype.applyPermissionsConstrain.call(this),this.itemPermissions.itemToolbarPermissions.showEditButton=!1,this.itemPermissions.itemToolbarPermissions.showSelectButton=!1,this.isRenderTypeIsNormal||(this.linePermissions.allowChangeLineColor=!1)},t.prototype.getSimplifiedObject=function(t){var n=e.prototype.getSimplifiedObject.call(this,["linePermissions"].concat(t));return n.linePermissions=this.linePermissions.getSimplifiedObject(),n},t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.width=t.width,n.color=t.color.clone(),n.sourcePoint0=t.sourcePoint0.clone(),n.sourcePoint1=t.sourcePoint1.clone(),n.fixedWidth=t.fixedWidth,n.linePermissions=null!=t._linePermissions?t._linePermissions.clone():null,n.overprintStroke=t.overprintStroke},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._width,t._width)&&rj(this._color,t._color)&&rj(this._sourcePoint0,t._sourcePoint0)&&rj(this._sourcePoint1,t._sourcePoint1)&&rj(this._fixedWidth,t._fixedWidth)&&rj(this._linePermissions,t._linePermissions)&&rj(this._overprintStroke,t._overprintStroke)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="LineItem",t}(vH),Nz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jz=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i._dashWidth=3,i._altDashWidth=3,i._altColor=new Kj("rgba(0,0,0,0)"),i.type=t.type,i}return Nz(t,e),Object.defineProperty(t.prototype,"dashWidth",{get:function(){return this._dashWidth},set:function(e){WN(this._dashWidth,e)||(this._dashWidth=e,this._propertyChanged.notify(this,"dashWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altDashWidth",{get:function(){return this._altDashWidth},set:function(e){WN(this._altDashWidth,e)||(this._altDashWidth=e,this._propertyChanged.notify(this,"altDashWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altColor",{get:function(){return this._altColor},set:function(e){$j.equals(this._altColor,e)||(this._altColor=e,this._propertyChanged.notify(this,"altColor"))},enumerable:!0,configurable:!0}),t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.dashWidth=t.dashWidth,n.altDashWidth=t.altDashWidth,n.altColor=t.altColor.clone()},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._dashWidth,t._dashWidth)&&rj(this._altDashWidth,t._altDashWidth)&&rj(this._altColor,t._altColor)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="DashedLineItem",t}(Bz),Hz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zz=function(e){function t(n){void 0===n&&(n=new FN(0,0,10,10));var r=e.call(this,$N.ellipse(n.left,n.top,n.width,n.height))||this;return r.type=t.type,r.sourceRectangle=n,r.manipulationPermissions.resizeGrips=new jj(!0,!0),r}return Hz(t,e),t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="EllipseItem",t}(RH),Vz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uz=function(e){function t(n,r,i,o,s,a){var l=e.call(this)||this;return l.type=t.type,l._location=new MN(n,r),l._cols=i,l._rows=o,l._stepX=s,l._stepY=a,l._horizontalLineColor=new Kj("rgba(0,0,0,1)"),l._verticalLineColor=new Kj("rgba(0,0,0,1)"),l._lineWidth=1,l._fixedLineWidth=!0,l.textWrappingMode=Bj.None,l}return Vz(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(e){MN.isEqual(this._location,e)||(this._location=e,this._propertyChanged.notify(this,"location"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._cols},set:function(e){WN(this._cols,e)||(this._cols=e,this._propertyChanged.notify(this,"cols"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},set:function(e){WN(this._rows,e)||(this._rows=e,this._propertyChanged.notify(this,"rows"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stepX",{get:function(){return this._stepX},set:function(e){WN(this._stepX,e)||(this._stepX=e,this._propertyChanged.notify(this,"stepX"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stepY",{get:function(){return this._stepY},set:function(e){WN(this._stepY,e)||(this._stepY=e,this._propertyChanged.notify(this,"stepY"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(e){WN(this._lineWidth,e)||(this._lineWidth=e,this._propertyChanged.notify(this,"lineWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedLineWidth",{get:function(){return this._fixedLineWidth},set:function(e){this._fixedLineWidth!==e&&(this._fixedLineWidth=e,this._propertyChanged.notify(this,"fixedLineWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalLineColor",{get:function(){return this._verticalLineColor},set:function(e){$j.equals(this._verticalLineColor,e)||(this._verticalLineColor=e,this._propertyChanged.notify(this,"verticalLineColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalLineColor",{get:function(){return this._horizontalLineColor},set:function(e){$j.equals(this._horizontalLineColor,e)||(this._horizontalLineColor=e,this._propertyChanged.notify(this,"horizontalLineColor"))},enumerable:!0,configurable:!0}),t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.location=t.location.clone(),n.cols=t.cols,n.rows=t.rows,n.stepX=t.stepX,n.stepY=t.stepY,n.lineWidth=t.lineWidth,n.fixedLineWidth=t.fixedLineWidth,n.verticalLineColor=t.verticalLineColor.clone(),n.horizontalLineColor=t.horizontalLineColor.clone()},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._location,t._location)&&rj(this._rows,t._rows)&&rj(this._cols,t._cols)&&rj(this._stepX,t._stepX)&&rj(this._stepY,t._stepY)&&rj(this._lineWidth,t._lineWidth)&&rj(this._fixedLineWidth,t._fixedLineWidth)&&rj(this._verticalLineColor,t._verticalLineColor)&&rj(this._horizontalLineColor,t._horizontalLineColor)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t(this.location.x,this.location.y,this.cols,this.rows,this.stepX,this.stepY);return this._copy(this,r,e,n),r},t.type="GridItem",t}(vH);function Wz(e,t){if("number"==typeof e)return Xz(e,t);if(e instanceof MN)return new MN(Xz(e.x,t),Xz(e.y,t));throw new kL("points")}function Xz(e,t){return function(e,t){return e*t}(function(e){return e/72}(e),t)}function Gz(e,t){return e/t*72}!function(e){e[e.None=0]="None",e[e.BlackAndWhite=1]="BlackAndWhite",e[e.FlipVertical=2]="FlipVertical",e[e.FlipHorizontal=3]="FlipHorizontal",e[e.Colorize=4]="Colorize"}(Oz||(Oz={}));var qz=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},$z=function(){function e(t){if(this._color=null,this._opacity=null,this._blendMode=null,this.$_propertyChanged=new PL,this.type=e.type,null!=t){var n=t.color,r=t.opacity,i=t.blendMode;this.color=n instanceof $j?n:null,this.blendMode="string"==typeof i?i:null,this.opacity="number"==typeof r?r:null}}return e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t.opacity,r=t.blendMode;return $j.equals(t.color,this.color)&&(null==n&&null==this.opacity||WN(n,this.opacity))&&(null==r&&null==this.blendMode||r===this.blendMode)},e.prototype.getSimplifiedObject=function(){return{color:this.color,blendMode:this.blendMode,opacity:this.opacity}},e.equals=function(e,t){return null==e&&null==t||null!=e&&e.equals(t)},e.prototype.clone=function(){return new e({blendMode:this.blendMode,color:null!=this.color?this.color.clone():null,opacity:this.opacity})},Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){$j.equals(this.color,e)||(this._color=e,this.$_propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blendMode!==e&&(this._blendMode=e,this.$_propertyChanged.notify(this,"blendMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this.opacity!==e&&(this._opacity=e,this.$_propertyChanged.notify(this,"opacity"))},enumerable:!0,configurable:!0}),e.prototype.addPropertyChanged=function(e){this.$_propertyChanged.add(e)},e.prototype.removePropertyChanged=function(e){this.$_propertyChanged.remove(e)},e.type="OverlayEffect",function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([Lj({enumObject:lH}),qz("design:type",Object),qz("design:paramtypes",[Object])],e.prototype,"blendMode",null),e}(),Yz=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.width=e,this.height=t}return e.prototype.equals=function(e){return null!=e&&rj(this.width,e.width)&&rj(this.height,e.height)},e.prototype.clone=function(){return new e(this.width,this.height)},e}(),Kz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qz=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Zz=function(e){function t(n){var r=e.call(this,n)||this;return r.type=t.type,null==n&&(n=!0),r._allowImageQuality=n,r}return Kz(t,e),t.prototype.clone=function(){var n=new t;return n.allowImageQuality=this.allowImageQuality,e.prototype.clone.call(this,n)},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.allowImageQuality===t.allowImageQuality},t.type="ImageViolationSettings",function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([uH(),Qz("design:type",Boolean)],t.prototype,"allowImageQuality",void 0),t}(IH),Jz=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eV=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},tV=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},nV=function(e){function t(n,r,i,o,s){var a=e.call(this)||this;return a._effect=Oz.None,a._overlayEffect=null,a.type=t.type,a.mviKeepTemplateTransform=!1,a.values=[],a.allowedSubfolder=null,a.ratioWidthToHeight=null,a.isUserImage=!1,a._onSourcePropertyChanged=function(e,t){switch(t){case"url":case"id":case"pageIndex":a._propertyChanged.notify(a,"source");break;case"isVector":a.applyPermissionsConstrain(),a._propertyChanged.notify(a,"source")}},a._onOverlayEffectPropertyChanged=function(e,t){a._propertyChanged.notify(a,"overlayEffect")},a.imagePermissions=new Rz,a._setViolationSettings(new Zz,!0),a.manipulationPermissions.resizeGrips=new jj(!0,!1),a.shapePermissions.allowChangeFillColor=!1,a.imagePermissions.allowKeepOverlayColor=!1,a.itemPermissions.itemToolbarPermissions.showSelectButton=!0,a.source=null!=n?new t.ImageSource(n):new t.ImageSource,null!=s&&(a.ratioWidthToHeight=s),null!=i&&null!=o?a.sourceRectangle=new FN(0,0,i,o):(null!=i&&a.SetWidth(i),null!=o&&a.SetHeight(o)),null!=r&&(a.sourceRectangle.left=r.x,a.sourceRectangle.top=r.y),a}return Jz(t,e),t.prototype._copy=function(t,n,r,i){var o,s;if(e.prototype._copy.call(this,t,n,r,i),n.imagePermissions=null!=t._imagePermissions?t._imagePermissions.clone():null,n.effect=t._effect,n.overlayEffect=null!=t.overlayEffect?t.overlayEffect.clone():null,n.source=t._source.clone(),n.mviKeepTemplateTransform=t.mviKeepTemplateTransform,null!=t.values){n.values=[];try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t.values),l=a.next();!l.done;l=a.next())n.values.push(l.value.clone())}catch(c){o={error:c}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}}n.allowedSubfolder=t.allowedSubfolder,n.allowedTabs=FL.clone(t.allowedTabs),n.ratioWidthToHeight=t.ratioWidthToHeight,n.isUserImage=t.isUserImage},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._imagePermissions,t._imagePermissions)&&rj(this._effect,t._effect)&&rj(this._source,t._source)&&rj(this.mviKeepTemplateTransform,t.mviKeepTemplateTransform)&&rj(this.overlayEffect,t.overlayEffect)&&ij(this.values,t.values)&&rj(this.allowedSubfolder,t.allowedSubfolder)&&ij(this.allowedTabs,t.allowedTabs)&&rj(this.ratioWidthToHeight,t.ratioWidthToHeight)&&rj(this.isUserImage,t.isUserImage)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},Object.defineProperty(t.prototype,"imagePermissions",{get:function(){return this._imagePermissions},set:function(e){if(null==e)throw new kL("imagePermissions cannot be null");rj(this._imagePermissions,e)||(null!=this._imagePermissions&&this._imagePermissions.propertyChanged.remove(this._onPermissionsChanged),this._imagePermissions=e,this.applyPermissionsConstrain(),this._imagePermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"imagePermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(e){this._setViolationSettings(e)},enumerable:!0,configurable:!0}),t.prototype._setViolationSettings=function(t,n){if(void 0===n&&(n=!1),!(n||t instanceof Zz))throw new kL("Shape ViolationSettings property must has ImageViolationSettings type!");e.prototype._setViolationSettings.call(this,t,n)},t.prototype.applyPermissionsConstrain=function(){e.prototype.applyPermissionsConstrain.call(this),this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=!(null!=this.imagePermissions&&!this.imagePermissions.allowEditImage)&&(null==this.source||!this.source.isVector)&&null,this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=!(null!=this.imagePermissions&&!this.imagePermissions.allowChangeImage)&&null},Object.defineProperty(t.prototype,"displayName",{get:function(){var e=this;if(null==this._displayName&&null!=this.values&&this.values.length>0){var t=this.values.find(function(t){return t.value.id===e.source.id});null!=t&&(this.displayName=t.name)}return this._displayName},set:function(e){e!=this._displayName&&(this._displayName=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(e){this._source===e||null!=this._source&&this._source.equals(e)||(null!=this._source&&this._source.removePropertyChanged(this._onSourcePropertyChanged),this._source=e,null!=this._source&&this._source.addPropertyChanged(this._onSourcePropertyChanged),this._propertyChanged.notify(this,"source"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},set:function(e){this._effect!==e&&(this._effect=e,this._propertyChanged.notify(this,"effect"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlayEffect",{get:function(){return this._overlayEffect},set:function(e){$z.equals(this.overlayEffect,e)||(this._unsubscribeOverlayEffectPropertyChanged(),this._overlayEffect=e,this._subscribeOverlayEffectPropertyChanged(),this._propertyChanged.notify(this,"overlayEffect"))},enumerable:!0,configurable:!0}),t.prototype._subscribeOverlayEffectPropertyChanged=function(){null!=this.overlayEffect&&this.overlayEffect.addPropertyChanged(this._onOverlayEffectPropertyChanged)},t.prototype._unsubscribeOverlayEffectPropertyChanged=function(){null!=this.overlayEffect&&this.overlayEffect.removePropertyChanged(this._onOverlayEffectPropertyChanged)},t.prototype.SetWidth=function(e,t){this.sourceRectangle.width=e,null!=t&&(t=!0),null!=this.source.id&&t&&(this.sourceRectangle.height=this._calculateHeight(e))},t.prototype.SetHeight=function(e,t){this.sourceRectangle.height=e,null!=t&&(t=!0),null!=this.source.id&&t&&(this.sourceRectangle.width=this._calculateWidth(e))},t.prototype.getSrc=function(){throw new OL},t.prototype._calculateHeight=function(e){if(null==this.ratioWidthToHeight)throw new IL("Field ratioWidthToHeight is not set!");return e/this.ratioWidthToHeight},t.prototype._calculateWidth=function(e){if(null==this.ratioWidthToHeight)throw new IL("Field ratioWidthToHeight is not set!");return e*this.ratioWidthToHeight},t.prototype.getSimplifiedObject=function(t){FL.isArray(t)||FL.isString(t)||(t=[]);var n=e.prototype.getSimplifiedObject.call(this,["imagePermissions"].concat(t));return n.source={id:this.source.id,width:this.source.width,height:this.source.height,isVector:this.source.isVector,pageIndex:this.source.pageIndex,url:this.source.url,actualSize:this.source.actualSize,saveAspectRatio:this.source.saveAspectRatio,origin:this.source.origin},n.imagePermissions=this.imagePermissions.getSimplifiedObject(),n},t.prototype.getOriginalImageSize=function(){return{width:Gz(this.source.width,this.source.dpiX||72),height:Gz(this.source.height,this.source.dpiY||72)}},t.type="ImageItem",eV([Lj({factory:new xH("subfolder"),displayName:"Allowed subfolder"}),tV("design:type",String)],t.prototype,"allowedSubfolder",void 0),eV([Lj({factory:new xH("allowedTabs"),displayName:"Allowed tabs"}),tV("design:type",Array)],t.prototype,"allowedTabs",void 0),eV([Lj({factory:new xH("Image"),displayName:"Display name"}),tV("design:type",Object),tV("design:paramtypes",[Object])],t.prototype,"displayName",null),eV([Lj({enumObject:Oz}),tV("design:type",Number),tV("design:paramtypes",[Number])],t.prototype,"effect",null),eV([Lj({factory:new EH($z,{color:new eH({c:0,m:0,y:0,k:0}),opacity:1,blendMode:lH.Normal}),displayName:"Overlay effect"}),tV("design:type",$z),tV("design:paramtypes",[$z])],t.prototype,"overlayEffect",null),t}(FH);!function(e){var t=function(){function e(e){FL.extend(this,e)}return e.prototype.clone=function(){return new e(this)},e.prototype.equals=function(e){return null!=e&&rj(this.id,e.id)&&rj(this.width,e.width)&&rj(this.height,e.height)&&rj(this.isVector,e.isVector)},e}();e.ImageMetaData=t;var n,r=function(){function e(e,t,n){this.name=e,this.value=t,this.transformedRectangle=n}return e.prototype.clone=function(){return new e(this.name,this.value.clone(),this.transformedRectangle.clone())},e.prototype.equals=function(e){return null!=e&&rj(this.name,e.name)&&rj(this.value,e.value)&&rj(this.transformedRectangle,e.transformedRectangle)},e}();e.ImageItemValue=r,function(e){e[e.None=0]="None",e[e.StorageId=3]="StorageId",e[e.Url=4]="Url"}(n=e.ImageSourceType||(e.ImageSourceType={}));var i=function(){function e(e,t,r,i,o,s){void 0===r&&(r=0),void 0===i&&(i=!1),void 0===o&&(o=!0),this._storageId=null,this._url=null,this._type=n.None,this._isVector=!1,this._pageIndex=0,this._origin=null,this._actualSize=!1,this._saveAspectRatio=!0,this._dpiX=72,this._dpiY=72,this._propertyChanged=new PL,this._storageId=e,null!=e&&(this._type=n.StorageId,this._origin=s),this._url=t,null!=t&&(this._type=n.Url,this._actualSize=i,this._saveAspectRatio=o)}return e.prototype.clone=function(){var t=new e;return t.id=this.id,t.url=this.url,t._type=this._type,t._width=this._width,t._height=this._height,t._isVector=this._isVector,t._pageIndex=this._pageIndex,t._origin=null!=this._origin?this._origin.clone():null,t._actualSize=this._actualSize,t._saveAspectRatio=this._saveAspectRatio,t},e.prototype.equals=function(e){return rj(this.id,e.id)&&rj(this.url,e.url)&&rj(this._type,e._type)&&rj(this._width,e._width)&&rj(this._height,e._height)&&rj(this._origin,e._origin)&&rj(this._saveAspectRatio,e._saveAspectRatio)&&e._pageIndex===this._pageIndex&&JSON.stringify(e._origin)===JSON.stringify(this._origin)&&e._actualSize===this._actualSize&&e._saveAspectRatio===this._saveAspectRatio},Object.defineProperty(e.prototype,"id",{get:function(){return this._storageId},set:function(e){this._storageId!==e&&(this._storageId=e,this._propertyChanged.notify(this,"id"))},enumerable:!0,configurable:!0}),e.prototype.setIdWithOrigin=function(e,t){this.id=e,this._setOrigin(t)},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url!==e&&(this._url=e,this._propertyChanged.notify(this,"url"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this._propertyChanged.notify(this,"height"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVector",{get:function(){return this._isVector},set:function(e){this._isVector!==e&&(this._isVector=e,this._propertyChanged.notify(this,"isVector"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIndex",{get:function(){return this._pageIndex},set:function(e){e!==this._pageIndex&&(this._pageIndex=e,this._propertyChanged.notify(this,"pageIndex"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!0,configurable:!0}),e.prototype._setOrigin=function(e){e!==this._origin&&(this._origin=e,this._propertyChanged.notify(this,"origin"))},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualSize",{get:function(){return this._actualSize},set:function(e){this._actualSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"saveAspectRatio",{get:function(){return this._saveAspectRatio},set:function(e){this._saveAspectRatio=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dpiX",{get:function(){return this._dpiX},set:function(e){e>0&&(this._dpiX=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dpiY",{get:function(){return this._dpiY},set:function(e){e>0&&(this._dpiY=e)},enumerable:!0,configurable:!0}),e.prototype.addPropertyChanged=function(e){this._propertyChanged.add(e)},e.prototype.removePropertyChanged=function(e){this._propertyChanged.remove(e)},e}();e.ImageSource=i,function(e){var t=function(){function e(e){FL.extend(this,e||{}),null!=e&&null!=e.originalSize&&(this.originalSize=new Yz(e.originalSize.width,e.originalSize.height))}return e.prototype.equals=function(e){return null==e&&rj(this.type,e.type)&&rj(this.data,e.data)&&rj(this.originalSize,e.originalSize)},e.prototype.clone=function(){return new e(this)},e}();e.Origin=t}(i=e.ImageSource||(e.ImageSource={}))}(nV||(nV={}));var rV,iV,oV,sV,aV,lV=function(){function e(e){if(this.storageId=null,this.size=new Yz,this.name=null,this.isUserImage=!1,this.isVector=!1,this.pageIndex=0,"string"==typeof e)try{e=JSON.parse(e)}catch(t){console.warn("Unable to parse ImageMetaData from string ",e,t),e=null}FL.isObject(e)&&FL.extend(this,e)}return e.fromInterface=function(t,n){var r=new e;return r.storageId=t.id,r.size=new Yz(t.width,t.height),r.name=void 0!==n?n:null,null!=t.isVector&&(r.isVector=t.isVector),r},e.prototype.clone=function(){return new e(this)},e.prototype.equals=function(e){return this.storageId===e.storageId&&rj(this.size,e.size)&&rj(this.name,e.name)&&rj(this.isUserImage,e.isUserImage)&&rj(this.isVector,e.isVector)&&rj(this.pageIndex,e.pageIndex)},e}(),cV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uV=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},hV=function(e){function t(t,n,r,i,o){var s=e.call(this)||this;return s.id=t,s._name=n,s._mask=r,s._value=i,s._values=o,s}return cV(t,e),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){e!=this._mask&&(this._mask=e,this._propertyChanged.notify(this,"mask"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){e!=this._value&&(this._value=e,this._propertyChanged.notify(this,"value"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this._values},set:function(e){e!=this._values&&(this._values=e,this._propertyChanged.notify(this,"values"))},enumerable:!0,configurable:!0}),t.prototype.generateNewIds=function(){this._generateNewId()},t.prototype._copy=function(t,n,r){return e.prototype._copy.call(this,t,n,!1),n.mask=t.mask,n.value=t.value,n.values=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(uV(arguments[t]));return e}(t.values),n},t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this.mask,t.mask)&&rj(this.value,t.value)&&ij(this.values,t.values)},t.prototype.getSimplifiedObject=function(){return{id:this.id,mask:this.mask,value:this.value,values:this.values,name:this.name}},t}(mj),dV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pV=function(){return(pV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},fV=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},mV=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},gV=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},yV=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(gV(arguments[t]));return e},_V=function(e){function t(n,r){var i=e.call(this,n)||this;return i.type=t.type,i._onLayoutSettingsChanged=function(e){i._propertyChanged.notify(i,e)},i.layoutSettings=null!=r?r:new CV,i}return dV(t,e),t.prototype.getSimplifiedObject=function(t){var n,r;void 0===t&&(t=[]);var i=e.prototype.getSimplifiedObject.call(this,["layoutSettings"].concat(t));return i.layoutSettings=null===(n=this.layoutSettings)||void 0===n?void 0:n.getSimplifiedObject(),i.sourceRectangle=null===(r=this.sourceRectangle)||void 0===r?void 0:r.toJSON(),i},t.prototype._copy=function(t,n,r,i){var o;e.prototype._copy.call(this,t,n,r,i),r&&this._copyItemsOrder(t,n),n.layoutSettings=t.layoutSettings.clone(),n.sourceRectangle=null===(o=t.sourceRectangle)||void 0===o?void 0:o.clone()},t.prototype._copyItemsOrder=function(e,t){var n=e.getItemsOrder().map(function(n){var r=e.items.indexOf(function(e){return e.id==n});return t.items.get(r).id});t.setItemsOrder(n)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},Object.defineProperty(t.prototype,"layoutSettings",{get:function(){return this._layoutSettings},set:function(e){if(null==e)throw new Error("LayoutSettings can't be null");null!=this._layoutSettings&&this._layoutSettings.propertyChanged.remove(this._onLayoutSettingsChanged),this._layoutSettings=e,this._layoutSettings.propertyChanged.add(this._onLayoutSettingsChanged),this._onLayoutSettingsChanged("layoutSettings")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceRectangle",{get:function(){return this._sourceRectangle},set:function(e){if(null!=this._sourceRectangle&&null==e)throw new Error("LayoutItem.sourceRectangle can't be null");null!=e&&e.equals(this._sourceRectangle)||(this._unsubscribeSourceRectangle(),this._sourceRectangle=e,this._subscribeSourceRectangle(),this._propertyChanged.notify(this,"sourceRectangle"))},enumerable:!0,configurable:!0}),t.prototype._subscribeSourceRectangle=function(){},t.prototype._unsubscribeSourceRectangle=function(){},t.prototype.addItems=function(n,r,i){var o=this.getItemsOrder();if(o){if(!Number.isInteger(i))throw new Error("orderIndex must not be null");o=t._insertToOrder(o,n.map(function(e){return e.id}),i),this.setItemsOrder(o)}e.prototype.addItems.call(this,n,r)},t.prototype.removeItems=function(t){var n=this.getItemsOrder();n&&(t.forEach(function(e){return n=n.filter(function(t){return t!==e.id})}),this.setItemsOrder(n)),e.prototype.removeItems.call(this,t)},t.prototype.addItem=function(n,r,i){var o=this.getItemsOrder();o=t._insertToOrder(o,[n.id],i),this.setItemsOrder(o),e.prototype.addItem.call(this,n,r)},t._insertToOrder=function(e,t,n){var r=e.slice(0,n),i=e.slice(n);return r.concat(t,i)},t.prototype.setItemsOrder=function(e){this.tags[t._layoutItemsOrderTagKey]=e},t.prototype.getItemsOrder=function(){var e=this.tags[t._layoutItemsOrderTagKey];return null==e?null:e instanceof Array?e:null},t.prototype.getItemOrderIndex=function(e){return this.items.indexOf(e)<0?-1:this.getItemsOrder().indexOf(e.id)},t.generateAutoLayoutSettings=function(e,t,n,r,i){var o=new xV,s=e.map(function(e){return e.left}),a=e.map(function(e){return e.right}),l=e.map(function(e){return e.top}),c=e.map(function(e){return e.bottom}),u=e.map(function(e){return e.center.x}),h=e.map(function(e){return e.center.y});if(null==n&&(n=Math.max.apply(Math,yV(u))-Math.min.apply(Math,yV(u))>Math.max.apply(Math,yV(h))-Math.min.apply(Math,yV(h))?oV.horizontal:oV.vertical),o.orientation=n,null==t)switch(o.orientation){case oV.horizontal:t=WN(Math.max.apply(Math,yV(l)),Math.min.apply(Math,yV(l)),5)?iV.start:WN(Math.max.apply(Math,yV(h)),Math.min.apply(Math,yV(h)),5)?iV.center:WN(Math.max.apply(Math,yV(c)),Math.min.apply(Math,yV(c)),5)?iV.end:iV.none;break;case oV.vertical:t=WN(Math.max.apply(Math,yV(s)),Math.min.apply(Math,yV(s)),5)?iV.start:WN(Math.max.apply(Math,yV(u)),Math.min.apply(Math,yV(u)),5)?iV.center:WN(Math.max.apply(Math,yV(a)),Math.min.apply(Math,yV(a)),5)?iV.end:iV.none}o.alignItems=t;for(var d=e.sort(o.orientation===oV.horizontal?function(e,t){return e.left-t.left}:function(e,t){return e.top-t.top}),p=[],f=1;f<d.length;f++){var m=d[f-1],g=d[f];p.push(o.orientation===oV.horizontal?g.left-m.right:g.top-m.bottom)}return null==r&&(r=Math.max(0,Math.min.apply(Math,yV(p.map(Math.round))))),o.margin=r,null==i&&(i=WN(Math.max.apply(Math,yV(p)),Math.min.apply(Math,yV(p)),2)?sV.stretch:sV.spaceBetween),o.justifyContent=i,o},t.prototype.isChildVisible=function(e){return!(e instanceof ZH&&e.isEmpty())},t.prototype.equals=function(t){var n=e.prototype.equals.call(this,t),r=rj(this.sourceRectangle,t.sourceRectangle),i=rj(this.layoutSettings,t.layoutSettings);return n&&r&&i},t._layoutItemsOrderTagKey="$layoutItemsOrder",t.type="LayoutItem",t}(Cz);!function(e){e[e.default=0]="default",e[e.auto=1]="auto"}(rV||(rV={})),function(e){e[e.none=0]="none",e[e.center=1]="center",e[e.start=2]="start",e[e.end=3]="end"}(iV||(iV={})),function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal"}(oV||(oV={})),function(e){e[e.stretch=0]="stretch",e[e.spaceBetween=1]="spaceBetween"}(sV||(sV={})),function(e){e[e.start=0]="start",e[e.center=1]="center",e[e.end=2]="end"}(aV||(aV={}));var vV,bV,wV,CV=function(){function e(){this.type=e.type,this.propertyChanged=new EL}return e.prototype.clone=function(){return new e},e.prototype.getSimplifiedObject=function(){var t={};return t.type=e.type,t},e.prototype.equals=function(e){return rj(this.type,e.type)},e.type="DefaultLayoutSettings",e}(),xV=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._margin=0,n._orientation=oV.vertical,n._alignItems=iV.none,n._anchorPoint=aV.start,n._justifyContent=sV.stretch,n}return dV(t,e),Object.defineProperty(t.prototype,"margin",{get:function(){return this._margin},set:function(e){if(null==e)throw new Error("Margin can't be null");e!==this.margin&&(this._margin=e,this.propertyChanged.notify("margin"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(e){if(null==e)throw Error("Orientation can't be null");e!==this.orientation&&(this._orientation=e,this.propertyChanged.notify("orientation"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignItems",{get:function(){return this._alignItems},set:function(e){if(null==e)throw new Error("alignItems can't be null");e!==this.alignItems&&(this._alignItems=e,this.propertyChanged.notify("alignItems"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"justifyContent",{get:function(){return this._justifyContent},set:function(e){if(null==e)throw new Error("JustifyContent can't be null");e!==this.justifyContent&&(this._justifyContent=e,this.propertyChanged.notify("justifyContent"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchorPoint",{get:function(){return this._anchorPoint},set:function(e){if(null==e)throw new Error("anchorPoint can't be null");e!==this._anchorPoint&&(this._anchorPoint=e,this.propertyChanged.notify("anchorPoint"))},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t;return e.orientation=this.orientation,e.alignItems=this.alignItems,e.justifyContent=this.justifyContent,e.margin=this.margin,e.anchorPoint=this.anchorPoint,e},t.prototype.getSimplifiedObject=function(){var n=e.prototype.getSimplifiedObject.call(this);return n.type=t.type,n.orientation=this.orientation,n.alignItems=this.alignItems,n.justifyContent=this.justifyContent,n.margin=this.margin,n.anchorPoint=this.anchorPoint,n},t.prototype.equals=function(t){var n=e.prototype.equals.call(this,t),r=rj(this.orientation,t.orientation),i=rj(this.alignItems,t.alignItems),o=rj(this.margin,t.margin),s=rj(this.anchorPoint,t.anchorPoint);return n&&r&&i&&o&&s},t.type="AutoLayoutSettings",fV([Lj({ignore:!0}),mV("design:type",Object)],t.prototype,"type",void 0),fV([Lj({enumObject:pV({},oV)}),mV("design:type",Object),mV("design:paramtypes",[Object])],t.prototype,"orientation",null),fV([Lj({enumObject:iV}),mV("design:type",Object),mV("design:paramtypes",[Object])],t.prototype,"alignItems",null),fV([Lj({enumObject:sV}),mV("design:type",Object),mV("design:paramtypes",[Object])],t.prototype,"justifyContent",null),fV([Lj({enumObject:aV}),mV("design:type",Number),mV("design:paramtypes",[Number])],t.prototype,"anchorPoint",null),t}(CV),EV=function(){function e(e){this.propertyChanged=new EL,null==e&&(e=!0),this.allowChangeColumnCount=e}return Object.defineProperty(e.prototype,"allowChangeColumnCount",{get:function(){return this._allowChangeColumnCount},set:function(e){this._allowChangeColumnCount!==e&&(this._allowChangeColumnCount=e,this.propertyChanged.notify("allowChangeColumnCount"))},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){var e={};return e.allowChangeColumnCount=this.allowChangeColumnCount,e},e.prototype.clone=function(){var t=new e;return t.allowChangeColumnCount=this.allowChangeColumnCount,t},e.prototype.equals=function(e){return this.allowChangeColumnCount===e.allowChangeColumnCount},e}(),SV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),PV=function(e){function t(n,r,i,o){var s=e.call(this,n,i,o)||this;return s._boundingPaths=[],s._wrappingMargin=7,s._wrappingPath=null,s._paragraphSettings=new dz,s._characterLimit=null,s._isVertical=!1,s._firstBaselineOffset=VH.Ascent,s._firstBaselineMinOffset=0,s.type=t.type,null!=r&&(s.boundingPaths=r),s._pathBoundedTextPermissions=new EV,s._pathBoundedTextPermissions.propertyChanged.add(s._onPermissionsChanged),s}return SV(t,e),Object.defineProperty(t.prototype,"characterLimit",{get:function(){return this._characterLimit},set:function(e){null===this._characterLimit&&null===e||WN(this._characterLimit,e)||(this._characterLimit=e,this._propertyChanged.notify(this,"characterLimit"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundingPaths",{get:function(){return this._boundingPaths},set:function(e){e.length===this.boundingPaths.length&&this.boundingPaths.every(function(t,n){return t.isEqual(e[n])})||(this._boundingPaths=e,this._propertyChanged.notify(this,"boundingPaths"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrappingPath",{get:function(){return this._wrappingPath},set:function(e){null==this._wrappingPath&&null==e||null!=this._wrappingPath&&this._wrappingPath.isEqual(e)||(this._wrappingPath=e,this._propertyChanged.notify(this,"wrappingPath"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrappingMargin",{get:function(){return this._wrappingMargin},set:function(e){WN(this._wrappingMargin,e)||(this._wrappingMargin=e,this._propertyChanged.notify(this,"wrappingMargin"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paragraphSettings",{get:function(){return this._paragraphSettings},set:function(e){dz.equals(this._paragraphSettings,e)||(this._paragraphSettings=e,this._propertyChanged.notify(this,"paragraphSettings"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVertical",{get:function(){return this._isVertical},set:function(e){this._isVertical!==e&&(this._isVertical=e,this._propertyChanged.notify(this,"isVertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathBoundedTextPermissions",{get:function(){return this._pathBoundedTextPermissions},set:function(e){if(null==e)throw new kL("pathBoundedTextPermissions cannot be null");rj(this._pathBoundedTextPermissions,e)||(this._pathBoundedTextPermissions.propertyChanged.remove(this._onPermissionsChanged),this._pathBoundedTextPermissions=e,this._pathBoundedTextPermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstBaselineOffset",{get:function(){return this._firstBaselineOffset},set:function(e){this._firstBaselineOffset!==e&&(this._firstBaselineOffset=e,null!=e&&this._propertyChanged.notify(this,"firstBaselineOffset"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstBaselineMinOffset",{get:function(){return this._firstBaselineMinOffset},set:function(e){WN(this._firstBaselineMinOffset,e)||(this._firstBaselineMinOffset=e,null!=e&&this._propertyChanged.notify(this,"firstBaselineMinOffset"))},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(t){var n=e.prototype.getSimplifiedObject.call(this,["pathBoundedTextPermissions"].concat(t));return n.pathBoundedTextPermissions=this.pathBoundedTextPermissions.getSimplifiedObject(),n},t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.characterLimit=t.characterLimit,n.boundingPaths=t.boundingPaths.map(function(e){return e.clone()}),n.wrappingMargin=t.wrappingMargin,n.paragraphSettings=t.paragraphSettings.clone(),n.isVertical=t.isVertical,n.pathBoundedTextPermissions=t.pathBoundedTextPermissions.clone(),n.wrappingPath=null!=t.wrappingPath?t.wrappingPath.clone():null,n.firstBaselineOffset=t.firstBaselineOffset,n.firstBaselineMinOffset=t.firstBaselineMinOffset},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._characterLimit,t._characterLimit)&&ij(this._boundingPaths,t._boundingPaths)&&rj(this._wrappingMargin,t._wrappingMargin)&&rj(this._paragraphSettings,t._paragraphSettings)&&rj(this._isVertical,t._isVertical)&&rj(this._pathBoundedTextPermissions,t._pathBoundedTextPermissions)&&rj(this._wrappingPath,t._wrappingPath)&&rj(this.firstBaselineOffset,t.firstBaselineOffset)&&rj(this.firstBaselineMinOffset,t.firstBaselineMinOffset)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="PathBoundedTextItem",t}(ZH),TV=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},IV=function(){function e(){this._allowEditContent=!0,this.showSelectButtonConstraint=null,this._showSelectButton=!0,this._showHandleButton=!0,this.propertyChanged=new EL}return Object.defineProperty(e.prototype,"allowEditContent",{get:function(){return this._allowEditContent},set:function(e){this._allowEditContent!==e&&(this._allowEditContent=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelectButton",{get:function(){return null!=this.showSelectButtonConstraint?this.showSelectButtonConstraint:this._showSelectButton},set:function(e){this._showSelectButton!==e&&(this._showSelectButton=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHandleButton",{get:function(){return this._showHandleButton},set:function(e){this._showHandleButton!==e&&(this._showHandleButton=e,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){var e={};return e.allowEditContent=this.allowEditContent,e.showSelectButton=this.showSelectButton,e.showHandleButton=this.showHandleButton,e},e.prototype.clone=function(){var t=new e;return t.allowEditContent=this.allowEditContent,t.showSelectButton=this.showSelectButton,t.showSelectButtonConstraint=this.showSelectButtonConstraint,t.showHandleButton=this.showHandleButton,t},e.prototype.equals=function(e){return this.allowEditContent===e.allowEditContent&&this.showSelectButton===e.showSelectButton&&this.showSelectButtonConstraint===e.showSelectButtonConstraint&&this.showHandleButton===e.showHandleButton},function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([Lj({ignore:!0}),TV("design:type",Boolean)],e.prototype,"showSelectButtonConstraint",void 0),e}(),OV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kV=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},RV=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},AV=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},MV=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(AV(arguments[t]));return e};!function(e){e[e.None=0]="None",e[e.Center=1]="Center",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom"}(vV||(vV={})),function(e){e[e.None=0]="None",e[e.Center=1]="Center",e[e.Right=2]="Right",e[e.Left=3]="Left"}(bV||(bV={})),function(e){e[e.Fit=0]="Fit",e[e.Fill=1]="Fill",e[e.Original=2]="Original"}(wV||(wV={}));var DV,FV=function(e){function t(n){var r=e.call(this,null!=n?$N.rectangle(n.left,n.top,n.width,n.height):null)||this;return r._isStubContent=!1,r._isCoverMode=!1,r._contentResizeMode=wV.Fill,r._contentEffect=Oz.None,r._contentFillColor=null,r._contentOverlayEffect=null,r.stubStorageMeta=null,r.linkId=null,r.allowedSubfolder=null,r.contentVerticalAlignment=vV.None,r.contentHorizontalAlignment=bV.None,r.type=t.type,r._content=null,r._topFrames=[],r._bottomFrames=[],r._onContentOverlayEffectPropertyChanged=function(e,t){r._propertyChanged.notify(r,"contentOverlayEffect")},r.fixedStubContentSize=!1,r.sourceRectangle=null!=n?n:new FN(0,0,10,10),r.fillColor=new Kj("rgba(0, 0, 0, 0)"),r.borderWidth=0,r.placeholderPermissions=new IV,r._contentPermissions=new Az,r._contentPermissions.propertyChanged.add(r._onPermissionsChanged),r._setViolationSettings(new Zz,!0),r._ignorePermissionsChange=!0,r.manipulationPermissions.resizeGrips=new jj(!0,!0,!1),r.shapePermissions.allowChangeFillColor=!1,r.itemPermissions.allowRemoveOnLayoutChange=!0,r.itemPermissions.itemToolbarPermissions.showEditButton=!0,r.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=null,r.itemPermissions.itemToolbarPermissions.showSelectButton=!0,r.contentPermissions.imagePermissions.allowKeepOverlayColor=!1,r._ignorePermissionsChange=!1,r}return OV(t,e),Object.defineProperty(t.prototype,"contentEffect",{get:function(){return this._contentEffect},set:function(e){this._contentEffect!==e&&(this._contentEffect=e,this._propertyChanged.notify(this,"contentEffect"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentFillColor",{get:function(){return this._contentFillColor},set:function(e){this._contentFillColor!==e&&(this._contentFillColor=e,this._propertyChanged.notify(this,"contentFillColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStubContent",{get:function(){return this._isStubContent},set:function(e){this._isStubContent!==e&&(this._isStubContent=e,this._setStubStorageMeta(),this._propertyChanged.notify(this,"isStubContent"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentResizeMode",{get:function(){return this.isCoverMode?wV.Fill:this.isBarcodePlaceholder?wV.Fit:this._contentResizeMode},set:function(e){this._contentResizeMode!==e&&(this._contentResizeMode=e,this._propertyChanged.notify(this,"contentResizeMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentOverlayEffect",{get:function(){return this._contentOverlayEffect},set:function(e){$z.equals(this.contentOverlayEffect,e)||(this._unsubscribeContentOverlayEffectPropertyChanged(),this._contentOverlayEffect=e,this._subscribeContentOverlayEffectPropertyChanged(),this._propertyChanged.notify(this,"contentOverlayEffect"))},enumerable:!0,configurable:!0}),t.prototype._subscribeContentOverlayEffectPropertyChanged=function(){null!=this.contentOverlayEffect&&this.contentOverlayEffect.addPropertyChanged(this._onContentOverlayEffectPropertyChanged)},t.prototype._unsubscribeContentOverlayEffectPropertyChanged=function(){null!=this.contentOverlayEffect&&this.contentOverlayEffect.removePropertyChanged(this._onContentOverlayEffectPropertyChanged)},Object.defineProperty(t.prototype,"isCoverMode",{get:function(){return null==this.barcodeFormat&&this._isCoverMode},set:function(e){this._isCoverMode!==e&&(this._isCoverMode=e,this.isEmptyContent||this.content.applyPermissionsConstrain(),this._propertyChanged.notify(this,"isCoverMode"))},enumerable:!0,configurable:!0}),t.prototype.getImagePermissions=function(){return null!=this.contentPermissions?this.contentPermissions.imagePermissions:this.content instanceof nV?this.content.imagePermissions:null},t.prototype.applyPermissionsConstrain=function(){var e=this.getImagePermissions(),t=null==e||e.allowChangeImage;this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=!(this.isStubOrEmpty||null==e||!e.allowEditImage||null!=this.content&&this.content instanceof nV&&null!=this.content.source&&this.content.source.isVector)&&null,null!=this.placeholderPermissions&&(t?(this.placeholderPermissions.showSelectButtonConstraint=null,this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=null):(this.placeholderPermissions.showSelectButtonConstraint=!1,this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=!1)),null!=this.contentPermissions&&null!=this.contentPermissions.imagePermissions&&(this.contentPermissions.imagePermissions.allowEditImageConstraint=null==this.barcodeFormat&&null),this.isBarcodePlaceholder&&(null!=this.manipulationPermissions&&(this.manipulationPermissions.resizeGrips.edge=!1,this.manipulationPermissions.resizeGrips.setCornerArbitrary(!1)),null!=this.itemPermissions&&null!=this.itemPermissions.itemToolbarPermissions&&(this.itemPermissions.itemToolbarPermissions.showSelectButton=!1,this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=null),null!=this.placeholderPermissions&&(this.placeholderPermissions.allowEditContent=!1,this.placeholderPermissions.showHandleButton=!1),null!=this.contentPermissions&&null!=this.contentPermissions.barcodePermissions&&(this.contentPermissions.barcodePermissions.allowChangeBarcodeContent?this.placeholderPermissions.showSelectButtonConstraint=null:(this.placeholderPermissions.showSelectButtonConstraint=!1,this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=this.contentPermissions.barcodePermissions.allowChangeBarcodeContent)))},Object.defineProperty(t.prototype,"contentPermissions",{get:function(){return this._contentPermissions},set:function(e){if(null==e)throw new kL("ContentPermissions cannot be null");rj(this._contentPermissions,e)||(this._contentPermissions.propertyChanged.remove(this._onPermissionsChanged),this._contentPermissions=e,this._contentPermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholderPermissions",{get:function(){return this._placeholderPermissions},set:function(e){if(null==e)throw new kL("placeholderPermissions cannot be null");rj(this._placeholderPermissions,e)||(null!=this._placeholderPermissions&&this._placeholderPermissions.propertyChanged.remove(this._onPermissionsChanged),this._placeholderPermissions=e,this.applyPermissionsConstrain(),this._placeholderPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"placeholderPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(e){this._setViolationSettings(e)},enumerable:!0,configurable:!0}),t.prototype._setViolationSettings=function(t,n){if(void 0===n&&(n=!1),!(n||t instanceof Zz))throw new kL("Shape ViolationSettings property must has ImageViolationSettings type!");e.prototype._setViolationSettings.call(this,t,n)},Object.defineProperty(t.prototype,"isFrame",{get:function(){return null!=this._topFrames&&this._topFrames.length>0||null!=this._bottomFrames&&this._bottomFrames.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e,this.isEmptyContent||(this._content.parentPlaceholder=this,this._content.parentContainer=null,this._content.applyPermissionsConstrain()),this._setStubStorageMeta(),this._propertyChanged.notify(this,"content")},enumerable:!0,configurable:!0}),t.prototype._setStubStorageMeta=function(){this.stubStorageMeta=this.isStubContent&&this._content instanceof nV?new lV({isUserImage:this._content.isUserImage,isVector:this._content.source.isVector,name:"Stub content",size:{width:this._content.source.width,height:this._content.source.height},storageId:this._content.source.id,origin:this._content.source.origin}):null},Object.defineProperty(t.prototype,"topFrames",{get:function(){return this._topFrames},set:function(e){var t=this;if(null==e)throw new kL;this._topFrames=e,this._topFrames.forEach(function(e){e.parentPlaceholder=t,e.parentContainer=null})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomFrames",{get:function(){return this._bottomFrames},set:function(e){var t=this;if(null==e)throw new kL;this._bottomFrames=e,this._bottomFrames.forEach(function(e){e.parentPlaceholder=t,e.parentContainer=null})},enumerable:!0,configurable:!0}),t.prototype.updateContentAndFrames=function(e){null!=this.content&&e(this.content),null!=this.topFrames&&this.topFrames.forEach(function(t){e(t)}),null!=this.bottomFrames&&this.bottomFrames.forEach(function(t){e(t)})},Object.defineProperty(t.prototype,"imageContent",{get:function(){if(null!=this._content&&!(this._content instanceof nV))throw new IL("Not image content!");return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmptyContent",{get:function(){return null==this._content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStubOrEmpty",{get:function(){return this.isStubContent||this.isEmptyContent},enumerable:!0,configurable:!0}),t.prototype._canSetIsVariable=function(){return!0},Object.defineProperty(t.prototype,"isBarcodePlaceholder",{get:function(){return null!=this.barcodeFormat},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){var t=e.prototype.getSimplifiedObject.call(this,["_content","imageContent","placeholderPermissions","contentPermissions","isFrame","isEmptyContent","isStubOrEmpty","isBarcodePlaceholder"]);return t.content=null!=this.content?this.content.getSimplifiedObject():null,t.placeholderPermissions=this.placeholderPermissions.getSimplifiedObject(),t.contentPermissions=this.contentPermissions.getSimplifiedObject(),t},t.prototype._copy=function(t,n,r,i){if(e.prototype._copy.call(this,t,n,r,i),n.linkId=t.linkId,n.allowedSubfolder=t.allowedSubfolder,n.allowedTabs=null!=t.allowedTabs?t.allowedTabs.map(function(e){return e}):null,n.contentVerticalAlignment=t.contentVerticalAlignment,n.contentHorizontalAlignment=t.contentHorizontalAlignment,n.placeholderPermissions=t.placeholderPermissions.clone(),null!=t.content?(null==n.content?n.content=t.content.clone(r,i):n.content.update(t.content),n.content.parentPlaceholder=n):n.content=null,t.topFrames.length===n.topFrames.length)for(var o=0;o<t.topFrames.length;o++)n.topFrames[o].update(t.topFrames[o]),n.topFrames[o].parentPlaceholder=n;else n.topFrames=t.topFrames.map(function(e){var t=e.clone(r,i);return t.parentPlaceholder=n,t});if(t.bottomFrames.length===n.bottomFrames.length)for(o=0;o<t.bottomFrames.length;o++)n.bottomFrames[o].update(t.bottomFrames[o]),n.bottomFrames[o].parentPlaceholder=n;else n.bottomFrames=t.bottomFrames.map(function(e){var t=e.clone(r,i);return t.parentPlaceholder=n,t});n.stubStorageMeta=null!=t.stubStorageMeta?t.stubStorageMeta.clone():null,n.isStubContent=t.isStubContent,n.isCoverMode=t.isCoverMode,n.contentResizeMode=t.contentResizeMode,n.contentEffect=t.contentEffect,n.contentFillColor=null!=t._contentFillColor?t._contentFillColor.clone():null,n.contentOverlayEffect=null!=t.contentOverlayEffect?t.contentOverlayEffect.clone():null,n.barcodeFormat=t.barcodeFormat,n.contentPermissions=t.contentPermissions.clone(),n.isVariable=t.isVariable},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&ij(MV([this._content],this._topFrames,this._bottomFrames),MV([t._content],t._topFrames,t._bottomFrames))&&rj(this.linkId,t.linkId)&&rj(this.allowedSubfolder,t.allowedSubfolder)&&ij(this.allowedTabs,t.allowedTabs)&&rj(this.contentVerticalAlignment,t.contentVerticalAlignment)&&rj(this.contentHorizontalAlignment,t.contentHorizontalAlignment)&&rj(this._placeholderPermissions,t._placeholderPermissions)&&rj(this.stubStorageMeta,t.stubStorageMeta)&&rj(this._isStubContent,t._isStubContent)&&rj(this._isCoverMode,t._isCoverMode)&&rj(this._contentResizeMode,t._contentResizeMode)&&rj(this._contentEffect,t._contentEffect)&&rj(this.barcodeFormat,t.barcodeFormat)&&rj(this._contentPermissions,t._contentPermissions)&&rj(this.isVariable,t.isVariable)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="PlaceholderItem",kV([Lj({factory:new EH(lV),displayName:"Stub storage meta"}),RV("design:type",lV)],t.prototype,"stubStorageMeta",void 0),kV([Lj({factory:new xH("subfolder"),displayName:"Allowed subfolder"}),RV("design:type",String)],t.prototype,"allowedSubfolder",void 0),kV([Lj({factory:new xH("allowedTabs"),displayName:"Allowed tabs"}),RV("design:type",Array)],t.prototype,"allowedTabs",void 0),kV([Lj({enumObject:vV}),RV("design:type",Object)],t.prototype,"contentVerticalAlignment",void 0),kV([Lj({enumObject:bV}),RV("design:type",Object)],t.prototype,"contentHorizontalAlignment",void 0),kV([Lj({enumObject:Oz}),RV("design:type",Number),RV("design:paramtypes",[Number])],t.prototype,"contentEffect",null),kV([Lj({factory:new SH,displayName:"Content fill color"}),RV("design:type",$j),RV("design:paramtypes",[$j])],t.prototype,"contentFillColor",null),kV([Lj({enumObject:wV}),RV("design:type",Object),RV("design:paramtypes",[Object])],t.prototype,"contentResizeMode",null),kV([Lj({enumObject:JH,factory:new xH(JH.QR_CODE),displayName:"Barcode format"}),RV("design:type",String)],t.prototype,"barcodeFormat",void 0),kV([Lj({factory:new EH($z,{color:new eH({c:0,m:0,y:0,k:0}),opacity:1,blendMode:lH.Normal}),displayName:"Content overlay effect"}),RV("design:type",Object),RV("design:paramtypes",[Object])],t.prototype,"contentOverlayEffect",null),t}(RH),LV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),BV=function(e){function t(n,r,i,o){var s=e.call(this,n,i,o)||this;return s._baselineLocation=new MN,s._isVertical=!1,s.type=t.type,null!=r&&(s.baselineLocation=r),s._ignorePermissionsChange=!0,s.manipulationPermissions.resizeGrips.setCornerArbitrary(!1),s.manipulationPermissions.resizeGrips.edge=!1,s._ignorePermissionsChange=!1,s}return LV(t,e),Object.defineProperty(t.prototype,"isVertical",{get:function(){return this._isVertical},set:function(e){this._isVertical!==e&&(this._isVertical=e,this._propertyChanged.notify(this,"isVertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baselineLocation",{get:function(){return this._baselineLocation},set:function(e){MN.isEqual(this._baselineLocation,e)||(this._baselineLocation=e,this._propertyChanged.notify(this,"baselineLocation"))},enumerable:!0,configurable:!0}),t.prototype.applyPermissionsConstrain=function(){e.prototype.applyPermissionsConstrain.call(this),null!=this.manipulationPermissions&&null!=this.manipulationPermissions.resizeGrips&&(this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(!1),this.manipulationPermissions.resizeGrips.edgeConstraint=!1)},t.prototype.getSimplifiedObject=function(t){void 0===t&&(t=[]);var n=e.prototype.getSimplifiedObject.call(this,["_placeholders","currentTextImage","sourcePath","sourceRectangle"].concat(t));return n.placeholders=this.placeholders.toArray(),n},t.prototype._copy=function(t,n,r,i){return e.prototype._copy.call(this,t,n,r,i),n.isVertical=t.isVertical,n.baselineLocation=t.baselineLocation,n},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._isVertical,t._isVertical)&&rj(this._baselineLocation,t._baselineLocation)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="PlainTextItem",t}(ZH),NV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jV=function(e){function t(n){var r=e.call(this)||this;if(r._width=20,r._color=new Kj("rgba(255,255,61,1)"),r._points=[],r.type=t.type,r._points=[],n&&n.length&&n.length>0)for(var i=0;i<n.length;i++)n[i]instanceof MN&&r._points.push(n[i]);return r.textWrappingMode=Bj.None,r}return NV(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){WN(this._width,e)||(this._width=e,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){$j.equals(this._color,e)||(this._color=e,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourcePoints",{get:function(){return this._points},set:function(e){this._points=e,this._propertyChanged.notify(this,"sourcePoints")},enumerable:!0,configurable:!0}),t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.width=t.width,n.color=t.color.clone(),n.sourcePoints=t.sourcePoints.map(function(e){return e.clone()})},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._width,t._width)&&rj(this._color,t._color)&&ij(this._points,t._points)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="PolylineItem",t}(vH),HV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zV=function(e){function t(n,r,i,o){var s=e.call(this,n,i,o)||this;return s.type=t.type,s._center=r,s._ignorePermissionsChange=!0,s.manipulationPermissions.resizeGrips.setCornerArbitrary(!1),s.manipulationPermissions.resizeGrips.edge=!1,s.textPermissions.allowChangeTextAlignment=!1,s.textPermissions.allowChangeLeading=!1,s._ignorePermissionsChange=!1,s}return HV(t,e),t.prototype.applyPermissionsConstrain=function(){e.prototype.applyPermissionsConstrain.call(this),null!=this.manipulationPermissions&&null!=this.manipulationPermissions.resizeGrips&&(this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(!1),this.manipulationPermissions.resizeGrips.edgeConstraint=!1),null!=this.textPermissions&&(this.textPermissions.allowChangeLeading=!1,this.textPermissions.allowChangeTextAlignment=!1)},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},set:function(e){MN.isEqual(this._center,e)||(this._center=e,this._propertyChanged.notify(this,"center"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bend",{get:function(){return this._bend},set:function(e){WN(this._bend,e)||(this._bend=e,this._propertyChanged.notify(this,"bend"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"warp",{get:function(){return this._warp},set:function(e){this._warp!==e&&(this._warp=e,this._propertyChanged.notify(this,"warp"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLineCount",{get:function(){return 1},set:function(e){throw console.error("ArchedText set maxLineCount",e),new ML("Max Line Count of ArchedTextItem can not be redefined!")},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(t){return e.prototype.getSimplifiedObject.call(this,["maxLineCount"].concat(t))},t.prototype._copy=function(t,n,r,i){e.prototype._copy.call(this,t,n,r,i),n.center=t.center,n.bend=t.bend,n.warp=t.warp},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&rj(this._center,t._center)&&rj(this._bend,t._bend)&&rj(this._warp,t._warp)},t.prototype.clone=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=new t;return this._copy(this,r,e,n),r},t.type="ArchedTextItem",t}(ZH),VV=function(){function e(){this.name="cropmark",this.margin=10,this.color=new Kj({r:0,g:0,b:0,a:255}),this.widthPx=1,this.length=8,this.leftNotes=null,this.topNotes=null,this.rightNotes=null,this.bottomNotes=null}return Object.defineProperty(e.prototype,"margins",{get:function(){return"number"==typeof this.margin?{horizontal:this.margin,vertical:this.margin}:this.margin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lengths",{get:function(){return"number"==typeof this.length?{horizontal:this.length,vertical:this.length}:this.length},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;return t.name=this.name,t.margin=this.margin,t.color=this.color,t.widthPx=this.widthPx,t.length=this.length,t.leftNotes=null!=this.leftNotes?this.leftNotes.map(function(e){return e.clone()}):null,t.topNotes=null!=this.topNotes?this.topNotes.map(function(e){return e.clone()}):null,t.rightNotes=null!=this.rightNotes?this.rightNotes.map(function(e){return e.clone()}):null,t.bottomNotes=null!=this.bottomNotes?this.bottomNotes.map(function(e){return e.clone()}):null,t},e}();!function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(DV||(DV={}));var UV,WV=function(){function e(){this.alignment=DV.Left,this.fontSize=3,this.edgeMargin=.3,this.markMargin=.3}return e.prototype.clone=function(){var t=new e;return t.alignment=this.alignment,t.fontSize=this.fontSize,t.text=this.text,t.edgeMargin=this.edgeMargin,t.markMargin=this.markMargin,t},e}(),XV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),GV=function(e){function t(t){var n,r,i,o,s,a,l,c,u,h,d,p,f=e.call(this)||this;f._propertyChanged=new PL;var m=t;return f._left=null!==(i=null!==(r=null!==(n=null==m?void 0:m.left)&&void 0!==n?n:null==m?void 0:m.horizontal)&&void 0!==r?r:m)&&void 0!==i?i:0,f._top=null!==(a=null!==(s=null!==(o=null==m?void 0:m.top)&&void 0!==o?o:null==m?void 0:m.vertical)&&void 0!==s?s:m)&&void 0!==a?a:0,f._right=null!==(u=null!==(c=null!==(l=null==m?void 0:m.right)&&void 0!==l?l:null==m?void 0:m.horizontal)&&void 0!==c?c:m)&&void 0!==u?u:0,f._bottom=null!==(p=null!==(d=null!==(h=null==m?void 0:m.bottom)&&void 0!==h?h:null==m?void 0:m.vertical)&&void 0!==d?d:m)&&void 0!==p?p:0,f}return XV(t,e),Object.defineProperty(t.prototype,"left",{get:function(){return this._left},set:function(e){WN(e,this._left)||(this._left=e,this._propertyChanged.notify(this,"left"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._top},set:function(e){WN(e,this._top)||(this._top=e,this._propertyChanged.notify(this,"top"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._right},set:function(e){WN(e,this._right)||(this._right=e,this._propertyChanged.notify(this,"right"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this._bottom},set:function(e){WN(e,this._bottom)||(this._bottom=e,this._propertyChanged.notify(this,"bottom"))},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t({left:this.left,top:this.top,right:this.right,bottom:this.bottom})},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this._left&&0===this._top&&0===this._right&&0===this._bottom},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return this.left===e.left&&this.top===e.top&&this.right===e.right&&this.bottom===e.bottom},t.prototype.getSimplifiedObject=function(){return{left:this.left,top:this.top,right:this.right,bottom:this.bottom}},t.prototype.addPropertyChanged=function(e){this._propertyChanged.add(e)},t.prototype.removePropertyChanged=function(e){this._propertyChanged.remove(e)},t}(mj);!function(e){e[e.Trim=0]="Trim",e[e.Bleed=1]="Bleed",e[e.Total=2]="Total"}(UV||(UV={}));var qV,$V=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),YV=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentSurface=null,i._safetyLines=new Ij,i._cropMarks=new Ij,i._onBoundsPropertyChanged=function(e,t){i._propertyChanged.notify(i,"bounds")},i._onBleedPropertyChanged=function(e,t){i._validateMargin(i.bleed,"bleed"),i._propertyChanged.notify(i,"bleed")},i._onSlugPropertyChanged=function(e,t){i._validateMargin(i.slug,"slug"),i._propertyChanged.notify(i,"slug")},i._validateMargin(n,"bleed"),i._validateMargin(r,"slug"),i._bounds=null!=t?t:new FN,i.bleed=null!=n?n:new GV,i.slug=null!=r?r:new GV,i}return $V(t,e),Object.defineProperty(t.prototype,"bounds",{get:function(){return this._bounds},set:function(e){this._bounds.equals(e)||(this._unsubscribeBoundsPropertyChanged(),this._bounds=e,this._subscribeBoundsPropertyChanged(),this._propertyChanged.notify(this,"bounds"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"safetyLines",{get:function(){return this._safetyLines},set:function(e){this._safetyLines!==e&&(this._safetyLines=e,this._propertyChanged.notify(this,"safetyLines"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cropMarks",{get:function(){return this._cropMarks},set:function(e){this._cropMarks!==e&&(this._cropMarks=e,this._propertyChanged.notify(this,"cropMarks"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bleed",{get:function(){return this._bleed},set:function(e){rj(e,this._bleed)||(this._validateMargin(e,"bleed"),this._unsubscribeBleedPropertyChanged(),this._bleed=e,this._subscribeBleedPropertyChanged(),this._propertyChanged.notify(this,"bleed"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slug",{get:function(){return this._slug},set:function(e){rj(e,this._slug)||(this._validateMargin(e,"slug"),this._unsubscribeSlugPropertyChanged(),this._slug=e,this._subscribeSlugPropertyChanged(),this._propertyChanged.notify(this,"slug"))},enumerable:!0,configurable:!0}),t.prototype.getBounds=function(e){switch(e){case UV.Bleed:return this.bounds.getShrinked(this.bleed);case UV.Total:return this.bounds.getShrinked(new GV({left:this.bleed.left+this.slug.left,top:this.bleed.top+this.slug.top,right:this.bleed.right+this.slug.right,bottom:this.bleed.bottom+this.slug.bottom}));default:return this.bounds.clone()}},t.prototype._subscribeBoundsPropertyChanged=function(){null!=this._bounds&&this._bounds.addPropertyChanged(this._onBoundsPropertyChanged)},t.prototype._unsubscribeBoundsPropertyChanged=function(){null!=this._bounds&&this._bounds.removePropertyChanged(this._onBoundsPropertyChanged)},t.prototype._subscribeBleedPropertyChanged=function(){null!=this._bleed&&this._bleed.addPropertyChanged(this._onBleedPropertyChanged)},t.prototype._unsubscribeBleedPropertyChanged=function(){null!=this._bleed&&this._bleed.removePropertyChanged(this._onBleedPropertyChanged)},t.prototype._subscribeSlugPropertyChanged=function(){null!=this._slug&&this._slug.addPropertyChanged(this._onSlugPropertyChanged)},t.prototype._unsubscribeSlugPropertyChanged=function(){null!=this._slug&&this._slug.removePropertyChanged(this._onSlugPropertyChanged)},t.prototype._validateMargin=function(e,t){if(null!=e&&(e.left<0||e.top<0||e.right<0||e.bottom<0))throw new kL("PrintArea.ts: "+t+" margin members cannot be negative!")},t.prototype.getSimplifiedObject=function(){return e.prototype.getSimplifiedObject.call(this,["parentSurface","boundsWithMargins","boundsWithBleed"])},t.prototype._copy=function(t,n,r){var i,o;e.prototype._copy.call(this,t,n,r),n.bounds=null!=t.bounds?t.bounds.clone():null,n.safetyLines.addRange(t.safetyLines.toArray().map(function(e){return e.clone()})),n.cropMarks.addRange(t.cropMarks.toArray().map(function(e){return e.clone()})),n.bleed=null===(i=t.bleed)||void 0===i?void 0:i.clone(),n.slug=null===(o=t.slug)||void 0===o?void 0:o.clone()},t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t.prototype.generateNewIds=function(){this._generateNewId()},t}(mj),KV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QV=function(e){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=[]);var r=e.call(this)||this;return r.parentSurface=null,r._underContainers=new Ij,r._overContainers=new Ij,r._onContainerAdded=function(e){e.item.parentComponent=r},r.underContainers.add_itemAdded(r._onContainerAdded),r.underContainers.setRange(t),r.overContainers.add_itemAdded(r._onContainerAdded),r.overContainers.setRange(n),r}return KV(t,e),t.prototype.isEmpty=function(){return this.underContainers.concat(this.overContainers).all(function(e){return e.items.empty})},Object.defineProperty(t.prototype,"underContainers",{get:function(){return this._underContainers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overContainers",{get:function(){return this._overContainers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allContainers",{get:function(){return this._overContainers.concat(this._underContainers)},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){return e.prototype.getSimplifiedObject.call(this,["parentSurface","allContainers"])},t.prototype._copy=function(t,n,r){e.prototype._copy.call(this,t,n,r),n.underContainers.addRange(t.underContainers.toArray().map(function(e){return e.clone(r)})),n.overContainers.addRange(t.overContainers.toArray().map(function(e){return e.clone(r)}))},t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t.prototype.generateNewIds=function(){this._generateNewId(),this._underContainers.forEach(function(e){return e.generateNewIds()}),this._overContainers.forEach(function(e){return e.generateNewIds()})},t}(mj),ZV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JV=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eU=function(e){function t(t,n,r,i,o,s,a){void 0===i&&(i=[]);var l=e.call(this,o,s)||this;if(l._rotateAngle=0,l._mockup=new QV,l._printAreas=new Ij,l._previewMockups=new Ij,l._printAreasCollectionChangedEvent=new PL,l._printAreaAddedEvent=new PL,l._printAreaRemovedEvent=new PL,l._onContainersItemAdded=function(e){e.item.parentComponent=l},l._onContainersItemRemoved=function(e){e.item.parentComponent=null},l.watermark=null,l._containers=new Ij,l._onPrintAreaAdded=function(e){var t=e.item;t.parentSurface=l,l._printAreaAddedEvent.notify(l,t)},l._onPrintAreaRemoved=function(e){var t=e.item;t.parentSurface=null,l._printAreaRemovedEvent.notify(l,t)},l.width=null!=t?t:100,l.height=null!=n?n:100,l.parentProduct=null,l.mockup=null!=r?r:new QV,l.printAreas.add_itemAdded(l._onPrintAreaAdded),l.printAreas.add_itemRemoved(l._onPrintAreaRemoved),l.printAreas.setRange(i),l._containers.add_itemAdded(l._onContainersItemAdded),l._containers.add_itemRemoved(l._onContainersItemRemoved),a){var c=new Aj;c.name=bU.BG_CONTAINER_NAME,l.containers.push(c);var u=new Aj;u.name=bU.MAIN_CONTAINER_NAME,l.containers.push(u);var h=new Aj;h.name=bU.FG_CONTAINER_NAME,l.containers.push(h)}return l}return ZV(t,e),Object.defineProperty(t.prototype,"rotateAngle",{get:function(){return this._rotateAngle},set:function(e){var t=BN(e);t!==this._rotateAngle&&(this._rotateAngle=t,this._propertyChanged.notify(this,"rotateAngle"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){e!==this._width&&(this._width=e,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){e!==this._height&&(this._height=e,this._propertyChanged.notify(this,"height"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mockup",{get:function(){return this._mockup},set:function(e){if(null==e)throw new kL("mockup can`t be null");e!==this._mockup&&(this._mockup=e,null!=this._mockup&&(this._mockup.parentSurface=this),this._propertyChanged.notify(this,"mockup"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previewMockups",{get:function(){return this._previewMockups},set:function(e){var t,n;if(null!=this._previewMockups)try{for(var r=JV(this._previewMockups),i=r.next();!i.done;i=r.next())i.value.parentSurface=null}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}if(this._previewMockups=e,null!=this._previewMockups)for(var o=0;o<this._previewMockups.length;++o)this._previewMockups.get(o).parentSurface=this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"containers",{get:function(){return this._containers},set:function(e){if(null!=e&&e!==this._containers){null!=this._containers&&(this._containers.clear(),this._containers.remove_itemAdded(this._onContainersItemAdded),this._containers.remove_itemRemoved(this._onContainersItemRemoved)),this._containers=e;for(var t=0;t<this._containers.length;t++)this._onContainersItemAdded({index:t,item:this._containers.get(t)});this._containers.add_itemAdded(this._onContainersItemAdded),this._containers.add_itemRemoved(this._onContainersItemRemoved)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"printAreas",{get:function(){return this._printAreas},set:function(e){var t,n;if(null!=e&&e!==this._printAreas){null!=this._printAreas&&(this._printAreas.clear(),this._printAreas.remove_itemAdded(this._onPrintAreaAdded),this._printAreas.remove_itemRemoved(this._onPrintAreaRemoved)),this._printAreas=e;try{for(var r=JV(this._printAreas),i=r.next();!i.done;i=r.next())this._onPrintAreaAdded({item:i.value})}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}this._printAreas.add_itemAdded(this._onPrintAreaAdded),this._printAreas.add_itemRemoved(this._onPrintAreaRemoved)}},enumerable:!0,configurable:!0}),t.prototype.add_printAreaAdded=function(e){this._printAreaAddedEvent.add(e)},t.prototype.remove_printAreaAdded=function(e){this._printAreaAddedEvent.remove(e)},t.prototype.add_printAreaRemoved=function(e){this._printAreaRemovedEvent.add(e)},t.prototype.remove_printAreaRemoved=function(e){this._printAreaRemovedEvent.remove(e)},t.prototype.getSimplifiedObject=function(){return e.prototype.getSimplifiedObject.call(this,["parentProduct","nonChannelContainerItems"])},t.prototype.getAllItems=function(e){void 0===e&&(e={ignoreMockups:!1});var t=e.ignoreMockups?this.containers:wj.empty().concat(this.mockup.underContainers.cast(),this.containers,this.mockup.overContainers.cast());null!=e.containerFilterFunc&&(t=t.where(e.containerFilterFunc));var n=t.selectMany(function(e){return e.items.cast()});return(e.flatGroupItems||e.includePlaceholderContents)&&(n=n.aggregate(new Ij,function(t,n){return n instanceof Cz?(t.addRange(n.getNestedItems()),e.excludeGroupItems||t.add(n)):t.add(n),e.includePlaceholderContents&&n instanceof FV&&(null!=n.content&&t.add(n.content),n.topFrames.concat(n.bottomFrames).forEach(function(e){return t.add(e)})),t})),n},t.getItems=function(e,t){return e instanceof Array&&(e=wj.from(e)),e.selectMany(function(e){return e.getAllItems(t)}).toArray()},t.prototype.getBackgroundItem=function(){var e=this.containers.firstOrDefault(function(e){return e.name===bU.BG_CONTAINER_NAME});return null!=e?e.items.get(0):null},t.prototype._copy=function(t,n,r){e.prototype._copy.call(this,t,n,r),n.width=t.width,n.height=t.height,n.rotateAngle=t.rotateAngle,n.mockup=t.mockup.clone(r),n.previewMockups.addRange(t.previewMockups.toArray().map(function(e){return e.clone(r)})),n.printAreas.addRange(t.printAreas.toArray().map(function(e){return e.clone(r)})),n.containers.addRange(t.containers.toArray().map(function(e){return e.clone(r)})),n.watermark=null!=t.watermark?t.watermark.clone():null},t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t.prototype.generateNewIds=function(){this._generateNewId(),this._mockup.generateNewIds(),this._previewMockups.forEach(function(e){return e.generateNewIds()}),this._printAreas.forEach(function(e){return e.generateNewIds()}),this._containers.forEach(function(e){return e.generateNewIds()})},t.getAllItems=function(e,t){return void 0===t&&(t={ignoreMockups:!1}),e instanceof Array&&(e=wj.from(e)),e.selectMany(function(e){return e.getAllItems(t)})},Object.defineProperty(t.prototype,"nonChannelContainerItems",{get:function(){return FL.flatten(this._containers.toArray().filter(function(e){return e.renderingType===Tj.Normal}).map(function(e){return e.items.toArray()}))},enumerable:!0,configurable:!0}),t}(mj);!function(e){e[e.Point=0]="Point",e[e.Percent=1]="Percent",e[e.Pixel=2]="Pixel"}(qV||(qV={}));var tU,nU=function(){function e(e,t){this._rectangle=e,this._dpi=t}return e.prototype.convert=function(e){if(-1===e.indexOf("/"))return this._normalize(this._combineRadiuses(this._getRadiuses(e,!0),this._getRadiuses(e,!1)));var t=e.split("/");return this._normalize(this._combineRadiuses(this._getRadiuses(t[0].trim(),!0),this._getRadiuses(t[1].trim(),!1)))},e.prototype._normalize=function(e){if(null==e)return e;var t=e,n=(t[0].width+t[1].width)/this._rectangle.width,r=(t[2].width+t[3].width)/this._rectangle.width,i=(t[0].height+t[3].height)/this._rectangle.height,o=(t[1].height+t[2].height)/this._rectangle.height;return n>1&&(t[0].width=t[0].width/n,t[1].width=t[1].width/n),r>1&&(t[2].width=t[2].width/r,t[3].width=t[3].width/r),o>1&&(t[1].height=t[1].height/o,t[2].height=t[2].height/o),i>1&&(t[3].height=t[3].height/i,t[0].height=t[0].height/i),e},e.prototype._combineRadiuses=function(e,t){return null==e||4!==e.length||null==t||4!==t.length?null:[new QN(e[0],t[0]),new QN(e[1],t[1]),new QN(e[2],t[2]),new QN(e[3],t[3])]},e.prototype._getRadiuses=function(e,t){if(null==e)return null;var n=e.split(" ").filter(function(e){return null!=e&&e.length>0});if(n.length<1)return null;if(n.length>4)return null;for(var r=[],i=0;i<n.length;i++){var o=this._tryParseNumberPart(n[i]);if(null==o)return null;r.push(this._toPoints(o,t))}switch(r.length){case 1:return[r[0],r[0],r[0],r[0]];case 2:return[r[0],r[1],r[0],r[1]];case 3:return[r[0],r[1],r[2],r[1]];default:return r}},e.prototype._tryParseNumberPart=function(e){if(e.endsWith("%")){var t=parseFloat(e);return NaN!==t?{value:t,measureType:qV.Percent}:null}if(e.toLowerCase().endsWith("px")){var n=parseFloat(e);return NaN!==n?{value:n,measureType:qV.Pixel}:null}var r=parseFloat(e);return isNaN(r)?null:{value:r,measureType:qV.Point}},e.prototype._toPoints=function(e,t){switch(e.measureType){case qV.Percent:return(t?this._rectangle.width:this._rectangle.height)*e.value/100;case qV.Pixel:return Gz(e.value,this._dpi);default:return e.value}},e}();!function(e){e.Crop="Crop",e.Trim="Trim",e.Bleed="Bleed"}(tU||(tU={}));var rU,iU,oU,sU,aU,lU,cU=function(){function e(e){this._propertyChanged=new PL,this._name="bleed",this._widthPx=1,this._color=new Kj({r:255,g:255,b:255,a:255}),this._altColor=new Kj({r:0,g:0,b:0,a:255}),this._stepPx=10,this._margin=new GV(10),this._borderRadius=null,this._pdfBox=null,null!=e&&Object.assign(this,e)}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._propertyChanged.notify(this,"name"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widthPx",{get:function(){return this._widthPx},set:function(e){WN(this._widthPx,e)||(this._widthPx=e,this._propertyChanged.notify(this,"widthPx"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){$j.equals(this._color,e)||(this._color=e,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altColor",{get:function(){return this._altColor},set:function(e){$j.equals(this._altColor,e)||(this._altColor=e,this._propertyChanged.notify(this,"altColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"margin",{get:function(){return this._margin},set:function(e){"number"==typeof e&&(e=new GV(e)),this._margin=e,this._propertyChanged.notify(this,"margin")},enumerable:!0,configurable:!0}),e.prototype.getMargin=function(){return this._margin},Object.defineProperty(e.prototype,"stepPx",{get:function(){return this._stepPx},set:function(e){WN(this._stepPx,e)||(this._stepPx=e,this._propertyChanged.notify(this,"stepPx"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderRadius",{get:function(){return this._borderRadius},set:function(e){this._borderRadius!==e&&(this._borderRadius=e,this._propertyChanged.notify(this,"borderRadius"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfBox",{get:function(){return this._pdfBox},set:function(e){this._pdfBox!==e&&(this._pdfBox=e,this._propertyChanged.notify(this,"pdfBox"))},enumerable:!0,configurable:!0}),e.prototype.getRectangle=function(e){var t=this.getMargin();return FN.FromLTRB(e.left+t.left,e.top+t.top,e.right-t.right,e.bottom-t.bottom)},e.prototype.getCornerRadiuses=function(e){return null==this.borderRadius?null:new nU(this.getRectangle(e),72).convert(this.borderRadius)},e.prototype.addPropertyChanged=function(e){this._propertyChanged.add(e)},e.prototype.removePropertyChanged=function(e){this._propertyChanged.remove(e)},e.prototype.clone=function(){var t,n=new e;return n.name=this.name,n.widthPx=this.widthPx,n.color=this.color.clone(),n.altColor=this.altColor.clone(),n.stepPx=this.stepPx,n.borderRadius=this.borderRadius,n.pdfBox=this.pdfBox,n.margin=null===(t=this._margin)||void 0===t?void 0:t.clone(),n},e.voPrefix="$SAFETY_LINE",e}(),uU=function(){function e(){this._vectorMask=null,this._maskChangedEvent=new EL}return Object.defineProperty(e.prototype,"vectorMask",{get:function(){return this._vectorMask},set:function(e){this._vectorMask=e,this._maskChangedEvent.notify(this)},enumerable:!0,configurable:!0}),e.prototype.addMaskChanged=function(e){this._maskChangedEvent.add(e)},e.prototype.removeMaskChanged=function(e){this._maskChangedEvent.remove(e)},e.prototype.clone=function(){var t=new e;return t.vectorMask=null!=this.vectorMask?this.vectorMask.clone():null,t},e.prototype.equals=function(e){return rj(this.vectorMask,e.vectorMask)},e.prototype.getSimplifiedObject=function(){var e={};return e.vectorMask=null!=this.vectorMask?this.vectorMask.toString():null,e},e}(),hU=function(){function e(){}return e.prototype.clone=function(){var t=new e;return t.name=this.name,t.storageId=this.storageId,t.staticStorageId=this.staticStorageId,t.repeat=this.repeat,t.opacity=this.opacity,t},e}(),dU=function(){function e(){}return e.prototype.clone=function(){var t=new e;return t.text=this.text,t.fontSettings=null!=this.fontSettings?this.fontSettings.clone():null,t.scale=this.scale,t.opacity=this.opacity,t},e}(),pU=function(){function e(){}return e.prototype.clone=function(){var t=new e;return t.canvas=this.canvas,t.proof=this.proof,t},e}(),fU=function(){function e(){}return e.prototype.clone=function(){var t=new e;return t.text=null!=this.text?this.text.clone():null,t.image=null!=this.image?this.image.clone():null,t.visibility=null!=this.visibility?this.visibility.clone():null,t},e}(),mU=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},gU=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(mU(arguments[t]));return e},yU=function(){function e(e){var t=this;this.parseSurface=function(e){var n=new eU;return t._parseModelComponent(e,n,[new _U("mockup",t.parseMockup.bind(t)),new _U("printAreas",function(e){return t.parseCollection(e,t.parsePrintArea,n.printAreas)},!0),new _U("containers",function(e){return t.parseCollection(e,t.parseSurfaceContainer,n.containers)},!0),new _U("previewMockups",function(e){return t.parseCollection(e,t.parseMockup.bind(t),n.previewMockups)},!0),new _U("watermark",t.parseWatermark.bind(t))]),n},this.parseMockupContainer=function(e){var n=new Rj;return t.parseContainer(e,n),n},this.parseSurfaceContainer=function(e){var n,r=e.type;switch(delete e.type,r){case"SpotColorContainer":n=new Mj,t.parseContainer(e,n),delete e.version,delete e.items,Object.assign(n,e);break;case"TextureContainer":n=new Dj,t.parseContainer(e,n),n.previewTextureSource=t.parseImageSource(e.previewTextureSource),delete e.previewTextureSource,delete e.version,delete e.items,Object.assign(n,e);break;default:n=new Aj,t.parseContainer(e,n)}return n},this.parseContainer=function(e,n){return void 0===n&&(n=new kj),t._parseModelComponent(e,n,[new _U("region",t.parseRectangleF.bind(t)),new _U("size",t.parseSizeF.bind(t)),new _U("items",function(e){return t.parseCollection(e,t.parseItem,n.items)},!0)]),n},this.parseSafetyLine=function(e){var n=new cU,r=[new _U("color",t.parseColor.bind(t)),new _U("altColor",t.parseColor.bind(t)),new _U("margin",t._parseMargin)];return t._parseObject(e,n,r),n},this.parseCropMark=function(e){var n=new VV,r=[new _U("color",t.parseColor.bind(t)),new _U("leftNotes",t._setConvertedArray.bind(t,t.parseCropMarkText,function(e){n.leftNotes=e}),!0),new _U("rightNotes",t._setConvertedArray.bind(t,t.parseCropMarkText,function(e){n.rightNotes=e}),!0),new _U("topNotes",t._setConvertedArray.bind(t,t.parseCropMarkText,function(e){n.topNotes=e}),!0),new _U("bottomNotes",t._setConvertedArray.bind(t,t.parseCropMarkText,function(e){n.bottomNotes=e}),!0)];return t._parseObject(e,n,r),n},this.parseCropMarkText=function(e){var n=new WV;return t._parseObject(e,n,[]),n},this.parsePrintArea=function(e){var n=new YV;return t._parseModelComponent(e,n,[new _U("bounds",t.parseRectangleF.bind(t)),new _U("safetyLines",function(e){return t.parseCollection(e,t.parseSafetyLine,n.safetyLines)},!0),new _U("cropMarks",function(e){return new Ij(e.map(t.parseCropMark))}),new _U("slug",t._parseMargin),new _U("bleed",t._parseMargin)]),n},this._parseMargin=function(e){return new GV(null==e?0:{left:e.left,top:e.top,right:e.right,bottom:e.bottom})},this.parseItem=function(e){if(null==e)return null;var n=e.$type;delete e.$type;var r=[new _U("pathBoundedTextPermissions",t.parsePathBoundedTextPermissions.bind(t)),new _U("manipulationPermissions",t.parseManipulationPermissioins.bind(t)),new _U("frontendPermissions",t.parseFrontendPermissions.bind(t)),new _U("visualizationPermissions",t.parseVisualizationPermissions.bind(t)),new _U("violationSettings",t.parseViolationSettings),new _U("itemPermissions",t.parseItemPermissions.bind(t)),new _U("transform",t.parseTransform.bind(t)),new _U("color",t.parseColor.bind(t)),new _U("themeBinding",t.parseThemeBinding.bind(t)),new _U("mask",t.parseMask.bind(t))],i=null,o=r.concat([new _U("textPermissions",t.parseTextPermissions.bind(t)),new _U("font",t.parseFontSettings.bind(t),!0),new _U("stroke",t.parseStrokeSettings.bind(t)),new _U("shadow",t.parseShadowSettings.bind(t))]);if(null==n)throw new IL("Serialized data seems to be corrupted.");switch(n){case vj.type:i=t.parseSmartItem(e);break;case MH.type:i=t.parseRectangleItem(e,r);break;case RH.type:i=t.parseShapeItem(e,r);break;case Bz.type:i=t.parseLineItem(e,r);break;case jz.type:i=t.parseDashedLineItem(e,r);break;case zz.type:i=t.parseEllipseItem(e,r);break;case nV.type:i=t.parseImageItem(e,r);break;case uz.type:i=t.parseBarcodeItem(e,r);break;case BV.type:i=t.parsePlainTextItem(e,o);break;case gz.type:i=t.parseBoundedTextItem(e,o);break;case PV.type:i=t.parsePathBoundedTextItem(e,o);break;case Dz.type:i=t.parseCurvedTextItem(e,o);break;case nz.type:i=t.parseAutoScaledTextItem(e,o);break;case zV.type:i=t.parseArchedTextItem(e,o);break;case FV.type:i=t.parsePlaceholderItem(e,r);break;case Cz.type:i=t.parseGroupItem(e,r);break;case Tz.type:i=t.parseClipartItem(e,r);break;case _V.type:i=t.parseLayoutItem(e,r);break;default:throw new OL("Deserializing of item with type - "+n+" is not implemented")}return i},this.parseEncodingOptions=function(e){var n=new hz;return t._parseModelComponent(e,n,[]),n},this.parseLineItem=function(e,n){var r=new Bz,i=gU(n,t._getLineConverters());return t._parseModelComponent(e,r,i),r},this.parseRotatedRectangle=function(e){return new KN(e.centerX,e.centerY,e.width,e.height,e.angle)},this.parseViolationSettings=function(e){switch(delete e.version,e.type){case mH.type:return Object.assign(new mH,e);case IH.type:return Object.assign(new IH,e);case Zz.type:return Object.assign(new Zz,e);case $H.type:return Object.assign(new $H,e);default:throw new OL("Deserializing of item with type - "+e.type+" is not implemented")}},this.parsePlaceholderPermissions=function(e){return Object.assign(new IV,e)},this.parseLayoutSettings=function(e){var t;switch(e.type){case xV.type:t=new xV;break;default:t=new CV}return Object.assign(t,e)},this.parseGroupItemPermissions=function(e){return Object.assign(new _z,e)},this.parseLinePermissions=function(e){return Object.assign(new Fz,e)},this.parseBarcodePermissions=function(e){return Object.assign(new rz,e)},this._parseOverlayEffect=function(e){if(null!=e)return new $z({color:null!=e.color?t.parseColor(e.color):null,opacity:null!=e.opacity?e.opacity:null,blendMode:null!=e.blendMode?e.blendMode:null})},this._parseImageItemValue=function(e){return new nV.ImageItemValue(e.name,new nV.ImageMetaData(e.value),t.parseRotatedRectangle(e.transformedRectangle))},this._parseTextItemValue=function(e){return new ZH.BaseTextValue(e.name,e.text)},this._parseObject=function(e,n,r){for(var i in e)if(e.hasOwnProperty(i)){var o=r.find(function(e){return e.property===i}),s=e[i];if(null==o){if(FL.isObject(s)){var a=s.$type;if(delete s.$type,FL.isString(a)){var l=FL.find(t._additionalConverters,function(e){return e.type===a});if(null!=l){n[i]=l.parseRawValue(s);continue}console.warn("Unknown type "+a)}}n[i]=s;continue}if(o.setByConverter)try{o.convert(s,n)}catch(c){throw console.error("Error while parsing property "+i+" with converter ",o,c),c}else{if("manipulationPermissions"===i&&n instanceof Cz){n.groupManipulationPermissions=o.convert(s);continue}n[i]=o.convert(s)}}},this._additionalConverters=null!=e?e:[]}return e.prototype.parseProduct=function(e){var t=this,n=new CU,r=[new _U("surfaces",function(e){return t.parseCollection(e,t.parseSurface,n.surfaces)},!0),new _U("watermarkConfig",this.parseWatermarkConfig.bind(this)),new _U("defaultSafetyLines",function(e){return t.parseCollection(e,t.parseSafetyLine,n.defaultSafetyLines)},!0),new _U("defaultCropMarks",function(e){return t.parseCollection(e,t.parseCropMark,n.defaultCropMarks)},!0),new _U("defaultDesignLocation",this.parsePointF.bind(this))];return this._parseModelComponent(e,n,r),n},e.prototype.parseWatermarkConfig=function(e){var t=this;if(null==e)return null;var n=new fU,r=new _U("fontSettings",function(e){if(null==e)return null;var n=new ZH.FontSettings(null);return t._parseObject(e,n,[]),n}),i=new _U("text",function(e){if(null==e)return null;var n=new dU;return t._parseObject(e,n,[r]),n}),o=new _U("image",function(e){if(null==e)return null;var n=new hU;return t._parseObject(e,n,[]),n}),s=new _U("visibility",function(e){if(null==e)return null;var n=new pU;return t._parseObject(e,n,[]),n});return this._parseObject(e,n,[i,o,s]),n},e.prototype.parseWatermark=function(e){if(null==e)return null;var t=new xU;return this._parseObject(e,t,[]),t},e.prototype.parseMockup=function(e){var t=this,n=new QV;return this._parseModelComponent(e,n,[new _U("underContainers",function(e){return t.parseCollection(e,t.parseMockupContainer,n.underContainers)},!0),new _U("overContainers",function(e){return t.parseCollection(e,t.parseMockupContainer,n.overContainers)},!0)]),n},e.prototype.parseCollection=function(e,t,n){null!=e&&n.setRange(e.map(function(e){return t(e)}))},e.prototype.parseRectangleF=function(e){return null==e?null:new FN(e.left,e.top,e.width,e.height)},e.prototype.parsePointF=function(e){if(null==e)return null;var t=new MN;return Object.assign(t,e),t},e.prototype.parseSizeF=function(e){if(null==e)return null;if(FL.isString(e)){var t=e.split(",");return new QN(parseFloat(t[0].trim()),parseFloat(t[1].trim()))}return FL.extend(new QN,e)},e.prototype.parsePath=function(e){return null==e?null:new $N("string"==typeof e?e:e.path)},e.prototype.parsePaths=function(e){var t=this;if(null==e||!FL.isArray(e))return null;var n=[];return FL.toArray(e).forEach(function(e){n.push(t.parsePath(e))}),n},e.prototype.parseSmartItem=function(e){var t=new vj;return this._parseModelComponent(e,t,[]),t},e.prototype.parsePlainTextItem=function(e,t){var n=new BV,r=t.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new _U("baselineLocation",this.parsePointF.bind(this))]);return this._parseModelComponent(e,n,r),n},e.prototype.parseArchedTextItem=function(e,t){var n=new zV,r=t.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new _U("center",this.parsePointF.bind(this))]);return this._parseModelComponent(e,n,r),n},e.prototype.parseAutoScaledTextItem=function(e,t){var n=new nz,r=t.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new _U("textRectangle",this.parseRectangleF.bind(this))]);return this._parseModelComponent(e,n,r),n},e.prototype.parseBoundedTextItem=function(e,t){var n=new gz,r=t.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new _U("paragraphSettings",this.parseParagraphSettings.bind(this)),new _U("textRectangle",this.parseRectangleF.bind(this)),new _U("wrappingPath",this.parsePath.bind(this))]);return this._parseModelComponent(e,n,r),n},e.prototype.parsePathBoundedTextItem=function(e,t){var n=new PV,r=t.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new _U("pathBoundedTextPermissions",this.parsePathBoundedTextPermissions.bind(this)),new _U("boundingPaths",this.parsePaths.bind(this)),new _U("paragraphSettings",this.parseParagraphSettings.bind(this)),new _U("wrappingPath",this.parsePath.bind(this))]);return this._parseModelComponent(e,n,r),n},e.prototype.parseCurvedTextItem=function(e,t){var n=new Dz,r=t.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new _U("textPath",this.parsePath.bind(this))]);return this._parseModelComponent(e,n,r),n},e.prototype._getBaseTextItemConverters=function(e){var t=this;return[new _U("values",this._setConvertedArray.bind(this,this._parseTextItemValue,function(t){e.values=t}),!0),new _U("placeholders",function(n){return t.parseCollection(n,t.parseInStringPlaceholder,e.placeholders)},!0),new _U("colorPalette",function(n){return t.parseCollection(n,t.parseColor,e.colorPalette)},!0)]},e.prototype.parseImageItem=function(e,t){var n=new nV,r=t.concat(this._getShapeConverters(),this._getImageConverters(n));return this._parseModelComponent(e,n,r),n},e.prototype.parseBarcodeItem=function(e,t){var n=new uz,r=t.concat(this._getShapeConverters(),this._getImageConverters(n),[new _U("barcodePermissions",this.parseBarcodePermissions.bind(this)),new _U("color",this.parseColor.bind(this)),new _U("barcodeOptions",this.parseEncodingOptions)]);return this._parseModelComponent(e,n,r),n},e.prototype.parsePlaceholderItem=function(e,t){var n=this,r=new FV,i=gU(t,this._getShapeConverters(),[new _U("placeholderPermissions",this.parsePlaceholderPermissions),new _U("contentPermissions",this.parseContentPermissioins.bind(this)),new _U("content",this.parseItem),new _U("topFrames",o),new _U("bottomFrames",o),new _U("stubStorageMeta",function(e){return new lV(e)}),new _U("contentFillColor",this.parseColor.bind(this)),new _U("contentOverlayEffect",this._parseOverlayEffect.bind(this))]);return this._parseModelComponent(e,r,i),r;function o(e){return e.map(n.parseItem)}},e.prototype.parseGroupItem=function(e,t){var n=new Cz,r=gU(t,this._getShapeConverters(),this._getGroupConverters(n));return this._parseModelComponent(e,n,r),n},e.prototype.parseClipartItem=function(e,t){var n=new Tz,r=gU(t,this._getShapeConverters(),this._getGroupConverters(n),[new _U("colorGroups",this._setConvertedArray.bind(this,this.parseColorGroup.bind(this),function(e){return n.colorGroups=e}),!0)]);return this._parseModelComponent(e,n,r),n},e.prototype.parseLayoutItem=function(e,t){var n=new _V,r=gU(t,this._getShapeConverters(),this._getGroupConverters(n),[new _U("layoutSettings",this.parseLayoutSettings),new _U("sourceRectangle",this.parseRotatedRectangle)]);return this._parseModelComponent(e,n,r),n},e.prototype.parseContentPermissioins=function(e,t){var n=new Az;return n.barcodePermissions=this.parseBarcodePermissions(e.barcodePermissions),n.imagePermissions=this.parseImagePermissions(e.imagePermissions),n},e.prototype.parseEllipseItem=function(e,t){var n=new zz,r=t.concat(this._getShapeConverters());return this._parseModelComponent(e,n,r),n},e.prototype.parseRectangleItem=function(e,t){var n=new MH,r=t.concat(this._getShapeConverters());return this._parseModelComponent(e,n,r),n},e.prototype.parseShapeItem=function(e,t){var n=new RH,r=t.concat(this._getShapeConverters());return this._parseModelComponent(e,n,r),n},e.prototype.parseDashedLineItem=function(e,t){var n=new jz,r=gU(t,this._getLineConverters(),this._getDashedLineConverters());return this._parseModelComponent(e,n,r),n},e.prototype.parseThemeBinding=function(e){return null!=e?cH.fromRaw(e):null},e.prototype.parseMask=function(e){if(null==e)return null;var t=new uU;return null!=e.vectorMask&&(t.vectorMask=this.parsePath(e.vectorMask)),t},e.prototype.parseColor=function(e){return null!=e?oH.createColor(e):null},e.prototype.parseTransform=function(e){return new YN(e.scaleX,e.scaleY,e.translateX,e.translateY,e.angle)},e.prototype.parseFontSettings=function(e,t){var n=new ZH.FontSettings(null);return Object.assign(n,e),t.font=n,t.font},e.prototype.parseManipulationPermissioins=function(e){var t=Object.assign(new zj,e);return t.resizeGrips=Object.assign(new jj(!1,!1),e.resizeGrips),t},e.prototype.parseFrontendPermissions=function(e){return Object.assign(new qj,e)},e.prototype.parseVisualizationPermissions=function(e){return Object.assign(new Vj,e)},e.prototype.parseColorGroup=function(e){return new Iz(this.parseColor(e.color),e.targets)},e.prototype.parseItemPermissions=function(e){var t=Object.assign(new Gj,e);return t.itemToolbarPermissions=Object.assign(new Xj(!1),e.itemToolbarPermissions),t},e.prototype.parseTextPermissions=function(e){return Object.assign(new XH,e)},e.prototype.parsePathBoundedTextPermissions=function(e){return Object.assign(new EV,e)},e.prototype.parseShapePermissions=function(e){return Object.assign(new bH,e)},e.prototype.parseImagePermissions=function(e){return Object.assign(new Rz,e)},e.prototype.parseImageSource=function(e){var t=null;return null!=e.origin&&(t=new nV.ImageSource.Origin(e.origin)),void 0!==e.origin&&delete e.origin,Object.assign(new nV.ImageSource(e.id,e.url,0,!1,!0,t),e)},e.prototype.parseParagraphSettings=function(e){return new dz(e)},e.prototype.parseStrokeSettings=function(e){return UH._from_data(e)},e.prototype.parseShadowSettings=function(e){return WH._from_data(e)},e.prototype.parseInStringPlaceholder=function(e){return new hV(e.id,e.name,e.mask,e.value,e.values)},e.prototype._setConvertedArray=function(e,t,n){FL.isArray(n)&&t(FL.map(n,function(t){return e(t)}))},e.prototype._getImageConverters=function(e){return[new _U("source",this.parseImageSource.bind(this)),new _U("imagePermissions",this.parseImagePermissions.bind(this)),new _U("values",this._setConvertedArray.bind(this,this._parseImageItemValue,function(t){e.values=t}),!0),new _U("overlayEffect",this._parseOverlayEffect.bind(this))]},e.prototype._getShapeConverters=function(){return[new _U("fillColor",this.parseColor.bind(this)),new _U("borderColor",this.parseColor.bind(this)),new _U("altBorderColor",this.parseColor.bind(this)),new _U("sourceRectangle",this.parseRectangleF.bind(this)),new _U("sourcePath",this.parsePath.bind(this)),new _U("shapePermissions",this.parseShapePermissions.bind(this))]},e.prototype._getGroupConverters=function(e){return[new _U("items",this._setConvertedArray.bind(this,this.parseItem,function(t){return e.items.addRange(t)}),!0),new _U("groupItemPermissions",this.parseGroupItemPermissions)]},e.prototype._getLineConverters=function(){return[new _U("color",this.parseColor.bind(this)),new _U("sourcePoint0",this.parsePointF.bind(this)),new _U("sourcePoint1",this.parsePointF.bind(this)),new _U("linePermissions",this.parseLinePermissions)]},e.prototype._getDashedLineConverters=function(){return[new _U("altColor",this.parseColor.bind(this))]},e.prototype._parseModelComponent=function(e,t,n){if("6.5.4"!==e.version)throw new IL("Version of serialized model component ("+e.version+") does not match the editor's version (6.5.4).");n=n.concat([new _U("tags",function(e,t){t._tags=e},!0),new _U("version",function(e,t){},!0)]),this._parseObject(e,t,n)},e}(),_U=function(e,t,n){this.property=e,this.convert=t,this.setByConverter=n||!1},vU=function(){function e(e){this._additionalConverters=FL.isArray(e)?e:[],this.productParser=new yU(e)}return e.prototype.deserialize=function(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e)),FL.isObject(t)?this.productParser.parseProduct(t):null},e.prototype.serialize=function(e,t){return this.serializeModelComponent(e,t)},e.prototype.serializeModelComponent=function(e,t){var n=this;return null==t&&(t=!1),JSON.stringify(e,function(e,t){if(t instanceof mj)return t.getSimplifiedObject();if(t instanceof $j)return t.getData();if(t instanceof YN)return{scaleX:t.scaleX,scaleY:t.scaleY,translateX:t.translateX,translateY:t.translateY,angle:t.angle};if(t instanceof cU)return{name:t.name,altColor:t.altColor,color:t.color,margin:t.margin,stepPx:t.stepPx,widthPx:t.widthPx,borderRadius:t.borderRadius,pdfBox:t.pdfBox};if(t instanceof QN)return t.width+", "+t.height;if(t instanceof $N)return t.toString();if(t instanceof Ij)return t.toArray();if(t instanceof $z)return t.getSimplifiedObject();var r=FL.find(n._additionalConverters,function(e){return t instanceof e.typeCtor});return null!=r&&((t=FL.clone(t)).$type=r.type),t},2)},e}(),bU=function(){function e(){}return e.getProductSerializer=function(){return null!=e.jsonProductSerializerFactory?e.jsonProductSerializerFactory():e._defaultJsonProductSerializerFactory()},e._defaultJsonProductSerializerFactory=function(){return new vU},e.jsonProductSerializerFactory=null,e.MAIN_CONTAINER_NAME="Main",e.BG_CONTAINER_NAME="Background",e.FG_CONTAINER_NAME="Foreground",e.BG_SOLIDCOLOR="solidColor",e.SPINE_AND_FOLDING_CONTAINER_NAME="Spine&Folding",e}(),wU=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),CU=function(e){function t(t){void 0===t&&(t=[]);var n=e.call(this)||this;return n._defaultSafetyLines=new Ij,n._defaultCropMarks=new Ij,n.defaultDesignLocation=new MN,n._onSurfacesAdd=function(e){e.item.parentProduct=n},n._surfaces=new Ij,n.surfaces.add_collectionChanged(n._onSurfacesAdd),n.surfaces.setRange(t),n}return wU(t,e),Object.defineProperty(t.prototype,"surfaces",{get:function(){return this._surfaces},set:function(e){this.surfaces.setRange(e)},enumerable:!0,configurable:!0}),t.prototype.serialize=function(e){return bU.getProductSerializer().serialize(this,e)},Object.defineProperty(t.prototype,"defaultSafetyLines",{get:function(){return this._defaultSafetyLines},set:function(e){this._defaultSafetyLines!==e&&(this._defaultSafetyLines=e,this._propertyChanged.notify(this,"defaultSafetyLines"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultCropMarks",{get:function(){return this._defaultCropMarks},set:function(e){this._defaultCropMarks!==e&&(this._defaultCropMarks=e,this._propertyChanged.notify(this,"defaultCropMarks"))},enumerable:!0,configurable:!0}),t.prototype._copy=function(t,n,r){e.prototype._copy.call(this,t,n,r),n.surfaces.addRange(t.surfaces.toArray().map(function(e){return e.clone(r)})),n.watermarkConfig=null!=t.watermarkConfig?t.watermarkConfig.clone():null,n.defaultCropMarks.addRange(t.defaultCropMarks.toArray().map(function(e){return e.clone()})),n.defaultSafetyLines.addRange(t.defaultSafetyLines.toArray().map(function(e){return e.clone()})),n.defaultDesignLocation=t.defaultDesignLocation.clone()},t.prototype.clone=function(e){void 0===e&&(e=!1);var n=new t;return this._copy(this,n,e),n},t.prototype.getAllItems=function(e){return void 0===e&&(e={ignoreMockups:!1}),eU.getItems(this.surfaces,e)},t.prototype.generateNewIds=function(){this._generateNewId(),this._surfaces.forEach(function(e){return e.generateNewIds()})},t.prototype.getSurface=function(e){var t=this.surfaces.toArray(),n=parseInt(e);return NaN!=n&&n>=0&&t.length>n?t[n]:FL.find(t,function(t){return t.name===e})},t}(mj),xU=function(){function e(){}return e.prototype.clone=function(){var t=new e;return t.storageId=this.storageId,t.width=this.width,t.height=this.height,t},e}(),EU=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},SU=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},PU=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},TU=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(PU(arguments[t]));return e};(iU=rU||(rU={})).round3=function(e){return Math.round(1e3*e)/1e3},iU.createBoundedWrapper=function(e,t,n){return null==n?t.bind(e):Function.prototype.bind.apply(t,[e].concat(n))},iU.cursorToCss=function(e){var t=oU;return null==t&&(oU=t=["default","nw-resize","ne-resize","sw-resize","se-resize","n-resize","s-resize","w-resize","e-resize","move","crosshair","pointer","ew-resize","ns-resize","nesw-resize","nwse-resize","text"]),t[e]},iU.makeSingle=function(e){var t;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return EU(this,void 0,void 0,function(){var r,i,o,s;return SU(this,function(a){switch(a.label){case 0:r=t=new Object,i=e.apply(void 0,TU(n)),a.label=1;case 1:return(s=i.next(o)).done?[2,s.value]:[4,s.value];case 2:if(o=a.sent(),r!==t)return[2];a.label=3;case 3:return[3,1];case 4:return[2]}})})}},iU.makeCancelable=function(e){var t=!1;return{promise:new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)}),e.catch(function(e){return r(t?{isCanceled:!0}:e)})}),id:(new DL).toString(),cancel:function(){t=!0}}},iU.getEventPath=function(e){if(null==e.view||!(e instanceof e.view.UIEvent))throw new Error("Unexpected event type");if(null!=e.path)return(Array.isArray(e.path)?e.path:Array.prototype.slice.call(e.path)).filter(function(e){return e instanceof Element});var t=[],n=e.target;n instanceof e.view.Element||null==console||console.log("unexpected event target",n);do{t.push(n),n=n.parentElement}while(null!=n&&n!==e.currentTarget);return t},iU.isEventPathContainsClass=function(e,t){var n;if(e instanceof UIEvent)n=e;else{if(!(e.originalEvent instanceof UIEvent))throw new Error("Unexpected event type");n=e.originalEvent}return!!iU.getEventPath(n).some(function(e){return e.classList.contains(t)})},function(e){e[e.defaultCursor=0]="defaultCursor",e[e.sizeNW=1]="sizeNW",e[e.sizeNE=2]="sizeNE",e[e.sizeSW=3]="sizeSW",e[e.sizeSE=4]="sizeSE",e[e.sizeN=5]="sizeN",e[e.sizeS=6]="sizeS",e[e.sizeW=7]="sizeW",e[e.sizeE=8]="sizeE",e[e.move=9]="move",e[e.cross=10]="cross",e[e.pointer=11]="pointer",e[e.sizeEW=12]="sizeEW",e[e.sizeNS=13]="sizeNS",e[e.sizeNESW=14]="sizeNESW",e[e.sizeNWSE=15]="sizeNWSE",e[e.text=16]="text"}(sU||(sU={})),function(e){e[e.rgb=16777216]="rgb",e[e.cmyk=335544320]="cmyk",e[e.grayScale=301989888]="grayScale",e[e.unknown=0]="unknown"}(aU||(aU={})),function(e){e[e.Item=0]="Item",e[e.Color=1]="Color"}(lU||(lU={}));var IU,OU=function(){function e(e,t){null==e&&(e={}),null==t&&(t=!0),this.noPrint=null==e.NoPrint?t:!!e.NoPrint,this.noShow=null==e.NoShow?t:!!e.NoShow,this.allowDelete=null==e.AllowDelete?t:!!e.AllowDelete,this.allowMoveHorizontal=null==e.AllowMoveHorizontal?t:!!e.AllowMoveHorizontal,this.allowMoveVertical=null==e.AllowMoveVertical?t:!!e.AllowMoveVertical,this.allowRotate=null==e.AllowRotate?t:!!e.AllowRotate,this.resizeGrips=null==e.ResizeGrips?new jj(t,t):jj._fromData(e.ResizeGrips),this.allowEditContent=null==e.AllowEditContent?t:!!e.AllowEditContent,this.showSelectButton=null==e.ShowSelectButton?t:!!e.ShowSelectButton,this.showHandleButton=null==e.ShowHandleButton?t:!!e.ShowHandleButton,this.showDoneButton=null==e.ShowDoneButton?t:!!e.ShowDoneButton,this.showDeleteToolbarButton=null==e.ShowDeleteToolbarButton?t:!!e.ShowDeleteToolbarButton,this.showEditToolbarButton=null==e.ShowEditToolbarButton?t:!!e.ShowEditToolbarButton,this.showSelectToolbarButton=null==e.ShowSelectToolbarButton?t:!!e.ShowSelectToolbarButton,this.allowDragAndDrop=null==e.AllowDragAndDrop?t:!!e.AllowDragAndDrop}return e.prototype.clone=function(){var t=new e;for(var n in this)this.hasOwnProperty(n)&&("resizeGrips"!==n?t[n]=this[n]:t.resizeGrips=null!=this.resizeGrips?this.resizeGrips.clone():null);return t},Object.defineProperty(e.prototype,"allowProportionalResize",{get:function(){return this.resizeGrips.getCornerProportional()},set:function(e){this.resizeGrips.setCornerProportional(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowArbitraryResize",{get:function(){return!!this.resizeGrips&&(this.resizeGrips.getCornerArbitrary()||this.resizeGrips.edge)},set:function(e){this.resizeGrips.setCornerArbitrary(e),this.resizeGrips.edge=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowResize",{get:function(){return this.allowProportionalResize||this.allowArbitraryResize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowFreeMove",{get:function(){return this.allowMoveHorizontal&&this.allowMoveVertical},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowMove",{get:function(){return this.allowMoveHorizontal||this.allowMoveVertical},enumerable:!0,configurable:!0}),e}(),kU=function(){function e(e){this.__type="ItemHandlerData",this.P=[],this.Tg=null,this.ID="vo"+(new Date).getTime()+Math.round(1e3*Math.random()),e&&(this.P=e.controlPoints,this.Tg=e.tag,this.ID=e.uniqueId)}return e.prototype.applyState=function(e,t){t&&(t.beginUpdate(),t.controlPoints=e.P,t.tag=e.Tg,t.uniqueId=e.ID,t.endUpdate())},e}(),RU=function(){function e(e){this.id=e}return e.prototype.isEmpty=function(){return null==this.color&&null==this.fill&&null==this.border&&null==this.altBorder&&null==this.altColor&&null==this.stroke&&null==this.shadow&&null==this.verticalLineColor&&null==this.horizontalLineColor},e}(),AU=function(){function e(){}return e.drawLine=function(t,n,r,i,o,s,a,l){void 0===l&&(l=1),!e.isFullTransparentColor(a)&&s>0&&(null==l||l>0)&&(t.save(),l&&(t.globalAlpha=t.globalAlpha*l),t.lineWidth=s,t.strokeStyle=a,t.beginPath(),t.moveTo(n,r),t.lineTo(i,o),t.closePath(),t.stroke(),t.restore())},e.drawDashedLine=function(t,n,r,i,o,s,a,l,c,u,h){if(void 0===h&&(h=1),s>0&&c>0&&u>0&&(null==h||h>0)){if(t.save(),h&&(t.globalAlpha=t.globalAlpha*h),t.lineWidth=s,i<n){var d=n;n=i,i=d,d=r,r=o,o=d}var p,f=i-n,m=o-r,g=c+u,y=Math.sqrt(f*f+m*m),_=Math.floor(y/g),v=(f/=y/g)*(c/g),b=f*(u/g),w=(m/=y/g)*(c/g),C=m*(u/g),x=n,E=r;if(!e.isFullTransparentColor(a)){for(t.strokeStyle=a,t.beginPath(),t.moveTo(x,E),p=0;p<_;p++)t.lineTo(x+=v,E+=w),x+=b,E+=C,p+1<_&&t.moveTo(x,E);x+v<=i&&E+w<=o?(t.moveTo(x,E),t.lineTo(x+v,E+w)):(t.moveTo(x,E),t.lineTo(i,o)),t.closePath(),t.stroke()}if(x=n+v,E=r+w,!e.isFullTransparentColor(l)){for(t.strokeStyle=l,t.beginPath(),t.moveTo(x,E),p=0;p<_;p++)t.lineTo(x+=b,E+=C),x+=v,E+=w,p+1<_&&t.moveTo(x,E);x<i&&E<o&&(t.moveTo(x,E),t.lineTo(i,o)),t.closePath(),t.stroke()}t.restore()}},e.drawPolyline=function(t,n,r,i,o){if(!e.isFullTransparentColor(i)&&r>0&&(null==o||o>0)&&n&&n.length>1){t.save(),o&&(t.globalAlpha=t.globalAlpha*o),t.lineWidth=r,t.strokeStyle=i,t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var s=1,a=n.length;s<a;++s){var l=n[s];t.lineTo(l.x,l.y)}t.stroke(),t.restore()}},e.drawPath=function(t,n,r,i,o,s,a){e.path(t,n,r,i,null,o,s,a,[])},e.fillPath=function(t,n,r,i,o,s){e.path(t,n,r,i,o,0,null,s,[])},e.path=function(t,n,r,i,o,s,a,l,c){var u=null!=a&&!e.isFullTransparentColor(a)&&s>0,h=null!=o&&!e.isFullTransparentColor(o);if((u||h)&&(null==l||l>0)){t.save(),l&&(t.globalAlpha=t.globalAlpha*l);var d=i.toMatrix();if(t.translate(r.x,r.y),t.transform(d.m00,d.m10,d.m01,d.m11,d.m02,d.m12),t.translate(-r.x,-r.y),n instanceof $N?n.draw(t):"function"==typeof n.addToContext&&n.addToContext(t),h&&(t.fillStyle=o,t.fill()),u){if(n instanceof $N&&!WN(i.scaleX,i.scaleY)){t.restore(),t.save(),l&&(t.globalAlpha=l);var p=n.clone();p.transform(i,r),p.draw(t)}else if(s/=i.scaleX,c&&c.length>0)for(var f=0;f<c.length;f++)c[f]/=i.scaleX;t.lineWidth=s,t.strokeStyle=a,t.setLineDash(c),t.stroke()}t.restore()}},e.clipPath=function(e,t){t.draw(e),e.clip()},e.drawImage=function(t,n,r,i,o,s,a,l,c){if(void 0===s&&(s=!1),void 0===a&&(a=null),void 0===l&&(l=1),void 0===c&&(c=null),null==l||l>0){t.save(),l&&(t.globalAlpha=t.globalAlpha*l),t.translate(r.centerX,r.centerY),t.rotate(zN(r.angle));var u=null!=c?c.width:n.naturalWidth||t.canvas.width,h=null!=c?c.height:n.naturalHeight||t.canvas.height,d=null!=i&&0!==i&&null!=o&&0!==o&&Math.abs(u-r.width*i)<1&&Math.abs(h-r.height*o)<1;s||(s=(t.imageSmoothingEnabled||!0===t.msImageSmoothingEnabled)&&Math.abs(r.angle)%90<.01&&d),s&&(t.imageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1);try{d?(t.scale(1/i,1/o),null!=c?t.drawImage(n,c.left,c.top,c.width,c.height,-r.width*i/2,-r.height*o/2,u,h):t.drawImage(n,-r.width*i/2,-r.height*o/2,u,h),t.scale(i,o)):null!=c?t.drawImage(n,c.left,c.top,c.width,c.height,-r.width/2,-r.height/2,r.width,r.height):t.drawImage(n,-r.width/2,-r.height/2,r.width,r.height),a&&!e.isFullTransparentColor(a)&&(t.fillStyle=a,t.fillRect(-r.width/2,-r.height/2,r.width,r.height))}catch(p){}s&&(t.imageSmoothingEnabled=!0,t.msImageSmoothingEnabled=!0),t.restore()}},e.drawRectangle=function(t,n,r,i,o){e.rectangle(t,n,r,i,null,o)},e.fillRectangle=function(t,n,r,i){e.rectangle(t,n,0,null,r,i)},e.rectangle=function(t,n,r,i,o,s){void 0===o&&(o=null),void 0===s&&(s=1);var a=i&&!e.isFullTransparentColor(i)&&r>0,l=o&&!e.isFullTransparentColor(o);(a||l)&&(null==s||s>0)&&(t.save(),s&&(t.globalAlpha=t.globalAlpha*s),t.translate(n.centerX,n.centerY),t.rotate(zN(n.angle)),l&&(t.fillStyle=o,t.fillRect(-n.width/2,-n.height/2,n.width,n.height)),a&&(t.lineWidth=r,t.strokeStyle=i,t.strokeRect(-n.width/2,-n.height/2,n.width,n.height)),t.restore())},e.isFullTransparentColor=function(e){if(!e)return!1;var t=e.A||e.a;return 0===t||!("string"!=typeof e||!(t=/^\s*rgba\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*\,\s*(\d{1,}(\.\d{1,})?)\s*\)\s*;{0,1}\s*$/i.exec(e)))&&0===parseFloat(t[1])},e.clearCanvas=function(e,t){void 0===t&&(t=!1),t&&(e.save(),e.setTransform(1,0,0,1,0,0)),e.clearRect(0,0,e.canvas.width,e.canvas.height),t&&e.restore()},e.drawRoundedRectangle=function(e,t,n){e.roundedRectangle(t.left,t.top,t.width,t.height,n)},e}();CanvasRenderingContext2D.prototype.roundedRectangle=function(e,t,n,r,i){var o=2*Math.PI/2,s=2*Math.PI/4;this.beginPath(),this.arc(i+e,i+t,i,-s,o,!0),this.lineTo(e,t+r-i),this.arc(i+e,r-i+t,i,o,s,!0),this.lineTo(e+n-i,t+r),this.arc(e+n-i,t+r-i,i,s,0,!0),this.lineTo(e+n,t+i),this.arc(e+n-i,t+i,i,0,-s,!0),this.lineTo(e+i,t),this.stroke(),this.fill(),this.closePath()},function(e){e[e.Hidden=0]="Hidden",e[e.Bottom=1]="Bottom",e[e.Active=2]="Active",e[e.Top=3]="Top"}(IU||(IU={}));var MU,DU=function(){function e(){var e=this;this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!0,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),FU=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},LU=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},BU=function(){function e(e){var t=this;this._isDisposed=!1,this._tag=null,this._afterUpdateCallbacks=[],this._modelItem=null,this._memoryCanvas=null,this._textureCanvas=null,this._skipPropertyChanged=!1,this._skippedPropertyName=null,this._transformOperation=null,this._baseOnItemPropertyChanged=function(e,n){t._skipPropertyChanged?t._skippedPropertyName=n:t._onItemPropertyChanged(e,n)},this._isCurrentWebServiceCallForAll=null,this._updating=!1,this._readyEvent=new PL,this._changingEvent=new EL,this._changedEvent=new EL,this._itemPropertyChangedEvent=new PL,this._setItem(e),this._controlPoints=[],this._layer=null,this._tag=null,this._permissions=this._createItemHandlerPermissions(),this._uniqueId=this._createUniqueID(),this._callbacks=[],this._renderState=IU.Hidden}return Object.defineProperty(e.prototype,"item",{get:function(){return this._modelItem},set:function(e){this._setItem(e)},enumerable:!0,configurable:!0}),e.prototype._getItem=function(){return this._modelItem},e.prototype._setItem=function(e){this._unsubscribeItemEvents(),this._modelItem=e,this._subscribeItemEvents()},e.prototype._subscribeItemEvents=function(){null!=this._modelItem&&this._modelItem.addPropertyChanged(this._baseOnItemPropertyChanged)},e.prototype._unsubscribeItemEvents=function(){null!=this._modelItem&&this._modelItem.removePropertyChanged(this._baseOnItemPropertyChanged)},e.prototype._onItemPropertyChanged=function(e,t){switch(t){case"locked":case"opacity":case"blendMode":null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.redraw()),this.raiseChanged();break;case"name":null!=this.canvas&&this.canvas.updateHoverDiv();break;case"transform":null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.redraw()),this._transformChanged();break;case"visible":this._onItemVisibilityChanged();break;case"manipulationPermissions":case"visualizationPermissions":case"itemPermissions":case"permissions":this._permissions=null,this.quickUpdate(),this.canvas&&this.canvas.redraw(),this.raiseChanged(),this._updateVisibility()}this._itemPropertyChangedEvent.notify(this,t)},e.prototype._onItemVisibilityChanged=function(){this.quickUpdate(),null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.redraw()),this.raiseChanged()},e.prototype._createUniqueID=function(){return"vo"+(new Date).getTime()+Math.round(1e3*Math.random())},e.prototype._updateVisibility=function(){},Object.defineProperty(e.prototype,"ready",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._isLoadingImage=function(){return!1},e.prototype._setIsLoadingImage=function(e){throw new OL},Object.defineProperty(e.prototype,"isLoadingImage",{get:function(){return this._isLoadingImage()},set:function(e){this.isLoadingImage!==e&&this._setIsLoadingImage(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uniqueId",{get:function(){return this._uniqueId},set:function(e){this._uniqueId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderState",{get:function(){return this._renderState},set:function(e){this._renderState=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentGroupItemHandler",{get:function(){return null!=this.item.parentGroupItem&&null!=this.canvas?this.canvas.handlerFactory.get(this.item.parentGroupItem):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.item.blendMode},enumerable:!0,configurable:!0}),e.prototype.hasBlendMode=function(){return null!=this.item.blendMode&&this.item.blendMode!=lH.None&&this.item.blendMode!=lH.Normal},Object.defineProperty(e.prototype,"controlPoints",{get:function(){return this._controlPoints},set:function(e){this._controlPoints=e,this.raiseChanged()},enumerable:!0,configurable:!0}),e.prototype._createItemHandlerPermissions=function(){var e=this.item.manipulationPermissions,t=this.item.visualizationPermissions,n=this.item.itemPermissions;return new OU({AllowDelete:e.allowDelete,AllowMoveHorizontal:e.allowMoveHorizontal,AllowMoveVertical:e.allowMoveVertical,AllowRotate:e.allowRotate,ResizeGrips:null!=e.resizeGrips?{Edge:e.resizeGrips.edge,Corner:e.resizeGrips.corner}:null,AllowDragAndDrop:e.allowDragAndDrop,NoPrint:t.noPrint,NoShow:t.noShow,ShowDeleteToolbarButton:n.itemToolbarPermissions.showDeleteButton,ShowEditToolbarButton:n.itemToolbarPermissions.showEditButton,ShowSelectToolbarButton:n.itemToolbarPermissions.showSelectButton},!0)},e.prototype.getPermissions=function(){return null==this._permissions&&(this._permissions=this._createItemHandlerPermissions()),this._permissions},e.prototype._transformChanged=function(){this.raiseChanged()},Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(e){this._tag=e,this.raiseChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},set:function(e){if(e!==this._canvas){var t=this._canvas;this._canvas=e,null!=this._canvas?this._onAddedOnCanvas(e):this._onRemovedFromCanvas(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layer},set:function(e){this._layer=e,this.quickUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return null!=this._layer&&null!=this._canvas?this._canvas.flatGroupItemsInLayer(this._layer).indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return new FN(0,0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.item.name},set:function(e){this.item.name=e},enumerable:!0,configurable:!0}),e.prototype.getTypeName=function(){return this.constructor.typeName},e.prototype._createDataInstance=function(e){return new kU(e)},e.prototype.getData=function(e){var t=this._createDataInstance(this);return"asObject"===e?t:JSON.stringify(t)},e.prototype._getDataItem=function(){return(new vU).serializeModelComponent(this.item)},e.prototype._applyDataItem=function(e,t){var n=this,r=(new vU).productParser.parseItem(e);this._modifyItem(function(){n._setDataItem(r,t)})},e.prototype._setDataItem=function(e,t){this.item.transform=e.transform.clone(),this.setData(t)},e.prototype.updateItem=function(e){this._skippedPropertyName=null,this._modifyItem(function(t){t.update(e)}),null!=this._skippedPropertyName&&(this._onItemPropertyChanged(this.item,this._skippedPropertyName),null!=this.canvas&&this.canvas.updateSelection())},e.prototype._modifyItem=function(e){if("function"==typeof e){this._skipPropertyChanged=!0;try{e(this.item)}finally{this._skipPropertyChanged=!1}}},e.prototype.setData=function(e){var t;e&&""!==e&&(t="string"==typeof e?JSON.parse(e):e,this._createDataInstance().applyState(t,this))},Object.defineProperty(e.prototype,"visible",{get:function(){return this.item.visible},set:function(e){this._setVisible(e)},enumerable:!0,configurable:!0}),e.prototype._setVisible=function(e){this.item.visible=e},e.prototype.isVisible=function(){var t=this,n=function(r){var i,o=r.parentGroupItem;if(null==o)return!1;if(!o.visible||o.visualizationPermissions.noShow)return!0;var s=null===(i=t.canvas)||void 0===i?void 0:i.handlerFactory.get(o);return!(!s||s.isVisible())||!(!s||!e.isGroupHandler(s)||s.isChildVisible(t))||n(o)};return this.visible&&!this.getPermissions().noShow&&(null==this.layer||this.layer.getVisible())&&!n(this.item)},e.isGroupHandler=function(e){return e._isGroupHandler()},e.prototype.isEmpty=function(){return!1},Object.defineProperty(e.prototype,"locked",{get:function(){return this.item.locked},set:function(e){this.item.locked=e},enumerable:!0,configurable:!0}),e.prototype.isLocked=function(){return this.locked||null!=this.layer&&this.layer.locked},e.prototype._onAddedOnCanvas=function(e,t){null!=e&&(e.updateTexts(),t||this.update())},e.prototype._onRemovedFromCanvas=function(e){this._canvas=null},e.prototype.processEvent=function(e){},e.prototype.hitTest=function(e){throw new Error("Not implemented")},e.prototype._convertBlendModeToGlobalOperation=function(e){var t=null;switch(e){case lH.Normal:t="normal";break;case lH.Multiply:t="multiply";break;case lH.Screen:t="screen";break;case lH.Overlay:t="overlay";break;case lH.Darken:t="darken";break;case lH.Lighten:t="lighten";break;case lH.ColorDodge:t="color-dodge";break;case lH.ColorBurn:t="color-burn";break;case lH.HardLight:t="hard-light";break;case lH.SoftLight:t="soft-light";break;case lH.Difference:t="difference";break;case lH.Exclusion:t="exclusion";break;case lH.None:default:t="none"}return t},e.prototype.draw=function(e,t){if(void 0===t&&(t=null),null!=e&&null!=this.canvas&&null!=this.layer){var n=e.globalCompositeOperation,r=this.hasBlendMode()?this._convertBlendModeToGlobalOperation(this.blendMode):n,i=null!=this.canvas.maskedLayers&&this.canvas.maskedLayers.includes(this.layer);e.globalAlpha=i?.2:1;var o=e.canvas.width,s=e.canvas.height,a=BL.screenDpi*this.canvas.zoom/72,l=BL.screenDpi*this.canvas.zoom/72;if(null!=t&&(e.save(),AU.clipPath(e,t)),this.isNormalRenderingType)this.hasBlendMode()&&(e.globalCompositeOperation=r),this.drawItemHandler(e),this.hasBlendMode()&&(e.globalCompositeOperation=n);else{var c=this.layer.textureImage;if(null==c)return void this.canvas.drawWaitClock(e,this.bounds.center);var u=this._getTemporaryCanvas(o,s),h=u.getContext("2d"),d=this._getTextureCanvas(o,s),p=d.getContext("2d"),f=new KN(o/2,s/2,o,s);AU.drawImage(p,c,f,a,l,this.canvas.disableSmoothing),h.scale(a,l),h.translate(this.canvas.offset.x,this.canvas.offset.y),this.drawItemHandler(h,e),p.globalCompositeOperation="destination-in",p.drawImage(u,0,0,o,s),e.drawImage(d,-this.canvas.offset.x,-this.canvas.offset.y,o/a,s/l)}null!=t&&e.restore()}},e.prototype.drawItemHandler=function(e,t){},Object.defineProperty(e.prototype,"isNormalRenderingType",{get:function(){return null==this.layer||this.layer.renderingType===Tj.Normal},enumerable:!0,configurable:!0}),e.prototype._getTemporaryCanvas=function(e,t){return null==this._memoryCanvas&&(this._memoryCanvas=document.createElement("canvas")),this._memoryCanvas.width=e,this._memoryCanvas.height=t,this._memoryCanvas},e.prototype._getTextureCanvas=function(e,t){return null==this._textureCanvas&&(this._textureCanvas=document.createElement("canvas")),this._textureCanvas.width=e,this._textureCanvas.height=t,this._textureCanvas},e.prototype.updateColors=function(){return null!=this.canvas&&this.hasColorsToUpdate()?this.canvas.updateColors(this):Promise.resolve()},e.prototype.getColorData=function(){return new RU(this.item.id)},e.prototype.setColorData=function(e){},e.prototype.hasColorsToUpdate=function(){return!1},e.prototype.quickUpdate=function(){},e.prototype.update=function(e,t){},e.prototype._validateBeforeCallService=function(){return!0},e.prototype.updateForExternalCanvas=function(e){this._serverSideUpdate(null,null,null,e)},e.prototype._update=function(e,t,n){this._serverSideUpdate(e,t,n,null)},e.prototype._serverSideUpdate=function(e,t,n,r){var i=this;if(this.isUpdating)this._callbacks.push(t);else{"function"==typeof t&&t(),null!=n&&this._afterUpdateCallbacks.push(n);var o=this._createDataInstance(this),s=[JSON.stringify(o),JSON.parse(this._getDataItem())];null!=e&&(s=s.concat(e)),null==this._handlerUpdated&&(this._handlerUpdated=new DU),this._validateBeforeCallService()?this._callService("Update"+this.getTypeName(),s,function(e){if(null!=i.item){var t=null;"object"==typeof e&&(t=e.item,e=e.itemHandlerData),null!=t&&i._applyDataItem(t,e),i.setData(e),0===i._afterUpdateCallbacks.length?i.quickUpdate():(i._afterUpdateCallbacks.forEach(function(e){return e.apply(i)}),i._afterUpdateCallbacks=[],i.quickUpdate(),i.raiseChanged()),i.onSuccessResponse(),i.item.getItemChangedEvent().notify()}},function(e){i.onErrorResponse(e)},r):this._onValidateBeforeCallServiceFailed()}},e.prototype._callService=function(e,t,n,r,i){var o=null!=i?i:this.canvas;if(null!=o&&o.isInitialized&&!o.initialization){var s=o.getCallService(e,t,n,r,this.isNormalRenderingType||null==this.layer?null:this.layer.uniqueId);this._updateActiveWebServiceCall(s)}else this._handlerUpdated=null},e.prototype.updateActiveColorWebServiceCall=function(e,t){return FU(this,void 0,void 0,function(){return LU(this,function(n){switch(n.label){case 0:return null==this._activeWebServiceCall?[3,2]:[4,this._activeWebServiceCall];case 1:n.sent(),n.label=2;case 2:return null!=this._activeColorWebServiceCall&&(this._activeColorWebServiceCall.cancel(),this._isCurrentWebServiceCallForAll&&!t)?(e.cancel(),this._isCurrentWebServiceCallForAll=t,this.canvas.updateColors(),this._activeColorWebServiceCall=null,[2]):(null==this._handlerUpdated&&(this._handlerUpdated=new DU),this._activeColorWebServiceCall=e,this._isCurrentWebServiceCallForAll=t,[2])}})})},e.prototype._updateActiveWebServiceCall=function(e){return FU(this,void 0,void 0,function(){return LU(this,function(t){switch(t.label){case 0:return this._cancelWebServiceCall(),this._activeWebServiceCall=e,null==this._activeColorWebServiceCall?[2]:(this._activeColorWebServiceCall.cancel(),this._activeColorWebServiceCall=null,[4,this._handlerUpdated.promise]);case 1:return t.sent(),this._isCurrentWebServiceCallForAll?this.canvas.updateColors():this.updateColors(),[2]}})})},e.prototype._startTransform=function(e){this.startTransform(e)},e.prototype.startTransform=function(e){this._transformOperation=e,this._cancelWebServiceCall()},e.prototype.endTransform=function(e,t,n){void 0===n&&(n=!1),this._transformOperation=null},e.prototype._cancelWebServiceCall=function(){null!=this._activeWebServiceCall&&(this._activeWebServiceCall.cancel(),this._activeWebServiceCall=null)},e.prototype.waitUpdate=function(){return FU(this,void 0,void 0,function(){return LU(this,function(e){switch(e.label){case 0:return null==this._handlerUpdated?[3,2]:[4,this._handlerUpdated.promise];case 1:e.sent(),e.label=2;case 2:return[2]}})})},Object.defineProperty(e.prototype,"isUpdating",{get:function(){return this._updating},enumerable:!0,configurable:!0}),e.prototype.beginUpdate=function(){this._updating=!0},e.prototype.endUpdate=function(){this._updating=!1,this.updated();for(var e=!1;this._callbacks.length>0;){var t=this._callbacks.shift();"function"==typeof t&&(t(),e=!0)}e&&this.update()},e.prototype.updated=function(){this.raiseChanged()},e.prototype.addReady=function(e){this._readyEvent.add(e)},e.prototype.removeReady=function(e){this._readyEvent.remove(e)},e.prototype._dispatchReadyEvent=function(){this._readyEvent.notify(this)},e.prototype.addChanging=function(e){this._changingEvent.add(e)},e.prototype.removeChanging=function(e){this._changingEvent.remove(e)},e.prototype.raiseChanging=function(e){this._changingEvent.notify(e=null!=e?e:this.item),this.item.getItemChangingEvent().notify(this.item)},e.prototype.getChangingEvent=function(){return this._changingEvent},e.prototype.addChanged=function(e){this._changedEvent.add(e)},e.prototype.removeChanged=function(e){this._changedEvent.remove(e)},e.prototype.raiseChanged=function(){this.isUpdating||this._changedEvent.notify(this)},e.prototype.getChangedEvent=function(){return this._changedEvent},e.prototype.addItemPropertyChanged=function(e){this._itemPropertyChangedEvent.add(e)},e.prototype.removeItemPropertyChanged=function(e){this._itemPropertyChangedEvent.remove(e)},e.prototype.initialize=function(){},e.prototype._onValidateBeforeCallServiceFailed=function(){this._handlerUpdated.resolve(),this._handlerUpdated=null},e.prototype.onSuccessResponse=function(e){void 0===e&&(e=lU.Item),e==lU.Item?this._activeWebServiceCall=null:e==lU.Color&&(this._activeColorWebServiceCall=null),null==this._activeWebServiceCall&&null==this._activeColorWebServiceCall&&null!=this._handlerUpdated&&(this._handlerUpdated.resolve(),this._handlerUpdated=null)},e.prototype.onErrorResponse=function(e,t){void 0===t&&(t=lU.Item),t==lU.Item?this._activeWebServiceCall=null:t==lU.Color&&(this._activeColorWebServiceCall=null),this._afterUpdateCallbacks=[],null==this._activeWebServiceCall&&null==this._activeColorWebServiceCall&&null!=this._handlerUpdated&&(this._handlerUpdated.reject(e),this._handlerUpdated=null)},e.prototype.validateActiveColorWebServiceCall=function(){null!=this._activeColorWebServiceCall?this.hasColorsToUpdate()||(this._activeColorWebServiceCall=null,null==this._activeWebServiceCall&&(this._handlerUpdated=null)):null==this._activeWebServiceCall&&(this._handlerUpdated=null)},e.prototype.dispose=function(){var e;this._unsubscribeItemEvents(),this._cancelWebServiceCall(),null===(e=this._activeColorWebServiceCall)||void 0===e||e.cancel(),this._activeColorWebServiceCall=null,this._isDisposed=!0},e.prototype._isGroupHandler=function(){return!0},e.typeName="ItemHandler",e}();!function(e){e[e.NotContent=0]="NotContent",e[e.PlaceholderContent=1]="PlaceholderContent",e[e.TopFrame=2]="TopFrame",e[e.BottomFrame=3]="BottomFrame"}(MU||(MU={}));var NU,jU,HU,zU=function(){function e(){}return e.getBounds=function(e,t,n){var r,i,o,s;return i=this,void 0,s=function(){var i;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(o){switch(o.label){case 0:return null===(r=this.getBoundsSync(e,t))||void 0===r?[3,1]:(i=r,[3,3]);case 1:return[4,n.getPathBoundsFromServer(e)];case 2:i=o.sent(),o.label=3;case 3:return[2,i]}})},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{a(s.next(e))}catch(n){t(n)}}function r(e){try{a(s.throw(e))}catch(n){t(n)}}function a(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(n,r)}a((s=s.apply(i,[])).next())})},e.getBoundsSync=function(e,t){if(void 0===t&&(t=null),null!=t){var n=e.toTextWhizzPath(t).getBounds();return new FN(n.x,n.y,n.width,n.height)}return this._isDomBoundsEnabled?this._getDOMBounds(e):null},Object.defineProperty(e,"_isDomBoundsEnabled",{get:function(){return!this._getDOMBounds(this._testRectangle).isEmpty()},enumerable:!0,configurable:!0}),e._getDOMBounds=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.position="absolute",t.style.visibility="hidden";var n=document.createElementNS("http://www.w3.org/2000/svg","path");t.appendChild(n),n.setAttribute("d",e.toString());var r=document.querySelector("body");r.appendChild(t);var i=n.getBBox(),o=new FN(i.x,i.y,i.width,i.height);return r.removeChild(t),o},e._testRectangle=$N.rectangle(0,0,10,10),e}(),VU=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),UU=function(e){function t(t,n,r,i,o,s){void 0===s&&(s=null);var a=e.call(this,o)||this;a._textWhizz=s,a.floatingItemToolbar=null,a.selectToolbarButton=null,a.deleteToolbarButton=null,a.editToolbarButton=null,a._transformChanging=new SL(a),a._doubleClickEvent=new PL,a._clickEvent=new PL,a._deleteToolbarButtonClickEvent=new PL,a._editToolbarButtonClickEvent=new PL,a._selectToolbarButtonClickEvent=new PL,a._violationWarningButtonClick=new PL,a._violationWarningButtonClickEvent=new PL;var l=t||0,c=n||0,u=r||0,h=i||0;return a._controlPoints=[new MN(l,c),new MN(l+u,c+h)],a._allowNegativeResize=!1,a._selectionTolerance=0,a.floatingItemToolbar=null,a.selectToolbarButton=null,a.deleteToolbarButton=null,a.editToolbarButton=null,a._deleteToolbarButtonClickHandler=a._onDeleteToolbarButtonClick.bind(a),a._editToolbarButtonClickHandler=a._onEditToolbarButtonClick.bind(a),a._selectToolbarButtonClickHandler=a._onSelectToolbarButtonClick.bind(a),a._throttleSizeChanging=FL.throttle(function(){this.raiseChanging()},100),a._violationWarningButton=null,a._violationWarningButtonClickHandler=a._onViolationWarningButtonClick.bind(a),a._violationContainer=null,a._updateVectorMaskCenterSync(),a}return VU(t,e),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"opacity":case"transform":break;case"locked":this._updateVisibility();break;case"textWrappingMode":null!=this.canvas&&this.canvas.updateTexts();break;case"mask":this._updateVectorMaskCenter();break;case"violationSettings":this.canvas.updateViolationContainer(this)}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._onItemVisibilityChanged=function(){e.prototype._onItemVisibilityChanged.call(this),this._updateVisibility()},Object.defineProperty(t.prototype,"allowNegativeResize",{get:function(){return this._allowNegativeResize},enumerable:!0,configurable:!0}),t.prototype._getBoundsMargin=function(){return 0},Object.defineProperty(t.prototype,"transformChanging",{get:function(){return this._transformChanging},enumerable:!0,configurable:!0}),t.prototype.getControlBounds=function(){var e=Math.max(this._controlPoints[0].x,this._controlPoints[1].x),t=Math.max(this._controlPoints[0].y,this._controlPoints[1].y),n=Math.min(this._controlPoints[0].x,this._controlPoints[1].x),r=Math.min(this._controlPoints[0].y,this._controlPoints[1].y);return new FN(n,r,e-n,t-r)},t.prototype.getControlCenter=function(){var e=this.getControlBounds();return new MN(e.left+e.width/2,e.top+e.height/2)},t.prototype._getRectangle=function(){var e=KN.fromRectangleF(this.getControlBounds());return e.setTransform(this.item.transform),e},Object.defineProperty(t.prototype,"rectangle",{get:function(){return this._getRectangle()},enumerable:!0,configurable:!0}),t.prototype.setRectangle=function(e,t){var n=KN.fromRectangleF(this.getControlBounds()),r=e.getTransform(n);this.item.setTransform(r,t)},Object.defineProperty(t.prototype,"bounds",{get:function(){var e=this.rectangle,t=this._getBoundsMargin();return e.width+=e.width>0?t:-t,e.height+=e.height>0?t:-t,e.bounds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"drawingRectangle",{get:function(){return this.rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.item.transform.angle},set:function(e){this.item.transform.setAngle(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.rectangle.height},set:function(e){var t=this.rectangle;t.height=e,this.setRectangle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.rectangle.width},set:function(e){var t=this.rectangle;t.width=e,this.setRectangle(t)},enumerable:!0,configurable:!0}),t.prototype.setLocation=function(e){var t=this.rectangle;t.location=e,this.setRectangle(t)},Object.defineProperty(t.prototype,"startRectangle",{get:function(){return null!=this._startRectangle?this._startRectangle:null},enumerable:!0,configurable:!0}),t.prototype._onAddedOnCanvas=function(t,n){e.prototype._onAddedOnCanvas.call(this,t,n),null!=t&&(null!=this._contentType&&this._contentType!==MU.NotContent||(t.addFloatingItemToolbar(this),t.addViolationContainer(this)),this._updateVectorMaskCenter())},t.prototype._onRemovedFromCanvas=function(t){e.prototype._onRemovedFromCanvas.call(this,t),null!=t&&(t.removeFloatingItemToolbar(this),t.removeViolationContainer(this))},t.prototype.onTextWhizzInit=function(){this._updateVectorMaskCenter()},t.prototype.update=function(){this.updateColors(),this._updateDeleteAndEditGroup(),this._updateViolationContainersVisibility()},t.prototype.hitTest=function(e){return this.canvas.hitTestSelection(this._getHighlightRectangle(),e)},t.prototype._calculateTransformedRectangle=function(e,n){var r;if(this._startRectangle.equals(e))r=n.clone();else{var i=this._startRectangle.clone();r=t.transformRectangleByTwoRectanglesDiff(i,e,n)}return r},t.prototype._onTransformRectangle=function(e,t,n){if(null!=e&&null!=t&&null!=this._startRectangle){var r=this._calculateTransformedRectangle(e,t);this.setRectangle(r,!0)}},t.prototype._transformRectangle=function(e,t,n){void 0===n&&(n=!1),this._onTransformRectangle(e,t,n);var r=this.canvas;null!=r&&r.updateFloatingItemToolbar(this),this.updateViolationContainerPosition(),null!=this.item.parentGroupItem?this.raiseChanging(this.item):this._throttleSizeChanging()},t.prototype.startTransform=function(t){e.prototype.startTransform.call(this,t),this._startRectangle=this.rectangle;var n=this.canvas;null!=n&&n.updateViolationContainer(this,!1)},t.prototype.endTransform=function(t,n,r){void 0===r&&(r=!1),e.prototype.endTransform.call(this,t,n,r),this._endTransform(t,n,r)},t.prototype._endTransform=function(e,t,n){void 0===n&&(n=!1),n||!e||!t&&null==this._startRectangle||this._itemPropertyChangedEvent.notify(this,"transform"),e&&t||delete this._startRectangle;var r=this.canvas;null!=r&&(r.updateFloatingItemToolbar(this),r.updateViolationContainer(this,!0))},t.prototype._transformChanged=function(){e.prototype._transformChanged.call(this);var t=this.canvas;null!=t&&t.updateFloatingItemToolbar(this),this.updateViolationContainerPosition()},t.prototype._onResized=function(){return delete this._startRectangle,!0},t.prototype.dispatchDoubleClickEvent=function(e){this._doubleClickEvent.notify(this,e)},t.prototype.addDoubleClick=function(e){this._doubleClickEvent.add(e)},t.prototype.removeDoubleClick=function(e){this._doubleClickEvent.remove(e)},t.prototype.dispatchClickEvent=function(e){this._clickEvent.notify(e)},t.prototype.addClick=function(e){this._clickEvent.add(e)},t.prototype.removeClick=function(e){this._clickEvent.remove(e)},t.prototype.drawHighlight=function(e){var t=this.canvas.mul,n=this._getHighlightRectangle();AU.rectangle(e,n,this.canvas.selectionWidth/t,this.canvas.selectionColor)},t.prototype._getHighlightRectangle=function(){var e=this.rectangle,t=parseInt(this._getBoundsMargin().toString());return e.width+=e.width>=0?t:-t,e.height+=e.height>=0?t:-t,e},t.prototype.getSelectionRectangle=function(){return this.isVisible()?this.rectangle:null},t.prototype.getBorderMargin=function(){return this._getBoundsMargin()/2},t.prototype.getSelectionTolerance=function(){return this._selectionTolerance},t.prototype.addDeleteToolbarButtonClick=function(e){this._deleteToolbarButtonClickEvent.add(e)},t.prototype.removeDeleteToolbarButtonClick=function(e){this._deleteToolbarButtonClickEvent.remove(e)},t.prototype._onDeleteToolbarButtonClick=function(){this._deleteToolbarButtonClickEvent.notify(this)},t.prototype.showDeleteToolbarButton=function(){return this.getPermissions().allowDelete&&this.getPermissions().showDeleteToolbarButton},t.prototype.addEditToolbarButtonClick=function(e){this._editToolbarButtonClickEvent.add(e)},t.prototype.removeEditToolbarButtonClick=function(e){this._editToolbarButtonClickEvent.remove(e)},t.prototype._onEditToolbarButtonClick=function(){this._editToolbarButtonClickEvent.notify(this)},t.prototype.showEditToolbarButton=function(){return this.getPermissions().showEditToolbarButton},t.prototype.addSelectToolbarButtonClick=function(e){this._selectToolbarButtonClickEvent.add(e)},t.prototype.removeSelectToolbarButtonClick=function(e){this._selectToolbarButtonClickEvent.remove(e)},t.prototype._onSelectToolbarButtonClick=function(){this._selectToolbarButtonClickEvent.notify(this)},t.prototype.showSelectToolbarButton=function(){return this.getPermissions().showSelectToolbarButton},t.prototype._updateVisibility=function(){this._updateDeleteAndEditGroup(),this._updateViolationContainersVisibility()},t.prototype._updateDeleteAndEditGroup=function(){var e;null===(e=this.canvas)||void 0===e||e.updateFloatingItemToolbar(this)},t.prototype._onViolationWarningButtonClick=function(e){this._violationWarningButtonClick.notify(this,e),e.preventDefault()},t.prototype._updateViolationContainersVisibility=function(){var e;null===(e=this.canvas)||void 0===e||e.updateViolationContainer(this)},t.prototype.updateViolationContainerPosition=function(){var e;null===(e=this.canvas)||void 0===e||e.updateViolationContainerPosition(this)},t.prototype.isGoodViolationIcon=function(){var e=this.canvas;return!(null==this._violationWarningButton||null==e||!this.isVisible())&&this._violationWarningButton.classList.contains(e.goodViolationIconCssClass)},t.prototype.setGoodViolationIcon=function(e){var t=this.canvas;if(null!=this._violationWarningButton&&null!=t&&this.isVisible()&&(this._violationWarningButton.style.visibility="visible",null!=e&&(this._violationWarningButton.title=e),!this.isGoodViolationIcon())){var n=t.goodViolationIconCssClass,r=t.badViolationIconCssClass;this._violationWarningButton.classList.remove(t.warningViolationIconCssClass),this._violationWarningButton.classList.remove(r),this._violationWarningButton.classList.add(n),this._violationWarningButton.classList.toggle("active",t.isOnlyThisItemHandlerSelected(this))}},t.prototype.isWarningViolationIcon=function(){var e=this.canvas;return!(null==this._violationWarningButton||null==e||!this.isVisible())&&this._violationWarningButton.classList.contains(e.warningViolationIconCssClass)},t.prototype.setWarningViolationIcon=function(e){var t=this.canvas;if(null!=this._violationWarningButton&&null!=t&&this.isVisible()&&(this._violationWarningButton.style.visibility="visible",null!=e&&(this._violationWarningButton.title=e),!this.isWarningViolationIcon())){var n=t.warningViolationIconCssClass,r=t.badViolationIconCssClass;this._violationWarningButton.classList.remove(t.goodViolationIconCssClass),this._violationWarningButton.classList.remove(r),this._violationWarningButton.classList.add(n),this._violationWarningButton.classList.toggle("active",t.isOnlyThisItemHandlerSelected(this))}},t.prototype.isBadViolationIcon=function(){var e=this.canvas;return!(null==this._violationWarningButton||null==e||!this.isVisible())&&this._violationWarningButton.classList.contains(e.badViolationIconCssClass)},t.prototype.setBadViolationIcon=function(e){var t=this.canvas;if(null!=this._violationWarningButton&&null!=t&&this.isVisible()&&(this._violationWarningButton.style.visibility="visible",null!=e&&(this._violationWarningButton.title=e),!this.isBadViolationIcon())){var n=t.warningViolationIconCssClass,r=t.badViolationIconCssClass;this._violationWarningButton.classList.remove(t.goodViolationIconCssClass),this._violationWarningButton.classList.remove(n),this._violationWarningButton.classList.add(r),this._violationWarningButton.classList.toggle("active",t.isOnlyThisItemHandlerSelected(this))}},t.prototype.isNoneViolationIcon=function(){var e=this.canvas;if(null==this._violationWarningButton||null==e||!this.isVisible())return!1;var t=e.warningViolationIconCssClass,n=e.badViolationIconCssClass,r=this._violationWarningButton.classList.contains(e.goodViolationIconCssClass)||this._violationWarningButton.classList.contains(t)||this._violationWarningButton.classList.contains(n);return"hidden"===this._violationWarningButton.style.visibility||!r},t.prototype.setNoneViolationIcon=function(){var e=this.canvas;if(null!=this._violationWarningButton&&null!=e&&this.isVisible()){var t=e.warningViolationIconCssClass,n=e.badViolationIconCssClass;this._violationWarningButton.classList.remove(e.goodViolationIconCssClass),this._violationWarningButton.classList.remove(t),this._violationWarningButton.classList.remove(n),this._violationWarningButton.style.visibility="hidden"}},t.prototype.addViolationWarningButtonClick=function(e){this._violationWarningButtonClick.add(e)},t.prototype.removeViolationWarningButtonClick=function(e){this._violationWarningButtonClick.remove(e)},t.prototype.getDeleteToolbarButtonClickHandler=function(){return this._deleteToolbarButtonClickHandler},t.prototype.getEditToolbarButtonClickHandler=function(){return this._editToolbarButtonClickHandler},t.prototype.getSelectToolbarButtonClickHandler=function(){return this._selectToolbarButtonClickHandler},t.prototype.getViolationWarningButton=function(){return this._violationWarningButton},t.prototype.setViolationWarningButton=function(e){this._violationWarningButton=e},t.prototype.getViolationWarningButtonClickHandler=function(){return this._violationWarningButtonClickHandler},t.prototype.getViolationContainer=function(){return this._violationContainer},t.prototype.setViolationContainer=function(e){this._violationContainer=e},t.prototype.getViolationWarningButtonElement=function(){return this._violationWarningButton},t.transformRectangleByTwoRectanglesDiff=function(e,t,n){var r=n.getTransform(t),i=r.angle,o=r.scaleX,s=r.scaleY;if(WN(n.angle,0)||e.rotateAt(-n.angle,t.center),WN(o,1)&&WN(s,1)?(e.centerX+=r.translateX,e.centerY+=r.translateY):(e.width=e.width*o,e.height=e.height*s,e.centerX=n.centerX+(e.centerX-t.centerX)*o,e.centerY=n.centerY+(e.centerY-t.centerY)*s),WN(n.angle,0)||e.rotateAt(n.angle,n.center),!WN(i,0)){var a=e.center;a.rotateAt(i,t.center),e.angle=e.angle+i,e.center=a}return e},t.prototype._getPrintAreaBounds=function(){if(null==this.layer||null==this.layer.container.parentComponent)return null;var e=this.layer.container.parentComponent;return null==e.printAreas||e.printAreas.length<1?null:e.printAreas.get(0).bounds},t.prototype.transformByMatrix=function(e){this.setRectangle(this.rectangle.transformByMatrix(e)),1===e.scaleX&&1===e.scaleY||this._onResized(),this._transformChanged(),null!=this.canvas&&this.canvas.updateSelection()},t.prototype.getTransformedRectangle=function(e,t){void 0===e&&(e=!0);var n=this.rectangle,r=this._getPrintAreaBounds();if(null!=r&&e&&(n.location=n.location.translate(-r.left,-r.top)),t){var i=this.getBorderMargin();n.width+=2*i,n.height+=2*i}return n},t.prototype.setTransformedRectangle=function(e){this.setRectangle(e)},t.prototype.getTextWrappingPath=function(){return this.item.textWrappingMode!==Bj.None?$N.rotatedRectangle(this.rectangle):null},t.prototype._clip=function(e){if(this._hasVectorMask()){var t=this._getTransformedClippingPath();null!=t&&AU.clipPath(e,t)}},t.prototype._updateVectorMaskCenter=function(){var e,t,n,r,i,o;return r=this,void 0,o=function(){var r;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(i){switch(i.label){case 0:return this._hasVectorMask()?[4,zU.getBounds(this.item.mask.vectorMask,null!==(e=this._textWhizz)&&void 0!==e?e:null===(t=this.canvas)||void 0===t?void 0:t.textWhizz,null===(n=this.canvas)||void 0===n?void 0:n.service)]:[3,2];case 1:return r=i.sent(),this._vectorMaskCenter=KN.fromRectangleF(r).center,[3,3];case 2:this._vectorMaskCenter=null,i.label=3;case 3:return[2]}})},new((i=void 0)||(i=Promise))(function(e,t){function n(e){try{a(o.next(e))}catch(n){t(n)}}function s(e){try{a(o.throw(e))}catch(n){t(n)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i(function(e){e(r)})).then(n,s)}a((o=o.apply(r,[])).next())})},t.prototype._updateVectorMaskCenterSync=function(){var e,t;if(this._hasVectorMask()){var n=zU.getBoundsSync(this.item.mask.vectorMask,null!==(e=this._textWhizz)&&void 0!==e?e:null===(t=this.canvas)||void 0===t?void 0:t.textWhizz);if(null==n)return;this._vectorMaskCenter=KN.fromRectangleF(n).center}else this._vectorMaskCenter=null},t.prototype._getTransformedClippingPath=function(e){if(!this._hasVectorMask()||null==this._vectorMaskCenter)return null;null==e&&(e=this.item.transform.clone());var t=this.item.mask.vectorMask.clone(),n=this._vectorMaskCenter,r=this.getControlCenter();if(0!==e.angle&&(t.rotateAt(e.angle,r),e.setAngle(0,!0)),!WN(e.scaleX,1)||!WN(e.scaleY,1)){var i=n.x-r.x,o=n.y-r.y;r.translate(e.translateX,e.translateY),e.setTranslateX(r.x+i*e.scaleX-n.x),e.setTranslateY(r.y+o*e.scaleY-n.y)}return t.transform(e,n),t},t.prototype._hasVectorMask=function(){return null!=this.item.mask&&null!=this.item.mask.vectorMask},t.typeName="BaseRectangleItemHandler",t}(BU),WU=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XU=function(e){function t(t){var n=e.call(this,t)||this;return n.__type="ShapeHandlerData",n}return WU(t,e),t.prototype.applyState=function(t,n){e.prototype.applyState.call(this,t,n)},t}(kU),GU=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qU=function(e){function t(n){var r=e.call(this,n.value)||this;return r.ajaxResponse=n,r.name="AjaxResponseException",Object.setPrototypeOf(r,t.prototype),r}return GU(t,e),t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.ajaxResponse=this.ajaxResponse,t},t}(IL),$U=function(e){return new Promise(function(t,n){var r,i,o=new XMLHttpRequest;if(o.open(e.type,e.url,!0),o.setRequestHeader("Accept","*/*"),null!=e.headers)try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.headers),a=s.next();!a.done;a=s.next()){var l=a.value;o.setRequestHeader(l.name,l.value)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}null!=e.responseType&&(o.responseType=e.responseType),o.send(e.data),o.onreadystatechange=function(){if(4===o.readyState){var e=o.status,r={value:"arraybuffer"!==o.responseType?o.responseText:"",status:e,contentType:o.getResponseHeader("content-type"),xhr:o};e>=200&&e<300?t(r):n(new qU(r))}}})};!function(e){e[e.Ok=200]="Ok",e[e.NoContent=204]="NoContent",e[e.NotFound=404]="NotFound",e[e.InternalServerError=500]="InternalServerError"}(NU||(NU={})),function(e){e.post="POST",e.get="GET",e.Delete="DELETE"}(jU||(jU={})),function(e){e.isJsonContentType=function(e){return 0===e.trim().toLowerCase().indexOf("application/json")},e.json={name:"Content-Type",value:"application/json;charset=UTF-8"},e.text={name:"Content-Type",value:"text/plain"}}(HU||(HU={}));var YU,KU=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QU=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},ZU=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},JU=function(e){function t(t,n,r){void 0===r&&(r=null);var i=e.call(this,null,null,null,null,n,r)||this;return i._originalPathId=null,i._isLoadingPath=!1,i._isLoadedPath=!1,i.originalPath=null!=t?t:new $N(""),i._addedOnCanvasEvent=new EL,null!=n&&null!=n.sourcePathId&&i.setOriginalPathId(n.sourcePathId),i._allowNegativeResize=!1,i._updateControlPointsSync(),i}return KU(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return e.prototype._getItem.call(this)},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n),this.item.fillColor=t.fillColor,this.item.borderColor=t.borderColor,this.item.sourcePath=t.sourcePath,this.item.altBorderColor=t.altBorderColor,this.item.borderWidth=t.borderWidth,this.item.dash=t.dash,this.item.fixedBorderWidth=t.fixedBorderWidth},t.prototype._onItemPropertyChanged=function(t,n){var r=this.canvas;switch(n){case"fillColor":case"borderColor":case"altBorderColor":this.item.parentGroupItem instanceof Tz||(this.update(),null!=this.canvas&&this.canvas.redraw());case"dash":break;case"fixedBorderWidth":case"borderWidth":null!=r&&(r.updateSelection(),r.redraw());break;case"sourceRectangle":this.originalPath=$N.rectangle(this.item.sourceRectangle.left,this.item.sourceRectangle.top,this.item.sourceRectangle.width,this.item.sourceRectangle.height),this._controlPoints=[new MN(this.item.sourceRectangle.left,this.item.sourceRectangle.top),new MN(this.item.sourceRectangle.right,this.item.sourceRectangle.bottom)]}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype.update=function(t,n){"function"==typeof t?this.isVisible()?e.prototype._update.call(this,null,t,n):t():this.updateColors()},t.prototype._setVisible=function(t){e.prototype._setVisible.call(this,t),this.isVisible()&&this.update()},t.prototype._getActualDash=function(){var e=this.item.dash;if(null==e)return e;var t=this.canvas,n=e.slice(0);if(n.length>0&&this.item.fixedBorderWidth&&null!=t)for(var r=0;r<n.length;r++)n[r]/=t.zoom;return n},Object.defineProperty(t.prototype,"originalPath",{get:function(){return this.item.sourcePath},set:function(e){this.item.sourcePath=e,this._isLoadedPath=!0},enumerable:!0,configurable:!0}),t.prototype._updateControlPoints=function(){var e,t,n;return QU(this,void 0,void 0,function(){var r;return ZU(this,function(i){switch(i.label){case 0:return null==this.item.sourcePath?[2]:[4,zU.getBounds(this.item.sourcePath,null!==(e=this._textWhizz)&&void 0!==e?e:null===(t=this.canvas)||void 0===t?void 0:t.textWhizz,null===(n=this.canvas)||void 0===n?void 0:n.service)];case 1:return r=i.sent(),this.controlPoints=[new MN(r.left,r.top),new MN(r.right,r.bottom)],[2]}})})},t.prototype._updateControlPointsSync=function(){var e,t;if(null!=this.item.sourcePath){var n=zU.getBoundsSync(this.item.sourcePath,null!==(e=this._textWhizz)&&void 0!==e?e:null===(t=this.canvas)||void 0===t?void 0:t.textWhizz);null!=n&&(this.controlPoints=[new MN(n.left,n.top),new MN(n.right,n.bottom)])}},t.prototype.getOriginalPathId=function(){return this._originalPathId},t.prototype.setOriginalPathId=function(e){return QU(this,void 0,void 0,function(){var t,n,r,i;return ZU(this,function(o){switch(o.label){case 0:return this._originalPathId=e,null==this._originalPathId?[2]:(this._isLoadingPath=!0,this._isLoadedPath=!1,[4,this._waitAddOnCanvas()]);case 1:if(o.sent(),null==this.canvas)return[2];t=this.canvas.handlerUrl,o.label=2;case 2:return o.trys.push([2,4,5,6]),[4,$U({type:jU.get,url:t+"/pth?f="+this._originalPathId,headers:[HU.text]})];case 3:return n=o.sent(),r=new $N(n.value),this.item.sourcePathLoaded=!0,this.originalPath=r,this._updateControlPoints(),this._isLoadedPath=!0,[3,6];case 4:return i=o.sent(),console.error("Unable to load content path. Reason: "+i),this._isLoadedPath=!1,[3,6];case 5:return this._isLoadingPath=!1,this.item.sourcePathLoaded=!1,this.item.getPathLoadedEvent().notify(),[7];case 6:return this.canvas.redraw(),[2]}})})},t.prototype._waitAddOnCanvas=function(){return QU(this,void 0,void 0,function(){var e=this;return ZU(this,function(t){switch(t.label){case 0:return null!=this.canvas?[2]:[4,new Promise(function(t){var n=function(){t(),e._addedOnCanvasEvent.remove(n)};e._addedOnCanvasEvent.add(n)})];case 1:return t.sent(),[2]}})})},t.prototype._getActualBorderWidth=function(){var e=this.item.borderWidth,t=this.canvas;return this.item.fixedBorderWidth&&null!=t&&(e/=t.zoom),e},t.prototype._getBoundsMargin=function(){return this._getActualBorderWidth()},t.prototype._getTransformedPath=function(){var e=this.getControlCenter(),t=this.item.sourcePath.clone();return t.transform(this.item.transform,e),t},t.prototype._createDataInstance=function(e){return new XU(e)},t.prototype.drawItemHandler=function(e){if(null!=e)if(this._isLoadingPath||!this._isLoadedPath)this.canvas.drawWaitClock(e,this.rectangle.center);else{var t=this._getActualDash();this._hasVectorMask()&&(e.save(),this._clip(e));var n=this.item.altBorderColor;if(n&&null!=t&&t.length>0){var r=t.slice(0);r.unshift(0),r.push(0),AU.path(e,this.item.sourcePath,this.getControlCenter(),this.item.transform,this.item.fillColor.preview,this._getActualBorderWidth(),n.preview,this.item.opacity,r)}AU.path(e,this.item.sourcePath,this.getControlCenter(),this.item.transform,this.item.fillColor.preview,this._getActualBorderWidth(),this.item.borderColor.preview,this.item.opacity,t),this._hasVectorMask()&&e.restore()}},t.prototype.getColorData=function(){var t=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null,r=e.prototype.getColorData.call(this);return t.fillColor.needUpdate(n)&&(r.fill=t.fillColor.getData()),t.borderColor.needUpdate(n)&&(r.border=t.borderColor.getData()),null!=t.altBorderColor&&t.altBorderColor.needUpdate(n)&&(r.altBorder=t.altBorderColor.getData()),r},t.prototype.setColorData=function(t){e.prototype.setColorData.call(this,t),this._modifyItem(function(e){null!=t.fill&&(e.fillColor=oH.createColor(t.fill)),null!=t.border&&(e.borderColor=oH.createColor(t.border)),null!=t.altBorder&&(e.altBorderColor=oH.createColor(t.altBorder))})},t.prototype.onTextWhizzInit=function(){e.prototype.onTextWhizzInit.call(this),this._updateControlPoints()},t.prototype.hasColorsToUpdate=function(){var t=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null;return e.prototype.hasColorsToUpdate.call(this)||t.fillColor.needUpdate(n)||t.borderColor.needUpdate(n)||null!=t.altBorderColor&&t.altBorderColor.needUpdate(n)},t.prototype._onAddedOnCanvas=function(t,n){e.prototype._onAddedOnCanvas.call(this,t,n),this._addedOnCanvasEvent.notify(),this._updateControlPoints()},t.prototype.getTextWrappingPath=function(){return this.item.textWrappingMode===Bj.Tight?this._getTransformedPath():e.prototype.getTextWrappingPath.call(this)},t.typeName="ShapeItemHandler",t}(UU),eW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tW=function(e){function t(t,n){void 0===n&&(n=null);var r=this;return null!=t?(r=e.call(this,$N.rectangle(t.sourceRectangle.left,t.sourceRectangle.top,t.sourceRectangle.width,t.sourceRectangle.height),t,n)||this)._controlPoints=[new MN(t.sourceRectangle.left,t.sourceRectangle.top),new MN(t.sourceRectangle.right,t.sourceRectangle.bottom)]:r=e.call(this,null,t,n)||this,r._allowNegativeResize=!0,r}return eW(t,e),t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n),this.item.sourceRectangle=t.sourceRectangle},Object.defineProperty(t.prototype,"rectangle",{get:function(){var t=e.prototype._getRectangle.call(this);return t.width<0&&(t.width=-t.width),t.height<0&&(t.height=-t.height),t},enumerable:!0,configurable:!0}),t.typeName="RectangleItemHandler",t}(JU),nW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rW=function(e){function t(t){var n=e.call(this,t)||this;return n.__type="BaseTextHandlerData",n}return nW(t,e),t.prototype.applyState=function(t,n){n&&(n.beginUpdate(),n.currentTextImage=null!=t.currentTextImage?Object.assign(new lW,t.currentTextImage):null),e.prototype.applyState.call(this,t,n)},t}(XU),iW=function(){function e(e){var t=this;this._src=null,this._onLoadedDelegate=function(n){if(!n.target)throw new Error('"e.target" is null.');t._onLoaded(n,n.target),e()},this._image=this._createImageObject(this._onLoadedDelegate),this._tmpImage=this._createImageObject(this._onLoadedDelegate)}return e.prototype._onLoaded=function(e,t){t===this._tmpImage&&(this._tmpImage=this._image,this._image=t,this._src=t.src),this._loaded=!0,this._loading=!1},Object.defineProperty(e.prototype,"isLoaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._loading},set:function(e){this._loading=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),e.prototype.updateUrl=function(e){this._tmpImage.src!==e?(this._loading=!0,this._tmpImage.src=e,this._src=e):this._onLoadedDelegate({target:this._tmpImage})},e.prototype.clear=function(){this.source=null},Object.defineProperty(e.prototype,"source",{get:function(){return this._src},set:function(e){this._src!==e&&(this._loaded=!1,this._src=e,this._image.src=null==this._src?"":e)},enumerable:!0,configurable:!0}),e.prototype._createImageObject=function(e){var t=new Image;return t.crossOrigin="anonymous","function"==typeof e&&t.addEventListener("load",e),t},e.prototype.dispose=function(){this._tmpImage.removeEventListener("load",this._onLoadedDelegate),this._image.removeEventListener("load",this._onLoadedDelegate),delete this._onLoadedDelegate},e}(),oW=function(){function e(e,t,n,r,i){this._staticCanvas=e,this._activeCanvas=t,this._textWhizz=n,this._zoom=r,this._offset=i,this._selectionColor=new Kj("rgba(40, 135, 245, 0.9)"),this._selectionTextColor=new Kj("rgb(255, 255, 255)")}return e.prototype.setZoom=function(e){this._zoom=e},Object.defineProperty(e.prototype,"offset",{set:function(e){this._offset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_scale",{get:function(){return BL.screenDpi*this._zoom/72},enumerable:!0,configurable:!0}),e.prototype._getScaledBounds=function(e){var t=this._scale,n=Math.round(e.left*t),r=Math.round(e.top*t),i=Math.round(e.width*t),o=Math.round(e.height*t);return new FN(n,r,i,o)},e.prototype._getBase64Url=function(){return this._staticCanvas.toDataURL()},e.prototype._colorToTextWhizz=function(e){return new this._textWhizz.Color(this._textWhizz.ColorType.rgb,[e.b,e.g,e.r,e.a])},e.renderTextImage=function(e,t,n,r,i){t.isLoaded?this._drawImage(e,t,n,r,i):!t.isLoading&&e.ready||this._drawWaitClock(e,r)},e._drawWaitClock=function(e,t){var n=e.rectangle;e.canvas.drawWaitClock(t,new MN(n.centerX,n.centerY))},e._isUpdatingAfterResize=function(e){return e instanceof aW&&("BoundedTextItemHandler"===e.getTypeName()||"PathBoundedTextItemHandler"===e.getTypeName())&&e.isUpdatingAfterResize},e._drawImage=function(e,t,n,r,i){var o=e.canvas,s=e.item,a=o.disableSmoothing,l=BL.screenDpi*o.zoom/72;this._isUpdatingAfterResize(e)||AU.drawImage(r,t.image,e.drawingRectangle,l,l,a,null,s.opacity*i,n)},e}(),sW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aW=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r._defaultWidth=10,r._currentTextImage=null,r._onCanvasChangedDelegate=null,r._updatedFromServer=!1,r._isUpdatingAfterResize=!1,r._height=0,r._updateTextsFunc=function(){null!=r.canvas&&r.canvas.updateTexts()},r._imageContainer=new iW(r._onImageLoaded.bind(r)),r._allowNegativeResize=!1,r}return sW(t,e),t.prototype._getSrc=function(){var e=this._imageContainer.source;return sj(e)?this._createImageUrl():e},Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"text":case"font":this.update(null,this._updateTextsFunc);break;case"underline":case"color":case"alignment":case"leading":case"tracking":case"verticalScale":case"horizontalScale":case"previewScale":case"stroke":case"shadow":case"baselineShift":this.update();break;case"checkTextCrop":t.checkTextCrop&&this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n),this.item.text=t.text,this.item.font=t.font,this.item.leading=t.leading,this.item.color=t.color,this.item.stroke=t.stroke,this.item.shadow=t.shadow,this.item.verticalScale=t.verticalScale,this.item.horizontalScale=t.horizontalScale,this.item.previewScale=t.previewScale,this.item.mask=t.mask,this.item.baselineShift=t.baselineShift,this._updateVectorMaskCenter()},Object.defineProperty(t.prototype,"currentTextImage",{get:function(){return null!=this._currentTextImage?this._currentTextImage:this._currentTextImage=new lW},set:function(e){this._currentTextImage=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textCropped",{get:function(){return this.item.checkTextCrop?null!=this.currentTextImage&&this.currentTextImage.textCropped:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._imageContainer.isLoaded},enumerable:!0,configurable:!0}),t.prototype._isLoadingImage=function(){return this._imageContainer.isLoading},t.prototype._setIsLoadingImage=function(e){this._imageContainer.isLoading=e},Object.defineProperty(t.prototype,"isUpdatingAfterResize",{get:function(){return this._isUpdatingAfterResize},set:function(e){this._isUpdatingAfterResize=e},enumerable:!0,configurable:!0}),t.prototype._getText=function(){var e=this.isEmptyTextPlaceholder()?this.item.originalText:this.item.text;return aj(e)?this._xmlToHtml(e).textContent.trim():e.trim()},t.prototype.isEmptyTextPlaceholder=function(){return this.item.isTextPlaceholder&&""===this.item.text},t.prototype.update=function(e,t){var n=this;this.isVisible()?this._update(null,e,function(){n._afterUpdate(t)}):"function"==typeof e&&e()},t.prototype.getColorData=function(){var t=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null,r=e.prototype.getColorData.call(this);return t.color.needUpdate(n)&&(r.color=t.color.getData()),null!=t.stroke&&t.stroke.color.needUpdate(n)&&(r.stroke=t.stroke.color.getData()),null!=t.shadow&&t.shadow.color.needUpdate(n)&&(r.shadow=t.shadow.color.getData()),r},t.prototype.setColorData=function(t){e.prototype.setColorData.call(this,t),this._modifyItem(function(e){null!=t.color&&(e.color=oH.createColor(t.color)),null!=t.stroke&&(e.stroke.color=oH.createColor(t.stroke)),null!=t.shadow&&(e.shadow.color=oH.createColor(t.shadow))})},t.prototype.hasColorsToUpdate=function(){var t=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null;return e.prototype.hasColorsToUpdate.call(this)||t.color.needUpdate(n)||null!=t.stroke&&t.stroke.color.needUpdate(n)||null!=t.shadow&&t.shadow.color.needUpdate(n)},t.prototype.isEmpty=function(){return this.item.isEmpty()},t.prototype.isVisible=function(){var t=null==this.item.parentGroupItem||this.item.parentGroupItem.isChildVisible(this.item);return e.prototype.isVisible.call(this)&&t},t.prototype._afterUpdate=function(e){var t;"function"==typeof e&&e(),this._updatedFromServer||null===(t=this.canvas)||void 0===t||t.updateViolationContainerPosition(this),this._updatedFromServer=!0,null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.redrawDesign())},t.prototype._xmlToHtml=function(e){return(new DOMParser).parseFromString("<body>"+e+"</body>","text/html").getElementsByTagName("body")[0]},t.prototype._validateBeforeCallService=function(){return""!==this._getText()},t.prototype._onValidateBeforeCallServiceFailed=function(){this._getSrc()?this._setDefaultTextControlPoints():this._updateEmptyTextControlPoints()},t.prototype._updateEmptyTextControlPoints=function(){var t,n=this,r=this._createDataInstance(this),i=JSON.parse(this._getDataItem());t=i.text,i.text="a";var o=[JSON.stringify(r),i];e.prototype._callService.call(this,"Update"+this.getTypeName(),o,function(e){var r=null;"object"==typeof e&&(r=e.item,e=e.itemHandlerData),null!=r&&(r.text=t,n._applyDataItem(r,e)),n.setData(e);var i=n.canvas;null!=i&&(i.updateSelection(),i.redraw()),n.onSuccessResponse()},function(e){n.onErrorResponse(e)},null)},t.prototype._setDefaultTextControlPoints=function(){var e=this.item.alignment;e===HH.Center?this._controlPoints[0].x+=(this._controlPoints[1].x-this._controlPoints[0].x)/2-this._defaultWidth/2:e===HH.Right&&(this._controlPoints[0].x=this._controlPoints[1].x-this._defaultWidth),this._controlPoints[1].x=this._controlPoints[0].x+this._defaultWidth,this.raiseChanged();var t=this.canvas;null!=t&&(t.updateSelection(),t.redraw()),this.onSuccessResponse()},t.prototype._transformChanged=function(){var t=this;if(e.prototype._transformChanged.call(this),this.isUpdating&&this._callbacks){var n=this.item.transform.clone();this._callbacks.push(function(){t.item.setTransform(n,!0)})}},t.prototype._createImageUrl=function(){var e=this.canvas;return null==e||this.canvas.service.imageLoaderService.hasImageContainerFor(this.currentTextImage.cacheFileId)?null:null!=this.currentTextImage.cacheFileId&&0!==this.currentTextImage.cacheFileId.length||null!=this.currentTextImage.base64Image&&0!==this.currentTextImage.base64Image.length?this.currentTextImage&&this.currentTextImage.base64Image?"data:image/png;base64,"+this.currentTextImage.base64Image:e.handlerUrl+"/txt?f="+encodeURIComponent(this.currentTextImage.cacheFileId):null},t.prototype._updateImageUrl=function(){if(""!==this._getText()&&this.isVisible()){var e=this.canvas;if(null!=e&&e.isInitialized){var t=this._createImageUrl();null==this._imageContainer.source||t!==this._imageContainer.source?null===t?(this._imageContainer.clear(),e.redraw()):this._imageContainer.updateUrl(t):!0===this.isUpdatingAfterResize&&(this.isUpdatingAfterResize=!1,e.redraw())}}},t.prototype.quickUpdate=function(){this._updateImageUrl(),this.isVisible()&&!this._imageContainer.source&&this.canvas&&!this.canvas.service.imageLoaderService.hasImageContainerFor(this.currentTextImage.cacheFileId)&&this.update()},t.prototype._getBoundsMargin=function(){return 2*this._getActualBorderWidth()},t.prototype.drawItemHandler=function(e){if(null!=e&&null!=this.canvas){this._hasVectorMask()&&(e.save(),this._clip(e));var t=this.item,n=this.rectangle,r=this.isEmptyTextPlaceholder()?.5:1;if(AU.fillRectangle(e,n,t.fillColor.preview,t.opacity*r),""!==this._getText()||!0===this._updatedFromServer)try{var i=this.canvas.service.imageLoaderService.getImageContainerFor(this.currentTextImage.cacheFileId);if(null!=i){var o=this.canvas.service.imageLoaderService.getImageContainerRectangleFor(this.currentTextImage.cacheFileId);oW.renderTextImage(this,i,o,e,r)}else oW.renderTextImage(this,this._imageContainer,null,e,r)}catch(a){console.error(a),this.update()}var s=this._getActualBorderWidth();s>0&&(n.width+=s,n.height+=s,AU.drawRectangle(e,n,s,t.borderColor.preview,t.opacity*r)),this._hasVectorMask()&&e.restore()}},t.prototype._createDataInstance=function(e){return new rW(e)},t.prototype._onImageLoaded=function(){this.isUpdatingAfterResize=!1,this._height=this.rectangle.height,null!=this.canvas&&this.canvas.redraw(),this._dispatchReadyEvent()},t.prototype._onResized=function(){return null!=this.canvas&&(this.isUpdatingAfterResize=!0),e.prototype._onResized.call(this)},t.prototype._onCanvasChanged=function(){this.update()},t.prototype._onAddedOnCanvas=function(t,n){e.prototype._onAddedOnCanvas.call(this,t,n),null==this.canvas||this._onCanvasChangedDelegate||(this._onCanvasChangedDelegate=this._onCanvasChanged.bind(this),this.canvas.add_zoomChanged(this._onCanvasChangedDelegate))},t.prototype._onRemovedFromCanvas=function(t){e.prototype._onRemovedFromCanvas.call(this,t),t&&null!=this._onCanvasChangedDelegate&&(t.remove_zoomChanged(this._onCanvasChangedDelegate),delete this._onCanvasChangedDelegate)},t.prototype._endTransform=function(t,n){e.prototype._endTransform.call(this,t,n),t&&n&&this.update()},t.prototype.dispose=function(){this._imageContainer.dispose(),null!=this._onCanvasChangedDelegate&&(null!=this.canvas&&this.canvas.remove_zoomChanged(this._onCanvasChangedDelegate),delete this._onCanvasChangedDelegate),e.prototype.dispose.call(this)},t.typeName="BaseTextItemHandler",t}(tW),lW=function(){this.cacheFileId=null,this.base64Image=null,this.textCropped=null},cW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uW=function(e){function t(t,n){return void 0===n&&(n=null),e.call(this,t,n)||this}return cW(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"center":case"bend":case"warp":this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n),this.item.center=t.center,this.item.bend=t.bend,this.item.warp=t.warp},t.typeName="ArchedTextItemHandler",t}(aW),hW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dW=function(e){function t(t,n){return void 0===n&&(n=null),e.call(this,t,n)||this}return hW(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"isVertical":this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n),this.item.textRectangle=t.textRectangle,this.item.isVertical=t.isVertical},Object.defineProperty(t.prototype,"originalTextRectangle",{get:function(){return this.item.textRectangle},set:function(e){this.item.textRectangle=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalScale",{get:function(){return this.item.verticalScale},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalScale",{get:function(){return this.item.horizontalScale},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVertical",{get:function(){return this.item.isVertical},set:function(e){this.item.isVertical=e},enumerable:!0,configurable:!0}),t.prototype.getTextRectangle=function(){var e=this.getControlCenter(),t=KN.fromRectangleF(this.item.textRectangle);return t.transform(this.item.transform.clone(),e),t.toRectangleF()},t.prototype._updateEmptyTextControlPoints=function(){var e=this.item.textRectangle;this._controlPoints[0].x=e.left,this._controlPoints[0].y=e.top,this._controlPoints[1].x=e.right,this._controlPoints[1].y=e.bottom;var t=this.canvas;null!=t&&t.redraw()},t.prototype._setDefaultTextControlPoints=function(){},t.typeName="AutoScaledTextItemHandler",t}(aW),pW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fW=function(e){function t(t){var n=e.call(this,t)||this;if(n.__type="BarcodeHandlerData",null==t||null==t.canvas)return n;if(t.canvas.viewer.configuration&&t.canvas.viewer.configuration.stubImages&&t.canvas.viewer.configuration.stubImages.barcode){var r=t.canvas.viewer.configuration.stubImages.barcode;n.stubText=r.text,n.stubPostScriptName=r.postScriptName}var i=(null!=t.item.parentPlaceholder?t.item.parentPlaceholder.parentContainer.parentComponent:t.item.parentContainer.parentComponent).printAreas.getItem(0);return n.dpi=t.canvas.viewer.configuration&&t.canvas.viewer.configuration.renderingConfig?t.canvas.viewer.configuration.renderingConfig.getHiResRendering(i).dpi:72,n.size=Math.round(Math.max(i.bounds.width,i.bounds.height)/2),n}return pW(t,e),t.prototype.applyState=function(t,n){n&&(n.beginUpdate(),n.currentFileId=t.currentFileId,n.stubTextImageFileId=t.stubTextImageFileId,n.errorMessage=t.errorMessage),e.prototype.applyState.call(this,t,n)},t}(XU),mW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gW=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r._onCanvasChangedDelegate=null,r._contentType=MU.NotContent,r._parentPlaceholder=null,r._pixelWidth=0,r._pixelHeight=0,r._needToDownloadImage=!1,r._imageContainer=new iW(r._onImageLoaded.bind(r)),r}return mW(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(t,n){var r,i;switch(n){case"maskOpacity":break;case"parentPlaceholder":this.parentPlaceholder=null!=t.parentPlaceholder?null===(i=null===(r=this.canvas)||void 0===r?void 0:r.handlerFactory)||void 0===i?void 0:i.get(t.parentPlaceholder):null}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype.setRectangle=function(t,n){var r,i=this._parentPlaceholder;if(null!=i&&i.item.isCoverMode&&!i.item.isStubContent&&this._contentType!==MU.TopFrame&&this._contentType!==MU.BottomFrame){var o=i.rectangle,s=t.clone(),a=WN(BN(s.angle-o.angle)%180,90),l=this.rectangle;if(null!=l&&null!=i._previousRectangle&&!i.editing){var c,u=o.width/o.height,h=l.width/l.height,d=u>h!=i._previousRectangle.width/i._previousRectangle.height>h;s.width=l.width*(c=u>h?d?o.width/h/i._previousRectangle.height:o.width/i._previousRectangle.width:d?o.height*h/i._previousRectangle.width:o.height/i._previousRectangle.height),s.height=l.height*c,s.center=o.center;var p=s.angle;s.angle=0,(r=new MN(-((i._previousRectangle.centerX-l.centerX+l.width/2)*c-s.width/2),-((i._previousRectangle.centerY-l.centerY+l.height/2)*c-s.height/2))).rotateAt(o.angle-i._previousRectangle.angle),s.centerX=o.centerX+r.x,s.centerY=o.centerY+r.y,s.rotateAt(p,s.center)}var f=a?s.height:s.width,m=a?s.width:s.height;if(f<o.width||m<o.height){var g=Math.max(o.width/f,o.height/m);s.width*=g,s.height*=g}var y=o.angle;o.angle=0;var _=o.bounds,v=s.clone();v.rotateAt(-y,o.center);var b=v.bounds;return(r=new MN(0,0)).x=_.left<b.left?_.left-b.left:0,r.x=_.right>b.right?_.right-b.right:r.x,r.y=_.top<b.top?_.top-b.top:0,r.y=_.bottom>b.bottom?_.bottom-b.bottom:r.y,r.rotate(y),s.centerX+=r.x,s.centerY+=r.y,void e.prototype.setRectangle.call(this,s,n)}e.prototype.setRectangle.call(this,t,n)},t.prototype._setVisible=function(t){e.prototype._setVisible.call(this,t),this.isVisible()&&this.update()},t.prototype.isVisible=function(){return null!=this._parentPlaceholder?this._parentPlaceholder.isVisible():e.prototype.isVisible.call(this)},Object.defineProperty(t.prototype,"ready",{get:function(){return this._imageContainer.isLoaded},enumerable:!0,configurable:!0}),t.prototype._isLoadingImage=function(){return this._imageContainer.isLoading},t.prototype._setIsLoadingImage=function(e){this._imageContainer.isLoading=e},Object.defineProperty(t.prototype,"parentPlaceholder",{get:function(){return this._parentPlaceholder},set:function(e){this._parentPlaceholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentType",{get:function(){return this._contentType},set:function(e){this._contentType=e},enumerable:!0,configurable:!0}),t.prototype._getSrc=function(){var e=this._imageContainer.source;return sj(e)?this._createImageUrl():e},t.prototype._setSrc=function(e){this._imageContainer.source=e},t.prototype._onImageLoaded=function(e,t){null!=this.canvas&&this.canvas.redraw(),this.isLoadingImage=!1,this._dispatchReadyEvent()},t.prototype._createImageUrl=function(){return null},t.prototype._updateImageUrl=function(){if(this.isVisible()){var e=this.canvas;if(null!=e&&e.isInitialized){var t=this._createImageUrl();t!==this._imageContainer.source&&(null==t?(this._imageContainer.clear(),e.redraw()):this._imageContainer.updateUrl(t))}}},t.prototype._onCanvasChanged=function(){this._updateImageUrl()},t.prototype.quickUpdate=function(){this.updateColors(),this._updateImageUrl()},t.prototype._getDrawingFillColor=function(){return this.item.fillColor},t.prototype.drawItemHandler=function(e,t){if(null!=e&&null!=this.canvas){var n=null!=this._parentPlaceholder?this._parentPlaceholder.rectangle:this.rectangle,r=this.rectangle,i=this._getDrawingFillColor(),o=this.isNormalRenderingType||0===i.alpha?i.preview:"rgb(0,0,0)";this._hasVectorMask()&&(e.save(),this._clip(e)),AU.fillRectangle(e,r,o,this.isNormalRenderingType?this.item.opacity:1),this._imageContainer.isLoaded?this._drawImage(e,this.canvas.disableSmoothing):this._imageContainer.isLoading&&this.canvas.drawWaitClock(null!=t?t:e,new MN(n.centerX,n.centerY));var s=this._getActualBorderWidth();s>0&&(r.width+=s,r.height+=s,AU.drawRectangle(e,r,s,this.isNormalRenderingType||0===this.item.borderColor.alpha?this.item.borderColor.preview:"rgb(0,0,0)",this.item.opacity)),this._hasVectorMask()&&e.restore()}},t.prototype._drawMaskedContent=function(e){if(this._drawImage(e,this.canvas.disableSmoothing,this.item.maskOpacity),null!=this._parentPlaceholder){e.globalCompositeOperation="destination-out";var t=this._parentPlaceholder;AU.fillPath(e,t.originalPath,t.getControlCenter(),t.item.transform,"#fff"),e.globalCompositeOperation="source-over"}},t.prototype.updateRectangle=function(e,t,n,r,i,o){null==t&&(t=wV.Fit),null==e&&(e=!1);var s=this.getTransformedRectangle(!1);if(r=null!=r?r:this.bounds.width,i=null!=i?i:this.bounds.height,e){var a=s.location;s.width=s.height*(r/i),s.location=a}else if(null!=this.parentPlaceholder&&(s=this.parentPlaceholder.getTransformedRectangle(!1)),t===wV.Original&&this.item instanceof nV){var l=this.item.getOriginalImageSize();s.width=l.width*(c=null!=o?this.item.source.dpiX/o:1),s.height=l.height*c}else{var c=1;t===wV.Fit?c=Math.min(s.width/r,s.height/i):t===wV.Fill&&(c=Math.max(s.width/r,s.height/i)),s.width=r*c,s.height=i*c}if(null!=n){var u=n.getTransformedRectangle(!1);switch(n.item.contentVerticalAlignment){case vV.Top:s.centerY=u.centerY-(u.height-s.height)/2;break;case vV.Center:s.centerY=u.centerY;break;case vV.Bottom:s.centerY=u.centerY+(u.height-s.height)/2}switch(n.item.contentHorizontalAlignment){case bV.Left:s.centerX=u.centerX-(u.width-s.width)/2;break;case bV.Center:s.centerX=u.centerX;break;case bV.Right:s.centerX=u.centerX+(u.width-s.width)/2}}this.setTransformedRectangle(s)},t.prototype._drawImage=function(e,t,n,r){var i=this.canvas,o=this.isNormalRenderingType?this.item.opacity:1;AU.drawImage(e,null!=r?r:this._imageContainer.image,this.rectangle,BL.screenDpi*i.zoom/72,BL.screenDpi*i.zoom/72,t,null,null!=n?o*n:o)},t.prototype._getBoundsMargin=function(){return 2*this._getActualBorderWidth()},t.prototype._onAddedOnCanvas=function(t,n){if(e.prototype._onAddedOnCanvas.call(this,t,n||null!=this.parentPlaceholder),this._updateImageUrl(),!this._onCanvasChangedDelegate){var r=this.canvas;r&&(this._onCanvasChangedDelegate=this._onCanvasChanged.bind(this),r.add_zoomChanged(this._onCanvasChangedDelegate),this._needToDownloadImage&&this.update())}},t.prototype._onRemovedFromCanvas=function(t){e.prototype._onRemovedFromCanvas.call(this,t),t&&null!=this._onCanvasChangedDelegate&&(t.remove_zoomChanged(this._onCanvasChangedDelegate),delete this._onCanvasChangedDelegate)},t.prototype.dispose=function(){if(this._imageContainer.dispose(),this._onCanvasChangedDelegate){var t=this.canvas;t&&t.remove_zoomChanged(this._onCanvasChangedDelegate),delete this._onCanvasChangedDelegate}e.prototype.dispose.call(this)},t.typeName="ContentItemHandler",t}(tW),yW=function(){function e(){}return e.getImageUrl=function(e,t,n,r,i,o,s,a,l,c,u){if(!Number.isInteger(n)||!Number.isInteger(r))throw new kL('Wrong "'+(Number.isInteger(n)?r:n)+'" type!');var h="/img";!t.endsWith(".svg")||i||BL.IsFirefox()||BL.IsIE()||(h="/svg");var d=e.handlerUrl+h+"?f="+encodeURIComponent(t)+"&w="+encodeURIComponent(n.toString())+"&h="+encodeURIComponent(r.toString());if(null!=e.cmykColorProfileFileId&&(d+="&cmyk="+encodeURIComponent(e.cmykColorProfileFileId)),null!=e.rgbColorProfileFileId&&(d+="&rgb="+encodeURIComponent(e.rgbColorProfileFileId)),null!=e.grayscaleColorProfileFileId&&(d+="&grayscale="+encodeURIComponent(e.grayscaleColorProfileFileId)),null!=i&&i&&(d+="&sq=true"),null!=o&&(o!==Oz.None&&(d+="&effect="+encodeURIComponent(o.toString())),o===Oz.Colorize&&null!=u&&(d+="&colorizeColor="+encodeURIComponent(u.toString()))),null!=s&&s&&(d+="&kp="+encodeURIComponent(s.toString())),null!=a){var p=a.color,f=a.blendMode,m=a.opacity;null!=p&&(d+="&color="+encodeURIComponent(p.toString())),null!=f&&(d+="&obm="+encodeURIComponent(f.toString())),null!=m&&(d+="&oo="+encodeURIComponent(m.toString()))}return null!=l&&parseInt(l.toString())>0&&(d+="&page="+encodeURIComponent(l.toString())),null!=c&&c&&(d+="&alphaMask="+encodeURIComponent(c.toString())),d},e}(),_W=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vW=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.currentFileId=null,r.stubTextImageFileId=null,r.errorMessage=null,r._maxImageSize=4e6,r._stubTextImageContainer=new iW(r._onstubTextImageLoaded.bind(r)),r}return _W(t,e),t.prototype._createDataInstance=function(e){return new fW(e)},Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"barcodeContent":case"barcodeFormat":case"barcodeOptions":case"color":this.currentFileId=null,this.stubTextImageFileId=null,this.errorMessage=null,this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._createImageUrl=function(){var e,t,n=this.canvas;if(null==this.currentFileId||null==n)return null;var r=n.zoom,i=this.rectangle,o=this._maxImageSize/(e=i.width*(r*BL.screenDpi/72))/(t=i.height*(r*BL.screenDpi/72));return o<1&&(e*=o=Math.sqrt(o),t*=o),e=Math.round(e),t=Math.round(t),this._pixelWidth=e,this._pixelHeight=t,yW.getImageUrl(n,this.currentFileId,this._pixelWidth,this._pixelHeight,!1)},t.prototype._createStubTextImageUrl=function(){if(null!=this.stubTextImageFileId)return yW.getImageUrl(this.canvas,this.stubTextImageFileId,this._pixelWidth,this._pixelHeight,!1)},t.prototype.update=function(t,n){if(this.isVisible())if(null==this.currentFileId&&null==this.errorMessage)e.prototype._update.call(this,null,t,n);else{this.quickUpdate();var r=this.canvas;null!=r&&r.updateSelection()}},Object.defineProperty(t.prototype,"ready",{get:function(){return this._imageContainer.isLoaded&&!(this.item.barcodeData.isEmpty&&!this._stubTextImageContainer.isLoaded)},enumerable:!0,configurable:!0}),t.prototype._isLoadingImage=function(){return this._imageContainer.isLoading||!(this.item.barcodeData.isEmpty&&!this._stubTextImageContainer.isLoading)},t.prototype._setIsLoadingImage=function(e){this._imageContainer.isLoading=e,this.item.barcodeData.isEmpty&&(this._stubTextImageContainer.isLoading=e)},t.prototype._updateImageUrl=function(){e.prototype._updateImageUrl.call(this),this._updateStubTextImageUrl()},t.prototype._updateStubTextImageUrl=function(){if(this.isVisible()){var e=this.canvas;if(null!=e&&e.isInitialized){var t=this._createStubTextImageUrl();t!==this._stubTextImageContainer.source&&(null==t?(this._stubTextImageContainer.clear(),e.redraw()):this._stubTextImageContainer.updateUrl(t))}}},t.prototype._onstubTextImageLoaded=function(e,t){this._stubTextImageContainer.isLoading=!1,this._imageContainer.isLoading||(null!=this.canvas&&this.canvas.redraw(),this._dispatchReadyEvent())},t.prototype._onImageLoaded=function(e,t){this._imageContainer.isLoading=!1,this._stubTextImageContainer.isLoading||(null!=this.canvas&&this.canvas.redraw(),this._dispatchReadyEvent())},t.prototype.quickUpdate=function(){this.isVisible()&&this.canvas&&!this.canvas.service.imageLoaderService.hasImageContainerFor(this.currentFileId)&&e.prototype.quickUpdate.call(this)},t.prototype.drawItemHandler=function(e){if(null!=e){var t=null!=this.parentPlaceholder?this.parentPlaceholder.rectangle:this.rectangle,n=this.rectangle;AU.fillRectangle(e,n,this.isNormalRenderingType||0===this.item.fillColor.alpha?this.item.fillColor.preview:"rgba(0,0,0,0)",this.isNormalRenderingType?this.item.opacity:1),this._imageContainer.isLoaded&&this._drawImage(e,this.canvas.disableSmoothing),this._stubTextImageContainer.isLoaded&&this._drawImage(e,this.canvas.disableSmoothing,1,this._stubTextImageContainer.image),(this._imageContainer.isLoading||this._stubTextImageContainer.isLoading)&&this.canvas.drawWaitClock(e,new MN(t.centerX,t.centerY));var r=this._getActualBorderWidth();r>0&&(n.width+=r,n.height+=r,AU.drawRectangle(e,n,r,this.isNormalRenderingType||0===this.item.borderColor.alpha?this.item.borderColor.preview:"rgb(0,0,0)",this.item.opacity))}},t.prototype._onResized=function(){return this.update(),e.prototype._onResized.call(this)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._stubTextImageContainer.dispose()},t.typeName="BarcodeItemHandler",t}(gW),bW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wW=function(e){function t(t){var n=e.call(this,t)||this;return n.__type="CurvedTextHandlerData",null==t||(n.firstUpdateIsComplete=t.firstUpdateIsComplete),n}return bW(t,e),t.prototype.applyState=function(t,n){e.prototype.applyState.call(this,t,n),null!=n&&(n.firstUpdateIsComplete=t.firstUpdateIsComplete)},t}(rW),CW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xW=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r._lastRectangle=null,r._textAutoFitted=null,r._updateEmptyTextControlPoints(),r}return CW(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n),this._textAutoFitted=null,this.item.scheduledFitMode=null,this.item.textRectangle=t.textRectangle,this.item.firstBaselineOffset=t.firstBaselineOffset,this.item.firstBaselineMinOffset=t.firstBaselineMinOffset},t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"textRectangle":case"verticalAlignment":case"isVertical":case"paragraphSettings":case"wrappingMargin":case"scheduledFitMode":case"shrinkMode":case"overflowStrategy":case"wrappingPath":case"firstBaselineOffset":case"firstBaselineMinOffset":this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype.getTextRectangle=function(){var e=this.getControlCenter(),t=KN.fromRectangleF(this.item.textRectangle);return t.transform(this.item.transform.clone(),e),t},Object.defineProperty(t.prototype,"drawingRectangle",{get:function(){return this.canvas.isItemHandlerSelected(this)&&this.canvas.isResizing()&&null!=this.startRectangle?this.startRectangle:this.rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastRectangle",{get:function(){return this._lastRectangle},set:function(e){this._lastRectangle=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAutoFitted",{get:function(){var e;return null==this._textAutoFitted&&(this._textAutoFitted=(e=this.item).overflowStrategy!==jH.Clip&&(e.shrinkMode===NH.Scale||e.shrinkMode===NH.Size)&&(e.originalVerticalScale<e.verticalScale||e.originalHorizontalScale<e.horizontalScale)),this._textAutoFitted},enumerable:!0,configurable:!0}),t.prototype.getTextWrappingPath=function(){return this.item.textWrappingMode!==Bj.None?$N.rotatedRectangle(this.getTextRectangle()):null},t.prototype.drawItemHandler=function(t){e.prototype.drawItemHandler.call(this,t),!0===window.__$abl$&&AU.drawRectangle(t,this.getTextRectangle(),1,"red",1)},t.prototype._updateEmptyTextControlPoints=function(){var e=this.item.textRectangle;this._controlPoints[0].x=e.left,this._controlPoints[0].y=e.top,this._controlPoints[1].x=e.right,this._controlPoints[1].y=e.bottom;var t=this.canvas;null!=t&&t.redraw()},t.prototype._setDefaultTextControlPoints=function(){},t.typeName="BoundedTextItemHandler",t}(aW);!function(e){e.Left="left",e.Right="right",e.Top="top",e.Bottom="bottom",e.Center="center"}(YU||(YU={}));var EW,SW,PW=function(){return(PW=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function TW(e,t,n){return OW(e.left,t.left,n)&&OW(e.top,t.top,n)&&OW(e.width,t.width,n)&&OW(e.height,t.height,n)}function IW(e,t,n){if(void 0===n&&(n=SW.Fit),e.width===t.width&&e.height===t.height)return e;if(n===SW.Original)return PW({},e);if(n===SW.Arbitrary)return PW({},t);var r=n===SW.Fit?Math.min(t.width/e.width,t.height/e.height):Math.max(t.width/e.width,t.height/e.height);return{width:e.width*r,height:e.height*r}}function OW(e,t,n){return null==n&&(n=1e-4),0!==n?Math.abs(e-t)<=n:e===t}function kW(e,t,n){return null!=n&&(e=Math.min(e,n)),null!=t&&(e=Math.max(t,e)),e}function RW(e,t,n){var r,i;switch(t){case YU.Left:r=e.left;break;case YU.Right:r=e.right;break;default:r=e.left+e.width/2}switch(n){case YU.Top:i=e.top;break;case YU.Bottom:i=e.bottom;break;default:i=e.top+e.height/2}return new MN(r,i)}!function(e){e.from=function(e){return{width:e.width,height:e.height}}}(EW||(EW={})),function(e){e[e.Fit=0]="Fit",e[e.Fill=1]="Fill",e[e.Arbitrary=2]="Arbitrary",e[e.Original=3]="Original"}(SW||(SW={}));var AW,MW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DW=function(e){function t(t){var n=e.call(this,t)||this;return n.__type="ImageHandlerData",t&&(n.DI=t.needToDownloadImage,n.SAS=t.takeIntoAccountImageDpi,n.HR=t.sourceImageHorizontalResolution,n.VR=t.sourceImageVerticalResolution),n}return MW(t,e),t.prototype.applyState=function(t,n){n&&(n.beginUpdate(),n.sourceImageHorizontalResolution=t.HR,n.sourceImageVerticalResolution=t.VR,n.needToDownloadImage=t.DI,n.takeIntoAccountImageDpi=t.SAS,e.prototype.applyState.call(this,t,n))},t}(XU),FW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LW=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},BW=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},NW=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r._maxImageSize=4e6,r._imageResizedEvent=new PL,r._qualityChangeContainer=null,r._qualityChangeScaleBar=null,r._qualityChangeInfoBar=null,r.item.source.type===nV.ImageSourceType.Url&&r.loadImage(null,{downloadToServerCache:!0,actualSize:r.item.source.actualSize,saveAspectRatio:r.item.source.saveAspectRatio}),r}return FW(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n);var r=null==this.item.source.id&&null!=this.item.source.url;this.item.source.id=t.source.id,this.item.source.width=t.source.width,this.item.source.height=t.source.height,this.item.source.isVector=t.source.isVector,this.item.source.pageIndex=t.source.pageIndex,this.item.source.url=t.source.url,r&&(this.updateRectangle(!1,null!=this.item.parentPlaceholder?this.item.parentPlaceholder.contentResizeMode:null,this.parentPlaceholder),this.update())},t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"source":this._sourceUrl=null,this.update(),null==this.item.source.id&&null!=this.item.source.url&&this.updateRectangle(!1,null!=this.item.parentPlaceholder?this.item.parentPlaceholder.contentResizeMode:null,this.parentPlaceholder);var r=this.canvas;null!=r&&r.updateFloatingItemToolbar(this);break;case"fillColor":this.item.effect===Oz.Colorize&&this.update();case"effect":case"overlayEffect":this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},Object.defineProperty(t.prototype,"needToDownloadImage",{get:function(){return this._needToDownloadImage},set:function(e){this._needToDownloadImage=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"takeIntoAccountImageDpi",{get:function(){return this._takeIntoAccountImageDpi},set:function(e){this._takeIntoAccountImageDpi=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceImageHorizontalResolution",{get:function(){return this._sourceImageHorizontalResolution},set:function(e){this._sourceImageHorizontalResolution=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceImageVerticalResolution",{get:function(){return this._sourceImageVerticalResolution},set:function(e){this._sourceImageVerticalResolution=e},enumerable:!0,configurable:!0}),t.prototype.loadImage=function(e,t){return void 0===t&&(t={}),LW(this,void 0,void 0,function(){var n=this;return BW(this,function(r){switch(r.label){case 0:return"string"!=typeof e&&this.item.source.type!==nV.ImageSourceType.Url&&console.error("Invalid sourceUrl: "+e),t.downloadToServerCache?(this._needToDownloadImage=!0,this._actualSize=null!=t.actualSize&&t.actualSize,this._saveAspectRatio=null==t.saveAspectRatio||t.saveAspectRatio,this._sourceUrl=e,null==e&&(this._sourceUrl=this.item.source.url),[4,new Promise(function(e){return n.update(null,e)})]):[3,2];case 1:return r.sent(),[3,3];case 2:this._needToDownloadImage=!1,this._setSrc(e),r.label=3;case 3:return[2,this.item.source.id]}})})},t.prototype.loadImageFromRemoteUrl=function(e,t){return LW(this,void 0,void 0,function(){var n,r,i;return BW(this,function(o){switch(o.label){case 0:return i=(r=JSON).parse,[4,$U({url:nj(e,"/api/ImagePicker/GetWebImageMeta"),type:jU.post,headers:[HU.json],data:JSON.stringify({url:t})})];case 1:return n=i.apply(r,[o.sent().value]),this.item.source.id=n.storageId,this.item.source.width=n.width,this.item.source.height=n.height,this.item.source.isVector=n.isVector,this.item.name=n.name,this.item.sourceRectangle.width=this.item.source.width,this.item.sourceRectangle.height=this.item.source.height,[2]}})})},t.prototype.loadImageFromImagePicker=function(e,t,n){var r=this;return $U({url:nj(e,"api/imagepicker/GetSourceImageMetadata"),type:jU.post,headers:[HU.json],data:JSON.stringify(t)}).then(function(e){var t=new lV(e.value);r.item.source.setIdWithOrigin(t.storageId,t.origin),r.item.source.width=t.size.width,r.item.source.height=t.size.height,r.name=t.name,r.item.source.isVector=t.isVector,r.item.source.pageIndex=t.pageIndex,r.item.sourceRectangle=n,r.updateRectangle()})},t.prototype.showEditButton=function(){return e.prototype.showEditToolbarButton.call(this)&&!this.item.source.isVector},t.prototype.update=function(e,t){var n=this;if(null!=this._sourceUrl&&null!=this._sourceUrl)this._update([this._actualSize,this._saveAspectRatio,this._sourceUrl],e,t),null==this.item.source.id&&null!=this.item.source.url&&this.updateRectangle(!1,null!=this.item.parentPlaceholder?this.item.parentPlaceholder.contentResizeMode:null,this.parentPlaceholder);else if(this.item.source.type===nV.ImageSourceType.Url)this.loadImage(null,{downloadToServerCache:!0,actualSize:this.item.source.actualSize,saveAspectRatio:this.item.source.saveAspectRatio}).then(function(){null!=n.canvas&&n.canvas.updateSelection()});else{this.quickUpdate();var r=this.canvas;null!=r&&r.updateSelection()}},t.prototype._createDataInstance=function(e){return new DW(e)},t.prototype._updateImageUrl=function(){var t=this,n=this.canvas;if(null!=n&&this.isVisible()){if(null==this.item.source.id||null!=this.item.source.width&&null!=this.item.source.height)return void e.prototype._updateImageUrl.call(this);n.service.GetImageSize(this.item.source.id,this.item.source.pageIndex,function(n){if(t.item.source.width=n.width,t.item.source.height=n.height,t._saveAspectRatio){var r=t.item.source.width/t.item.source.height;t.width<t.height?t.height=t.width/r:t.width=t.height*r}e.prototype._updateImageUrl.call(t)},function(e){window.console&&(console.error("Unable GetimageSize of image with id "+t.item.source.id),console.error(e))})}},t.prototype._createImageUrl=function(){var e=this.item.source.id;if(null==e)return null;var t,n,r=this.canvas;if(null==r)return null;var i=r.zoom,o=this.rectangle;t=o.width*(i*BL.screenDpi/72),n=o.height*(i*BL.screenDpi/72),this.item.source.isVector||(t=Math.min(t,this.item.source.width),n=Math.min(n,this.item.source.height));var s=this._maxImageSize/t/n;return s<1&&(t*=s=Math.sqrt(s),n*=s),t=Math.max(1,Math.round(t)),n=Math.max(1,Math.round(n)),this._pixelWidth=t,this._pixelHeight=n,yW.getImageUrl(r,e,t,n,!1,this.item.effect,!1,this.item.overlayEffect,this.item.source.pageIndex,!this.isNormalRenderingType,this.item.fillColor)},t.prototype.addImageResized=function(e){this._imageResizedEvent.add(e)},t.prototype.removeImageResized=function(e){this._imageResizedEvent.remove(e)},t.prototype._onResized=function(){var t=this.rectangle;return this._imageResizedEvent.notify(this,{Width:t.width,Height:t.height}),this.update(),e.prototype._onResized.call(this)},t.prototype._getDrawingFillColor=function(){return this.item.effect===Oz.Colorize?oH.createColor("rgba(0,0,0,0)"):this.item.fillColor},Object.defineProperty(t.prototype,"qualityChangeScaleBar",{get:function(){return this._qualityChangeScaleBar},set:function(e){this._qualityChangeScaleBar=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"qualityChangeInfoBar",{get:function(){return this._qualityChangeInfoBar},set:function(e){this._qualityChangeInfoBar=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"qualityChangeContainer",{get:function(){return this._qualityChangeContainer},set:function(e){this._qualityChangeContainer=e},enumerable:!0,configurable:!0}),t.prototype.setQualityChangeScaleBarWidth=function(e){null!=this._qualityChangeScaleBar&&(e=Math.max(0,e),e=Math.min(100,e),this._qualityChangeScaleBar.style.width=e+"%")},t.prototype.setQualityChangeInfoBarText=function(e){null!=this._qualityChangeInfoBar&&(this._qualityChangeInfoBar.innerText=e)},Object.defineProperty(t.prototype,"isQualityChangeBarEmpty",{get:function(){return null==this._qualityChangeScaleBar||null==this.canvas||this._qualityChangeScaleBar.className===this.canvas.qualityChangeScaleBarCssClass},enumerable:!0,configurable:!0}),t.prototype.setBadToWarningChangeScaleBarClass=function(){var e=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=e){var t=this._qualityChangeScaleBar.getAttribute("class"),n=e.qualityBadToWarningChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=e.qualityWarningToGoodChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var i=e.qualityBadToGoodChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,!1);var o=e.qualityNoAnimationChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,this._qualityChangeScaleBar.getAttribute("class")!==t),this.canvas.updateViolationContainer(this)}},t.prototype.setWarningToGoodChangeScaleBarClass=function(){var e=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=e){var t=this._qualityChangeScaleBar.getAttribute("class"),n=e.qualityWarningToGoodChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=e.qualityBadToWarningChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var i=e.qualityBadToGoodChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,!1);var o=e.qualityNoAnimationChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,this._qualityChangeScaleBar.getAttribute("class")!==t),this.canvas.updateViolationContainer(this)}},t.prototype.setBadToGoodChangeScaleBarClass=function(){var e=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=e){var t=this._qualityChangeScaleBar.getAttribute("class"),n=e.qualityBadToGoodChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=e.qualityBadToWarningChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var i=e.qualityWarningToGoodChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,!1);var o=e.qualityNoAnimationChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,this._qualityChangeScaleBar.getAttribute("class")!==t),this.canvas.updateViolationContainer(this)}},t.prototype.updateRectangle=function(t,n,r,i){e.prototype.updateRectangle.call(this,t,n,r,this.item.source.width,this.item.source.height,i)},t.typeName="ImageItemHandler",t}(gW),jW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HW=function(e){function t(t,n){return void 0===n&&(n=null),e.call(this,t,n)||this}return jW(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n),this.item.baselineLocation=t.baselineLocation},t.prototype._onItemPropertyChanged=function(t,n){var r=this;switch(n){case"baselineLocation":this.update();break;case"alignment":var i=this.rectangle.location,o=this.canvas.history;null!=o&&o.pause(),this.update(null,function(){var e=r.rectangle.location;r.item.transform.move(i.x-e.x,i.y-e.y),null!=o&&o.resume()})}"alignment"!==n&&e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._createItemHandlerPermissions=function(){var t=e.prototype._createItemHandlerPermissions.call(this);return t.allowArbitraryResize=!1,t},t.prototype._getBaselineLocation=function(){var e=this.getControlCenter(),t=this.item.baselineLocation.clone();return t.transform(this.item.transform.clone(),e),t},t.prototype.drawItemHandler=function(t){if(e.prototype.drawItemHandler.call(this,t),!0===window.__$abl$){var n=this._getBaselineLocation(),r=new KN(n.x,n.y,6,6,0);AU.fillRectangle(t,r,"red")}},t.prototype._onResized=function(){if(null!=this.canvas){var t=this.rectangle.height/this._height,n=parseFloat((this.item.font.size*t).toFixed(1)),r=parseFloat((this.item.leading*t).toFixed(1)),i=this.canvas,o=i.minFontSize;n="number"==typeof o?Math.max(n,o):n;var s=i.maxFontSize;if(n="number"==typeof s?Math.min(n,s):n,0!==r){var a=i.minLeading;r="number"==typeof a?Math.max(r,a):r;var l=i.maxLeading;r="number"==typeof l?Math.min(r,l):r}return WN(n,this.item.font.size,.01)&&WN(r,this.item.leading,.01)?(null!=this._startRectangle?(this.setRectangle(this._startRectangle),i.updateSelection(),delete this._startRectangle):this.update(null,null),!1):e.prototype._onResized.call(this)}},t.typeName="PlainTextItemHandler",t}(aW),zW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),VW=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r._lastRectangle=null,r._lastRectangle=null,r}return zW(t,e),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"boundingPaths":case"wrappingPath":case"wrappingMargin":case"paragraphSettings":case"isVertical":case"firstBaselineOffset":case"firstBaselineMinOffset":this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n),this.item.boundingPaths=t.boundingPaths,this.item.wrappingMargin=t.wrappingMargin,this.item.characterLimit=t.characterLimit,this.item.paragraphSettings=t.paragraphSettings,this.item.isVertical=t.isVertical,this.item.firstBaselineOffset=t.firstBaselineOffset,this.item.firstBaselineMinOffset=t.firstBaselineMinOffset},Object.defineProperty(t.prototype,"boundingPaths",{get:function(){var e=[],t=this.getControlCenter(),n=this.item.transform.clone();return this.originalBoundingPaths.forEach(function(r){var i=r.clone();i.transform(n,t),e.push(i)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalBoundingPaths",{get:function(){return this.item.boundingPaths},set:function(e){this.item.boundingPaths=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastRectangle",{get:function(){return this._lastRectangle},set:function(e){this._lastRectangle=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrappingMargin",{get:function(){return this.item.wrappingMargin},set:function(e){this.item.wrappingMargin=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paragraphSettings",{get:function(){return this.item.paragraphSettings},set:function(e){e instanceof dz||(e=new dz(e)),this.item.paragraphSettings=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVertical",{get:function(){return this.item.isVertical},set:function(e){this.item.isVertical=e},enumerable:!0,configurable:!0}),t.prototype.drawItemHandler=function(t){if(e.prototype.drawItemHandler.call(this,t),!0===window.__$abl$){var n=this.getControlCenter(),r=new YN;this.boundingPaths.forEach(function(e){AU.drawPath(t,e,n,r,1,"red",1)})}},t.prototype.getBoundingPathsBounds=function(){return e=this,void 0,n=function(){var e,t,n,r=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(i){switch(i.label){case 0:return[4,Promise.all(this.item.boundingPaths.map(function(e){return zU.getBounds(e,r.canvas.textWhizz,r.canvas.service)}))];case 1:return e=i.sent(),t=FN.getOverallBounds(e),(n=KN.fromRectangleF(t)).transform(this.item.transform.clone(),this.getControlCenter()),[2,n.toRectangleF()]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},Object.defineProperty(t.prototype,"drawingRectangle",{get:function(){return this.canvas.isItemHandlerSelected(this)&&this.canvas.isResizing()&&null!=this.startRectangle?this.startRectangle:this.rectangle},enumerable:!0,configurable:!0}),t.prototype._setDefaultTextControlPoints=function(){},t.typeName="PathBoundedTextItemHandler",t}(aW),UW=function(){function e(e){var t=e.map(function(e){return[e.typeName,e]});this._dict=new Map(t)}return e.prototype.create=function(e){var t=this._dict.get(e);if(null!=t)return new t;throw new OL("Unknown vo type "+e)},e}(),WW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XW=function(e){function t(){return e.call(this,[JU,tW,NW,YW,HW,VW,xW])||this}return WW(t,e),t}(UW),GW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qW=function(e){function t(t){var n=this,r=t._editing;if(r&&(t._editing=!1),n=e.call(this,t)||this,t._editing=r,n.__type="PlaceholderHandlerData",t){n.CT=t.isEmptyContent()?null:t.getTypeName();var i=t.topFrames;if(null!=i){n.TFCT=[],n.TFCD=[];for(var o=0;o<i.length;o++)n.TFCD.push(i[o].getData()),n.TFCT.push(i[o].getTypeName())}var s=t.bottomFrames;if(null!=s)for(n.BFCT=[],n.BFCD=[],o=0;o<s.length;o++)n.BFCD.push(s[o].getData()),n.BFCT.push(s[o].getTypeName());n.SMC=t.showMaskedContent}return n}return GW(t,e),t.prototype.applyState=function(t,n){if(n){if(n.beginUpdate(),null!=t.TFCD&&0!==t.TFCD.length){for(var r=[],i=0;i<t.TFCD.length;i++)if(null!=t.TFCT[i]){var o=(new XW).create(t.TFCT[i]);o.setData(t.TFCD[i]),r.push(o)}n.topFrames=r}if(null!=t.BFCD&&0!==t.BFCD.length){var s=[];for(i=0;i<t.BFCD.length;i++)if(null!=t.BFCT[i]){var a=(new XW).create(t.BFCT[i]);a.setData(t.BFCD[i]),s.push(a)}n.bottomFrames=s}n.showMaskedContent=t.SMC,e.prototype.applyState.call(this,t,n)}},t}(XU),$W=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),YW=function(e){function t(n,r){void 0===r&&(r=null);var i=e.call(this,t._getItemPath(n),n,r)||this;return i._content=null,i._topFrames=[],i._bottomFrames=[],i._editing=!1,i._showMaskedContent=!0,i._isContentUpdating=!1,i._previousRectangle=null,i._placeholderButtonGroup=null,i._editButtonGroup=null,i._doneButtonGroup=null,i._selectButton=null,i._doneButton=null,i._handleButton=null,i._qualityChangeContainer=null,i._qualityChangeScaleBar=null,i._qualityChangeInfoBar=null,i._forceQualityChangeInfoBar=!1,i._emptyPlaceholderBorderColor=new Kj({r:204,g:204,b:204}),i._emptyPlaceholderBorderWidth=1,i._selectButtonClickEvent=new PL,i._selectButtonClickHandler=i._onSelectButtonClick.bind(i),i}return $W(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t._getItemPath=function(e){return null==e?null:null!=e.sourcePath?e.sourcePath:null!=e.sourceRectangle?$N.rectangle(e.sourceRectangle.left,e.sourceRectangle.top,e.sourceRectangle.width,e.sourceRectangle.height):null},t.prototype._onItemPropertyChanged=function(t,n){var r,i=this;switch(n){case"content":this.content=null!=t.content&&null!=this.canvas?this.canvas.handlerFactory.get(t.content):null,this.update();break;case"topFrames":null!=this.canvas&&(this.topFrames=t.topFrames.map(function(e){return i.canvas.handlerFactory.get(e)})),this.update();break;case"bottomFrames":null!=this.canvas&&(this.bottomFrames=t.bottomFrames.map(function(e){return i.canvas.handlerFactory.get(e)})),this.update();break;case"locked":null===(r=this.canvas)||void 0===r||r.updatePlaceholderButtonGroup(this);break;case"isStubContent":this._reloadPlaceholderButtons();break;case"isCoverMode":null!=this._content&&this.item.isCoverMode&&this._content.setRectangle(this._content.rectangle);break;case"contentOverlayEffect":this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._onItemVisibilityChanged=function(){var t;e.prototype._onItemVisibilityChanged.call(this),null===(t=this.canvas)||void 0===t||t.updatePlaceholderButtonGroup(this)},t.prototype._setVisible=function(t){if(this.visible!==t){e.prototype._setVisible.call(this,t),null!=this._content&&(this._content.visible=t);var n=this.canvas;null!=n&&n.updatePlaceholderButtonGroup(this)}},t.prototype.quickUpdate=function(){this.isVisible()&&this.update(),null!=this.canvas&&this.canvas.updatePlaceholderButtonGroup(this)},Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(e){var t=this.canvas;if(null==t||this.isStubOrEmpty()||t.removeViolationContainer(this._content),this._content=e,null!=this._content&&(this._content.layer=this.layer,this._content.parentPlaceholder=this,this._content.contentType=MU.PlaceholderContent),null!=t){if(this._reloadPlaceholderButtons(),null==this._content)return;this._content.canvas=t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topFrames",{get:function(){return this._topFrames},set:function(e){var t=this;this._topFrames=e,this._updateTopFrames(function(e){e.contentType=MU.TopFrame,e.layer=t.layer,e.parentPlaceholder=t,e.canvas=t.canvas})},enumerable:!0,configurable:!0}),t.prototype.getTopFrame=function(e){return null!=this._topFrames?this._topFrames[e]:null},t.prototype.setTopFrame=function(e,t){t._contentType=MU.TopFrame,t._layer=this.layer,t._parentPlaceholder=this,t.canvas=this.canvas,this._topFrames[e]=t},Object.defineProperty(t.prototype,"bottomFrames",{get:function(){return this._bottomFrames},set:function(e){var t=this;this._bottomFrames=e,this._updateBottomFrames(function(e){e.contentType=MU.BottomFrame,e.layer=t.layer,e.parentPlaceholder=t,e.canvas=t.canvas})},enumerable:!0,configurable:!0}),t.prototype.getBottomFrame=function(e){return null!=this._bottomFrames?this._bottomFrames[e]:null},t.prototype.setBottomFrame=function(e,t){t._contentType=MU.BottomFrame,t._layer=this.layer,t._parentPlaceholder=this,t.canvas=this.canvas,this._bottomFrames[e]=t},t.prototype.isEmptyContent=function(){return null==this._content},t.prototype._reloadPlaceholderButtons=function(){var e=this.canvas;null!=e&&(e.removePlaceholderButtonGroup(this),e.addPlaceholderButtonGroup(this),this.isStubOrEmpty()?e.removeViolationContainer(this._content):e.addViolationContainer(this._content))},t.prototype.isStubOrEmpty=function(){return this.item.isStubContent||this.isEmptyContent()},Object.defineProperty(t.prototype,"editing",{get:function(){return!this.isStubOrEmpty()&&this._editing},set:function(e){if(this._editing!==e){if(e&&!this.getPermissions().allowEditContent&&this.isStubOrEmpty())return;this._editing=e,this.raiseChanged();var t=this.canvas;null!=t&&(t.updateSelection(),t.updatePlaceholderButtonGroup(this),t.updateFloatingItemToolbar(this),t.redraw())}},enumerable:!0,configurable:!0}),t.prototype.isCoverMode=function(){return this.item.isCoverMode},t.prototype._createItemHandlerPermissions=function(){var t=e.prototype._createItemHandlerPermissions.call(this);return t.allowEditContent=this.item.placeholderPermissions.allowEditContent,t.showSelectButton=this.item.placeholderPermissions.showSelectButton,t.showHandleButton=this.item.placeholderPermissions.showHandleButton,t},t.prototype.showEditButton=function(){var t=e.prototype.showEditToolbarButton,n=!!this.isStubOrEmpty()||!this.item.imageContent.source.isVector;return t&&n},t.prototype.getPermissions=function(t){if(!this.editing||null!=t&&t)return e.prototype.getPermissions.call(this);if(!this.isEmptyContent()){var n=this._content.getPermissions().clone();return n.allowDelete=!1,n}return new OU({},!1)},Object.defineProperty(t.prototype,"showMaskedContent",{get:function(){return this._showMaskedContent},set:function(e){this._showMaskedContent=e},enumerable:!0,configurable:!0}),t.prototype.setRectangle=function(t,n,r){!this.editing||r?e.prototype.setRectangle.call(this,t,n):this._content.setRectangle(t,n)},t.prototype._createDataInstance=function(e){return new qW(e)},t.prototype.drawItemHandler=function(t){if(null!=t){var n=function(e){e.drawItemHandler(t)},r=this.editing&&this.showMaskedContent;r||this._updateBottomFrames(n);var i=AU,o=this.originalPath,s=this.getControlCenter(),a=this.item.transform;if(this.isEmptyContent())e.prototype.drawItemHandler.call(this,t),WN(0,this.item.borderWidth)&&i.drawPath(t,o,s,a,this._emptyPlaceholderBorderWidth,this._emptyPlaceholderBorderColor,1);else{r&&this._content._drawMaskedContent(t);var l=this.isNormalRenderingType?this.item.opacity:1;t.save();var c=null;null!=this.item.mask&&null!=this.item.mask.vectorMask?(c=this._getTransformedClippingPath(),o=this.item.mask.vectorMask):c=this._getTransformedPath(),null!=c&&i.clipPath(t,c),null!=o&&i.fillPath(t,o,s,a,this.item.fillColor.preview,l),this._content.drawItemHandler(t),this.canvas.dndHandler.isDragSource(this)&&(t.globalCompositeOperation="destination-out",i.fillRectangle(t,this.rectangle,new Kj({r:0,g:0,b:0}),.3),t.globalCompositeOperation="source-over"),t.restore(),i.drawPath(t,o,s,a,this._getActualBorderWidth(),this.item.borderColor.preview,l)}if(r){if(t.globalCompositeOperation="destination-over",null!=this._bottomFrames)for(var u=this._bottomFrames.length-1;u>=0;u--)n(this._bottomFrames[u]);t.globalCompositeOperation="source-over"}this.canvas.dndHandler.isDragTarget(this)&&this.isNormalRenderingType&&i.fillRectangle(t,this.rectangle,new Kj({r:0,g:0,b:0}),.5),this._updateTopFrames(n)}},t.prototype.getSelectionRectangle=function(){return this.editing?this._content.getSelectionRectangle():e.prototype.getSelectionRectangle.call(this)},t.prototype._getHighlightRectangle=function(){return this.editing?this.rectangle:e.prototype._getHighlightRectangle.call(this)},t.prototype.getBorderMargin=function(){return this.editing?this._content.getBorderMargin():e.prototype.getBorderMargin.call(this)},t.prototype.update=function(){this.updateColors(),this.updateContentAndFrames(function(e){e.update()}),null!=this.canvas&&this.canvas.updatePlaceholderButtonGroup(this)},t.prototype.addSelectButtonClick=function(e){this._selectButtonClickEvent.add(e)},t.prototype.removeSelectButtonClick=function(e){this._selectButtonClickEvent.remove(e)},t.prototype._onSelectButtonClick=function(){this._selectButtonClickEvent.notify(this)},t.prototype.getChangeContentButtonClickEvent=function(){return this._selectButtonClickEvent},t.prototype._onAddedOnCanvas=function(t){var n=this;e.prototype._onAddedOnCanvas.call(this,t),this.updateContentAndFrames(function(e){e.layer=n.layer,e.parentPlaceholder=n,e.canvas=t}),null!=t&&null==this.placeholderButtonGroup&&t.addPlaceholderButtonGroup(this),null!=this.content&&(this.content.canvas=t)},t.prototype._onRemovedFromCanvas=function(t){e.prototype._onRemovedFromCanvas.call(this,t),this.updateContentAndFrames(function(e){e._onRemovedFromCanvas(t)}),null!=t&&t.removePlaceholderButtonGroup(this)},t.prototype._onTransformRectangle=function(t,n,r){if(this._previousRectangle=this.rectangle,e.prototype._onTransformRectangle.call(this,t,n,r),!this.isEmptyContent()&&null!=this.content.startRectangle)if(this.item.isStubContent&&this.item.fixedStubContentSize&&!this.editing){var i=n.clone();i.Width=t.Width,i.Height=t.Height,this.content._transformRectangle(t,i)}else this.content._transformRectangle(t,n);this.editing||this._updateFrames(function(e){null!=e.startRectangle&&e._transformRectangle(t,n)}),this._previousRectangle=null;var o=this.canvas;null!=o&&o.updatePlaceholderButtonGroupPosition(this)},t.prototype.startTransform=function(t){e.prototype.startTransform.call(this,t),this.editing&&(this._startRectangle=this._content.rectangle),this.updateContentAndFrames(function(e){e._startRectangle=e.rectangle})},t.prototype.endTransform=function(e,t){this._endTransform(e,t)},t.prototype._endTransform=function(e,t,n){void 0===n&&(n=!1),e&&(t||null!=this._startRectangle)&&(this.updateContentAndFrames(function(n){return n._endTransform(e,t,!0)}),n||this._itemPropertyChangedEvent.notify(this,"transform")),e&&t||(delete this._startRectangle,this.updateContentAndFrames(function(e){delete e._startRectangle})),null!=this.canvas&&(this.canvas.updateFloatingItemToolbar(this),this.canvas.updateViolationContainer(this,!0))},t.prototype._transformChanged=function(){e.prototype._transformChanged.call(this);var t=this.canvas;null!=t&&t.updatePlaceholderButtonGroupPosition(this)},t.prototype._onResized=function(){return this.updateContentAndFrames(function(e){e._onResized()}),e.prototype._onResized.call(this)},t.prototype.showSelectButton=function(){return this.isStubOrEmpty()&&this.getPermissions().showSelectButton},t.prototype.showSelectToolbarButton=function(){return this._permissions.showSelectToolbarButton},t.prototype.showHandleButton=function(){return!this.isStubOrEmpty()&&this.getPermissions().allowEditContent&&this.getPermissions().showHandleButton&&!this._editing},t.prototype.onHandleButtonMouseDown=function(){this._isContentUpdating=!0,this.editing=!0},t.prototype.onPlaceholderButtonMouseUp=function(){this._isContentUpdating=!1,this.canvas.updatePlaceholderButtonGroup(this)},t.prototype.onDoneButtonClick=function(){var e=this.canvas;null!=e&&(e.setSelectedItemHandlers([this]),this.editing=!1)},t.prototype.setContentUpdating=function(e){this._isContentUpdating=e},t.prototype.isContentUpdating=function(){return this._isContentUpdating},t.prototype._updateFrames=function(e){this._updateTopFrames(e),this._updateBottomFrames(e)},t.prototype._updateTopFrames=function(e,t){if(null!=this._topFrames)for(var n=0;n<this._topFrames.length;n++)e(this._topFrames[n],null!=t?t[n]:null)},t.prototype._updateBottomFrames=function(e,t){if(null!=this._bottomFrames)for(var n=0;n<this._bottomFrames.length;n++)e(this._bottomFrames[n],null!=t?t[n]:null)},t.prototype._updateContent=function(e){this.isEmptyContent()||e(this._content)},t.prototype.updateContentAndFrames=function(e){this._updateContent(e),this._updateFrames(e)},t.prototype.getBoundsIncludingFrames=function(){var e=this.bounds;return this._updateFrames(function(t){e=FN.union(e,t.bounds)}),e},t.prototype.getRectangleIncludingFrames=function(){var e=this.rectangle;return this._updateFrames(function(t){e=KN.union(t.rectangle,e)}),e},Object.defineProperty(t.prototype,"qualityChangeScaleBar",{get:function(){return this._qualityChangeScaleBar},set:function(e){this._qualityChangeScaleBar=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"qualityChangeInfoBar",{get:function(){return this._qualityChangeInfoBar},set:function(e){this._qualityChangeInfoBar=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"qualityChangeContainer",{get:function(){return this._qualityChangeContainer},set:function(e){this._qualityChangeContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forceQualityChangeInfoBar",{get:function(){return this._forceQualityChangeInfoBar},set:function(e){this._forceQualityChangeInfoBar=e;var t=this.canvas;null!=t&&t.updateViolationContainer(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholderButtonGroup",{get:function(){return this._placeholderButtonGroup},set:function(e){this._placeholderButtonGroup=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"doneButtonGroup",{get:function(){return this._doneButtonGroup},set:function(e){this._doneButtonGroup=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectButton",{get:function(){return this._selectButton},set:function(e){this._selectButton=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"doneButton",{get:function(){return this._doneButton},set:function(e){this._doneButton=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleButton",{get:function(){return this._handleButton},set:function(e){this._handleButton=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectButtonClickHandler",{get:function(){return this._selectButtonClickHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editButtonGroup",{get:function(){return this._editButtonGroup},set:function(e){this._editButtonGroup=e},enumerable:!0,configurable:!0}),t.prototype.setQualityChangeScaleBarWidth=function(e){null!=this._qualityChangeScaleBar&&(e=Math.max(0,e),e=Math.min(100,e),this._qualityChangeScaleBar.style.width=e+"%")},t.prototype.setQualityChangeInfoBarText=function(e){null!=this._qualityChangeInfoBar&&(this._qualityChangeInfoBar.innerText=e)},Object.defineProperty(t.prototype,"isQualityChangeBarEmpty",{get:function(){return null==this._qualityChangeScaleBar||null==this.canvas||this._qualityChangeScaleBar.className===this.canvas.qualityChangeScaleBarCssClass},enumerable:!0,configurable:!0}),t.prototype.setBadToWarningChangeScaleBarClass=function(){var e=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=e){var t=this._qualityChangeScaleBar.getAttribute("class"),n=e.qualityBadToWarningChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=e.qualityWarningToGoodChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var i=e.qualityBadToGoodChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,!1);var o=e.qualityNoAnimationChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,this._qualityChangeScaleBar.getAttribute("class")!==t),this.canvas.updateViolationContainer(this)}},t.prototype.setWarningToGoodChangeScaleBarClass=function(){var e=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=e){var t=this._qualityChangeScaleBar.getAttribute("class"),n=e.qualityWarningToGoodChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=e.qualityBadToWarningChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var i=e.qualityBadToGoodChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,!1);var o=e.qualityNoAnimationChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,this._qualityChangeScaleBar.getAttribute("class")!==t),this.canvas.updateViolationContainer(this)}},t.prototype.setBadToGoodChangeScaleBarClass=function(){var e=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=e){var t=this._qualityChangeScaleBar.getAttribute("class"),n=e.qualityBadToGoodChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=e.qualityBadToWarningChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var i=e.qualityWarningToGoodChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,!1);var o=e.qualityNoAnimationChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,this._qualityChangeScaleBar.getAttribute("class")!==t),this.canvas.updateViolationContainer(this)}},t.prototype.rotateContentLeft=function(){this._rotateContent(-90)},t.prototype.rotateContentRight=function(){this._rotateContent(90)},t.prototype._rotateContent=function(e){if(!this.isStubOrEmpty()){var t=this.content.getTransformedRectangle(!1);t.angle=BN((t.angle+e)%360),this.content.setTransformedRectangle(t),this.canvas.redraw()}},t.prototype.getContentScale=function(){if(this.isStubOrEmpty())return null;var e=this.getTransformedRectangle(!1),t=this.content.getTransformedRectangle(!1),n=90===BN(e.angle-t.angle)||270===BN(e.angle-t.angle),r=n?t.height/e.width:t.width/e.width,i=n?t.width/e.height:t.height/e.height;return this.item.contentResizeMode===wV.Fit?100*Math.max(r,i):100*Math.min(r,i)},t.prototype.setContentScale=function(e){if(!this.isStubOrEmpty()){var t=this.content.getTransformedRectangle(!1),n=e/this.getContentScale();this.content.setTransformedRectangle(new KN(t.centerX,t.centerY,t.width*n,t.height*n,t.angle)),this.raiseChanging(this.item),this.canvas.redraw()}},t.prototype.resetContent=function(){if(!this.isStubOrEmpty()){var e=this.getTransformedRectangle(!1),t=this.content.getTransformedRectangle(!1),n=100/this.getContentScale(),r=90===BN(e.angle-t.angle)||270===BN(e.angle-t.angle),i=this.content.item,o=r?t.height/t.width:t.width/t.height,s=i.ratioWidthToHeight||i.sourceRectangle.width/i.sourceRectangle.height,a=o<s?n*(s/o):n,l=o>s?n*(o/s):n,c=r?t.height*a:t.width*a,u=r?t.width*l:t.height*l,h=this.item.contentResizeMode===wV.Fit?Math.min(e.width/c,e.height/u):Math.max(e.width/c,e.height/u);this.content.setTransformedRectangle(new KN(e.centerX,e.centerY,c*h,u*h,e.angle)),this.content.item.getItemChangedEvent().notify(),this.canvas.redraw()}},t.prototype.transformByMatrix=function(e){this.setRectangle(this.rectangle.transformByMatrix(e),!1,!0),1===e.scaleX&&1===e.scaleY||this._onResized(),this._transformChanged(),null!=this.canvas&&this.canvas.updateSelection()},t.prototype.getSelectToolbarButtonClickEvent=function(){return this._selectButtonClickEvent},t.typeName="PlaceholderItemHandler",t}(JU),KW=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ZW=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(QW(arguments[t]));return e},JW=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eX=function(e){function t(t,n,r){void 0===r&&(r=null);var i=e.call(this,null,null,null,null,t,r)||this;return i._itemHandlers=new Ij,i._onChildItemHandlerChanging=function(e){return i.raiseChanging(i.item)},Array.isArray(n)&&(i.itemHandlers=new Ij(n)),i.item.items.add_itemAdded(i._onItemAdded.bind(i)),i.item.items.add_itemRemoved(i._onItemRemoved.bind(i)),i._subscribeItemHandlers(),i}return KW(t,e),t.prototype._unsubscribeItemHandlers=function(){var e=this;null!=this.itemHandlers&&(this.itemHandlers.remove_itemAdded(this._onItemHandlerAdded.bind(this)),this.itemHandlers.remove_itemRemoved(this._onItemHandlerRemoved.bind(this)),this.itemHandlers.forEach(function(t){return t.getChangingEvent().remove(e._onChildItemHandlerChanging)}))},t.prototype._subscribeItemHandlers=function(){var e=this;null!=this.itemHandlers&&(this.itemHandlers.add_itemAdded(this._onItemHandlerAdded.bind(this)),this.itemHandlers.add_itemRemoved(this._onItemHandlerRemoved.bind(this)),this.itemHandlers.forEach(function(t){return t.getChangingEvent().add(e._onChildItemHandlerChanging)}))},t.prototype.setItemHandlers=function(e){this._unsubscribeItemHandlers(),Array.isArray(e)&&(this.itemHandlers=new Ij(e)),this._subscribeItemEvents()},Object.defineProperty(t.prototype,"itemHandlers",{get:function(){return this._itemHandlers},set:function(e){if(null==e)throw new Error("ItemHandlers can't be null");this._itemHandlers.clear(),this._itemHandlers.addRange(e)},enumerable:!0,configurable:!0}),t.prototype.drawItemHandler=function(e){var t=this;this.getNestedItemHandlers(!0,!1,!0).forEach(function(n){var r,i,o,s=(null===(o=null===(i=null===(r=t.canvas.viewer)||void 0===r?void 0:r.configuration)||void 0===i?void 0:i.handlers)||void 0===o?void 0:o.placeholderEditingViewMode)===fL.Normal;null==n.canvas||!s&&n instanceof YW&&n.editing||n.drawItemHandler(e)})},t.prototype.drawHighlight=function(t,n){void 0===n&&(n=!1),this.drawChildHighlights(t),!n&&this.item.groupItemPermissions&&e.prototype.drawHighlight.call(this,t)},t.prototype.drawChildHighlights=function(e){this.itemHandlers.where(function(e){return e.isVisible()}).forEach(function(t){return t.drawHighlight(e)})},t.prototype.getOrderedItems=function(){return this.item.items.toArray()},t.prototype._setVisible=function(t){this.visible!==t&&(e.prototype._setVisible.call(this,t),this.applyToItems(function(e){return e.visible=t}))},t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"opacity":var r=t.opacity;this.item.applyToItems(function(e){OW(e.opacity,r)||(e.opacity=r),e instanceof FV&&!OW(e.content.opacity,r)&&e.updateContentAndFrames(function(e){return e.opacity=r})})}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._onItemAdded=function(e){var t=e.item,n=e.index;null!=this.canvas&&(null!=n?this.itemHandlers.insertAt(n,this.canvas.handlerFactory.get(t)):this.itemHandlers.add(this.canvas.handlerFactory.get(t)))},t.prototype._onItemRemoved=function(e){if(null!=this.canvas){var t=this.itemHandlers.firstOrDefault(function(t){return t.item==e.item});this.canvas.isItemHandlerSelected(t)&&this.canvas.removeSelectedItemHandler(t),this.itemHandlers.remove(t)}},t.prototype._onItemHandlerAdded=function(e){var n=this,r=e.item;r.getChangingEvent().add(this._onChildItemHandlerChanging);var i=function(e){e.layer=n.layer,e.canvas=n.canvas,e instanceof t&&e.applyToItems(function(e){return i(e)})};i(r)},t.prototype._onItemHandlerRemoved=function(e){var t=e.item;t.getChangingEvent().remove(this._onChildItemHandlerChanging),this.canvas.isItemHandlerSelected(e.item)&&this.canvas.removeSelectedItemHandler(e.item),t.canvas=null,t.layer=null,t.item.parentContainer=null},t.prototype.replaceItemHandler=function(e,t){var n=this.itemHandlers.indexOf(e);if(-1==n)throw new IL("ItemHandler not found");this.itemHandlers.replaceAt(t,n),t.layer=this.layer,this._onItemHandlerRemoved({item:e,index:n}),this._onItemHandlerAdded({item:t,index:n})},t.prototype.getNestedItemHandlers=function(e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=!1);for(var i=[],o=n?this.itemHandlers.toArray().slice().reverse():this.itemHandlers.toArray().slice();o.length>0;){var s=o.shift();if(!r||s.isVisible()&&!s.getPermissions().noShow){if(s instanceof t){var a=n?s.itemHandlers.toArray().slice().reverse():s.itemHandlers.toArray();if(o.unshift.apply(o,ZW(a)),e)continue}i.push(s)}}return i},t.prototype.updateNestedItemHandlers=function(e){var t,n,r=!1;try{for(var i=JW(this.itemHandlers),o=i.next();!o.done;o=i.next()){var s=o.value,a=e(s);r=r||a,"updateNestedItemHandlers"in s&&(a=s.updateNestedItemHandlers(e),r=r||a)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},t.prototype._onTransformRectangle=function(t,n,r){e.prototype._onTransformRectangle.call(this,t,n,r),this.itemHandlers.forEach(function(e){return e._transformRectangle(t,n,r)})},t.prototype.update=function(){this.applyToItems(function(e){return e.update()}),e.prototype.update.call(this)},t.prototype.quickUpdate=function(){this.applyToItems(function(e){return e.quickUpdate()}),e.prototype.quickUpdate.call(this)},t.prototype._onResized=function(){return this.applyToItems(function(e){return e._onResized()}),e.prototype._onResized.call(this)},t.prototype.startTransform=function(t){this.applyToItems(function(e){return e.startTransform(t)}),e.prototype.startTransform.call(this,t)},t.prototype._endTransform=function(t,n,r){void 0===r&&(r=!1),this.applyToItems(function(e){return e.endTransform(t,n,!0)}),e.prototype._endTransform.call(this,t,n)},t.prototype._transformChanged=function(){e.prototype._transformChanged.call(this),this.applyToItems(function(e){return e._transformChanged()})},t.prototype.setRectangle=function(t,n){var r=t.getTransform(this.rectangle),i=r.translateX,o=r.translateY,s=r.scaleX,a=r.scaleY,l=r.angle,c=function(e){var n=e.rectangle;n.translate(i,o),n.rotateAt(l,t.center),e.setRectangle(n,!0),e instanceof YW&&e.updateContentAndFrames(c)};this.itemHandlers.forEach(c);var u=this.rectangle,h=function(e){var t=e.rectangle;t.setTransform(new YN(s,a,(t.centerX-u.centerX)*(s-1),(t.centerY-u.centerY)*(a-1))),e.setRectangle(t,!0),e instanceof YW&&e.updateContentAndFrames(h)};this.itemHandlers.forEach(h),e.prototype.setRectangle.call(this,t,n)},Object.defineProperty(t.prototype,"_calculateRectangleFromChild",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype._getRectangle=function(){if(!this._calculateRectangleFromChild)return e.prototype._getRectangle.call(this);var t=this.itemHandlers.where(function(e){return e.isVisible()}).toArray().map(function(e){return e.getTransformedRectangle(!1,!0)});if(t.length<1)return null!=t[0]?t[0]:new KN;var n=this.item.transform.angle,r=t.reduce(function(e,t){return KN.union(e,t)}).center,i=t.map(function(e){return e.rotateAt(-n,r).bounds}).reduce(function(e,t){return{left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),right:Math.max(e.right,t.right),bottom:Math.max(e.bottom,t.bottom)}});return KN.FromLTRB(i.left,i.top,i.right,i.bottom).rotateAt(n,r)},t.prototype._onAddedOnCanvas=function(t){e.prototype._onAddedOnCanvas.call(this,t),this.applyToItems(function(e){return e.canvas=t})},t.prototype._onRemovedFromCanvas=function(t){e.prototype._onRemovedFromCanvas.call(this,t),this.applyToItems(function(e){return e.canvas=null})},t.prototype.applyToItems=function(e){if(null!=this.itemHandlers)for(var t=0;t<this.itemHandlers.length;t++)e(this.itemHandlers.getItem([t]))},t.prototype.getPermissions=function(){var t,n,r=e.prototype.getPermissions.call(this).clone();try{for(var i=JW(this.itemHandlers),o=i.next();!o.done;o=i.next()){var s=o.value,a=s.getPermissions();a.allowMoveHorizontal||(r.allowMoveHorizontal=!1),a.allowMoveVertical||(r.allowMoveVertical=!1),a.allowRotate||(r.allowRotate=!1),a.resizeGrips.edge||(r.resizeGrips.edge=!1),a.resizeGrips.getCornerProportional()||r.resizeGrips.setCornerProportional(!1),a.resizeGrips.getCornerArbitrary()||r.resizeGrips.setCornerArbitrary(!1),(this.item.transform.angle-s.angle)%90!=0&&(r.resizeGrips.edge=!1,r.resizeGrips.setCornerArbitrary(!1))}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.showSelectToolbarButton=this.item.groupItemPermissions.allowReplaceContent,r},t.prototype.isChildVisible=function(e){return!0},Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t.typeName="GroupItemHandler",t}(UU),tX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tX(t,e),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"colorGroups":null!=this.canvas&&(this.update(),this.canvas.redraw())}e.prototype._onItemPropertyChanged.call(this,t,n)},Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t}(eX),rX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iX=function(e){function t(t,n){return void 0===n&&(n=null),e.call(this,t,n)||this}return rX(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._setDataItem=function(t,n){e.prototype._setDataItem.call(this,t,n),this.item.textPath=t.textPath,this.item.fitToPath=t.fitToPath,this.item.fitToPathStep=t.fitToPathStep,this.item.stretch=t.stretch,this.item.originalFontSize=t.originalFontSize,this.item.start=t.start,this.item.end=t.end},t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"textPath":case"fitToPath":case"fitToPathStep":case"stretch":case"originalFontSize":case"start":case"end":this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},Object.defineProperty(t.prototype,"textPath",{get:function(){var e=this.getControlCenter(),t=this.item.textPath.clone(),n=this.item.transform.clone();return t.transform(n,e),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalTextPath",{get:function(){return this.item.textPath},set:function(e){this.item.textPath=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitToPath",{get:function(){return this.item.fitToPath},set:function(e){this.item.fitToPath=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stretch",{get:function(){return this.item.stretch},set:function(e){this.item.stretch=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalFontSize",{get:function(){return this.item.originalFontSize},set:function(e){this.item.originalFontSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitToPathStep",{get:function(){return this.item.fitToPathStep},set:function(e){this.item.fitToPathStep=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.item.start},set:function(e){this.item.start=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.item.end},set:function(e){this.item.end=e},enumerable:!0,configurable:!0}),t.prototype._onResized=function(){var t=parseFloat((this.item.font.size*(this.rectangle.height/this._height)).toFixed(1)),n=this.canvas;if(null!=n){var r=n.minFontSize;t="number"==typeof r?Math.max(t,r):t;var i=n.maxFontSize;t="number"==typeof i?Math.min(t,i):t}return WN(t,this.item.font.size,.01)?(null!=this._startRectangle?(this.setRectangle(this._startRectangle),n.updateSelection(),delete this._startRectangle):this.update(),!1):e.prototype._onResized.call(this)},t.prototype.drawItemHandler=function(t){e.prototype.drawItemHandler.call(this,t),!0===window.__$abl$&&AU.drawPath(t,this.item.textPath,this.getControlCenter(),this.item.transform,1,"red",1)},t.prototype._setDefaultTextControlPoints=function(){this._updateEmptyTextControlPoints()},t.prototype._createDataInstance=function(e){return new wW(e)},t.typeName="CurvedTextItemHandler",t}(aW),oX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sX=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,0,0,0,0,t,n)||this;return r._selectionTolerance=15,r._controlPoints=[new MN(t.sourcePoint0.x?t.sourcePoint0.x:0,t.sourcePoint0.y?t.sourcePoint0.y:0),new MN(t.sourcePoint1.x?t.sourcePoint1.x:0,t.sourcePoint1.y?t.sourcePoint1.y:0)],r._makeLineHorizontalWithAngle(),r}return oX(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"width":var r=this.canvas;null!=r&&r.updateSelection();break;case"color":case"fixedWidth":this.canvas.redraw()}e.prototype._onItemPropertyChanged.call(this,t,n)},Object.defineProperty(t.prototype,"controlPoints",{set:function(e){this._controlPoints=new Array(new MN(e[0].x,e[0].y),new MN(e[1].x,e[1].y)),this.item.sourcePoint0=this._controlPoints[0],this.item.sourcePoint1=this._controlPoints[1],this._makeLineHorizontalWithAngle(),this.raiseChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.item.width},set:function(e){this.item.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.item.color},set:function(e){var t=oH.createColor(e);this.item.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedWidth",{get:function(){return this.item.fixedWidth},set:function(e){this.item.fixedWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"point0",{get:function(){return this._getActualPoint(this._controlPoints[0])},set:function(e){var t=this.getControlBounds();if(0===t.width||0===t.height){var n=this._getActualPoint(this._controlPoints[1]);this._controlPoints=[e.clone(),n],this.item.transform=new YN}else this._makeLineHorizontalWithAngle(),this._setTransformByPoints(this._controlPoints[0],e,this._controlPoints[1])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"point1",{get:function(){return this._getActualPoint(this._controlPoints[1])},set:function(e){var t=this.getControlBounds();if(0===t.width||0===t.height){var n=this._getActualPoint(this._controlPoints[0]);this._controlPoints=[n,e.clone()],this.item.transform=new YN}else this._makeLineHorizontalWithAngle(),this._setTransformByPoints(this._controlPoints[1],e,this._controlPoints[0])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectangle",{get:function(){var t=e.prototype._getRectangle.call(this);return t.height=this._getActualWidth(),t},enumerable:!0,configurable:!0}),t.prototype._getActualPoint=function(e){var t=new MN(e.x,e.y),n=this.getControlCenter();t.translate(-n.x,-n.y);var r=this.item.transform;return t.scale(r.scaleX,r.scaleY),t.rotate(r.angle),t.translate(r.translateX,r.translateY),t.translate(n.x,n.y),t},t.prototype._setTransformByPoints=function(e,t,n){var r=this.getControlCenter(),i=this._getActualPoint(n),o=new MN((i.x+t.x)/2,(i.y+t.y)/2),s=o.x-r.x,a=o.y-r.y,l=new MN(e.x,e.y).translate(-r.x,-r.y),c=new MN(t.x,t.y).translate(-s,-a).translate(-r.x,-r.y),u=(l.x*c.x+l.y*c.y)/Math.sqrt((l.x*l.x+l.y*l.y)*(c.x*c.x+c.y*c.y));u=UN(-1,u,1);var h=VN(Math.acos(u));c=c.rotate(-h),this.item.transform=new YN(c.x/l.x,c.y/l.y,s,a,h)},t.prototype._getActualWidth=function(){var e=this.width,t=this.canvas;return this.fixedWidth&&null!=t&&(e/=t.zoom),e},t.prototype.drawItemHandler=function(e){if(null!=e){var t=this.point0,n=this.point1,r=this._getActualWidth();r>0&&AU.drawLine(e,t.x,t.y,n.x,n.y,r,this.isNormalRenderingType?this.item.color.preview:"rgb(0,0,0)",this.isNormalRenderingType?this.item.opacity:1)}},t.prototype._belongToPiece=function(e,t,n,r,i){var o=r/2+i;return jN(n,e,t)<=o*o},t.prototype.hitTest=function(t,n){var r=e.prototype.hitTest.call(this,t.clone()),i=t.clone(),o=this.canvas.zoom*BL.screenDpi/72,s=!!n&&this.rectangle.toRectangleF().contains(t),a=this._getActualWidth(),l=(this._selectionTolerance/o-a)/2,c=this._belongToPiece(this.point0,this.point1,i,a,l<0?0:l);return r.body=!(!s&&!c),r},t.prototype.getColorData=function(){var t=this.item,n=e.prototype.getColorData.call(this);return t.color.needUpdate(this.canvas.rgbColorProfileFileId)&&(n.color=t.color.getData()),n},t.prototype.setColorData=function(t){var n=this.item;e.prototype.setColorData.call(this,t),null!=t.color&&(n.color=oH.createColor(t.color))},t.prototype.hasColorsToUpdate=function(){var t=this.item,n=this.canvas.rgbColorProfileFileId;return e.prototype.hasColorsToUpdate.call(this)||t.color.needUpdate(n)},t.prototype._makeLineHorizontalWithAngle=function(){var e=this._controlPoints[0],t=this._controlPoints[1],n=LN(e,new MN(e.x,t.y),t);if(0!==n){var r=(e.x+t.x)/2,i=(e.y+t.y)/2,o=e.distance(t);this._controlPoints[0]=new MN(r-o/2,i),this.item.sourcePoint0=this._controlPoints[0],this._controlPoints[1]=new MN(r+o/2,i),this.item.sourcePoint1=this._controlPoints[1],this.angle=n}},t.prototype.transformByMatrix=function(e){var t=this.point0,n=this.point1;this.item.transform=new YN;var r=e.transformPoint(t),i=e.transformPoint(n);this.item.sourcePoint0=r,this.item.sourcePoint1=i,this._controlPoints=[r,i],this._makeLineHorizontalWithAngle(),1===e.scaleX&&1===e.scaleY||this._onResized()},t}(UU),aX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lX=function(e){function t(t,n){return void 0===n&&(n=null),e.call(this,0,0,0,0,t,n)||this}return aX(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(e,t){},t.prototype._getBoundsMargin=function(){return this.item.width},t.prototype.drawItemHandler=function(e){if(null!=e&&this.item.width>0){var t=this.getActualPoints();AU.drawPolyline(e,t,this.item.width,this.item.color.preview,this.item.opacity)}},t.prototype._belongToLine=function(e,t){for(var n=this.getActualPoints(),r=!1,i=this.item.width/2+t,o=i*i,s=1;s<n.length;s++)if(jN(e,n[s-1],n[s])<=o){r=!0;break}return r},t.prototype.hitTest=function(t,n){var r=e.prototype.hitTest.call(this,t.clone()),i=this.canvas.zoom*BL.screenDpi/72,o=this._getRectangle(),s=!!n&&o.toRectangleF().contains(t),a=this._belongToLine(t,2/i);return r.body=s||a,r},t.prototype.getColorData=function(){var t=this.item,n=e.prototype.getColorData.call(this);return t.color.needUpdate(this.canvas.rgbColorProfileFileId)&&(n.color=t.color.getData()),n},t.prototype.setColorData=function(t){var n=this.item;e.prototype.setColorData.call(this,t),null!=t.color&&(n.color=oH.createColor(t.color))},t.prototype.hasColorsToUpdate=function(){var t=this.item,n=this.canvas.rgbColorProfileFileId;return e.prototype.hasColorsToUpdate.call(this)||t.color.needUpdate(n)},t.prototype.getActualPoints=function(){for(var e=[],t=this.getControlCenter(),n=0;n<this.item.sourcePoints.length;n++)e.push(this._getActualPointFromControlPoint(this.item.sourcePoints[n],t));return e},t.prototype._getActualPointFromControlPoint=function(e,t){var n=new MN(e.x,e.y);n.translate(-t.x,-t.y);var r=this.item.transform;return n.scale(r.scaleX,r.scaleY),n.rotate(r.angle),n.translate(r.translateX,r.translateY),n.translate(t.x,t.y),n},t.prototype.getControlBounds=function(){var e=0,t=0,n=0,r=0,i=this.item.sourcePoints,o=i.length;o>0&&(e=i[0].x,n=i[0].x,t=i[0].y,r=i[0].y);for(var s=1;s<o;s++)e=Math.min(i[s].x,e),n=Math.max(i[s].x,n),t=Math.min(i[s].y,t),r=Math.max(i[s].y,r);return new FN(e,t,n-e,r-t)},t.prototype._addPoint=function(e){var t=this.canvas,n=-1;t&&(n=BL.screenDpi/72*t.zoom);var r=this.item.sourcePoints;if(r.length>0){var i=r[r.length-1].distance(e);(-1===n||i*n>30)&&r.push(e)}else r.push(e)},t.prototype.addPoint=function(e){this.insertPoint(e,this.item.sourcePoints.length)},t.prototype.insertPoint=function(e,t){if(t<0||t>this.item.sourcePoints.length)throw new AL("addPoint: Index out of range.");var n=this.getActualPoints();n.splice(t,0,e),this.item.sourcePoints=n,this.item.transform=new YN},t.prototype.setPoint=function(e,t){if(t<0||t>=this.item.sourcePoints.length)throw new AL("setPoint: Index out of range.");var n=this.getActualPoints();n[t]=e,this.item.sourcePoints=n,this.item.transform=new YN,this.raiseChanged()},t.prototype.getPointsCount=function(){return this.item.sourcePoints.length},t.prototype.getPoint=function(e){if(e<0||e>=this.item.sourcePoints.length)throw new AL("setPoint: Index out of range.");return this._getActualPointFromControlPoint(this.item.sourcePoints[e],this.getControlCenter())},t.prototype.removePoint=function(e){if(e<0||e>=this.item.sourcePoints.length)throw new AL("removePoint: Index out of range.");var t=this.item.sourcePoints;t.splice(e,1),this.item.sourcePoints=t},t.typeName="PolylineItemHandler",t}(UU),cX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uX=function(e){function t(t,n){return void 0===n&&(n=null),e.call(this,t,n)||this}return cX(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"altColor":case"dashWidth":case"altDashWidth":this.canvas.redraw()}e.prototype._onItemPropertyChanged.call(this,t,n)},Object.defineProperty(t.prototype,"dashWidth",{get:function(){return this.item.dashWidth},set:function(e){this.item.dashWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altDashWidth",{get:function(){return this.item.altDashWidth},set:function(e){this.item.altDashWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altColor",{get:function(){return this.item.altColor},set:function(e){this.item.altColor=e},enumerable:!0,configurable:!0}),t.prototype.drawItemHandler=function(e){if(null!=e){var t=this.point0,n=this.point1,r=this._getActualWidth();if(r){var i=this.dashWidth,o=this.altDashWidth;if(this.fixedWidth){var s=this.canvas.zoom;i/=s,o/=s}AU.drawDashedLine(e,t.x,t.y,n.x,n.y,r,this.color.preview,this.altColor.preview,i,o,this.item.opacity)}}},t.prototype.getColorData=function(){var t=this.item,n=e.prototype.getColorData.call(this),r=this.canvas.rgbColorProfileFileId;return t.color.needUpdate(r)&&(n.color=t.color.getData()),t.altColor.needUpdate(r)&&(n.altColor=t.altColor.getData()),n},t.prototype.setColorData=function(t){var n=this.item;e.prototype.setColorData.call(this,t),null!=t.color&&(n.color=oH.createColor(t.color)),null!=t.altColor&&(n.altColor=oH.createColor(t.altColor))},t.prototype.hasColorsToUpdate=function(){var t=this.item,n=this.canvas.rgbColorProfileFileId;return e.prototype.hasColorsToUpdate.call(this)||t.color.needUpdate(n)||t.altColor.needUpdate(n)},t}(sX),hX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dX=function(e){function t(t,n){return void 0===n&&(n=null),e.call(this,0,0,0,0,t,n)||this}return hX(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(e,t){},Object.defineProperty(t.prototype,"locked",{get:function(){return this.item.locked},set:function(e){this.item.locked=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this.item.cols},set:function(e){this.item.cols=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this.item.rows},set:function(e){this.item.rows=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stepX",{get:function(){return this.item.stepX},set:function(e){this.item.stepX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stepY",{get:function(){return this.item.stepY},set:function(e){this.item.stepY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalLineColor",{get:function(){return this.item.horizontalLineColor},set:function(e){this.item.horizontalLineColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalLineColor",{get:function(){return this.item.verticalLineColor},set:function(e){this.item.verticalLineColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return this.item.lineWidth},set:function(e){this.item.lineWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedLineWidth",{get:function(){return this.item.fixedLineWidth},set:function(e){this.item.fixedLineWidth=e},enumerable:!0,configurable:!0}),t.prototype.getControlBounds=function(){return new FN(this.item.location.x,this.item.location.y,this.item.cols*this.stepX,this.item.rows*this.stepY)},t.prototype._getBoundsMargin=function(){var e=this.lineWidth;return this.fixedLineWidth&&(e/=this.canvas.zoom),e},t.prototype.drawItemHandler=function(e){if(null!=e){e.save();var t=this.item.location,n=this.getControlCenter(),r=this.verticalLineColor.preview,i=this.horizontalLineColor.preview,o=this.lineWidth;this.fixedLineWidth&&(o/=this.canvas.zoom);var s,a,l=o/2/this.item.transform.scaleX,c=o/2/this.item.transform.scaleY,u=this.stepX*this.cols,h=this.stepY*this.rows;for(s=0,a=this.cols;s<=a;s++){var d=t.x+s*this.stepX,p=t.y+h+c,f=new MN(d,t.y-c).transform(this.item.transform,n),m=new MN(d,p).transform(this.item.transform,n);AU.drawLine(e,f.x,f.y,m.x,m.y,o,r,this.item.opacity)}for(s=0,a=this.rows;s<=a;s++){var g=t.x+u+l,y=t.y+s*this.stepY;f=new MN(t.x-l,y).transform(this.item.transform,n),m=new MN(g,y).transform(this.item.transform,n),AU.drawLine(e,f.x,f.y,m.x,m.y,o,i,this.item.opacity)}e.restore()}},t.prototype.getColorData=function(){var t=this.item,n=e.prototype.getColorData.call(this),r=this.canvas.rgbColorProfileFileId;return t.verticalLineColor.needUpdate(r)&&(n.verticalLineColor=t.verticalLineColor.getData()),t.horizontalLineColor.needUpdate(r)&&(n.horizontalLineColor=t.horizontalLineColor.getData()),n},t.prototype.setColorData=function(t){var n=this.item;e.prototype.setColorData.call(this,t),null!=t.verticalLineColor&&(n.verticalLineColor=oH.createColor(t.verticalLineColor)),null!=t.horizontalLineColor&&(n.horizontalLineColor=oH.createColor(t.horizontalLineColor))},t.prototype.hasColorsToUpdate=function(){var t=this.item,n=this.canvas.rgbColorProfileFileId;return e.prototype.hasColorsToUpdate.call(this)||t.verticalLineColor.needUpdate(n)||t.horizontalLineColor.needUpdate(n)},t}(UU),pX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fX=function(e){function t(t,n){void 0===n&&(n=null);var r=this;return null!=t?(r=e.call(this,$N.ellipse(t.sourceRectangle.left,t.sourceRectangle.top,t.sourceRectangle.width,t.sourceRectangle.height),t,n)||this)._controlPoints=[new MN(t.sourceRectangle.left,t.sourceRectangle.top),new MN(t.sourceRectangle.right,t.sourceRectangle.bottom)]:r=e.call(this,null,t,n)||this,r._allowNegativeResize=!1,r}return pX(t,e),t.prototype.hitTest=function(t,n){var r=e.prototype.hitTest.call(this,t.clone()),i=this._getRectangle(),o=t.clone();o.translate(-i.centerX,-i.centerY),o.rotate(-i.angle),o.scale(2/i.width,2/i.height);var s=o.x*o.x+o.y*o.y<1,a=!!n&&i.toRectangleF().contains(t);return r.body=s||a,r},t}(JU);!function(e){e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Home=36]="Home",e[e.End=35]="End",e[e.Enter=13]="Enter",e[e.Tab=9]="Tab",e[e.Escape=27]="Escape",e[e.Backspace=8]="Backspace",e[e.Delete=46]="Delete",e[e.Space=32]="Space",e[e.KeyA=65]="KeyA",e[e.KeyB=66]="KeyB",e[e.KeyI=73]="KeyI",e[e.KeyU=85]="KeyU",e[e.KeyL=76]="KeyL",e[e.KeyR=82]="KeyR",e[e.KeyE=69]="KeyE",e[e.KeyC=67]="KeyC",e[e.KeyV=86]="KeyV",e[e.KeyZ=90]="KeyZ",e[e.KeyY=89]="KeyY",e[e.KeyPeriod=190]="KeyPeriod",e[e.KeyComma=188]="KeyComma",e[e.KeyEqual=187]="KeyEqual"}(AW||(AW={}));var mX,gX=function(){function e(){}return e.alignment="alignment",e.firstLineIndent="first-line-indent",e.spaceAfter="space-after",e.spaceBefore="space-before",e.leftIndent="left-indent",e.rightIndent="right-indent",e}(),yX=function(){function e(){}return e.fontName="font-name",e.fontSize="font-size",e.color="color",e.bold="bold",e.italic="italic",e.underline="underline",e.penColor="pen-color",e.penWidth="pen-width",e.tracking="tracking",e.leading="leading",e.sub="sub",e.sup="sup",e.allCaps="all-caps",e.smallCaps="small-caps",e.fontFamily="font-family",e.fontStyle="font-style",e.wordSpacingScale="word-spacing-scale",e.supSize="sup-size",e.supPosition="sup-position",e.subSize="sub-size",e.subPosition="sub-position",e.digitType="digit-type",e.openType="ot",e.baselineShift="baseline-shift",e.inkName="ink-name",e.inkSolidity="ink-solidity",e.inkColor="ink-color",e.penInkName="pen-ink-name",e.penInkSolidity="pen-ink-solidity",e.penInkColor="pen-ink-color",e}(),_X=function(){function e(e,t,n,r){this._colorPaletteManager=e,this._fontService=t,this._useSimpleFontList=n,this._previewScale=r}return e.prototype.convert=function(e){var t=this._parse(e),n=this._convert(t,null);return this._serialize(n)},e.prototype._convert=function(e,t){var n=this._convertNode(e);null!=n&&null!=t&&t.appendChild(n);for(var r=0;r<e.childNodes.length;++r){var i=e.childNodes[r];this._isAccepted(i)==NodeFilter.FILTER_ACCEPT&&this._convert(i,n||t)}return n},e.prototype.getNodeName=function(e){return e.nodeName.toLowerCase()},e.dictToStyle=function(e){var t="",n=function(n){e.hasOwnProperty(n)&&(n===yX.openType?e[n].split(",").forEach(function(e){if(!sj(e)){var r=e.trim().split(" "),i=r[0].toLowerCase()+","+(2===r.length?r[1]:"1");t+=n+": "+i+"; "}}):t+=n+": "+e[n]+"; ")};for(var r in e)n(r);return t.trim()},e.styleToDict=function(e){var t,n,r={};if(sj(e))return r;var i=e.split(";");try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),s=o.next();!s.done;s=o.next()){var a=s.value.split(":");if(2===a.length){var l=a[0].trim(),c=a[1].trim();l===yX.openType&&r.hasOwnProperty(l)&&(c=r[l]+";"+c),r[l]=c}}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.stringToBoolean=function(e){return"true"===e},e.stringToNumber=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=0),null==e)return null;var r=sj(t)?+e:+e.replace(t,"");return isNaN(r)?n:r},e.letterSpacingToTracking=function(e){var t=1e3*+e.replace("em;","").replace("em","");return isNaN(t)?0:t},e.trackingToLetterSpacing=function(e){return(isNaN(e)?0:e/1e3)+"em"},e.stringToTextAlignment=function(e){switch(e.toLocaleLowerCase()){case"left":return HH.Left;case"center":return HH.Center;case"right":return HH.Right;case"justify":case"justify-all":case"justification":case"justification-last-left":case"justification-last-center":case"justification-last-right":return HH.Justify;default:return HH.Left}},e.textAlignmentToXmlString=function(e){switch(e){case HH.Left:return"left";case HH.Center:return"center";case HH.Right:return"right";case HH.Justify:return"justification-last-left"}},e.textAlignmentToHtmlString=function(e){switch(e){case HH.Left:return"left";case HH.Center:return"center";case HH.Right:return"right";case HH.Justify:return"justify"}},e._defaultSupSubSize=.583,e}(),vX=function(e,t){this.tag=e,this.value=t},bX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wX=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s._defaultFontValue=o,s._supportedSpanStyles=["font-weight","font-style","text-decoration","text-decoration-line","font-size","font-family","color","-webkit-text-stroke","-webkit-text-stroke-width","-webkit-text-stroke-color","letter-spacing","line-height","text-transform","font-variant-caps","vertical-align","font-feature-settings"],s._supportedParagraphStyles=["text-indent","padding-bottom","padding-top","margin-left","margin-right","text-align"],s}return bX(t,e),t.prototype._parse=function(e){return(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("body")[0]},t.prototype._serialize=function(e){return(new XMLSerializer).serializeToString(e).replace(/<body[\s\w.=":\/\s-;]*>/,"").replace("<body>","").replace("</body>","").replace(/&nbsp;/g,"\xa0").trim()},t.prototype._isAccepted=function(e){var t=this.getNodeName(e);return"p"===t||"br"===t||"span"===t||"#text"===t?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},t.prototype._convertNode=function(e){switch(this.getNodeName(e)){case"p":return this._convertParagraph(e);case"span":return this._convertSpan(e);default:return e.cloneNode(!1)}},t.prototype._convertParagraph=function(e){var t=document.createElement("p"),n=e.attributes.style;return this._applyParagraphStyles(t,null!=n?n.value:null),t},t.prototype._applyParagraphStyles=function(e,n){var r=this;if(null!=n){var i={},o=_X.styleToDict(n),s=t.getAlignmentValue(o);null!=s&&(i[gX.alignment]=_X.textAlignmentToXmlString(s));var a=t.getFirstLineIndentValue(o,this._previewScale);null!=a&&(i[gX.firstLineIndent]=a+"pt");var l=t.getSpaceAfterValue(o,this._previewScale);null!=l&&(i[gX.spaceAfter]=l+"pt");var c=t.getSpaceBeforeValue(o,this._previewScale);null!=c&&(i[gX.spaceBefore]=c+"pt");var u=t.getLeftIndentValue(o,this._previewScale);null!=u&&(i[gX.leftIndent]=u+"pt");var h=t.getRightIndentValue(o,this._previewScale);null!=h&&(i[gX.rightIndent]=h+"pt");var d=FL.keys(o).filter(function(e){return!r._supportedParagraphStyles.includes(e)});d.length>0&&d.forEach(function(e){return console.log("HtmlToXml: Unknown paragraph style:"+e)});var p=_X.dictToStyle(i);sj(p)||e.setAttribute("style",p)}},t.getAlignmentValue=function(e){var t=e["text-align"];return null==t?null:_X.stringToTextAlignment(t)},t.getFirstLineIndentValue=function(e,t){void 0===t&&(t=1);var n=e["text-indent"];return null==n?null:_X.stringToNumber(n,"pt")/t},t.getSpaceAfterValue=function(e,t){void 0===t&&(t=1);var n=e["padding-bottom"];return null==n?null:_X.stringToNumber(n,"pt")/t},t.getSpaceBeforeValue=function(e,t){void 0===t&&(t=1);var n=e["padding-top"];return null==n?null:_X.stringToNumber(n,"pt")/t},t.getLeftIndentValue=function(e,t){void 0===t&&(t=1);var n=e["margin-left"];return null==n?null:_X.stringToNumber(n,"pt")/t},t.getRightIndentValue=function(e,t){void 0===t&&(t=1);var n=e["margin-right"];return null==n?null:_X.stringToNumber(n,"pt")/t},t.prototype._convertSpan=function(e){var t=document.createElement("span"),n=e.attributes.style,r=e.attributes.colordata;return this._applySpanStyles(t,null!=n?n.value:null,null!=r?r.value:null,e),t},t.prototype._applySpanStyles=function(e,n,r,i){var o=this;if(null!=n){var s=_X.styleToDict(n),a=_X.styleToDict(r),l={},c=t.getElementFontValue(i,null,this._defaultFontValue);null!=c&&t.setFontValue(l,c,this._fontService,this._useSimpleFontList);var u=t.getUnderlineValue(s);null!=u&&(l[yX.underline]=""+u);var h=t.getFontSizeValue(s,this._previewScale);null!=h&&(l[yX.fontSize]=h+"pt");var d=t.getColorValue(s,a,this._colorPaletteManager);null!=d&&(l[yX.color]=d.toString());var p=t.getStrokeValue(s,a,this._colorPaletteManager,this._previewScale);null!=p&&(null!=p.size&&(l[yX.penWidth]=p.size+"pt"),null!=p.colorIndex&&(l[yX.penColor]=p.colorIndex.toString()));var f=t.getTrackingValue(s);null!=f&&(l[yX.tracking]=f.toString());var m=t.getLeadingValue(s,this._previewScale);null!=m&&(l[yX.leading]=m+"pt");var g=t.getAllCapsValue(s);null!=g&&(l[yX.allCaps]=""+g);var y,_=t.getSmallCapsValue(s);null!=_&&(l[yX.smallCaps]=""+_),!0===t.getSupValue(s)&&(l[yX.sup]="true",null!=(y=t._getSupSubSize(s))&&(l[yX.supSize]=y)),!0===t.getSubValue(s)&&(l[yX.sub]="true",null!=(y=t._getSupSubSize(s))&&(l[yX.subSize]=y));var v=t.getOpenTypeStringValue(s);null!=v&&(l[yX.openType]=v);var b=FL.keys(s).filter(function(e){return!o._supportedSpanStyles.includes(e)});b.length>0&&b.forEach(function(e){return console.log("HtmlToXml: Unknown span style:"+e)});var w=_X.dictToStyle(l);sj(w)||e.setAttribute("style",w)}},t._getSupSubSize=function(e){var t=e["font-size"];if(null==t)return null;var n=_X.stringToNumber(t.replace("%",""));if(null==n)return null;var r=n/100;return WN(_X._defaultSupSubSize,r)?null:(+r.toFixed(3)).toString()},t.getElementFontValue=function(e,t,n){var r=null!=n?FL.clone(n):{},i=function(e){null!=e.parentElement&&e!=t&&i(e.parentElement);var n=e.style.fontFamily,o=e.style.fontWeight,s=e.style.fontStyle;sj(n)||(r.family=n),sj(o)||(r.bold="bold"===o),sj(s)||(r.italic="italic"===s)};return i(e),r},t.getFontValue=function(e){var t=e["font-weight"],n=e["font-style"],r=e["font-family"];return null==r&&null==t&&null==n?null:{family:sj(r)?null:r,bold:null==t?null:"bold"===t,italic:null==n?null:"italic"===n}},t.getFontSettings=function(e,n,r){if(r){var i=t._deserializeCssEscapedString(e.family).replace(/"/g,"").replace(/'/g,"");return n.findSuitableFontParams(n.findOriginalFamilyName(i.replace("_cc_family_","")),e.bold,e.italic)}var o={};if(null!=e.family){var s=n.findOriginalPsName(e.family.replace("_cc_psname_",""));o.postScriptName=s}return null!=e.bold&&(o.fauxBold=e.bold),null!=e.italic&&(o.fauxItalic=e.italic),o},t.setFontValue=function(e,n,r,i){var o=t.getFontSettings(n,r,i);null!=o.postScriptName&&(e[yX.fontName]=o.postScriptName),null!=o.fauxBold&&(e[yX.bold]=""+o.fauxBold),null!=o.fauxItalic&&(e[yX.italic]=""+o.fauxItalic)},t._deserializeCssEscapedString=function(e){var t=e;return"'"===t[0]&&(t=t.slice(1)),"'"===t[t.length-1]&&(t=t.slice(0,t.length-1)),t},t.getBoldValue=function(e){var t=e["font-weight"];return null==t?null:"bold"===t},t.getItalicValue=function(e){var t=e["font-style"];return null==t?null:"italic"===t},t.getUnderlineValue=function(e){var t=e["text-decoration"]||e["text-decoration-line"];return null==t?null:"underline"===t},t.getFontSizeValue=function(e,t){void 0===t&&(t=1);var n=e["font-size"];if(null==n||"super"===e["vertical-align"]||"sub"===e["vertical-align"])return null;var r=12;return n.endsWith("pt")?r=_X.stringToNumber(n,"pt"):n.endsWith("px")?r=72*_X.stringToNumber(n,"px")/96:"x-small"==n?r=7.5:"small"==n?r=12*.8:"medium"==n?r=12:"large"==n?r=13.5:"x-large"==n?r=18:"xx-large"==n?r=24:"xxx-large"==n&&(r=36),+(r/t).toFixed(2)},t.getColorValue=function(e,n,r){var i=e.color;if(null==i)return null;var o=t._convertColor(i,n["color-index"],r);return null!=o?o:void 0},t.getStrokeValue=function(e,n,r,i){void 0===i&&(i=1);var o=null,s=null,a=e["-webkit-text-stroke"];if(null!=a?(o=a.substring(0,a.indexOf(" ")),s=a.substring(a.indexOf(" ")+1)):(o=e["-webkit-text-stroke-width"],s=e["-webkit-text-stroke-color"]),null==s&&null==o)return null;var l={};if(null!=o&&(l.size=_X.stringToNumber(o,"pt")/i),null!=s){var c=t._convertColor(s,n["pen-color-index"],r);null!=c&&(l.colorIndex=c)}return l},t.getTrackingValue=function(e){var n=e["letter-spacing"];return null==n?null:t.letterSpacingToTracking(n)},t.getLeadingValue=function(e,t){void 0===t&&(t=1);var n=e["line-height"];return null==n?null:"normal"===n?0:_X.stringToNumber(n,"pt")/t},t.getAllCapsValue=function(e){var t=e["text-transform"];return null==t?null:"uppercase"===t},t.getSmallCapsValue=function(e){var t=e["font-variant-caps"];return null==t?null:"all-small-caps"===t},t.getSupValue=function(e){var t=e["vertical-align"];return null==t?null:"super"===t},t.getSubValue=function(e){var t=e["vertical-align"];return null==t?null:"sub"===t},t.getOpenTypeValue=function(e){var t=e["font-feature-settings"];return null!=t?t.split(",").map(function(e){var t,n=e.trim().split(" ");return new vX(n[0].replace(/"/g,""),_X.stringToNumber(null!==(t=n[1])&&void 0!==t?t:"1"))}):null},t.getOpenTypeStringValue=function(e){var t=e["font-feature-settings"];return null!=t?t.replace(/"/g,""):null},t._convertColor=function(e,t,n){var r;if(null!=t){if(r=+t,isNaN(r))return console.warn("HtmlToXml: invalid color index: "+t),null}else{var i=oH.createColor(e);r=n.addColorToPaletteReturnIndex(i)}return r},t}(_X);!function(e){e[e.Regular=0]="Regular",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.BoldItalic=3]="BoldItalic",e[e.Other=4]="Other"}(mX||(mX={}));var CX,xX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),EX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xX(t,e),t.prototype._parse=function(e){return(new DOMParser).parseFromString("<body>"+e.replace(/  /g,"\xa0 ")+"</body>","text/html").getElementsByTagName("body")[0]},t.prototype._serialize=function(e){return e.innerHTML},t.prototype._isAccepted=function(e){var t=this.getNodeName(e);return"p"===t||"br"===t||"span"===t||"#text"===t?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},t.prototype._convertNode=function(e){switch(this.getNodeName(e)){case"p":return this._convertParagraph(e);case"span":return this._convertSpan(e);default:return e.cloneNode(!1)}},t.prototype._convertParagraph=function(e){var t=document.createElement("p"),n=e.attributes.style;return this._applyParagraphStyles(t,null!=n?n.value:null),t},t.prototype._applyParagraphStyles=function(e,n){if(null!=n){var r=_X.styleToDict(n),i=r[gX.alignment];null!=i&&t.setAlignmentValue(e,i);var o=r[gX.firstLineIndent];o&&t.setFirstLineIndentValue(e,o,this._previewScale);var s=r[gX.spaceAfter];null!=s&&t.setSpaceAfterValue(e,s,this._previewScale);var a=r[gX.spaceBefore];null!=a&&t.setSpaceBeforeValue(e,a,this._previewScale);var l=r[gX.leftIndent];null!=l&&t.setLeftIndentValue(e,l,this._previewScale);var c=r[gX.rightIndent];null!=c&&t.setRightIndentValue(e,c,this._previewScale);var u=FL.values(gX),h=FL.keys(r).filter(function(e){return!u.includes(e)});h.length>0&&h.forEach(function(e){return console.log("XmlToHtml: Unknown paragraph style:"+e)})}},t.setAlignmentValue=function(e,t){var n="string"==typeof t?_X.stringToTextAlignment(t):t;e.style.textAlign=_X.textAlignmentToHtmlString(n)},t.setFirstLineIndentValue=function(e,t,n){void 0===n&&(n=1);var r="number"==typeof t?t:_X.stringToNumber(t,"pt");e.style.textIndent=r*n+"pt"},t.setSpaceAfterValue=function(e,t,n){void 0===n&&(n=1);var r="number"==typeof t?t:_X.stringToNumber(t,"pt");e.style.paddingBottom=r*n+"pt"},t.setSpaceBeforeValue=function(e,t,n){void 0===n&&(n=1);var r="number"==typeof t?t:_X.stringToNumber(t,"pt");e.style.paddingTop=r*n+"pt"},t.setRightIndentValue=function(e,t,n){void 0===n&&(n=1);var r="number"==typeof t?t:_X.stringToNumber(t,"pt");e.style.marginRight=r*n+"pt"},t.setLeftIndentValue=function(e,t,n){void 0===n&&(n=1);var r="number"==typeof t?t:_X.stringToNumber(t,"pt");e.style.marginLeft=r*n+"pt"},t.prototype._convertSpan=function(e){var t=document.createElement("span"),n=e.attributes.style;return this._applySpanStyles(t,null!=n?n.value:null),t},t.prototype._applySpanStyles=function(e,n){if(null!=n){var r=_X.styleToDict(n),i=t.getFontValue(r,this._fontService,this._useSimpleFontList);null!=i&&t.setFontValue(e,i);var o=r[yX.underline];null!=o&&t.setUnderlineValue(e,o);var s=r[yX.fontSize];null!=s&&t.setFontSizeValue(e,s,this._previewScale);var a=r[yX.leading];null!=a&&t.setLeadingValue(e,a,this._previewScale);var l=r[yX.tracking];null!=l&&t.setTrackingValue(e,parseFloat(l));var c=r[yX.color];null!=c&&t.setColorValue(e,this._convertColor(c),this._colorPaletteManager);var u=r[yX.penColor],h=r[yX.penWidth];if(null!=u||null!=h){var d={enabled:!0};null!=u&&(d.color=this._convertColor(u)),null!=h&&(d.size=_X.stringToNumber(h,"pt")),t.setStrokeValue(e,d,this._colorPaletteManager,this._previewScale)}var p=r[yX.sup],f=_X.stringToNumber(r[yX.supSize]);null!=p&&t.setSupValue(e,p,f);var m=r[yX.sub],g=_X.stringToNumber(r[yX.subSize]);null!=m&&t.setSubValue(e,m,g);var y=r[yX.allCaps];null!=y&&t.setAllCapsValue(e,y);var _=r[yX.smallCaps];null!=_&&t.setSmallCapsValue(e,_);var v=r[yX.openType];null!=v&&t.setOpenTypeStringValue(e,v);var b=FL.values(yX),w=FL.keys(r).filter(function(e){return!b.includes(e)});w.length>0&&w.forEach(function(e){return console.log("XmlToHtml: Unknown span style:"+e)})}},t.getFontValue=function(e,n,r){var i=e[yX.fontName],o=e[yX.bold],s=e[yX.italic];if(null==i&&null==o&&null==s)return null;var a={postScriptName:sj(i)?null:i,fauxBold:sj(o)?null:_X.stringToBoolean(o),fauxItalic:sj(s)?null:_X.stringToBoolean(s)};return t.fontSettingsToHtmlValue(a,n,r)},t.fontSettingsToHtmlValue=function(e,t,n){if(null==e)return null;var r=e.postScriptName,i=e.fauxBold,o=e.fauxItalic;if(null==r&&null==i&&null==o)return null;var s={};if(n){if(!sj(r)){s.family=t.getCssFontFamily(t.availableFontsByPsName[r.toLowerCase()].family);var a=t.recognizeStyleByPsName(r);s.bold=a===mX.Bold||a===mX.BoldItalic,s.italic=a===mX.Italic||a===mX.BoldItalic}}else s.family=null!=r?t.getCssPsName(r):null,s.bold=i,s.italic=o;return s},t.setFontValue=function(e,t){null!=t.family&&(e.style.fontFamily=t.family),null!=t.bold&&(e.style.fontWeight=!0===t.bold?"bold":"normal"),null!=t.italic&&(e.style.fontStyle=!0===t.italic?"italic":"normal")},t.setBoldValue=function(e,t){e.style.fontWeight=!0===t||"true"===t?"bold":"normal"},t.setItalicValue=function(e,t){e.style.fontStyle=!0===t||"true"===t?"italic":"normal"},t.setUnderlineValue=function(e,t){e.style.textDecoration=!0===t||"true"===t?"underline":"none"},t.setFontSizeValue=function(e,t,n){void 0===n&&(n=1);var r="number"==typeof t?t:_X.stringToNumber(t,"pt");e.style.fontSize=r*n+"pt"},t.setFontNameValue=function(e,t){e.style.fontFamily=t},t.setLeadingValue=function(e,t,n){void 0===n&&(n=1);var r="number"==typeof t?t:_X.stringToNumber(t,"pt");e.style.lineHeight=0===r?"normal":r*n+"pt"},t.setTrackingValue=function(e,t){e.style.letterSpacing=_X.trackingToLetterSpacing(t)},t.setColorValue=function(e,n,r){e.style.color=n.preview;var i=r.addColorToPaletteReturnIndex(n);t.setColorIndex(e,i)},t.setColorIndex=function(e,t){var n=e.attributes.colordata,r=null!=n?_X.styleToDict(n.value):{};r["color-index"]=t.toString(),e.setAttribute("colordata",_X.dictToStyle(r))},t.setStrokeValue=function(e,t,n,r){void 0===r&&(r=1);var i=e.attributes.colordata,o=null!=i?_X.styleToDict(i.value):{};t.enabled?(e.style.webkitTextStrokeWidth=t.size*r+"pt",e.style.webkitTextStrokeColor=t.color.preview,o["pen-color-index"]=n.addColorToPaletteReturnIndex(t.color).toString()):(sj(e.style.webkitTextStrokeWidth)&&sj(e.style.webkitTextStrokeColor)&&sj(e.style.webkitTextStroke)?(e.style.webkitTextStrokeWidth="0pt",e.style.webkitTextStrokeColor="rgba(0,0,0,0)"):(e.style.webkitTextStrokeWidth=null,e.style.webkitTextStrokeColor=null,e.style.webkitTextStroke=null),delete o["pen-color-index"]),FL.isEmpty(o)?e.removeAttribute("colordata"):e.setAttribute("colordata",_X.dictToStyle(o))},t.setSupValue=function(e,t,n){!0!==t&&"true"!==t||(e.style.verticalAlign="super",null==n&&(n=_X._defaultSupSubSize),e.style.fontSize=100*n+"%")},t.setSubValue=function(e,t,n){!0!==t&&"true"!==t||(e.style.verticalAlign="sub",null==n&&(n=_X._defaultSupSubSize),e.style.fontSize=100*n+"%")},t.setAllCapsValue=function(e,t){e.style.textTransform=!0===t||"true"===t?"uppercase":"none"},t.setSmallCapsValue=function(e,t){e.style.fontVariantCaps=!0===t||"true"===t?"all-small-caps":"none"},t.setOpenTypeValue=function(e,t){null!=t&&0!=t.length&&(e.style.fontFeatureSettings=t.map(function(e){return'"'+e.tag.toLowerCase()+'" '+e.value}).join(", "))},t.setOpenTypeStringValue=function(e,t){var n=null;t.split(";").forEach(function(e){if(!sj(e)){var t=e.split(","),r=2===t.length?t[1]:null;null==n?n="":n+=", ",n+='"'+t[0].toLowerCase()+'"',null!=r&&(n+=" "+r)}}),null!=n&&(e.style.fontFeatureSettings=n)},t.prototype._convertColor=function(e){var t=+e;return isNaN(t)?oH.createColor(e):this._colorPaletteManager.getPaletteColorAt(t)},t}(_X),SX=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},PX=function(){function e(){}return e.fontName="fontName",e.bold="bold",e.italic="italic",e.underline="underline",e.subscript="subscript",e.superscript="superscript",e.documentCommands=FL.values([e.fontName,e.bold,e.italic,e.underline,e.color="color",e.justifyCenter="justifyCenter",e.justifyFull="justifyFull",e.justifyLeft="justifyLeft",e.justifyRight="justifyRight",e.subscript,e.superscript]),e.verticalAlignmentTop="verticalAlignmentTop",e.verticalAlignmentCenter="verticalAlignmentCenter",e.verticalAlignmentBottom="verticalAlignmentBottom",e.alignment="alignment",e.firstLineIndent="first-line-indent",e.spaceAfter="space-after",e.spaceBefore="space-before",e.leftIndent="left-indent",e.rightIndent="right-indent",e.verticalAlignment="vertical-alignment",e.fontSize="fontSize",e.stroke="stroke",e.tracking="tracking",e.leading="leading",e.allCaps="all-caps",e.smallCaps="small-caps",e.openType="open-type",e}(),TX=function(){function e(e){var t=this;this._manager=null,this._fontService=null,this._useSimpleFontList=!1,this._range=null,this._inlineStyle=null,this._defaultInlineStyle=null,this._paragraphStyle=null,this._defaultParagraphStyle=null,this._usedColors=[],this._previewScale=1,this.styleChanged=new EL,this.initialized=new EL,this._ready=!1,this._elementHandler=e,document.onselectionchange=function(e){t._onSelectionChange()}}return e.prototype.init=function(e,t,n){var r=this;this._fontService=e,this._useSimpleFontList=t,null!=n&&$U({url:n+"/cssFonts",type:jU.post,headers:[HU.json],data:JSON.stringify({requestedFontsByPsName:Object.keys(e.availableFontsByPsName),advancedMode:!this._useSimpleFontList})}).then(function(e){var t="data:text/css,"+encodeURI(e.value);r._elementHandler.addTextEditorStyles(t),r._ready=!0,r.initialized.fire()})},e.prototype.show=function(e,t){var n,r,i=this;this._manager=e,this._previewScale=null!==(n=t.previewScale)&&void 0!==n?n:1;var o=null===(r=t.textFormattingEnabled)||void 0===r||r,s=new EX(this._manager,this._fontService,this._useSimpleFontList,this._previewScale).convert(t.text);this._elementHandler.showTextEditor(t.rectangle,t.textAlignment,s,t.borderWidth,t.borderColor,t.fillColor,t.opacity,t.textVerticalAlignment),this._setDefaultStyles(t.defaultInlineStyle,t.defaultParagraphStyle),this._innerDiv.addEventListener("input",function(e){i._innerDiv.innerHTML.startsWith("<p")||(document.execCommand("selectAll"),document.execCommand("formatblock",!1,"p")),"historyUndo"!==e.inputType&&"historyRedo"!==e.inputType||document.getSelection().collapseToEnd()}),o||this._div.addEventListener("beforeinput",function(e){["formatBold","formatItalic","formatUnderline","formatSuperscript","formatSubscript","formatJustifyFull","formatJustifyCenter","formatJustifyRight","formatJustifyLeft","formatFontColor","formatFontName"].includes(e.inputType)&&e.preventDefault()}),this._innerDiv.addEventListener("paste",function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)}),this._usedColors=[]},e.prototype.hide=function(){this._updateColors();var e=this._elementHandler.hideTextEditor(),t=wX.getElementFontValue(this._innerDiv),n=new wX(this._manager,this._fontService,this._useSimpleFontList,this._previewScale,t).convert(e);return this._manager=null,n},e.prototype.undo=function(){document.execCommand("undo")},e.prototype.redo=function(){document.execCommand("redo")},Object.defineProperty(e.prototype,"canUndo",{get:function(){return document.queryCommandEnabled("undo")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return document.queryCommandEnabled("redo")},enumerable:!0,configurable:!0}),e.prototype.processMouseEvent=function(e){},e.prototype.processKeyEvent=function(e){return!0},Object.defineProperty(e.prototype,"_div",{get:function(){return this._elementHandler.textEditorDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_innerDiv",{get:function(){return this._elementHandler.textEditorInnerDiv},enumerable:!0,configurable:!0}),e.prototype._updateColors=function(){var e=this;this._innerDiv.querySelectorAll("span[style*=color]").forEach(function(t){if(!sj(t.style.color)){var n=e._findUsedColor(t.style.color);if(null!=n){var r=e._manager.addColorToPaletteReturnIndex(n);EX.setColorIndex(t,r)}}})},e.prototype._findUsedColor=function(e){if(sj(e))return null;var t=oH.createColor(e),n=this._usedColors.find(function(e){return oH.createColor(e.preview).equals(t)});return null!=n?n.color:null},e.prototype._focusOnDiv=function(){var e=document.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):null;null!=t&&this._innerDiv.contains(t.commonAncestorContainer)||(this._innerDiv.focus(),e.removeAllRanges(),e.addRange(this._range))},e.prototype._onSelectionChange=function(e){if(void 0===e&&(e=!0),null!=this._innerDiv){var t=document.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):null;null!=n&&this._innerDiv.contains(n.commonAncestorContainer)&&(this._range=n,e&&this._updateStyles())}},Object.defineProperty(e.prototype,"active",{get:function(){return null!=this._manager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),e.prototype._updateStyles=function(){if(this.active){var e=this._updateInlineStyles(),t=this._updateParagraphStyles();(e||t)&&this.styleChanged.fire()}},e.prototype._updateInlineStyles=function(){var e=this;if(null==this._range||this._range.startContainer==this._innerDiv)return!1;var t=this._getDefaultInlineStyle(),n=function(r){if(e._isParagraph(r)||n(r.parentNode),e._isSpan(r)){var i=r.attributes.style,o=_X.styleToDict(null!=i?i.value:null),s=r.attributes.colordata,a=_X.styleToDict(null!=s?s.value:null),l=wX.getElementFontValue(r,e._innerDiv);if(null!=l){var c=wX.getFontSettings(l,e._fontService,e._useSimpleFontList);null!=c.postScriptName&&(t.font.postScriptName=c.postScriptName),null!=c.fauxBold&&(t.font.fauxBold=c.fauxBold),null!=c.fauxItalic&&(t.font.fauxItalic=c.fauxItalic)}var u=wX.getFontSizeValue(o,e._previewScale);null!=u&&(t.font.size=u);var h=wX.getUnderlineValue(o);null!=h&&(t.underline=h);var d=wX.getAllCapsValue(o);null!=d&&(t.font.allCaps=d);var p=wX.getLeadingValue(o,e._previewScale);null!=p&&(t.leading=p);var f=wX.getTrackingValue(o);null!=f&&(t.tracking=f);var m=wX.getSubValue(o);null!=m&&(t.subscript=m);var g=wX.getSupValue(o);null!=g&&(t.superscript=g);var y=wX.getOpenTypeValue(o);null!=y&&(t.openType=y);var _=e._findUsedColor(o.color);if(null!=_)t.color=_;else{var v=wX.getColorValue(o,a,e._manager);null!=v&&(t.color=e._manager.getPaletteColorAt(v))}var b=wX.getStrokeValue(o,a,e._manager,e._previewScale);if(null!=b){var w=!1;t.stroke={},null!=b.size&&(t.stroke.size=b.size,w=t.stroke.size>0),null!=b.colorIndex&&(t.stroke.color=e._manager.getPaletteColorAt(b.colorIndex),w=w||t.stroke.color.alpha>0),t.stroke.enabled=w}}};return n(this._range.startContainer),!FL.isEqual(this._inlineStyle,t)&&(this._inlineStyle=t,!0)},e.prototype._updateParagraphStyles=function(){var e=this;if(null==this._range||this._range.startContainer==this._innerDiv)return!1;var t=this._getDefaultParagraphStyle(),n=function(r){if(e._isParagraph(r)){var i=r.attributes.style,o=_X.styleToDict(null!=i?i.value:null),s=wX.getAlignmentValue(o);null!=s&&(t.alignment=s);var a=wX.getFirstLineIndentValue(o,e._previewScale);null!=a&&(t.firstLineIndent=a);var l=wX.getSpaceAfterValue(o,e._previewScale);null!=l&&(t.spaceAfter=l);var c=wX.getSpaceBeforeValue(o,e._previewScale);null!=c&&(t.spaceBefore=c);var u=wX.getLeftIndentValue(o,e._previewScale);null!=u&&(t.leftIndent=u);var h=wX.getRightIndentValue(o,e._previewScale);null!=h&&(t.rightIndent=h)}else n(r.parentNode)};return n(this._range.startContainer),!FL.isEqual(this._paragraphStyle,t)&&(this._paragraphStyle=t,!0)},Object.defineProperty(e.prototype,"inlineStyle",{get:function(){return this.active?this._inlineStyle:null},set:function(e){if(this.active&&(this._removeCurrentStyles(e,this._inlineStyle),!FL.isEmpty(e))){var t=this._inlineStyleToCommands(e);if(0!=t.length){this._focusOnDiv();var n=t[0];if(1==t.length&&PX.documentCommands.includes(n.key))if(n.key==PX.color){var r=n.value;null!=r?(document.execCommand("foreColor",!1,r.preview),this._usedColors.push({preview:r.preview,color:r})):console.warn("Incorrect color value")}else document.execCommand(n.key,!1,n.value);else this._customInlineCommand(t);this._updateStyles()}}},enumerable:!0,configurable:!0}),e.prototype._removeCurrentStyles=function(e,t){var n=this;FL.keys(e).forEach(function(r){var i=t[r],o=e[r];null!=i?"stroke"===r?(FL.isEqual(o,i)||o.enabled===i.enabled&&o.size===i.size&&o.color instanceof $j&&o.color.equals(i.color))&&delete e[r]:"openType"===r||(o instanceof $j?o.equals(i)&&delete e[r]:o instanceof Object?n._removeCurrentStyles(o,i):o===i&&delete e[r]):console.warn("_removeCurrentStyles: Incorrect current value state: key "+r+" not found")})},e.prototype._inlineStyleToCommands=function(e){var t=[];if(null!=e.font){var n=EX.fontSettingsToHtmlValue(e.font,this._fontService,this._useSimpleFontList);if(null!=n){if(null!=this._inlineStyle){var r=EX.fontSettingsToHtmlValue(this._inlineStyle.font,this._fontService,this._useSimpleFontList);this._removeCurrentStyles(n,r)}null!=n.family&&t.push({key:PX.fontName,value:n.family}),null!=n.bold&&t.push({key:PX.bold,value:n.bold}),null!=n.italic&&t.push({key:PX.italic,value:n.italic})}null!=e.font.size&&t.push({key:PX.fontSize,value:e.font.size}),null!=e.font.allCaps&&t.push({key:PX.allCaps,value:e.font.allCaps})}return null!=e.underline&&t.push({key:PX.underline,value:e.underline}),null!=e.leading&&t.push({key:PX.leading,value:e.leading}),null!=e.tracking&&t.push({key:PX.tracking,value:e.tracking}),null!=e.color&&t.push({key:PX.color,value:e.color}),null!=e.stroke&&t.push({key:PX.stroke,value:e.stroke}),null!=e.subscript&&t.push({key:PX.subscript,value:e.subscript}),null!=e.superscript&&t.push({key:PX.superscript,value:e.superscript}),null!=e.openType&&t.push({key:PX.openType,value:e.openType}),t},Object.defineProperty(e.prototype,"paragraphStyle",{get:function(){return this.active?this._paragraphStyle:null},set:function(e){if(this.active&&(this._removeCurrentStyles(e,this._paragraphStyle),!FL.isEmpty(e))){var t=this._paragraphStyleToCommands(e);if(0!=t.length){var n=t[0];1==t.length&&PX.documentCommands.includes(n.key)?(this._innerDiv.focus(),document.execCommand(n.key,!1,n.value)):this._customParagraphCommand(t),this._updateStyles()}}},enumerable:!0,configurable:!0}),e.prototype._paragraphStyleToCommands=function(e,t){void 0===t&&(t=!0);var n=[];if(null!=e.alignment)if(t&&FL.isEmpty(FL.omit(e,PX.alignment)))switch(e.alignment){case HH.Left:n.push({key:PX.justifyLeft});break;case HH.Center:n.push({key:PX.justifyCenter});break;case HH.Right:n.push({key:PX.justifyRight});break;case HH.Justify:n.push({key:PX.justifyFull})}else n.push({key:PX.alignment,value:e.alignment});return null!=e.firstLineIndent&&n.push({key:PX.firstLineIndent,value:e.firstLineIndent}),null!=e.leftIndent&&n.push({key:PX.leftIndent,value:e.leftIndent}),null!=e.rightIndent&&n.push({key:PX.rightIndent,value:e.rightIndent}),null!=e.spaceAfter&&n.push({key:PX.spaceAfter,value:e.spaceAfter}),null!=e.spaceBefore&&n.push({key:PX.spaceBefore,value:e.spaceBefore}),n},e.prototype._isSpan=function(e){return"span"===e.nodeName.toLocaleLowerCase()},e.prototype._isParagraph=function(e){return"p"===e.nodeName.toLocaleLowerCase()},e.prototype._isText=function(e){return"#text"===e.nodeName.toLocaleLowerCase()},e.prototype._customInlineCommand=function(e){var t=this,n=this._range;if(null!=n&&!n.collapsed){var r=document.getSelection(),i=this._innerDiv.cloneNode(),o=function(e){if(r.containsNode(e,!1)||!e.hasChildNodes())return!0;var i=!0,s=!0;return t._isSpan(e.firstChild)?i=o(e.firstChild):t._isText(e.firstChild)&&(i=e.firstChild.isSameNode(n.startContainer)&&0==n.startOffset),t._isSpan(e.lastChild)?s=o(e.lastChild):t._isText(e.lastChild)&&(s=e.lastChild.isSameNode(n.endContainer)&&n.endOffset==e.lastChild.length),t._range.startContainer.isSameNode(n.endContainer)?i&&s:i||s},s=function(i,a){i.childNodes.forEach(function(i){if(r.containsNode(i,!0))if(t._isText(i)){var l=i.cloneNode(!1),c=null,u=0;i.isSameNode(n.startContainer)&&(c=l.splitText(u=n.startOffset),a.appendChild(l),l=c,c=null),i.isSameNode(n.endContainer)&&(c=l.splitText(n.endOffset-u));var h=document.createElement("span");t._applyCommands(h,e),h.textContent=l.textContent,a.appendChild(h),null!=c&&a.appendChild(c)}else if(t._isSpan(i)&&o(i)){var d=i.cloneNode(!0);t._applyCommands(d,e),a.appendChild(d)}else{var p=i.cloneNode(!1);s(i,p),a.appendChild(p)}else a.appendChild(i.cloneNode(!0))})};this._innerDiv.childNodes.forEach(function(e){if(r.containsNode(e,!0)){var t=e.cloneNode(!1);s(e,t),i.appendChild(t)}else i.appendChild(e.cloneNode(!0))}),this._innerDiv.focus(),document.execCommand("selectAll"),document.execCommand("insertHTML",!1,i.innerHTML),this._onSelectionChange(!1)}},e.prototype._customParagraphCommand=function(e){var t=this;if(null!=this._range){var n=document.getSelection(),r=this._div.cloneNode();this._innerDiv.childNodes.forEach(function(i){if(t._isParagraph(i)){var o=i.cloneNode(!0);n.containsNode(i,!0)&&t._applyCommands(o,e),r.appendChild(o)}}),this._innerDiv.focus(),document.execCommand("selectAll"),document.execCommand("insertHTML",!1,r.innerHTML),this._onSelectionChange(!1)}},e.prototype._applyCommands=function(e,t){var n,r;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),o=i.next();!o.done;o=i.next()){var s=o.value,a=s.value;switch(s.key){case PX.fontName:EX.setFontNameValue(e,a);break;case PX.fontSize:EX.setFontSizeValue(e,a,this._previewScale);break;case PX.bold:EX.setBoldValue(e,a);break;case PX.italic:EX.setItalicValue(e,a);break;case PX.allCaps:EX.setAllCapsValue(e,a);break;case PX.underline:EX.setUnderlineValue(e,a);break;case PX.leading:EX.setLeadingValue(e,a,this._previewScale);break;case PX.tracking:EX.setTrackingValue(e,a);break;case PX.color:EX.setColorValue(e,a,this._manager);break;case PX.stroke:EX.setStrokeValue(e,a,this._manager,this._previewScale);break;case PX.openType:EX.setOpenTypeValue(e,a);break;case PX.subscript:EX.setSubValue(e,a);break;case PX.superscript:EX.setSupValue(e,a);break;case PX.alignment:EX.setAlignmentValue(e,a);break;case PX.firstLineIndent:EX.setFirstLineIndentValue(e,a,this._previewScale);break;case PX.spaceAfter:EX.setSpaceAfterValue(e,a,this._previewScale);break;case PX.spaceBefore:EX.setSpaceBeforeValue(e,a,this._previewScale);break;case PX.leftIndent:EX.setLeftIndentValue(e,a,this._previewScale);break;case PX.rightIndent:EX.setRightIndentValue(e,a,this._previewScale)}}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype._setDefaultStyles=function(e,t){this._inlineStyle=null,this._defaultInlineStyle=e,this._paragraphStyle=null,this._defaultParagraphStyle=t;var n=this._inlineStyleToCommands(e),r=this._paragraphStyleToCommands(t,!1);this._applyCommands(this._innerDiv,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(SX(arguments[t]));return e}(n,r))},e.prototype._getDefaultInlineStyle=function(){var e=this._defaultInlineStyle;return{font:{postScriptName:e.font.postScriptName,fauxBold:e.font.fauxBold,fauxItalic:e.font.fauxItalic,size:e.font.size},underline:e.underline,leading:e.leading,tracking:e.tracking,color:e.color.clone(),stroke:{enabled:e.stroke.enabled,size:e.stroke.size,color:e.stroke.color.clone()},openType:e.openType}},e.prototype._getDefaultParagraphStyle=function(){return FL.clone(this._defaultParagraphStyle)},e}(),IX=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},OX=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},kX=function(){function e(e){this._productHandler=e}return e.prototype._switchSurface=function(e){var t=this._productHandler.product;if(null!=t){var n=t.surfaces;if(!(n.length<=0)){var r=n.indexOf(this._productHandler.currentSurface);-1===r&&(console.warn("Current surface is not found in product"),r=0);var i,o=n.length-1;i=null!=e?Math.max(Math.min(r+e,o),0):r<o?r+1:0,this.switchToSurface(n.get(i))}}},e.prototype.switchToSurface=function(e){return IX(this,void 0,void 0,function(){var t;return OX(this,function(n){return null==(t=this._productHandler.product)?[2]:0===t.surfaces.length?(console.warn("Surfaces are not found!"),[2]):(this._productHandler.currentSurface===e||(this._productHandler.currentSurface=e),[2])})})},e.prototype.getNextSurface=function(e){return IX(this,void 0,void 0,function(){var t,n,r,i;return OX(this,function(o){return null==(t=this._productHandler.product)?[2]:(n=t.surfaces).length<=0?[2,null]:(-1==(r=n.indexOf(this._productHandler.currentSurface))&&(console.warn("Current surface is not found in product"),r=0),i=r,null!=e?i+=e:i++,[2,t.surfaces.get(i)])})})},e.prototype.switchToNextSurface=function(){this._switchSurface()},e.prototype.switchSurfaceForward=function(){return IX(this,void 0,void 0,function(){return OX(this,function(e){return this._switchSurface(1),[2]})})},e.prototype.switchSurfaceBackward=function(){return IX(this,void 0,void 0,function(){return OX(this,function(e){return this._switchSurface(-1),[2]})})},e}();!function(e){e.switchToSurface="switchToSurface",e.getNextSurface="getNextSurface",e.switchToNextSurface="switchToNextSurface",e.switchSurfaceForward="switchSurfaceForward",e.switchSurfaceBackward="switchSurfaceBackward"}(CX||(CX={}));var RX,AX=function(){function e(e){this._args=e}return e.prototype.execute=function(){throw new OL},e}(),MX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DX=function(e){function t(t,n){var r=e.call(this,t)||this;return r._historyArgs=n,null==r._historyArgs&&(r._historyArgs={}),r._historyUpdateMode=null!=r._historyArgs.historyUpdateMode?r._historyArgs.historyUpdateMode:RX.Update,r}return MX(t,e),t.prototype.execute=function(){return e=this,void 0,n=function(){var e;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){switch(t.label){case 0:return null!=this._historyArgs.history&&this._historyArgs.history.pause(),[4,this._executeCommandBody()];case 1:return e=t.sent(),null!=this._historyArgs.history&&this._historyArgs.history.resume(this._historyUpdateMode!==RX.NotUpdate,this._historyArgs.historyUpdateMode===RX.ForceUpdate),[2,e]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype._executeCommandBody=function(){throw new OL},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}(AX);!function(e){e[e.NotUpdate=0]="NotUpdate",e[e.Update=1]="Update",e[e.ForceUpdate=2]="ForceUpdate"}(RX||(RX={}));var FX,LX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),BX=function(e){function t(t,n,r){var i=e.call(this,r,n)||this;return i._product=t,i}return LX(t,e),t}(DX),NX=function(){function e(){}return e.prototype.rotate=function(e,t){e.rotateAngle+=this._getRotationTypeAngle(t)},e.prototype._getRotationTypeAngle=function(e){switch(e){case FX.Rotate180:return 180;case FX.Rotate270:return 270;default:return 90}},e}();!function(e){e[e.None=0]="None",e[e.Rotate90=90]="Rotate90",e[e.Rotate180=180]="Rotate180",e[e.Rotate270=270]="Rotate270",e[e.Auto=-1]="Auto"}(FX||(FX={}));var jX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HX=function(e){function t(t,n,r,i){var o=e.call(this,r,n,i)||this;return o._productHandler=t,o._rotationAlgorithm=new NX,o}return jX(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){return[2,this.rotateProduct(this._args.rotationType)]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t.prototype.rotateProduct=function(e){return null!=this._productHandler&&null!=this._product&&this._rotationAlgorithm.rotate(this._productHandler.currentSurface,e),this._productHandler.contentAngle},t}(BX),zX=function(){},VX=function(){},UX=function(){},WX=function(){function e(e){this._itemData=e}return e.prototype.applyImage=function(e){var t=this.applyShape(e);return this._applyColor(e,"overlayColor")||t},e.prototype.applyLine=function(e){var t=this._applyOpacity(e);return this._applyColor(e)||t},e.prototype.applyDashedLine=function(e){var t=this._applyOpacity(e);return t=this._applyColor(e)||t,this._applyColor(e,"altColor","altColor")||t},e.prototype.applyBaseText=function(e){var t=this.applyShape(e);return t=this._applyColor(e)||t,t=this._applyFont(e)||t,t=this._applyTextProperty(e,"underline")||t,t=this._applyTextProperty(e,"tracking")||t,t=this._applyTextProperty(e,"leading")||t,t=this._applyShadow(e)||t,this._applyStroke(e)||t},e.prototype.applyShape=function(e){var t=this._applyOpacity(e);return t=this._applyFillColor(e)||t,t=this._applyBorderColor(e)||t,this._applyBorderWidth(e)||t},e.prototype.applyClipart=function(e){return this._applyClipartColors(e)},e.prototype.applyBarcode=function(e){var t=this.applyShape(e);return this._applyBarcodeColor(e)||t},e.prototype.applyPlaceholder=function(e){var t=!1;return r$.getContentEffect(e)===Oz.Colorize&&(t=this._applyColor(e,"contentFillColor","fillColor")||t,this._itemData.fillColor=null),t=this.applyShape(e)||t,this._applyColor(e,"overlayColor")||t},e.prototype._applyFillColor=function(e){return this._applyColor(e,"fillColor","fillColor")},e.prototype._applyClipartColors=function(e){var t=this,n=!1;return this._itemData.clipartColors.forEach(function(r,i){null!=r&&t._tryApplyColor(r,function(t){e.setColor(e.colorGroups[i],t),n=!0})}),n},e.prototype._applyTextFillColor=function(e){return this._applyColor(e,"fillColor","textFillColor")},e.prototype._applyFont=function(e){if(null==this._itemData.font)return!1;var t=!1;return this._itemData.font.postScriptName&&(e.font.postScriptName=this._itemData.font.postScriptName,t=!0),null!=this._itemData.font.fauxItalic&&(e.font.fauxItalic=this._itemData.font.fauxItalic,t=!0),null!=this._itemData.font.fauxBold&&(e.font.fauxBold=this._itemData.font.fauxBold,t=!0),this._itemData.font.size&&(e.font.size=this._itemData.font.size,t=!0),null!=this._itemData.font.allCaps&&(e.font.allCaps=this._itemData.font.allCaps,t=!0),t},e.prototype._applyTextProperty=function(e,t){return null!=this._itemData[t]&&(e[t]=this._itemData[t],!0)},e.prototype._applyShadow=function(e){if(null==this._itemData.shadow||null==e.shadow)return!1;var t=!1;return this._itemData.shadow.color&&this._itemData.shadow.color!==e.shadow.color.preview&&(t=this._tryApplyColor(this._itemData.shadow.color,function(t){return e.shadow.color=t})),this._itemData.shadow.angle&&this._itemData.shadow.angle!==e.shadow.angle&&(e.shadow.angle=this._itemData.shadow.angle,t=!0),this._itemData.shadow.distance&&this._itemData.shadow.distance!==e.shadow.distance&&(e.shadow.distance=this._itemData.shadow.distance,t=!0),this._itemData.shadow.size&&this._itemData.shadow.size!==e.shadow.size&&(e.shadow.size=this._itemData.shadow.size,t=!0),t},e.prototype._applyStroke=function(e){if(null==this._itemData.stroke||null==e.stroke)return!1;var t=!1;return this._itemData.stroke.color&&(t=this._tryApplyColor(this._itemData.stroke.color,function(t){return e.stroke.color=t})),this._itemData.stroke.size&&this._itemData.stroke.size!==e.stroke.size&&(e.stroke.size=this._itemData.stroke.size,t=!0),t},e.prototype._applyOpacity=function(e){return null!=this._itemData.opacity&&(e.opacity=this._itemData.opacity,!0)},e.prototype._applyBorderColor=function(e){return this._applyColor(e,"borderColor","borderColor")},e.prototype._applyBorderWidth=function(e){return null!=this._itemData.borderWidth&&(e.borderWidth=this._itemData.borderWidth,!0)},e.prototype._applyColor=function(e,t,n){return void 0===t&&(t="color"),void 0===n&&(n="color"),null!=this._itemData[n]&&this._tryApplyColor(this._itemData[n],function(n){"overlayColor"===t&&(e instanceof nV||e instanceof FV)?r$.setOverlayEffectColor(e,n):e[t]=n})},e.prototype._tryApplyColor=function(e,t){var n=oH.createColor(e);return!!n&&(t(n),!0)},e.prototype._applyBarcodeColor=function(e){return this._applyColor(e,"color","barcodeColor")},e}(),XX=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},GX=function(){function e(){}return e.prototype.apply=function(e,t,n){var r,i;if(!e)return!1;var o=!1;try{for(var s=XX(e.getAllItems()),a=s.next();!a.done;a=s.next())o=this.applyToItem(a.value,t,n)||o}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o},e.prototype.applyToItem=function(e,t,n){var r=n||e.themeBinding;if(!e||!t||!r)return!1;var i=this._getItemDataByItemType(e,t,r);return e instanceof nV?new WX(i).applyImage(e):e instanceof FV?this._applyToPlaceholder(e,t,r):e instanceof jz?new WX(i).applyDashedLine(e):e instanceof Bz?new WX(i).applyLine(e):e instanceof ZH?new WX(i).applyBaseText(e):e instanceof uz?new WX(i).applyBarcode(e):e instanceof RH?new WX(i).applyShape(e):e instanceof Tz?new WX(i).applyClipart(e):void 0},e.prototype._getItemDataByItemType=function(e,t,n){return e instanceof nV?this._getMergedItemData(t,n,n.img):e instanceof Bz?this._getMergedItemData(t,n,n.line):e instanceof ZH?this._getMergedItemData(t,n,n.text):e instanceof uz?this._getMergedItemData(t,n,n.barcode):this._getMergedItemData(t,n)},e.prototype._applyToPlaceholder=function(e,t,n){var r=this,i=!1,o=this._getMergedItemData(t,n);return null!=o.fillColor&&r$.isBgContainerItem(e)&&r$.clearImageContent(e),e.content instanceof vH&&(i=this.applyToItem(e.content,t,n)),null!=e.topFrames&&e.topFrames.map(function(e){i=r.applyToItem(e,t)||i}),null!=e.bottomFrames&&e.bottomFrames.map(function(e){i=r.applyToItem(e,t)||i}),new WX(o).applyPlaceholder(e)||i},e.prototype._getMergedItemData=function(e,t,n){var r,i,o=this;void 0===n&&(n=null);var s=new UX;if(t.styles){var a=t.styles.map(function(t){return o._getThemeItemData(t,e)});try{for(var l=XX(a),c=l.next();!c.done;c=l.next()){var u=c.value;u&&(s=this._applyStyle(s,u))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}return this._applyTHBMColor(e,t,n,s)},e.prototype._applyStyle=function(e,t){return e.color=hj(e.color,t.color),e.fillColor=hj(e.fillColor,t.fillColor),e.borderColor=hj(e.borderColor,t.borderColor),e.borderWidth=hj(e.borderWidth,t.borderWidth),e.altColor=hj(e.altColor,t.altColor),e.leading=hj(e.leading,t.leading),e.tracking=hj(e.tracking,t.tracking),e.underline=hj(e.underline,t.underline),e.horizontalLineColor=hj(e.horizontalLineColor,t.horizontalLineColor),e.verticalLineColor=hj(e.verticalLineColor,t.verticalLineColor),e.barcodeColor=hj(e.barcodeColor,t.barcodeColor),e.opacity=hj(e.opacity,t.opacity),e.font=this._applySettings(e.font,t.font),e},e.prototype._applyTHBMColor=function(e,t,n,r){var i=this;return r.fillColor=hj(r.fillColor,this._getTHMBColor(t.fill,e)),r.textFillColor=hj(r.textFillColor,this._getTHMBColor(t.textFill,e)),r.borderColor=hj(r.borderColor,this._getTHMBColor(t.border,e)),r.color=hj(r.color,this._getTHMBColor(n,e)),r.altColor=hj(r.altColor,this._getTHMBColor(t.altline,e)),r.horizontalLineColor=hj(r.horizontalLineColor,this._getTHMBColor(t.horizontal,e)),r.verticalLineColor=hj(r.verticalLineColor,this._getTHMBColor(t.vertical,e)),r.barcodeColor=hj(r.barcodeColor,this._getTHMBColor(t.barcode,e)),null!=t.shadow&&(null==r.shadow&&(r.shadow=new zX),r.shadow.color=hj(r.shadow.color,this._getTHMBColor(t.shadow,e))),null!=t.stroke&&(null==r.stroke&&(r.stroke=new VX),r.stroke.color=hj(r.stroke.color,this._getTHMBColor(t.stroke,e))),r.clipartColors=null!=t.clipartColors?t.clipartColors.map(function(t){return i._getTHMBColor(t,e)}):[],r},e.prototype._applySettings=function(e,t){var n,r;if(null==t)return e;if(null==e)return t;try{for(var i=XX(Object.getOwnPropertyNames(t)),o=i.next();!o.done;o=i.next()){var s=o.value,a=t[s];null!=a&&(e[s]=a)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e},e.prototype._getThemeItemData=function(e,t){return e?t[e]:null},e.prototype._getTHMBColor=function(e,t){return e?t[e]:null},e}(),qX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$X=function(e){function t(t,n,r){var i=e.call(this,r,n)||this;return i._items=t,i}return qX(t,e),t}(DX),YX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KX=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},QX=function(e){function t(t,n,r,i,o,s,a){var l=e.call(this,n.dataList.map(function(e){return e.item}),t,n)||this;return l._productHandler=r,l._product=i,l._variableItemHelper=o,l._commandManager=s,l._eventManager=a,l}return YX(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){return[2,this._setImageDataList(this._args.dataList,this._args.keepLocation)]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype._setImageDataList=function(e,n){var r,i;this._normalizeDataList(e);try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),s=o.next();!s.done;s=o.next()){var a=s.value,l=a.item,c=a.imageData,u=a.tags,h=a.rotatedRectangle;if(l instanceof FV){var d=r$.createImageContentForPlaceholder(l,c,this._productHandler,this._args.dpi);d instanceof nV&&this._ensureImageItemName(d),l.isStubContent=!1,null!=d&&null!=u&&(d.tags=u),this._commandManager.execute(GG.addContent,{placeholder:l,content:d},RX.NotUpdate)}else{var p=r$.getImageItem(l),f=this._productHandler.getHandler(p);p.effect!==Oz.Colorize&&(p.fillColor=oH.createColor("rgba(0, 0, 0, 0)")),null!=p.overlayEffect&&(p.imagePermissions.allowKeepOverlayColor?r$.setOverlayEffectColor(p,p.overlayEffect.color):p.overlayEffect.color=null),t.setDataToImage(c,p),null!=u&&(p.tags=u),null!=h?f.setTransformedRectangle(h):f.updateRectangle(n),f.quickUpdate(),this._ensureImageItemName(p)}this._eventManager.imageContentChangedEvent.notify(l)}}catch(m){r={error:m}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}this._productHandler.updateSelection()},t.prototype._ensureImageItemName=function(e){e.isVariable&&(e.isVariable=!1,this._variableItemHelper.setVariableValue(e,!0,!0))},t.prototype._normalizeDataList=function(e){for(var t=[],n=e.length,r=function(n){var r=e[n].item;if(r instanceof FV&&null!=r.linkId&&-1===t.indexOf(r.linkId)){var o=i._product.getAllItems({ignoreMockups:!1,flatGroupItems:!0}).filter(function(e){return e instanceof FV&&e.linkId===r.linkId});e.push.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(KX(arguments[t]));return e}(o.map(function(t){return{item:t,imageData:e[n].imageData,tags:e[n].tags}}))),t.push(r.linkId)}},i=this,o=0;o<n;o++)r(o)},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t.setDataToImage=function(e,t){null!=e.name&&(t.displayName=e.name),t.isUserImage=e.isUserImage,t.source.setIdWithOrigin(e.storageId,e.origin),t.source.pageIndex=e.pageIndex,t.source.width=e.size.width,t.source.height=e.size.height,t.source.isVector=e.isVector},t}($X),ZX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JX=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eG=function(e){function t(t,n,r,i,o,s,a,l){var c=e.call(this,r,n,i)||this;return c._productHandler=t,c._commandManager=o,c._productThemeManager=s,c._canvas=a,c._eventManager=l,c}return ZX(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(n){return[2,this.changeBackground(this._args.surfaces,(e=this._args.data instanceof lV)?"image":"solidColor",e?function(e){e instanceof FV&&t._setBgImage(e,t._args.data)}:function(e){(e instanceof FV||e instanceof MH)&&t._selectBgRectangleColor(e,t._args.data)},e?null:this._args.data)]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.changeBackground=function(e,t,n,r){var i,o,s=this;try{var a=void 0;switch(t){case"image":case"solidColor":a=e.map(function(e){return s.getOrCreateBgItems(e,t)}).reduce(function(e,t){return e.concat(t)},[]);break;default:throw new OL}try{for(var l=JX(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(u instanceof FV||u instanceof MH){if(u instanceof FV){r$.clearImageContent(u);var h=u.content;r instanceof $j?(r.equals(u.fillColor)||(u.themeBinding.fill=null,h.themeBinding.fill=null),u.fillColor=oH.createColor(r),h.fillColor=oH.createColor(r)):null!=r&&(u.themeBinding.fill=r.title,h.themeBinding.fill=r.title)}n(u)}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return r$.updateItems(a,this._productHandler,this._canvas),a}finally{}},t.prototype.getOrCreateBgItems=function(e,t){var n,r,i,o,s=this,a=function(e){var t=new FV(e);return t.contentResizeMode=wV.Fill,t.content=new nV,s._productHandler.getHandler(t.content).setRectangle(KN.fromRectangleF(e)),t},l=function(e){return e.every(function(e){return e instanceof FV||e instanceof MH})},c=e.containers.first(function(e){return e.name===bU.BG_CONTAINER_NAME}),u=c.items.toArray();if(0===u.length){var h=a((f=e.printAreas.getItem(0)).getBounds(UV.Bleed));return this._addItem(e,c,h,!1),[h]}if(e.printAreas.length===u.length){for(var d=[],p=0;p<e.printAreas.length;p++){var f=e.printAreas.getItem(p),m=u[p];if(m instanceof nV){var g=m.frontendPermissions;this._commandManager.execute(GG.deleteItems,{items:[m],force:!0}),(h=a(f.getBounds(UV.Bleed))).frontendPermissions=g,this._addItem(e,c,h,!1),d.push(h)}else if(m instanceof FV){var y=m;if(t!==bU.BG_SOLIDCOLOR){var _=f.getBounds(UV.Bleed),v=$N.rectangle(_.left,_.top,_.width,_.height),b=!1;y.sourcePath.isEqual(v)||(y.sourcePath=v,b=!0),FN.isEqual(y.sourceRectangle,_)||(y.sourceRectangle=_,b=!0),(b&&0!==y.transform.translateX||0!==y.transform.translateY)&&(y.transform.setTranslateX(0),y.transform.setTranslateY(0));var w=KN.fromRectangleF(_),C=this._productHandler.getHandler(y.content);C.getTransformedRectangle().equals(w)||(C.setTransformedRectangle(w),b=!0),b&&r$.updateItems(u,this._productHandler,this._canvas,{redraw:!0})}else y.content instanceof nV&&y.content.source.type!=nV.ImageSourceType.None&&(y.sourceRectangle=f.getBounds(UV.Bleed));d.push(y)}}return d}if(l(u)){var x=bU.BG_SOLIDCOLOR;if(t===x&&null==u.find(function(e){return e.name===x})){var E=(i=(f=e.printAreas.getItem(0)).getBounds(UV.Bleed),o=new MH(i),s._productHandler.getHandler(o).setRectangle(KN.fromRectangleF(i)),o.borderWidth=0,o);E.name=x,this._addItem(e,c,E,!1)}if(null!=this._historyArgs.history&&this._historyArgs.history.pause(),l(u=c.items.toArray()))try{for(var S=JX(u),P=S.next();!P.done;P=S.next()){var T=P.value,I=T.name===x;T.visualizationPermissions.noPrint=t===x?!I:I,T.visualizationPermissions.noShow=t===x?!I:I}}catch(O){n={error:O}}finally{try{P&&!P.done&&(r=S.return)&&r.call(S)}finally{if(n)throw n.error}}return r$.updateItems(u,this._productHandler,this._canvas,{redraw:!0}),null!=this._historyArgs.history&&this._historyArgs.history.resume(),u}throw new OL("Containers contains unexpected content")},t.prototype._addItem=function(e,t,n,r){this._commandManager.execute(XG.addItems,{surface:e,targetContainer:t,items:[n],selectOnCanvas:!0})},t.prototype._setBgImage=function(e,t){var n=e.content;this._productHandler.getHandler(n).setTransformedRectangle(this._getBgImageRectangle(e,t)),e.fillColor=oH.createColor("rgba(0,0,0,0)"),n.fillColor=oH.createColor("rgba(0,0,0,0)"),null!=n.overlayEffect&&(n.imagePermissions.allowKeepOverlayColor?r$.setOverlayEffectColor(n,n.overlayEffect.color):n.overlayEffect.color=null),QX.setDataToImage(t,n),this._eventManager.imageContentChangedEvent.fire(e)},t.prototype._getBgImageRectangle=function(e,t){var n,r,i=this._productHandler.getHandler(e).getTransformedRectangle(!1),o=t.size.width/t.size.height;return o<i.width/i.height?r=(n=i.width)/o:n=(r=i.height)*o,new KN(i.centerX,i.centerY,n,r,0)},t.prototype._selectBgRectangleColor=function(e,t){t instanceof $j?e.fillColor=oH.createColor(t):null!=t&&(e.themeBinding.fill=t.title,(new GX).applyToItem(e,this._productThemeManager.currentProductTheme))},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}(BX),tG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nG=function(e){function t(t,n,r){var i=e.call(this,r,n)||this;return i.surface=t,i}return tG(t,e),t}(DX),rG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iG=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},oG=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},sG=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},aG=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(sG(arguments[t]));return e},lG=function(e){function t(t,n,r,i,o,s,a,l){var c=e.call(this,r.surface,n,r)||this;return c._productHandler=t,c._productThemeManager=i,c._canvas=o,c._variableItemHelper=s,c._commandManager=a,c._eventManager=l,c}return rG(t,e),t.prototype._executeCommandBody=function(){return iG(this,void 0,void 0,function(){var e,t,n,r,i,o,s=this;return oG(this,function(a){switch(a.label){case 0:return t=(e=this._args).items,n=e.targetGroupItem,r=e.index,i=e.orderIndex,o=FL.extend({targetContainer:this._productHandler.userEditContainer,surface:this._productHandler.currentSurface,selectOnCanvas:!0,index:null,orderIndex:null,ignoreOrderRules:!1,ignoreCanvasRotate:!0,createCloneName:!1},this._args),this._historyArgs.history.pause(),null==n?[3,2]:[4,this._insertItemsIntoGroupItem(t,n,r,i)];case 1:return a.sent(),this._eventManager.itemCollectionChangedEvent.notify(),[3,4];case 2:return t.forEach(function(e){return s._addItem(o,e)}),this._canvas.updateTexts(),[4,r$.waitForItemsUpdated(t,this._canvas)];case 3:a.sent(),a.label=4;case 4:return t.some(function(e){return e instanceof BV})||this._canvas.redraw(),this._historyArgs.history.resume(),o.selectOnCanvas&&this._commandManager.execute(qG.selectItems,{items:t.filter(function(e){return!e.locked})}),[2]}})})},t.prototype._addItem=function(e,t){null!=this._productThemeManager.currentProductTheme&&(new GX).applyToItem(t,this._productThemeManager.currentProductTheme),null==e.index&&(e.index=-1);var n=e.targetContainer;this._args.createCloneName&&(t.name=r$.createCloneName(t,this._variableItemHelper,this._productHandler));var r=n.items;if(r.add(t),-1!==e.index)n.items.move(r.length-1,e.index);else if(!e.ignoreOrderRules&&t instanceof nV&&r.length>1){var i=FL.find(r.toArray().slice().reverse(),function(e){return e instanceof gz||e instanceof PV}),o=FL.find(r.toArray(),function(e){return e instanceof ZH}),s=-1;null!=i?s=r.indexOf(i)+1:null!=o&&(s=r.indexOf(o)),-1!==s&&n.items.move(r.length-1,s)}},t.prototype._insertItemsIntoGroupItem=function(e,t,n,r){return iG(this,void 0,void 0,function(){var i,o,s;return oG(this,function(a){switch(a.label){case 0:if(t instanceof _V?t.addItems(e,n,r):t.addItems(e,n),!((i=aG(e,e.filter(function(e){return e instanceof Cz}).reduce(function(e,t){return aG(e,t.getNestedItems(!0))},[]))).length>0))return[3,2];for(o=t;null!=o.parentGroupItem;)o=o.parentGroupItem;return s=o.locked,o.locked=!0,[4,r$.waitForItemsUpdated(i,this._canvas)];case 1:a.sent(),o.locked=s,a.label=2;case 2:return[2]}})})},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}(nG),cG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uG=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},hG=function(e){function t(t,n,r,i,o,s){var a=e.call(this,r.items,n,r)||this;return a._productHandler=t,a._canvas=i,a._commandManager=s,a._conf=o.messages.delete,a}return cG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){return e=FL.extend({force:!1,autoUngroup:!0,autoParentGroupDelete:!0},this._args),this.deleteItems(e.items,e.force,e.autoUngroup,e.autoParentGroupDelete),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.deleteItems=function(e,t,n,r){var i,o;if(0!=e.length&&(e.every(function(e){return e.manipulationPermissions.allowDelete})||t)&&(t||!this._conf.enabled||confirm(this._conf.message))){for(var s=new Map,a=0;a<e.length;a++){var l=e[a],c=l.parentGroupItem;null!=c?(s.has(c)||s.set(c,[]),s.get(c).push(l)):this.deleteItem(l)}try{for(var u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),h=u.next();!h.done;h=u.next()){var d=uG(h.value,2);this._removeChildItemsFromGroup(d[0],d[1],r,n)}}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}this._canvas.updateTexts(),this._canvas.updateSelection(),this._productHandler.redraw()}},t.prototype._removeChildItemsFromGroup=function(e,t,n,r){t.forEach(e instanceof _V?function(t){return e.removeItems([t])}:function(t){return e.items.remove(t)}),n&&0===e.items.length?this.deleteItem(e):r&&e.items.length<2&&this._commandManager.execute(GG.ungroupItems,{items:e.items.toArray()})},t.prototype.deleteItem=function(e){if(null!=e){var t=null!=e.parentGroupItem?e.parentGroupItem:e.parentContainer;null!=t&&t.items.contains(e)&&(t instanceof _V?t.removeItems([e]):t.items.remove(e))}},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),dG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pG=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i._productHandler=t,i._canvas=r,i}return dG(t,e),t.prototype.execute=function(){return e=this,void 0,n=function(){var e,t,n=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(r){return e=[],t=null!=this._args.multiselection&&this._args.multiselection,this._args.items.forEach(function(r){var i=n._productHandler.getHandler(r),o=!1;(i instanceof aW||i instanceof b$)&&i.isEmpty()&&(o=!0),null==i||i.isLocked()||!i.isVisible()&&!o||r.visualizationPermissions.noShow||(n._canvas.isItemHandlerSelected(i)&&t?n._canvas.removeSelectedItemHandler(i):t?n._canvas.addSelectedItemHandler(i):e.push(i),n.lastSelectedItem=r)}),t||this._canvas.setSelectedItemHandlers(e),this._canvas.redraw(),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t}(AX),fG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mG=function(e){function t(t,n,r){var i=e.call(this,null)||this;return i._productHandler=t,i._commandManager=n,i._canvas=r,i._canSelectItem=function(e){var t=i._productHandler.currentSurface;return null!=t&&!e.visualizationPermissions.noShow&&!e.locked&&t.getBackgroundItem()!=e},i}return fG(t,e),t.prototype.execute=function(){return e=this,void 0,n=function(){var e,t,n,r;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(i){switch(i.label){case 0:return null==(e=this._productHandler.currentSurface)||null==(t=e.printAreas)||t.count()<=0||null==(n=e.getAllItems({ignoreMockups:!0}).toArray())||n.length<=0||null==this._canvas?[2]:(null==r&&(r=n.reverse().find(this._canSelectItem)),[4,this._canvas.waitUpdate()]);case 1:return i.sent(),null!=r&&this._commandManager.execute(qG.selectItems,{items:[r],multiselection:!1}),[2]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t}(AX),gG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yG=function(e){function t(t){var n=e.call(this,null)||this;return n._canvas=t,n}return gG(t,e),t.prototype.execute=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){return this._canvas.clearSelectedItemHandlers(),this._canvas.redraw(),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t}(AX),_G=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vG=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},bG=function(e){function t(t,n,r,i,o){var s=e.call(this,r.items,n,r)||this;return s._productHandler=t,s._commandManager=i,s._variableItemHelper=o,s}return _G(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n,r,i,o,s,a,l,c=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(u){switch(u.label){case 0:return 0==this._items.length?[2]:(e=this._items[0].parentContainer,t=this._items[0].parentGroupItem,n=this._items.map(function(e){return c.cloneItem(e)}),r=[],i=[],o=[],s=function(e,s){var a=c._items.findIndex(function(t){return t===e});if(a>-1&&(r.push(s),i.push({item:n[a],index:s}),t instanceof _V)){var l=t.getItemOrderIndex(e);o.push({clone:n[a],orderIndex:l+1})}},t?t.items.toArray().forEach(s):e.items.toArray().forEach(s),a=Math.max.apply(Math,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(vG(arguments[t]));return e}(r))+1,l=i.sort(function(e,t){return e.index-t.index}).reverse().map(function(e){return e.item}),t?(t instanceof _V?o.sort(function(e,t){return e.orderIndex-t.orderIndex}).reverse().forEach(function(e){return t.addItem(e.clone,null,e.orderIndex)}):t.addItems(l,a),[3,3]):[3,1]);case 1:return[4,this._commandManager.execute(XG.addItems,{surface:e.parentComponent,targetContainer:e,items:l,selectOnCanvas:!0,index:a,ignoreOrderRules:null,ignoreCanvasRotate:!0,createCloneName:!0})];case 2:u.sent(),u.label=3;case 3:return[4,this._commandManager.execute(qG.selectItems,{items:n})];case 4:return u.sent(),[2]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.cloneItem=function(e){var t=e.clone(!0),n=5,r=5,i=this._productHandler.contentAngle;i>0&&(90!==i&&180!==i||(r=-5),180!==i&&270!==i||(n=-5));var o=this._productHandler.regionForCurrentContainer,s=r$.getItemBoundsForViolationCheck(this._productHandler.getHandler(e));s.left+=n,s.top+=r;var a=0,l=0;null==o||o.containsRectangle(s)||(a=(a=o.right-s.right)<0?a:0,l=(l=o.bottom-s.bottom)<0?l:0);var c=function(e){e.transform.move(n+a,r+l),e instanceof FV&&e.updateContentAndFrames(c),e instanceof Cz&&e.applyToItems(c)};for(var u in c(t),t)-1!=u.indexOf("$$")&&delete t[u];return t},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),wG=function(){return(wG=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},CG=function(){function e(e,t,n){var r=this;this._productHandler=e,this._canvas=t,this._eventManager=n,this.maskSymbol="%",this._eventManager.addItemAdded(function(e){return r.initVariableItem(e.item)})}return e.prototype.initVariableItems=function(e){var t=this;e.getAllItems({ignoreMockups:!1,flatGroupItems:!0,excludeGroupItems:!0}).forEach(function(e){return t.initVariableItem(e)})},e.prototype.setVariableValues=function(e,t){var n=this;0!==e.length&&e.forEach(function(e){n.setVariableValue(e,t)})},e.prototype.setVariableValue=function(e,t,n){r$.isVariableItem(e)&&this._setVariableValue(e,t),e instanceof FV&&!e.isEmptyContent&&r$.isVariableItem(e.content)&&this._setVariableValue(e.content,t),n||r$.updateItems([e],this._productHandler,this._canvas)},e.prototype.getVariableItemDisplayName=function(e){if(null!=e){var t=this.maskSymbol,n=new RegExp("^"+t+"|"+t+"$","gm");return e.replace(n,"")}},e.prototype._isCanBeVariable=function(e){return e.canSetIsVariable()},e.prototype.getRealItemName=function(e){return this._isCanBeVariable(e)&&e.isVariable?e.name.replace(new RegExp("^"+this.maskSymbol+"|"+this.maskSymbol+"$","gm"),""):e.name},e.prototype.createNewItemName=function(e,t){return this._isCanBeVariable(e)&&e.isVariable?""+this.maskSymbol+t+this.maskSymbol:t},e.prototype._setVariableValue=function(e,t){if(e.isVariable!==t){if(t)e.name=""+this.maskSymbol+e.name+this.maskSymbol;else{var n=new RegExp("^"+this.maskSymbol+"|"+this.maskSymbol+"$","gm");e.name=e.name.replace(n,"")}e.isVariable=t}},e.prototype.initVariableItem=function(e){var t=e instanceof FV&&!e.isEmptyContent?e.content:e;if(t instanceof FH){var n=this.maskSymbol,r=t.name;0===r.indexOf(n)&&r.lastIndexOf(n)===r.length-1&&(t.isVariable=!0)}},e.getVariablesFromItems=function(t){var n=[];return t.forEach(function(t){var r;t instanceof ZH?r=e.getVariablesFromTextItem(t):t instanceof FV?r=e.getVariablesFromPlaceholderItem(t):t instanceof uz?r=e.getVariablesFromBarcodeItem(t):t instanceof nV?r=e.getVariablesFromImageItem(t):t instanceof zz?r=e.getVariablesFromEllipseItem(t):t instanceof MH?r=e.getVariablesFromRectangleItem(t):t instanceof RH?r=e.getVariablesFromShapeItem(t):t instanceof Cz&&(r=e.getVariablesFromGroupItem(t)),FL.isEmpty(null!=r?FL.without(r,null):null)||r.forEach(function(e){null==n.find(function(t){return t.name==e.name&&t.type==e.type})&&n.push(e)})}),n},e.getVariablesFromGroupItem=function(e){return this.getVariablesFromItems(e.getNestedItems(!0))},e.getVariablesFromShapeItem=function(e){return null},e.getVariablesFromEllipseItem=function(e){return null},e.getVariablesFromRectangleItem=function(e){return null},e.getVariablesFromImageItem=function(e){return e.isVariable?[{name:e.name,type:"Image",value:null}]:null},e.getVariablesFromPlaceholderItem=function(e){return e.isVariable?e instanceof FV&&e.isBarcodePlaceholder?[wG(wG({},this.getVariablesFromBarcodeItem(e.content,!0)[0]),{name:e.name,type:"BarcodePlaceholder"})]:[{name:e.name,type:"ImagePlaceholder",value:null}]:null},e.getVariablesFromBarcodeItem=function(e,t){return void 0===t&&(t=!1),t||e.isVariable?[{name:e.name,type:"Barcode",barcodeFormat:e.barcodeFormat,barcodeSubType:e.barcodeSubType,value:e.barcodeContent}]:null},e.getVariablesFromTextItem=function(t){var n=[];if(e.isInStringPlacehodler(t))return t.placeholders.forEach(function(e){n.push({name:e.name,type:"InString",value:null!=e.value&&""!==e.value?e.value:e.name})}),n;var r=e.getInterpolationVariables(t);return FL.isEmpty(r)?t.isVariable?[{name:t.name,type:"Text",value:t.text}]:null:r},e.getInterpolationVariables=function(t){var n=[];if(e.isInStringPlacehodler(t))return n;for(var r,i=aj(t.text)?(r=t.text,(new DOMParser).parseFromString("<span>"+r+"</span>","application/xml").querySelector("span").textContent):t.text,o=/\{\{(.+?)\}\}/g,s=o.exec(i);null!=s;)n.push({name:s[1],type:"InString",value:s[1],values:[],mask:null}),s=o.exec(i);return n},e.isInStringPlacehodler=function(e){return e instanceof ZH&&e.placeholders.length>0},e}(),xG=function(){function e(){}return e.prototype.convert=function(e){var t=this._replaceInterpolationStrings(e);return!t.isEmpty&&(e.originalText=t.inStringText,e.text=t.inStringText,e.placeholders.addRange(e.placeholders.concat(t.placeholders)),!0)},e.prototype._replaceInterpolationStrings=function(e){var t,n,r=CG.getInterpolationVariables(e),i=new EG;if(FL.isEmpty(r))return i;var o=e.text;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=s.next();!a.done;a=s.next()){var l=a.value,c="[#"+l.name+"]",u="{{"+l.name+"}}";o=aj(e.text)?SG(o,u,c):o.replace(u,c);var h=new hV(c,l.name,l.mask,l.name,l.values);i.placeholders.push(h)}}catch(d){t={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.inStringText=o,i},e}(),EG=function(){function e(){this.placeholders=[]}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return FL.isEmpty(this.placeholders)},enumerable:!0,configurable:!0}),e}();function SG(e,t,n){var r=(new DOMParser).parseFromString("<body>"+e+"</body>","text/xml").getElementsByTagName("body")[0];if(!r.textContent.includes(t))return e;for(var i=r,o=null;i!==o;){if(!(i=FL.find(i.childNodes,function(e){return e.textContent.includes(t)})))return e;FL.isEmpty(i.childNodes)&&(o=i)}return o.textContent=o.textContent.replace(t,n),r.innerHTML}var PG,TG,IG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),OG=function(e){function t(t,n,r,i){var o=e.call(this,r,n)||this;return o._productHandler=t,o._canvas=i,o}return IG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){return this.replaceInterpolationPlaceholders(),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.replaceInterpolationPlaceholders=function(){var e=FL.filter(this._product.getAllItems({ignoreMockups:!1,flatGroupItems:!0}),function(e){return e instanceof ZH}),t=new xG,n=[];return e.forEach(function(e){t.convert(e)&&n.push(e)}),n.length>0&&r$.updateItems(n,this._productHandler,this._canvas),n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}(BX),kG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),RG=function(e){function t(t,n,r,i,o){var s=e.call(this,n,t,r)||this;return s._productThemeManager=i,s._commandManager=o,s}return kG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){return[2,this._productThemeManager.applyProductTheme(this._args.theme,this._product,this._commandManager)]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}(BX),AG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),MG=function(e){function t(t,n,r,i,o){var s=e.call(this,[r.placeholder],n,r)||this;return s._productHandler=t,s._productThemeManager=i,s._eventManager=o,s}return AG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n,r,i;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(o){return e=this._args.content,n=this._productHandler.getHandler(t=this._args.placeholder),null!=e?(r=this._productHandler.getHandler(e),t.content=e,i=this._productThemeManager.currentProductTheme,t.contentPermissions.imagePermissions.allowKeepOverlayColor||null!=t.contentOverlayEffect?null!=i&&this._productThemeManager.applyToItem(t,i):t.imageContent.overlayEffect=null,n.content=r,t.content.getItemChangedEvent().fire()):(t.content=null,n.content=null,t.itemPermissions.itemToolbarPermissions.showEditButton=!0),this._eventManager.imageContentChangedEvent.fire(t),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),DG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),FG=function(e){function t(t,n,r,i){var o=e.call(this,r.items,n,r)||this;return o._productHandler=t,o._canvas=i,o}return DG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){if(0===this._items.length)return[2];for(e=0;e<this._items.length;e++)this.alignItem(this._items[e],this._args.align);return this._canvas.updateTexts(),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.alignItem=function(e,t){var n=e.locked?null:this._productHandler.getHandler(e);null!=n&&n instanceof UU&&this._canvas.alignItemHandler(n,t)},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),LG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),BG=function(e){function t(t,n,r){var i=e.call(this,null,t,n)||this;return i._canvas=r,i}return LG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){return this._canvas.alignItemHandlers(this._args.align),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),NG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jG=function(e){function t(t,n,r,i,o){var s=e.call(this,r.items,n,r)||this;return s._productHandler=t,s._commandManager=i,s._canvas=o,s}return NG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){return[2,this.bringItems(this._items,this._args.position)]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.bringItems=function(e,t){var n=this;if(0!==e.length){var r=this._productHandler.currentSurface;"front"===t||"levelUp"===t?r.containers.reverse().forEach(function(r){return r.items.reverse().forEach(function(r){r instanceof vH&&FL.contains(e,r)&&n.bringItem(r,t,!1)})}):"bottom"!==t&&"levelDown"!==t||r.containers.forEach(function(r){return r.items.forEach(function(r){r instanceof vH&&FL.contains(e,r)&&n.bringItem(r,t,!1)})});var i=e.map(function(e){return n._productHandler.getHandler(e)});this._canvas.setSelectedItemHandlers(i),this._canvas.updateTexts()}},t.prototype.bringItem=function(e,t,n){if(null==n&&(n=!0),e.itemPermissions.allowZOrderChange){var r=e.parentContainer.items.toArray(),i=FL.indexOf(r,e),o=r.length-1,s=i;if(i>=0)switch(t){case"front":s=o;break;case"levelUp":s=Math.min(i+1,o);break;case"levelDown":s=Math.max(i-1,0);break;case"bottom":s=0}this._commandManager.execute(GG.moveItem,{item:e,newIndex:s,needUpdate:n})}},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),HG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zG=function(e){function t(t,n,r){var i=e.call(this,[r.item],n,r)||this;return i._productHandler=t,i}return HG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){return[2,this.moveTo(this._args.item,this._args.newIndex,this._args.needUpdate)]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.moveTo=function(e,t,n){null==n&&(n=!0);var r=null!=e?e.parentContainer:null;if(null!=r){var i=r.items.toArray(),o=Math.max(i.length-1,0),s=FL.indexOf(i,e);t=Math.min(Math.max(t,0),o),s=Math.min(Math.max(s,0),o);var a=this._getMoveRange(i,s);if(null==a)return;if(t<a[0]?t=a[0]:t>a[1]&&(t=a[1]),s===t)return;r.items.move(s,t),this._productHandler.redraw()}},t.prototype._getMoveRange=function(e,t){if(t<0)return null;if(null==e)return null;if(t>=e.length)return null;for(var n=t,r=t,i=t-1;i>=0&&e[i].itemPermissions.allowZOrderChange;i--)n=i;for(i=t+1;i<e.length&&e[i].itemPermissions.allowZOrderChange;i++)r=i;return[n,r]},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),VG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),UG=function(e){function t(t,n,r){var i=e.call(this,[],n,r)||this;return i._itemsDataApplier=t,i}return VG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){switch(t.label){case 0:switch(this._args.type){case PG.AutoScaledTextItem:e=new nz;break;case PG.BarcodeItem:e=new uz;break;case PG.BoundedTextItem:e=new gz;break;case PG.CurvedTextItem:e=new Dz;break;case PG.EllipseItem:e=new zz;break;case PG.ImageItem:e=new nV;break;case PG.LineItem:e=new Bz;break;case PG.PathBoundedTextItem:e=new PV;break;case PG.PlaceholderItem:e=new FV;break;case PG.PlainTextItem:e=new BV;break;case PG.RectangleItem:e=new MH;break;case PG.ArchedTextItem:e=new zV;break;case PG.ShapeItem:e=new RH}return null==this._args.itemData?[2,e]:[4,this._itemsDataApplier.applyToItem(e,this._args.itemData,{changePosition:!0,relativeToPrintArea:null==this._args.relativeToPrintArea||this._args.relativeToPrintArea})];case 1:return t.sent(),[2,e]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X);(TG=PG||(PG={})).isText=function(e){return[TG.AutoScaledTextItem,TG.BoundedTextItem,TG.CurvedTextItem,TG.PathBoundedTextItem,TG.PlainTextItem,TG.ArchedTextItem].includes(e)},TG.getType=function(e){if(e instanceof nz)return TG.AutoScaledTextItem;if(e instanceof uz)return TG.BarcodeItem;if(e instanceof gz)return TG.BoundedTextItem;if(e instanceof Dz)return TG.CurvedTextItem;if(e instanceof zz)return TG.EllipseItem;if(e instanceof nV)return TG.ImageItem;if(e instanceof Bz)return TG.LineItem;if(e instanceof PV)return TG.PathBoundedTextItem;if(e instanceof FV)return TG.PlaceholderItem;if(e instanceof BV)return TG.PlainTextItem;if(e instanceof zV)return TG.ArchedTextItem;if(e instanceof MH)return TG.RectangleItem;if(e instanceof RH)return TG.ShapeItem;if(e instanceof _V)return TG.LayoutItem;if(e instanceof Tz)return TG.ClipartItem;if(e instanceof Cz)return TG.GroupItem;throw new kL("ItemType: Unexpected item!")},function(e){e[e.AutoScaledTextItem=0]="AutoScaledTextItem",e[e.BarcodeItem=1]="BarcodeItem",e[e.BoundedTextItem=2]="BoundedTextItem",e[e.CurvedTextItem=3]="CurvedTextItem",e[e.EllipseItem=4]="EllipseItem",e[e.ImageItem=5]="ImageItem",e[e.LineItem=6]="LineItem",e[e.PathBoundedTextItem=7]="PathBoundedTextItem",e[e.PlaceholderItem=8]="PlaceholderItem",e[e.PlainTextItem=9]="PlainTextItem",e[e.RectangleItem=10]="RectangleItem",e[e.ArchedTextItem=11]="ArchedTextItem",e[e.ShapeItem=12]="ShapeItem",e[e.GroupItem=13]="GroupItem",e[e.LayoutItem=14]="LayoutItem",e[e.ClipartItem=15]="ClipartItem"}(PG||(PG={}));var WG,XG,GG,qG,$G=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),YG=function(e){function t(t,n,r,i){var o=e.call(this,[],r,i)||this;return o._itemsDataApplier=t,o._productHandler=n,o}return $G(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n,r=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(i){switch(i.label){case 0:e=!1,t=(null!=this._args.items?this._args.items:this._productHandler.selectedItems).filter(function(e){return e instanceof(r._args.type||Object)}),n=0,i.label=1;case 1:return n<t.length?[4,this._itemsDataApplier.applyToItem(t[n],this._args.itemData,this._args.applyParams)]:[3,4];case 2:e=i.sent()||e,i.label=3;case 3:return n++,[3,1];case 4:return this._productHandler.redraw(),[2]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),KG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QG=function(e){function t(t,n,r){var i=e.call(this,[],n,t)||this;return i._productHandler=r,i}return KG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(n){return e=this._args.scale,(null!=this._args.items?this._args.items:this._productHandler.selectedItems).forEach(function(n){if(n instanceof FV){var r=t._productHandler.getHandler(n);r.forceQualityChangeInfoBar=null!=t._args.forceQualityChangeInfoBar&&t._args.forceQualityChangeInfoBar,OW(r.getContentScale(),e)||r.setContentScale(e),t._historyArgs.historyUpdateMode!==RX.NotUpdate&&r.quickUpdate()}}),this._productHandler.updateSelection(),this._productHandler.redraw(),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),ZG=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JG=function(e){function t(t,n,r){var i=e.call(this,[],n,t)||this;return i._productHandler=r,i}return ZG(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){return(null!=this._args&&null!=this._args.items?this._args.items:this._productHandler.selectedItems).forEach(function(t){t instanceof FV&&e._productHandler.getHandler(t).resetContent()}),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),eq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tq=function(e){function t(t,n,r){var i=e.call(this,[],n,t)||this;return i._productHandler=r,i}return eq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(r){return null==this._args.barcodeFormat||FL.isEmpty(e=null!=this._args.items?this._args.items:this._productHandler.selectedItems)||((t=new sz).barcodeFormat=this._args.barcodeFormat,t.barcodeSubType=this._args.barcodeFormat===JH.QR_CODE?ez.VCard:ez.None,e.filter(function(e){return e instanceof FV}).forEach(function(e){if(null==e.content||null==e.barcodeFormat||!(e.content instanceof uz))return!1;e.content=r$.createImageContentForPlaceholder(e,t,n._productHandler),e.content.barcodeContent=null,e.isStubContent=!0,n._productHandler.getHandler(e).content=n._productHandler.getHandler(e.content)})),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),nq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rq=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},iq=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(rq(arguments[t]));return e},oq=function(e){function t(t,n,r){var i=e.call(this,[],n,t)||this;return i._productHandler=r,i}return nq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){return(null!=this._args.items?this._args.items:this._productHandler.selectedItems).filter(function(e){return e instanceof PV}).forEach(function(t){return e._setColumnCount(t,e._args.value)}),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype._setColumnCount=function(e,t){for(var n=function(e){if(0===e.length)return FN.empty;var t=Math.min.apply(Math,iq(e.map(function(e){return e.left}))),n=Math.max.apply(Math,iq(e.map(function(e){return e.right}))),r=Math.min.apply(Math,iq(e.map(function(e){return e.top}))),i=Math.max.apply(Math,iq(e.map(function(e){return e.bottom})));return FN.FromLTRB(t,r,n,i)}(e.boundingPaths.map(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.position="absolute",t.style.visibility="hidden";var n=document.createElementNS("http://www.w3.org/2000/svg","path");t.appendChild(n),n.setAttribute("d",e.toString());var r=document.querySelector("body");r.appendChild(t);var i,o=(i=n.getBBox(),new FN(i.x,i.y,i.width,i.height));return r.removeChild(t),o})),r=(n.width-10*(t-1))/t,i=[],o=0;o<t;o++){var s=n.left+(r+10)*o,a=n.top,l=s+r,c=a+n.height,u=new $N;u.moveTo(s,a),u.lineTo(l,a),u.lineTo(l,c),u.lineTo(s,c),u.lineTo(s,a),i.push(u)}e.boundingPaths=i},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),sq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aq=function(e){function t(t,n,r){var i=e.call(this,[],n,t)||this;return i._productHandler=r,i}return sq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(n){return e=null==this._args.clockwise||this._args.clockwise,(null!=this._args.items?this._args.items:this._productHandler.selectedItems).filter(function(e){return e instanceof FV}).forEach(function(n){var r=t._productHandler.getHandler(n);return e?r.rotateContentRight():r.rotateContentLeft()}),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),lq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cq=function(e){function t(t,n,r,i){var o=e.call(this,[],n,t)||this;return o._productHandler=r,o._commandManager=i,o}return lq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n,r,i,o,s=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(a){switch(a.label){case 0:return t=(e=this._args).items,n=e.selectOnCanvas,[4,Promise.all(t.map(function(e){return r$.positionItemInArea(s._productHandler,e,s._args.sourceWidth,s._args.sourceHeight,!1),s._commandManager.execute(XG.addItems,{items:[e],selectOnCanvas:!1,ignoreOrderRules:!0,ignoreCanvasRotate:!1})}))];case 1:return a.sent(),(r=this._productHandler.contentAngle)>0?[4,this._productHandler.waitUpdate()]:[3,3];case 2:a.sent(),i=this._productHandler.userEditPrintArea,r$.rotateItems(this._productHandler,t,(null!=(o=this._productHandler.userEditContainer.region)?o:i.bounds).center,-r),a.label=3;case 3:return n&&this._commandManager.execute(qG.selectItems,{items:t.filter(function(e){return!e.locked})}),[2]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),uq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hq=function(e){function t(t,n,r,i,o){var s=e.call(this,[],n,t)||this;return s._productHandler=r,s._product=i,s._commandManager=o,s}return uq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n,r,i=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(o){switch(o.label){case 0:return e=this._productHandler.userEditContainer,t=this._product.getAllItems({ignoreMockups:!0}).filter(function(t){return t.parentContainer.parentComponent===i._productHandler.currentSurface&&t.parentContainer.id===e.id&&t.itemPermissions.allowRemoveOnLayoutChange}),n=function(e){return e instanceof ZH&&0===e.placeholders.length&&0===e.values.length},r=t.filter(function(e){return e instanceof FV||n(e)}),this._args.items.forEach(function(e){e.fromLayout=!0,e.itemPermissions.allowRemoveOnLayoutChange=!0,r$.positionItemInArea(i._productHandler,e,i._args.sourceWidth,i._args.sourceHeight,!0),i._commandManager.execute(XG.addItems,{items:[e],selectOnCanvas:!1,ignoreOrderRules:!0,ignoreCanvasRotate:!0,createCloneName:null==r||null==r.find(function(t){return t.name===e.name})})}),[4,this._productHandler.waitUpdate()];case 1:return o.sent(),r$.changeItemsContent(this._product,this._productHandler,this._commandManager,r,this._args.items,!0),0!==t.length&&this._commandManager.execute(GG.deleteItems,{items:t,force:!0}),[2]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),dq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pq=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},fq=function(e){function t(t,n,r){var i=e.call(this,null,t,n)||this;return i._commandManager=r,i}return dq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n,r,i,o,s,a,l,c,u,h;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(d){switch(d.label){case 0:return n=(e=this._args).asLayoutItem,null==(t=e.items)||0===t.length?[2]:(r=pq(t,1),o=(i=r[0]).parentContainer,a=(null!=(s=i.parentGroupItem)?s.items:o.items).toArray(),t.some(function(e){return e.parentGroupItem!==s})?[2]:(l=Math.max.apply(Math,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(pq(arguments[t]));return e}(t.map(function(e){return a.indexOf(e)})))-t.length+1,c=t.sort(function(e,t){return a.indexOf(e)-a.indexOf(t)}),u=c.map(function(e){return e.clone()}),(h=n?new _V(u):new Cz(u)).name="Group item",this._commandManager.execute(qG.clearSelection),this._commandManager.execute(GG.deleteItems,{items:t,force:!0,autoUngroup:!1,autoParentGroupDelete:!1}),[4,this._commandManager.execute(XG.addItems,{items:[h],targetContainer:o,index:l,selectOnCanvas:!0,targetGroupItem:s})]));case 1:return d.sent(),[2]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),mq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gq=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},yq=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},_q=function(e){function t(t,n,r){var i=e.call(this,null,t,n)||this;return i._commandManager=r,i}return mq(t,e),t.prototype._executeCommandBody=function(){return gq(this,void 0,void 0,function(){var e;return yq(this,function(t){switch(t.label){case 0:return[4,this._ungroupItems((e=this._args).items,e.keepNestedGroups)];case 1:return t.sent(),[2]}})})},t.prototype._ungroupItems=function(e,t){return void 0===t&&(t=!1),gq(this,void 0,void 0,function(){var n,r,i=this;return yq(this,function(o){switch(o.label){case 0:return[4,this._commandManager.execute(qG.clearSelection)];case 1:return o.sent(),n=this._historyArgs.history,0===e.length?[2]:!t&&e.every(function(e){return e instanceof Cz&&e.groupItemPermissions.allowUngroup})?(n.pause(),e.forEach(function(e){return i._ungroupItems(e.items.toArray(),!0)}),n.resume(),[2]):e.every(function(e,t,n){var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(n,1);return null!=e.parentGroupItem&&e.parentGroupItem===r[0].parentGroupItem})?(n.pause(),[4,this._extractItemsFromGroupItem(e)]):[2];case 2:return r=o.sent(),n.resume(),[4,this._commandManager.execute(qG.selectItems,{items:r})];case 3:return o.sent(),[2]}})})},t.prototype._extractItemsFromGroupItem=function(e){return gq(this,void 0,void 0,function(){var t,n,r,i,o,s,a,l,c;return yq(this,function(u){switch(u.label){case 0:return(t=e[0].parentGroupItem).items.toArray().filter(function(t){return!e.includes(t)}).length<2&&(e=t.items.toArray()),n=e.map(function(e){return e.clone()}).reverse(),r=t.parentContainer,o=null!=(i=t.parentGroupItem)?i.items.toArray():r.items.toArray(),s=o.indexOf(t),a=null,i instanceof _V&&(l=i.getItemsOrder())&&(c=l.indexOf(t.id),a=c),[4,this._commandManager.execute(GG.deleteItems,{items:e,force:!0,autoUngroup:!1,autoParentGroupDelete:!0})];case 1:return u.sent(),0!==t.items.length?[3,3]:[4,this._commandManager.execute(GG.deleteItems,{items:[t],force:!0,autoUngroup:!1})];case 2:u.sent(),u.label=3;case 3:return[4,this._commandManager.execute(XG.addItems,{targetContainer:r,items:n,index:s,orderIndex:a,selectOnCanvas:!1,targetGroupItem:i})];case 4:return u.sent(),[2,n]}})})},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),vq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bq=function(e){function t(t,n,r,i,o,s,a){var l=e.call(this,null,t,n)||this;return l._productHandler=r,l._product=i,l._commandManager=o,l._productThemeManager=s,l._canvas=a,l}return vq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n,r,i,o,s,a,l;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(c){switch(c.label){case 0:return n=(e=this._args).newItems,null==(t=e.targetGroupItem)||null==n||n.length<1?[2]:(r=!1,i=this._productHandler.getHandler(t),o=i.getTransformedRectangle(r),s=t.items.toArray(),r$.changeItemsContent(this._product,this._productHandler,this._commandManager,s,n,!1),t.items.clear(),t.addItems(n),(a=t.getNestedItems(!0).filter(function(e){return e instanceof ZH})).length>0?[4,r$.waitForItemsUpdated(a,this._canvas)]:[3,2]);case 1:c.sent(),c.label=2;case 2:return l=i.getTransformedRectangle(r).bounds,r$.positionItemInArea(this._productHandler,t,l.width,l.height,!0,o,l.center,r),null!=this._productThemeManager.currentProductTheme&&this._updateAppliedProductTheme(),0===o.angle?[3,5]:a.length>0?[4,r$.waitForItemsUpdated(a,this._canvas)]:[3,4];case 3:c.sent(),c.label=4;case 4:r$.rotateItems(this._productHandler,[t],o.center,o.angle),c.label=5;case 5:return this._commandManager.execute(qG.selectItems,{items:[t]}),[2]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype._updateAppliedProductTheme=function(){this._commandManager.execute(WG.applyProductTheme,{theme:this._productThemeManager.currentProductTheme})},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),wq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cq=function(e){function t(t,n){return e.call(this,null,t,n)||this}return wq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n,r;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(i){if(n=(e=this._args).colorGroup,r=e.newColor,!((t=e.clipartItem)instanceof Tz)||null==n||null==r)throw new Error("ChangeClipartItemColorCommand: Uncorrect arguments");if(!(r instanceof $j||r.color instanceof $j))throw new Error("ChangeClipartItemColorCommand: Uncorrect color");return t.setColor(n,r),[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),xq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Eq=function(e){function t(t,n,r,i){var o=e.call(this,n,t,r)||this;return o._commandManager=i,o}return xq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(n){switch(n.label){case 0:return e=r$.getEmptyPlaceholdersFromProduct(this._product),t=this._args.metadataList.map(function(t,n){return{imageData:t,item:e[n]}}).filter(function(e){return null!=e.item}),[4,this._commandManager.execute(GG.setImageMetadata,{dataList:t})];case 1:return n.sent(),[2,t.map(function(e){return e.item})]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}(BX),Sq=n("woRb"),Pq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tq=function(){return(Tq=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Iq=function(e){function t(t,n,r,i,o,s){var a=e.call(this,n,t,r)||this;return a._productHandler=i,a._commandManager=o,a._canvas=s,a._executeCommandBody=function(){return e=a,void 0,n=function(){var e,t,n,r=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(i){switch(i.label){case 0:null!=this._canvas&&this._canvas.pauseRedraw(),i.label=1;case 1:return i.trys.push([1,,4,7]),e=this._convertedArgs.target,t=this._items.map(this._productHandler.getHandler),null==this._canvas?[3,3]:(n=this._canvas.getAllItemHandlers(),[4,Promise.all(t.filter(function(e){return e instanceof aW&&!n.includes(e)}).map(function(e){return e.updateForExternalCanvas(r._canvas),e.waitUpdate()}))]);case 2:i.sent(),i.label=3;case 3:return t.forEach(function(e){e.startTransform(),e.beginUpdate()}),e instanceof CU?this._resizeProduct(e):e instanceof YV?this._resizePrintArea(e):FL.isArray(e)&&(e[0]instanceof eU?e.forEach(function(e){return r._resizeSurface(e)}):e[0]instanceof vH&&this._resizeItems(e)),this._items.map(this._productHandler.getHandler).forEach(function(e){e.endTransform(!0,!0),e.endUpdate()}),[3,7];case 4:return null==this._canvas?[3,6]:[4,this._canvas.waitUpdate()];case 5:i.sent(),this._canvas.updateSelection(),this._canvas.continueRedraw(),this._canvas.updateTexts(),i.label=6;case 6:return[7];case 7:return[2]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},a._resizeProduct=function(e){e.surfaces.forEach(function(e){return a._resizeSurface(e)})},a._resizeSurface=function(e){var t=new FN(0,0,e.width,e.height),n=a._getTransformMatrix(t,YU.Left,YU.Top);e.mockup.allContainers.forEach(function(t){return a._resizeMockupContainer(t,n,e)}),e.printAreas.forEach(function(e){return a._resizePrintAreaBounds(e,n)}),e.containers.forEach(function(t){return a._resizeContainer(t,n,e)}),n.updateObjectByMatrix(e,"width","height")},a._resizeMockupContainer=function(e,t,n){null!=e.size&&e.size.updateByMatrix(t),a._resizeContainer(e,t,n)},a._resizeContainer=function(e,t,n,r){void 0===r&&(r=null),null!=e.region&&e.region.updateByMatrix(t);var i=function(e){return r.bounds.intersectsWith(a._productHandler.getHandler(e).bounds)},o=e.items.toArray().filter(function(e){return null==r||i(e)}),s=a._getResizeOptions(e).resize,l=a._getItemsMatrix(o,s,t,n),c=a._getResizeOptions(e).resetPlaceholderContent;e.items.forEach(function(e){var n=null!=r?a._getTranslateMatrixRelativeToPrintArea(r.bounds,a._productHandler.getHandler(e).bounds,i(e)?l:t):l;a._resizeItem(e,n,c)})},a._resizeItems=function(e){var t;if(a._getResizeOptions().resize===SW.Original)throw new IL("Original type not supported when resizing items.");if(1===e.length){var n=a._productHandler.getHandler(e[0]).rectangle;n.angle=0,t=n.bounds}else t=a._getItemsBounds(e);var r=a._getTransformMatrix(t),i=a._getItemsMatrix(e,a._getResizeOptions().resize,r,null);e.forEach(function(e){var t;return a._resizeItem(e,i,null===(t=a._defaultResizeOptions.resetPlaceholderContent)||void 0===t||t)})},a._resizeItem=function(e,t,n){var r=function(e){var n;e.transformByMatrix(t);var r=e.item;r instanceof nV&&(null===(n=r.values)||void 0===n||n.filter(function(e){return null!=(null==e?void 0:e.transformedRectangle)}).forEach(function(e){e.transformedRectangle=e.transformedRectangle.transformByMatrix(t)}))},i=function(e){n&&null!=e.content&&e.content.updateRectangle(!1,e.item.contentResizeMode,e)},o=a._productHandler.getHandler(e);r(o),o instanceof YW&&(o.updateContentAndFrames(r),i(o)),o instanceof eX&&o.itemHandlers.toArray().filter(function(e){return e instanceof YW}).forEach(i)},a._resizePrintAreaBounds=function(e,t){e.bounds.updateByMatrix(t)},a._resizePrintArea=function(e){var t=a._product.surfaces.toArray().find(function(t){return t.printAreas.contains(e)}),n=a._getMatrixForPrintArea(e);t.containers.forEach(function(r){return a._resizeContainer(r,n,t,e)}),t.printAreas.forEach(function(t){t!==e&&a._resizePrintAreaBounds(t,a._getTranslateMatrixRelativeToPrintArea(e.bounds,t.bounds,n))}),a._resizePrintAreaBounds(e,n),a._resizeSurfaceByPrintArea(t)},a._resizeSurfaceByPrintArea=function(e){var t=FN.getOverallBounds(e.printAreas.toArray().map(function(e){return e.bounds}));new FN(0,0,e.width,e.height).containsRectangle(t)||(e.width=Math.max(e.width,t.right),e.height=Math.max(e.height,t.bottom),t.left>=0||t.top>=0||a._commandManager.execute(GG.translateItems,{items:e.getAllItems().toArray(),translateX:-Math.min(0,t.left),translateY:-Math.min(0,t.top)}))},a._getTransformMatrix=function(e,t,n){void 0===t&&(t=YU.Center),void 0===n&&(n=YU.Center);var r=RW(e,t,n),i=new DN;return i.scaleRelativeToPoint(a._getScaleMultiplier(a._args.width,e.width),a._getScaleMultiplier(a._args.height,e.height),r),i},a._getScaleMultiplier=function(e,t){if("string"==typeof e){if(/%$/.test(e))return Number(e.split(/%/)[0])/100;var n=parseFloat(e);if(isNaN(n))throw new kL("ResizeCommand: Wrong string format: "+e);e=n}if(e<=0)throw new kL("ResizeCommand: Wrong value: "+e);if(t<=0)throw new kL("ResizeCommand: Wrong parentSize: "+t);return e/t},a._convertedArgs=null!=a._args.target?a._args:a._convertExternalConfig(a._args),a}return Pq(t,e),Object.defineProperty(t.prototype,"_items",{get:function(){var e=this._convertedArgs.target;if(e instanceof CU)return e.getAllItems();if(e instanceof YV){var t=this._product.surfaces.firstOrDefault(function(t){return t.printAreas.contains(e)});return null==t?[]:t.getAllItems().toArray()}return FL.isArray(e)?e[0]instanceof vH?e:e[0]instanceof eU?FL.flatten(e.map(function(e){return e.getAllItems().toArray()})):[]:[]},enumerable:!0,configurable:!0}),t.prototype._getTranslateMatrixRelativeToPrintArea=function(e,t,n){var r=new DN;if(t.bottom<=e.top||t.right<=e.left)return r;if(e.intersectsWith(t))return n;var i=e.clone().updateByMatrix(n);return r.translate(t.left>e.right||OW(e.right-t.left,0)?i.right-e.right:0,t.top>e.bottom||OW(e.bottom-t.top,0)?i.bottom-e.bottom:0),r},t.prototype._getItemsMatrix=function(e,t,n,r){var i;if(t!==SW.Original){var o=this._getItemsBounds(e),s=o.clone().updateByMatrix(n),a=function(e,t,n,r,i){if(void 0===n&&(n=SW.Fit),void 0===r&&(r=YU.Center),void 0===i&&(i=YU.Center),FN.isEqual(e,t))return e.clone();var o,s,a=IW({width:e.width,height:e.height},{width:t.width,height:t.height},n);switch(r){case YU.Left:o=t.left;break;case YU.Right:o=t.right-a.width;break;default:o=t.center.x-a.width/2}switch(i){case YU.Top:s=t.top;break;case YU.Bottom:s=t.bottom-a.height;break;default:s=t.center.y-a.height/2}return new FN(o,s,a.width,a.height)}(o,s,t);i=FN.getMatrix(o,a)}else i=this._getTranslateMatrixForOriginalMode(n,r);return i},t.prototype._getTranslateMatrixForOriginalMode=function(e,t,n,r){void 0===n&&(n=YU.Center),void 0===r&&(r=YU.Center);var i=new FN(0,0,t.width,t.height),o=RW(i,n,r),s=RW(i.updateByMatrix(e),n,r),a=new DN;return a.translate(s.x-o.x,s.y-o.y),a},t.prototype._getResizeOptions=function(e){var t=this;return Object(Sq.maybe)(this._args.containerOptions).bind(function(t){return Object(Sq.maybe)(e).map(function(e){return t[e.name]})}).caseOf({just:function(e){return Tq(Tq({},t._defaultResizeOptions),e)},nothing:function(){return t._defaultResizeOptions}})},Object.defineProperty(t.prototype,"_defaultResizeOptions",{get:function(){return Tq({resize:SW.Fit,resetPlaceholderContent:!0},this._args.defaultOptions||{})},enumerable:!0,configurable:!0}),t.prototype._getItemsBounds=function(e){var t=this;return FL.isEmpty(e)?FN.empty:FN.getOverallBounds(e.map(function(e){return t._productHandler.getHandler(e).bounds}))},t.prototype._getMatrixForPrintArea=function(e){return this._getTransformMatrix(e.bounds,YU.Left,YU.Top)},t.prototype._convertExternalConfig=function(e){var t;switch(e.targetType){case"surfaces":if(FL.isEmpty(e.targetIds))throw new kL("ResizeCommand: target Ids cannot be empty");t=this._product.surfaces.toArray().filter(function(t){return e.targetIds.includes(t.id)});break;case"items":if(FL.isEmpty(e.targetIds))throw new kL("ResizeCommand: target Ids cannot be empty");t=this._productHandler.currentSurface.getAllItems({ignoreMockups:!1,flatGroupItems:!0}).toArray().filter(function(t){return e.targetIds.includes(t.id)});break;case"printArea":if(FL.isEmpty(e.targetIds))throw new kL("ResizeCommand: target Ids cannot be empty");t=FL.flatten(this._product.surfaces.toArray().map(function(e){return e.printAreas.toArray()})).find(function(t){return e.targetIds.includes(t.id)});break;default:t=this._product}return{target:t,width:e.width,height:e.height,containerOptions:e.containerOptions,defaultOptions:e.defaultOptions}},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}(BX),Oq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kq=function(e){function t(t,n,r,i){var o=e.call(this,[],t,n)||this;return o._productHandler=r,o._canvas=i,o._convertedArgs=null!=n.items?n:o._convertExternalConfig(n),o._items=o._convertedArgs.items,o}return Oq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(n){null!=this._canvas&&this._canvas.pauseRedraw();try{e=this._transformMatrix,this._items.forEach(function(n){var r=function(n){t._productHandler.getHandler(n).transformByMatrix(e)};r(n),n instanceof FV&&n.updateContentAndFrames(r)})}finally{null!=this._canvas&&this._canvas.continueRedraw()}return[2]})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},Object.defineProperty(t.prototype,"_transformMatrix",{get:function(){var e=this._parentRectangle,t=pj(this._args.translateX,e.width),n=pj(this._args.translateY,e.height),r=new DN;return r.translate(t,n),r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_parentRectangle",{get:function(){return Object(Sq.maybe)(this._items[0]).map(function(e){return e.parentContainer}).map(function(e){return{surface:e.parentComponent,container:e}}).map(function(e){var t=e.container;return{printArea:e.surface.printAreas.get(0),container:t}}).map(function(e){var t=e.printArea,n=e.container;return Object(Sq.maybe)(n.region).caseOf({just:function(e){return FN.union(t.bounds,e)},nothing:function(){return t.bounds}})}).caseOf({just:function(e){return new Yz(e.width,e.height)},nothing:function(){return new Yz(100,100)}})},enumerable:!0,configurable:!0}),t.prototype._convertExternalConfig=function(e){if(FL.isEmpty(e.itemIds))throw new kL("TranslateItemsCommand: itemIds cannot be null.");return{items:this._productHandler.currentSurface.getAllItems({ignoreMockups:!1,flatGroupItems:!0}).toArray().filter(function(t){return e.itemIds.includes(t.id)}),translateX:e.translateX,translateY:e.translateY}},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),Rq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Aq=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},Mq=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Dq=function(e){function t(t,n,r,i){var o=e.call(this,r.items,n,r)||this;return o._productHandler=t,o._cm=i,o}return Rq(t,e),t.prototype._executeCommandBody=function(){return Aq(this,void 0,void 0,function(){var e,t,n,r,i,o,s=this;return Mq(this,function(a){switch(a.label){case 0:return t=(e=this._args).align,r=e.items,(n=e.group)&&r?(i=this._productHandler.getHandler(n).bounds,o=r.map(function(e){return n.items.toArray().includes(e)?s.alignItemIntoGroup(e,t,i):Promise.resolve()}),[4,Promise.all(o)]):[2];case 1:return a.sent(),[2]}})})},t.prototype.alignItemIntoGroup=function(e,t,n){return Aq(this,void 0,void 0,function(){var r,i,o,s,a,l,c,u,h,d,p,f,m,g,y;return Mq(this,function(_){switch(_.label){case 0:switch(r=n.top,i=n.bottom,o=n.left,s=n.right,l=(a=n.center).x,c=a.y,u=this._productHandler.getHandler(e).bounds,h=u.top,d=u.bottom,p=u.left,f=u.right,g=(m=u.center).x,y=m.y,t){case"top":return[3,1];case"bottom":return[3,3];case"left":return[3,5];case"right":return[3,7];case"horizontalCenter":return[3,9];case"verticalCenter":return[3,11]}return[3,13];case 1:return[4,this._cm.execute(GG.translateItems,{items:[e],translateX:0,translateY:r-h})];case 2:return _.sent(),[3,13];case 3:return[4,this._cm.execute(GG.translateItems,{items:[e],translateX:0,translateY:i-d})];case 4:return _.sent(),[3,13];case 5:return[4,this._cm.execute(GG.translateItems,{items:[e],translateX:o-p,translateY:0})];case 6:return _.sent(),[3,13];case 7:return[4,this._cm.execute(GG.translateItems,{items:[e],translateX:s-f,translateY:0})];case 8:return _.sent(),[3,13];case 9:return[4,this._cm.execute(GG.translateItems,{items:[e],translateX:l-g,translateY:0})];case 10:return _.sent(),[3,13];case 11:return[4,this._cm.execute(GG.translateItems,{items:[e],translateX:0,translateY:c-y})];case 12:return _.sent(),[3,13];case 13:return[2]}})})},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),Fq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lq=function(e){function t(t,n,r,i){var o=e.call(this,n.items,t)||this;return o._commandManager=r,o._canvas=i,o}return Fq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(n){switch(n.label){case 0:return[4,this._commandManager.execute(GG.deleteItems,{items:this._items})];case 1:return n.sent(),e=[],this._items.forEach(function(t){if(t instanceof Cz){var n=new _V(t.items.toArray(),new CV);n.name=t.name.includes("Group item")?t.name.replace("Group item","Layout item"):t.name,e.push(n)}}),[4,this._commandManager.execute(XG.addItems,{items:e})];case 2:return n.sent(),e.forEach(function(e){t._canvas.viewer.getHandler(e).generateAndApplyAutolayoutSettings()}),[2,e]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),Bq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nq=function(e){function t(t,n,r){var i=e.call(this,n.items,t)||this;return i._commandManager=r,i}return Bq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){switch(t.label){case 0:return[4,this._commandManager.execute(GG.deleteItems,{items:this._items})];case 1:return t.sent(),e=[],this._items.forEach(function(t){if(t instanceof _V){var n=new Cz(t.items.toArray());n.name=t.name.includes("Layout item")?t.name.replace("Layout item","Group item"):t.name,e.push(n)}}),[4,this._commandManager.execute(XG.addItems,{items:e})];case 2:return t.sent(),[2,e]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),jq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hq=function(e){function t(t,n,r){var i=e.call(this,[n.item],t,n)||this;return i._commandManager=r,i}return jq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,r=function(){var e;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(n){if(null==this._args.item||null==this._args.targetItem)throw new kL("SetImageItemCommand: item and target item cannot be null");return e={dataList:[{imageData:t.getImageData(this._args.item),item:this._args.targetItem,tags:this._args.item.tags}],dpi:this._args.dpi,keepLocation:this._args.keepLocation},this._commandManager.execute(GG.setImageMetadata,e,RX.NotUpdate),[2]})},new((n=void 0)||(n=Promise))(function(t,i){function o(e){try{a(r.next(e))}catch(t){i(t)}}function s(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(o,s)}a((r=r.apply(e,[])).next())});var e,n,r},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t.getImageData=function(e){var t,n;if(null==e.source)return null;var r=new lV;return r.isUserImage=e.isUserImage,r.storageId=e.source.id,r.pageIndex=e.source.pageIndex,r.isVector=e.source.isVector,r.name=null!==(t=e.displayName)&&void 0!==t?t:e.name,r.origin=null===(n=e.source.origin)||void 0===n?void 0:n.clone(),r.size.width=e.source.width,r.size.height=e.source.height,r},t}($X),zq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vq=function(e){function t(t,n,r){var i=e.call(this,null,t,n)||this;return i._productHandler=r,i}return zq(t,e),t.prototype._executeCommandBody=function(){var e,t,n,r,i;return n=this,void 0,i=function(){var n,r;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(i){return null==(n=this._args.item)?[2]:!(n instanceof RH)||n instanceof FV?(console.warn("ConvertItemToPlaceholderCommand: item type "+n.type+" is not supported"),[2]):((r=new FV(n.sourceRectangle.clone())).sourcePath=n.sourcePath.clone(),r.sourcePathId=n.sourcePathId,r.transform=n.transform.clone(),r.name=n.name,r.manipulationPermissions=n.manipulationPermissions.clone(),r.visualizationPermissions=n.visualizationPermissions.clone(),r.itemPermissions=n.itemPermissions.clone(),r.shapePermissions=n.shapePermissions.clone(),this._productHandler.replaceItem(n,r),n instanceof FH?(r.content=n,r.isStubContent=!0,r.barcodeFormat=null!==(t=null===(e=n)||void 0===e?void 0:e.barcodeFormat)&&void 0!==t?t:null):(r.fillColor=n.fillColor,r.borderColor=n.borderColor,r.borderWidth=n.borderWidth),[2,r])})},new((r=void 0)||(r=Promise))(function(e,t){function o(e){try{a(i.next(e))}catch(n){t(n)}}function s(e){try{a(i.throw(e))}catch(n){t(n)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(o,s)}a((i=i.apply(n,[])).next())})},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),Uq=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wq=function(e){function t(t,n,r){var i=e.call(this,null,t,n)||this;return i._productHandler=r,i}return Uq(t,e),t.prototype._executeCommandBody=function(){return e=this,void 0,n=function(){var e,t,n,r;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(i){return null==(e=this._args.item)?[2]:e instanceof FV?(e.isEmptyContent?((n=new RH(e.sourcePath.clone())).sourcePath=e.sourcePath.clone(),n.sourcePathId=e.sourcePathId,n.transform=e.transform.clone(),n.name=e.name,n.manipulationPermissions=e.manipulationPermissions.clone(),n.visualizationPermissions=e.visualizationPermissions.clone(),n.itemPermissions=e.itemPermissions.clone(),n.shapePermissions=e.shapePermissions.clone(),n.fillColor=e.fillColor,n.borderColor=e.borderColor,n.borderWidth=e.borderWidth,t=n):(r=e.content,e.content=null,r.parentPlaceholder=null,t=r),this._productHandler.replaceItem(e,t),[2,t]):(console.warn("ConvertPlaceholderToItemCommand: item type "+e.type+" is not supported"),[2])})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.redo=function(){throw new OL},t.prototype.undo=function(){throw new OL},t}($X),Xq=function(){function e(e,t,n,r,i,o,s){this._history=e,this._productHandler=t,this._productThemeManager=n,this._variableItemHelper=r,this._eventManager=i,this._canvas=o,this._itemsDataApplier=s,this._surfaceManager=new kX(t)}return Object.defineProperty(e.prototype,"_product",{get:function(){return this._productHandler.product},enumerable:!0,configurable:!0}),e.prototype.execute=function(e,t,n){var r={history:this._history,historyUpdateMode:n};switch(e){case CX.switchToSurface:return this._surfaceManager.switchToSurface(t.value instanceof eU?t.value:this._product.surfaces.get(t.value));case CX.getNextSurface:return this._surfaceManager.getNextSurface(t.spinIndex);case CX.switchSurfaceForward:return this._surfaceManager.switchSurfaceForward();case CX.switchSurfaceBackward:return this._surfaceManager.switchSurfaceBackward();case WG.rotateProduct:return new HX(this._productHandler,r,this._product,t).execute();case WG.replaceInterpolationPlaceholders:return new OG(this._productHandler,r,this._product,this._canvas).execute();case WG.changeBackground:return new eG(this._productHandler,r,this._product,t,this,this._productThemeManager,this._canvas,this._eventManager).execute();case WG.applyProductTheme:return new RG(r,this._product,t,this._productThemeManager,this).execute();case WG.fillPlaceholders:return new Eq(r,this._product,t,this).execute();case WG.resize:return new Iq(r,this._product,t,this._productHandler,this,this._canvas).execute();case XG.addItems:return new lG(this._productHandler,r,t,this._productThemeManager,this._canvas,this._variableItemHelper,this,this._eventManager).execute();case GG.deleteItems:return new hG(this._productHandler,r,t,this._canvas,this.configuration,this).execute();case GG.cloneItems:return new bG(this._productHandler,r,t,this,this._variableItemHelper).execute();case GG.addContent:return new MG(this._productHandler,r,t,this._productThemeManager,this._eventManager).execute();case GG.alignItems:return new FG(this._productHandler,r,t,this._canvas).execute();case GG.alignIntoGroup:return new Dq(this._productHandler,r,t,this).execute();case GG.groupAlign:return new BG(r,t,this._canvas).execute();case GG.bringItems:return new jG(this._productHandler,r,t,this,this._canvas).execute();case GG.moveItem:return new zG(this._productHandler,r,t).execute();case GG.createItem:return new UG(this._itemsDataApplier,r,t).execute();case GG.editItems:return new YG(this._itemsDataApplier,this._productHandler,r,t).execute();case GG.setImageMetadata:return new QX(r,t,this._productHandler,this._product,this._variableItemHelper,this,this._eventManager).execute();case GG.setImageItem:return new Hq(r,t,this).execute();case GG.placeholderContentScale:return new QG(t,r,this._productHandler).execute();case GG.placeholderContentReset:return new JG(t,r,this._productHandler).execute();case GG.changeBarcodeFormat:return new tq(t,r,this._productHandler).execute();case GG.changeColumnCount:return new oq(t,r,this._productHandler).execute();case GG.placeholderContentRotate:return new aq(t,r,this._productHandler).execute();case GG.insertItemsIntoArea:return new cq(t,r,this._productHandler,this).execute();case GG.changeLayout:return new hq(t,r,this._productHandler,this._product,this).execute();case GG.groupItems:return new fq(r,t,this).execute();case GG.ungroupItems:return new _q(r,t,this).execute();case GG.replaceGroupItemContent:return new bq(r,t,this._productHandler,this._product,this,this._productThemeManager,this._canvas).execute();case GG.changeClipartItemColor:return new Cq(r,t).execute();case GG.translateItems:return new kq(r,t,this._productHandler,this._canvas).execute();case GG.convertGroupIntoLayout:return new Lq(r,t,this,this._canvas).execute();case GG.convertLayoutIntoGroup:return new Nq(r,t,this).execute();case GG.convertItemToPlaceholder:return new Vq(r,t,this._productHandler).execute();case GG.convertPlaceholderToItem:return new Wq(r,t,this._productHandler).execute();case qG.selectItems:return new pG(this._productHandler,t,this._canvas).execute();case qG.selectFirst:return new mG(this._productHandler,this,this._canvas).execute();case qG.clearSelection:return new yG(this._canvas).execute();default:throw new kL}},e}();!function(e){e.rotateProduct="rotateProduct",e.replaceInterpolationPlaceholders="replaceInterpolationPlaceholders",e.changeBackground="changeBackground",e.applyProductTheme="applyProductTheme",e.fillPlaceholders="fillPlaceholders",e.resize="resize"}(WG||(WG={})),function(e){e.addItems="addItems"}(XG||(XG={})),function(e){e.deleteItems="deleteItems",e.cloneItems="cloneItems",e.addContent="addContent",e.alignItems="alignItems",e.alignIntoGroup="alignIntoGroup",e.groupAlign="groupAlign",e.bringItems="bringItems",e.moveItem="moveItem",e.createItem="createItem",e.editItems="editItems",e.setImageMetadata="setImageMetadata",e.setImageItem="setImageItem",e.placeholderContentScale="placeholderContentScale",e.placeholderContentReset="placeholderContentReset",e.placeholderContentRotate="placeholderContentRotate",e.changeBarcodeFormat="changeBarcodeFormat",e.changeColumnCount="changeColumnCount",e.insertItemsIntoArea="insertItemsIntoArea",e.changeLayout="changeLayout",e.groupItems="groupItems",e.ungroupItems="ungroupItems",e.replaceGroupItemContent="replaceGroupItemContent",e.changeClipartItemColor="changeClipartItemColor",e.convertGroupIntoLayout="convertGroupIntoLayout",e.convertLayoutIntoGroup="convertLayoutIntoGroup",e.translateItems="translateItems",e.convertItemToPlaceholder="itemToPlaceholder",e.convertPlaceholderToItem="placeholderToItem"}(GG||(GG={})),function(e){e.clearSelection="clearSelection",e.selectFirst="selectFirst",e.selectItems="selectItems"}(qG||(qG={}));var Gq,qq=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},$q=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Yq=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Kq=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Yq(arguments[t]));return e},Qq=function(){function e(e,t,n){var r=this;this._productHandler=e,this._canvas=t,this._productThemeManager=n,this._applyToBarcode=function(e,t,n){return qq(r,void 0,void 0,function(){var r;return $q(this,function(i){return this._applyBarcodePermissions(t.barcodePermissions,e.barcodePermissions),null==t.barcodeContent||!e.barcodePermissions.allowChangeBarcodeContent&&n.ignorePermissions||!e.barcodeData.isEmpty||(r=new sz(t.barcodeContent),e.barcodePermissions.allowChangeBarcodeType&&!n.ignorePermissions&&(r.barcodeFormat=e.barcodeFormat),r.barcodeFormat===JH.QR_CODE&&r.barcodeSubType===ez.None&&(r.barcodeSubType=ez.Url),e.applyBarcodeData(r)),null!=t.color&&(n.ignorePermissions||e.barcodePermissions.allowChangeBarcodeColor)&&(e.color=oH.createColor(t.color)),[2,this._applyToContentItem(e,t,n)]})})},this._applyToImage=function(e,t,n){return qq(r,void 0,void 0,function(){var r,i,o;return $q(this,function(s){switch(s.label){case 0:return null==t?[3,3]:(this._applyImagePermissions(t.imagePermissions,e.imagePermissions),e.violationSettings.allowImageQuality=null!==(o=null===(i=t.violationSettings)||void 0===i?void 0:i.allowImageQuality)&&void 0!==o?o:e.violationSettings.allowImageQuality,null==t.imageUrl||!n.ignorePermissions&&!e.imagePermissions.allowChangeImage?[3,2]:((r=this._productHandler.getHandler(e)).canvas=this._canvas,[4,r.loadImage(t.imageUrl,{downloadToServerCache:!0,actualSize:!1,saveAspectRatio:!0})]));case 1:s.sent(),s.label=2;case 2:if(null!=t.overlayColor&&r$.setOverlayEffectColor(e,oH.createColor(t.overlayColor)),null!=t.effect)switch(t.effect.toLowerCase()){case"none":e.effect=Oz.None;break;case"blackandwhite":e.effect=Oz.BlackAndWhite;break;case"flipvertical":e.effect=Oz.FlipVertical;break;case"fliphorizontal":e.effect=Oz.FlipHorizontal;break;case"colorize":e.effect=Oz.Colorize;break;default:console.error("Unknown image effect:",t.effect)}s.label=3;case 3:return[2,this._applyToContentItem(e,t,n)]}})})},this._applyImagePermissions=function(e,t){null!=e&&(t.allowChangeImage=hj(t.allowChangeImage,e.allowChangeImage),t.allowEditImage=hj(t.allowEditImage,e.allowEditImage),t.allowKeepOverlayColor=hj(t.allowKeepOverlayColor,e.allowKeepOverlayColor))},this._applyBarcodePermissions=function(e,t){null!=e&&(t.allowChangeBarcodeType=hj(t.allowChangeBarcodeType,e.allowChangeBarcodeType),t.allowChangeBarcodeContent=hj(t.allowChangeBarcodeContent,e.allowChangeBarcodeContent),t.allowChangeBarcodeColor=hj(t.allowChangeBarcodeColor,e.allowChangeBarcodeColor))},this._updateThemeForItem=function(e){r._productThemeManager.applyToItem(e,r._productThemeManager.currentProductTheme)}}return e.prototype.applyToItem=function(e,t,n){return void 0===n&&(n=null),qq(this,void 0,void 0,function(){var r,i,o;return $q(this,function(s){switch(s.label){case 0:return null==t?[2]:(r=Object.assign({ignorePermissions:!0,changePosition:!1,relativeToPrintArea:!0},n||{}),i=!1,e.addPropertyChanged(o=function(){return i=!0}),e instanceof FV?[4,this._applyToPlaceholderItem(e,t,r)]:[3,2]);case 1:return s.sent(),[3,20];case 2:return e instanceof nV?[4,this._applyToImage(e,t,r)]:[3,4];case 3:return s.sent(),[3,20];case 4:return e instanceof ZH?[4,this._applyToText(e,t,r)]:[3,6];case 5:return s.sent(),[3,20];case 6:return e instanceof uz?[4,this._applyToBarcode(e,t,r)]:[3,8];case 7:return s.sent(),[3,20];case 8:return e instanceof zz?[4,this._applyToEllipse(e,t,r)]:[3,10];case 9:return s.sent(),[3,20];case 10:return e instanceof MH?[4,this._applyToRectangle(e,t,r)]:[3,12];case 11:return s.sent(),[3,20];case 12:return e instanceof RH?[4,this._applyToShapeItem(e,t,r)]:[3,14];case 13:return s.sent(),[3,20];case 14:return e instanceof Bz?[4,this._applyToLineItem(e,t,r)]:[3,16];case 15:return s.sent(),[3,20];case 16:return e instanceof Tz?[4,this._applyToClipartItem(e,t,r)]:[3,18];case 17:return s.sent(),[3,20];case 18:return e instanceof Cz?[4,this._applyToGroupItem(e,t,r)]:[3,20];case 19:s.sent(),s.label=20;case 20:return e.removePropertyChanged(o),i&&null!=this._productHandler.product&&this._productHandler.product.getAllItems().includes(e)&&(this._productHandler.getHandler(e).update(),this._canvas.redraw(),this._canvas.updateSelection()),[2,i]}})})},e.prototype._applyToText=function(e,t,n){if(null!=t){if(null!=t.textPermissions&&(e.textPermissions.allowChangeText=hj(e.textPermissions.allowChangeText,t.textPermissions.allowChangeText),e.textPermissions.allowChangeFont=hj(e.textPermissions.allowChangeFont,t.textPermissions.allowChangeFont),e.textPermissions.allowChangeFontSize=hj(e.textPermissions.allowChangeFontSize,t.textPermissions.allowChangeFontSize),e.textPermissions.allowChangeFontColor=hj(e.textPermissions.allowChangeFontColor,t.textPermissions.allowChangeFontColor),e.textPermissions.allowChangeTextAlignment=hj(e.textPermissions.allowChangeTextAlignment,t.textPermissions.allowChangeTextAlignment),e.textPermissions.allowChangeTextBIU=hj(e.textPermissions.allowChangeTextBIU,t.textPermissions.allowChangeTextBIU),e.textPermissions.allowChangeShadow=hj(e.textPermissions.allowChangeShadow,t.textPermissions.allowChangeShadow),e.textPermissions.allowChangeStroke=hj(e.textPermissions.allowChangeStroke,t.textPermissions.allowChangeStroke),e.textPermissions.allowTextFormatting=hj(e.textPermissions.allowTextFormatting,t.textPermissions.allowTextFormatting)),(e instanceof BV||e instanceof gz||e instanceof PV)&&(e.isVertical=hj(e.isVertical,t.isVertical)),e instanceof Dz||e instanceof zV||(e.maxLineCount=hj(e.maxLineCount,t.maxLineCount)),e.maxLineLength=hj(e.maxLineLength,t.maxLineLength),(e instanceof gz||e instanceof PV)&&(e.wrappingMargin=hj(e.wrappingMargin,t.wrappingMargin),e.characterLimit=hj(e.characterLimit,t.characterLimit),null!=t.paragraphSettings)){var r=new dz(e.paragraphSettings);r.FirstLineIndent=hj(r.FirstLineIndent,t.paragraphSettings.firstLineIndent),r.SpaceBefore=hj(r.SpaceBefore,t.paragraphSettings.spaceBefore),r.SpaceAfter=hj(r.SpaceAfter,t.paragraphSettings.spaceAfter),r.LeftIndent=hj(r.LeftIndent,t.paragraphSettings.leftIndent),r.RightIndent=hj(r.RightIndent,t.paragraphSettings.rightIndent),e.paragraphSettings=r}if(e instanceof gz){if(null!=t.verticalAlignment)if("string"==typeof t.verticalAlignment)switch(t.verticalAlignment.toLowerCase()){case"top":e.verticalAlignment=zH.Top;break;case"center":e.verticalAlignment=zH.Center;break;case"bottom":e.verticalAlignment=zH.Bottom}else e.verticalAlignment=t.verticalAlignment;var i=this._convertOverflowStrategy(t.overflowStrategy);e.overflowStrategy=hj(e.overflowStrategy,i),e.shrinkMode=hj(e.shrinkMode,this._convertShrinkMode(t.textShrinkMode))}e instanceof zV&&(e.bend=hj(e.bend,t.bend),e.warp=hj(e.warp,t.warp))}return this._applyToBaseTextItem(e,t,n)},e.prototype._convertShrinkMode=function(e){if(null==e)return null;if("number"==typeof e)return e;switch(e){case"scale":return NH.Scale;case"size":return NH.Size;default:throw new kL("Invalid shrink mode.")}},e.prototype._convertOverflowStrategy=function(e){if(null==e)return null;if("number"==typeof e)return e;switch(e){case"clip":return jH.Clip;case"fitToWidth":return jH.FitToWidth;case"fitToBox":return jH.FitToBox;case"expandBox":return jH.ExpandBox;default:throw new kL("Invalid overflow strategy.")}},e.prototype._applyToLineItem=function(e,t,n){null!=t.linePermissions&&(e.linePermissions.allowChangeLineColor=hj(e.linePermissions.allowChangeLineColor,t.linePermissions.allowChangeLineColor),e.linePermissions.allowChangeLineWidth=hj(e.linePermissions.allowChangeLineWidth,t.linePermissions.allowChangeLineWidth));var r=this._productHandler.userEditContainer,i=this._productHandler.userEditPrintArea,o=null!=i?i.bounds.center:new MN(50,50),s=null!=r?.4*this._productHandler.getPrintAreaVisualSize(r).width:10;if(n.ignorePermissions||e.linePermissions.allowChangeLineWidth){var a=hj(e.width,t.width);if(null!=r&&null!=r.region&&this._productHandler.suppressOutOfRegionManipulation){var l=this._calcNewGroupBounds(this._productHandler.selectedItems,a);TW(FN.intersect(r.region,l),l)&&(e.width=a)}else e.width=a;e.fixedWidth=hj(e.fixedWidth,t.fixedWidth)}if(n.changePosition&&(null!=t.point0?(e.sourcePoint0.x=hj(e.sourcePoint0.x,t.point0.x),e.sourcePoint0.y=hj(e.sourcePoint0.y,t.point0.y)):e.sourcePoint0=new MN(o.x-s/2,o.y),null!=t.point1?(e.sourcePoint1.x=hj(e.sourcePoint1.x,t.point1.x),e.sourcePoint1.y=hj(e.sourcePoint1.y,t.point1.y)):e.sourcePoint1=new MN(o.x+s/2,o.y)),null!=t.color&&(n.ignorePermissions||e.linePermissions.allowChangeLineColor)){var c=oH.createColor(t.color);e.color=hj(e.color,c)}null!=t.overprintStroke&&(e.overprintStroke=t.overprintStroke);var u=this._productHandler.contentAngle;u>0&&e.transform.rotate(-u);var h=e.width+.01,d=null!=r?this._getRotatedRegion(r):null;if(null!=d){d.width-=h,d.height-=h;var p=1,f=this._productHandler.getHandler(e),m=e instanceof FV?f.getBoundsIncludingFrames():f.bounds;if(m.width>d.width||m.height>d.height){var g=IW(EW.from(m),EW.from(d));g.width*=.9,g.height*=.9,p=g.width/m.width}var y=new MN(m.left+m.width/2,m.top+m.height/2),_=y.x-d.left-d.width/2,v=y.y-d.top-d.height/2;e.transform.setScaleX(p*e.transform.scaleX),e.transform.setScaleY(p*e.transform.scaleY),e.transform.setTranslateX(e.transform.translateX-_-(f.getTransformedRectangle().centerX-y.x)*(1-p)),e.transform.setTranslateY(e.transform.translateY-v-(f.getTransformedRectangle().centerY-y.y)*(1-p))}this._applyToItem(e,t,n)},e.prototype._applyToRectangle=function(e,t,n){this._applyToShapeItem(e,t,n)},e.prototype._applyToGroupItem=function(e,t,n){this._applyToItem(e,t,n)},e.prototype._applyToEllipse=function(e,t,n){this._applyToShapeItem(e,t,n)},e.prototype._applyToClipartItem=function(e,t,n){this._applyToItem(e,t,n)},e.prototype._applyToPlaceholderItem=function(t,n,r){var i,o,s,a;return qq(this,void 0,void 0,function(){var l,c,u,h,d,p;return $q(this,function(f){switch(f.label){case 0:if(null!=n.placeholderPermissions&&(t.placeholderPermissions.allowEditContent=hj(t.placeholderPermissions.allowEditContent,n.placeholderPermissions.allowEditContent),t.placeholderPermissions.showSelectButton=hj(t.placeholderPermissions.showSelectButton,n.placeholderPermissions.showSelectButton),t.placeholderPermissions.showHandleButton=hj(t.placeholderPermissions.showHandleButton,n.placeholderPermissions.showHandleButton)),t.violationSettings.allowImageQuality=null!==(o=null===(i=n.violationSettings)||void 0===i?void 0:i.allowImageQuality)&&void 0!==o?o:t.violationSettings.allowImageQuality,null!=n.contentResizeMode)switch(n.contentResizeMode.toLowerCase()){case"original":t.contentResizeMode=wV.Original;break;case"fill":t.contentResizeMode=wV.Fill;break;case"fit":t.contentResizeMode=wV.Fit}return t.isStubContent=hj(t.isStubContent,n.isStubContent),t.allowedSubfolder=hj(t.allowedSubfolder,n.allowedSubfolder),t.allowedTabs=hj(t.allowedTabs,n.allowedTabs),t.isVariable=hj(t.isVariable,n.isVariable),t.isCoverMode=hj(t.isCoverMode,n.isCoverMode),t.fixedStubContentSize=hj(t.fixedStubContentSize,n.fixedStubContentSize),l=null!==(s=n.barcodeFormat)&&void 0!==s?s:null===(a=n.barcodeContent)||void 0===a?void 0:a.barcodeFormat,t.barcodeFormat=hj(t.barcodeFormat,l),null==t.content&&(c=void 0,null!=n.contentImageUrl?c=new nV:t.isBarcodePlaceholder&&(u=e.getBarcodeRatio(t.barcodeFormat),c=new uz(null,null,null,new FN(0,0,u.width,u.height))),t.content=c),null==t.content?[3,5]:((h=FL.clone(r)).changePosition=!1,t.content instanceof nV?[4,this._applyToImage(t.content,{imageUrl:n.contentImageUrl,imagePermissions:t.contentPermissions.imagePermissions},h)]:[3,2]);case 1:return f.sent(),[3,4];case 2:return t.content instanceof uz?[4,this._applyToBarcode(t.content,{barcodeContent:n.barcodeContent||{barcodeFormat:t.barcodeFormat,barcodeValue:""},barcodePermissions:t.contentPermissions.barcodePermissions,color:n.contentBarcodeColor},h)]:[3,4];case 3:f.sent(),t.barcodeFormat=t.content.barcodeFormat,t.shapePermissions.allowChangeFillColor=!0,f.label=4;case 4:null==t.barcodeFormat&&(t.imageContent.allowedSubfolder=t.allowedSubfolder,t.imageContent.allowedTabs=t.allowedTabs),f.label=5;case 5:return this._applyToShapeItem(t,n,r),null==n.contentImageUrl&&null==t.barcodeFormat?[2]:[4,(d=this._productHandler.getHandler(t.content)).waitUpdate()];case 6:return f.sent(),p=this._productHandler.getHandler(t),d.updateRectangle(!1,t.contentResizeMode,p),[2]}})})},e.prototype._applyToContentItem=function(e,t,n){return null!=t&&(e.isVariable=hj(e.isVariable,t.isVariable),e.maskOpacity=hj(e.maskOpacity,t.maskOpacity)),this._applyToShapeItem(e,t,n)},e.prototype._applyToShapeItem=function(e,t,n){var r,i;if(void 0===t&&(t=null),null!=t){if(null!=t.shapePermissions&&(e.shapePermissions.allowChangeBorderColor=hj(e.shapePermissions.allowChangeBorderColor,t.shapePermissions.allowChangeBorderColor),e.shapePermissions.allowChangeBorderWidth=hj(e.shapePermissions.allowChangeBorderWidth,t.shapePermissions.allowChangeBorderWidth),e.shapePermissions.allowChangeFillColor=hj(e.shapePermissions.allowChangeFillColor,t.shapePermissions.allowChangeFillColor)),e.violationSettings.allowShape=null!==(i=null===(r=t.violationSettings)||void 0===r?void 0:r.allowShape)&&void 0!==i?i:e.violationSettings.allowShape,n.ignorePermissions||e.shapePermissions.allowChangeBorderWidth){var o=null!=e.parentContainer?e.parentContainer:this._productHandler.userEditContainer,s=hj(e.borderWidth,t.borderWidth);if(null!=o&&null!=o.region&&this._productHandler.suppressOutOfRegionManipulation){var a=this._calcNewGroupBounds(this._productHandler.selectedItems,s);TW(FN.intersect(o.region,a),a)&&(e.borderWidth=s)}else e.borderWidth=s}if(null!=t.borderColor&&(n.ignorePermissions||e.shapePermissions.allowChangeBorderColor)){var l=oH.createColor(t.borderColor);e.borderColor=l}null!=t.fillColor&&(n.ignorePermissions||e.shapePermissions.allowChangeFillColor)&&(l=oH.createColor(t.fillColor),e instanceof FV&&e.isBarcodePlaceholder?e.content.fillColor=l:e.fillColor=l),null!=t.overprintFill&&(e.overprintFill=t.overprintFill),null!=t.overprintStroke&&(e.overprintStroke=t.overprintStroke)}this._applyToItem(e,t,n)},e.prototype._applyToBaseTextItem=function(t,n,r){var i,o,s;if(null!=n){if((r.ignorePermissions||t.textPermissions.allowChangeText)&&(t.text=hj(t.text,n.text)),(r.ignorePermissions||t.textPermissions.allowChangeTextBIU)&&(t.underline=hj(t.underline,n.underline)),t.violationSettings.allowTextCrop=null!==(o=null===(i=n.violationSettings)||void 0===i?void 0:i.allowTextCrop)&&void 0!==o?o:t.violationSettings.allowTextCrop,t.tracking=hj(t.tracking,n.tracking),null!=n.previewLeading?t.previewLeading=hj(t.previewLeading,n.previewLeading):t.leading=hj(t.leading,n.leading),(r.ignorePermissions||t.textPermissions.allowChangeTextAlignment)&&(t.alignment=hj(t.alignment,n.alignment)),t.horizontalScale=hj(t.horizontalScale,n.horizontalScale),t.verticalScale=hj(t.verticalScale,n.verticalScale),t.previewScale=hj(t.previewScale,n.previewScale),t.overlapLinesEnabled=hj(t.overlapLinesEnabled,n.overlapLinesEnabled),t.checkTextCrop=hj(t.checkTextCrop,n.checkTextCrop),t.isVariable=null!==(s=n.isVariable)&&void 0!==s?s:t.isVariable,null!=n.color&&(r.ignorePermissions||t.textPermissions.allowChangeFontColor)){var a=oH.createColor(n.color);t.color=hj(t.color,a)}if(null!=n.font){if((r.ignorePermissions||t.textPermissions.allowChangeTextBIU)&&(t.font.fauxBold=hj(t.font.fauxBold,n.font.fauxBold),t.font.fauxItalic=hj(t.font.fauxItalic,n.font.fauxItalic)),(r.ignorePermissions||t.textPermissions.allowChangeFont)&&(t.font.postScriptName=hj(t.font.postScriptName,n.font.postScriptName)),r.ignorePermissions||t.textPermissions.allowChangeFontSize)if(null!=n.font.previewSize){var l=e.parseItemsDataValueRelativeToHeight(n.font.previewSize,this._productHandler,r.relativeToPrintArea),c=hj(t.previewFontSize,l),u=t.previewFontSize;if(t.previewFontSize=c,t instanceof Dz){var h=this._productHandler.getHandler(t).getTransformedRectangle().location,d=c/u,p=new YN(d,d,0,0,0);t.textPath.transform(p,h)}}else if(null!=n.font.size){var f=e.parseItemsDataValueRelativeToHeight(n.font.size,this._productHandler,r.relativeToPrintArea);t.font.size=hj(t.font.size,f)}t.font.allCaps=hj(t.font.allCaps,n.font.allCaps)}void 0!==n.stroke&&(r.ignorePermissions||t.textPermissions.allowChangeStroke)&&(null==n.stroke?t.stroke=null:(a=oH.createColor(n.stroke.color||"#00ffff"),t.stroke=new UH({size:n.stroke.size,color:a}))),void 0!==n.shadow&&(r.ignorePermissions||t.textPermissions.allowChangeShadow)&&(null==n.shadow?t.shadow=null:(a=oH.createColor(n.shadow.color||"#00ffff"),t.shadow=new WH({size:n.shadow.size,distance:n.shadow.distance,angle:n.shadow.angle,color:a}))),null!=n.overprintText&&(t.overprintText=n.overprintText)}this._applyToShapeItem(t,n,r)},e.prototype._applyToItem=function(e,t,n){var r,i,o,s,a,l,c,u,h,d,p=this;if(null!=t){if(null!=t.manipulationPermissions){var f=t.manipulationPermissions,m=e.manipulationPermissions;m.resizeGrips.corner=hj(m.resizeGrips.corner,f.resizeGrips.corner),m.resizeGrips.edge=hj(m.resizeGrips.edge,f.resizeGrips.edge),m.allowDelete=hj(m.allowDelete,f.allowDelete),m.allowMoveHorizontal=hj(m.allowMoveHorizontal,f.allowMoveHorizontal),m.allowMoveVertical=hj(m.allowMoveVertical,f.allowMoveVertical),m.allowRotate=hj(m.allowRotate,f.allowRotate),m.allowDragAndDrop=hj(m.allowDragAndDrop,f.allowDragAndDrop)}null!=t.visualizationPermissions&&(e.visualizationPermissions.noPrint=hj(e.visualizationPermissions.noPrint,t.visualizationPermissions.noPrint),e.visualizationPermissions.noShow=hj(e.visualizationPermissions.noShow,t.visualizationPermissions.noShow));var g=t.itemPermissions;if(null!=g){e.itemPermissions.allowOpacityChange=hj(e.itemPermissions.allowOpacityChange,g.allowOpacityChange),e.itemPermissions.allowZOrderChange=hj(e.itemPermissions.allowZOrderChange,g.allowZOrderChange);var y=g.itemToolbarPermissions;null!=y&&(e.itemPermissions.itemToolbarPermissions.showEditButton=hj(e.itemPermissions.itemToolbarPermissions.showEditButton,y.showEditButton),e.itemPermissions.itemToolbarPermissions.showDeleteButton=hj(e.itemPermissions.itemToolbarPermissions.showDeleteButton,y.showDeleteButton),e.itemPermissions.itemToolbarPermissions.showSelectButton=hj(e.itemPermissions.itemToolbarPermissions.showSelectButton,y.showSelectButton)),e.itemPermissions.allowRemoveOnLayoutChange=hj(e.itemPermissions.allowRemoveOnLayoutChange,g.allowRemoveOnLayoutChange)}if(e.violationSettings.allowBleedArea=null!==(i=null===(r=t.violationSettings)||void 0===r?void 0:r.allowBleedArea)&&void 0!==i?i:e.violationSettings.allowBleedArea,e.violationSettings.allowRegion=null!==(s=null===(o=t.violationSettings)||void 0===o?void 0:o.allowRegion)&&void 0!==s?s:e.violationSettings.allowRegion,e.violationSettings.allowSafetyLines=null!==(l=null===(a=t.violationSettings)||void 0===a?void 0:a.allowSafetyLines)&&void 0!==l?l:e.violationSettings.allowSafetyLines,null!=t.textWrappingMode)switch(t.textWrappingMode.toLowerCase()){case"none":e.textWrappingMode=Bj.None;break;case"square":e.textWrappingMode=Bj.Square;break;case"tight":e.textWrappingMode=Bj.Tight;break;default:console.error("Unknown textWrappingMode:",t.textWrappingMode)}if((n.ignorePermissions||e.itemPermissions.allowOpacityChange)&&(e.opacity=hj(e.opacity,t.opacity),e instanceof FV&&e.updateContentAndFrames(function(e){return e.opacity=hj(e.opacity,t.opacity)})),e.name=hj(e.name,t.name),null!=t.blendMode){var _=null!==(u=lH,h=t.blendMode,c=(d=Object.getOwnPropertyNames(u))[d.map(function(e){return u[e].toString().toLowerCase()}).indexOf(h.toLowerCase())])&&void 0!==c?c:lH.Normal;e.blendMode=_}null!=t.themeBinding&&(e.themeBinding.text=dj(e.themeBinding.text,t.themeBinding.text),e.themeBinding.stroke=dj(e.themeBinding.stroke,t.themeBinding.stroke),e.themeBinding.shadow=dj(e.themeBinding.shadow,t.themeBinding.shadow),e.themeBinding.img=dj(e.themeBinding.img,t.themeBinding.img),e.themeBinding.border=dj(e.themeBinding.border,t.themeBinding.border),e.themeBinding.fill=dj(e.themeBinding.fill,t.themeBinding.fill),e.themeBinding.textFill=dj(e.themeBinding.textFill,t.themeBinding.textFill),e.themeBinding.barcode=dj(e.themeBinding.barcode,t.themeBinding.barcode),e.themeBinding.line=dj(e.themeBinding.line,t.themeBinding.line),null!=t.themeBinding.styles&&(e.themeBinding.styles=Kq(e.themeBinding.styles||[],t.themeBinding.styles)),this._updateThemeForItem(e))}if(n.changePosition&&!(e instanceof FH&&null!=e.parentPlaceholder))if(e instanceof ZH&&""!==e.text.trim()){var v=function(){e.getItemChangedEvent().remove(v),p._applyPositionAndSize(e,t,n.relativeToPrintArea)};if(e instanceof gz){var b=t;null==b.width&&null==b.height?e.scheduledFitMode=BH.ShrinkOrStretchToContent:null==b.height?e.scheduledFitMode=BH.ShrinkOrStretchToContentHeight:null==b.width&&(e.scheduledFitMode=BH.ShrinkOrStretchToContentWidth)}e instanceof gz&&null==e.scheduledFitMode||e instanceof PV?this._applyPositionAndSize(e,t,n.relativeToPrintArea):e.getItemChangedEvent().add(v)}else this._applyPositionAndSize(e,t,n.relativeToPrintArea)},e.prototype._applyPositionAndSize=function(t,n,r){var i;if(!(t instanceof Bz)){var o,s,a=e._getTargetBounds(this._productHandler,r),l=e._getVisualSize(this._productHandler,a),c=this._productHandler.contentAngle,u=pj(null!=n&&null!=n.width?n.width:"50%",l.width),h=pj(null!=n&&null!=n.height?n.height:"50%",l.height),d=this._productHandler.getHandler(t),p=d.getTransformedRectangle(!1),f=p.angle-c+(null!==(i=n.angle)&&void 0!==i?i:0);if(t instanceof BV||t instanceof zV)o=p.width,s=p.height;else if(t.type===RH.type)if(p.width<l.width&&p.height<l.height)o=p.width,s=p.height;else{var m=2*d.getBorderMargin(),g=window.Math.min(l.width/(p.width+m),l.height/(p.height+m));o=p.width*g,s=p.height*g}else t instanceof gz?(o=null!=n&&null!=n.width?u:p.width,s=null!=n&&null!=n.height?h:p.height):(o=u,s=h);if(null!=this._productHandler.regionForCurrentContainer&&(g=window.Math.min(.9*l.width/o,.9*l.height/s))<1&&(o*=g,s*=g),t instanceof uz){var y=IW(e.getBarcodeRatio(t.barcodeFormat),new Yz(u,h));o=y.width,s=y.height}else if(t instanceof nV||t instanceof FV&&!t.isEmptyContent&&null==t.barcodeFormat){if(null==n.width&&null==n.height&&!(t instanceof uz)){var _=this._getOriginalImageSize(t),v=_.width<l.width&&_.height<l.height;o=v?_.width:l.width,s=v?_.height:l.height}var b=this._getImageSource(t);g=Math.min(o/b.width,s/b.height),o=b.width*g,s=b.height*g}else if(t instanceof Cz){var w=d.rectangle;g=Math.min(o/w.width,s/w.height),o=w.width*g,s=w.height*g}var C=a.width/2,x=a.height/2,E=null!=n&&null!=n.location&&null!=n.location.y?n.location.y:x,S=pj(null!=n&&null!=n.location&&null!=n.location.x?n.location.x:C,a.width),P=pj(E,a.height);90!==c&&180!==c||(P=a.height-P),180!==c&&270!==c||(S=a.width-S);var T=(null!=n&&null!=n.location?n.location.originY:null)||YU.Center;switch(((null!=n&&null!=n.location?n.location.originX:null)||YU.Center).toLowerCase()){case YU.Left:C=S;break;case YU.Right:0===c?C=S-o:90===c?C=S-s:180===c?C=S+o:270===c&&(C=S+s);break;case YU.Center:0===c?C=S-o/2:90===c?C=S-s/2:180===c?C=S+o/2:270===c&&(C=S+s/2)}switch(T.toLowerCase()){case YU.Top:x=P;break;case YU.Bottom:0===c?x=P-s:90===c?x=P+o:180===c?x=P+s:270===c&&(x=P-o);break;case YU.Center:0===c?x=P-s/2:90===c?x=P+o/2:180===c?x=P+s/2:270===c&&(x=P-o/2)}C+=a.left,x+=a.top;var I=new KN(0,0,o,s);if(I.angle=f,I.location=new MN(C,x),t instanceof ZH)if(t instanceof gz&&null!=n&&t.overflowStrategy===jH.Clip&&(null==n.width&&null==n.height?t.scheduledFitMode=BH.ShrinkOrStretchToContent:null==n.height?t.scheduledFitMode=BH.ShrinkOrStretchToContentHeight:null==n.width&&(t.scheduledFitMode=BH.ShrinkOrStretchToContentWidth)),t instanceof gz||t instanceof PV){var O=I.toRectangleF(),k=$N.rectangle(O.left,O.top,O.width,O.height);t.sourcePath=k,t.sourceRectangle=O.clone(),t instanceof gz?t.textRectangle=O:t.boundingPaths=[k]}else d.setTransformedRectangle(I);else{if(t instanceof FV||t instanceof FH){var R=I.toRectangleF();t.sourceRectangle=R,t.sourcePath=$N.rectangle(R.left,R.top,R.width,R.height)}d.setTransformedRectangle(I)}this._productHandler.getHandler(t).update()}},e.prototype._getOriginalImageSize=function(e){return e instanceof nV?e.getOriginalImageSize():null!=e.content&&e.content instanceof nV?e.content.getOriginalImageSize():null},e._getTargetBounds=function(e,t){return t?e.getPrintAreaBounds():new FN(0,0,e.currentSurface.width,e.currentSurface.height)},e._getVisualSize=function(e,t){return e.getVisualSize(t)},e.prototype._getImageSource=function(e){return e instanceof nV?e.source:e.content.source},e.prototype._getRotatedRegion=function(e){if(null==e.region)return null;var t=this._productHandler.userEditPrintArea.bounds,n=FN.FromObject(e.region),r=this._productHandler.contentAngle;if(r>0){var i=KN.fromRectangleF(n);i.rotateAt(r,t.center),n=i.bounds}return n},e.prototype._calcNewGroupBounds=function(e,t){var n,r,i=this,o=e.map(function(e){return e.clone()}).map(function(e){return i._productHandler.getHandler(e)});try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),a=s.next();!a.done;a=s.next()){var l=a.value;l instanceof JU?l.item.borderWidth=t:l.width=t}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}var c=o.map(function(e){return e.bounds});return FN.FromLTRB(Math.min.apply(Math,Kq(c.map(function(e){return e.left}))),Math.min.apply(Math,Kq(c.map(function(e){return e.top}))),Math.max.apply(Math,Kq(c.map(function(e){return e.right}))),Math.max.apply(Math,Kq(c.map(function(e){return e.bottom}))))},e.getBarcodeRatio=function(e){return e===JH.IMB?new Yz(744,49):new Yz(e===JH.QR_CODE||e===JH.AZTEC||e===JH.DATA_MATRIX?1:2.5,1)},e.parseItemsDataValueRelativeToHeight=function(t,n,r){if("number"==typeof t)return t;var i=e._getTargetBounds(n,r);return pj(t,e._getVisualSize(n,i).height)},e}(),Zq=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},Jq=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},e$=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},t$=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(e$(arguments[t]));return e},n$=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r$=function(){function e(){}return e.isBgContainerItem=function(e){if(e.parentContainer instanceof Aj)return e.parentContainer instanceof Aj&&tj(e.parentContainer.name,bU.BG_CONTAINER_NAME,!0)},e.isFgContainerItem=function(e){return e.parentContainer instanceof Aj&&tj(e.parentContainer.name,bU.FG_CONTAINER_NAME,!0)},e.isImage=function(t){return(t instanceof nV||t instanceof FV)&&!e.isBgContainerItem(t)},e.isEmptyPlaceholder=function(e){return e instanceof FV&&e.isStubOrEmpty},e.isDataMatrixBarcode=function(e){return e instanceof uz&&e.barcodeFormat===JH.DATA_MATRIX||e instanceof FV&&e.barcodeFormat==JH.DATA_MATRIX},e.isQrCode=function(e){return e instanceof uz&&e.isQrCode||e instanceof FV&&e.barcodeFormat==JH.QR_CODE},e.isLinearBarcode=function(e){return e instanceof uz&&e.isLinearBarcode||e instanceof FV&&(e.barcodeFormat==JH.EAN_13||e.barcodeFormat==JH.EAN_8||e.barcodeFormat==JH.UPC_A||e.barcodeFormat==JH.UPC_E||e.barcodeFormat==JH.CODE_128)},e.isVariableItem=function(e){return e.canSetIsVariable()},e.isMultiValueItem=function(e){return(e instanceof nV||e instanceof ZH)&&0!==e.values.length},e.isTextType=function(e){return e===ZH||ZH.prototype.isPrototypeOf(e.prototype)},e.getAllowTextFormatting=function(e,t){var n,r,i,o;if(null!=e&&e instanceof gz&&e.overflowStrategy!==jH.Clip&&e.overflowStrategy!==jH.ExpandBox)return!1;var s=e instanceof Dz?0:null!==(n=null==e?void 0:e.maxLineCount)&&void 0!==n?n:0,a=null!==(r=null==e?void 0:e.maxLineLength)&&void 0!==r?r:0;return!(s>0||a>0)&&(null!==(o=null===(i=null==e?void 0:e.textPermissions)||void 0===i?void 0:i.allowTextFormatting)&&void 0!==o?o:t)},e.allowMoveHorizontal=function(e){return!e.locked&&(!e.manipulationPermissions||e.manipulationPermissions.allowMoveHorizontal)},e.allowMoveVertical=function(e){return!e.locked&&(!e.manipulationPermissions||e.manipulationPermissions.allowMoveVertical)},e.allowManipulate=function(e){return!e.locked&&(!e.manipulationPermissions||e.manipulationPermissions.allowMoveVertical||e.manipulationPermissions.allowMoveHorizontal||e.manipulationPermissions.allowDelete||e.manipulationPermissions.allowRotate)},e.clearImageContent=function(e){if(null!=e){var t=e.content;t instanceof nV&&(t.source.id=null,t.source.width=null,t.source.height=null,t.isUserImage=!1,t.fillColor=new Kj("rgba(0,0,0,0)"))}},e.getImageItem=function(e){if(null==e)return null;if(e instanceof nV)return e;var t=e.content;if(t instanceof nV)return t;if(null==t||t instanceof uz)return null;throw new IL("Wrong placeholder content!")},e.getImagePermissions=function(e){return null==e?null:e instanceof nV?e.imagePermissions:e.getImagePermissions()},e.getContentEffect=function(e){return e.content instanceof nV?e.content.effect:e.contentEffect},e.getAllowChangeContent=function(t){if(t instanceof uz||t instanceof FV&&t.isBarcodePlaceholder)return e.getBarcodePermissions(t).allowChangeBarcodeContent;var n=e.getImagePermissions(t),r=null==n||n.allowChangeImage,i=e.getImageItem(t);return r&&(null==i||0===i.values.length)},e.getImageMetaDataFromFile=function(t,n,r){return void 0===r&&(r=null),Zq(this,void 0,void 0,function(){var i,o,s;return Jq(this,function(a){switch(a.label){case 0:i={filePath:n,userId:r},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,$U({url:nj(t,"/api/ImagePicker/GetFileMetadata"),type:jU.post,headers:[HU.json],data:JSON.stringify(i)})];case 2:return o=a.sent(),[2,e._parseImageMetadata(o.value)];case 3:throw s=a.sent(),new IL(JSON.parse(s.toJSON().message).ExceptionMessage);case 4:return[2]}})})},e.getImageMetaDataFromDesignImage=function(t,n){return Zq(this,void 0,void 0,function(){var r,i,o;return Jq(this,function(s){switch(s.label){case 0:r={designImageName:n},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,$U({url:nj(t,"/api/ImagePicker/GetDesignImageMeta"),type:jU.post,headers:[HU.json],data:JSON.stringify(r)})];case 2:return i=s.sent(),[3,4];case 3:throw o=s.sent(),new IL(JSON.parse(o.toJSON().message).ExceptionMessage);case 4:return[2,e._parseImageMetadata(i.value)]}})})},e.getImageMetadataFromRemoteFile=function(t,n){return Zq(this,void 0,void 0,function(){var r,i,o;return Jq(this,function(s){switch(s.label){case 0:r={url:n},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,$U({url:nj(t,"/api/ImagePicker/GetWebImageMeta"),type:jU.post,headers:[HU.json],data:JSON.stringify(r)})];case 2:return i=s.sent(),[3,4];case 3:throw o=s.sent(),new IL(JSON.parse(o.toJSON().message).ExceptionMessage);case 4:return[2,e._parseImageMetadata(i.value)]}})})},e._parseImageMetadata=function(e){var t=JSON.parse(e),n=new lV;return n.storageId=t.storageId,n.name=t.name,n.size.width=t.width,n.size.height=t.height,n},e.getTextFromRichTextItem=function(e){return lj(e.text)},e.getMaxFontSize=function(e){if(null==e||!(e instanceof ZH))return null;if(!aj(e.text))return e.font.size;var t=[e.font.size];try{null!=e.text&&function(e,n,r){var i=(new DOMParser).parseFromString("<body>"+e+"</body>","application/xml"),o={acceptNode:function(e){var t=e.nodeName.toLowerCase();return n.includes(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}};BL.IsIE()&&(o=function(e){return e.acceptNode}(o));for(var s,a=document.createTreeWalker(i.childNodes[0],NodeFilter.SHOW_ELEMENT,o,!1);a.nextNode();)s=void 0,null!=(s=function(e){var t,n,r=e.attributes.getNamedItem("style");if(null==r||null==r.value)return null;var i=r.value.split(";"),o=new Map;try{for(var s=n$(i),a=s.next();!a.done;a=s.next()){var l=a.value;if(null!=(l=l.trim())&&""!==l){var c=l.split(":"),u=c[0].trim(),h=c[1].trim();o.set(u,h)}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o}(a.currentNode))&&s.has("font-size")&&t.push(parseFloat(s.get("font-size")))}(e.text,["span","ol","ul"])}catch(n){console.error("Unexpected exception while parsing item text"),console.error(n)}return Math.max.apply(Math,t$(t))},e.getBarcodeItem=function(e){if(null==e)return null;if(e instanceof uz)return e;var t=e.content;if(t instanceof uz)return t;if(null==t)return null;throw new IL("Wrong placeholder content!")},e.getBarcodePermissions=function(e){if(null==e)return null;if(e instanceof uz)return e.barcodePermissions;if(null!=e.contentPermissions)return e.contentPermissions.barcodePermissions;var t=e.content;return t instanceof uz?t.barcodePermissions:null},e.getImageUrlFromImageMetadata=function(e,t,n,r,i){return yW.getImageUrl(t,e.storageId,null!=n?n:e.size.width,null!=r?r:e.size.height,null,null,null!=i&&i,null,e.pageIndex)},e.updateItems=function(e,t,n,r){var i,o,s;if(null==(s=r)&&(s={}),FL.defaults(s,{addToHistory:!0,updatePhase:Gq.Final,redraw:!0}),r=s,0!==e.length){try{for(var a=n$(e),l=a.next();!l.done;l=a.next())this._updateItem(t,l.value,r,n)}catch(c){i={error:c}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}r.redraw&&t.redraw()}},e._updateItem=function(e,t,n,r){var i=e.getHandler(t);null!=i&&null!=i.layer&&(t instanceof nV?this._updateImageItem(t,i,n,r):t instanceof FV&&this._updatePlaceholderItem(t,i,n,r))},e._updateImageItem=function(e,t,n,r){t.quickUpdate(),n.updatePhase===Gq.Final&&(e.getItemChangedEvent().fire(),t.update(),r.updateTexts())},e._updatePlaceholderItem=function(e,t,n,r){null!=e.content&&this._updateImageItem(e.content,t.content,n,r),this._hidePlaceholderButtonWhileImageLoad(t)||t.update()},e._hidePlaceholderButtonWhileImageLoad=function(e){if(e.isEmptyContent()||!e.getPermissions().showSelectButton&&!e.getPermissions().showHandleButton)return!1;var t=function(n){n.removeReady(t),e.getPermissions().showSelectButton=!0,e.update()};return e.content.addReady(t),e.getPermissions().showSelectButton=!1,e.update(),!0},e.getItemBoundsForViolationCheck=function(e){return e instanceof YW?e.getBoundsIncludingFrames():e.bounds},e.createCloneName=function(e,t,n){var r;"string"!=typeof(r="string"==typeof e?e:t.getRealItemName(e))&&(r="");var i=n.currentSurface.getAllItems({ignoreMockups:!1,excludeGroupItems:!0,flatGroupItems:!0}).toArray(),o=function(e){return i.some(function(n){return t.getRealItemName(n)===e})};if(!o(r))return r;var s=0,a=r.match(/_(\d+)$/);if(null!=a&&r.length>=2){r=r.substr(0,r.length-a[0].length);var l=parseInt(a[1]);l>0&&(s=l)}var c,u=1;do{if(!o(c=r+"_"+(s+u).toString()))break;u++}while(u<=1e4);return"string"==typeof e?c:t.createNewItemName(e,c)},e.createImageContentForPlaceholder=function(t,n,r,i){if(t.isBarcodePlaceholder!==n instanceof sz)return null;var o,s=r.getHandler(t),a=s.getTransformedRectangle(!1);a.angle=0;var l=t.content,c=t.contentPermissions;if(t.isBarcodePlaceholder&&n instanceof sz){var u=a.clone(),h=IW(Qq.getBarcodeRatio(n.barcodeFormat),new Yz(a.width,a.height));u.width=h.width,u.height=h.height;var d=void 0;null!=l.barcodeOptions?d=l.barcodeOptions:(d=new hz).pureBarcode=!0,(o=new uz(n.barcodeFormat,null,d,u.toRectangleF())).applyBarcodeData(n),t.barcodeFormat=n.barcodeFormat}else n instanceof lV&&(o=new nV(n.storageId,a.location,a.width,a.height,n.size.width/n.size.height));o instanceof nV&&n instanceof lV&&(QX.setDataToImage(n,o),o.effect=t.contentEffect,o.imagePermissions=c.imagePermissions.clone(),o.effect==Oz.Colorize&&null!=t.contentFillColor&&(o.fillColor=t.contentFillColor),null!=t.contentOverlayEffect&&(o.overlayEffect=t.contentOverlayEffect.clone())),o.transform.setAngle(t.transform.angle),r.getHandler(o).updateRectangle(null,t.contentResizeMode,s,i),o.textWrappingMode=Bj.Square,o.isVariable=null!=l&&l.isVariable,o instanceof uz&&(o.barcodePermissions=c.barcodePermissions.clone());var p=t.contentPermissions.imagePermissions.allowKeepOverlayColor;return null==l?(o instanceof nV&&(o.allowedSubfolder=t.allowedSubfolder,o.allowedTabs=t.allowedTabs),o.opacity=t.opacity):(l instanceof nV&&o instanceof nV&&(o.allowedSubfolder=l.allowedSubfolder,o.allowedTabs=l.allowedTabs,o.imagePermissions=l.imagePermissions.clone(),p&&e.setOverlayEffectColor(o,l.overlayEffect.color)),o.manipulationPermissions=l.manipulationPermissions.clone(),o.opacity=t.content.opacity,o.fillColor=l.fillColor.clone(),o instanceof uz&&l instanceof uz&&(o.barcodePermissions=l.barcodePermissions.clone())),o},e.positionItemInArea=function(t,n,r,i,o,s,a,l){if(void 0===o&&(o=!0),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=!0),n instanceof Cz)return n.getNestedItems(!0).forEach(function(n){return e.positionItemInArea(t,n,r,i,o,s,a,l)});var c=t.userEditContainer,u=null!=s?s.toRectangleF():c.region,h=null!=u,d=c.parentComponent.printAreas.getItem(0).bounds,p=h?u:d,f=p.center,m=o?EW.from(p):t.getPrintAreaVisualSize(c),g=Math.min(m.width/r,m.height/i),y=null!=a?a:new MN(r/2,i/2),_=function(e){var n=f;if(e instanceof gz||e instanceof nz)e.textRectangle.width*=g,e.textRectangle.height*=g,e.textRectangle.left=n.x+g*(e.textRectangle.left-y.x)-0,e.textRectangle.top=n.y+g*(e.textRectangle.top-y.y)-0;else if(e instanceof BV){var r=n.y+g*(e.baselineLocation.y-y.y);e.baselineLocation.x=n.x+g*(e.baselineLocation.x-y.x),e.baselineLocation.y=r}else{var i=t.getHandler(e).getTransformedRectangle(l),o=n.x+g*(i.centerX-y.x),s=n.y+g*(i.centerY-y.y);e.transform.setScaleX(g),e.transform.setScaleY(g),e.transform.move(o-i.centerX,s-i.centerY)}};_(n),n instanceof FV&&n.updateContentAndFrames(_),n instanceof ZH&&(n.font.size*=g)},e.rotateItems=function(e,t,n,r){var i=function(t){if(t instanceof Cz)return t.applyToItems(i);var o=e.getHandler(t),s=o.getTransformedRectangle(!1);s.rotateAt(r,n);var a=s.getTransform(o.getTransformedRectangle(!1));t.transform.move(a.translateX,a.translateY),t.transform.rotate(a.angle),t instanceof FV&&t.updateContentAndFrames(i)};t.forEach(function(e){return i(e)})},e.changeItemsContent=function(e,t,n,r,i,o){var s,a,l,c,u,h,d=this,p=r.map(function(e){return e.clone()}),f=p.filter(function(e){return e instanceof Cz}),m=i.filter(function(e){return e instanceof Cz});this._replaceContentFromOldToNewItems(f,m,function(r,i){return d.changeItemsContent(e,t,n,i.items.toArray(),r.items.toArray(),o)},o);var g=p.filter(function(e){return e instanceof ZH}),y=i.filter(function(e){return e instanceof ZH}),_=e.getAllItems({ignoreMockups:!1,flatGroupItems:!0}),v=_.filter(function(e){return e instanceof ZH});v=FL.without.apply(FL,t$([v],y));try{for(var b=n$(y),w=b.next();!w.done;w=b.next()){var C=w.value;if(0!==C.placeholders.length){var x=function(e){var t=v.filter(function(t){return null!=t.placeholders.toArray().find(function(t){return t.name===e.name})});if(0===t.length)return"continue";e.value=t[0].placeholders.toArray().find(function(t){return t.name===e.name}).value};try{for(var E=(l=void 0,n$(C.placeholders.toArray())),S=E.next();!S.done;S=E.next())x(S.value)}catch(L){l={error:L}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}}}}catch(B){s={error:B}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}this._replaceContentFromOldToNewItems(g,y,function(e,t){e.text=t.text,null!=t.tags&&(e.tags=t.tags)},o);var P=function(e,t){var r=new lV;r.size=new Yz(t.imageContent.source.width,t.imageContent.source.height),r.storageId=t.imageContent.source.id,r.name=t.imageContent.name,r.origin=t.imageContent.source.origin,r.isVector=t.imageContent.source.isVector,r.pageIndex=t.imageContent.source.pageIndex,n.execute(GG.setImageMetadata,{dataList:[{item:e,imageData:r,tags:t.tags}]}),t.isEmptyContent||e.isEmptyContent||null==t.content.tags||(e.content.tags=t.content.tags)},T=function(e){return e instanceof FV&&!e.isStubOrEmpty&&e.content instanceof nV},I=p.filter(T),O=i.filter(function(e){return e instanceof FV}),k=_.filter(T);k=FL.without.apply(FL,t$([k],O));var R=O.filter(function(e){return null!=e.linkId});if(0!==R.length){var A=new Set,M=function(e){var t=k.find(function(t){return t.linkId===e.linkId&&!t.isStubOrEmpty&&t.content instanceof nV});if(null==t)return"continue";A.add(t.linkId),P(e,t),O=FL.without(O,e)};try{for(var D=n$(R),F=D.next();!F.done;F=D.next())M(F.value)}catch(N){u={error:N}}finally{try{F&&!F.done&&(h=D.return)&&h.call(D)}finally{if(u)throw u.error}}I=I.filter(function(e){return!A.has(e.linkId)})}this._replaceContentFromOldToNewItems(I,O,P,o)},e._replaceContentFromOldToNewItems=function(e,t,n,r){for(var i=e.map(function(e){return e.name}),o=[],s=function(e){i.find(function(n){return n===t[e].name})&&(i.splice(i.indexOf(t[e].name),1),o.push(e))},a=0;a<t.length;a++)s(a);var l,c=function(s){var a=t[s],c=void 0;o.includes(s)?c=e.find(function(e){return e.name===a.name}):r&&0!==i.length&&(l=i.shift(),c=e.find(function(e){return e.name===l})),null!=c&&(n(a,c.clone()),e.splice(e.indexOf(c),1))};for(a=0;a<t.length;a++)c(a)},e.getEmptyPlaceholdersFromProduct=function(e,t){void 0===t&&(t=!1);var n=[];return e.getAllItems({flatGroupItems:!0,ignoreMockups:!0}).filter(function(e){if(!(e instanceof FV&&e.isStubOrEmpty&&null!=e.parentContainer&&e.parentContainer.name===bU.MAIN_CONTAINER_NAME))return!1;if(t)return!0;if(null!=e.linkId){if(n.includes(e.linkId))return!1;n.push(e.linkId)}return!0})},e.waitForItemsUpdated=function(e,t){return Zq(this,void 0,void 0,function(){var n,r;return Jq(this,function(i){switch(i.label){case 0:return n=e.filter(function(e){return e instanceof Cz}).map(function(e){return e.getNestedItems(!0)}).reduce(function(e,t){return t$(e,t)},[]),r=e.concat(n).map(function(e){return t.handlerFactory.get(e)}),[4,t.waitUpdate(r)];case 1:return i.sent(),[2]}})})},e.isTextItemHandlerReady=function(e,t){if(e instanceof ZH){var n=t.getHandler(e);if(n instanceof aW&&null==n.currentTextImage.cacheFileId)return!1;if(n instanceof b$&&!n.ready)return!1}return!0},e.setOverlayEffectColor=function(t,n){null!=t&&(e._getItemOverlayEffect(t).color=n)},e._getItemOverlayEffect=function(e){return e instanceof nV?(e.overlayEffect=null!=e.overlayEffect?e.overlayEffect:new $z,e.overlayEffect):(e.contentOverlayEffect=null!=e.contentOverlayEffect?e.contentOverlayEffect:new $z,e.contentOverlayEffect)},e}();!function(e){e[e.InProgress=0]="InProgress",e[e.Final=1]="Final"}(Gq||(Gq={}));var i$,o$,s$,a$,l$,c$=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},u$=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},h$=function(){function e(){this._local="",this._allowWriteToGlobalClipboard=!1,this._allowReadFromGlobalClipboard=!1}return e.prototype.init=function(){this._allowWriteToGlobalClipboard=this._allowReadFromGlobalClipboard=null!=window.navigator.clipboard},e.prototype.read=function(){return c$(this,void 0,void 0,function(){var e,t;return u$(this,function(n){switch(n.label){case 0:if(!this._allowReadFromGlobalClipboard)return[2,this._local];e=this._createTextArea(),document.body.appendChild(e),e.focus(),e.select(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,window.navigator.clipboard.readText()];case 2:return[2,n.sent()];case 3:return t=n.sent(),console.warn(t),this._allowReadFromGlobalClipboard=!1,[2,this._local];case 4:return document.body.removeChild(e),[7];case 5:return[2]}})})},e.prototype.write=function(e){return c$(this,void 0,void 0,function(){var t,n;return u$(this,function(r){switch(r.label){case 0:if(this._local=e,!this._allowWriteToGlobalClipboard)return[3,5];t=this._createTextArea(),document.body.appendChild(t),t.focus(),t.select(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,window.navigator.clipboard.writeText(e)];case 2:return r.sent(),[3,5];case 3:return n=r.sent(),console.warn(n),this._allowWriteToGlobalClipboard=!1,[3,5];case 4:return document.body.removeChild(t),[7];case 5:return[2]}})})},e.prototype._createTextArea=function(){var e=document.createElement("textarea");return e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="2em",e.style.height="2em",e.style.padding="0",e.style.background="transparent",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e},e}(),d$=function(){function e(e,t){this._canvas=null,this._activeTextCanvasHandler=null,this._clipboard=null,this._manager=null,this._rectangle=null,this._previewScale=1,this._textFormattingEnabled=!0,this._transform=null,this._inlineStyle=null,this._paragraphStyle=null,this.styleChanged=new EL,this.initialized=new EL,this._originalCanvasFloatingItemMenuEnabled=!1,this._selectionValue=null,this._selectionAnchor=null,this._mouseSelectionIsActive=!1,this._cursorBlinkInterval=null,this._cursorBlink=!0,this._cursorEnabled=!1,this._ready=!1,this._canvas=e,this._activeTextCanvasHandler=t,this._clipboard=new h$}return e.prototype.init=function(e,t,n){this._ready=!0,this._clipboard.init(),this.initialized.fire()},e.prototype.show=function(e,t){var n,r,i=this;this._manager=e,this._activeTextCanvasHandler.moveActiveTextCanvasOnTop(),this._rectangle=t.rectangle,this._previewScale=null!==(n=t.previewScale)&&void 0!==n?n:1,this._transform=t.transform,this._textFormattingEnabled=null!==(r=t.textFormattingEnabled)&&void 0!==r?r:this._canvas.viewer.textFormattingEnabled,this._originalCanvasFloatingItemMenuEnabled=this._canvas.floatingItemToolbarEnabled,this._canvas.floatingItemToolbarEnabled=!1,this._cursorEnabled=!0,this._setCursor(MN.fromIPoint(t.point)),this._selectionAnchor=this._textHandler.getCursor().getPosition(),null==this._cursorBlinkInterval&&(this._cursorBlinkInterval=setInterval(function(){i._drawCursor()},500)),this._textHandler.clearUndoRedo()},e.prototype.hide=function(){this._selection=null,this._selectionAnchor=null,this._canvas.floatingItemToolbarEnabled=this._originalCanvasFloatingItemMenuEnabled,this._cursorEnabled=!1,this._canvas.clearTextCursor();var e=this._getFormattedText();return this._manager=null,this._activeTextCanvasHandler.moveActiveTextCanvasBack(),e},Object.defineProperty(e.prototype,"active",{get:function(){return null!=this._manager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),e.prototype.setTextWhizz=function(e){this._textWhizz=e},Object.defineProperty(e.prototype,"_textHandler",{get:function(){var e;return null==this._manager&&console.warn("TextEditor: Cannot access TextHandler when the editor is hidden"),null===(e=this._manager)||void 0===e?void 0:e.textHandler},enumerable:!0,configurable:!0}),e.prototype._getFormattedText=function(){return this._textHandler.getTextRange().getFormattedTextForDefaults()},Object.defineProperty(e.prototype,"_selection",{get:function(){return this._selectionValue},set:function(e){this._selectionValue=e,this._drawCursor(!0),this._manager.drawSelection(e),this._updateStyles()},enumerable:!0,configurable:!0}),e.prototype.undo=function(){this._textHandler.undo();var e=this._textHandler.getUndoInfo(),t=this._textHandler.getUndoRedoCursorOrSelection(e.index);if(t.isValid())if(m$.comparePosition(t.getStart(),t.getEnd())){var n=t.getStart();this._textHandler.getCursor().set(n)}else this._selection=t;this._manager.updateItemHandler(this._selection),this._onCursorChanged(!0)},e.prototype.redo=function(){this._textHandler.redo();var e=this._textHandler.getUndoInfo(),t=this._textHandler.getUndoRedoCursorOrSelection(e.index);if(t.isValid())if(m$.comparePosition(t.getStart(),t.getEnd())){var n=t.getStart();this._textHandler.getCursor().set(n)}else this._selection=t;this._manager.updateItemHandler(this._selection),this._onCursorChanged(!0)},Object.defineProperty(e.prototype,"canUndo",{get:function(){var e=this._textHandler.getUndoInfo();return e.count>1&&e.index>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){var e=this._textHandler.getUndoInfo();return e.count>1&&e.index<e.count-1},enumerable:!0,configurable:!0}),e.prototype.processMouseEvent=function(e){var t=e.type,n=new MN(e.x,e.y),r=this._textHandler.getCursor();if("dblclick"===t)this._setCursor(n),this._selection=r.getPosition().getWord(),this._selectionAnchor=this._selection.getStart(),r.set(this._selection.getEnd());else if("mousedown"===t)this._selection=null,this._setCursor(n),this._mouseSelectionIsActive=!0,this._selectionAnchor=r.getPosition();else if("mousemove"===t){if(this._mouseSelectionIsActive){this._setCursor(n,!1);var i=new this._textWhizz.TextRange(this._selectionAnchor,r.getPosition());null!=this._selection&&m$.compareSelection(this._selection,i)||(this._selection=i,this._drawCursor(!0))}}else if("mouseup"===t){this._mouseSelectionIsActive=!1;var o=r.getPosition();m$.comparePosition(o,this._selectionAnchor)?this._selection=null:(i=new this._textWhizz.TextRange(this._selectionAnchor,r.getPosition()),null!=this._selection&&m$.compareSelection(this._selection,i)||(this._selection=i))}},e.prototype.processKeyEvent=function(e){var t=!0===e.ctrlKey||!0===e.metaKey,n=!0===e.shiftKey,r=this._textHandler.getCursor(),i=!0,o=this._keyEventToDirection(e);if(null!=o)r.move(o),n?this._selection=new this._textWhizz.TextRange(this._selectionAnchor,r.getPosition()):t&&(this._selectionAnchor=r.getPosition());else if(e.keyCode===AW.Backspace||e.keyCode===AW.Delete){if(null!=this._selection)this._selection.isValid()&&r.set(this._selection.delete(this._textWhizz.RangeCursorPos.left)),this._selection=null;else{var s=r.getPosition();if(r.move(e.keyCode===AW.Backspace?t?this._textWhizz.MoveDirection.leftWord:this._textWhizz.MoveDirection.left:t?this._textWhizz.MoveDirection.rightWord:this._textWhizz.MoveDirection.right)){var a=e.keyCode===AW.Backspace?r.getPosition():s,l=e.keyCode===AW.Backspace?s:r.getPosition(),c=e.keyCode===AW.Backspace?this._textWhizz.RangeCursorPos.right:this._textWhizz.RangeCursorPos.left;r.set(new this._textWhizz.TextRange(a,l).delete(c))}}this._selectionAnchor=r.getPosition()}else if(t)i=this._applyHotKey(e.keyCode,r,n);else if(e.keyCode===AW.Enter||e.keyCode===AW.Tab||1===e.key.length)if(null!=this._selection&&this._selection.isValid()&&r.set(this._selection.delete(this._textWhizz.RangeCursorPos.left)),e.keyCode!==AW.Enter||n){var u=e.key;e.keyCode===AW.Enter?u="\n":e.keyCode===AW.Tab&&(u="\t"),r.insertPlainText(u)}else r.insertLine();return n||t||(this._selectionAnchor=r.getPosition(),this._selection=null),this._manager.updateItemHandler(this._selection),this._onCursorChanged(!0),i},e.prototype._keyEventToDirection=function(e){var t=e.ctrlKey||e.metaKey;switch(e.keyCode){case AW.Left:return t?this._textWhizz.MoveDirection.leftWord:this._textWhizz.MoveDirection.left;case AW.Right:return t?this._textWhizz.MoveDirection.rightWord:this._textWhizz.MoveDirection.right;case AW.Up:return this._textWhizz.MoveDirection.up;case AW.Down:return this._textWhizz.MoveDirection.down;case AW.Home:return t?this._textWhizz.MoveDirection.textStart:this._textWhizz.MoveDirection.lineStart;case AW.End:return t?this._textWhizz.MoveDirection.textEnd:this._textWhizz.MoveDirection.lineEnd}return null},e.prototype._applyHotKey=function(e,t,n){var r,i,o=this;if(void 0===n&&(n=!1),e===AW.Space)this._clearFormat();else if(e!==AW.KeyA||n){if(e===AW.KeyC)(null===(r=this._selection)||void 0===r?void 0:r.isValid())&&this._clipboard.write(lj(this._selection.getFormattedTextForDefaults(),"\n"));else if(e===AW.KeyV)(null===(i=this._selection)||void 0===i?void 0:i.isValid())&&t.set(this._selection.delete(this._textWhizz.RangeCursorPos.left)),this._clipboard.read().then(function(e){t.insertPlainText(e),o._manager.updateItemHandler(o._selection),o._onCursorChanged(!0)});else if(e===AW.KeyZ){if(!this.canUndo)return!1;this.undo()}else if(e===AW.KeyY){if(!this.canRedo)return!1;this.redo()}}else this._selection=this._textHandler.getTextRange();if(!this._textFormattingEnabled)return!0;if(e===AW.KeyA&&n){var s=!this.getCharStyle().allCaps;this.updateCharStyle({font:{allCaps:s}})}else e===AW.KeyB?(s=!this.getCharStyle().fauxBold,this.updateCharStyle({font:{fauxBold:s}})):e===AW.KeyI?(s=!this.getCharStyle().fauxItalic,this.updateCharStyle({font:{fauxItalic:s}})):e===AW.KeyU?(s=!this.getCharStyle().underline,this.updateCharStyle({underline:s})):e===AW.KeyPeriod&&n?(s=this.getCharStyle().fontSize+1,this.updateCharStyle({font:{size:s}})):e===AW.KeyComma&&n?(s=this.getCharStyle().fontSize-1,this.updateCharStyle({font:{size:s}})):e===AW.KeyEqual&&n||e===AW.KeyPeriod?(s=!this.getCharStyle().superscript,this.updateCharStyle({superscript:s,subscript:!s&&void 0})):e===AW.KeyEqual||e===AW.KeyComma?(s=!this.getCharStyle().subscript,this.updateCharStyle({subscript:s,superscript:!s&&void 0})):e===AW.KeyL?this.updateParagraphStyle(function(e){return e.alignment=o._textWhizz.TextAlignment.left,e}):e===AW.KeyR?this.updateParagraphStyle(function(e){return e.alignment=o._textWhizz.TextAlignment.right,e}):e===AW.KeyE&&this.updateParagraphStyle(function(e){return e.alignment=o._textWhizz.TextAlignment.center,e});return!0},e.prototype._clearFormat=function(){if(null!=this._selection){var e=this._textHandler.getDefaultCharStyle();this._selection.updateCharStyles(function(t){return e})}},e.prototype._setCursor=function(e,t){void 0===t&&(t=!0),e.translate(-this._canvas.offset.x,-this._canvas.offset.y),null!=this._transform&&(e.rotateAt(-this._transform.angle,this._rectangle.center),e.translate(-this._transform.translateX,-this._transform.translateY)),e.scale(1/this._previewScale,1/this._previewScale);var n=this._textHandler,r=n.getPosition(e.x,e.y);n.getCursor().set(r),this._onCursorChanged(t)},e.prototype._onCursorChanged=function(e){this._updateStyles(),this._drawCursor(e)},e.prototype._drawCursor=function(e){var t=this;void 0===e&&(e=!1),this._cursorEnabled&&(this._cursorBlink=e||!this._cursorBlink,this._cursorBlink&&null==this._selection&&!this._mouseSelectionIsActive?this._canvas.drawTextCursor(function(e){var n=t._textHandler.getCursor().getPath();WN(t._previewScale,1)||n.scale(t._previewScale,t._previewScale),n.addToContext(e)}):this._canvas.clearTextCursor())},e.prototype.updateCharStyle=function(e){var t,n=this,r=function(t){if(null!=e.font){var r=e.font;null!=r.postScriptName&&(t.fontName=r.postScriptName),null!=r.size&&(t.fontSize=r.size),null!=r.fauxBold&&(t.fauxBold=r.fauxBold),null!=r.fauxItalic&&(t.fauxItalic=r.fauxItalic),null!=r.allCaps&&(t.allCaps=r.allCaps)}return null!=e.color&&(t.fillColor=n._manager.addColorToPalette(e.color)),null!=e.underline&&(t.underline=e.underline),null!=e.leading&&(t.leading=e.leading),null!=e.tracking&&(t.tracking=e.tracking),null!=e.stroke&&(e.stroke.enabled?(null!=e.stroke.color&&(t.strokeColor=n._manager.addColorToPalette(e.stroke.color)),null!=e.stroke.size&&(t.strokeWidth=e.stroke.size)):(t.strokeColor=n._manager.addColorToPalette(new Kj({r:0,g:0,b:0,a:0})),t.strokeWidth=0)),Array.isArray(e.openType)&&e.openType.length&&e.openType.forEach(function(e){return t.openType.set(n._textWhizz.OpenTypeFeature[e.tag],e.value)}),null!=e.subscript&&(t.subscript=e.subscript),null!=e.superscript&&(t.superscript=e.superscript),t},i=this._selection,o=function(){null!=i&&i.isValid()&&i.updateCharStyles(r),n._updateInlineStyles(),n._manager.updateItemHandler(n._selection)},s=null===(t=e.font)||void 0===t?void 0:t.postScriptName;if(null==s||this._canvas.fontRegistry.containsFonts([s])){o();var a=r(this._textHandler.getCursor().getCharStyle());this._textHandler.getCursor().setCharStyle(a),this._drawCursor(!0)}else this._canvas.fontRegistry.loadFonts([s]).finally(o)},e.prototype.updateParagraphStyle=function(e){null!=this._selection&&this._selection.isValid()&&this._selection.updateParagraphStyles(e);var t=e(this._textHandler.getCursor().getParagraphStyle());this._textHandler.getCursor().setParagraphStyle(t),this._manager.updateItemHandler(this._selection),this._drawCursor(!0)},e.prototype.getCharStyle=function(){if(null!=this._selection&&this._selection.isValid()){var e=this._selection.getCharStyles();if(e.size()>0)return e.get(0)}return this._textHandler.getCursor().getCharStyle()},e.prototype.getParagraphStyles=function(){return this._textHandler.getCursor().getParagraphStyle()},e.prototype._updateStyles=function(){if(this.active){var e=this._updateInlineStyles(),t=this._updateParagraphStyles();(e||t)&&this.styleChanged.fire()}},e.prototype._updateInlineStyles=function(){var e=this,t={},n=this.getCharStyle();return t.font={postScriptName:n.fontName,size:n.fontSize,fauxBold:n.fauxBold,fauxItalic:n.fauxItalic,allCaps:n.allCaps},t.color=this._manager.getPaletteColorAt(n.fillColor.index),t.underline=n.underline,t.leading=n.leading,t.tracking=n.tracking,t.superscript=n.superscript,t.subscript=n.subscript,t.openType=Object.keys(this._textWhizz.OpenTypeFeature).filter(function(t){return 1===n.openType.get(e._textWhizz.OpenTypeFeature[t])}).map(function(e){return new vX(e,1)}),t.stroke={color:this._manager.getPaletteColorAt(n.strokeColor.index),size:n.strokeWidth,enabled:this._isStrokeEnabled(n)},!FL.isEqual(this._inlineStyle,t)&&(this._inlineStyle=t,!0)},e.prototype._updateParagraphStyles=function(){var e={},t=this.getParagraphStyles();return e.alignment=this._textWhizzAlignmentToAlignment(t.alignment),e.firstLineIndent=t.firstLineIndent,e.leftIndent=t.leftIndent,e.rightIndent=t.rightIndent,e.spaceAfter=t.spaceAfter,e.spaceBefore=t.spaceBefore,!FL.isEqual(this._paragraphStyle,e)&&(this._paragraphStyle=e,!0)},Object.defineProperty(e.prototype,"inlineStyle",{get:function(){return this.active?this._inlineStyle:null},set:function(e){this.active&&this.updateCharStyle(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paragraphStyle",{get:function(){return this.active?this._paragraphStyle:null},set:function(t){var n=this;this.active&&(this.updateParagraphStyle(function(r){return null!=t.alignment&&(r.alignment=e.alignmentToTextWhizzAlignment(t.alignment,n._textWhizz)),null!=t.firstLineIndent&&(r.firstLineIndent=t.firstLineIndent),null!=t.leftIndent&&(r.leftIndent=t.leftIndent),null!=t.rightIndent&&(r.rightIndent=t.rightIndent),null!=t.spaceAfter&&(r.spaceAfter=t.spaceAfter),null!=t.spaceBefore&&(r.spaceBefore=t.spaceBefore),r}),this._updateParagraphStyles())},enumerable:!0,configurable:!0}),e.prototype._isStrokeEnabled=function(e){var t=e.strokeColor;return e.strokeWidth>0||t.getType()===this._textWhizz.ColorType.rgb&&t.A>0||t.getType()===this._textWhizz.ColorType.indexed&&this._manager.getPaletteColorAt(t.index).alpha>0},e.alignmentToTextWhizzAlignment=function(e,t){switch(e){case HH.Center:return t.TextAlignment.center;case HH.Right:return t.TextAlignment.right;case HH.Justify:return t.TextAlignment.justification;case HH.LastLeft:return t.TextAlignment.justificationLastLeft;case HH.LastCenter:return t.TextAlignment.justificationLastCenter;case HH.LastRight:return t.TextAlignment.justificationLastRight;case HH.Left:default:return t.TextAlignment.left}},e.verticalAlignmentToTextWhizz=function(e,t){switch(e){case zH.Top:return t.VerticalAlignment.top;case zH.Center:return t.VerticalAlignment.center;case zH.Bottom:return t.VerticalAlignment.bottom;default:return t.VerticalAlignment.top}},e.prototype._textWhizzAlignmentToAlignment=function(e){switch(e){case this._textWhizz.TextAlignment.center:return HH.Center;case this._textWhizz.TextAlignment.right:return HH.Right;case this._textWhizz.TextAlignment.justification:return HH.Justify;case this._textWhizz.TextAlignment.justificationLastLeft:return HH.LastLeft;case this._textWhizz.TextAlignment.justificationLastCenter:return HH.LastCenter;case this._textWhizz.TextAlignment.justificationLastRight:return HH.LastRight;case this._textWhizz.TextAlignment.left:default:return HH.Left}},e}(),p$=function(){function e(){}return e.insert=function(e,t,n){if(null==e)throw new Error("input string must not be null");if(t<0)throw new Error("index must be positive number");if(t>e.length)throw new console.error("index must not be greater than string length");return e.substring(0,t)+n+e.substring(t)},e}(),f$=function(){function e(){}return e.prototype.getTextForFrameMeasure=function(e){return""===e||null==e?"X":(this._isEmptyFirstLine(e)&&(e=this._insertIntoFirstLine(e,"X")),this._isEmptyLastLine(e)&&(e=this._insertIntoLastLine(e,"X")),e)},e.prototype._isEmptyFirstLine=function(e){return!!(e=this._normalizeTags(e)).startsWith("<p></p>")||!!e.startsWith("<p><span><br/>")||!!e.startsWith("<p><br/>")},e.prototype._insertIntoFirstLine=function(e,t){return e.startsWith("<p></p>")||e.startsWith("<p><br/>")?p$.insert(e,3,"X"):e.startsWith("<p><span>")?p$.insert(e,9,"X"):e},e.prototype._isEmptyLastLine=function(e){return!!(e=this._normalizeTags(e)).endsWith("<p></p>")||!!e.endsWith("<p><span><br/></span></p>")||!!e.endsWith("<p><br/></p>")},e.prototype._insertIntoLastLine=function(e,t){var n=e.lastIndexOf("<p>");return e.substring(0,n)+"<p><span>X</span></p>"},e.prototype._normalizeTags=function(e){return e.replace("<br />","<br/>").replace("<br>","<br/>").replace("<br >","<br/>")},e}(),m$=function(){function e(e){var t=this;this._canvas=null,this._textEditor=null,this._textRenderer=null,this._exitedEditModeEvent=new PL,this._enteredEditModeEvent=new PL,this._textProcessor=new f$,this._isDisposed=!1,this._failed=!1,this._initialFormattedText=null,this._waitMobileTextEditorInit=!1,this._stateValue="static",this._isStaticTextImageValid=!1,this._staticTextImageChanged=new EL,this._throttleRedrawText=FL.throttle(this._redrawActiveText,100),this._onCanvasZoomChanged=function(){t._isStaticTextImageValid=!1,t.ready&&t._redrawText()},this._onCanvasSelectedItemHandlerChanged=function(){"inEdit"===t._state&&t.exitEditMode(),t._state=t._canvas.isOnlyThisItemHandlerSelected(t._itemHandler)?"active":"static"},this._onCanvasSelectionLocked=function(){t.isStatic||(t._isStaticTextImageValid=!1,t._updateStaticTextImage())},this._onMobileTextEditorInitialized=function(){t._waitMobileTextEditorInit=!1,t._itemHandler==t._canvas.currentItemHandler?t.enterEditMode(0,0):t._canvas.redraw()},this._itemHandler=e,this._canvas=this._itemHandler.canvas,this._textWhizz=this._canvas.textWhizz,this._textEditor=this._canvas.textEditor,this._textRenderer=this._canvas.textRenderer,this._stateValue=this._canvas.isOnlyThisItemHandlerSelected(e)?"active":"static",this.bindToCanvas()}return e.prototype.bindToCanvas=function(){this._canvas.add_zoomChanged(this._onCanvasZoomChanged),this._canvas.add_selectedItemHandlerChanged(this._onCanvasSelectedItemHandlerChanged),this._canvas.add_onSelectionLocked(this._onCanvasSelectionLocked)},e.prototype.unbindFromCanvas=function(){this._canvas.remove_zoomChanged(this._onCanvasZoomChanged),this._canvas.remove_selectedItemHandlerChanged(this._onCanvasSelectedItemHandlerChanged),this._canvas.remove_onSelectionLocked(this._onCanvasSelectionLocked)},Object.defineProperty(e.prototype,"textHandler",{get:function(){return this._textHandler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_state",{get:function(){return this._stateValue},set:function(e){this._stateValue!==e&&(this._stateValue=e,this._onTextStateChanged())},enumerable:!0,configurable:!0}),e.prototype._onTextStateChanged=function(){this.ready&&("static"===this._state&&this._isStaticTextImageValid||this.isMobile&&"inEdit"==this._state?this._textRenderer.clearText():this.isMobile||this.updateText("frame"),this._redrawText())},Object.defineProperty(e.prototype,"isStatic",{get:function(){return"static"===this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return"active"===this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInEdit",{get:function(){return"inEdit"===this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exitedEditModeEvent",{get:function(){return this._exitedEditModeEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enteredEditModeEvent",{get:function(){return this._enteredEditModeEvent},enumerable:!0,configurable:!0}),e.prototype.add_staticTextImageChanged=function(e){this._staticTextImageChanged.add(e)},e.prototype.remove_staticTextImageChanged=function(e){this._staticTextImageChanged.remove(e)},Object.defineProperty(e.prototype,"ready",{get:function(){return null!=this._textWhizz&&this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"failed",{get:function(){return this._failed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTextEditor",{get:function(){return"inEdit"===this._state?this._textEditor:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waitMobileTextEditorInit",{get:function(){return this._waitMobileTextEditorInit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCropped",{get:function(){return null==this._isCropped&&(this._isCropped=this._checkTextCropped()),this._isCropped},enumerable:!0,configurable:!0}),e.prototype.getPaletteColorAt=function(e){return this._itemHandler.item.colorPalette.get(e)},e.prototype.addColorToPaletteReturnIndex=function(e){var t=this._itemHandler.item.colorPalette.indexOf(function(t){return t.equals(e)});if(-1===t){this._itemHandler.item.colorPalette.add(e);var n=new Kj(e.preview);this._textHandler.getColorPalette().add(new this._textWhizz.Color(this._textWhizz.ColorType.rgb,[n.b,n.g,n.r,n.a])),t=this._textHandler.getColorPalette().getSize()-1}return t},e.prototype.addColorToPalette=function(e){var t=this.addColorToPaletteReturnIndex(e);return new this._textWhizz.Color(this._textWhizz.ColorType.indexed,[t])},Object.defineProperty(e.prototype,"_fontRegistry",{get:function(){var e,t;return null===(t=null===(e=this._canvas)||void 0===e?void 0:e.fontRegistry)||void 0===t?void 0:t.textWhizzFontRegistry},enumerable:!0,configurable:!0}),e.prototype.updateText=function(t){if(void 0===t&&(t=null),null!=this._textWhizz&&null!=this._fontRegistry&&(this.isMobile||"text"!==t||this._itemHandler.item.text!==this._getFormattedText())){this._ready=!1;try{null==this._textHandler||null==t||"text"==t?(this._textHandler=new this._textWhizz.TextHandler(this._fontRegistry,72),this._itemHandler.initTextWhizzHandler(this._textHandler,null,!1)):"frame"===t?this._itemHandler.updateTextWhizzFrames(this._textHandler):"wrappingPath"===t&&this._itemHandler.setTextWhizzWrappingPath(this._textHandler)}catch(r){throw this._failed=!0,e.createException(r,this._textWhizz)}this._failed=!1,this._isCropped=null,this._ready=!0;var n=this.measureText();this._isStaticTextImageValid=!1,this._itemHandler.updateRectangle(n),this._redrawText(!0),"inEdit"==this._state&&this.isMobile&&(this.exitEditMode(),this.enterEditMode(0,0))}},e.prototype.transformText=function(e){var t,n=this._itemHandler.item;this._textRenderer.transformText(this._textHandler,e,this._itemHandler.getControlCenter(),n.previewScale,n.opacity,null===(t=n.mask)||void 0===t?void 0:t.vectorMask)},e.prototype.measureText=function(e){var t=this;void 0===e&&(e=!1);var n=this._textHandler.getBounds();if(this._isBounded()){for(var r=function(e){var n=t._textHandler.getFrame(e);if(n instanceof t._textWhizz.ShapeTextFrame)return n.shape},i=r(0),o=1;o<this._textHandler.getFrameCount();o++)i=this._textWhizz.Path.union(i,r(o));if(e){var s=new this._textWhizz.Path;s.rect(n.x,n.y,n.width,n.height),i=this._textWhizz.Path.union(i,s)}n=i.getBounds()}else if(WN(0,n.width)&&WN(0,n.height)&&""===this._getFormattedText()){var a=new this._textWhizz.TextHandler(this._fontRegistry,72);this._itemHandler.initTextWhizzHandler(a,"X",!0),n=a.getBounds()}var l=this._itemHandler.item.previewScale;return new FN(n.x*l,n.y*l,n.width*l,n.height*l)},e.prototype.measureTextFrame=function(t){void 0===t&&(t=!1);var n=null;try{n=new this._textWhizz.TextHandler(this._fontRegistry,72);var r=this._itemHandler.getTextForRendering(),i=t?this._getFormattedText():this._textProcessor.getTextForFrameMeasure(r);this._itemHandler.initTextWhizzHandler(n,i,!0)}catch(s){throw e.createException(s,this._textWhizz)}var o=n.getBounds();return new FN(o.x,o.y,o.width,o.height)},e.prototype.clearText=function(){this._textRenderer.clearText()},e.prototype._isBounded=function(){return this._textHandler.getFrame(0)instanceof this._textWhizz.ShapeTextFrame},e.prototype._redrawText=function(e){"static"===this._state?this._isStaticTextImageValid||this._updateStaticTextImage():"active"!==this._state&&this.isMobile||(this._throttleRedrawText(),e&&this._canvas.redrawDesign())},e.prototype._updateStaticTextImage=function(){var e=this.measureText(!0);this._itemHandler.clearImageContainer();var t=this._textRenderer.getTextImage(this._textHandler,e,this._itemHandler.item.previewScale);this._staticTextImageChanged.fire({url:t,rect:e}),this._isStaticTextImageValid=!0},e.prototype._redrawActiveText=function(){var e;if(!this._isDisposed&&("active"===this._state||"inEdit"===this._state)){var t=this._itemHandler.item,n=!this.isInEdit&&this._itemHandler.isEmptyTextPlaceholder()?.5:1;this._textRenderer.drawText(this._textHandler,t.transform,this._itemHandler.getControlCenter(),t.previewScale,t.opacity*n,"inEdit"!=this._state?null===(e=t.mask)||void 0===e?void 0:e.vectorMask:null)}},e.prototype.drawSelection=function(e){if(null==e?void 0:e.isValid()){var t=this._itemHandler.item;this._textRenderer.drawSelection(this._textHandler,e,t.transform,this._itemHandler.getControlCenter(),t.previewScale)}else this._redrawActiveText()},Object.defineProperty(e.prototype,"isMobile",{get:function(){return this._textEditor instanceof TX},enumerable:!0,configurable:!0}),e.prototype._getFormattedText=function(){return this._textHandler.getTextRange().getFormattedTextForDefaults()},e.prototype.processMouseEvent=function(e,t){var n=e.type,r=new MN(e.x,e.y);if("inEdit"!==this._state&&"dblclick"!==n)return!1;if(!t&&("mousedown"===n||"dblclick"===n)&&"inEdit"===this._state)return this.exitEditMode(),!1;if("dblclick"===n&&"inEdit"!==this._state){if(this.isMobile&&!this._textEditor.ready)return this._textEditor.initialized.remove(this._onMobileTextEditorInitialized),this._textEditor.initialized.add(this._onMobileTextEditorInitialized),this._waitMobileTextEditorInit=!0,this._canvas.redraw(),!1;this.enterEditMode(r.x,r.y)}else this.isMobile||this._textEditor.processMouseEvent(e);return this._canvas.viewer.setCursor(t?sU.text:sU.defaultCursor,!1),!0},e.prototype.processKeyEvent=function(e){return e.keyCode===AW.Escape?(this.exitEditMode(!0),!0):this._textEditor.processKeyEvent(e)},e.prototype.getEditorInitData=function(){var e=this._itemHandler.item;return{text:this._initialFormattedText,rectangle:this._itemHandler.rectangle,textAlignment:e instanceof BV?e.alignment:null,defaultInlineStyle:this._defaultInlineStyle,defaultParagraphStyle:this._defaultParagraphStyle,borderColor:e.borderColor.preview,borderWidth:e.borderWidth,fillColor:e.fillColor.preview,opacity:e.opacity,previewScale:e.previewScale,textFormattingEnabled:r$.getAllowTextFormatting(e,this._canvas.viewer.textFormattingEnabled),transform:e.transform,textVerticalAlignment:e instanceof gz?e.verticalAlignment:null}},Object.defineProperty(e.prototype,"_defaultParagraphStyle",{get:function(){var e=this._itemHandler.item,t={alignment:e.alignment};return(e instanceof gz||e instanceof PV)&&(t.firstLineIndent=e.paragraphSettings.FirstLineIndent,t.spaceAfter=e.paragraphSettings.SpaceAfter,t.spaceBefore=e.paragraphSettings.SpaceBefore,t.leftIndent=e.paragraphSettings.LeftIndent,t.rightIndent=e.paragraphSettings.RightIndent),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_defaultInlineStyle",{get:function(){var e=this._itemHandler.item,t={font:{postScriptName:e.font.postScriptName,size:e.font.size,fauxBold:e.font.fauxBold,fauxItalic:e.font.fauxItalic},underline:e.underline,leading:e.leading,tracking:e.tracking,color:e.color.clone()},n={};return null!=e.stroke?(n.color=e.stroke.color.clone(),n.size=e.stroke.size,n.enabled=n.size>0&&n.color.alpha>0):(n.color=new Kj({r:0,g:0,b:0,a:0}),n.size=0,n.enabled=!1),t.stroke=n,e.font.openTypeFeatures.length>0&&(t.openType=e.font.openTypeFeatures.map(function(e){return new vX(e.tag,e.value)})),t},enumerable:!0,configurable:!0}),e.prototype.enterEditMode=function(e,t){var n=this;if(null!=this._textEditor){var r=this._itemHandler.isEmptyTextPlaceholder();this._textEditor instanceof d$&&!this._itemHandler.item.transform.isEmpty&&this._itemHandler._frontEndUpdate().then(function(){r&&n._textHandler.getTextRange().delete(n._textWhizz.RangeCursorPos.left),n._textEditor._setCursor(new MN(e,t))}),this._initialFormattedText=r?"":this._getFormattedText(),r&&this._textHandler.getTextRange().delete(this._textWhizz.RangeCursorPos.left);var i=this.getEditorInitData();i.point={x:e,y:t},this._textEditor.show(this,i),this._state="inEdit",this._canvas.disableSelection(),this._canvas.redraw(),this._enteredEditModeEvent.notify(this)}},e.prototype.onTextEditorTextChanged=function(e){var t=this._initialFormattedText!==e;return t&&(this._isStaticTextImageValid=!1,this._itemHandler.item.text=e),t},e.prototype.exitEditMode=function(e){if(void 0===e&&(e=!1),null!=this._textEditor){var t=this._textEditor.hide();this.onTextEditorTextChanged(t),this._itemHandler.isEmptyTextPlaceholder()&&(this._textHandler.getCursor().insertText(this._itemHandler.item.originalText),this.updateItemHandler()),this._state=e?"active":"static",this._canvas.enableSelection(),this._canvas.redraw(),this._exitedEditModeEvent.notify(this)}},e.prototype.updateItemHandler=function(e){if(this._isCropped=null,this._itemHandler instanceof j$||this._itemHandler instanceof T$)this._itemHandler.updateRectangle(this.measureText()),this._canvas.redrawDesign();else if(this._itemHandler instanceof S$&&this._itemHandler.item instanceof gz&&this._itemHandler.item.overflowStrategy==jH.ExpandBox){var t=this._itemHandler.rectangle.toRectangleF(),n=this.measureTextFrame(!0);n.height>t.height&&(t.height=n.height),this._itemHandler.updateRectangle(t),this._itemHandler.updateTextWhizzFrames(this._textHandler),this._canvas.redrawDesign(),this._canvas.updateSelection(),this._itemHandler.raiseChanged()}else this._itemHandler.raiseChanged();this._redrawActiveText(),(null==e?void 0:e.isValid())&&this.drawSelection(e)},e.comparePosition=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)},e.compareSelection=function(e,t){return null==e&&null==t||null!=e&&null!=t&&(this.comparePosition(e.getStart(),t.getStart())&&this.comparePosition(e.getEnd(),t.getEnd())||this.comparePosition(e.getStart(),t.getEnd())&&this.comparePosition(e.getEnd(),t.getStart()))},e.prototype._checkTextCropped=function(){if(""===this._getFormattedText())return!1;var t=this._textHandler.getTextRange(),n=this._textHandler.getVisibleTextRange();if(!e.compareSelection(t,n))return!0;var r=this._textHandler.getBounds();return WN(0,r.width)||WN(0,r.height)},e.createException=function(e,t){if("number"!=typeof e)throw e;var n=t.getExceptionMessage(e),r=t.getExceptionName(e);return new IL(r+": "+n)},e.prototype.dispose=function(){this.clearText(),this._isDisposed=!0},e}(),g$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y$=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},_$=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},v$=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},b$=function(e){function t(n,r){void 0===r&&(r=null);var i=e.call(this,null,n,r)||this;i._textManager=null,i._staticTextRect=null,i._exitedEditModeEvent=new PL,i._enteredEditModeEvent=new PL,i._onTextManagerEnteredEditMode=function(e){i._enteredEditModeEvent.notify(i)},i._onTextManagerExitedEditMode=function(e){i._exitedEditModeEvent.notify(i)},i._initFrontEndRenderingDef=null;var o=null!=i.item?i.item.sourceRectangle:null;return(null==o||o.isEmpty())&&(o=new FN(0,0,10,10)),i.originalPath=$N.rectangle(o.left,o.top,o.width,o.height),i.controlPoints=[new MN(o.left,o.top),new MN(o.right,o.bottom)],i._imageContainer=new iW(function(){return y$(i,void 0,void 0,function(){var e;return _$(this,function(n){switch(n.label){case 0:return null==this.canvas?[2]:[4,this.waitUpdate()];case 1:if(n.sent(),this._textManager.isStatic){if(null==this.canvas)return[2];0!=this.canvas.getSelectedItemHandlers().length&&this.canvas.currentItemHandler instanceof t&&(null===(e=this.canvas.currentItemHandler._textManager)||void 0===e?void 0:e.isActive)||this._textManager.clearText(),this.canvas.redraw(!0)}else this._textManager.isInEdit&&this.canvas.isSelectionLocked()&&this.canvas.redraw(!0);return[2]}})})}),i._allowNegativeResize=!1,i}return g$(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInEdit",{get:function(){var e;return null===(e=this._textManager)||void 0===e?void 0:e.isInEdit},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this.item.isEmpty()&&!this._textManager.isInEdit},t.prototype.isEmptyTextPlaceholder=function(){return this.item.isTextPlaceholder&&""===this.item.text},Object.defineProperty(t.prototype,"_fontRegistry",{get:function(){var e;return null===(e=this.canvas)||void 0===e?void 0:e.fontRegistry},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textEditor",{get:function(){var e;return null===(e=this._textManager)||void 0===e?void 0:e.activeTextEditor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editing",{get:function(){return null!=this.textEditor},enumerable:!0,configurable:!0}),t.prototype.onTextWhizzInit=function(){e.prototype.onTextWhizzInit.call(this),this.update()},t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"text":this.update(null,null,"text");break;case"font":case"underline":case"color":case"alignment":case"leading":case"tracking":case"verticalScale":case"horizontalScale":case"previewScale":case"stroke":case"shadow":case"baselineShift":this.update();break;case"checkTextCrop":!this.frontEndRenderingReady&&t.checkTextCrop&&this.update()}"checkTextCrop"!==n&&e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._onItemVisibilityChanged=function(){var t,n,r;e.prototype._onItemVisibilityChanged.call(this),(null===(t=this.canvas)||void 0===t?void 0:t.isItemHandlerSelected(this))&&(this.item.visible?null===(n=this._textManager)||void 0===n||n.updateItemHandler():null===(r=this._textManager)||void 0===r||r.clearText())},t.prototype._setDataItem=function(e,t){throw new OL("NewBaseTextItemHandler._setDataItem")},t.prototype._createDataInstance=function(e){throw new OL("NewBaseTextItemHandler._createDataInstance")},t.prototype._onAddedOnCanvas=function(t){var n;this._textWhizz=t.textWhizz,e.prototype._onAddedOnCanvas.call(this,t),null===(n=this._textManager)||void 0===n||n.bindToCanvas()},t.prototype._onRemovedFromCanvas=function(t){var n;e.prototype._onRemovedFromCanvas.call(this,t),null===(n=this._textManager)||void 0===n||n.unbindFromCanvas()},Object.defineProperty(t.prototype,"textCropped",{get:function(){return this.item.checkTextCrop?!(!this.ready||!this.frontEndRenderingReady)&&this._textManager.isCropped:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){var e;return null===(e=this._textManager)||void 0===e?void 0:e.ready},enumerable:!0,configurable:!0}),t.prototype.updateText=function(e){this._modifyItem(function(t){t.text=e})},t.prototype._getFonts=function(){return function(e){var t=[e.font.postScriptName];if(aj(e.text))try{null!=e.text&&function(e,n,r){var i=(new DOMParser).parseFromString("<body>"+e+"</body>","application/xml"),o={acceptNode:function(e){var t=e.nodeName.toLowerCase();return n.includes(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}};BL.IsIE()&&(o=function(e){return e.acceptNode}(o));for(var s,a=document.createTreeWalker(i.childNodes[0],NodeFilter.SHOW_ELEMENT,o,!1);a.nextNode();)s=void 0,null!=(s=function(e){var t,n,r=e.attributes.getNamedItem("style");if(null==r||null==r.value)return null;var i=r.value.split(";"),o=new Map;try{for(var s=ZN(i),a=s.next();!a.done;a=s.next()){var l=a.value;if(null!=(l=l.trim())&&""!==l){var c=l.split(":"),u=c[0].trim(),h=c[1].trim();o.set(u,h)}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o}(a.currentNode))&&s.has("font-name")&&t.push(s.get("font-name"))}(e.text,["span","ol","ul"])}catch(n){console.error("Unexpected exception while parsing item text"),console.error(n)}return t}(this.item)},t.prototype.update=function(e,t,n){var r=this;this.isVisible()?this._frontEndUpdate(e,function(){"function"==typeof t&&t(),r.canvas.updateSelection(),r.canvas.redrawDesign()},n):"function"==typeof e&&e()},t.prototype.getColorData=function(){var t=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null,r=e.prototype.getColorData.call(this);return t.color.needUpdate(n)&&(r.color=t.color.getData()),null!=t.stroke&&t.stroke.color.needUpdate(n)&&(r.stroke=t.stroke.color.getData()),null!=t.shadow&&t.shadow.color.needUpdate(n)&&(r.shadow=t.shadow.color.getData()),r},t.prototype.setColorData=function(t){e.prototype.setColorData.call(this,t),this._modifyItem(function(e){null!=t.color&&(e.color=oH.createColor(t.color)),null!=t.stroke&&(e.stroke.color=oH.createColor(t.stroke)),null!=t.shadow&&(e.shadow.color=oH.createColor(t.shadow))})},t.prototype.hasColorsToUpdate=function(){var t,n=this.item,r=null===(t=this.canvas)||void 0===t?void 0:t.rgbColorProfileFileId;return e.prototype.hasColorsToUpdate.call(this)||n.color.needUpdate(r)||null!=n.stroke&&n.stroke.color.needUpdate(r)||null!=n.shadow&&n.shadow.color.needUpdate(r)},Object.defineProperty(t.prototype,"_isMobileTextEditorActive",{get:function(){return this.textEditor instanceof TX},enumerable:!0,configurable:!0}),t.prototype.setRectangle=function(e,t){var n,r=KN.fromRectangleF(this.getControlBounds()),i=e.getTransform(r);i.equals(this.item.transform)||(this.item.setTransform(i,t),(null===(n=this._textManager)||void 0===n?void 0:n.isActive)&&this._transformText(i))},t.prototype._transformText=function(e){this._textManager.transformText(e)},t.prototype._getBoundsMargin=function(){return 2*this._getActualBorderWidth()},t.prototype.renderFill=function(e,t){var n=this.item;AU.fillRectangle(e,this.rectangle,n.fillColor.preview,n.opacity*t)},t.prototype.renderStroke=function(e,t){var n=this.item,r=this.rectangle,i=this._getActualBorderWidth();i>0&&(r.width+=i,r.height+=i,AU.drawRectangle(e,r,i,n.borderColor.preview,n.opacity*t))},t.prototype.drawItemHandler=function(e){var t,n;if(null!=e&&null!=this.canvas&&null!=this._textWhizz){var r=this.ready&&!(null===(t=this._textManager)||void 0===t?void 0:t.isStatic)&&this.canvas.isSelectionLocked();if(!this._isMobileTextEditorActive||r){this._hasVectorMask()&&!r&&(e.save(),this._clip(e));var i=this.isEmptyTextPlaceholder()?.5:1;if(this.renderFill(e,i),!this.ready||(null===(n=this._textManager)||void 0===n?void 0:n.isStatic)||r)try{oW.renderTextImage(this,this._imageContainer,null,e,i)}catch(o){console.error(o)}this.renderStroke(e,i),this._hasVectorMask()&&!r&&e.restore()}}},t.prototype.drawHighlight=function(t){this._isMobileTextEditorActive||e.prototype.drawHighlight.call(this,t)},t.prototype.clearImageContainer=function(){this._imageContainer.clear()},t.prototype.showEditToolbarButton=function(){return null==this.canvas.textEditor||this.item.placeholders.length>0},t.prototype._getEndTransformTrigger=function(e){return"frame"},t.prototype._endTransform=function(t,n){e.prototype._endTransform.call(this,t,n),t&&n&&this.frontEndRenderingReady&&this.update(null,null,this._getEndTransformTrigger(n))},Object.defineProperty(t.prototype,"frontEndRenderingReady",{get:function(){var e=null!=this._textWhizz,t=null!=this._textManager&&!this._textManager.failed,n=null!=this._fontRegistry&&this._fontRegistry.ready&&this._fontRegistry.containsFonts(this._getFonts()),r=!this.hasColorsToUpdate();return e&&t&&n&&r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inPlaceEditingEnabled",{get:function(){return this.frontEndRenderingReady&&0==this.item.placeholders.length},enumerable:!0,configurable:!0}),t.prototype.processInPlaceEditingMouseEvent=function(e,t){return this._textManager.processMouseEvent(e,t)},t.prototype.processInPlaceEditingKeyEvent=function(e){return"keydown"!==e.type||this._textManager.processKeyEvent(e)},t.prototype.enterEditMode=function(){this._textManager.enterEditMode(0,0)},t.prototype.exitEditMode=function(e){void 0===e&&(e=!1),this._textManager.exitEditMode(e)},t.prototype._initFrontEndRendering=function(){var e=this;this._textManager=new m$(this),this._textManager.add_staticTextImageChanged(function(t){null==t.url?(e._imageContainer.clear(),e.canvas.redraw()):(e._staticTextRect=t.rect,e._imageContainer.updateUrl(t.url))}),this._textManager.exitedEditModeEvent.add(this._onTextManagerExitedEditMode),this._textManager.enteredEditModeEvent.add(this._onTextManagerEnteredEditMode)},Object.defineProperty(t.prototype,"exitedEditModeEvent",{get:function(){return this._exitedEditModeEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enteredEditModeEvent",{get:function(){return this._enteredEditModeEvent},enumerable:!0,configurable:!0}),t.prototype.getTextForRendering=function(){return this.isEmptyTextPlaceholder()?this.item.originalText:this.item.text},t.prototype.initTextWhizzHandler=function(e,t,n){var r,i,o,s;if(void 0===t&&(t=null),null!=this.canvas){this._textWhizz=this.canvas.textWhizz;var a=this.item;try{for(var l=v$(a.colorPalette),c=l.next();!c.done;c=l.next()){var u=oH.createColor(c.value.preview);e.getColorPalette().add(new this._textWhizz.Color(this._textWhizz.ColorType.rgb,[u.b,u.g,u.r,u.a]))}}catch(y){r={error:y}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}var h=e.getDefaultCharStyle();h.fontName=a.font.postScriptName,h.fontSize=a.font.size,h.fauxBold=a.font.fauxBold,h.fauxItalic=a.font.fauxItalic,h.allCaps=a.font.allCaps,h.underline=a.underline,h.leading=a.leading,h.tracking=a.tracking,h.baselineShift=a.baselineShift;try{for(var d=v$(a.font.openTypeFeatures),p=d.next();!p.done;p=d.next()){var f=p.value,m=this._textWhizz.OpenTypeFeature[f.tag];null!=m&&h.openType.set(m,f.value)}}catch(_){o={error:_}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}h.fillColor=this._textManager.addColorToPalette(a.color),null!=a.stroke?(h.strokeColor=this._textManager.addColorToPalette(a.stroke.color),h.strokeWidth=a.stroke.size):(h.strokeColor=this._textManager.addColorToPalette(new Kj({r:0,g:0,b:0,a:0})),h.strokeWidth=0),e.setDefaultCharStyle(h);var g=e.getDefaultParagraphStyle();g.alignment=d$.alignmentToTextWhizzAlignment(a.alignment,this._textWhizz),(a instanceof gz||a instanceof PV)&&(g.firstLineIndent=a.paragraphSettings.FirstLineIndent,g.spaceAfter=a.paragraphSettings.SpaceAfter,g.spaceBefore=a.paragraphSettings.SpaceBefore,g.leftIndent=a.paragraphSettings.LeftIndent,g.rightIndent=a.paragraphSettings.RightIndent),e.setDefaultParagraphStyle(g),this._addTextWhizzFrames(e,n),this.setTextWhizzWrappingPath(e),e.getCursor().insertText(null!=t?t:this.getTextForRendering())}},t.prototype._beforeFrontEndUpdate=function(){var e=this;if(!this.item.transform.isEmpty){var t=this.getControlCenter(),n=this.item.transform.clone();n.setAngle(0),this._modifyItem(function(r){var i;e._applyTransform(r,n,t),null!=(null===(i=r.mask)||void 0===i?void 0:i.vectorMask)&&(r.mask.vectorMask=e._getTransformedClippingPath(n)),r.transform.clear({keepAngle:!0,supressOnChanged:!0})})}},t.prototype._getPreviewScaleLimits=function(){var e=null,t=null;return null==this.canvas.maxFontSize||isNaN(this.canvas.maxFontSize)||(e=this.canvas.maxFontSize/this.item.font.size),null==this.canvas.minFontSize||isNaN(this.canvas.minFontSize)||(t=this.canvas.minFontSize/this.item.font.size),{min:t,max:e}},t.prototype.updateRectangle=function(e){this._modifyItem(function(t){t.sourceRectangle=e,t.sourcePath=$N.rectangle(e.left,e.top,e.width,e.height)}),this.controlPoints=[new MN(e.left,e.top),new MN(e.right,e.bottom)],this.item.getItemChangedEvent().fire()},t.prototype.waitInitFrontEndRendering=function(){return y$(this,void 0,void 0,function(){return _$(this,function(e){switch(e.label){case 0:return null==this.canvas?[2,null]:null!=this._fontRegistry&&null!=this._textManager?[2]:null!=this._initFrontEndRenderingDef?[2,this._initFrontEndRenderingDef.promise]:(this._initFrontEndRenderingDef=new DU,[4,this.canvas.waitFontRegistryInitialized()]);case 1:return e.sent(),null!=this.canvas&&null==this._textManager&&this._initFrontEndRendering(),this._initFrontEndRenderingDef.resolve(),this._initFrontEndRenderingDef=null,[2]}})})},t.prototype._frontEndUpdate=function(e,t,n){return y$(this,void 0,void 0,function(){var r,i=this;return _$(this,function(o){switch(o.label){case 0:return this._isDisposed||null==this._fontRegistry&&null==this.canvas?[2]:(null==this._handlerUpdated&&(this._handlerUpdated=new DU),[4,this.waitInitFrontEndRendering()]);case 1:return o.sent(),(r=rU.makeCancelable(new Promise(function(r,o){if(!i._isDisposed&&null!=i.canvas){var s=function(){"function"==typeof e&&e(),i._beforeFrontEndUpdate();try{i._textManager.updateText(n)}catch(s){return void o(s)}"function"==typeof t&&t(),null!=i._handlerUpdated&&(i._handlerUpdated.resolve(),i._handlerUpdated=null),r()};if(i.frontEndRenderingReady)s();else{var a=new Array;a.push(i._fontRegistry.loadFonts(i._getFonts())),a.push(i.updateColors()),Promise.all(a).then(s).catch(function(e){o(e)})}}}))).promise.catch(function(e){}),this._updateActiveWebServiceCall(r),[2]}})})},t.prototype._pathToTextWhizzPath=function(e){return e.toTextWhizzPath(this._textWhizz)},t.prototype.waitUpdate=function(){return y$(this,void 0,void 0,function(){var t;return _$(this,function(n){switch(n.label){case 0:return this._isDisposed?[2]:(t=[],this.frontEndRenderingReady||(t.push(this.waitInitFrontEndRendering()),this.update()),t.push(e.prototype.waitUpdate.call(this)),[4,Promise.all(t)]);case 1:return n.sent(),[2]}})})},t.prototype.quickUpdate=function(){this.isVisible()&&this.canvas&&!this.frontEndRenderingReady&&this.update()},t.prototype.dispose=function(){var t,n,r;null===(t=this._textManager)||void 0===t||t.exitedEditModeEvent.remove(this._onTextManagerExitedEditMode),null===(n=this._textManager)||void 0===n||n.enteredEditModeEvent.remove(this._onTextManagerEnteredEditMode),null===(r=this._textManager)||void 0===r||r.dispose(),this._imageContainer.dispose(),e.prototype.dispose.call(this)},t.typeName="NewBaseTextItemHandler",t}(JU),w$=function(){function e(e,t){this._snapLinesHandler=t,this._parentSelectionRectangle=null,this._selectedItemHandlersChangedEvent=new PL,this._skipUpdate=!1,this._locked=!1,this._allowMoveHorizontal=!0,this._allowMoveVertical=!0,this._canvas=e,this._enabled=!0,this._multipleSelectionEnabled=!1,this._currentItemHandler=null,this._itemHandlers=new Ij,this._rectangle=null,this._rectangleWithFrames=null,this._border=null,this._rubberband=null,this._region=null,this._needRedraw=!1,this._shiftState=!1,this._resizeLastPoint=null}return Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(e){null!=e&&e.equals(this._offset)||null==e&&null!=this.offset||(this._offset=e)},enumerable:!0,configurable:!0}),e.prototype.enable=function(){this.update(),this._enabled=!0},e.prototype.disable=function(){this._enabled=!1,this._canvas.hideSelection()},e.setIsSafetyLineItemHandlerFunc=function(e){this._isSafetyLineItemHandlersFunc=e},e.isSafetyLineItemHandler=function(t){if(e._isSafetyLineItemHandlersFunc)return e._isSafetyLineItemHandlersFunc(t)},Object.defineProperty(e.prototype,"history",{get:function(){return this._history},set:function(e){this._history=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multipleSelectionEnabled",{get:function(){return this._multipleSelectionEnabled&&!BL.IsTouchDevice()&&!this.getSelectedItemHandlers().any(function(e){return e.item.parentGroupItem instanceof _V})},set:function(e){this._multipleSelectionEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentItemHandler",{get:function(){return null!=this._currentItemHandler&&null==this._currentItemHandler.canvas&&this.clearSelectedItemHandlers(),this._currentItemHandler},set:function(e){e!==this._currentItemHandler&&(this._currentItemHandler=e,this._canvas.onCurrentItemHandlerChanged(e))},enumerable:!0,configurable:!0}),e.prototype.lock=function(e){void 0===e&&(e=!1),this._locked=!0,e||this._itemHandlers.clear(),this._canvas.onSelectionLocked(),this._canvas.hideSelection(),this._canvas.redraw()},e.prototype.unlock=function(){this._locked=!1,this._canvas.redraw()},Object.defineProperty(e.prototype,"isLocked",{get:function(){return this._locked},enumerable:!0,configurable:!0}),e.prototype.getSelectedItemHandlers=function(){return this._itemHandlers},e.prototype.setSelectedItemHandlers=function(e,t){if(void 0===t&&(t=!1),"[object Array]"===Object.prototype.toString.call(e)&&!this._locked&&!oj(e,this._itemHandlers.toArray())){t||this.clearSelectedItemHandlers();for(var n=0;n<this._itemHandlers.length;n++){var r=this._itemHandlers.get(n);this._canvas.isPlaceholder(r)&&(r.editing=!1)}for(this.multipleSelectionEnabled||e.splice(1,e.length-1),n=0;n<e.length;n++)this._itemHandlers.push(e[n]);this._onSelectedItemHandlersChanged();var i=this._itemHandlers.length>=1?this._itemHandlers.get(this._itemHandlers.length-1):null;this.currentItemHandler=i}},e.prototype.isItemHandlerSelected=function(e){return this._itemHandlers.contains(e)},e.prototype.isOnlyThisItemHandlerSelected=function(e){return this.isItemHandlerSelected(e)&&1===this._itemHandlers.length},Object.defineProperty(e.prototype,"needRedraw",{get:function(){return this._needRedraw},enumerable:!0,configurable:!0}),e.prototype.addSelectedItemHandler=function(e){!this.multipleSelectionEnabled&&this._itemHandlers.length>0&&this._itemHandlers.clear(),this.setSelectedItemHandlers([e],!0)},e.prototype.removeSelectedItemHandler=function(e){this._itemHandlers.remove(e),this._onSelectedItemHandlersChanged(),e instanceof YW&&(e.editing=!1),this.currentItemHandler=this._itemHandlers.length>0?this._itemHandlers.getItem(this._itemHandlers.length-1):null},e.prototype.clearSelectedItemHandlers=function(){for(var e=0;e<this._itemHandlers.length;e++){var t=this._itemHandlers.getItem(e);t instanceof YW&&(t.editing=!1)}this._itemHandlers.clear(),this._updateParentSelectionRectangle(),this._onSelectedItemHandlersChanged(),this.currentItemHandler=null,this._canvas.hideSelection()},Object.defineProperty(e.prototype,"visibleRectangle",{get:function(){return this._getVisibleSelectionRectangle(this._rectangle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleParentSelectionRectangle",{get:function(){return this._parentSelectionRectangle},enumerable:!0,configurable:!0}),e.prototype._getVisibleSelectionRectangle=function(e){if(null==e)return null;var t=e.clone();if(t.width=Math.abs(t.width),t.height=Math.abs(t.height),null!=this._border){var n=t.toRectangleF(),r=t.angle;(t=KN.FromLTRB(n.left-this._border.left,n.top-this._border.top,n.right+this._border.right,n.bottom+this._border.bottom)).angle=r}return t},e.prototype.hitTest=function(e,t){var n;if(!this._enabled)return{};var r,i,o=this.visibleRectangle;if(null==o)return{selection:0===this._canvas.getItemHandlersByHitTest(e).length};r=this._itemHandlers.length>1?this._itemHandlers.toArray().reduce(function(e,t){return Math.min(e,t.getSelectionTolerance())},this._itemHandlers.getItem(0).getSelectionTolerance()):null!==(n=null==(i=this._itemHandlers.getItem(0))?void 0:i.getSelectionTolerance())&&void 0!==n?n:0;var s=1===this._itemHandlers.length&&this._currentItemHandler instanceof sX,a=this._canvas.hitTestSelection(o,e,s,r),l=!1;if(null!=i&&i instanceof YW){if(i.isContentUpdating()&&a.body&&!a.resize)return a.drag=!0,a;l=i.editing&&i.isCoverMode()}var c=this._permissions;if(a.rotate=a.rotate&&c.allowRotate&&!l&&this._allowManipulation,a.resize){var u=a.resizeIndex,h=C$.isEdgeResizeGrip(u)&&this._getEdgeResize(c,i),d=C$.isCornerResizeGrip(u)&&this._getCornerResize(c,i,!1,jj.arbitrary),p=C$.isCornerResizeGrip(u)&&this._getCornerResize(c,i,!0,jj.arbitrary),f=C$.isCornerResizeGrip(u)&&this._getCornerResize(c,i,!1,jj.proportional),m=C$.isCornerResizeGrip(u)&&this._getCornerResize(c,i,!0,jj.proportional);a.arbitraryResize=h||d,a.cornerArbitraryResize=d||p,a.cornerProportionalResize=f||m,a.proportionalResize=f&&!s,a.resize=a.arbitraryResize||a.proportionalResize}return a.dragX=a.body&&c.allowMoveHorizontal&&this._allowManipulation,a.dragY=a.body&&c.allowMoveVertical&&this._allowManipulation,a.drag=a.dragX||a.dragY,a},e.prototype._getEdgeResize=function(e,t){return!(null!=t&&"PlainTextItemHandler"===t.getTypeName()||!this._allowManipulation)&&e.resizeGrips.edge},e.prototype._getCornerResize=function(e,t,n,r){if(r===jj.arbitrary&&null!=t&&"PlainTextItemHandler"===t.getTypeName()||!this._allowManipulation)return!1;var i=e.resizeGrips;return null!=i.corner&&0!==i.corner.length&&(n&&i.corner.length>1?i.corner[1]:i.corner[0])===r},e.prototype.getCursor=function(e){var t=this.hitTest(e,!1),n=sU,r=this._permissions;if(t.resize){var i=BN(this._rectangle.angle-this._canvas.viewer.contentAngle),o=([315,45,135,225,270,0,90,180][t.resizeIndex-1]+i)%360;if(o>337.5||o<=22.5)return n.sizeNS;if(o>22.5&&o<=67.5)return n.sizeNESW;if(o>67.5&&o<=112.5)return n.sizeEW;if(o>112.5&&o<=157.5)return n.sizeNWSE;if(o>157.5&&o<=202.5)return n.sizeNS;if(o>202.5&&o<=247.5)return n.sizeNESW;if(o>247.5&&o<=292.5)return n.sizeEW;if(o>292.5&&o<=337.5)return n.sizeNWSE}else{if(t.rotate)return n.pointer;if(t.body&&(r.allowMoveHorizontal||r.allowMoveVertical&&this._allowManipulation))return n.move}return n.defaultCursor},e.prototype.update=function(){if(!this._skipUpdate)if(this._itemHandlers.length>0){var e=this._itemHandlers.getItem(0),t=e.getBorderMargin();if(1===this._itemHandlers.length)this._rectangle=e.getSelectionRectangle(),this._border={left:t,top:t,right:t,bottom:t};else{for(var n=e.getSelectionRectangle().bounds,r=n.left,i=n.top,o=n.right,s=n.bottom,a={left:t,top:t,right:t,bottom:t},l=1;l<this._itemHandlers.length;l++)t=(e=this._itemHandlers.getItem(l)).getBorderMargin(),(n=e.getSelectionRectangle().bounds).left-t<r-a.left&&(r=n.left,a.left=t),n.top-t<i-a.top&&(i=n.top,a.top=t),n.right+t>o+a.right&&(o=n.right,a.right=t),n.bottom+t>s+a.bottom&&(s=n.bottom,a.bottom=t);this._rectangle=KN.FromLTRB(r,i,o,s),this._border=a}this._updateParentSelectionRectangle(),this._rectangleWithFrames=this._getRectWithFrames(this._rectangle),this._region=this._getRegion()}else this._rectangle=null,this._border=null,this._region=null},e.prototype._updateParentSelectionRectangle=function(){var e=null;if(null!=this._itemHandlers&&this._itemHandlers.any()&&(e=this._itemHandlers.getItem(0).item.parentGroupItem),null!=e){var t=this._canvas.handlerFactory.get(e);if(t.isEmpty())this._parentSelectionRectangle=null;else{var n=t.getSelectionRectangle();this._parentSelectionRectangle=n}}else this._parentSelectionRectangle=null},e.prototype._isItemHandlerVisible=function(e){return e.isVisible()},e.prototype.draw=function(e,t){if(this._enabled&&!this._locked){null!=this._rubberband?t.drawRubberband(e,this._rubberband):this._needRedraw=!1;var n=this.visibleRectangle;if(null==n||0===this._itemHandlers.where(function(e){return e.isVisible()}).count())return this._canvas.hideSelection(),void this._canvas.showParentSelection(this.visibleParentSelectionRectangle);var r=!1,i=!1,o=!1,s=null;if(1===this._itemHandlers.length)r=(s=this._itemHandlers.getItem(0))instanceof sX,o=s instanceof YW&&s.editing;else for(var a=0;a<this._itemHandlers.length;a++){var l=this._itemHandlers.getItem(a);l instanceof sX&&(i=!0),l instanceof YW&&l.editing&&(o=!0)}var c=o&&this._itemHandlers.getItem(0).item.isCoverMode,u=this._permissions,h={rotate:u.allowRotate&&!c&&this._allowManipulation,resize:(this._getCornerResize(u,s,!1,jj.arbitrary)||this._getCornerResize(u,s,!1,jj.proportional))&&!r,arbitraryWidthResize:this._getEdgeResize(u,s)&&!i&&!c,arbitraryHeightResize:this._getEdgeResize(u,s)&&!r&&!i&&!c};this._canvas.showSelection(n,h),this._canvas.showParentSelection(this.visibleParentSelectionRectangle),null!==this._canvas.hoverDiv&&(null!==s?this._canvas.updateHoverPosition(s.rectangle,s.item.name):this._canvas.hideHover()),o||this._snapLinesHandler.drawActiveLines(e,t,this._allowMoveHorizontal,this._allowMoveVertical)}},e.prototype.processKeyEvent=function(e){if(null!=this._rectangle){var t=this._permissions;if(((e.keyCode===AW.Left||e.keyCode===AW.Right)&&t.allowMoveHorizontal||(e.keyCode===AW.Up||e.keyCode===AW.Down)&&t.allowMoveVertical)&&this._allowManipulation)if("keydown"===e.type&&void 0===this._operation){var n=!0===e.shiftKey?5:1;this._keyPushed||this._startTransform(),this._keyPushed=!0,this._keyCode=e.keyCode,this._move(e.keyCode,n)}else"keyup"===e.type&&this._keyPushed&&this._keyCode===e.keyCode&&(this._keyPushed=!1,this._endTransform());if(16===e.keyCode&&this._allowManipulation){var r=e.shiftKey;r!==this._shiftState&&(this._shiftState=r,this._operation&&this._operation.resize&&this._resize(null))}}},e.prototype.startTransform=function(e){this._startPoint=e,this._startTransform(),this._startRubberbandSelection(),this._fillSnapData()},e.prototype.processMouseEvent=function(e,t){void 0===t&&(t=!1);var n=new MN(e.x,e.y);if("mousedown"===e.type)this._operation=this.hitTest(n,e.originalEvent.shiftKey),this.startTransform(n);else if("mouseup"===e.type){var r=this._operation&&this._operation.resize;delete this._operation,this._endTransform(r,t),this._endRubberbandSelection(),this._snapLinesHandler.clearSnapData(),delete this._startPoint}else if("mousemove"===e.type&&null!=this._operation&&null!=this._startPoint){if(this._operation.selection)this._updateRubberband(n);else if(this._operation.resize)this._resize(n);else if(this._operation.rotate)this._rotate(n,!(e.originalEvent.ctrlKey||e.originalEvent.metaKey),e.originalEvent.shiftKey);else if(this._operation.drag){var i=this._permissions;this._drag(new MN(i.allowMoveHorizontal&&this._allowManipulation?n.x:this._startPoint.x,i.allowMoveVertical&&this._allowManipulation?n.y:this._startPoint.y),e.originalEvent.ctrlKey||e.originalEvent.metaKey)}this._itemHandlers.length>0&&this._updateParentSelectionRectangle()}},e.prototype.processPinch=function(e){var t=this._currentItemHandler,n=t;if(t.editing){var r=t.rectangle,i=new KN(t.rectangle.bounds.center.x,t.rectangle.bounds.center.y,r.width*e.gesture.scale,r.height*e.gesture.scale);null==n.startRectangle&&n.startTransform(),n._transformRectangle(r,i,!0)}},e.prototype._fillSnapData=function(){this._snapLinesHandler.fillSnapData(this._startRectangle,this._startRectangleWithFrames,null!=this._startRectangle&&null!=this._border?this._getRectangleWithBorder(this._startRectangle).bounds:null,this._region,this._canvas,this._operation)},e.prototype._constrainRectangleToSnapLines=function(e,t){return this._snapLinesHandler.constrainRectangleToSnapLines(e,this._getRectangleWithBorder(this._rectangle),t,this._operation,this._getRectWithFrames(e),this._getRectangleWithBorder(e),this._canvas)},e.prototype.isResizing=function(){return this._operation&&this._operation.resize},e.prototype.isRotating=function(){return this._operation&&this._operation.rotate},e.prototype.isOperationNotNull=function(){return null!=this._operation},Object.defineProperty(e.prototype,"angle",{set:function(e){this._startTransform();var t=this._rectangle.clone();t.angle=e,this._updateRectangle(t),this._endTransform(),this._canvas.redraw()},enumerable:!0,configurable:!0}),e.prototype._startTransform=function(){if(null!=this._rectangle){this._startRectangle=this._rectangle.clone(),this._startRectangleWithFrames=this._getRectWithFrames(this._startRectangle);for(var e=0;e<this._itemHandlers.length;e++)this._itemHandlers.getItem(e).startTransform(this._operation)}},e.prototype._endTransform=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),null!=this._rectangle){this._skipUpdate=!0;var n=!t&&null!=this._startRectangle&&!this._rectangle.equals(this._startRectangle);this.history&&this.history.pause();for(var r=0;r<this._itemHandlers.length;r++){var i=this._itemHandlers.getItem(r),o=e;n&&e&&(o=i._onResized()),i.endTransform(n,o)}n&&this._canvas.updateTexts(),this.history&&this.history.resume(),delete this._startRectangle,delete this._startRectangleWithFrames,this._skipUpdate=!1,e&&this.update()}},e.prototype._startRubberbandSelection=function(){null!=this._canvas.viewer&&this._canvas.viewer.ignoreDocumentClickOnce()},e.prototype._endRubberbandSelection=function(){if(null!=this._rubberband){var e=FN.FromLTRB(this._rubberband.left,this._rubberband.top,this._rubberband.right,this._rubberband.bottom);if(!WN(e.width,0)&&!WN(e.height,0)){for(var t=[],n=this._canvas.getAllItemHandlers({onlyVisible:!0}),r=0;r<n.length;r++){var i=n[r];!this._canvas.isLockedOrDisabled(i)&&e.contains(i.rectangle.center)&&t.push(i)}this.setSelectedItemHandlers(t)}this._rubberband=null}},e.prototype._updateRubberband=function(e){this.multipleSelectionEnabled&&null!=this._startPoint&&(this._rubberband={left:Math.min(this._startPoint.x,e.x),top:Math.min(this._startPoint.y,e.y),right:Math.max(this._startPoint.x,e.x),bottom:Math.max(this._startPoint.y,e.y)},this._needRedraw=!0)},e.prototype.pinchResize=function(e,t,n){n._transformRectangle(e,t,!0)},e.prototype._resize=function(t){null==t&&(t=this._resizeLastPoint),this._resizeLastPoint=t;var n=this._operation.arbitraryResize;this._shiftState&&(n&&this._operation.cornerProportionalResize?n=!1:!n&&this._operation.cornerArbitraryResize&&(n=!0));var r,i=this._rectangle.clone(),o=new MN(t.x-this._startRectangle.centerX,t.y-this._startRectangle.centerY);o.rotate(-i.angle);var s=new MN(this._startPoint.x-this._startRectangle.centerX,this._startPoint.y-this._startRectangle.centerY);s.rotate(-i.angle);var a=o.translate(-s.x,-s.y),l=1,c=1;if(n)i.width=this._startRectangle.width+a.x*e.cw[this._operation.resizeIndex],i.height=this._startRectangle.height+a.y*e.ch[this._operation.resizeIndex],6!==this._operation.resizeIndex&&5!==this._operation.resizeIndex||(l=-1,c=-1),1===this._operation.resizeIndex&&(l=-1,c=-1),2===this._operation.resizeIndex&&(l=1,c=-1),4===this._operation.resizeIndex&&(l=-1,c=1);else{var u=a.x*e.cw[this._operation.resizeIndex]/this._startRectangle.width,h=a.y*e.ch[this._operation.resizeIndex]/this._startRectangle.height,d=u<h?u:h;a.x=this._startRectangle.width*d,a.y=this._startRectangle.height*d,i.width=this._startRectangle.width+a.x,i.height=this._startRectangle.height+a.y}if(this._allowNegativeResize||i.width>=0&&i.height>=0){if((r=new MN(a.x/2*e.cw[this._operation.resizeIndex],a.y/2*e.ch[this._operation.resizeIndex])).rotate(i.angle),i.centerX=this._startRectangle.centerX+r.x*l,i.centerY=this._startRectangle.centerY+r.y*c,n){var p=r=new MN(this._startRectangle.centerX,this._startRectangle.centerY);p.rotate(-i.angle),p.x=p.x+a.x/2*e.cw[this._operation.resizeIndex]*e.cw[this._operation.resizeIndex],p.y=p.y+a.y/2*e.ch[this._operation.resizeIndex]*e.ch[this._operation.resizeIndex],p.rotate(i.angle),i.centerX=p.x,i.centerY=p.y}}else{var f=new MN(-e.cw[this._operation.resizeIndex]*this._rectangle.width/2,-e.ch[this._operation.resizeIndex]*this._rectangle.height/2);if(f.rotate(this._rectangle.angle),f.translate(this._rectangle.centerX,this._rectangle.centerY),i.center=f,n)i.width=Math.max(i.width,1),i.height=Math.max(i.height,1);else{var m=this._startRectangle.width/this._startRectangle.height;m>=1?(i.width=Math.max(i.width,1*m),i.height=Math.max(i.height,1)):(i.width=Math.max(i.width,1),i.height=Math.max(i.height,1/m))}var g=new MN(e.cw[this._operation.resizeIndex]*i.width/2,e.ch[this._operation.resizeIndex]*i.height/2);g.rotate(i.angle),i.centerX+=g.x,i.centerY+=g.y}var y=this._canvas.contentEditingPlaceholderItemHandler;null!=y&&y.item.isCoverMode&&(i=this._constrainRectangleToPlaceholderCover(i,y.rectangle)),null==this._canvas.contentEditingPlaceholderItemHandler&&(i=this._constrainRectangleToSnapLines(i,n)),this._updateRectangle(i,!1,this._operation.resizeIndex)},e.prototype._drag=function(e,t){var n=this._canvas.contentEditingPlaceholderItemHandler,r=new MN(e.x-this._startPoint.x,e.y-this._startPoint.y);t?this._snapLinesHandler.resetActiveLines():null==this._canvas.contentEditingPlaceholderItemHandler&&(r=this._snapLinesHandler.constrainDiffToSnapLines(e,this._startPoint,this._canvas,this._allowMoveHorizontal,this._allowMoveVertical)),null==n?r=this._constrainDiffToRegion(this._startRectangleWithFrames.bounds,r):n.item.isCoverMode&&(r=this._constrainDiffToPlaceholderCover(this._startRectangle,n.rectangle,r));var i=this._rectangle.clone();i.centerX=this._startRectangle.centerX+r.x,i.centerY=this._startRectangle.centerY+r.y,this._updateRectangle(i,!0)},e.prototype._rotate=function(e,t,n){var r=e.clone(),i=this._startPoint,o=this._rectangle.clone(),s=new MN(o.centerX,o.centerY),a=LN(r,i,s),l=n?15:90,c=t?n?7.5:5:0,u=a=BN(this._startRectangle.angle+a),h=a%l;h<c?u=l*Math.floor(a/l):h>l-c&&(u=l*Math.floor(a/l+1)),o.angle=BN(u),this._updateRectangle(o)},e.prototype._move=function(e,t){var n=t/this._canvas.mul,r=null;switch(e){case AW.Up:r=new MN(0,-n);break;case AW.Down:r=new MN(0,n);break;case AW.Left:r=new MN(-n,0);break;case AW.Right:r=new MN(n,0)}if(null!=r){var i=this._canvas.viewer.contentAngle;i>0&&r.rotate(-i);var o=this._canvas.contentEditingPlaceholderItemHandler;null==o?r=this._constrainDiffToRegion(this._rectangle.bounds,r):o.item.isCoverMode&&(r=this._constrainDiffToPlaceholderCover(this._rectangle,o.rectangle,r));var s=this._rectangle.clone();s.centerX+=r.x,s.centerY+=r.y,this._updateRectangle(s),this._updateParentSelectionRectangle()}},Object.defineProperty(e.prototype,"_permissions",{get:function(){if(null==this._rectangle||0===this._itemHandlers.length)return new OU({},!1);var e=this._itemHandlers.getItem(0).getPermissions().clone();this._itemHandlers.length>1&&(this._rectangle.angle-this._itemHandlers.getItem(0).angle)%90!=0&&(e.resizeGrips.edge=!1,e.resizeGrips.setCornerArbitrary(!1));for(var t=1;t<this._itemHandlers.length;t++){var n=this._itemHandlers.getItem(t),r=n.getPermissions();r.allowMoveHorizontal||(e.allowMoveHorizontal=!1),r.allowMoveVertical||(e.allowMoveVertical=!1),r.allowRotate||(e.allowRotate=!1),r.resizeGrips.edge||(e.resizeGrips.edge=!1),r.resizeGrips.getCornerProportional()||e.resizeGrips.setCornerProportional(!1),r.resizeGrips.getCornerArbitrary()||e.resizeGrips.setCornerArbitrary(!1),(this._rectangle.angle-n.angle)%90!=0&&(e.resizeGrips.edge=!1,e.resizeGrips.setCornerArbitrary(!1))}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_allowNegativeResize",{get:function(){if(null==this._rectangle||0===this._itemHandlers.length)return!1;for(var e=0;e<this._itemHandlers.length;e++)if(!this._itemHandlers.getItem(e).allowNegativeResize)return!1;return!0},enumerable:!0,configurable:!0}),e.prototype._getRegion=function(){var e=null;if(this._canvas.constrainedMarginEnabled&&this._canvas.margin>0){var t=this._canvas.margin;e=new FN(t,t,this._canvas.workspaceWidth-t,this._canvas.workspaceHeight-t)}for(var n=new Ij,r=0;r<this._itemHandlers.length;r++){var i=this._itemHandlers.getItem(r).layer;null==i||null==i.region||n.contains(i)||n.add(i)}for(var o=0;o<n.length;o++){var s=n.getItem(o).region;e=null!=e?FN.intersect(e,s):s}return e},e.prototype._updateRectangle=function(e,t,n){if(void 0===t&&(t=!1),t||!this._canvas.suppressOutOfRegionManipulation||null==this._region||null!=this._canvas.contentEditingPlaceholderItemHandler||this._region.containsRectangle(this._getRectWithFrames(e).bounds)){this._rectangle=e,this._rectangleWithFrames=this._getRectWithFrames(e);for(var r=0;r<this._itemHandlers.length;r++)this._itemHandlers.getItem(r)._transformRectangle(this._startRectangle,this._rectangle,!0)}},e.prototype._getRectWithFrames=function(e){for(var t=this._getRectangleWithBorder(e),n=0;n<this._itemHandlers.length;n++){var r=this._itemHandlers.getItem(n);if(null!=r&&r instanceof YW){var i=r.getRectangleIncludingFrames(),o=UU.transformRectangleByTwoRectanglesDiff(i,this._rectangle,e);t=KN.union(o,t)}}return t},e.prototype._constrainDiffToRegion=function(e,t){return this._canvas.suppressOutOfRegionManipulation&&null!=this._region?(e.left+t.x<this._region.left&&(t.x=this._region.left-e.left),e.top+t.y<this._region.top&&(t.y=this._region.top-e.top),e.right+t.x>this._region.left+this._region.width&&(t.x=this._region.left+this._region.width-e.right),e.bottom+t.y>this._region.top+this._region.height&&(t.y=this._region.top+this._region.height-e.bottom),t):t},e.prototype._constrainDiffToPlaceholderCover=function(e,t,n){var r=t.angle;t.angle=0;var i=t.bounds,o=e.clone();o.rotateAt(-r,t.center);var s=o.bounds;return n.rotate(-r),s.left+n.x>i.left&&(n.x=i.left-s.left),s.top+n.y>i.top&&(n.y=i.top-s.top),s.right+n.x<i.left+i.width&&(n.x=i.left+i.width-s.right),s.bottom+n.y<i.top+i.height&&(n.y=i.top+i.height-s.bottom),n.rotate(r),n},e.prototype._constrainRectangleToPlaceholderCover=function(e,t){var n=e.angle,r=t.angle,i=WN(90,BN(n-r)%180);t.angle=0;var o=t.bounds;e.rotateAt(-r,t.center);var s=e.bounds,a=Math.min(s.left,o.left),l=Math.min(s.top,o.top),c=Math.max(s.right,o.right),u=Math.max(s.bottom,o.bottom),h=c-a,d=u-l,p=i?this._startRectangle.height/this._startRectangle.width:this._startRectangle.width/this._startRectangle.height,f=h/d,m=(this._operation.resizeIndex-1+Math.round(BN(n-r)/90))%4+1;if(f>p){var g=Math.abs(h/p-h/f);1===m||2===m?l-=g:u+=g}if(f<p){var y=Math.abs(d*p-d*f);2===m||3===m?c+=y:a-=y}var _=new FN(a,l,c-a,u-l);if(!WN(0,n-r%360)){var v=KN.fromRectangleF(_);v.rotateAt(r-n,t.center),_=v.bounds}var b=KN.fromRectangleF(_);return b.rotateAt(n,t.center),b},e.prototype._getRectangleWithBorder=function(e){if(null==e||null==this._border)return null;var t=e.center,n=e.angle;e.angle=0;var r=e.bounds,i=KN.FromLTRB(r.left-this._border.left,r.top-this._border.top,r.right+this._border.right,r.bottom+this._border.bottom);return i.width*=Math.sign(e.width),i.height*=Math.sign(e.height),i.rotateAt(n,t),e.angle=n,i},e.prototype.addSelectedItemHandlersChanged=function(e){this._selectedItemHandlersChangedEvent.add(e)},e.prototype.removeSelectedItemHandlersChanged=function(e){this._selectedItemHandlersChangedEvent.remove(e)},e.prototype._onSelectedItemHandlersChanged=function(){this._updateCurrentMovePermissions(),this._selectedItemHandlersChangedEvent.notify(this)},e.prototype._updateCurrentMovePermissions=function(){var e=this;this._allowMoveHorizontal=!0,this._allowMoveVertical=!0,this._itemHandlers.forEach(function(t){var n=t.getPermissions();e._allowMoveHorizontal=e._allowMoveHorizontal&&n.allowMoveHorizontal,e._allowMoveVertical=e._allowMoveVertical&&n.allowMoveVertical})},Object.defineProperty(e.prototype,"_allowManipulation",{get:function(){return null!=this._canvas&&(!this._canvas.simpleMode||null!=this._canvas.contentEditingPlaceholderItemHandler)},enumerable:!0,configurable:!0}),e.cw=[0,-1,1,1,-1,-1,0,1,0],e.ch=[0,-1,-1,1,1,0,-1,0,1],e._isSafetyLineItemHandlersFunc=null,e}(),C$=function(){function e(){}return e.isLeftResizeGrip=function(e){return 1===e||4===e||5===e},e.isTopResizeGrip=function(e){return 1===e||2===e||6===e},e.isRightResizeGrip=function(e){return 2===e||3===e||7===e},e.isBottomResizeGrip=function(e){return 3===e||4===e||8===e},e.isCornerResizeGrip=function(e){return 1===e||2===e||3===e||4===e},e.isEdgeResizeGrip=function(e){return 5===e||6===e||7===e||8===e},e}(),x$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E$=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},S$=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.lastRectangle=null,r}return x$(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._getFrames=function(){var e,t;return this.item instanceof gz?(t=(null===(e=this._textManager)||void 0===e?void 0:e.isInEdit)?this.rectangle.toRectangleF():this.item.textRectangle,[$N.rectangle(t.left,t.top,t.width,t.height)]):this.item.boundingPaths},t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"textRectangle":case"boundingPaths":case"firstBaselineOffset":case"firstBaselineMinOffset":this.update(null,null,"frame");break;case"wrappingPath":case"wrappingMargin":this.update(null,null,this.item.transform.isEmpty?"wrappingPath":null);break;case"verticalAlignment":case"isVertical":case"shrinkMode":case"scheduledFitMode":case"paragraphSettings":case"overflowStrategy":this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._transformText=function(t){this.canvas.isResizing()||null!=this.item.wrappingPath?this.update(null,null,"frame"):e.prototype._transformText.call(this,t)},t.prototype.renderFill=function(e){var t=this.item,n=this.getControlCenter(),r=this.item.transform;this._getFrames().forEach(function(i){AU.fillPath(e,i,n,r,t.fillColor.preview,t.opacity)})},t.prototype.renderStroke=function(e){var t=this,n=this._getActualBorderWidth();if(!(n<=0)){var r=this.item,i=this.getControlCenter(),o=this.item.transform;this._getFrames().forEach(function(s){var a=s.toTextWhizzPath(t._textWhizz);a.offsetContour(n/2),AU.drawPath(e,a,i,o,n,r.borderColor.preview,r.opacity)})}},t.prototype.getTextWrappingPath=function(){var t=this;if(this.item instanceof PV&&this.item.textWrappingMode===Bj.Tight){var n=this._getFrames(),r=function(e){var n=e.clone();return n.transform(t.item.transform,t.getControlCenter()),n};if(1==n.length)return r(n[0]);for(var i=r(n[0]).toTextWhizzPath(this._textWhizz),o=1;o<n.length;o++)i=this._textWhizz.Path.union(i,r(n[o]).toTextWhizzPath(this._textWhizz));return $N.fromTextWhizzPath(i)}return e.prototype.getTextWrappingPath.call(this)},t.prototype._onTransformRectangle=function(e,t,n){var r;if(null!=e&&null!=t&&null!=this._startRectangle){var i=this._calculateTransformedRectangle(e,t);this.setRectangle(i,!0),null===(r=this.canvas)||void 0===r||r.redraw()}},t.prototype._validateRect=function(e){var t;if(null===this._textManager)return null;if(this.item instanceof gz&&this.item.overflowStrategy==jH.ExpandBox){var n=this._textManager.measureTextFrame();if(n.height>e.height){var r=n.height-e.height;if(OW(r,0))return null;var i=e.clone();return(null===(t=this._transformOperation)||void 0===t?void 0:t.resize)&&C$.isTopResizeGrip(this._transformOperation.resizeIndex)&&(r*=-1),i.centerY+=r/2,i.height=n.height,i}}return null},t.prototype._validateRectAndSet=function(t,n){var r=this._validateRect(t);null!=r?(e.prototype.setRectangle.call(this,r,n),this.update()):e.prototype.setRectangle.call(this,t,n)},t.prototype.setRectangleValidated=function(e){void 0===e&&(e=null),null==e&&(e=this.rectangle),this._validateRectAndSet(e,!0)},t.prototype.setRectangle=function(e,t){this._validateRectAndSet(e,t)},t.prototype.updateRectangle=function(t){e.prototype.updateRectangle.call(this,t),this.setRectangleValidated()},t.prototype.getTextRectangle=function(){var e,t,n=this.getControlCenter();return(t=(null===(e=this._textManager)||void 0===e?void 0:e.ready)?KN.fromRectangleF(this._textManager.measureText()):KN.fromRectangleF(this.item.sourceRectangle)).transform(this.item.transform.clone(),n),t},Object.defineProperty(t.prototype,"drawingRectangle",{get:function(){var e=this.canvas.isItemHandlerSelected(this)&&this.canvas.isResizing();if(null==this._staticTextRect)return e&&null!=this.startRectangle?this.startRectangle:this.rectangle;var t=KN.fromRectangleF(this._staticTextRect),n=e&&null!=this.startRectangle?this.startRectangle.getTransform(KN.fromRectangleF(this.getControlBounds())):this.item.transform.clone();return t.transform(n,this.getControlCenter()),t},enumerable:!0,configurable:!0}),t.prototype._addTextWhizzFrames=function(e,t){var n,r;try{for(var i=E$(this._getFrames()),o=i.next();!o.done;o=i.next())e.addFrame(this._createTextWhizzFrame(o.value,t))}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.setTextWhizzWrappingPath=function(e){var t=this.item,n=null;if(null!=t.wrappingPath){if(WN(0,this.item.transform.angle))n=t.wrappingPath.toTextWhizzPath(this._textWhizz);else{var r=t.wrappingPath.clone();r.rotateAt(-this.item.transform.angle,this.getControlCenter()),n=r.toTextWhizzPath(this._textWhizz)}n.offsetContour(t.wrappingMargin)}else n=new this._textWhizz.Path;e.setWrappingPath(n)},t.prototype.updateTextWhizzFrames=function(e){for(var t=e.getFrameCount(),n=this._getFrames(),r=0;r<n.length;r++){var i=n[r];r<t?e.replaceFrame(this._createTextWhizzFrame(i,!1),r):e.addFrame(this._createTextWhizzFrame(i,!1))}if(t>n.length)for(var o=r;r<t;r++)e.removeFrame(o);this.setRectangleValidated()},t.prototype._calculateIsLargeRect=function(){return this._textManager.measureTextFrame().height<this.rectangle.height},t.prototype._createTextWhizzFrame=function(e,t){var n=new this._textWhizz.ShapeTextFrame;n.shape=this._pathToTextWhizzPath(e),n.firstBaselineOffset=this._firstBaselineOffsetToTextWhizz(this.item.firstBaselineOffset),n.firstBaselineMinOffset=this.item.firstBaselineMinOffset,this.item instanceof gz&&(this.item.overflowStrategy==jH.ExpandBox?!t&&this._calculateIsLargeRect()?n.verticalAlignment=d$.verticalAlignmentToTextWhizz(this.item.verticalAlignment,this._textWhizz):n.autoSizeMode=this._textWhizz.AutoSizeMode.heightOnly:n.verticalAlignment=d$.verticalAlignmentToTextWhizz(this.item.verticalAlignment,this._textWhizz),this.item.overflowStrategy==jH.FitToBox&&(n.copyFittingMode=this._textWhizz.CopyFittingMode.fitToBox),this.item.overflowStrategy==jH.FitToWidth&&(n.copyFittingMode=this._textWhizz.CopyFittingMode.fitToWidth));var r=this.item.previewScale;return WN(r,1)||n.shape.scale(1/r,1/r),n},t.prototype._applyTransform=function(e,t,n){var r,i;if(e instanceof gz){var o=KN.fromRectangleF(e.textRectangle);o.setTransform(t),e.textRectangle=o.toRectangleF()}if(e instanceof PV)try{for(var s=E$(e.boundingPaths),a=s.next();!a.done;a=s.next())a.value.transform(t,n)}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype._firstBaselineOffsetToTextWhizz=function(e){switch(e){case VH.Ascent:return this._textWhizz.FirstBaselineOffset.ascent;case VH.CapHeight:return this._textWhizz.FirstBaselineOffset.capHeight;case VH.Leading:return this._textWhizz.FirstBaselineOffset.leading;case VH.XHeight:return this._textWhizz.FirstBaselineOffset.xHeight;case VH.Fixed:return this._textWhizz.FirstBaselineOffset.fixed}},t.typeName="NewBoundedTextItemHandler",t}(b$),P$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T$=function(e){function t(t,n){return void 0===n&&(n=null),e.call(this,t,n)||this}return P$(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"textPath":case"start":case"end":this.update(null,null,"frame");break;case"fitToPath":case"fitToPathStep":case"stretch":case"originalFontSize":this.update()}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype._addTextWhizzFrames=function(e){e.addFrame(this._createTextWhizzFrame())},t.prototype.updateTextWhizzFrames=function(e){e.replaceFrame(this._createTextWhizzFrame(),0)},t.prototype.setTextWhizzWrappingPath=function(e){},t.prototype._getEndTransformTrigger=function(e){return e?null:"frame"},t.prototype._applyTransform=function(e,t,n){var r,i;if(e instanceof Dz){var o=e.textPath.clone();o.transform(t,n),e.textPath=o;var s=this._getPreviewScaleLimits(),a=this.item.previewScale*t.scaleY;a=Math.min(null!==(r=s.max)&&void 0!==r?r:Number.MAX_VALUE,a),a=Math.max(null!==(i=s.min)&&void 0!==i?i:Number.MIN_VALUE,a),e.previewScale=a}},t.prototype._createTextWhizzFrame=function(){var e=this.item.textPath.toTextWhizzPath(this._textWhizz),t=this.item.previewScale;WN(t,1)||e.scale(1/t,1/t);var n=new this._textWhizz.PathTextFrame;return n.baseline=e,n},t.typeName="NewCurvedTextItemHandler",t}(b$),I$=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},O$=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},k$=function(){function e(e,t,n,r){var i=this;this._item=e,this._itemHandlers=t,this._itemHandler=n,this._history=r,this._layoutEvent=new EL,this._orderedItemHandlers=null,this._initialized=!1,this._disposed=!1,this._onChildItemHandlerChanging=function(e){i.applyLayout()},this._onChildItemHandlerPropertyChanged=function(e,t){return I$(i,void 0,void 0,function(){return O$(this,function(n){switch(n.label){case 0:switch(t){case"font":case"text":case"tracking":case"leading":case"shadow":case"stroke":case"underline":case"sourceRectangle":case"borderWidth":case"transform":return[3,1]}return[3,3];case 1:return[4,e.waitUpdate()];case 2:return n.sent(),this.applyLayout(),[3,3];case 3:return[2]}})})},this._onItemPropertyChanged=function(e,t){switch(t){case"layoutSettings":i._orderedItemHandlers=null,i._updateItemsOrder();case"margin":i.applyLayout();break;case"orientation":i.applyLayout(!0);break;case"alignItems":case"justifyContent":i.applyLayout()}},this._ignoreLayoutApply=!1,this._filterHiddenItems=function(e){return!((e instanceof aW||e instanceof b$||e instanceof D$)&&e.isEmpty())},this._item.addPropertyChanged(this._onItemPropertyChanged),this._itemHandlers.add_itemAdded(this._onItemHandlerAdded.bind(this)),this._itemHandlers.add_itemRemoved(this._onItemHandlerRemoved.bind(this)),this._itemHandlers.forEach(function(e){return e.addItemPropertyChanged(i._onChildItemHandlerPropertyChanged)}),this._itemHandlers.ofType(D$).forEach(function(e){return e.getLayoutEvent().add(i._onChildItemHandlerChanging)}),this._init()}return e.prototype.dispose=function(){var e=this;this._disposed=!0,this._item.removePropertyChanged(this._onItemPropertyChanged),this._itemHandlers.remove_itemAdded(this._onItemHandlerAdded.bind(this)),this._itemHandlers.remove_itemRemoved(this._onItemHandlerRemoved.bind(this)),this._itemHandlers.forEach(function(t){return t.removeItemPropertyChanged(e._onChildItemHandlerPropertyChanged)}),this._itemHandlers.ofType(D$).forEach(function(t){return t.getLayoutEvent().remove(e._onChildItemHandlerChanging)})},e.prototype.getLayoutEvent=function(){return this._layoutEvent},e.prototype.onItemRemoved=function(e){this._updateItemsOrder({removedItem:e.item}),this.applyLayout()},e.prototype.onItemHandlersCollectionChanged=function(){this._orderedItemHandlers=null},e.prototype._init=function(){return I$(this,void 0,void 0,function(){var e;return O$(this,function(t){switch(t.label){case 0:return e=this._item.getItemsOrder(),null==this._itemHandler.canvas?[2]:[4,this._itemHandler.waitUpdate()];case 1:return t.sent(),e||this._updateItemsOrder(),this._initialized=!0,this.applyLayout(),[2]}})})},e.prototype._onItemHandlerAdded=function(e){e.item.addItemPropertyChanged(this._onChildItemHandlerPropertyChanged),e.item.getChangingEvent().add(this._onChildItemHandlerChanging),e.item instanceof D$&&e.item.getLayoutEvent().add(this._onChildItemHandlerChanging),this._orderedItemHandlers=null},e.prototype._onItemHandlerRemoved=function(e){e.item.removeItemPropertyChanged(this._onChildItemHandlerPropertyChanged),e.item.getChangingEvent().remove(this._onChildItemHandlerChanging),e.item instanceof D$&&e.item.getLayoutEvent().remove(this._onChildItemHandlerChanging),this._orderedItemHandlers=null},e.prototype._updateItemsOrder=function(e){if(this._item.layoutSettings instanceof xV){if(this._validateItemsOrder())return;if(null==this._item.getItemsOrder()){this._initSortedItemHandlers();var t=this._getSortedItemHandlers().map(function(e){return e.item.id});this._item.setItemsOrder(t)}}},e.prototype._initSortedItemHandlers=function(){var e=this._itemHandler.getTransformedRectangle(!1,!0).center,t=this._item.transform.angle,n=this._item.layoutSettings.orientation;return this._orderedItemHandlers=this._itemHandlers.toArray().sort(function(r,i){return function(e,t){return n===oV.horizontal?e.bounds.left-t.bounds.left:e.bounds.top-t.bounds.top}(r.getTransformedRectangle(!1,!0).rotateAt(-t,e),i.getTransformedRectangle(!1,!0).rotateAt(-t,e))}),this._orderedItemHandlers},e.prototype._validateItemsOrder=function(){var e=this._item.getItemsOrder();if(null==e)return!1;if(e.length!==this._item.items.length)return!1;var t=this._item.items.select(function(e){return e.id}).toArray();return e.every(function(e){return t.includes(e)})},e.prototype._getSortedItemHandlers=function(){if(null!=this._orderedItemHandlers)return this._orderedItemHandlers;var e=this._item.getItemsOrder();if(!e)return null;var t=[],n=this._itemHandlers.toArray();if(n.length!=e.length)throw new Error("itemsOrder length does not match itemHandlers length");return e.forEach(function(e){var r=n.findIndex(function(t){return t.item.id==e});if(-1==r)throw new Error("itemsOrder: Element with id "+e+" was not found in itemHandlers");t.push(n[r]),n.splice(r,1)}),this._orderedItemHandlers=t,this._orderedItemHandlers},e.prototype.getOrderedItems=function(){var e=this._item.getItemsOrder();if(e){var t=this._item.items.toArray();return t.sort(function(t,n){return e.indexOf(t.id)-e.indexOf(n.id)}),t}return null},Object.defineProperty(e.prototype,"ignoreLayoutApply",{set:function(e){this._ignoreLayoutApply=e},enumerable:!0,configurable:!0}),e.prototype.applyLayout=function(e){if(void 0===e&&(e=!1),!this._disposed&&this._initialized&&!this._ignoreLayoutApply){this._ignoreLayoutApply=!0;try{var t=!this._history.isPaused();t&&this._history.pause(),this._itemHandler.canvas.pauseRedraw();var n=this._applyLayoutImpl(e);this._itemHandler.canvas.continueRedraw(!0),t&&this._history.resume(!!n,!1,!0),this._layoutEvent.notify()}finally{this._ignoreLayoutApply=!1}}},e.prototype._applyLayoutImpl=function(e){var t,n=this;void 0===e&&(e=!1);var r=this._getSortedItemHandlers();if(null!=r&&0!=r.length){var i=this._itemHandler.rectangle,o=i.center,s=this._item.layoutSettings,a=s.alignItems,l=s.orientation,c=s.margin,u=s.anchorPoint,h=i.toRectangleF(),d=this._getAnchorPoint(h,u,l),p=this._getOriginalPoint(h,a,l);r=r.filter(function(e){return n._filterHiddenItems(e)});var f=[];r.forEach(function(e){var t=n._getItemHandlerPositionRect(e,i,p,a,l),r=n._getPositionRectOffset(l,h,t)+c;p=n._getOriginalPoint(h,a,l,r),f.push(t)}),f=this._applyAnchor(f,h,u,l);var m=!1;r.forEach(function(e){var t=f.shift(),r=n._setItemHandlerPosition(e,i,t);m=m||r});var g=this._itemHandlers.cast().where(this._filterHiddenItems);if(g.any()){var y=g.select(function(e){return e.getTransformedRectangle(!1,!0)}).aggregate(function(e,t){return KN.union(e,t)});e&&(this._correctCenterPosition(y.center,o,r),y=g.select(function(e){return e.getTransformedRectangle(!1,!0)}).aggregate(function(e,t){return KN.union(e,t)}));var _=this._getSourceRectangleByAnchorPoint(y,d,l,u);this._itemHandler.setSourceRectangle(_)}return null===(t=this._itemHandler.canvas)||void 0===t||t.updateTexts(),m}},e.prototype._getSourceRectangleByAnchorPoint=function(e,t,n,r){var i=e.angle,o=e.toRectangleF();return n==oV.horizontal?r==aV.start?o.left=t.x:r==aV.center?o.left-=o.center.x-t.x:o.right=t.x:r==aV.start?o.top=t.y:r==aV.center?o.top-=o.center.y-t.y:o.bottom=t.y,KN.fromRectangleF(o,i)},e.prototype._getAnchorPoint=function(e,t,n){if(n==oV.horizontal){var r=e.center.y;switch(t){case aV.start:return new MN(e.left,r);case aV.center:return new MN(e.center.x,r);case aV.end:return new MN(e.right,r)}}else{var i=e.center.x;switch(t){case aV.start:return new MN(i,e.top);case aV.center:return new MN(i,e.center.y);case aV.end:return new MN(i,e.bottom)}}},e.prototype._applyAnchor=function(e,t,n,r){if(0==e.length)return e;if(n==aV.start)return e;var i=function(e){var i=0,o=0,s=e.reduce(function(e,t){return FN.union(e,t)});if(r==oV.horizontal)if(n==aV.center)i=s.center.x-t.center.x;else{if(n!=aV.end)throw new Error("Invalid _applyAnchor operation. Orientation: '"+r+"' AnchorPoint: '"+n+"'");i=s.right-t.right}else if(n==aV.center)o=s.center.y-t.center.y;else{if(n!=aV.end)throw new Error("Invalid _applyAnchor operation. Orientation: '"+r+"' AnchorPoint: '"+n+"'");o=s.bottom-t.bottom}return new MN(i,o)}(e);return e.map(function(e){return new FN(e.left-i.x,e.top-i.y,e.width,e.height)})},e.prototype._correctCenterPosition=function(e,t,n){var r=this,i=t.x-e.x,o=t.y-e.y;n.forEach(function(e){var t=function(e){var n=e.getTransformedRectangle(!1,!0);return n.translate(i,o),r._setItemHandlerRectangle(e,n,t),!0};t(e)})},e.prototype._setItemHandlerPosition=function(e,t,n){var r=this,i=function(e){var o=e.getTransformedRectangle(!1,!0),s=o.clone();o.rotateAt(-t.angle,t.center);var a=o.bounds;return o.translate(n.left-a.left,n.top-a.top),o.rotateAt(t.angle,t.center),!s.equals(o)&&(r._setItemHandlerRectangle(e,o,i),!0)};return i(e)},e.prototype._setItemHandlerRectangle=function(e,t,n){var r=e.getBorderMargin();t.width-=2*r,t.height-=2*r,e instanceof D$?e.setRectangle(t,!0,!0):(e.setRectangle(t),e instanceof YW&&e.updateContentAndFrames(n),e instanceof eX&&e.getNestedItemHandlers(!0).forEach(function(e){n(e)}))},e.prototype._getPositionRectOffset=function(e,t,n){return e==oV.vertical?n.bottom-t.top:n.right-t.left},e.prototype._getItemHandlerPositionRect=function(e,t,n,r,i){var o=e.getTransformedRectangle(!1,!0);o.angle-=t.angle;var s=o.bounds,a=this._getOriginalPoint(s,r,i),l=n.y-a.y;return r===iV.none&&i!==oV.horizontal||(s.left+=n.x-a.x),r===iV.none&&i!==oV.vertical||(s.top+=l),s},e.prototype._getOriginalPoint=function(e,t,n,r){var i;return void 0===r&&(r=0),n==oV.vertical?(i=new MN(t==iV.start||t==iV.none?e.left:t==iV.center?e.center.x:e.right,e.top)).y+=r:(i=new MN(e.left,t==iV.start||t==iV.none?e.top:t==iV.center?e.center.y:e.bottom)).x+=r,i},e}(),R$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A$=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},M$=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},D$=function(e){function t(t,n,r,i){void 0===i&&(i=null);var o=e.call(this,t,n,i)||this;return o._history=r,o._layoutEvent=new EL,o._rectMap={},o._onChildItemChanged=function(e){var t=o.canvas.viewer.getHandler(e);if(t instanceof b$){var n=t.rectangle;if(n.equals(o._rectMap[t.uniqueId]))return;o._rectMap[t.uniqueId]=n,o.applyLayout()}},o._onChildItemHandlerChanging=function(e){null!=o._layoutHandler&&o._layoutHandler instanceof k$||o._resetSourceRectangle(),o.raiseChanging(o.item)},o._transformStarted=!1,o._transformedRectangle=null,o._onItemHandlerExitedEditMode=function(e){o.applyLayout()},o._onItemHandlerEnteredEditMode=function(e){o.applyLayout()},o._initSourceRectangle().then(function(){o._initLayoutHandler(),o.applyLayout(null)}),o._subscribeChildItemHandlers(),o}return R$(t,e),t.prototype._isGroupHandler=function(){return!0},t.prototype._onItemPropertyChanged=function(e,t){switch(t){case"layoutSettings":this._initLayoutHandler()}},t.prototype._initLayoutHandler=function(){this.item.layoutSettings instanceof xV?this._layoutHandler instanceof k$||(this._layoutHandler=new k$(this.item,this.itemHandlers,this,this._history),this._layoutHandler.getLayoutEvent().add(this._onLayoutHandlerLayoutEvent.bind(this))):(null!=this._layoutHandler&&this._layoutHandler.dispose(),this._layoutHandler=null)},t.prototype.getLayoutEvent=function(){return this._layoutEvent},t.prototype._onLayoutHandlerLayoutEvent=function(){null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.updateButtonGroups(),this.getChangingEvent().notify(this.item),this.updateViolationContainerPosition(),this.canvas.updateFloatingItemToolbar(this),this.canvas.redraw()),this._layoutEvent.notify()},t.prototype._initSourceRectangle=function(){return A$(this,void 0,void 0,function(){return M$(this,function(e){switch(e.label){case 0:return this.item.sourceRectangle&&!this.item.sourceRectangle.isEmpty()?[2]:this.canvas?[4,this._resetSourceRectangle()]:[2];case 1:return e.sent(),[2]}})})},t.prototype._resetSourceRectangle=function(){return A$(this,void 0,void 0,function(){var e;return M$(this,function(t){switch(t.label){case 0:return[4,this.waitUpdate()];case 1:return t.sent(),this.itemHandlers.any()&&(e=this.itemHandlers.cast().select(function(e){return e.rectangle}).aggregate(function(e,t){return KN.union(e,t)}),this.setSourceRectangle(e)),[2]}})})},t.prototype.waitUpdate=function(){return A$(this,void 0,void 0,function(){return M$(this,function(e){switch(e.label){case 0:return[4,Promise.all(this.itemHandlers.toArray().map(function(e){return e.waitUpdate()}))];case 1:return e.sent(),[2]}})})},t.prototype.startTransform=function(t){this._originalHeight=this.height,this._transformStarted=!0,this._layoutHandler&&(this._layoutHandler.ignoreLayoutApply=!0),e.prototype.startTransform.call(this,t)},t.prototype._onResized=function(){return null!=this.item.layoutSettings&&this.item.layoutSettings instanceof xV&&(this.item.layoutSettings.margin*=this.height/this._originalHeight),e.prototype._onResized.call(this)},t.prototype._endTransform=function(t,n,r){return A$(this,void 0,void 0,function(){var i;return M$(this,function(o){return e.prototype._endTransform.call(this,t,n,r),null==this._transformedRectangle?(this._transformStarted=!1,this._layoutHandler&&(this._layoutHandler.ignoreLayoutApply=!1),[2]):(this.canvas.pauseRedraw(),i=this._transformedRectangle,this._transformedRectangle=null,this._transformStarted=!1,this._history.pause(),this.setSourceRectangle(i),this._layoutHandler&&(this._layoutHandler.ignoreLayoutApply=!1),this.applyLayout(null),this._history.resume(!0,!1,!0),this.canvas.continueRedraw(),[2])})})},t.prototype.drawChildHighlights=function(e){var t=this;null!=this._layoutHandler&&this.itemHandlers.toArray().filter(function(e){return t._layoutHandler._filterHiddenItems(e)}).forEach(function(t){return t.drawHighlight(e)})},Object.defineProperty(t.prototype,"_calculateRectangleFromChild",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype._getRectangle=function(){return this._transformedRectangle?this._transformedRectangle:e.prototype._getRectangle.call(this)},t.prototype.isEmpty=function(){var e=this.itemHandlers.where(function(e){var n=!1;return((e instanceof aW||e instanceof b$)&&!e.isLocked()||e instanceof t)&&(n=!0),n});return!!e.any()&&!e.any(function(e){return!e.isEmpty()})},t.prototype.isVisible=function(){return e.prototype.isVisible.call(this)&&!this.isEmpty()},t.prototype.applyLayout=function(e){e instanceof YW&&e.editing||this.itemHandlers.length<2||(this.item.layoutSettings instanceof xV&&this._layoutHandler?this._layoutHandler.applyLayout():(this._resetSourceRectangle(),this._onLayoutHandlerLayoutEvent()))},t.prototype.getControlBounds=function(){return this.item.sourceRectangle?this.item.sourceRectangle:new FN},t.prototype.setRectangle=function(t,n,r){void 0===r&&(r=!0),this._transformStarted?this._transformedRectangle=t.clone():(r&&e.prototype.setRectangle.call(this,t,n),this.setSourceRectangle(t))},t.prototype.setSourceRectangle=function(e){this.item.sourceRectangle=e.toRectangleF(),this.item.transform=new YN(1,1,0,0,e.angle)},t.prototype.transformByMatrix=function(e){this.setRectangle(this.rectangle.transformByMatrix(e),!1,!0),1===e.scaleX&&1===e.scaleY||this._onResized(),this._transformChanged(),null!=this.canvas&&this.canvas.updateSelection()},t.prototype.getOrderedItems=function(){return this.item.layoutSettings instanceof xV&&null!=this._layoutHandler?this._layoutHandler.getOrderedItems():e.prototype.getOrderedItems.call(this)},t.prototype.generateAndApplyAutolayoutSettings=function(e,t,n,r){this.item.layoutSettings=_V.generateAutoLayoutSettings(this.itemHandlers.toArray().map(function(e){return e.getTransformedRectangle(!1,!0).bounds}),e,t,n,r)},t.prototype._onItemAdded=function(t){return A$(this,void 0,void 0,function(){return M$(this,function(n){switch(n.label){case 0:return e.prototype._onItemAdded.call(this,t),t.item instanceof ZH?[4,r$.waitForItemsUpdated([t.item],this.canvas)]:[3,2];case 1:n.sent(),n.label=2;case 2:return this._subscribeChildItemChanges(t.item),this.applyLayout(this.itemHandlers.first(function(e){return e.item===t.item})),[2]}})})},t.prototype._onItemRemoved=function(t){e.prototype._onItemRemoved.call(this,t),this._unsubscribeChildItemChanges(t.item),this._layoutHandler?this._layoutHandler.onItemRemoved(t):this._resetSourceRectangle()},t.prototype._onItemHandlerAdded=function(t){return A$(this,void 0,void 0,function(){return M$(this,function(n){switch(n.label){case 0:return e.prototype._onItemHandlerAdded.call(this,t),this._layoutHandler instanceof k$&&this._layoutHandler.onItemHandlersCollectionChanged(),[4,this.waitUpdate()];case 1:return n.sent(),this.applyLayout(),[2]}})})},t.prototype._onItemHandlerRemoved=function(t){e.prototype._onItemHandlerRemoved.call(this,t),this._layoutHandler instanceof k$&&this._layoutHandler.onItemHandlersCollectionChanged()},t.prototype._subscribeChildItemHandlers=function(){var e=this;this.itemHandlers.forEach(function(t){return e._subscribeChildItemHandler(t)})},t.prototype._unsubscribeChildItemHandlers=function(){var e=this;this.itemHandlers.forEach(function(t){return e._unsubscribeChildItemHandler(t)})},t.prototype._subscribeChildItemHandler=function(e){e.getChangingEvent().add(this._onChildItemHandlerChanging),e instanceof b$&&(e.exitedEditModeEvent.add(this._onItemHandlerExitedEditMode),e.enteredEditModeEvent.add(this._onItemHandlerEnteredEditMode))},t.prototype._unsubscribeChildItemHandler=function(e){e.getChangingEvent().remove(this._onChildItemHandlerChanging),e instanceof b$&&(e.exitedEditModeEvent.remove(this._onItemHandlerExitedEditMode),e.enteredEditModeEvent.remove(this._onItemHandlerEnteredEditMode))},t.prototype._unsubscribeChildItems=function(){var e=this;this.item.items.forEach(function(t){return e._unsubscribeChildItemChanges(t)})},t.prototype._subscribeChildItems=function(){var e=this;this.item.items.forEach(function(t){return e._subscribeChildItemChanges(t)})},t.prototype._unsubscribeChildItemChanges=function(e){e.getItemChangedEvent().remove(this._onChildItemChanged)},t.prototype._subscribeChildItemChanges=function(e){e.getItemChangedEvent().add(this._onChildItemChanged)},t.prototype._onRemovedFromCanvas=function(t){return A$(this,void 0,void 0,function(){return M$(this,function(n){return this._unsubscribeChildItems(),this._unsubscribeChildItemHandlers(),null!=this._layoutHandler&&(this._layoutHandler.dispose(),this._layoutHandler=null),e.prototype._onRemovedFromCanvas.call(this,t),[2]})})},t.prototype._onAddedOnCanvas=function(t){return A$(this,void 0,void 0,function(){return M$(this,function(n){switch(n.label){case 0:return e.prototype._onAddedOnCanvas.call(this,t),this._subscribeChildItems(),this._initLayoutHandler(),[4,this._initSourceRectangle()];case 1:return n.sent(),[2]}})})},t.prototype.drawItemHandler=function(t){this.isEmpty()||e.prototype.drawItemHandler.call(this,t)},Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),t.prototype.isChildVisible=function(e){return!(e instanceof aW||e instanceof b$)||!e.isEmpty()},t.typeName="LayoutItemHandler",t}(eX),F$=function(){function e(e){var t=this;this._canvas=e,this._handlers=new Map,this._beforeReplaceItemHandlerEvent=new EL,this._afterReplaceItemHandlerEvent=new EL,this.get=function(e){var n=t._handlers.has(e)?t._handlers.get(e):t._createItemHandler(e);return t._handlers.set(e,n),t._isItemOnCanvas(e)&&n.canvas!=t._canvas&&(n.canvas=t._canvas),n}}return Object.defineProperty(e.prototype,"beforeReplaceItemHandlerEvent",{get:function(){return this._beforeReplaceItemHandlerEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"afterReplaceItemHandlerEvent",{get:function(){return this._afterReplaceItemHandlerEvent},enumerable:!0,configurable:!0}),e.prototype.delete=function(e){var t=this;e instanceof eX&&e.itemHandlers.forEach(function(e){return t.delete(e)}),this._handlers.delete(e.item),e.dispose()},e.prototype.replaceItemHandler=function(e,t){var n=this.get(e),r=this._canvas.isItemHandlerSelected(n);this._beforeReplaceItemHandlerEvent.notify(n),this._handlers.delete(e);var i=this.get(null!=t?t:e),o=n.parentGroupItemHandler;if(null!=o)o.replaceItemHandler(n,i);else{var s=n.layer.itemHandlers,a=s.indexOf(n);s.remove(n),s.insertAt(a,i)}n.dispose(),n.item=null,this._afterReplaceItemHandlerEvent.notify(i),r&&this._canvas.addSelectedItemHandler(i)},e.prototype.replaceTextItemHandler=function(e){if(e instanceof ZH){var t=this._useOldItemHandler(e,!1),n=this.get(e);(t&&n instanceof b$||!t&&n instanceof aW)&&this.replaceItemHandler(e)}},Object.defineProperty(e.prototype,"_viewer",{get:function(){return this._canvas.viewer},enumerable:!0,configurable:!0}),e.prototype._createItemHandler=function(e){var t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,_,v,b,w,C,x=this;if(e.type===MH.type)return new tW(e,null===(t=this._canvas)||void 0===t?void 0:t.textWhizz);if(e.type===nV.type)return new NW(e,null===(n=this._canvas)||void 0===n?void 0:n.textWhizz);if(e.type===uz.type)return new vW(e,null===(r=this._canvas)||void 0===r?void 0:r.textWhizz);if(function(e){return e.type===FV.type}(e)){var E=new YW(e,null===(i=this._canvas)||void 0===i?void 0:i.textWhizz);return null!=e.content&&(E.content=this.get(e.content)),E.bottomFrames=e.bottomFrames.map(function(e){return x.get(e)}),E.topFrames=e.topFrames.map(function(e){return x.get(e)}),E}if(function(e){return e.type===nz.type}(e))return new dW(e,null===(o=this._canvas)||void 0===o?void 0:o.textWhizz);if(function(e){return e.type===zV.type}(e))return new uW(e,null===(s=this._canvas)||void 0===s?void 0:s.textWhizz);if(e instanceof ZH)if(this._useOldItemHandler(e,!this._canvas.viewer.frontEndTextRenderingEnabled)){if(S(e))return new xW(e,null===(a=this._canvas)||void 0===a?void 0:a.textWhizz);if(I(e))return new VW(e,null===(l=this._canvas)||void 0===l?void 0:l.textWhizz);if(P(e))return new iX(e,null===(c=this._canvas)||void 0===c?void 0:c.textWhizz);if(T(e))return new HW(e,null===(u=this._canvas)||void 0===u?void 0:u.textWhizz)}else{if(S(e)||I(e))return new S$(e,null===(h=this._canvas)||void 0===h?void 0:h.textWhizz);if(P(e))return new T$(e,null===(d=this._canvas)||void 0===d?void 0:d.textWhizz);if(T(e))return new j$(e,null===(p=this._canvas)||void 0===p?void 0:p.textWhizz)}if(function(e){return e.type===Bz.type}(e))return new sX(e,null===(f=this._canvas)||void 0===f?void 0:f.textWhizz);if(function(e){return e.type===jz.type}(e))return new uX(e,null===(m=this._canvas)||void 0===m?void 0:m.textWhizz);if(function(e){return e.type===RH.type}(e))return new JU(e.sourcePath,e,null===(g=this._canvas)||void 0===g?void 0:g.textWhizz);if(function(e){return e.type===jV.type}(e))return new lX(e,null===(y=this._canvas)||void 0===y?void 0:y.textWhizz);if(function(e){return e.type===Uz.type}(e))return new dX(e,null===(_=this._canvas)||void 0===_?void 0:_.textWhizz);if(function(e){return e.type===zz.type}(e))return new fX(e,null===(v=this._canvas)||void 0===v?void 0:v.textWhizz);if(function(e){return e.type===Cz.type}(e))return new eX(e,e.items.toArray().map(function(e){return x.get(e)}),null===(b=this._canvas)||void 0===b?void 0:b.textWhizz);if(function(e){return e.type===Tz.type}(e))return new nX(e,e.items.toArray().map(function(e){return x.get(e)}),null===(w=this._canvas)||void 0===w?void 0:w.textWhizz);if(function(e){return e.type===_V.type}(e))return new D$(e,e.items.toArray().map(function(e){return x.get(e)}),this._canvas.history,null===(C=this._canvas)||void 0===C?void 0:C.textWhizz);throw new OL("Item of type "+e.type+" not supported");function S(e){return e.type===gz.type}function P(e){return e.type===Dz.type}function T(e){return e.type===BV.type}function I(e){return e.type===PV.type}},e.prototype._isItemOnCanvas=function(e){return null!=e.parentContainer&&e.parentContainer.parentComponent instanceof eU&&this._viewer.surface==e.parentContainer.parentComponent},Object.defineProperty(e.prototype,"_debugWarnEnabled",{get:function(){return void 0===window.$DesignAtoms$WarnOnLegacyItemHandlers&&(window.$DesignAtoms$WarnOnLegacyItemHandlers=!1),window.$DesignAtoms$WarnOnLegacyItemHandlers},enumerable:!0,configurable:!0}),e.prototype._logUseOldItemHandler=function(e,t,n){if(this._debugWarnEnabled){var r="unknown";switch(t){case"verticalScale":r="verticalScale property value "+n+" is not equal to 1";break;case"shadow":r="item has shadow";break;case"overlapLinesEnabled":r="overlapLinesEnabled is true";break;case"maxLineCount":case"maxLineLength":r="maxLineLength ("+n+") is greater then 0";break;case"AutoScaledTextItem":r="item is AutoScaledTextItem";break;case"text-list":r="item text contains list tags";break;case"isVertical":r="isVertical is true";break;case"verticalAlignment":r="verticalAlignment ("+n+") is not Top";break;case"scheduledFitMode":r="scheduledFitMode is set ("+n+")";break;case"overflowStrategy":r="overflowStrategy is set ("+n+")";break;case"characterLimit":r="characterLimit ("+n+") is greater then 0";break;case"fitToPath":r="fitToPath is true";break;default:r="unknown, property: "+t}console.warn("Legacy text item handler created for item ["+e.type+"#"+e.name+"] reason: "+r)}},e.prototype._useOldItemHandler=function(e,t){if(!0===t)return!0;if(!WN(1,e.verticalScale,.001)||!WN(1,e.horizontalScale,.001))return this._logUseOldItemHandler(e,"verticalScale",e.verticalScale),!0;if(null!=e.shadow)return this._logUseOldItemHandler(e,"shadow",null),!0;if(e.overlapLinesEnabled)return this._logUseOldItemHandler(e,"overlapLinesEnabled",null),!0;if(e.maxLineCount>0||e.maxLineLength>0)return e.maxLineCount&&this._logUseOldItemHandler(e,"maxLineCount",e.maxLineCount),e.maxLineLength&&this._logUseOldItemHandler(e,"maxLineLength",e.maxLineLength),!0;if(e instanceof nz)return this._logUseOldItemHandler(e,"AutoScaledTextItem",null),!0;if(e.text.includes("<ol")||e.text.includes("<ul")||e.text.includes("<li"))return this._logUseOldItemHandler(e,"text-list",null),!0;if(e instanceof gz){if(e.isVertical)return this._logUseOldItemHandler(e,"isVertical",null),!0;if(null!=e.scheduledFitMode)return this._logUseOldItemHandler(e,"scheduledFitMode",e.scheduledFitMode),!0;if(e.characterLimit>0)return this._logUseOldItemHandler(e,"characterLimit",e.characterLimit),!0}if(e instanceof PV){if(e.isVertical)return this._logUseOldItemHandler(e,"isVertical",null),!0;if(e.characterLimit>0)return this._logUseOldItemHandler(e,"characterLimit",e.characterLimit),!0}return e instanceof BV&&e.isVertical?(this._logUseOldItemHandler(e,"isVertical",null),!0):!!(e instanceof Dz&&e.fitToPath)&&(this._logUseOldItemHandler(e,"fitToPath",null),!0)},e}(),L$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B$=function(e){function t(t){var n=this;if(!t)throw new RL("layer");return(n=e.call(this)||this)._layer=t,n}return L$(t,e),t.prototype._onHandlerAdded=function(e,t,n){var r=this,i=function(e){e.layer=r._layer;var t=r._layer.canvas;t&&(e.canvas=t),e instanceof eX&&e.applyToItems(i)};i(e)},t.prototype._onHandlerRemoved=function(e,t){var n=this._layer.canvas;n&&n.isItemHandlerSelected(e)&&n.removeSelectedItemHandler(e),e.layer=null,n&&(e.canvas=null)},t.prototype.insertAt=function(t,n){e.prototype.insertAt.call(this,t,n),this._onHandlerAdded(n,t,this._layer.index)},t.prototype.move=function(t,n){return e.prototype.move.call(this,t,n)},t.prototype.removeAt=function(t){var n=e.prototype.removeAt.call(this,t);return n&&this._onHandlerRemoved(n,t),n},t.prototype.clear=function(){for(var t=0;t<this.length;t++)this.getItem(t).layer=null;e.prototype.clear.call(this)},t}(Ij),N$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j$=function(e){function t(t,n){return void 0===n&&(n=null),e.call(this,t,n)||this}return N$(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this._getItem()},set:function(t){e.prototype._setItem.call(this,t)},enumerable:!0,configurable:!0}),t.prototype._onItemPropertyChanged=function(t,n){switch(n){case"baselineLocation":this.update(null,null,"frame")}e.prototype._onItemPropertyChanged.call(this,t,n)},t.prototype.drawItemHandler=function(t){e.prototype.drawItemHandler.call(this,t)},t.prototype._addTextWhizzFrames=function(e){e.addFrame(this._createTextWhizzFrame())},t.prototype.setTextWhizzWrappingPath=function(e){},t.prototype.updateTextWhizzFrames=function(e){e.replaceFrame(this._createTextWhizzFrame(),0)},t.prototype._getEndTransformTrigger=function(e){return e?null:"frame"},t.prototype._applyTransform=function(e,t,n){var r,i;if(e instanceof BV){var o=e.baselineLocation.clone();o.transform(t,n),e.baselineLocation=o;var s=this._getPreviewScaleLimits(),a=this.item.previewScale*t.scaleY;a=Math.min(null!==(r=s.max)&&void 0!==r?r:Number.MAX_VALUE,a),a=Math.max(null!==(i=s.min)&&void 0!==i?i:Number.MIN_VALUE,a),e.previewScale=a}},t.prototype._getPreviewScaleLimits=function(){var t,n,r=e.prototype._getPreviewScaleLimits.call(this);return this.item.leading>0&&(null==this.canvas.maxLeading||isNaN(this.canvas.maxLeading)||(r.max=Math.min(null!==(t=r.max)&&void 0!==t?t:Number.MAX_VALUE,this.canvas.maxLeading/this.item.leading)),null==this.canvas.minLeading||isNaN(this.canvas.minLeading)||(r.min=Math.max(null!==(n=r.min)&&void 0!==n?n:Number.MIN_VALUE,this.canvas.minLeading/this.item.leading))),r},t.prototype._createTextWhizzFrame=function(){var e=this.item.baselineLocation.clone(),t=this.item.previewScale;WN(t,1)||e.scale(1/t,1/t);var n=new this._textWhizz.PointTextFrame;return n.point=e,n},t.typeName="NewPlainTextItemHandler",t}(b$),H$=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},z$=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},V$=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(z$(arguments[t]));return e},U$=function(){function e(e,t){var n=this;this._product=e,this._viewer=t,this._notifyContainerCollectionChanged=function(e){return n._containerCollectionChangedEvent.notify(e)},this._notifySurfaceCollectionChanged=function(){return n._surfaceCollectionChangedEvent.notify()},this._notifyItemHanderCollectionChanged=function(){return n._itemHanderCollectionChangedEvent.notify()},this._notifyLayerCollectionChanged=function(){return n._layerCollectionChangedEvent.notify()},this._notifyPrintAreaCollectionChanged=function(){return n._printAreaCollectionChangedEvent.notify()},this._notifyItemCollectionChanged=function(){return n._itemCollectionChangedEvent.notify()},this._notifyItemAdded=function(e){return n._itemAddedEvent.notify(e)},this._notifyItemRemoved=function(e){return n._itemRemovedEvent.notify(e)},this._notifyItemMoved=function(e){return n._itemMovedEvent.notify(e)},this._notifyUnderMockupCollectionChanged=function(){return n._underMockupContainerCollectionChangedEvent.notify()},this._notifyOverMockupCollectionChanged=function(){return n._overMockupContainerCollectionChangedEvent.notify()},this._notifyPreviewMockupCollectionChanged=function(){return n._previewMockupContainerCollectionChangedEvent.notify()},this._notifyPrintAreaPropertyChanged=function(e,t){return n._printAreaPropertyChangedEvent.notify(e,t)},this._notifyItemPropertyChanged=function(e,t){return n._itemPropertyChangedEvent.notify(e.item,t)},this._notifyItemChanged=function(e){return n._itemChangedEvent.notify(e.item)},this._notifyItemChanging=function(e){return n._itemChangingEvent.notify(e)},this._notifyDeleteToolbarButtonClick=function(e){return n._deleteToolbarButtonClickEvent.notify(e.item)},this._notifySelectToolbarButtonClick=function(e){return n._selectToolbarButtonClickEvent.notify(e.item)},this._notifyEditToolbarButtonClick=function(e){return n._editToolbarButtonClickEvent.notify(e.item)},this._notifySelectButtonClick=function(e){return n._selectButtonClickEvent.notify(e.item)},this._notifyViolationWarningButtonClick=function(e){return n._violationWarningButtonClickEvent.notify(e.item)},this._notifyDoubleClick=function(e,t){return n._doubleClickEvent.notify(e.item)},this._notifyShapePathLoaded=function(){return n._shapePathLoadedEvent.notify()},this._notifyEnteredEditMode=function(e){return n._enteredEditModeEvent.notify(e.item)},this._notifyExitedEditMode=function(e){return n._exitedEditModeEvent.notify(e.item)},this._notifyCurrentItemChanged=function(e){return n._currentItemChangedEvent.notify(null!=e?e.item:null)},this._notifySelectedItemChanged=function(){return n._selectedItemChangedEvent.notify(n._viewer.selectedItems)},this._notifyDragNDropDone=function(e){return n._dragNDropDoneEvent.notify(e)},this._notifyDragNDropStarting=function(e){return n._dragNDropStartingEvent.notify(e)},this._notifyDragNDropPerformed=function(e){return n._dragNDropPerformedEvent.notify(e)},this._notifyReady=function(){return n._readyEvent.notify()},this._notifyWorkspaceSizeChanged=function(){return n._workspaceSizeChangedEvent.notify()},this._notifyBeforeReplaceItemHandler=function(e){n._unsubscribeFromItemHandlerEvents(e),n._beforeReplaceItemHandlerEvent.notify(e)},this._notifyAfterReplaceItemHandler=function(e){n._subscribeToItemHandlerEvents(e),n._afterReplaceItemHandlerEvent.notify(e)},this._subscribeToProductEvents=function(e){var t,r;if(null!=e){e.surfaces.add_collectionChanged(n._notifySurfaceCollectionChanged),e.surfaces.add_collectionChanged(n._onSurfaceCollectionChanged);try{for(var i=H$(e.surfaces),o=i.next();!o.done;o=i.next())n._subscribeToSurfaceEvents(o.value)}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},this._unsubscribeFromProductEvents=function(e){var t,r;if(null!=e){e.surfaces.remove_collectionChanged(n._notifySurfaceCollectionChanged),e.surfaces.remove_collectionChanged(n._onSurfaceCollectionChanged);try{for(var i=H$(e.surfaces),o=i.next();!o.done;o=i.next())n._unsubscribeFromSurfaceEvents(o.value)}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},this._onSurfaceCollectionChanged=function(e){e.type!==fj.Move&&(e.type!==fj.Remove?e.type!==fj.Add||n._subscribeToSurfaceEvents(e.item):n._unsubscribeFromSurfaceEvents(e.item))},this._onLayerCollectionChanged=function(e){e.type!==fj.Move&&(e.type!==fj.Remove?e.type!==fj.Add||n._subscribeToLayerEvents(e.item):n._unsubscribeFromLayerEvents(e.item))},this._onItemHanderCollectionChanged=function(e){e.type!==fj.Move&&(e.type!==fj.Remove?e.type!==fj.Add||n._subscribeToItemHandlerEvents(e.item):n._unsubscribeFromItemHandlerEvents(e.item))},this._subscribeToSurfaceEvents=function(e){var t,r;if(null!=e){e.containers.add_collectionChanged(n._notifyContainerCollectionChanged),e.containers.add_collectionChanged(n._onContainerCollectionChanged),e.mockup.underContainers.add_collectionChanged(n._notifyUnderMockupCollectionChanged),e.mockup.underContainers.add_collectionChanged(n._onContainerCollectionChanged),e.mockup.overContainers.add_collectionChanged(n._notifyOverMockupCollectionChanged),e.mockup.overContainers.add_collectionChanged(n._onContainerCollectionChanged),e.previewMockups.add_collectionChanged(n._notifyPreviewMockupCollectionChanged);var i=V$(e.containers,e.mockup.underContainers,e.mockup.overContainers);try{for(var o=H$(i),s=o.next();!s.done;s=o.next())n._subscribeToContainerEvents(s.value)}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}e.printAreas.forEach(n._subscribeToPrintAreaEvents),e.printAreas.add_collectionChanged(n._notifyPrintAreaCollectionChanged),e.printAreas.add_collectionChanged(n._onPrintAreaCollectionChanged)}},this._unsubscribeFromSurfaceEvents=function(e){var t,r;if(null!=e){e.containers.remove_collectionChanged(n._notifyContainerCollectionChanged),e.containers.remove_collectionChanged(n._onContainerCollectionChanged),e.mockup.underContainers.remove_collectionChanged(n._notifyUnderMockupCollectionChanged),e.mockup.underContainers.remove_collectionChanged(n._onContainerCollectionChanged),e.mockup.overContainers.remove_collectionChanged(n._notifyOverMockupCollectionChanged),e.mockup.overContainers.remove_collectionChanged(n._onContainerCollectionChanged),e.previewMockups.remove_collectionChanged(n._notifyPreviewMockupCollectionChanged);var i=V$(e.containers,e.mockup.underContainers,e.mockup.overContainers);try{for(var o=H$(i),s=o.next();!s.done;s=o.next())n._unsubscribeFromContainerEvents(s.value)}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}e.printAreas.forEach(n._unsubscribeFromPrintAreaEvents),e.printAreas.remove_collectionChanged(n._notifyPrintAreaCollectionChanged),e.printAreas.remove_collectionChanged(n._onPrintAreaCollectionChanged)}},this._onContainerCollectionChanged=function(e){e.type!==fj.Move&&(e.type!==fj.Remove?e.type!==fj.Add||n._subscribeToContainerEvents(e.item):n._unsubscribeFromContainerEvents(e.item))},this._subscribeToContainerEvents=function(e){null!=e&&(e.items.add_collectionChanged(n._notifyItemCollectionChanged),e.items.add_collectionChanged(n._onItemCollectionChanged),e.items.add_itemAdded(n._notifyItemAdded),e.items.add_itemRemoved(n._notifyItemRemoved),e.items.add_itemMoved(n._notifyItemMoved),e.items.forEach(n._subscribeToItemEvents))},this._unsubscribeFromContainerEvents=function(e){null!=e&&(e.items.remove_collectionChanged(n._notifyItemCollectionChanged),e.items.remove_collectionChanged(n._onItemCollectionChanged),e.items.remove_itemAdded(n._notifyItemAdded),e.items.remove_itemRemoved(n._notifyItemRemoved),e.items.remove_itemMoved(n._notifyItemMoved),e.items.forEach(n._unsubscribeFromItemEvents))},this._onPrintAreaCollectionChanged=function(e){e.type!==fj.Move&&(e.type!==fj.Remove?e.type!==fj.Add||n._subscribeToPrintAreaEvents(e.item):n._unsubscribeFromPrintAreaEvents(e.item))},this._subscribeToPrintAreaEvents=function(e){null!=e&&e.addPropertyChanged(n._notifyPrintAreaPropertyChanged)},this._unsubscribeFromPrintAreaEvents=function(e){null!=e&&e.removePropertyChanged(n._notifyPrintAreaPropertyChanged)},this._onItemCollectionChanged=function(e){e.type!==fj.Move&&(e.type!==fj.Remove?e.type!==fj.Add||n._subscribeToItemEvents(e.item):n._unsubscribeFromItemEvents(e.item))},this._subscribeToItemEvents=function(e){null!=e&&e instanceof Cz&&(e.items.forEach(function(e){return n._subscribeToItemEvents(e)}),e.items.add_itemAdded(n._notifyItemAdded),e.items.add_itemRemoved(n._notifyItemRemoved),e.items.add_collectionChanged(n._onItemCollectionChanged))},this._subscribeToItemHandlerEvents=function(e){var t,r;if(e.addItemPropertyChanged(n._notifyItemPropertyChanged),e.addChanged(n._notifyItemChanged),e.addChanging(n._notifyItemChanging),e.addDeleteToolbarButtonClick(n._notifyDeleteToolbarButtonClick),e.addSelectToolbarButtonClick(n._notifySelectToolbarButtonClick),e.addEditToolbarButtonClick(n._notifyEditToolbarButtonClick),e.addDoubleClick(n._notifyDoubleClick),e.addViolationWarningButtonClick(n._notifyViolationWarningButtonClick),e instanceof YW&&(e.addSelectButtonClick(n._notifySelectButtonClick),null!=e.content&&e.content.addItemPropertyChanged(n._notifyItemPropertyChanged)),e instanceof JU&&e.item.getPathLoadedEvent().add(n._notifyShapePathLoaded),e instanceof b$&&(e.enteredEditModeEvent.add(n._notifyEnteredEditMode),e.exitedEditModeEvent.add(n._notifyExitedEditMode)),e instanceof eX)try{for(var i=H$(e.getNestedItemHandlers()),o=i.next();!o.done;o=i.next()){var s=o.value;s instanceof UU&&n._subscribeToItemHandlerEvents(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},this._unsubscribeFromItemEvents=function(e){null!=e&&e instanceof Cz&&null!=e.items&&(e.items.forEach(function(e){return n._unsubscribeFromItemEvents(e)}),e.items.remove_itemAdded(n._notifyItemAdded),e.items.remove_itemRemoved(n._notifyItemRemoved),e.items.remove_collectionChanged(n._onItemCollectionChanged))},this._unsubscribeFromItemHandlerEvents=function(e){var t,r;if(e.removeItemPropertyChanged(n._notifyItemPropertyChanged),e.removeChanged(n._notifyItemChanged),e.removeChanging(n._notifyItemChanging),e.removeDeleteToolbarButtonClick(n._notifyDeleteToolbarButtonClick),e.removeSelectToolbarButtonClick(n._notifySelectToolbarButtonClick),e.removeEditToolbarButtonClick(n._notifyEditToolbarButtonClick),e.removeDoubleClick(n._notifyDoubleClick),e.removeViolationWarningButtonClick(n._notifyViolationWarningButtonClick),e instanceof YW&&(e.removeSelectButtonClick(n._notifySelectButtonClick),null!=e.content&&e.content.removeItemPropertyChanged(n._notifyItemPropertyChanged)),e instanceof JU&&e.item.getPathLoadedEvent().remove(n._notifyShapePathLoaded),e instanceof b$&&(e.enteredEditModeEvent.remove(n._notifyEnteredEditMode),e.exitedEditModeEvent.remove(n._notifyExitedEditMode)),e instanceof eX)try{for(var i=H$(e.getNestedItemHandlers()),o=i.next();!o.done;o=i.next()){var s=o.value;s instanceof UU&&n._unsubscribeFromItemHandlerEvents(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},this._subscribeOnCanvasEvents=function(e){var t,r;if(null!=e){e.add_currentItemHandlerChanged(n._notifyCurrentItemChanged),e.add_selectedItemHandlerChanged(n._notifySelectedItemChanged),e.add_dragNDropDone(n._notifyDragNDropDone),e.add_dragNDropPerformed(n._notifyDragNDropPerformed),e.add_dragNDropStarting(n._notifyDragNDropStarting),e.add_ready(n._notifyReady),e.add_workspaceSizeChanged(n._notifyWorkspaceSizeChanged),e.add_beforeReplaceItemHandler(n._notifyBeforeReplaceItemHandler),e.add_afterReplaceItemHandler(n._notifyAfterReplaceItemHandler),e.layers.add_collectionChanged(n._notifyLayerCollectionChanged),e.layers.add_collectionChanged(n._onLayerCollectionChanged);try{for(var i=H$(e.layers),o=i.next();!o.done;o=i.next())n._subscribeToLayerEvents(o.value)}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},this._unsubscribeFromCanvasEvents=function(e){var t,r;if(null!=e){e.remove_currentItemHandlerChanged(n._notifyCurrentItemChanged),e.remove_selectedItemHandlerChanged(n._notifySelectedItemChanged),e.remove_dragNDropDone(n._notifyDragNDropDone),e.remove_dragNDropPerformed(n._notifyDragNDropPerformed),e.remove_dragNDropStarting(n._notifyDragNDropStarting),e.remove_ready(n._notifyReady),e.remove_workspaceSizeChanged(n._notifyWorkspaceSizeChanged),e.remove_beforeReplaceItemHandler(n._notifyBeforeReplaceItemHandler),e.remove_afterReplaceItemHandler(n._notifyAfterReplaceItemHandler),e.layers.remove_collectionChanged(n._notifyLayerCollectionChanged),e.layers.remove_collectionChanged(n._onLayerCollectionChanged);try{for(var i=H$(e.layers),o=i.next();!o.done;o=i.next())n._unsubscribeFromLayerEvents(o.value)}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},this._subscribeToLayerEvents=function(e){var t,r;if(null!=e){e.itemHandlers.add_collectionChanged(n._notifyItemHanderCollectionChanged),e.itemHandlers.add_collectionChanged(n._onItemHanderCollectionChanged);try{for(var i=H$(e.itemHandlers.cast()),o=i.next();!o.done;o=i.next())n._subscribeToItemHandlerEvents(o.value)}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},this._unsubscribeFromLayerEvents=function(e){var t,r;if(null!=e){e.itemHandlers.remove_collectionChanged(n._notifyItemHanderCollectionChanged),e.itemHandlers.remove_collectionChanged(n._onItemHanderCollectionChanged);try{for(var i=H$(e.itemHandlers.cast()),o=i.next();!o.done;o=i.next())n._unsubscribeFromItemHandlerEvents(o.value)}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},this._itemChangedEvent=new EL,this._itemChangingEvent=new EL,this._itemPropertyChangedEvent=new PL,this._changeSurfaceEvent=new EL,this._itemAddedEvent=new EL,this._itemRemovedEvent=new EL,this._itemMovedEvent=new EL,this._imageContentChangedEvent=new EL,this._snapshotLoadedEvent=new EL,this._surfaceCollectionChangedEvent=new EL,this._layerCollectionChangedEvent=new EL,this._itemHanderCollectionChangedEvent=new EL,this._containerCollectionChangedEvent=new EL,this._itemCollectionChangedEvent=new EL,this._underMockupContainerCollectionChangedEvent=new EL,this._overMockupContainerCollectionChangedEvent=new EL,this._previewMockupContainerCollectionChangedEvent=new EL,this._deleteToolbarButtonClickEvent=new EL,this._selectToolbarButtonClickEvent=new EL,this._enteredEditModeEvent=new EL,this._exitedEditModeEvent=new EL,this._editToolbarButtonClickEvent=new EL,this._selectButtonClickEvent=new EL,this._violationWarningButtonClickEvent=new EL,this._doubleClickEvent=new EL,this._shapePathLoadedEvent=new EL,this._currentItemChangedEvent=new EL,this._selectedItemChangedEvent=new EL,this._dragNDropDoneEvent=new EL,this._dragNDropStartingEvent=new EL,this._dragNDropPerformedEvent=new EL,this._readyEvent=new EL,this._workspaceSizeChangedEvent=new EL,this._productThemeChangedEvent=new EL,this._userEditContainerChangedEvent=new EL,this._mouseBehaviorCreateFinishedEvent=new EL,this._printAreaCollectionChangedEvent=new EL,this._printAreaPropertyChangedEvent=new PL,this._selectPixelFinishedEvent=new EL,this._beforeReplaceItemHandlerEvent=new EL,this._afterReplaceItemHandlerEvent=new EL,this._textWhizzReady=new EL,this._imageDpiChangedEvent=new EL,this._subscribeOnCanvasEvents(this._viewer.canvas),this._subscribeToProductEvents(e)}return e.prototype.setProduct=function(e){e!=this._product&&(this._unsubscribeFromProductEvents(this._product),this._product=e,this._subscribeToProductEvents(this._product))},Object.defineProperty(e.prototype,"itemChangedEvent",{get:function(){return this._itemChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addItemChanged=function(e){this._itemChangedEvent.add(e)},e.prototype.removeItemChanged=function(e){this._itemChangedEvent.remove(e)},Object.defineProperty(e.prototype,"itemChangingEvent",{get:function(){return this._itemChangingEvent},enumerable:!0,configurable:!0}),e.prototype.addItemChanging=function(e){this._itemChangingEvent.add(e)},e.prototype.removeItemChanging=function(e){this._itemChangingEvent.remove(e)},Object.defineProperty(e.prototype,"itemPropertyChangedEvent",{get:function(){return this._itemPropertyChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addItemPropertyChanged=function(e){this._itemPropertyChangedEvent.add(e)},e.prototype.removeItemPropertyChanged=function(e){this._itemPropertyChangedEvent.remove(e)},Object.defineProperty(e.prototype,"surfaceChangedEvent",{get:function(){return this._changeSurfaceEvent},enumerable:!0,configurable:!0}),e.prototype.addSurfaceChanged=function(e){this._changeSurfaceEvent.add(e)},e.prototype.removeSurfaceChanged=function(e){this._changeSurfaceEvent.remove(e)},Object.defineProperty(e.prototype,"itemAddedEvent",{get:function(){return this._itemAddedEvent},enumerable:!0,configurable:!0}),e.prototype.addItemAdded=function(e){this._itemAddedEvent.add(e)},e.prototype.removeItemAdded=function(e){this._itemAddedEvent.remove(e)},Object.defineProperty(e.prototype,"itemRemovedEvent",{get:function(){return this._itemRemovedEvent},enumerable:!0,configurable:!0}),e.prototype.addItemRemoved=function(e){this._itemRemovedEvent.add(e)},e.prototype.removeItemRemoved=function(e){this._itemRemovedEvent.remove(e)},Object.defineProperty(e.prototype,"itemMovedEvent",{get:function(){return this._itemMovedEvent},enumerable:!0,configurable:!0}),e.prototype.addItemMoved=function(e){this._itemMovedEvent.add(e)},e.prototype.removeItemMoved=function(e){this._itemMovedEvent.remove(e)},Object.defineProperty(e.prototype,"imageContentChangedEvent",{get:function(){return this._imageContentChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addImageContentChanged=function(e){this._imageContentChangedEvent.add(e)},e.prototype.removeImageContentChanged=function(e){this._imageContentChangedEvent.remove(e)},Object.defineProperty(e.prototype,"snapshotLoadedEvent",{get:function(){return this._snapshotLoadedEvent},enumerable:!0,configurable:!0}),e.prototype.addSnapshotLoadedEvent=function(e){this._snapshotLoadedEvent.add(e)},e.prototype.removeSnapshotLoadedEvent=function(e){this._snapshotLoadedEvent.remove(e)},Object.defineProperty(e.prototype,"surfaceCollectionChangedEvent",{get:function(){return this._surfaceCollectionChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addSurfaceCollectionChanged=function(e){this._surfaceCollectionChangedEvent.add(e)},e.prototype.removeSurfaceCollectionChanged=function(e){this._surfaceCollectionChangedEvent.remove(e)},Object.defineProperty(e.prototype,"layerCollectionChangedEvent",{get:function(){return this._layerCollectionChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addLayerCollectionChanged=function(e){this._layerCollectionChangedEvent.add(e)},e.prototype.removeLayerCollectionChanged=function(e){this._layerCollectionChangedEvent.remove(e)},Object.defineProperty(e.prototype,"itemHanderCollectionChangedEvent",{get:function(){return this._itemHanderCollectionChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addIItemHandelrCollectionChanged=function(e){this._itemHanderCollectionChangedEvent.add(e)},e.prototype.removeItemHandlerCollectionChanged=function(e){this._itemHanderCollectionChangedEvent.remove(e)},Object.defineProperty(e.prototype,"containerCollectionChangedEvent",{get:function(){return this._containerCollectionChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addContainerCollectionChanged=function(e){this._containerCollectionChangedEvent.add(e)},e.prototype.removeContainerCollectionChanged=function(e){this._containerCollectionChangedEvent.remove(e)},Object.defineProperty(e.prototype,"itemCollectionChangedEvent",{get:function(){return this._itemCollectionChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addItemCollectionChanged=function(e){this._itemCollectionChangedEvent.add(e)},e.prototype.removeItemCollectionChanged=function(e){this._itemCollectionChangedEvent.remove(e)},Object.defineProperty(e.prototype,"underMockupContainerCollectionChangedEvent",{get:function(){return this._underMockupContainerCollectionChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addUnderMockupContainerCollectionChanged=function(e){this._underMockupContainerCollectionChangedEvent.add(e)},e.prototype.removeUnderMockupContainerCollectionChanged=function(e){this._underMockupContainerCollectionChangedEvent.remove(e)},Object.defineProperty(e.prototype,"overMockupContainerCollectionChangedEvent",{get:function(){return this._overMockupContainerCollectionChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addOverMockupContainerCollectionChanged=function(e){this._overMockupContainerCollectionChangedEvent.add(e)},e.prototype.removeOverMockupContainerCollectionChanged=function(e){this._overMockupContainerCollectionChangedEvent.remove(e)},Object.defineProperty(e.prototype,"previewMockupContainerCollectionChangedEvent",{get:function(){return this._previewMockupContainerCollectionChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addPreviewMockupContainerCollectionChanged=function(e){this._previewMockupContainerCollectionChangedEvent.add(e)},e.prototype.removePreviewMockupContainerCollectionChanged=function(e){this._previewMockupContainerCollectionChangedEvent.remove(e)},Object.defineProperty(e.prototype,"deleteToolbarButtonClickEvent",{get:function(){return this._deleteToolbarButtonClickEvent},enumerable:!0,configurable:!0}),e.prototype.addDeleteToolbarButtonClick=function(e){this._deleteToolbarButtonClickEvent.add(e)},e.prototype.removeDeleteToolbarButtonClick=function(e){this._deleteToolbarButtonClickEvent.remove(e)},Object.defineProperty(e.prototype,"selectToolbarButtonClickEvent",{get:function(){return this._selectToolbarButtonClickEvent},enumerable:!0,configurable:!0}),e.prototype.addSelectToolbarButtonClick=function(e){this._selectToolbarButtonClickEvent.add(e)},e.prototype.removeSelectToolbarButtonClick=function(e){this._selectToolbarButtonClickEvent.remove(e)},Object.defineProperty(e.prototype,"enteredEditModeEvent",{get:function(){return this._enteredEditModeEvent},enumerable:!0,configurable:!0}),e.prototype.addEnteredEditMode=function(e){this._enteredEditModeEvent.add(e)},e.prototype.removeEnteredEditMode=function(e){this._enteredEditModeEvent.remove(e)},Object.defineProperty(e.prototype,"exitedEditModeEvent",{get:function(){return this._exitedEditModeEvent},enumerable:!0,configurable:!0}),e.prototype.addExitedEditMode=function(e){this._exitedEditModeEvent.add(e)},e.prototype.removeExitedEditMode=function(e){this._exitedEditModeEvent.remove(e)},Object.defineProperty(e.prototype,"editToolbarButtonClickEvent",{get:function(){return this._editToolbarButtonClickEvent},enumerable:!0,configurable:!0}),e.prototype.addEditToolbarButtonClick=function(e){this._editToolbarButtonClickEvent.add(e)},e.prototype.removeEditToolbarButtonClick=function(e){this._editToolbarButtonClickEvent.remove(e)},Object.defineProperty(e.prototype,"selectButtonClickEvent",{get:function(){return this._selectButtonClickEvent},enumerable:!0,configurable:!0}),e.prototype.addSelectButtonClick=function(e){this._selectButtonClickEvent.add(e)},e.prototype.removeSelectButtonClick=function(e){this._selectButtonClickEvent.remove(e)},Object.defineProperty(e.prototype,"violationWarningButtonClickEvent",{get:function(){return this._violationWarningButtonClickEvent},enumerable:!0,configurable:!0}),e.prototype.addViolationWarningButtonClick=function(e){this._violationWarningButtonClickEvent.add(e)},e.prototype.removeViolationWarningButtonClick=function(e){this._violationWarningButtonClickEvent.remove(e)},Object.defineProperty(e.prototype,"doubleClickEvent",{get:function(){return this._doubleClickEvent},enumerable:!0,configurable:!0}),e.prototype.addDoubleClick=function(e){this._doubleClickEvent.add(e)},e.prototype.removeDoubleClick=function(e){this._doubleClickEvent.remove(e)},Object.defineProperty(e.prototype,"shapePathLoadedEvent",{get:function(){return this._shapePathLoadedEvent},enumerable:!0,configurable:!0}),e.prototype.addShapePathLoaded=function(e){this._shapePathLoadedEvent.add(e)},e.prototype.removeShapePathLoaded=function(e){this._shapePathLoadedEvent.remove(e)},Object.defineProperty(e.prototype,"currentItemChangedEvent",{get:function(){return this._currentItemChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addCurrentItemChanged=function(e){this._currentItemChangedEvent.add(e)},e.prototype.removeCurrentItemChanged=function(e){this._currentItemChangedEvent.remove(e)},Object.defineProperty(e.prototype,"selectedItemChangedEvent",{get:function(){return this._selectedItemChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addSelectedItemChanged=function(e){this._selectedItemChangedEvent.add(e)},e.prototype.removeSelectedItemChanged=function(e){this._selectedItemChangedEvent.remove(e)},Object.defineProperty(e.prototype,"dragNDropDoneEvent",{get:function(){return this._dragNDropDoneEvent},enumerable:!0,configurable:!0}),e.prototype.addDragNDropDone=function(e){this._dragNDropDoneEvent.add(e)},e.prototype.removeDragNDropDone=function(e){this._dragNDropDoneEvent.remove(e)},Object.defineProperty(e.prototype,"dragNDropStartingEvent",{get:function(){return this._dragNDropStartingEvent},enumerable:!0,configurable:!0}),e.prototype.addDragNDropStarting=function(e){this._dragNDropStartingEvent.add(e)},e.prototype.removeDragNDropStarting=function(e){this._dragNDropStartingEvent.remove(e)},Object.defineProperty(e.prototype,"dragNDropPerformedEvent",{get:function(){return this._dragNDropPerformedEvent},enumerable:!0,configurable:!0}),e.prototype.addDragNDropPerformed=function(e){this._dragNDropPerformedEvent.add(e)},e.prototype.removeDragNDropPerformed=function(e){this._dragNDropPerformedEvent.remove(e)},Object.defineProperty(e.prototype,"readyEvent",{get:function(){return this._readyEvent},enumerable:!0,configurable:!0}),e.prototype.addReady=function(e){this._readyEvent.add(e)},e.prototype.removeReady=function(e){this._readyEvent.remove(e)},Object.defineProperty(e.prototype,"workspaceSizeChangedEvent",{get:function(){return this._workspaceSizeChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addWorkspaceSizeChanged=function(e){this._workspaceSizeChangedEvent.add(e)},e.prototype.removeWorkspaceSizeChanged=function(e){this._workspaceSizeChangedEvent.remove(e)},Object.defineProperty(e.prototype,"productThemeChangedEvent",{get:function(){return this._productThemeChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addProductThemeChanged=function(e){this._productThemeChangedEvent.add(e)},e.prototype.removeProductThemeChanged=function(e){this._productThemeChangedEvent.remove(e)},Object.defineProperty(e.prototype,"userEditContainerChangedEvent",{get:function(){return this._userEditContainerChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addUserEditContainerChanged=function(e){this._userEditContainerChangedEvent.add(e)},e.prototype.removeUserEditContainerChanged=function(e){this._userEditContainerChangedEvent.remove(e)},Object.defineProperty(e.prototype,"mouseBehaviorCreateFinishedEvent",{get:function(){return this._mouseBehaviorCreateFinishedEvent},enumerable:!0,configurable:!0}),e.prototype.addMouseBehaviorCreateFinished=function(e){this._mouseBehaviorCreateFinishedEvent.add(e)},e.prototype.removeMouseBehaviorCreateFinished=function(e){this._mouseBehaviorCreateFinishedEvent.remove(e)},Object.defineProperty(e.prototype,"printAreaCollectionChangedEvent",{get:function(){return this._printAreaCollectionChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addPrintAreaCollectionChanged=function(e){this._printAreaCollectionChangedEvent.add(e)},e.prototype.removePrintAreaCollectionChanged=function(e){this._printAreaCollectionChangedEvent.remove(e)},Object.defineProperty(e.prototype,"printAreaPropertyChangedEvent",{get:function(){return this._printAreaPropertyChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addPrintAreaPropertyChanged=function(e){this._printAreaPropertyChangedEvent.add(e)},e.prototype.removePrintAreaPropertyChanged=function(e){this._printAreaPropertyChangedEvent.remove(e)},Object.defineProperty(e.prototype,"selectPixelFinished",{get:function(){return this._selectPixelFinishedEvent},enumerable:!0,configurable:!0}),e.prototype.addMouseSelectPixelFinished=function(e){this._selectPixelFinishedEvent.add(e)},e.prototype.removeMouseSelectPixelFinished=function(e){this._selectPixelFinishedEvent.remove(e)},Object.defineProperty(e.prototype,"beforeReplaceItemHandlerEvent",{get:function(){return this._beforeReplaceItemHandlerEvent},enumerable:!0,configurable:!0}),e.prototype.addBeforeReplaceItemHandlerEvent=function(e){this._beforeReplaceItemHandlerEvent.add(e)},e.prototype.removeBeforeReplaceItemHandlerEvent=function(e){this._beforeReplaceItemHandlerEvent.remove(e)},Object.defineProperty(e.prototype,"afterReplaceItemHandlerEvent",{get:function(){return this._afterReplaceItemHandlerEvent},enumerable:!0,configurable:!0}),e.prototype.addAfterReplaceItemHandlerEvent=function(e){this._afterReplaceItemHandlerEvent.add(e)},e.prototype.removeAfterReplaceItemHandlerEvent=function(e){this._afterReplaceItemHandlerEvent.remove(e)},Object.defineProperty(e.prototype,"textWhizzReadyEvent",{get:function(){return this._textWhizzReady},enumerable:!0,configurable:!0}),e.prototype.addTextWhizzReady=function(e){this._textWhizzReady.add(e)},e.prototype.removeTextWhizzReady=function(e){this._textWhizzReady.remove(e)},Object.defineProperty(e.prototype,"imageDpiChangedEvent",{get:function(){return this._imageDpiChangedEvent},enumerable:!0,configurable:!0}),e.prototype.addImageDpiChanged=function(e){this._imageDpiChangedEvent.add(e)},e.prototype.removeImageDpiChanged=function(e){this._imageDpiChangedEvent.remove(e)},e.prototype.dispose=function(){this._unsubscribeFromCanvasEvents(this._viewer.canvas),this._unsubscribeFromProductEvents(this._product)},e}();!function(e){e[e.always=0]="always",e[e.auto=1]="auto"}(i$||(i$={})),function(e){e[e.centerBottom=5]="centerBottom",e[e.centerCenter=4]="centerCenter",e[e.centerTop=3]="centerTop",e[e.leftBottom=2]="leftBottom",e[e.leftCenter=1]="leftCenter",e[e.leftTop=0]="leftTop",e[e.rightBottom=8]="rightBottom",e[e.rightCenter=7]="rightCenter",e[e.rightTop=6]="rightTop"}(o$||(o$={})),function(e){e[e.none=0]="none",e[e.bestFit=1]="bestFit",e[e.bestFitShrinkOnly=2]="bestFitShrinkOnly",e[e.fitToWidth=3]="fitToWidth",e[e.fitToHeight=4]="fitToHeight",e[e.fitToWidthShrinkOnly=6]="fitToWidthShrinkOnly",e[e.fitToHeightShrinkOnly=7]="fitToHeightShrinkOnly"}(s$||(s$={})),function(e){e[e.low=0]="low",e[e.medium=1]="medium",e[e.high=2]="high",e[e.shrinkHighStretchLow=3]="shrinkHighStretchLow"}(a$||(a$={})),function(e){e[e.ready=0]="ready",e[e.refresh=1]="refresh",e[e.busy=2]="busy"}(l$||(l$={}));var W$,X$,G$=function(){function e(e){this._v=e}return Object.defineProperty(e.prototype,"postBackOnWorkspaceChanged",{get:function(){return this._v._clientSideOptions$postBackOnWorkspaceChanged},set:function(e){this._v._clientSideOptions$postBackOnWorkspaceChanged=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"postBackOnWorkspaceClick",{get:function(){return this._v._clientSideOptions$postBackOnWorkspaceClick},set:function(e){this._v._clientSideOptions$postBackOnWorkspaceClick=e},enumerable:!0,configurable:!0}),e}(),q$=n("vLAJ"),$$={start:function(e){var t=e.checkFunction,n=e.onChange;return setInterval(function(){t()&&n()},500)},stop:function(e){clearInterval(e)}},Y$=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},K$=function(e){var t=this;function n(e){var n;t.pageX=(n=e.touches?e.touches.length>0?e.touches[0]:e.changedTouches[0]:e.pointers.length>0?e.pointers[0]:e.changedPointers[0]).pageX,t.pageY=n.pageY,t.clientX=n.clientX,t.clientY=n.clientY}t.originalEvent=e,t.type=e.type,t.x=e.x,t.y=e.y,"string"==typeof e.type&&-1!==e.type.indexOf("touch")?n(e):null!=e.gesture?n(e.gesture):e&&function(e){t.pageX=e.pageX,t.pageY=e.pageY,t.clientX=e.clientX,t.clientY=e.clientY}(e)},Q$=function(){},Z$=function(){},J$=function(){function e(e){void 0===e&&(e=null),this._zone=e,this._contentElements=[],this._rulerBorderWidth=1,this._rulerDivision=5,this._contentCtxLocation=null,this._ignoreDocumentClickOnce=!1,this._documentClickEvent=new PL,this._clickEvent=new PL,this._mouseDownEvent=new PL,this._mouseMoveEvent=new PL,this._mouseUpEvent=new PL,this._workspaceDoubleClickEvent=new PL,this._workspaceClickEvent=new PL,this._workspaceChangedEvent=new PL,this._workspaceMouseDownEvent=new PL,this._workspaceMouseUpEvent=new PL,this._workspaceMouseMoveEvent=new PL,this._statusChangedEvent=new PL,this._pinchStartEvent=new PL,this._pinchStopEvent=new PL,this._scrolledEvent=new PL,this._onresizeEvent=new PL,this._zoomedEvent=new PL,this._invokingCallbackRequestEvent=new PL,this._intervalCheckLoop=$$,this._contentAngle=0,this._backColor="#FFFFFF",this._maxZoom=16,this._minZoom=.05,this._screenXDpi=72,this._screenYDpi=72,this._scrollBarsStyle=i$.auto,this._scrollBarWidth=17,this._scrollingPosition=new MN(0,0),this._viewportAlignment=o$.leftTop,this._zoom=1,this._zoomMode=s$.none,this._zoomQuality=a$.shrinkHighStretchLow,this._bestFitWhiteSpacePc=0,this._stateFieldId="",this._needUpdateViewport=!1,this._msTouchActionInitialValue="",this._toolTip="",this._accessKey="",this._tabIndex="",this._callbackArgs="",this._callbackContext=0,this._status=l$.ready,this._exceptionDescription="",this._returnValue="",this._clientSideOptions=new G$(this),this._delayedRefreshTimeout=1e3,this._refreshTimer=null,this._contentElements=[],this._needToRefresh=!1,this._rulerEnabled=!1,this._rulerWidth=13,this._rulerScale=1,this._rulerOffsetX=0,this._rulerOffsetY=0,this._rulersOnScrollDelegate=null,this._rulersOnZoomDelegate=null,this._activeAjax=0,this._pinchZoomEnabled=!0,this._holderBounds=null,this._contentCtxDimension={},this._viewportLocation={},this._holderElement=null,this._touchFlags=new Z$,this._rulers={},this._bodyCursor=null}return Object.defineProperty(e.prototype,"element",{get:function(){return this._viewerElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._viewerElement.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentAngle",{get:function(){return this._contentAngle},set:function(e){if(null!=e&&e!==this._contentAngle){this._contentAngle=BN(e);var t="(0, 0)";90===this._contentAngle?t="(0px, -100%)":180===this._contentAngle?t="(-100%, -100%)":270===this._contentAngle&&(t="(-100%, 0px)"),this._contentCtx.style.transform="rotate("+this._contentAngle+"deg) translate"+t,this._contentCtx.style.transformOrigin="left top",this._updateViewport(),this._canvas.setZoom(this.zoom,void 0,{force:!0}),this._canvas.updateSelection(),this._canvas.redraw()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWidth",{get:function(){return this._holderBounds.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._holderBounds.offsetWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this._holderBounds.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._holderBounds.offsetHeight},enumerable:!0,configurable:!0}),e.prototype.notifySizeChanged=function(){this._onResize(null,!1)},e.prototype._renderContent=function(e){return e},Object.defineProperty(e.prototype,"hasContent",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._render=function(){var e="";e+='<div id="cvContent" style="position:absolute; overflow: hidden; box-sizing: content-box; -webkit-box-sizing: content-box; -moz-box-sizing: content-box;',e+=this.hasContent?"width:"+this.contentWidth+"px;height:"+this.contentHeight+"px;":"display:none;";var t=this._getViewportLocation();return e+="left:"+t.x+"px;top:"+t.y+"px",e=this._renderContent(e+='">'),(e+="</div>")+"</div>"},e.prototype._clearElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},e.prototype._rulersOnScroll=function(){this._touchFlags.pinchStarted||this._updateRulersStyle()},e.prototype._rulersOnZoom=function(){this._touchFlags.pinchStarted||(this._drawRulers(),this._updateRulersStyle())},e.prototype._rulersOnMouseMove=function(e,t){if(this.rulerEnabled){var n=this._rulers.topSlideBar,r=this._rulers.leftSlideBar;if(BL.IsTouchDevice()){if(!BL.IsTouchIE())return;if(t.originalEvent.pointerType!=t.originalEvent.MSPOINTER_TYPE_MOUSE)return n.style.left="0px",void(r.style.top="0px")}var i=this._getViewportLocation(),o=this._contentCtxLocation,s=-1,a=-1;isNaN(t.pageX)||isNaN(t.pageY)?t.originalEvent&&(t.originalEvent.touches?(s=t.originalEvent.touches[0].pageX,a=t.originalEvent.touches[0].pageY):(s=t.originalEvent.pageX,a=t.originalEvent.pageY)):(s=t.pageX,a=t.pageY);var l=i.y+a-o.top-this._scrollingPosition.y;n.style.left=i.x+s-o.left-this._scrollingPosition.x+"px",r.style.top=l+"px"}},e.prototype._initializeRulers=function(){var e=this.element.parentNode,t=e.ownerDocument,n="z-index: 2; -webkit-transform: translate3d(0px, 0px, 0px); -moz-transform: translate3d(0px, 0px, 0px)",r=t.createElement("div");r.setAttribute("style",n);var i=t.createElement("div"),o=t.createElement("div");o.setAttribute("style",n);var s=t.createElement("div"),a=t.createElement("div");a.style.zIndex="2";var l=t.createElement("div"),c=t.createElement("div");this._rulers.topRuller=r,this._rulers.leftRuller=o,this._rulers.fullTopRuller=i,this._rulers.fullLeftRuller=s,this._rulers.whiteRect=a,this._rulers.topSlideBar=l,this._rulers.leftSlideBar=c;var u=this.element.id;r.id=u+"_TopRuler",i.id=u+"_FullTopRuler",o.id=u+"_LeftRuler",s.id=u+"_FullLeftRuler",a.id=u+"_WhiteRect",l.id=u+"_TopSlideBar",c.id=u+"_LeftSlideBar",i=r.appendChild(i),s=o.appendChild(s),l=r.appendChild(l),c=o.appendChild(c),r=e.appendChild(r),o=e.appendChild(o),a=e.appendChild(a),r.style.position=i.style.position=o.style.position=s.style.position=a.style.position=l.style.position=c.style.position="absolute",c.style.width=l.style.height=this.rulerWidth+"px",c.style.height=l.style.width="1px",c.style.backgroundColor=l.style.backgroundColor="#ff0000",c.style.overflow=l.style.overflow="hidden",c.style.webkitTransform=l.style.webkitTransform="translate3d(0, 0, 0)",r.style.overflow=o.style.overflow=a.style.overflow="hidden",r.style.visibility=o.style.visibility=a.style.visibility="hidden",a.style.backgroundColor="#909090",e.style.position="relative",this._drawRulers(),this._updateRulersStyle(),this._rulersOnScrollDelegate||(this._rulersOnScrollDelegate=this._rulersOnScroll.bind(this),this.add_scrolled(this._rulersOnScrollDelegate)),this._rulersOnZoomDelegate||(this._rulersOnZoomDelegate=this._rulersOnZoom.bind(this),this.add_zoomed(this._rulersOnZoomDelegate)),this.add_mouseMove(rU.createBoundedWrapper(this,this._rulersOnMouseMove))},e.prototype._disposeRulers=function(){this._rulersOnScrollDelegate&&(this.remove_scrolled(this._rulersOnScrollDelegate),this._rulersOnScrollDelegate=null),this._rulersOnZoomDelegate&&(this.remove_zoomed(this._rulersOnZoomDelegate),this._rulersOnZoomDelegate=null)},e.prototype._updateRulersStyle=function(){var e=this._rulers.whiteRect,t=this.width,n=this.height,r=this.contentWidth,i=this.contentHeight,o=this.scrollBarWidth,s=this._rulers.leftRuller.style,a=this._rulers.topRuller.style,l=this._rulers.fullTopRuller.style,c=this._rulers.fullLeftRuller.style,u=e.style;if(this._rulerEnabled){s.visibility=a.visibility=u.visibility="inherit",s.backgroundColor=a.backgroundColor="#ffffff",s.borderRight=a.borderBottom=this._rulerBorderWidth+"px solid black";var h=this.scrollBarsStyle==i$.always,d=this.scrollBarsStyle==i$.auto,p=h||d&&i>n-this.rulerWidth,f=h||d&&r>t-this.rulerWidth;p=p||f&&d&&i>n-this.rulerWidth-o;var m=(f=f||p&&d&&r>t-this.rulerWidth-o)?n-o:n;a.width=(p?t-o:t)+"px",s.height=m+"px",l.height=a.height=e.style.height=this._rulerWidth+"px",c.width=s.width=e.style.width=this._rulerWidth+"px",a.top=s.top=a.left=s.left=e.style.top=e.style.left="0px";var g=this.scrollingPosition;l.left=-g.x+"px",c.top=-g.y+"px"}else a.width=a.height=s.width=s.height=a.borderWidth=s.borderWidth=u.width=u.height="0px",s.visibility=a.visibility=u.visibility="hidden"},e.prototype._setRulersConfig=function(e){if(null==e?void 0:e.enabled){var t=mL(e);this._rulerEnabled=!0,this._rulerOffsetX=-1*e.origin.X/t,this._rulerOffsetY=-1*e.origin.Y/t,this._rulerScale=t,e.unit===dL.Inch&&(this._rulerDivision=4)}else this._rulerEnabled=!1;this._updateViewport()},e.prototype._drawRulers=function(){if(this._rulerEnabled)for(var e=this.element.parentNode.ownerDocument,t=this._rulers.fullLeftRuller,n=this._rulers.fullTopRuller,r=[{controlLength:this.width,contentLength:this.contentWidth,viewportLocation:this._getViewportLocation().x,factor:this.zoom*this.actualSizeHorizontalScale,ruler:n,startWorkspaceLocation:null,endWorkspaceLocation:null,rulerPixelLength:null,origin:null},{controlLength:this.height,contentLength:this.contentHeight,viewportLocation:this._getViewportLocation().y,factor:this.zoom*this.actualSizeHorizontalScale,ruler:t,startWorkspaceLocation:null,endWorkspaceLocation:null,rulerPixelLength:null,origin:null}],i=[this.rulerOffsetX+this._baseRulersOffset.x,this.rulerOffsetY+this._baseRulersOffset.y],o=this.scrollBarWidth,s=this.scrollBarsStyle==i$.always,a=this.scrollBarsStyle==i$.auto,l=this.rulerScale,c=0;c<r.length;c++){r[c].origin=r[c].viewportLocation+i[c]*r[c].factor;var u=s||a&&r[1-c].contentLength>r[1-c].controlLength-this.rulerWidth,h=s||a&&r[c].contentLength>r[c].controlLength-this.rulerWidth;u=u||h&&a&&r[1-c].contentLength>r[1-c].controlLength-this.rulerWidth-o,r[c].rulerPixelLength=(h=h||u&&a&&r[c].contentLength>r[c].controlLength-this.rulerWidth-o)?Math.max(r[c].contentLength+this.rulerWidth,r[c].controlLength-(u?o:0)):u?r[c].controlLength-o:r[c].controlLength,r[c].startWorkspaceLocation=-r[c].origin,r[c].endWorkspaceLocation=r[c].startWorkspaceLocation+r[c].rulerPixelLength,r[c].startWorkspaceLocation/=r[c].factor,r[c].endWorkspaceLocation/=r[c].factor,r[c].startWorkspaceLocation*=l,r[c].endWorkspaceLocation*=l;for(var d=1,p=80/r[c].factor*l,f=1;p>10;)p/=10,f*=10;p>5?(f*=5,d=this._rulerDivision):p>2&&(f*=2,d=2);for(var m=[{location:0,index:0}],g=0;g<r[c].endWorkspaceLocation;)m.push({location:g+=f,index:0});for(g=0;g>r[c].startWorkspaceLocation;)m.push({location:g-=f,index:0});for(this._clearElement(r[c].ruler),C=0;C<m.length;C++){var y=e.createElement("span"),_=Math.abs(Math.round(m[C].location)).toString();y.innerHTML=1==c?_.split("").join("<br/>"):_,y.style.position="absolute",y.style.fontSize="9px",y.style.margin="0px",y.style.padding="0px",y.style.fontFamily="Tahoma, Verdana, Arial;",y.style.backgroundColor="#ffffff";var v=Math.round(m[C].location*r[c].factor/l+r[c].origin);y.style.top=0==c?"-1px":v+2+"px",y.style.left=1==c?"2px":v+2+"px",r[c].ruler.appendChild(y)}var b=1,w={1:{newDiv:this._rulerDivision,fractions:2},2:{newDiv:1,fractions:2}};w[this._rulerDivision]={newDiv:1,fractions:this._rulerDivision};for(var C,x=w[d],E=f/x.fractions;E*r[c].factor/l>4;){for(var S=m.length-1;S>=0;){for(var P=0;P<x.fractions-1;P++)m.push({index:b,location:m[S].location+E*(P+1)});S--}b++,E/=(x=w[x.newDiv]).fractions}for(C=0;C<m.length;C++){var T=e.createElement("div");T.style.position="absolute",T.style.overflow="hidden",T.style.backgroundColor="#000000",T.style.padding="0px",T.style.margin="0px",v=Math.round(m[C].location*r[c].factor/l+r[c].origin);var I=this.rulerWidth,O=Math.max(Math.ceil(I/Math.pow(2,m[C].index)),2);T.style.width=0==c?"1px":O+"px",T.style.height=1==c?"1px":O+"px",T.style.top=0==c?I-O+"px":v+"px",T.style.left=1==c?I-O+"px":v+"px",T.style.webkitTransform="translate3d(0, 0, 0)",r[c].ruler.appendChild(T)}}},e.prototype._generateCssWithPrefixes=function(e,t){var n={};for(var r in e)n[e[r]+"transition"]=t;return n},e.prototype._getPageZoom=function(){return screen.deviceXDPI/screen.logicalXDPI},e.prototype._getActualScrollPosition=function(){var e=this.element;return new MN(e.scrollLeft,e.scrollTop)},e.prototype._getViewportLocation=function(){var e,t,n=this.rulerEnabled?this.rulerWidth:0,r=this._holderBounds,i=r.width-n,o=r.height-n,s=90===this._contentAngle||270===this._contentAngle,a=s?this.contentHeight:this.contentWidth,l=s?this.contentWidth:this.contentHeight;switch(this._viewportAlignment){case o$.centerBottom:case o$.centerCenter:case o$.centerTop:e=Math.floor((i-a)/2);break;case o$.leftBottom:case o$.leftCenter:case o$.leftTop:e=0;break;case o$.rightBottom:case o$.rightCenter:case o$.rightTop:e=i-a}switch(this._viewportAlignment){case o$.centerCenter:case o$.leftCenter:case o$.rightCenter:t=Math.floor((o-l)/2);break;case o$.centerTop:case o$.leftTop:case o$.rightTop:t=0;break;case o$.centerBottom:case o$.leftBottom:case o$.rightBottom:t=o-l}return new MN(Math.max(n,e+n),Math.max(n,t+n))},e.prototype.ignoreDocumentClickOnce=function(){this._ignoreDocumentClickOnce=!0},e.prototype._onDocumentClick=function(e){!0!==this._ignoreDocumentClickOnce?this._documentClickEvent.notify(this,e):this._ignoreDocumentClickOnce=!1},e.prototype._onClick=function(e){this._clickEvent.notify(this,e)},e.prototype._onMouseDown=function(e){this._mouseDownEvent.notify(this,e)},e.prototype._onMouseMove=function(e){this._mouseMoveEvent.notify(this,e)},e.prototype._onMouseUp=function(e){this._mouseUpEvent.notify(this,e)},e.prototype._useWorkspaceCoords=function(e){var t=new K$(e),n=this.pageToWorkspacePoint(t.pageX,t.pageY);return t.x=n.x,t.y=n.y,t},e.prototype._onWorkspaceDoubleClick=function(e){var t=this._useWorkspaceCoords(e);this._workspaceDoubleClickEvent.notify(this,{x:t.x,y:t.y})},e.prototype._onWorkspaceClick=function(e){var t=this._useWorkspaceCoords(e);this._workspaceClickEvent.notify(this,{x:t.x,y:t.y})},e.prototype._onWorkspaceMouseDown=function(e){if(!this._isManyTouches(e)){var t=this._useWorkspaceCoords(e);this._workspaceMouseDownEvent.notify(this,t),BL.IsTouchIE()||this._contentCtx.setCapture()}},e.prototype._onWorkspaceMouseUp=function(e){if(!this._isManyTouches(e)){var t=this._useWorkspaceCoords(e);this._workspaceMouseUpEvent.notify(this,t),this._contentCtx.releaseCapture()}},e.prototype._onWorkspaceMouseMove=function(e){if(this._isManyTouches(e))e.preventDefault();else{var t=this._useWorkspaceCoords(e);this._workspaceMouseMoveEvent.notify(this,t)}},e.prototype._makeInactive=function(e){e.ondrag=function(){return!1},e.unselectable="on"},e.prototype._makeInactiveAll=function(){for(var e=this._contentElements,t=0;t<e.length;t++)this._makeInactive(e[t])},e.prototype._resizeContentElements=function(){for(var e=this.contentWidth,t=this.contentHeight,n=this._contentElements,r=0;r<n.length;r++)n[r].style.width=e+"px",n[r].style.height=t+"px","IMG"==n[r].tagName&&(n[r].width=e,n[r].height=t);this._contentCtxDimension.width=e,this._contentCtxDimension.height=t,this._contentCtxLocation=this._getElementPageCoord(this._contentCtx),this._holderBounds=this._getElementBounds(this.element)},e.prototype._getElementBounds=function(e){for(var t=[];e.length>0&&e!=document;)"none"==e.style.display&&(t.push({element:e,display:e.style.display,visibility:e.style.visibility}),e.style.visibility="hidden",e.style.display="block"),e=e.parent();for(var n=e.clientWidth,r=e.clientHeight,i=e.offsetHeight,o=e.offsetWidth,s=e.offsetTop,a=e.offsetLeft,l=0;l<t.length;l++){var c=t[l];c.element[0].style.visibility=c.visibility,c.element[0].style.display=c.display}return{width:n,height:r,offsetWidth:o,offsetHeight:i,offsetTop:s,offsetLeft:a}},e.prototype._isManyTouches=function(e){if(BL.IsTouchDevice()){var t=e.originalEvent||e;if(window.navigator.pointerEnabled){if(this._touchFlags.multiTouch||!1!==t.isPrimary||(this._touchFlags.multiTouch=!0),this._touchFlags.multiTouch)return!0}else if("object"==typeof t.touches&&null!==t.touches&&"number"==typeof t.touches.length&&t.touches.length>1)return!0}return!1},e.prototype._onTouch=function(e){this._touchFlags.startZoom=this.zoom,this._touchFlags.multiTouch=e.gesture.touches.length>1},e.prototype._onPinch=function(e,t){if(e.gesture.preventDefault(),e.preventDefault(),this._touchFlags.multiTouch=e.gesture.touches.length>1,this._touchFlags.pinchStarted||(this._touchFlags.pinchStarted=!0,this._pinchStartEvent.notify(this)),this.pinchZoomEnabled){var n=this._touchFlags.startZoom*e.gesture.scale,r=new Q$;t?r.skipZoomToCenter=!0:(r.centerPageX=e.gesture.center.pageX,r.centerPageY=e.gesture.center.pageY),this.setZoom(n,r)}},e.prototype._onRelease=function(e){this._touchFlags.multiTouch=!1,this._touchFlags.pinchStarted&&(this._touchFlags.pinchStarted=!1,this._pinchStopEvent.notify(this))},e.prototype.initialize=function(e){var t=this;void 0===e&&(e=null),null!=e&&(this._intervalCheckLoop=e);var n=document.createElement("style");n.id="aurigmaStyles",n.type="text/css",n.innerHTML=".aurigmaNoSelect {-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}",document.getElementsByTagName("head")[0].appendChild(n);var r=this.element;this._holderBounds=this._getElementBounds(r),this._holderElement=r,r.innerHTML=this._render(),this._makeInactive(r);var i=r.querySelectorAll("#cvContent");this._contentElements.push(this._contentCtx=i[0]),this._addSetCapture(r);var o=this._scrollingPosition;this._scrollInitialized=!0,r.scrollLeft=o.x,r.scrollTop=o.y,this._initializeRulers();var s=this._pointerEvents;BL.IsTouchDevice()&&(q$(this._holderElement,{behavior:{touchAction:"pan-x pan-y"}}).on("touch",rU.createBoundedWrapper(this,this._onTouch)).on("pinch",rU.createBoundedWrapper(this,this._onPinch)).on("release",rU.createBoundedWrapper(this,this._onRelease)),window.navigator.pointerEnabled&&(this._holderElement.style.touchAction=this._msTouchActionInitialValue)),document.addEventListener("click",rU.createBoundedWrapper(this,this._onDocumentClick)),this._holderElement.addEventListener("contextmenu",function(e){e.preventDefault()}),this._holderElement.addEventListener("click",rU.createBoundedWrapper(this,this._onClick)),this._holderElement.addEventListener("scroll",rU.createBoundedWrapper(this,this._onScroll)),this._contentCtx.addEventListener("click",rU.createBoundedWrapper(this,this._onWorkspaceClick)),s.start.split(" ").forEach(function(e){t._holderElement.addEventListener(e,rU.createBoundedWrapper(t,t._onMouseDown)),t._contentCtx.addEventListener(e,rU.createBoundedWrapper(t,t._onWorkspaceMouseDown))}),s.move.split(" ").forEach(function(e){t._holderElement.addEventListener(e,rU.createBoundedWrapper(t,t._onMouseMove)),t._contentCtx.addEventListener(e,rU.createBoundedWrapper(t,t._onWorkspaceMouseMove))}),s.up.split(" ").forEach(function(e){t._holderElement.addEventListener(e,rU.createBoundedWrapper(t,t._onMouseUp)),t._contentCtx.addEventListener(e,rU.createBoundedWrapper(t,t._onWorkspaceMouseUp))}),s.cancel.split(" ").forEach(function(e){t._holderElement.addEventListener(e,rU.createBoundedWrapper(t,t._onMouseUp)),t._contentCtx.addEventListener(e,rU.createBoundedWrapper(t,t._onWorkspaceMouseUp))}),q$(this._contentCtx,{behavior:{touchAction:"pan-x pan-y"}}).on("doubletap",this._onWorkspaceDoubleClick.bind(this)),this._contentCtxDimension={width:this.contentWidth,height:this.contentHeight},this._contentCtxLocation=this._getElementPageCoord(this._contentCtx),this._updateViewport(),this._updateViewportAlignment(),this._updateRulersStyle(),this.add_pinchStart(rU.createBoundedWrapper(this,function(){this._rulers.topRuller.style.opacity=this._rulers.leftRuller.style.opacity=.1})),this.add_pinchStop(rU.createBoundedWrapper(this,function(){this._rulersOnZoom(),this._rulers.topRuller.style.opacity=this._rulers.leftRuller.style.opacity=1})),this._startIntervalCheckLoop()},e.prototype._startIntervalCheckLoop=function(){var e=this;this._intervalCheckLoop.start({checkFunction:function(){var t=e._getElementBounds(e.element);return e._contentCtxLocation=e._getElementPageCoord(e._contentCtx),t.width>0&&t.width!==e._holderBounds.width||t.height>0&&t.height!==e._holderBounds.height},onChange:function(){var t=e._getElementBounds(e.element);e._holderBounds=t,e._onResize(e,!1)}})},e.prototype.setIntervalCheckLoop=function(e){null!=e&&(this._intervalCheckLoop=e,this._startIntervalCheckLoop())},Object.defineProperty(e.prototype,"_pointerEvents",{get:function(){var e="mousedown",t="mousemove",n="mouseup",r="";return BL.IsTouchDevice()&&(window.navigator.pointerEnabled?(e="pointerdown",t="pointermove",n="pointerup",r="pointerCancel"):(e="mousedown touchstart",t="mousemove touchmove",n="mouseup touchend",r="touchcancel")),{start:e,move:t,up:n,cancel:r}},enumerable:!0,configurable:!0}),e.prototype._onScroll=function(e){this._scrollInitialized?this._scrollInitialized=!1:(this._scrollingPosition=this._getActualScrollPosition(),this._contentCtxLocation=this._getElementPageCoord(this._contentCtx),this._scrolledEvent.notify(this))},e.prototype._onResize=function(e,t){this._updateViewport(),this._updateViewportAlignment(),this._updateRulersStyle(),this._scrollingPosition=this._getActualScrollPosition(),this._onresizeEvent.notify(this),this._contentCtxLocation=this._getElementPageCoord(this._contentCtx)},e.prototype._updateViewport=function(){if(this.hasContent){var e=this.calculateZoomByZoomMode(this.zoomMode);if(!(null==e||e<0)){this._zoom=Math.min(Math.max(e,this.minZoom),this.getMaxZoom()),this._resizeContentElements();var t=this._getViewportLocation();this._contentCtx.style.left=t.x+"px",this._contentCtx.style.top=t.y+"px",this._viewportLocation=t,this._zoomedEvent.notify(this)}}},e.prototype._addSetCapture=function(e){var t=this._viewerElement;if(HTMLElement){var n=HTMLElement.prototype,r=["click","mousedown","mouseup","mousemove","mouseover","mouseout"],i=null;n.setCapture=function(){var e,t;document.querySelector("body").classList.add("aurigmaNoSelect"),i=this;try{for(var n=Y$(r),o=n.next();!o.done;o=n.next())window.addEventListener(o.value,s,!0)}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}};var o=n.releaseCapture;n.releaseCapture=function(){var e,t;document.querySelector("body").classList.remove("aurigmaNoSelect"),null!=o&&o.call(this);try{for(var n=Y$(r),a=n.next();!a.done;a=n.next())window.removeEventListener(a.value,s,!0)}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}i=null};var s=function(e){window.removeEventListener(e.type,s,!0);var n=e.path||e.composedPath();null==i||null!=t&&n.some(function(e){return e.id===t.id})||i.dispatchEvent(a(e)),window.addEventListener(e.type,s,!0)},a=function(e){var t;document.createEvent?(t=document.createEvent("MouseEvent")).initMouseEvent(e.type,e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget):t=new MouseEvent(e.type,e);var n=e.buttons;return t.buttons!==n&&Object.defineProperty(t,"buttons",{get:function(){return n}}),t}}},e.prototype._getElementPageCoord=function(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}},e.prototype._zoomToPagePoint=function(e,t,n){var r=this.pageToControlPoint(t,n),i=this.pageToWorkspacePoint(t,n,!0);this._setZoom(e);var o=this.workspaceToContentPoint(i),s=this.rulerEnabled?this._rulerWidth:0,a=new MN(Math.round(o.x-r.x+s),Math.round(o.y-r.y+s));this.scrollingPosition=a},e.prototype._updateViewportAlignment=function(){var e=this._getViewportLocation();this._contentCtx.style.left=e.x+"px",this._contentCtx.style.top=e.y+"px"},Object.defineProperty(e.prototype,"scrollingSize",{get:function(){var e=this.element,t=e.scrollWidth-e.clientWidth,n=e.scrollHeight-e.clientHeight;return t<0&&(t=0),n<0&&(n=0),new MN(Math.round(t),Math.round(n))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentCtx",{get:function(){return this._contentCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientSideOptions",{get:function(){return this._clientSideOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomConfig",{get:function(){return console.log("not implemented"),null},enumerable:!0,configurable:!0}),e.prototype.setCursor=function(e,t){if(void 0===t&&(t=!1),this._getElementForCursor().style.cursor=rU.cursorToCss(e),null!=window){if((e=!0===t?e:sU.defaultCursor)===this._bodyCursor)return;window.document.querySelector("body").style.cursor=rU.cursorToCss(e),this._bodyCursor=e}},e.prototype._getElementForCursor=function(){return this._contentCtx},Object.defineProperty(e.prototype,"delayedRefreshTimeout",{get:function(){return this._delayedRefreshTimeout},set:function(e){this._delayedRefreshTimeout=e},enumerable:!0,configurable:!0}),e.prototype.getMaxZoom=function(){return this._maxZoom>0?this._maxZoom:2.5},e.prototype.setMaxZoom=function(e){this._maxZoom=e,this.zoom>this.getMaxZoom()&&this.setZoom(this.getMaxZoom(),null)},Object.defineProperty(e.prototype,"minZoom",{get:function(){return this.zoomConfig?this.zoomConfig.min:this._minZoom>0?this._minZoom:.001},set:function(e){this._minZoom=e,this.zoom<this.minZoom&&this.setZoom(this.minZoom,null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screenXDpi",{get:function(){return this._screenXDpi},set:function(e){this._screenXDpi=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screenYDpi",{get:function(){return this._screenYDpi},set:function(e){this._screenYDpi=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarsStyle",{get:function(){return this._scrollBarsStyle},set:function(e){this._scrollBarsStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarWidth",{get:function(){if(null==this._actualScrollbarWidth){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.overflow="scroll",document.body.appendChild(e);var t=document.createElement("div");t.style.width="100%",e.appendChild(t),this._actualScrollbarWidth=100-t.offsetWidth,e.remove()}return this._actualScrollbarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollingPosition",{get:function(){return this._scrollingPosition=this._getActualScrollPosition(),this._scrollingPosition.round()},set:function(e){var t=this.element;t.scrollLeft=e.x,t.scrollTop=e.y;var n=this.scrollingPosition;this._scrollingPosition=new MN(n.x,n.y),this._scrolledEvent.notify(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewportAlignment",{get:function(){return this._viewportAlignment},set:function(e){this._viewportAlignment=e,this._updateViewportAlignment(),this._drawRulers(),this._updateRulersStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},enumerable:!0,configurable:!0}),e.prototype.setZoom=function(e,t){var n,r;if(t){if(t.skipZoomToCenter)return this._setZoom(e),this._zoom;n=t.centerPageX,r=t.centerPageY}else{var i=this._getElementPageCoord(this.element),o=this.rulerEnabled?this._rulerWidth:0,s=this._holderBounds.height-o;n=Math.round(i.left+o+(this._holderBounds.width-o)/2),r=Math.round(i.top+o+s/2)}return this._zoomToPagePoint(e,n,r),this._zoom},e.prototype._setZoom=function(e){this._zoom==e&&this._zoomMode==s$.none||(this._zoom=Math.min(Math.max(e,this.minZoom),this.getMaxZoom()),this._zoomMode=s$.none,this._updateViewport())},Object.defineProperty(e.prototype,"pinchZoomEnabled",{get:function(){return this._pinchZoomEnabled},set:function(e){this._pinchZoomEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rulerEnabled",{get:function(){return this._rulerEnabled},set:function(e){var t=e?"block":"none";this._rulers.fullLeftRuller.style.display=t,this._rulers.fullTopRuller.style.display=t,this._rulers.leftRuller.style.display=t,this._rulers.topRuller.style.display=t,this._rulers.whiteRect.style.display=t,this._rulerEnabled=e,this.zoomMode=this.zoomMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rulerScale",{get:function(){return this._rulerScale},set:function(e){if(e<=0)throw new Error("Ruler scale should be greater 0.");this._rulerScale=e,this._updateViewport()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rulerDivision",{get:function(){return this._rulerDivision},set:function(e){if(e<=0)throw new Error("Ruler division should be greater 0.");this._rulerDivision=e,this._updateViewport()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rulerOffsetX",{get:function(){return this._rulerOffsetX},set:function(e){this._rulerOffsetX=e,this._updateViewport()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rulerOffsetY",{get:function(){return this._rulerOffsetY},set:function(e){this._rulerOffsetY=e,this._updateViewport()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rulerWidth",{get:function(){return this._rulerWidth},set:function(e){this._rulerWidth=e,this._updateViewport()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomMode",{get:function(){return this._zoomMode},set:function(e){this._setZoomMode(e)},enumerable:!0,configurable:!0}),e.prototype._setZoomMode=function(e){this._zoomMode=e,this._updateViewport()},Object.defineProperty(e.prototype,"bestFitWhiteSpacePc",{get:function(){return 100*this._bestFitWhiteSpacePc},set:function(e){"number"==typeof e&&!isNaN(e)&&e>=0&&e<99&&(this._bestFitWhiteSpacePc=e/100),this.zoomMode=this.zoomMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomQuality",{get:function(){return this._zoomQuality},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exceptionDescription",{get:function(){return this._exceptionDescription},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"returnValue",{get:function(){return this._returnValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"workspaceWidth",{get:function(){throw new Error("Not implemented")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"workspaceHeight",{get:function(){throw new Error("Not implemented")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualSizeHorizontalScale",{get:function(){throw new Error("Not implemented")},enumerable:!0,configurable:!0}),e.prototype.calculateZoomByZoomMode=function(e){if(null!=this._holderBounds){var t=this.workspaceWidth*this.screenXDpi/72,n=this.workspaceHeight*this.screenYDpi/72,r=this.rulerEnabled?this.rulerWidth+this._rulerBorderWidth:0,i=this._holderBounds,o=i.offsetWidth-r,s=i.offsetHeight-r,a=90===this._contentAngle||270===this._contentAngle,l=a?n:t,c=a?t:n,u=o/l,h=s/c,d=this.scrollBarWidth,p=(o-d)/l,f=(s-d)/c,m=this._scrollBarsStyle===i$.always,g=this.zoom;switch(e){case s$.bestFit:this._bestFitWhiteSpacePc>0&&(u=(o-o*this._bestFitWhiteSpacePc)/l,h=(s-s*this._bestFitWhiteSpacePc)/c,p=(o-d-(o-d)*this._bestFitWhiteSpacePc)/l,f=(s-d-(s-d)*this._bestFitWhiteSpacePc)/c),g=m?Math.min(p,f):Math.min(u,h);break;case s$.bestFitShrinkOnly:g=m?Math.min(p,f):Math.min(u,h),g=Math.min(1,g);break;case s$.fitToHeight:g=m?f:Math.round(h*l)<=o?h:f;break;case s$.fitToHeightShrinkOnly:g=m?Math.min(1,f):Math.round(Math.min(1,h)*l)<=o?Math.min(1,h):Math.min(1,f);break;case s$.fitToWidth:g=m?p:Math.round(u*c)<=s?u:p;break;case s$.fitToWidthShrinkOnly:g=m?Math.min(1,p):Math.round(Math.min(1,u)*c)<=s?Math.min(1,u):Math.min(1,p)}return g}},e.prototype.clearRenderCtx=function(e){for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])},e.prototype.workspaceToContentPoint=function(e){return this.controlToContentPoint(this.workspaceToControlPoint(e))},e.prototype.controlToContentPoint=function(e){var t=this._getViewportLocation(),n=this._getActualScrollPosition(),r=new MN(0,0),i=e.y;return r.x=e.x-t.x+n.x,r.y=i-t.y+n.y,r.round()},e.prototype.controlToPagePoint=function(e){var t=this._getElementPageCoord(this.element),n=e.y+t.top;return new MN(Math.round(e.x+t.left),Math.round(n))},e.prototype.contentToControlPoint=function(e){var t=this._getViewportLocation(),n=this._getActualScrollPosition(),r=new MN(0,0);return r.x=e.x+t.x-n.x,r.y=e.y+t.y-n.y,r.round()},e.prototype.controlToContentRectangle=function(e){var t=new MN(e.left,e.top),n=new MN(e.left+e.width,e.top+e.height);return t=this.controlToContentPoint(t),n=this.controlToContentPoint(n),new FN(t.x,t.y,n.x-t.x,n.y-t.y)},e.prototype.contentToControlRectangle=function(e){var t=new MN(e.left,e.top),n=new MN(e.left+e.width,e.top+e.height);return t=this.contentToControlPoint(t),n=this.contentToControlPoint(n),new FN(t.x,t.y,n.x-t.x,n.y-t.y)},e.prototype.workspaceToControlPoint=function(e){var t=this.zoom,n=e.y,r=new MN(Math.round(e.x*t*this._screenXDpi/72),Math.round(n*t*this._screenYDpi/72));return this.contentToControlPoint(r).round()},e.prototype.workspaceToWhiteSpacePoint=function(e){var t=this.workspaceToContentPoint(e),n=this.rulerEnabled?this.rulerWidth:0,r=this._getViewportLocation();return new MN(t.x-n+r.x,t.y-n+r.y)},e.prototype.whitespaceToWorkspacePoint=function(e){var t=this.rulerEnabled?this.rulerWidth:0,n=this._getViewportLocation();return this.controlToWorkspacePoint(this.contentToControlPoint(new MN(e.x-n.x+t,e.y-n.y+t)))},e.prototype.controlToWorkspacePoint=function(e){var t=this.zoom,n=this.controlToContentPoint(e);return new MN(n.x/(t*this._screenXDpi/72),n.y/(t*this._screenYDpi/72))},e.prototype.workspaceToControlRectangle=function(e){var t=this.zoom,n=this._screenXDpi/72*t,r=this._screenYDpi/72*t,i=new FN(Math.round(e.left*n),Math.round(e.top*r),Math.round(e.width*n),Math.round(e.height*r));return this.contentToControlRectangle(i)},e.prototype.pageToControlPoint=function(e,t){var n=this._getElementPageCoord(this.element),r=t-n.top;return new MN(Math.round(e-n.left),Math.round(r))},e.prototype.pageToWorkspacePoint=function(e,t,n){void 0===n&&(n=!1);var r=this.controlToWorkspacePoint(this.pageToControlPoint(e,t)),i=new MN(r.x,r.y),o=this.contentAngle;return o>0&&!0!==n&&(i.rotate(-o),90===o?i.translate(0,this._canvas.workspaceHeight):180===o?i.translate(this._canvas.workspaceWidth,this._canvas.workspaceHeight):270===o&&i.translate(this._canvas.workspaceWidth,0)),new MN(i.x,i.y)},e.prototype.controlToWorkspaceRectangle=function(e){var t=this.zoom,n=1/(t*this._screenXDpi/72),r=1/(t*this._screenYDpi/72),i=this.controlToContentRectangle(e);return new FN(i.left*n,i.top*r,i.width*n,i.height*r)},e.prototype.abort=function(){this._status==l$.busy&&(this._callbackContext++,this._exceptionDescription="",this._status=l$.ready)},e.prototype.dispose=function(){this._disposeRulers()},e.prototype.delayedRefresh=function(){this._refreshTimer&&window.clearTimeout(this._refreshTimer);var e=rU.createBoundedWrapper(this,function(){this._refreshTimer=null,this.refresh()});this._refreshTimer=window.setTimeout(e,this._delayedRefreshTimeout)},e.prototype._refresh=function(){},e.prototype.refresh=function(){this._status==l$.busy?this._needToRefresh=!0:(this._needToRefresh=!1,this._refresh())},e.prototype._raiseInvokingCallbackRequest=function(){this._invokingCallbackRequestEvent.notify(this)},e.prototype.add_onResize=function(e){this._onresizeEvent.add(e)},e.prototype.remove_onResize=function(e){this._onresizeEvent.remove(e)},e.prototype.add_invokingCallbackRequest=function(e){this._invokingCallbackRequestEvent.add(e)},e.prototype.remove_invokingCallbackRequest=function(e){this._invokingCallbackRequestEvent.remove(e)},e.prototype.add_workspaceChanged=function(e){this._workspaceChangedEvent.add(e)},e.prototype.remove_workspaceChanged=function(e){this._workspaceChangedEvent.remove(e)},e.prototype.add_scrolled=function(e){this._scrolledEvent.add(e)},e.prototype.remove_scrolled=function(e){this._scrolledEvent.remove(e)},e.prototype.add_statusChanged=function(e){this._statusChangedEvent.add(e)},e.prototype.remove_statusChanged=function(e){this._statusChangedEvent.remove(e)},e.prototype.add_pinchStart=function(e){this._pinchStartEvent.add(e)},e.prototype.remove_pinchStart=function(e){this._pinchStartEvent.remove(e)},e.prototype.add_pinchStop=function(e){this._pinchStopEvent.add(e)},e.prototype.remove_pinchStop=function(e){this._pinchStopEvent.remove(e)},e.prototype.add_zoomed=function(e){this._zoomedEvent.add(e)},e.prototype.remove_zoomed=function(e){this._zoomedEvent.remove(e)},e.prototype.add_click=function(e){this._clickEvent.add(e)},e.prototype.remove_click=function(e){this._clickEvent.remove(e)},e.prototype.add_mouseDown=function(e){this._mouseDownEvent.add(e)},e.prototype.remove_mouseDown=function(e,t){this._mouseDownEvent.remove(e)},e.prototype.add_mouseMove=function(e){this._mouseMoveEvent.add(e)},e.prototype.remove_mouseMove=function(e){this._mouseMoveEvent.remove(e)},e.prototype.add_mouseUp=function(e){this._mouseUpEvent.add(e)},e.prototype.remove_mouseUp=function(e){this._mouseUpEvent.remove(e)},e.prototype.add_workspaceClick=function(e){this._workspaceClickEvent.add(e)},e.prototype.remove_workspaceClick=function(e){this._workspaceClickEvent.remove(e)},e.prototype.add_workspaceDoubleClick=function(e){this._workspaceDoubleClickEvent.add(e)},e.prototype.remove_workspaceDoubleClick=function(e){this._workspaceDoubleClickEvent.remove(e)},e.prototype.add_workspaceMouseDown=function(e){this._workspaceMouseDownEvent.add(e)},e.prototype.remove_workspaceMouseDown=function(e){this._workspaceMouseDownEvent.remove(e)},e.prototype.add_workspaceMouseMove=function(e){this._workspaceMouseMoveEvent.add(e)},e.prototype.remove_workspaceMouseMove=function(e){this._workspaceMouseMoveEvent.remove(e)},e.prototype.add_workspaceMouseUp=function(e){this._workspaceMouseUpEvent.add(e)},e.prototype.remove_workspaceMouseUp=function(e){this._workspaceMouseUpEvent.remove(e)},e}(),eY=function(){function e(){var e=this;this._visible=!1,this._changedEvent=new EL,this._onSurfacePropertyChanged=function(t,n){switch(n){case"width":case"height":e._updateGrid()}}}return Object.defineProperty(e.prototype,"surface",{get:function(){return this._surface},set:function(e){this._surface!==e&&(null!=this._surface&&this.surface.removePropertyChanged(this._onSurfacePropertyChanged),this._surface=e,null!=this._surface&&this.surface.addPropertyChanged(this._onSurfacePropertyChanged),this._updateGrid())},enumerable:!0,configurable:!0}),e.prototype.setConfig=function(e,t){this._config=e,this._rulersConfig=t},Object.defineProperty(e.prototype,"gridContainers",{get:function(){var e=new Ij;return null!=this._gridContainer&&e.add(this._gridContainer),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridContainer",{get:function(){return this._gridContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this._updateGrid())},enumerable:!0,configurable:!0}),e.prototype.addChanged=function(e){this._changedEvent.add(e)},e.prototype.removeChanged=function(e){this._changedEvent.remove(e)},e.prototype._updateGrid=function(){null!=this._gridContainer&&this._width==this.surface.width&&this._height==this.surface.height||(this._gridContainer=this._createGrid()),null!=this._gridContainer&&this._gridContainer.visible!==this._visible&&(this._gridContainer.visible=this._visible,this._changedEvent.fire())},e.prototype._createGrid=function(){if(null==this.surface)return null;if(this._width=this.surface.width,this._height=this.surface.height,0===this.surface.width||0===this.surface.height)return null;if(null==this._config)return null;var e=new kj;e.locked=!0,e.visible=!1,e.name="Grid";var t=mL(this._rulersConfig),n=this._config.stepX/t,r=this._config.stepY/t;if(n>0&&r>0){var i=Math.round(this._width/n)+1,o=Math.round(this._height/r)+1;if(i>0&&i!==Number.POSITIVE_INFINITY&&o>0&&o!==Number.POSITIVE_INFINITY){var s=new Uz(0,0,i,o,n,r);s.horizontalLineColor=oH.createColor(this._config.horizontalColor),s.verticalLineColor=oH.createColor(this._config.verticalColor),s.lineWidth=this._config.lineWidthPx,s.fixedLineWidth=!0,e.items.add(s)}}return e},e}(),tY=function(){return(tY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},nY=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rY=function(){function e(t){var n=this;this._changedEvent=new PL,this._visibilityChangedEvent=new EL,this._containers=null,this._visible=!1,this._printZoneConf=e._getDefaultPrintZoneConfig(),this._onPrintAreaAdded=function(e){n._clearCurrentSafetyLinesContainers(),n._subscribePrintAreaEvents(e.item),n._changedEvent.notify(n)},this._onPrintAreaRemoved=function(e){n._clearCurrentSafetyLinesContainers(),n._unsubscribePrintAreaEvents(e.item),n._changedEvent.notify(n)},this._onSafetyLinePropertyChanged=function(){n._clearCurrentSafetyLinesContainers(),n._changedEvent.notify(n)},this._onSafetyLinesCollectionRemoved=function(e){n._unsubscribeSafetyLineEvents(e.item),n._clearCurrentSafetyLinesContainers(),n._changedEvent.notify(n)},this._onSafetyLinesCollectionAdded=function(e){n._subscribeSafetyLineEvents(e.item),n._clearCurrentSafetyLinesContainers(),n._changedEvent.notify(n)},this._onPrintAreaPropertyChanged=function(e,t){"bleed"!==t&&"slug"!==t&&"bounds"!==t||(n._clearCurrentSafetyLinesContainers(),n._changedEvent.notify(n))},this._onPrintAreaPropertyChangedDebounce=FL.debounce(this._onPrintAreaPropertyChanged,100),this.conf=t}return Object.defineProperty(e.prototype,"conf",{set:function(t){var n=e._getDefaultPrintZoneConfig();this._printZoneConf.bleed=tY(tY({},n.bleed),(null==t?void 0:t.bleed)||{}),this._printZoneConf.trim=tY(tY({},n.trim),(null==t?void 0:t.trim)||{})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"surface",{get:function(){return this._surface},set:function(e){var t=this;this._surface!==e&&(null!=this._surface&&(this._surface.printAreas.remove_itemAdded(this._onPrintAreaAdded),this._surface.printAreas.remove_itemRemoved(this._onPrintAreaRemoved),this._surface.printAreas.forEach(function(e){return t._subscribePrintAreaEvents(e)})),this._surface=e,this._clearCurrentSafetyLinesContainers(),null!=this._surface&&(this._surface.printAreas.add_itemAdded(this._onPrintAreaAdded),this._surface.printAreas.add_itemRemoved(this._onPrintAreaRemoved),this._surface.printAreas.forEach(function(e){return t._subscribePrintAreaEvents(e)})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"safetyLinesContainers",{get:function(){return null==this._containers&&(this._containers=this._buildSafetyLinesContainers()),this._containers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){var t,n;if(this._visible!==e&&(this._visible=e,null!=this._containers)){var r=!1;try{for(var i=nY(this._containers),o=i.next();!o.done;o=i.next()){var s=o.value;s.visible!==this._visible&&(s.visible=this._visible,r=!0)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}r&&this._visibilityChangedEvent.notify()}},enumerable:!0,configurable:!0}),e.prototype.addChanged=function(e){this._changedEvent.add(e)},e.prototype.removeChanged=function(e){this._changedEvent.remove(e)},e.prototype.addVisibilityChanged=function(e){this._visibilityChangedEvent.add(e)},e.prototype.removeVisibilityChanged=function(e){this._visibilityChangedEvent.remove(e)},e.prototype._clearCurrentSafetyLinesContainers=function(){this._containers=null},e.prototype._subscribePrintAreaEvents=function(e){var t=this;e.safetyLines.add_itemAdded(this._onSafetyLinesCollectionAdded),e.safetyLines.add_itemRemoved(this._onSafetyLinesCollectionRemoved),e.safetyLines.forEach(function(e){return t._subscribeSafetyLineEvents(e)}),e.addPropertyChanged(this._onPrintAreaPropertyChangedDebounce)},e.prototype._unsubscribePrintAreaEvents=function(e){var t=this;e.safetyLines.forEach(function(e){return t._unsubscribeSafetyLineEvents(e)}),e.safetyLines.remove_itemAdded(this._onSafetyLinesCollectionAdded),e.safetyLines.remove_itemRemoved(this._onSafetyLinesCollectionRemoved),e.removePropertyChanged(this._onPrintAreaPropertyChangedDebounce)},e.prototype._subscribeSafetyLineEvents=function(e){e.addPropertyChanged(this._onSafetyLinePropertyChanged)},e.prototype._unsubscribeSafetyLineEvents=function(e){e.removePropertyChanged(this._onSafetyLinePropertyChanged)},e.prototype._buildSafetyLinesContainers=function(){var e,t,n,r,i=new Ij;if(null==this.surface)return i;try{for(var o=nY(this.surface.printAreas),s=o.next();!s.done;s=o.next()){var a=s.value;if(null!=a.safetyLines)try{for(var l=(n=void 0,nY(a.safetyLines)),c=l.next();!c.done;c=l.next()){var u=c.value,h=this._createContainer("SafetyLines["+a.name+"]"),d=this._createDashedRectangleFromSafetyLine(a.bounds,u);h.items.add(d),i.add(h)}}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}if(!a.bleed.isEmpty){h=this._createContainer("Bleed["+a.name+"]"),i.add(h);var p=this._printZoneConf.bleed;d=this._createDashedRect(a.getBounds(UV.Bleed),p.width,p.step,oH.createColor(p.color),"bleed",p.altColor&&oH.createColor(p.altColor)),h.items.add(d)}a.slug.isEmpty&&a.bleed.isEmpty||(h=this._createContainer("Trim["+a.name+"]"),i.add(h),d=this._createDashedRect(a.bounds,(p=this._printZoneConf.trim).width,p.step,oH.createColor(p.color),"trim",p.altColor&&oH.createColor(p.altColor)),h.items.add(d))}}catch(m){e={error:m}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return i},e.prototype._createContainer=function(e){var t=new kj;return t.locked=!0,t.name="Bleed["+e+"]",t.visible=this._visible,t},e.prototype._createDashedRectangleFromSafetyLine=function(e,t){var n=t.getRectangle(e),r=t.getCornerRadiuses(e);return this._createDashedRect(n,t.widthPx,t.stepPx,t.color,t.name,t.altColor,r)},e.prototype._createDashedRect=function(e,t,n,r,i,o,s){var a=$N.roundedRectangle(e.left,e.top,e.width,e.height,s),l=new RH(a);return l.name=cU.voPrefix+"_"+i+"_shape",l.borderColor=r,l.fillColor=oH.createColor("transparent"),l.fixedBorderWidth=!0,l.borderWidth=t,null!=o&&(l.altBorderColor=o),l.dash=[n,3],l},e.prototype.dispose=function(){var e=this;null!=this._surface&&(this._surface.printAreas.remove_itemAdded(this._onPrintAreaAdded),this._surface.printAreas.remove_itemRemoved(this._onPrintAreaRemoved),this._surface.printAreas.forEach(function(t){return e._unsubscribePrintAreaEvents(t)}))},e._getDefaultPrintZoneConfig=function(){return{bleed:{color:"rgb(255, 0, 0)",altColor:"rgb(255, 0, 0)",step:1,width:1},trim:{color:"rgb(255, 0, 0)",step:5,width:1}}},e}(),iY=function(){function e(e,t){this._service=e,this._imageLoaderService=t,this._multiCallInProgress=!1,this._multiCallItems=null,this._multiCallCallbacks=null,this._endMultiCallPromiseFuncs=null,this._multiCallInProgress=!1,this._multiCallItems=[],this._multiCallCallbacks=[],this._multiCallCounter=0,this._endMultiCallPromiseFuncs=[]}return e.prototype.increaseCounter=function(){this._multiCallCounter++},e.prototype.decreaseCounter=function(){return this._multiCallCounter--,this._multiCallCounter},e.prototype.enqueueEndMultiCall=function(){var e=this;return new Promise(function(t,n){return e._endMultiCallPromiseFuncs.push([t,n])})},Object.defineProperty(e.prototype,"multiCallStarted",{get:function(){return this._multiCallCounter>0},enumerable:!0,configurable:!0}),e.prototype.beginMultiCall=function(){this.increaseCounter()},e.prototype.endMultiCall=function(e){if(void 0===e&&(e=!0),this.decreaseCounter()>0)return this.enqueueEndMultiCall();if(null==this._multiCallItems||this._multiCallItems.length<1)return this._onMultiCallFinally(),Promise.resolve(!1);var t=this._multiCallItems,n=this._multiCallCallbacks,r=this._endMultiCallPromiseFuncs;return this._multiCallItems=[],this._multiCallCallbacks=[],this._endMultiCallPromiseFuncs=[],this._updateByMultiCall(t,n,r,e)},e.prototype.queueForMultiCall=function(e,t,n){return!this._multiCallInProgress&&(this._multiCallItems.push(e),this._multiCallCallbacks.push([t,n]),!0)},e.prototype._updateByMultiCall=function(e,t,n,r){var i=this;return void 0===r&&(r=!0),this._multiCallInProgress=!0,new Promise(function(o,s){var a=i._filter(e,t);i._updateByMultiCallRequest({items:a.items},function(e){return i._onMultiCallDone(e,a.callbacks,o,n,r)},function(r,o,a){return i._onMultiCallFailed(r,o,a,e,t,s,n)})})},e.prototype._filter=function(e,t){e=e.reverse(),t=t.reverse();var n=[],r=[];return{items:e=e.filter(function(e,t){return null!=e.itemData&&!r.includes(e.itemData.id)&&(r.push(e.itemData.id),n.push(t),!0)}),callbacks:n.map(function(e){return t[e]})}},e.prototype._onMultiCallDone=function(e,t,n,r,i){void 0===i&&(i=!0);try{i&&this._imageLoaderService.loadCombinedImage(e.combinedImageDescription);for(var o=e.items,s=0;s<o.length;s++)this._processItemResult(o[s],t[s])}finally{this._onMultiCallFinally(),n(!0),null!=r&&r.forEach(function(e){return e[0](!0)})}},e.prototype._processItemResult=function(e,t){try{var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t,2),r=n[0];e.error?(0,n[1])({errorMessage:e.errorMessage}):r(e.result)}catch(i){console.error("Error while processing ItemHandlers service response",i)}},e.prototype._onMultiCallFailed=function(e,t,n,r,i,o,s){try{for(var a=0;a<i.length;a++)i[a][1]&&i[a][1](e,t,n)}finally{this._onMultiCallFinally(),o(),null!=s&&s.forEach(function(e){return e[1]()})}},e.prototype._updateByMultiCallRequest=function(e,t,n){this._service.sendRequest("UpdateByMultiCallRequest",e,t,n)},e.prototype._onMultiCallFinally=function(){this._multiCallInProgress=!1,this._multiCallItems=[],this._multiCallCallbacks=[]},e}(),oY=function(){function e(e){this._serviceEndpoint=e,this.imageContainers={},this._fileCacheIdToCombined={},this._rectangles={},this._imageContainerLoadedEvent=new PL}return e.prototype.loadCombinedImage=function(e){var t=this;if(null!=e){var n=new iW(function(){return t._raiseImageLoadedEvent()});for(var r in this.imageContainers[e.fileCacheId]=n,n.updateUrl(this._getImageUrl(e.fileCacheId)),e.itemsRectangles)this._fileCacheIdToCombined[r]=e.fileCacheId,this._rectangles[r]=FN.fromString(e.itemsRectangles[r])}},e.prototype.getImageContainerFor=function(e){return this.hasImageContainerFor(e)?this.imageContainers[this._fileCacheIdToCombined[e]]:null},e.prototype.hasImageContainerFor=function(e){return null!=e&&void 0!==e&&0!==e.length&&e in this._fileCacheIdToCombined},e.prototype.getImageContainerRectangleFor=function(e){return this._rectangles[e]},e.prototype.addImageContainerLoaded=function(e){this._imageContainerLoadedEvent.add(e)},e.prototype.removeImageContainerLoaded=function(e){this._imageContainerLoadedEvent.remove(e)},e.prototype._getImageUrl=function(e){return this._serviceEndpoint+"/txt?f="+encodeURIComponent(e)},e.prototype._raiseImageLoadedEvent=function(){this._imageContainerLoadedEvent.notify(this)},e}(),sY=function(e,t,n,r,i){this._timeout=e,this._message=t,this._stacktrace=n,this._type=r,this._data=i},aY=function(){function e(e,t){void 0===t&&(t=6e4),this._serviceEndpoint=e,this._timeout=t,this._multiCallEnabled=!1,this._nextMultiCallRequest=null,this.imageLoaderService=new oY(this._serviceEndpoint)}return Object.defineProperty(e.prototype,"multiCallEnabled",{get:function(){return this._multiCallEnabled},set:function(e){this._multiCallEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serviceEndpoint",{get:function(){return this._serviceEndpoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiCallStarted",{get:function(){return null!=this._nextMultiCallRequest&&this._nextMultiCallRequest.multiCallStarted},enumerable:!0,configurable:!0}),e.prototype.beginMultiCall=function(){this.multiCallEnabled&&(this.multiCallStarted||(this._nextMultiCallRequest=new iY(this,this.imageLoaderService)),this._nextMultiCallRequest.beginMultiCall())},e.prototype.endMultiCall=function(e){if(void 0===e&&(e=!0),!this.multiCallEnabled)return Promise.resolve(!1);if(!this.multiCallStarted)throw new Error("ServiceProxy: beginMultiCall should be called first to start MultiCall.");return this._nextMultiCallRequest.endMultiCall(e)},e.prototype.UpdateImageItemHandler=function(e,t,n,r,i,o,s,a){this.sendRequest("UpdateImageItemHandler",{canvasData:e,itemHandlerData:t,itemData:n,actualSize:r,preserveAspectRatio:i,url:o},s,a)},e.prototype.UpdateBarcodeItemHandler=function(e,t,n,r,i){this.sendRequest("UpdateBarcodeItemHandler",{canvasData:e,itemHandlerData:t,itemData:n},r,i)},e.prototype.UpdateBoundedTextItemHandler=function(e,t,n,r,i){this._callUpdateItemHandler(e,t,n,r,i,"_updateBoundedTextItemHandler")},e.prototype._updateBoundedTextItemHandler=function(e,t,n,r,i){this.sendRequest("UpdateBoundedTextItemHandler",{itemData:n,canvasData:e,itemHandlerData:t},r,i)},e.prototype.UpdatePathBoundedTextItemHandler=function(e,t,n,r,i){this.sendRequest("UpdatePathBoundedTextItemHandler",{itemData:n,canvasData:e,itemHandlerData:t},r,i)},e.prototype.UpdatePlainTextItemHandler=function(e,t,n,r,i){this._callUpdateItemHandler(e,t,n,r,i,"_updatePlainTextItemHandler")},e.prototype._updatePlainTextItemHandler=function(e,t,n,r,i){this.sendRequest("UpdatePlainTextItemHandler",{itemData:n,canvasData:e,itemHandlerData:t},r,i)},e.prototype.UpdateAutoScaledTextItemHandler=function(e,t,n,r,i){this.sendRequest("UpdateAutoScaledTextItemHandler",{itemData:n,canvasData:e,itemHandlerData:t},r,i)},e.prototype.UpdateArchedTextItemHandler=function(e,t,n,r,i){this.sendRequest("UpdateArchedTextItemHandler",{itemData:n,canvasData:e,itemHandlerData:t},r,i)},e.prototype.UpdateCurvedTextItemHandler=function(e,t,n,r,i){this.sendRequest("UpdateCurvedTextItemHandler",{itemData:n,canvasData:e,itemHandlerData:t},r,i)},e.prototype.UpdateByColorData=function(e,t,n,r){this._callUpdateItemHandler(e,t,null,n,r,"_updateByColorData")},e.prototype._updateByColorData=function(e,t,n,r,i){this.sendRequest("UpdateByColorData",{canvasData:e,colorData:t},r,i)},e.prototype.UpdateByRectangleItemHandlerData=function(e,t,n,r,i){this.UpdateShapeItemHandler(e,t,n,r,i)},e.prototype.UpdateShapeItemHandler=function(e,t,n,r,i){this._callUpdateItemHandler(e,t,n,r,i,"_updateShapeItemHandler")},e.prototype._updateShapeItemHandler=function(e,t,n,r,i){this.sendRequest("UpdateShapeItemHandler",{canvasData:e,itemData:n,itemHandlerData:t},r,i)},e.prototype.GetImageSize=function(e,t,n,r){this._getImageSize(e,t,n,r)},e.prototype._getImageSize=function(e,t,n,r){this.sendRequest("GetImageSize",{imageId:e,pageIndex:t},n,r)},e.prototype.render=function(e,t,n,r){this.sendRequest("render",{product:e,renderingConfig:t},n,r)},e.prototype.getWatermarkItemsAsync=function(e,t,n){var r=this,i={width:e,height:t,watermarkConfig:n};return new Promise(function(e,t){r.sendRequest("getWatermarkItems",i,function(t){e(t)},function(e,n,r){return t({error:e,userContext:n,methodName:r})})})},e.prototype.getWatermarkItems=function(e,t,n,r,i){this.sendRequest("getWatermarkItems",{width:e,height:t,watermarkConfig:n},r,i)},e.prototype.getPathBoundsFromServer=function(e){return t=this,void 0,r=function(){var t,n;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,$U({type:jU.post,url:this.serviceEndpoint+"/GetShapeBounds",headers:[HU.json],data:JSON.stringify({path:e.toString()})})];case 1:return t=r.sent(),[2,FN.FromObject(JSON.parse(t.value))];case 2:return n=r.sent(),console.error("Unable to load shape bounds. Reason: "+n),[3,3];case 3:return[2]}})},new((n=void 0)||(n=Promise))(function(e,i){function o(e){try{a(r.next(e))}catch(t){i(t)}}function s(e){try{a(r.throw(e))}catch(t){i(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(o,s)}a((r=r.apply(t,[])).next())});var t,n,r},e.prototype.sendRequest=function(e,t,n,r,i){void 0===i&&(i=!1);var o=new XMLHttpRequest,s=this._serviceEndpoint;"render"===e&&(s=s.replace("api/ccviewer","api/rendering")),o.open("POST",s+"/"+e),i&&(o.responseType="arraybuffer"),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.timeout=this._timeout,o.onload=function(t){if(200===o.status)i?n(o.response,o):n(JSON.parse(o.response));else{var s=new sY(!1,o.statusText,o.response);r(s,null,e)}},o.onerror=function(t){r("error",null,e)},o.ontimeout=function(t){var n=new sY(!0,o.statusText,o.response);r(n,null,e)};var a=JSON.stringify(t);o.send(a)},e.prototype._callUpdateItemHandler=function(e,t,n,r,i,o){var s=o;o.startsWith("_")&&(s=o.charAt(1).toUpperCase()+o.substring(2)),null!=this._nextMultiCallRequest&&this._nextMultiCallRequest.multiCallStarted&&this._nextMultiCallRequest.queueForMultiCall({canvasData:e,itemHandlerData:t,itemData:n,methodName:s},r,i)||this[o](e,t,n,r,i)},e}(),lY=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cY=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},uY=function(e){function t(t){var n=e.call(this)||this;return n._canvas=t,n}return lY(t,e),t.prototype.getLayerById=function(e){for(var t=0,n=this.length;t<n;t++){var r=this.getItem(t);if(r.uniqueId==e)return r}return null},t.prototype.getLayerByContainerId=function(e){for(var t=0,n=this.length;t<n;t++){var r=this.getItem(t);if(r.container.id==e)return r}return null},t.prototype.getLayersByName=function(e){for(var t=[],n=0;n<this.length;n++)this.getItem(n).name==e&&t.push(this.getItem(n));return t},t.prototype.getItemHandlersByName=function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this.getItem(n),i=0;i<r.itemHandlers.length;i++)r.itemHandlers.getItem(i).name===e&&t.push(r.itemHandlers.getItem(i));return t},t.prototype._onLayerAdded=function(e,t){var n=this._canvas;n&&(e.canvas=n,e.onLayerAdded())},t.prototype._onLayerMoved=function(e,t,n){},t.prototype.removeRange=function(t,n){var r=(function(e){this._onLayerRemoved(e.item,e.index)}).bind(this);try{return this.add_itemRemoved(r),e.prototype.removeRange.call(this,t,n)}finally{this.remove_itemRemoved(r)}},t.prototype.insertAt=function(t,n){var r,i;Array.isArray(n)||(n=[n]);try{for(var o=cY(n),s=o.next();!s.done;s=o.next())if(this.contains(s.value))throw new kL(bj)}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}e.prototype.insertAt.call(this,t,n);for(var a=0;a<n.length;a++){var l=n[a];this._onLayerAdded(l,this._collection.indexOf(l))}},t.prototype.move=function(t,n){var r=e.prototype.move.call(this,t,n);return r&&this._onLayerMoved(r,t,n),r},t.prototype.clear=function(){var t,n;try{for(var r=cY(this),i=r.next();!i.done;i=r.next())i.value.dispose()}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.prototype.clear.call(this)},t}(Ij),hY=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},dY=function(){function e(e,t){var n=this;this._canvas=e,this._viewer=t,this._dndStarting=!1,this._dndStarted=!1,this._isShown=!1,this._startPoint=null,this._currentPoint=null,this._currentPointClient=null,this._isOutOfCanvas=!1,this._dragSource=null,this._dragOver=null,this._dragImg=null,this._dragTargets=null,this._allowedTargets=null,this._onDragNDropStarting=function(e){n._canvas._onDragNDropStarting(e);var t=e.source.item,r=n._canvas.viewer.surface.getAllItems({ignoreMockups:!1,flatGroupItems:!0}),i=FL.filter(r.toArray(),function(e){return null!=e.parentContainer&&e instanceof FV&&!(null!=e.content&&e.content instanceof uz)&&e!==t&&function(e,t){if(e.allowedSubfolder!==t.allowedSubfolder)return!1;if(null==e.allowedTabs&&null!=t.allowedTabs||null!=e.allowedTabs&&null==t.allowedTabs)return!1;if(null!=e.linkId&&t.linkId===e.linkId)return!1;if(null!=e.allowedTabs&&null!=t.allowedTabs){if(e.allowedTabs.length!==t.allowedTabs.length)return!1;for(var n=0;n<e.allowedTabs.length;n++)if(!t.allowedTabs.includes(e.allowedTabs[n]))return!1}return!0}(t,e)&&e.parentContainer.name!==bU.BG_CONTAINER_NAME&&e.manipulationPermissions.allowDragAndDrop});e.allowedTargets=i.map(function(e){return n._canvas.viewer.getHandler(e)})},this._onDragNDropPerformed=function(e){n._canvas._onDragNDropPerformed(e);var t=e.target,r=e.source.item,i=r.content,o=null,s=null;null!=t&&(s=(o=t.item).content);var a=s&&!o.isStubOrEmpty,l=a?new lV({isUserImage:s.isUserImage,isVector:s.source.isVector,name:s.name,size:{width:s.source.width,height:s.source.height},storageId:s.source.id,origin:s.source.origin}):r.stubStorageMeta;if(n._createAndInsertImageContent(l,r,!a,null!=s?s.tags:null),null!=o){var c=new lV({isUserImage:i.isUserImage,isVector:i.source.isVector,name:i.name,size:{width:i.source.width,height:i.source.height},storageId:i.source.id,origin:i.source.origin});n._createAndInsertImageContent(c,o,null,i.tags)}},this._createAndInsertImageContent=function(e,t,r,i){var o,s;void 0===r&&(r=!1),void 0===i&&(i={});var a=n._canvas.viewer,l=a.surface.parentProduct,c=(null!=l?l.getAllItems({ignoreMockups:!1,flatGroupItems:!0}):a.surface.getAllItems().toArray()).filter(function(e){return e instanceof FV}),u=null!=t.linkId?c.filter(function(e){return e.linkId===t.linkId}):[],h=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(hY(arguments[t]));return e}([t],u);try{for(var d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(h),p=d.next();!p.done;p=d.next()){var f=p.value,m=null==e||null==e.storageId?null:r$.createImageContentForPlaceholder(f,e,a.productHandler);f.isStubContent=null!=r&&r,null!=m&&null!=i&&(m.tags=i),n._viewer.commandManager.execute(GG.addContent,{placeholder:f,content:m},RX.NotUpdate)}}catch(g){o={error:g}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}}}return e.prototype.processMouseEvent=function(e){var t=new MN(e.x,e.y);if("mousedown"===e.type){var n=this.hitTest(t),r=this._canvas.currentItemHandler;if(null!=n&&null!=r&&n.uniqueId===r.uniqueId){this._isOutOfCanvas=this._testOutOfCanvas(t);var i=n.getPermissions(),o=i.allowDragAndDrop;n.isStubOrEmpty()||!1!==i.allowMove&&!this._canvas.simpleMode||!o||this._isOutOfCanvas||n.content instanceof vW||(this._dndStarting=!0,this._startPoint=t,this._currentPoint=t,this._currentPointClient=new MN(e.clientX+window.scrollX,e.clientY+window.scrollY),this._dragSource=n,this._allowedTargets=null)}}else if("mousemove"===e.type){if(this._dndStarting){var s=Math;if(s.abs(t.x-this._startPoint.x)>4||s.abs(t.y-this._startPoint.y)>4){var a={source:this._dragSource,allowedTargets:null};this._onDragNDropStarting(a),null!=a.allowedTargets&&(this._allowedTargets=a.allowedTargets),this._dndStarted=!0,this._dndStarting=!1,this._dragSource._reloadPlaceholderButtons(),this._dragImg=this._image,this._setDragTargets(this._dragSource)}}this._dndStarted&&(this._isOutOfCanvas=this._testOutOfCanvas(t),n=this.hitTest(t),this._dragTargets.includes(n)||(n=null),this._setDragOver(n),this._currentPoint=t,this._currentPointClient=new MN(e.clientX+window.scrollX,e.clientY+window.scrollY))}else if("mouseup"===e.type&&(this._dndStarted||this._dndStarting)){var l=this.hitTest(t);this.isDragTarget(l)||(l=null),this._testOutOfCanvas(t)?(this._onDragNDropPerformed({source:this._dragSource,target:null}),this._canvas.setSelectedItemHandlers([])):null!=l&&l!=this._dragSource&&(this._onDragNDropPerformed({source:this._dragSource,target:l}),this._canvas.setSelectedItemHandlers([l])),this._setDragOver(null),this._dndStarted=!1,this._dndStarting=!1;var c=this._dragSource;this._dragSource=null,c&&c._reloadPlaceholderButtons(),this._startPoint=null,this._currentPoint=null,this._currentPointClient=null,this._dragImg=null,this._dragOver=null,this._unsetDragTargets(),this.draw(),this._canvas._onDragNDropDone()}},e.prototype._setDragOver=function(e){if(null!=this._dragOver&&this._dragOver!==e){var t=this._dragOver;this._dragOver=null,this._canvas.redrawDesign(),t._reloadPlaceholderButtons()}e&&e!==this._dragSource&&e!==this._dragOver&&(this._dragOver=e,this._canvas.redrawDesign(),this._dragOver._reloadPlaceholderButtons())},e.prototype.isDragSource=function(e){return this._dragSource===e},e.prototype.isDragTarget=function(e){return null!=this._dragTargets&&this._dragTargets.includes(e)},e.prototype.isDragStarted=function(){return this._dndStarted},e.prototype.isDragOver=function(e){return void 0===e&&(e=null),null===e?null!=this._dragOver:this._dragOver===e},e.prototype.isOutOfCanvas=function(){return this._isOutOfCanvas},e.prototype.hitTest=function(e){var t=this._canvas.getItemHandlersByHitTest(e).filter(function(e){return!(e instanceof eX)})[0];return t instanceof YW?t:null},e.prototype._testOutOfCanvas=function(e){return e.x<0||e.x>this._canvas.workspaceWidth||e.y<0||e.y>this._canvas.workspaceHeight},Object.defineProperty(e.prototype,"_image",{get:function(){return this._dragSource.content._imageContainer._image},enumerable:!0,configurable:!0}),e.prototype._unsetDragTargets=function(){var e=this._dragTargets;this._dragTargets=null,null!=e&&(e.forEach(function(e){return e._reloadPlaceholderButtons()}),this._canvas.redraw())},e.prototype._setDragTargets=function(e){var t=this,n=this._canvas.getAllItemHandlers({onlyVisible:!0,onlyType:YW,flatGroupItems:!0});this._dragTargets=n.filter(function(n){return n!==e&&(null==t._allowedTargets||t._allowedTargets.includes(n))}),this._dragTargets.length>0&&(this._dragTargets.forEach(function(e){return e._reloadPlaceholderButtons()}),this._canvas.redraw())},e.prototype.draw=function(){this._dndStarted?(this._canvas.showDnd(this._currentPointClient,this._dragImg),this._isShown=!0):this._isShown&&(this._canvas.hideDnd(),this._isShown=!1)},e}(),pY=function(){function e(e,t){this.rotateDiv=null,this._canvas=e,this._viewer=t,this._rotationStyle=null}return e.prototype.addRotationStyle=function(){null!=this._viewer&&(null!=this._rotationStyle&&this._rotationStyle.remove(),this._rotationStyle=document.createElement("style"),this._rotationStyle.type="text/css",this._rotationStyle.innerHTML="\n                #rotate-circle svg { \n                    position: absolute; \n                    width: 16px; \n                    height: 16px;                     \n                    top: 3px; \n                    left: 3px; \n                } \n                #degree { \n                    position: absolute; \n                    border-radius: 5px; \n                    background-color: rgba(0, 0, 0, 0.8); \n                    color: #fff; \n                    display: flex; \n                    align-items: center; \n                    justify-content: center; \n                    z-index: 2; \n                    font-size: 12px; \n                    line-height: 14px; \n                    height: 22px; \n                    width: 45px; \n                    transition: 0.3s opacity; \n                }\n                ",document.head.appendChild(this._rotationStyle))},e.prototype.addRotateDiv=function(e,t){if(null!=this._viewer&&null!=this._viewer.whitespaceDiv){var n=this._viewer.whitespaceDiv;this.rotateDiv=document.createElement("div"),this.rotateDiv.id="degree",n.appendChild(this.rotateDiv),this.updateRotatePositionDiv(e,t),this._canvas.updateHoverDiv()}},e.prototype.removeRotateDiv=function(){null!=this.rotateDiv&&(this.rotateDiv.remove(),this.rotateDiv=null)},e.prototype.updateRotatePositionDiv=function(e,t){null!=this.rotateDiv&&(this.rotateDiv.style.top=e+"px",this.rotateDiv.style.left=t+"px")},e.prototype.updateRotateDegreeDiv=function(e){null!=this.rotateDiv&&(this.rotateDiv.innerHTML=Math.round(e)%360+"&deg;")},e.prototype.rotateHoverLabel=function(e,t){e>45&&e<135?this._canvas.hoverDiv.querySelectorAll("#hover-label").forEach(function(e){e.style.left="-"+(t.width/2+10)+"px",e.style.top=t.height-t.width/2-7+"px",e.style.transform="rotate(-90deg)"}):e>=135&&e<225?this._canvas.hoverDiv.querySelectorAll("#hover-label").forEach(function(e){e.style.left="0px",e.style.top=t.height+5+"px",e.style.transform="rotate(180deg)"}):e>225&&e<315?this._canvas.hoverDiv.querySelectorAll("#hover-label").forEach(function(e){e.style.left=t.width/2+10+"px",e.style.top=t.width/2-10+"px",e.style.transform="rotate(90deg)"}):this._canvas.hoverDiv.querySelectorAll("#hover-label").forEach(function(e){e.style.left="0px",e.style.top="-20px",e.style.transform="rotate(0deg)"})},e.prototype.calculatePositionRotateDiv=function(e,t,n,r,i,o){var s=this._canvas.mul;switch(e){case 0:var a=r.x*s+t+20,l=r.y*s+n+20;break;case 90:a=o-r.y*s+t+20,l=r.x*s+n+20;break;case 180:a=i-r.x*s+t+20,l=o-r.y*s+n+20;break;case 270:a=r.y*s+t+20,l=i-r.x*s+n+20}return new MN(a,l)},e.getRotatedPoint=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n:e.contentAngle;return this.getRotatedPointFromSize(t,new QN(e.workspaceWidth,e.workspaceHeight),r)},e.getRotatedPointFromSize=function(e,t,n){var r=e.clone();return r.rotateAt(n,new MN),90===n?r.translate(t.height,0):180===n?r.translate(t.width,t.height):270===n&&r.translate(0,t.width),r},e}(),fY=function(){function e(e,t){if(this.N="",this.V=!0,this.L=!1,this.ID="l"+(new Date).getTime()+Math.round(1e3*Math.random()),this.VO=[],this.RenderingType=Tj.Normal,e){if(this.RenderingType=e.renderingType,t)return;this.N=e.name,this.V=e.getVisible(),this.L=e.locked,this.R=e.region,this.ID=e.uniqueId,this.VO=[];for(var n=e.itemHandlers,r=0;r<n.length;r++){var i=n.getItem(r);this.VO.push({T:i.getTypeName(),D:i.getData("asObject")})}this.TextureStorageId=e.textureStorageId,this.TextureSourceWidth=e.textureSourceWidth,this.TextureSourceHeight=e.textureSourceHeight,this.PreviewColor=e.previewColor}}return e.applyState=function(e,t,n){if(n||(n={}),t){t.name=e.N,t.setVisible(e.V),t.locked=e.L,t.uniqueId=e.ID,t.textureStorageId=e.TextureStorageId,t.textureSourceWidth=e.TextureSourceWidth,t.textureSourceHeight=e.TextureSourceHeight,t.previewColor=e.PreviewColor,t.renderingType=e.RenderingType,e.R&&(t.region=FN.FromObject(e.R));for(var r=t.itemHandlers,i=0;i<e.VO.length;i++){var o=e.VO[i].D,s=n[o.ID];s?(n[o.ID]=null,s.setData(o)):((s=(new XW).create(e.VO[i].T)).setData(o),s.initialize()),r.add(s)}}},e}(),mY=function(e,t,n){if(this.L=[],this.XDpi=72,this.YDpi=72,this.Z=1,this.RV=null,this.MinFontSize=null,this.MaxFontSize=null,this.MinLeading=null,this.MaxLeading=null,e){this.RgbCPId=e.rgbColorProfileFileId,this.CmykCPId=e.cmykColorProfileFileId,this.GrayscaleCPId=e.grayscaleColorProfileFileId,this.Z=e.zoom,this.XDpi=BL.screenDpi,this.YDpi=BL.screenDpi,this.TDpi=e.targetDpi,this.WW=e.workspaceWidth,this.WH=e.workspaceHeight,this.MinFontSize=e.minFontSize,this.MaxFontSize=e.maxFontSize,this.MinLeading=e.minLeading,this.MaxLeading=e.maxLeading;var r=e.layers;if(this.L=[],!1===t||void 0===t){for(var i=0;i<r.length;i++)this.L.push(new fY(r.getItem(i)));this.ReGC=e.resizeGripColor,this.RoGC=e.rotationGripColor,this.ReGS=e.resizeGripSize,this.RoGS=e.rotationGripSize,this.RV=e.returnValue,this.SB=e.isSquaredBackground,this.MW=e.marginWidth,this.MC=e.marginColor,this.LM=e.leftMargin,this.RM=e.rightMargin,this.TM=e.topMargin,this.BM=e.bottomMargin,this.CM=e.constrainedMarginEnabled,this.Tags=e.tags,this.LIU=e.loadingImageUrl,this.SC=e.selectionColor,this.SW=e.selectionWidth,this.ReGLC=e.resizeGripLineColor,this.RoGLC=e.rotationGripLineColor,this.RoGLL=e.rotationGripLineLength,this.PBGCC=e.placeholderButtonGroupCssClass,this.FloatingItemToolbarCssClass=e.floatingItemToolbarCssClass,this.SIBCC=e.selectImageButtonCssClass,this.SBBCC=e.selectBarcodeButtonCssClass,this.HBCC=e.handleButtonCssClass,this.DBCC=e.doneButtonCssClass,this.DeleteToolbarButtonCssClass=e.deleteToolbarButtonCssClass,this.EditToolbarButtonCssClass=e.editToolbarButtonCssClass,this.SelectToolbarButtonCssClass=e.selectToolbarButtonCssClass,this.QCCCC=e.qualityChangeContainerCssClass,this.QCSBCC=e.qualityChangeScaleBarCssClass,this.QBTWCSBCC=e.qualityBadToWarningChangeScaleBarCssClass,this.QWTGCSBCC=e.qualityWarningToGoodChangeScaleBarCssClass,this.QBTGCSBCC=e.qualityBadToGoodChangeScaleBarCssClass,this.QNACSBCC=e.qualityNoAnimationChangeScaleBarCssClass,this.QCIBCC=e.qualityChangeInfoBarCssClass,this.VCCC=e.violationContainerCssClass,this.VBCC=e.violationWarningButtonCssClass,this.GVICC=e.goodViolationIconCssClass,this.WVICC=e.warningViolationIconCssClass,this.BVICC=e.badViolationIconCssClass,this.BBGCC=e.bigButtonGroupCssClass,this.SBT=e.selectButtonTitle,this.HBT=e.handleButtonTitle,this.DBT=e.doneButtonTitle,this.DLTBT=e.deleteButtonTitle,this.EBT=e.editButtonTitle,this.MSE=e.multipleSelectionEnabled,this.MMT=e.mouseMoveTimeout,this.DS=e.disableSmoothing}else null!=n&&this.L.push(new fY(r.getLayerById(n),!0))}},gY=function(){function e(e,t){var n=this;if(this._container=e,this._uniqueId="l"+(new Date).getTime()+Math.round(1e3*Math.random()),this._textureSizeMultiplier=null,this._textureUrl=null,this._isTextureLoaded=!1,this._createItemHandlersCollection=function(){n.itemHandlers.setRange(n._container.items.ofType(vH).select(n._canvas.handlerFactory.get).toArray()),n._canvas.redraw()},this._onContainerPropertyChanged=function(e,t){switch(t){case"visible":n.setVisible(e.visible);break;case"previewTextureSource":n.updateTexture(!0)}},this._canvas=null,this._itemHandlers=new B$(this),this._visible=!0,this.updateTexture=function(e){if(null!=n._canvas&&!n.locked&&(null!=n.textureStorageId&&null!=n.textureSourceWidth&&null!=n.textureSourceHeight||null!=n.previewColor))if(null==n.previewColor){var t=Math.max(n._canvas.width/n.textureSourceWidth,n._canvas.height/n.textureSourceHeight);if(t=Math.min(1,t),e||null==n._textureSizeMultiplier||!(n._textureSizeMultiplier>t)){n._textureSizeMultiplier=t;var r=n._textureUrl,i=parseInt((n.textureSourceWidth*t).toString()),o=parseInt((n.textureSourceHeight*t).toString());if(n._textureUrl=yW.getImageUrl(n._canvas,n.textureStorageId,i,o,!1,null,!0),r!==n._textureUrl){var s=new Image(i,o);s.crossOrigin="anonymous",s.src=n._textureUrl;var a=n;s.onload=function(){a.textureImage=s,a._isTextureLoaded=!0,a._canvas.onLayerTextureLoaded()}}}}else if(null==n.textureImage){n.textureImage=document.createElement("canvas"),n.textureImage.width=10,n.textureImage.height=10;var l=n.textureImage.getContext("2d");l.fillStyle=new Kj(n.previewColor).preview,l.fillRect(0,0,10,10)}},this._disposeEvent=new EL,this.textureImage=null,null!=t&&(this._canvas=t),null!=this._container){this._container.addPropertyChanged(this._onContainerPropertyChanged);var r=function(e){null!=e&&(n.itemHandlers.insertAt(e.index,n._canvas.handlerFactory.get(e.item)),n._canvas.updateTexts())},i=function(e){null!=e&&n.itemHandlers.removeAt(e.index)},o=function(e){null!=e&&n.itemHandlers.move(e.oldIndex,e.newIndex)};this._container.items.add_itemAdded(r),this._container.items.add_itemRemoved(i),this._container.items.add_itemMoved(o),this._disposeEvent.add(function(){n._container.items.remove_itemAdded(r),n._container.items.remove_itemRemoved(i),n._container.items.remove_itemMoved(o)}),this._createItemHandlersCollection(),this._visible=this._container.visible}}return Object.defineProperty(e.prototype,"uniqueId",{get:function(){return this._uniqueId},set:function(e){this._uniqueId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},set:function(e){this._canvas=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){var e=this.canvas;return e?e.layers.indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){var e=new fY(this);return JSON.stringify(e)},set:function(e){if(e&&""!=e){var t=JSON.parse(e);fY.applyState(t,this)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"region",{get:function(){return this._container.region},set:function(e){this._container.region=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemHandlers",{get:function(){return this._itemHandlers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._container.name},set:function(e){this.container.name=e},enumerable:!0,configurable:!0}),e.prototype.getVisible=function(){return this._visible},e.prototype.setVisible=function(e,t){this._visible!==e&&(this._visible=e,(t=null==t||t)&&null!=this._canvas&&(this._canvas.updatePlaceholderButtonGroups(),this._canvas.updateViolationContainers()))},Object.defineProperty(e.prototype,"locked",{get:function(){return this._container.locked},set:function(e){this.locked!==e&&(this.container.locked=e,null!=this._canvas&&this._canvas.updatePlaceholderButtonGroups())},enumerable:!0,configurable:!0}),e.prototype._onRemovedFromCanvas=function(e){for(var t=this.itemHandlers,n=t.length,r=0;r<n;r++)t.getItem(r).canvas=null;this._canvas.remove_zoomChanged(this.updateTexture)},e.prototype.onLayerAdded=function(){this.updateTexture(),this._canvas.add_zoomChanged(this.updateTexture)},e.prototype.isTextureLoadedOrNotExists=function(){return null==this.textureStorageId||this._isTextureLoaded},e.prototype.dispose=function(){this._disposeEvent.notify()},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureStorageId",{get:function(){return this._container instanceof Dj?this._container.previewTextureSource.id:null},set:function(e){this._container instanceof Dj&&(this._container.previewTextureSource.id=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureSourceWidth",{get:function(){return this._container instanceof Dj?this._container.previewTextureSource.width:null},set:function(e){this._container instanceof Dj&&(this._container.previewTextureSource.width=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureSourceHeight",{get:function(){return this._container instanceof Dj?this._container.previewTextureSource.height:null},set:function(e){this._container instanceof Dj&&(this._container.previewTextureSource.height=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewColor",{get:function(){return this._container instanceof Mj?this._container.previewColor:null},set:function(e){this._container instanceof Mj&&(this._container.previewColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderingType",{get:function(){return this._container.renderingType},set:function(e){this.container.renderingType=e},enumerable:!0,configurable:!0}),e}(),yY=function(){function e(e){this._canvas=e}return e.prototype.processMouseEvent=function(e,t){"mousemove"===e.type&&(null==t?this._canvas.hideHover():this._canvas.showHover(t.rectangle,t.item.name))},e}(),_Y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},vY=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_Y(arguments[t]));return e},bY=function(){function e(e,t,n,r){var i=this;this._viewer=e,this._selection=t,this._dndHandler=n,this._rotateHandler=r,this._document=null,this._parent=null,this._whitespace=null,this._dndDiv=null,this._dndStyle=null,this._spotlightDivs=[],this._spotlightOptions=[],this._selectionDiv=null,this._parentSelectionDiv=null,this._selectionStyle=null,this._buttonStyle=null,this.hoverDiv=null,this._textEditorDiv=null,this._textEditorInnerDiv=null,this.surfaceCanvas=null,this.activeCanvas=null,this.inactiveCanvas=null,this.designCanvas=null,this.cursorCanvas=null,this.staticTextCanvas=null,this.activeTextCanvas=null,this._getRotationCircleSvg=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("width","16"),e.setAttribute("height","16"),e.setAttribute("viewBox","0 0 16 16"),e.setAttribute("fill","none"),e.innerHTML='<path d="M11.151 2.54293C14.1643 4.28262 15.1967 8.13564 13.457 11.1489C13.175 11.6374 12.8374 12.0738 12.4569 12.4548L10.5467 14.3629M4.85101 13.4548C1.83777 11.7151 0.805356 7.86213 2.54505 4.84888C2.82707 4.36041 3.16463 3.924 3.54514 3.54301L5.4555 1.63498M10.5456 11.182L10.5467 14.3629M10.5467 14.3629L13.7275 14.364M5.45439 4.81807L5.4555 1.63498M5.4555 1.63498L2.27241 1.63609" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>',e.style.color="var(--de-brand-primary)",e},this._showQualityChangeContainer=function(e){if(!e.item.violationSettings.allowImageQuality)return!1;if(e instanceof YW&&e.isStubOrEmpty())return!1;var t=r$.getImageItem(e.item);return!(null!=t&&t.source.isVector||!(i._selection.isResizing()||e instanceof YW&&e.forceQualityChangeInfoBar)||e.isQualityChangeBarEmpty)},this._textEditorId="textEditor",this._onZoomedScrolledDelegate=function(){var e=i._selection.currentItemHandler;null!=e&&i._updateTextEditorPosition(e.rectangle,e.item instanceof BV?e.item.alignment:null,e.item.borderWidth,e.item instanceof gz?e.item.verticalAlignment:null)},this._stopPropagationFnc=function(e){e.stopPropagation()};var o=this._viewer.id;if(null==o)throw new ML("Element id cannot be null or undefined");this._surfaceCanvasId=o,this._activeCanvasId=o+"_active",this._inactiveCanvasId=o+"_inactive",this._designCanvasId=o+"_design",this._cursorCanvasId=o+"_cursor",this._staticTextCanvasId=o+"_staticText",this._activeTextCanvasId=o+"_activeText"}return Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(e){null!=e&&e.equals(this._offset)||null==e&&null!=this.offset||(this._offset=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_canvas",{get:function(){return this._viewer.canvas},enumerable:!0,configurable:!0}),e.prototype.addStyles=function(){this._addButtonStyles(),this._addSelectionStyle(),this._addDndStyle(),this._rotateHandler.addRotationStyle()},e.prototype._addButtonStyles=function(){null!=this._buttonStyle&&this._buttonStyle.remove(),this._buttonStyle=document.createElement("style"),this._buttonStyle.type="text/css",this._buttonStyle.innerHTML=".buttonsHidden {opacity: 0; transition: 0.3s opacity; pointer-events: none !important;}.buttonsShown {opacity: 1; transition: 0.3s opacity; position: relative;}.elementHidden {opacity: 0; transition: 0.3s opacity;}.elementShown {opacity: 1; transition: 0.3s opacity;}",document.head.appendChild(this._buttonStyle)},e.prototype._addSelectionStyle=function(){null!=this._selectionStyle&&this._selectionStyle.remove(),this._selectionStyle=document.createElement("style"),this._selectionStyle.type="text/css",this._selectionStyle.innerHTML="#grips, #grips .selection, #hover {position: absolute; z-index: 1; pointer-events: none; box-sizing: border-box}#hover-label, .hover-label {left: 0px; top: -20px; position: absolute; width: 100%; text-align: left;min-width: 48px; font-family: Roboto; font-style: normal; font-weight: normal; font-size: 12px; line-height: 14px; white-space: nowrap; overflow: hidden;text-overflow: ellipsis;}",document.head.appendChild(this._selectionStyle)},e.prototype._addDndStyle=function(){null!=this._dndStyle&&this._dndStyle.remove(),this._dndStyle=document.createElement("style"),this._dndStyle.type="text/css",this._dndStyle.innerHTML="#ccDndDiv {position: absolute; left: 0; top: 0; z-index: 3; pointer-events: none; box-sizing: border-box; width: 100%; height: 100%;}#ccDndDiv .thumb {position: absolute; left: 0; top: 0; z-index: 3; pointer-events: none; box-sizing: border-box; width: 100px; height: 100px; border: 1px solid black; opacity: 0.8; background-size: cover;}#ccDndDiv .thumb.outside-canvas:after { content: '\\e92b'; font-size: 46px; text-align: center; font-family: 'Material Icons'; line-height: 100px; vertical-align: middle; color: white; background-color: red; opacity: 0.5; width: 100%; height: 100%; display: block; }#ccDndDiv .thumb.outside-canvas { opacity: 0.5 }#ccDndDiv .thumb.drag-over { opacity: 0.4 }.cc-dnd-icon {color: white}.cc-dnd-over {transition: transform 1.5s; transform: scale(1.2); }",document.head.appendChild(this._dndStyle)},e.prototype.addTextEditorStyles=function(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.head.appendChild(t)},e.prototype._addStaticTextCanvas=function(e,t){this.staticTextCanvas=this._createCanvasElement(this._staticTextCanvasId,e,t),this.staticTextCanvas.style.visibility="hidden",this._parent.appendChild(this.staticTextCanvas)},e.prototype.addElement=function(e,t,n,r){this._parent=e,this._document=e.ownerDocument,this._whitespace=t,null!=this._document&&null!=this._whitespace&&(this._addStaticTextCanvas(n,r),this.surfaceCanvas=this._createCanvasElement(this._surfaceCanvasId,n,r),this._parent.appendChild(this.surfaceCanvas),this.activeCanvas=this._createCanvasElement(this._activeCanvasId,n,r),this._parent.appendChild(this.activeCanvas),this.activeTextCanvas=this._createCanvasElement(this._activeTextCanvasId,n,r),this._parent.appendChild(this.activeTextCanvas),this.inactiveCanvas=this._createCanvasElement(this._inactiveCanvasId,n,r),this._parent.appendChild(this.inactiveCanvas),this.designCanvas=this._createCanvasElement(this._designCanvasId,n,r),this._parent.appendChild(this.designCanvas),this.cursorCanvas=this._createCanvasElement(this._cursorCanvasId,n,r),this._parent.appendChild(this.cursorCanvas),this._viewer.frontEndTextRenderingEnabled&&this._addTextEditorDiv(),this._addDndDiv(),this._addSelectionDiv(),this._addParentSelectionDiv(),this._addHoverDiv())},e.prototype.replaceStaticTextCanvas=function(){var e,t=this.staticTextCanvas.width,n=this.staticTextCanvas.height,r=null===(e=this.staticTextCanvas)||void 0===e?void 0:e.parentNode;return null!=r&&(r.removeChild(this.staticTextCanvas),this.staticTextCanvas=null),this._addStaticTextCanvas(t,n),this.staticTextCanvas},e.prototype.removeElement=function(){var e=this._getAllCanvases(),t=null!=e[0]?e[0].parentNode:null;if(null!=t)for(var n=e.length-1;n>=0;--n){var r=e[n];null!=r&&t.removeChild(r)}this._removeTextEditorDiv(),this._removeDndDiv(),this._removeSelectionDiv(),this._removeParentSelectionDiv(),this._removeHoverDiv()},e.prototype.updateElementSize=function(t,n){for(var r=this._getAllCanvases(),i=0;i<r.length;i++){var o=r[i];null!=o&&e.setElementSize(o,t,n)}},e.prototype.moveActiveTextCanvasOnTop=function(){this._parent.insertBefore(this.activeTextCanvas,this.designCanvas)},e.prototype.moveActiveTextCanvasBack=function(){this._parent.insertBefore(this.activeTextCanvas,this.inactiveCanvas)},e.prototype._addDndDiv=function(){this._dndDiv=this._document.createElement("div"),this._dndDiv.id="ccDndDiv",this._document.body.appendChild(this._dndDiv);var e=this._document.createElement("div");e.id="ccDndThumb",e.classList.add("thumb"),e.style.visibility="hidden",e.style.left="50%",e.style.top="0%",this._dndDiv.appendChild(e)},e.prototype._removeDndDiv=function(){null!=this._dndDiv&&(this._dndDiv.remove(),this._dndDiv=null)},e.prototype.showDnd=function(e,t,n){this._dndDiv.querySelectorAll("div[id^=ccDndThumb]").forEach(function(t){t.style.left=e.x-50+"px",t.style.top=e.y-50+"px"}),this._dndDiv.style.visibility="visible",this._dndDiv.querySelectorAll("div[id^=ccDndThumb]").forEach(function(e){e.style.visibility="visible",e.style.backgroundImage="url("+t.src+")",e.style.transform="rotate("+n+"deg)"}),this._dndHandler.isOutOfCanvas()?this._dndDiv.querySelectorAll("div[id^=ccDndThumb]").forEach(function(e){e.classList.add("outside-canvas")}):this._dndDiv.querySelectorAll("div[id^=ccDndThumb]").forEach(function(e){e.classList.remove("outside-canvas")}),this._dndHandler.isDragOver()?this._dndDiv.querySelectorAll("div[id^=ccDndThumb]").forEach(function(e){e.classList.add("drag-over")}):this._dndDiv.querySelectorAll("div[id^=ccDndThumb]").forEach(function(e){e.classList.remove("drag-over")})},e.prototype.hideDnd=function(){this._dndDiv.style.visibility="hidden",this._dndDiv.querySelectorAll("div[id^=ccDndThumb]").forEach(function(e){e.style.visibility="hidden"})},e.prototype.showSpotlight=function(e,t,n){var r=this;this._spotlightOptions=t,e.forEach(function(e,i){var o=t[i];if(!r._spotlightDivs.find(function(e){return e.id==="spotlight_"+o.id})){var s=document.createElement("div");s.id="spotlight_"+o.id,r.setSpotlightStyles(s,o,e,n),s.animate([{opacity:0},{opacity:1}],o.transition||0).play(),r._spotlightDivs.push(s),r._whitespace.appendChild(s)}})},e.prototype.hideSpotlight=function(e){var t=this;e.forEach(function(e){var n=t._spotlightDivs.find(function(t){return t.id==="spotlight_"+e});if(n){var r=t._spotlightOptions.find(function(t){return t.id===e}),i=n.animate([{opacity:1},{opacity:0}],(null==r?void 0:r.transition)||0);i.play(),i.addEventListener("finish",function(){return t._whitespace.removeChild(n)})}}),this._spotlightOptions=this._spotlightDivs.filter(function(t){return e.find(function(e){return t.id===e})}),this._spotlightDivs=this._spotlightDivs.filter(function(t){return!e.find(function(e){return"spotlight_"+e===t.id})})},e.prototype.updateSpotlight=function(e,t,n,r){var i=this;e.forEach(function(e,o){var s=i._spotlightDivs.find(function(t){return t.id==="spotlight_"+e});s.innerHTML="",i.setSpotlightStyles(s,n[o],t[o],r)})},e.prototype.setSpotlightStyles=function(e,t,n,r){if(t.name){var i=document.createElement("div");i.innerText=t.name,i.style.color=(null==t?void 0:t.color)||this._canvas.resizeGripLineColor,i.style.position="absolute",i.style.top="-20px",i.classList.add("hover-label"),e.appendChild(i)}var o=KN.getRectWithOffset(n,this._offset);e.style.position="absolute",e.style.boxSizing="border-box",e.style.boxShadow="0px 1px 3px rgba(0, 0, 0, 0.2)",this._updateFramePosition(e,o,r),e.style.border=(t.width||1)+"px solid "+((null==t?void 0:t.color)||this._canvas.resizeGripLineColor)},e.prototype._addParentSelectionDiv=function(){var e=document.createElement("div");e.classList.add("parent-selection"),e.style.visibility="hidden",e.style.position="absolute",this._whitespace.appendChild(e),this._parentSelectionDiv=e,this.updateParentSelectionDiv()},e.prototype._addSelectionDiv=function(){var e=this;this._selectionDiv=document.createElement("div"),this._selectionDiv.id="grips",this._selectionDiv.style.visibility="hidden",this._whitespace.appendChild(this._selectionDiv);var t=document.createElement("div");t.appendChild(this._getRotationCircleSvg()),t.id="rotate-circle",t.classList.add("selection"),t.style.left="calc(50% - 12px)",t.style.bottom="0%",this._selectionDiv.appendChild(t),[{left:0,top:0,id:"resize-left-top"},{left:100,top:0,id:"resize-right-top"},{left:100,top:100,id:"resize-right-bottom"},{left:0,top:100,id:"resize-left-bottom"},{left:0,top:50,id:"resize-width-left"},{left:100,top:50,id:"resize-width-right"},{left:50,top:0,id:"resize-height-top"},{left:50,top:100,id:"resize-height-bottom"}].forEach(function(t){return e._addGrips(t.left,t.top,t.id)}),this.updateSelectionDiv()},e.prototype._addGrips=function(e,t,n){var r=document.createElement("div");r.id=n,r.classList.add("selection"),r.style.left=e+"%",r.style.top=t+"%",this._selectionDiv.appendChild(r)},e.prototype._removeSelectionDiv=function(){null!=this._selectionDiv&&(this._selectionDiv.remove(),this._selectionDiv=null)},e.prototype._removeParentSelectionDiv=function(){null!=this._parentSelectionDiv&&(this._parentSelectionDiv.remove(),this._parentSelectionDiv=null)},e.prototype.updateSelectionDiv=function(){var e=this;if(null!=this._selectionDiv){this._selectionDiv.style.border=this._canvas.selectionWidth+"px solid "+this._canvas.selectionColor;var t=this._canvas.resizeGripSize;this._selectionDiv.querySelectorAll("div[id^=resize]").forEach(function(n){n.style.width=t+"px",n.style.height=t+"px",n.style.marginLeft="-"+t/2+"px",n.style.marginTop="-"+t/2+"px",n.style.border="1px solid "+e._canvas.resizeGripLineColor,n.style.backgroundColor=""+e._canvas.resizeGripColor});var n=this._canvas.rotationGripSize;this._selectionDiv.querySelectorAll("div#rotate-circle").forEach(function(e){e.style.width=n+"px",e.style.height=n+"px",e.style.marginBottom="-"+2*n+"px",e.style.border="1px solid #eee",e.style.borderRadius="50%",e.style.backgroundColor="#fff",e.style.boxShadow="0px 1px 3px rgba(0, 0, 0, 0.2), 0px 0px 2px rgba(0, 0, 0, 0.2)"})}},e.prototype.updateParentSelectionDiv=function(){null!=this._parentSelectionDiv&&(this._parentSelectionDiv.style.border=this._canvas.selectionWidth+"px dashed "+this._canvas.selectionColor)},e.prototype.showSelection=function(e,t,n){null==this._selectionDiv||null==n||this._selection.isLocked||(this._updateSelectionPosition(e,n),this._selectionDiv.querySelectorAll("div[id^=rotate]").forEach(function(e){e.style.visibility=t.rotate?"visible":"hidden"}),this._selectionDiv.querySelectorAll("div[id^=resize]").forEach(function(e){e.style.visibility=t.resize?"visible":"hidden"}),this._selectionDiv.querySelectorAll("div[id^=resize-width]").forEach(function(e){e.style.visibility=t.arbitraryWidthResize?"visible":"hidden"}),this._selectionDiv.querySelectorAll("div[id^=resize-height]").forEach(function(e){e.style.visibility=t.arbitraryHeightResize?"visible":"hidden"}))},e.prototype.showParentSelection=function(e,t){null==e?this._parentSelectionDiv.style.visibility="hidden":this._updateSelectionPositionForDiv(this._parentSelectionDiv,e,t)},e.prototype.hideSelection=function(){null!=this._selectionDiv&&(this._selectionDiv.style.visibility="hidden",this._selectionDiv.querySelectorAll("div[id^=rotate]").forEach(function(e){e.style.visibility="hidden"}),this._selectionDiv.querySelectorAll("div[id^=resize]").forEach(function(e){e.style.visibility="hidden"}),this._selectionDiv.querySelectorAll("div[id^=resize-width]").forEach(function(e){e.style.visibility="hidden"}),this._selectionDiv.querySelectorAll("div[id^=resize-height]").forEach(function(e){e.style.visibility="hidden"}),this._parentSelectionDiv.style.visibility="hidden")},e.prototype.addChild=function(e){this._whitespace.appendChild(e)},e.prototype.removeChilds=function(e){this._whitespace.removeChild(e)},e.prototype._updateSelectionPosition=function(e,t){if(null!=(e=e||this._selection.visibleRectangle)){var n=t.contentAngle,r=KN.getRectWithOffset(e,this._offset);this._updateFramePosition(this._selectionDiv,r,t),this._rotateHandler.updateRotateDegreeDiv(r.angle-n)}},e.prototype._updateFramePosition=function(e,t,n){var r=this._getControlRectangle(t,n);e.style.visibility="visible",e.style.left=r.left+"px",e.style.top=r.top+"px",e.style.width=r.width+"px",e.style.height=r.height+"px",e.style.transform="rotate("+t.angle+"deg)"},e.prototype._updateSelectionPositionForDiv=function(e,t,n){if(null!=t){var r=KN.getRectWithOffset(t,this._offset),i=this._getControlRectangle(r,n);e.style.visibility="visible",e.style.left=i.left+"px",e.style.top=i.top+"px",e.style.width=i.width+"px",e.style.height=i.height+"px",e.style.transform="rotate("+r.angle+"deg)"}},e.prototype._addHoverDiv=function(){this.hoverDiv=document.createElement("div"),this.hoverDiv.id="hover",this.hoverDiv.style.visibility="hidden",this.hoverDiv.style.zIndex="-1";var e=document.createElement("div");e.id="hover-label",e.classList.add("hover-label"),this.hoverDiv.appendChild(e),this._whitespace.appendChild(this.hoverDiv),this.updateHoverDiv()},e.prototype._removeHoverDiv=function(){null!=this.hoverDiv&&(this.hoverDiv.remove(),this.hoverDiv=null)},e.prototype.updateHoverDiv=function(){null!=this.hoverDiv&&(this.hoverDiv.style.border=this._canvas.selectionWidth+"px solid "+this._canvas.selectionColor,this.hoverDiv.querySelector("#hover-label").style.color=""+this._canvas.selectionColor)},e.prototype.showHover=function(e,t,n){null!=e&&null!=this.hoverDiv&&null!=n&&(this.hoverDiv.querySelector("div[id^=hover-label]").innerText=t,this.hoverDiv.querySelector("div[id^=hover-label]").title=t,this.hoverDiv.style.visibility="visible",this.updateHoverPosition(e,n))},e.prototype.hideHover=function(){null!=this.hoverDiv&&(this.hoverDiv.style.visibility="hidden")},e.prototype.updateHoverPosition=function(e,t,n){if(null!=e&&"hidden"!==this.hoverDiv.style.visibility){var r=KN.getRectWithOffset(e,this._offset),i=this._getControlRectangle(r,t);null!=n&&(this.hoverDiv.querySelector("div[id^=hover-label]").innerText=n),this.hoverDiv.style.left=i.left+"px",this.hoverDiv.style.top=i.top+"px",this.hoverDiv.style.width=i.width+"px",this.hoverDiv.style.height=i.height+"px",this.hoverDiv.style.transform="rotate("+r.angle+"deg)",this._rotateHandler.rotateHoverLabel(r.angle%360,i)}},e.prototype.addPlaceholderButtonGroup=function(e,t){var n,r,i,o,s,a,l;if(null!=t&&null!=this._parent&&null!=e){var c=this._parent,u=document.createElement("div");u.style.position="absolute",u.style.display="flex",u.style.alignItems="center",u.id="buttonDiv";var h=this._canvas.placeholderButtonGroupCssClass,d=document.createElement("div");if(d.id="editDiv",null!=h&&""!==h&&(n=d.classList).add.apply(n,vY(h.split(" "))),BL.IsTouchDevice()){var p=this._canvas.bigButtonGroupCssClass;null!=p&&""!==p&&(r=d.classList).add.apply(r,vY(p.split(" ")))}if(e.isStubOrEmpty()&&(!this._dndHandler.isDragStarted()||!this._dndHandler.isDragTarget(e))){var f=document.createElement("button");if(f.type="button",f.id="selectButton",f.setAttribute("style","will-change: transform"),f.addEventListener("mousedown",this._stopPropagationFnc),f.addEventListener("dblclick",this._stopPropagationFnc),this._addClickAndTapHandler(f,e.selectButtonClickHandler),e.item.isBarcodePlaceholder){var m=this._canvas.selectBarcodeButtonCssClass;null!=m&&""!==m?(i=f.classList).add.apply(i,vY(m.split(" "))):f.innerText="Select"}else{var g=this._canvas.selectImageButtonCssClass;null!=g&&""!==g?(o=f.classList).add.apply(o,vY(g.split(" "))):f.innerText="Select"}e.selectButton=f,d.appendChild(f)}if(this._dndHandler.isDragStarted&&this._dndHandler.isDragTarget(e)){var y=document.createElement("div");y.id="dropIcon",y.classList.add("cc-dnd-icon"),y.setAttribute("style","width: 30px; height: 30px; will-change: transform");var _=e.isStubOrEmpty()?"cc-icon-dnd-target-empty":"cc-icon-dnd-target-not-empty";y.classList.add(_),this._dndHandler.isDragOver(e)&&y.classList.add("cc-dnd-over"),d.appendChild(y)}var v=e.getPermissions().allowEditContent;if(v&&!e.isStubOrEmpty()&&!this._dndHandler.isDragStarted()){var b=document.createElement("button");b.type="button",b.id="handleButton",b.setAttribute("style","will-change: transform"),b.addEventListener("dblclick",this._stopPropagationFnc);var w=this._canvas.handleButtonCssClass;null!=w&&""!==w?(s=b.classList).add.apply(s,vY(w.split(" "))):b.innerText="Handle",e.handleButton=b,d.appendChild(b)}u.appendChild(d);var C=document.createElement("div");if(C.id="doneDiv",null!=h&&""!==h&&(a=C.classList).add.apply(a,vY(h.split(" "))),v){var x=document.createElement("button");x.type="button",x.setAttribute("style","will-change: transform"),x.addEventListener("dblclick",this._stopPropagationFnc);var E=this._canvas.doneButtonCssClass;null!=E&&""!==E?(l=x.classList).add.apply(l,vY(E.split(" "))):x.innerText="Done",e.doneButton=x,C.appendChild(x)}u.appendChild(C),c.appendChild(u),e.placeholderButtonGroup=u,e.editButtonGroup=d,e.doneButtonGroup=C,this.updatePlaceholderButtonGroup(e,t)}},e.prototype.removePlaceholderButtonGroup=function(e){if(null!=e&&null!=e.placeholderButtonGroup){for(var t=[e.selectButton,e.doneButton,e.handleButton],n=0;n<t.length;n++){var r=t[n];null!=r&&(r.removeEventListener("click",this._stopPropagationFnc),r.removeEventListener("mousedown",this._stopPropagationFnc),r.removeEventListener("dblclick",this._stopPropagationFnc))}e.placeholderButtonGroup.remove(),e.placeholderButtonGroup=null,e.doneButtonGroup=null,e.selectButton=null,e.handleButton=null,e.doneButton=null}},e.prototype.updatePlaceholderButtonGroup=function(e,t){if(null!=e&&null!=e.placeholderButtonGroup){var n=e.placeholderButtonGroup;if(e.isVisible()&&!e.isLocked()&&this._isSelectionBehavior){n.style.visibility="visible";var r=this._selection.isItemHandlerSelected(e)?"auto":"none",i=t.contentAngle;n.style.pointerEvents=r,n.style.transform="rotate(-"+i+"deg)";var o=e.editButtonGroup,s=e.doneButtonGroup,a=function(){return e.isStubOrEmpty()&&e.showSelectButton()};this._canvas.autoPlaceholderEditModeEnabled?(a()||this._buttonsHidden(o),this._buttonsHidden(s)):(a()||!e.isStubOrEmpty()&&e.showHandleButton()&&this._selection.isItemHandlerSelected(e)&&!e.isContentUpdating()&&1===this._selection.getSelectedItemHandlers().length||this._dndHandler.isDragStarted()&&this._dndHandler.isDragTarget(e)?this._buttonsShow(o):this._buttonsHidden(o),e.editing&&!e.isContentUpdating()&&e.getPermissions(!0).showDoneButton?this._buttonsShow(s):this._buttonsHidden(s));var l=e.selectButton;null!=l&&(l.title=this._getSelectButtonTitle(e));var c=e.doneButton;null!=c&&(c.title=this._canvas.doneButtonTitle);var u=e.handleButton;null!=u&&(u.title=this._canvas.handleButtonTitle),this.updatePlaceholderButtonGroupPosition(e,t)}else n.style.visibility="hidden"}},e.prototype.updatePlaceholderButtonGroupPosition=function(e,t){if(null!=t&&null!=this._parent&&null!=e&&null!=e.placeholderButtonGroup){var n=KN.getRectWithOffset(e.rectangle,this._offset),r=t.workspaceToControlPoint(new MN(n.centerX,n.centerY)),i=t.getParentPosition(this._parent.parentElement),o=new MN(i.left,i.top),s=e.placeholderButtonGroup,a=r.x-s.offsetWidth/2-o.x,l=r.y-s.offsetHeight/2-o.y;s.style.position="absolute",s.style.left=a+"px",s.style.top=l+"px"}},e.prototype.addFloatingItemToolbar=function(e,t){var n,r,i,o,s;if(null!=t&&null!=this._parent&&null!=e&&this._canvas.floatingItemToolbarEnabled&&null==e.floatingItemToolbar){var a=this._whitespace,l=document.createElement("div");l.style.position="absolute",l.id="buttonDiv";var c=this._canvas.floatingItemToolbarCssClass,u=document.createElement("div");if(u.style.display="flex",u.id="floatingItemToolbarDiv",null!=c&&""!==c&&(n=u.classList).add.apply(n,vY(c.split(" "))),BL.IsTouchDevice()){var h=this._canvas.bigButtonGroupCssClass;null!=h&&""!==h&&(r=u.classList).add.apply(r,vY(h.split(" ")))}if(this._isPlaceholder(e)||this._isImage(e)||this._isGroup(e)){var d=document.createElement("button");d.type="button",d.addEventListener("mousedown",this._stopPropagationFnc),d.addEventListener("dblclick",this._stopPropagationFnc);var p=e.getSelectToolbarButtonClickHandler();this._addClickAndTapHandler(d,p);var f=this._canvas.selectToolbarButtonCssClass;null!=f&&""!==f?(i=d.classList).add.apply(i,vY(f.split(" "))):d.innerText="Select",e.selectToolbarButton=d,u.appendChild(d)}var m=document.createElement("button");m.type="button",m.addEventListener("mousedown",this._stopPropagationFnc),m.addEventListener("dblclick",this._stopPropagationFnc);var g=e.getEditToolbarButtonClickHandler();this._addClickAndTapHandler(m,g);var y=this._canvas.editToolbarButtonCssClass;null!=y&&""!==y?(o=m.classList).add.apply(o,vY(y.split(" "))):m.innerText="Edit",e.editToolbarButton=m,u.appendChild(m);var _=document.createElement("button");_.type="button",_.addEventListener("mousedown",this._stopPropagationFnc),_.addEventListener("dblclick",this._stopPropagationFnc);var v=e.getDeleteToolbarButtonClickHandler();this._addClickAndTapHandler(_,v);var b=this._canvas.deleteToolbarButtonCssClass;null!=b&&""!==b?(s=_.classList).add.apply(s,vY(b.split(" "))):_.innerText="Delete",e.deleteToolbarButton=_,u.appendChild(_),l.appendChild(u),a.appendChild(l),e.floatingItemToolbar=l,this.updateFloatingItemToolbar(e,t)}},e.prototype.removeFloatingItemToolbar=function(e){if(null!=e&&null!=e.floatingItemToolbar){for(var t=[e.selectToolbarButton,e.deleteToolbarButton,e.editToolbarButton],n=0;n<t.length;n++){var r=t[n];null!=r&&(r.removeEventListener("click",this._stopPropagationFnc),r.removeEventListener("mousedown",this._stopPropagationFnc),r.removeEventListener("dblclick",this._stopPropagationFnc))}e.floatingItemToolbar.remove(),e.floatingItemToolbar=null,e.selectToolbarButton=null,e.deleteToolbarButton=null,e.editToolbarButton=null}},e.prototype.updateFloatingItemToolbar=function(e,t){if(null!=e&&null!=e.floatingItemToolbar&&this._canvas.floatingItemToolbarEnabled){var n=e.floatingItemToolbar;if(this._canvas.isShowFloatingItemToolbar(e)){if(this._buttonsShow(n),this._isImageOrPlaceholder(e)||this._isGroup(e)){var r=e.selectToolbarButton;null!=r&&(e.showSelectToolbarButton()?(r.style.display="block",this._updateFloatingItemToolbarPosition(e,t)):r.style.display="none",r.title=this._getSelectButtonTitle(e))}var i=e.deleteToolbarButton;null!=i&&(i.style.display=e.showDeleteToolbarButton()&&!this._canvas.simpleMode?"block":"none",i.title=this._canvas.deleteButtonTitle);var o=e.editToolbarButton;null!=o&&(o.style.display=e.showEditToolbarButton()?"block":"none",o.title=this._canvas.editButtonTitle),this._updateFloatingItemToolbarPosition(e,t)}else this._buttonsHidden(n)}},e.prototype._updateFloatingItemToolbarPosition=function(e,t){if(null!=t&&null!=this._parent&&null!=e&&this._canvas.floatingItemToolbarEnabled&&null!=e.floatingItemToolbar){var n=KN.getRectWithOffset(e.rectangle,this._offset),r=t.contentAngle,i=e.floatingItemToolbar;r>0&&(n.rotateAt(r,new MN),90===r?n.translate(t.workspaceHeight,0):180===r?n.translate(t.workspaceWidth,t.workspaceHeight):270===r&&n.translate(0,t.workspaceWidth));var o=t.zoom,s=t.screenYDpi/72*o,a=Math.floor(n.width*(t.screenXDpi/72*o)),l=Math.floor(n.height*s),c=i.offsetWidth,u=i.offsetHeight,h=3.5*c>a||3.5*u>l;new MN((h?-c/2:8)+c/2,(h?-u:8)+u/2).rotate(n.angle);var d=t.workspaceToControlPoint(n.getUpperRightCorner()),p=t.element,f=new MN(0,0);f.x=Math.max(0,d.x),f.y=Math.max(0,d.y);var m=e.rectangle.angle%360;if(m>=0&&m<90){var g=[t.workspaceToControlPoint(n.getUpperLeftCorner()),t.workspaceToControlPoint(n.getUpperRightCorner()),t.workspaceToControlPoint(n.getBottomRightCorner()),t.workspaceToControlPoint(n.getBottomLeftCorner())];f=this._findBetter(g,r,p,f,u,c,t)}else m>=180&&m<270?(g=[t.workspaceToControlPoint(n.getBottomRightCorner()),t.workspaceToControlPoint(n.getBottomLeftCorner()),t.workspaceToControlPoint(n.getUpperLeftCorner()),t.workspaceToControlPoint(n.getUpperRightCorner())],f=this._findBetter(g,r,p,f,u,c,t)):m>=270?(g=[t.workspaceToControlPoint(n.getUpperRightCorner()),t.workspaceToControlPoint(n.getBottomRightCorner()),t.workspaceToControlPoint(n.getBottomLeftCorner()),t.workspaceToControlPoint(n.getUpperLeftCorner())],f=this._findBetter(g,r,p,f,u,c,t)):(g=[t.workspaceToControlPoint(n.getBottomLeftCorner()),t.workspaceToControlPoint(n.getUpperLeftCorner()),t.workspaceToControlPoint(n.getUpperRightCorner()),t.workspaceToControlPoint(n.getBottomRightCorner())],f=this._findBetter(g,r,p,f,u,c,t));i.style.left=f.x-12+"px",i.style.top=f.y+"px"}},e.prototype._findBetter=function(e,t,n,r,i,o,s){switch(t){case 90:e=e.concat(e.splice(0,3));break;case 180:e=e.concat(e.splice(0,2));break;case 270:e=e.concat(e.splice(0,1))}var a=e[0],l=e[1],c=e[2],u=e[3],h=n.offsetWidth-(l.x+o/2),d=n.offsetHeight-c.y,p=a.y-12,f=this._selectionDiv.querySelector("div#rotate-circle"),m=null;if(f){var g=f.getBoundingClientRect();m=s.pageToControlPoint(g.left,g.top)}var y=function(){return null!=m&&m.y+15>r.y&&m.y-15<r.y+i&&m.x+30>r.x&&m.x-30<r.x+o},_=function(){return r.x=h<0?l.x-o/2-5+h:l.x-o/2-5,y()&&(r.x=h>0&&n.offsetWidth-(m.x+30+o+5)>0?m.x+30:m.x-15-o),r.x},v=function(){return r.y=a.y-i>0?a.y-i:0,y()&&(r.y=m.y+15),r.y};return p>i?(r.y=a.y-i-12,r.x=_()):h-(o/2+5)>0?(r.x=l.x+5,r.y=v()):h-(o/2+5)<0&&(u.x-o-5>5?(r.x=u.x-o-5,r.y=v()):(r.x=_(),r.y=d>i?c.y:v())),r.x+=n.scrollLeft,r.y+=n.scrollTop,r},e.prototype.addViolationContainer=function(e,t){var n,r,i,o,s;if(null!=t&&null!=this._parent&&null!=e&&(this._canvas.violationWarningButtonsEnabled||this._canvas.qualityChangeContainersEnabled)&&null==e.getViolationContainer()&&(this._canvas.violationWarningButtonsEnabled||!this._canvas.qualityChangeContainersEnabled||e instanceof NW||e instanceof HW)){var a=document.createElement("div"),l=this._canvas.violationContainerCssClass;if(null!=l&&""!==l&&(n=a.classList).add.apply(n,vY(l.split(" "))),e.setViolationContainer(a),this._canvas.qualityChangeContainersEnabled&&(e instanceof NW||e instanceof YW&&null==e.item.barcodeFormat)){var c=document.createElement("div");a.appendChild(c);var u=this._canvas.qualityChangeContainerCssClass;null!=u&&""!==u&&(r=c.classList).add.apply(r,vY(u.split(" ")));var h=document.createElement("div");c.appendChild(h);var d=this._canvas.qualityChangeScaleBarCssClass;null!=d&&""!==d&&(i=h.classList).add.apply(i,vY(d.split(" ")));var p=document.createElement("div");c.appendChild(p);var f=this._canvas.qualityChangeInfoBarCssClass;null!=f&&""!==f&&(o=p.classList).add.apply(o,vY(f.split(" "))),e.qualityChangeContainer=c,e.qualityChangeScaleBar=h,e.qualityChangeInfoBar=p}if(this._canvas.violationWarningButtonsEnabled){var m=this._canvas.violationWarningButtonCssClass,g=document.createElement("button");g.innerHTML='\n                <svg width="24" height="24" class="warning-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.29 3.86001L1.82002 18C1.64539 18.3024 1.55299 18.6453 1.55201 18.9945C1.55103 19.3437 1.64151 19.6871 1.81445 19.9905C1.98738 20.2939 2.23675 20.5468 2.53773 20.7239C2.83871 20.901 3.18082 20.9962 3.53002 21H20.47C20.8192 20.9962 21.1613 20.901 21.4623 20.7239C21.7633 20.5468 22.0127 20.2939 22.1856 19.9905C22.3585 19.6871 22.449 19.3437 22.448 18.9945C22.4471 18.6453 22.3547 18.3024 22.18 18L13.71 3.86001C13.5318 3.56611 13.2807 3.32313 12.9812 3.15449C12.6817 2.98585 12.3438 2.89726 12 2.89726C11.6563 2.89726 11.3184 2.98585 11.0188 3.15449C10.7193 3.32313 10.4683 3.56611 10.29 3.86001V3.86001Z" fill="currentColor" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 9V13" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 17H12.01" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\n                <svg width="24" height="24" class="good-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M16.5 9L10.3125 15L7.5 12.2727" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\n            ',g.type="button",null!=m&&""!==m?(s=g.classList).add.apply(s,vY(m.split(" "))):g.innerText="Quality",g.addEventListener("mousedown",this._stopPropagationFnc),g.addEventListener("dblclick",this._stopPropagationFnc);var y=e.getViolationWarningButtonClickHandler();this._addClickAndTapHandler(g,y),e.setViolationWarningButton(g),a.appendChild(g)}this._whitespace.appendChild(a),this.updateViolationContainer(e,!0,t)}},e.prototype.removeViolationContainer=function(e){if(null!=e){var t=e.getViolationWarningButton();if(null!=t&&(t.removeEventListener("click",this._stopPropagationFnc),t.removeEventListener("mousedown",this._stopPropagationFnc),t.removeEventListener("dblclick",this._stopPropagationFnc),t.remove(),e.setViolationWarningButton(null)),e instanceof NW||e instanceof YW){var n=e.qualityChangeContainer;null!=n&&(n.remove(),e.qualityChangeContainer=null,e.qualityChangeScaleBar=null,e.qualityChangeInfoBar=null)}var r=e.getViolationContainer();null!=r&&(r.remove(),e.setViolationContainer(null))}},e.prototype.updateViolationContainer=function(e,t,n){if(void 0===t&&(t=!1),null!=e&&null!=e.getViolationContainer()){var r=e instanceof NW||e instanceof YW?e.qualityChangeContainer:null,i=e.getViolationWarningButton();if(!e.isVisible()||e.locked||!this._isSelectionBehavior)return null!=r&&(r.style.visibility="hidden"),void(null!=i&&(i.style.visibility="hidden"));this._canvas.violationWarningButtonsEnabled&&null!=i&&(i.style.pointerEvents="auto",this._selection.isOnlyThisItemHandlerSelected(e)?i.classList.add("active"):i.classList.remove("active")),this._canvas.qualityChangeContainersEnabled&&null!=r&&(r.style.visibility="visible",this._showQualityChangeContainer(e)?this._buttonsShow(r):this._buttonsHidden(r)),t&&this.updateViolationContainerPosition(e,n)}},e.prototype.updateViolationContainerPosition=function(e,t){if(null!=t&&null!=this._parent&&null!=e&&null!=e.item&&(this._canvas.violationWarningButtonsEnabled||this._canvas.qualityChangeContainersEnabled)&&null!=e.getViolationContainer()){var n=KN.getRectWithOffset(e.rectangle,this._offset),r=t.contentAngle;r>0&&(n.rotateAt(r,new MN),90===r?n.translate(t.workspaceHeight,0):180===r?n.translate(t.workspaceWidth,t.workspaceHeight):270===r&&n.translate(0,t.workspaceWidth));var i=t.zoom,o=t.screenYDpi/72*i,s=Math.floor(n.width*(t.screenXDpi/72*i)),a=Math.floor(n.height*o),l=e.getViolationWarningButton(),c=e.getViolationContainer(),u=null!=c?c:l,h=u.offsetWidth,d=u.offsetHeight,p=3.5*h>s||3.5*d>a,f=new MN((p?-h/2:8)+h/2,(p?-d:8)+d/2);f.rotate(n.angle);var m=t.workspaceToControlPoint(n.getUpperLeftCorner()),g=t.whitespaceDiv,y=t.element;m.x+=f.x-g.offsetLeft-h/2+y.scrollLeft,m.y+=f.y-g.offsetTop-d/2+y.scrollTop,m.x=Math.max(0,m.x),m.y=Math.max(0,m.y);var _=m.x+h-t.whitespaceDiv.offsetWidth;_>0&&(m.x-=_);var v=m.y+d-t.whitespaceDiv.offsetHeight;v>0&&(m.y-=v),c.style.left=m.x+"px",c.style.top=m.y+"px",c.style.position="absolute",l=e.getViolationWarningButton(),e.isVisible()?null!=l&&(l.style.visibility="visible",this._selection.isOperationNotNull()?(l.classList.remove("elementShown"),l.classList.add("elementHidden")):(l.classList.remove("elementHidden"),l.classList.add("elementShown"))):null!=l&&(l.style.visibility="hidden")}},e.prototype._addTextEditorDiv=function(){document.execCommand("styleWithCSS");var e=document.createElement("style");e.type="text/css",e.innerHTML="#"+this._textEditorId+" { -webkit-user-select: text; user-select: text; } p { margin: 0px; line-height: normal; } p:first-child::first-line { line-height: 1; }",document.head.appendChild(e),this._viewer.add_zoomed(this._onZoomedScrolledDelegate),this._viewer.add_scrolled(this._onZoomedScrolledDelegate)},e.prototype._removeTextEditorDiv=function(){null!=this._textEditorDiv&&(this._removeTextEditorDivFromDom(),this._textEditorDiv=null,this._viewer.remove_zoomed(this._onZoomedScrolledDelegate),this._viewer.remove_scrolled(this._onZoomedScrolledDelegate))},e.prototype._appendTextEditorDivToDom=function(){this._textEditorDiv=document.createElement("div"),this._textEditorDiv.id=this._textEditorId,this._textEditorDiv.style.display="flex",this._textEditorDiv.style.position="absolute",this._textEditorDiv.style.zIndex="1",this._textEditorDiv.style.backgroundColor="transparent",this._textEditorDiv.style.overflow="hidden",this._textEditorDiv.style.cursor="text",this._textEditorDiv.contentEditable="true",this._textEditorDiv.addEventListener("dblclick",this._stopPropagationFnc),this._textEditorDiv.addEventListener("click",this._stopPropagationFnc),this._textEditorDiv.addEventListener("mousedown",this._stopPropagationFnc),this._textEditorDiv.addEventListener("mousemove",this._stopPropagationFnc),this._textEditorDiv.addEventListener("mouseup",this._stopPropagationFnc),this._textEditorDiv.addEventListener("keydown",this._stopPropagationFnc),this._textEditorDiv.addEventListener("keyup",this._stopPropagationFnc),this._parent.parentElement.parentElement.parentElement.appendChild(this._textEditorDiv),this._textEditorInnerDiv=document.createElement("div"),this._textEditorInnerDiv.style.display="block",this._textEditorDiv.appendChild(this._textEditorInnerDiv)},e.prototype._removeTextEditorDivFromDom=function(){this._textEditorDiv.removeEventListener("dblclick",this._stopPropagationFnc),this._textEditorDiv.removeEventListener("click",this._stopPropagationFnc),this._textEditorDiv.removeEventListener("mousedown",this._stopPropagationFnc),this._textEditorDiv.removeEventListener("mousemove",this._stopPropagationFnc),this._textEditorDiv.removeEventListener("mouseup",this._stopPropagationFnc),this._textEditorDiv.removeEventListener("keydown",this._stopPropagationFnc),this._textEditorDiv.removeEventListener("keyup",this._stopPropagationFnc),this._textEditorDiv.remove()},Object.defineProperty(e.prototype,"textEditorDiv",{get:function(){return this._textEditorDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textEditorInnerDiv",{get:function(){return this._textEditorInnerDiv},enumerable:!0,configurable:!0}),e.prototype.showTextEditor=function(e,t,n,r,i,o,s,a){this._appendTextEditorDivToDom(),this._updateTextEditorPosition(e,t,r,a),this._textEditorDiv.style.border="solid "+r+"pt "+i,this._textEditorDiv.style.backgroundColor=""+o,this._textEditorDiv.style.opacity=""+s,this._textEditorDiv.style.setProperty("outline",this._canvas.selectionWidth+"px solid "+this._canvas.selectionColor,"important"),this._textEditorInnerDiv.innerHTML=n,this._textEditorInnerDiv.focus()},e.prototype.hideTextEditor=function(){if(null!=this._textEditorDiv){var e=""===this._textEditorInnerDiv.innerText.trim()?"":this._textEditorInnerDiv.innerHTML;return this._removeTextEditorDivFromDom(),e}},e.prototype._updateTextEditorPosition=function(e,t,n,r){if(null!=e&&null!=this._textEditorDiv){var i=this._viewer;if(n>0&&(e.width+=2*n,e.height+=2*n),e=this._rotateRectangle(e,i),null==t){var o=i.workspaceToControlPoint(e.location).round();this._textEditorDiv.style.left="0px",this._textEditorDiv.style.top="0px",this._textEditorDiv.style.width=e.width+"pt",this._textEditorDiv.style.height=e.height+"pt",this._textEditorDiv.style.transformOrigin="left top",this._textEditorDiv.style.transform="translate("+o.x+"px, "+o.y+"px) scale("+i.zoom+") rotate("+e.angle+"deg)"}else{e.angle=0;var s=i.workspaceToControlPoint(e.getUpperLeftCorner()).round();if(this._textEditorDiv.style.top="0px",this._textEditorDiv.style.width="max-content",this._textEditorDiv.style.height="max-content",t==HH.Center){var a=i.workspaceToControlPoint(e.center).round();this._textEditorDiv.style.left=a.x+"px",this._textEditorDiv.style.transformOrigin="center top",this._textEditorDiv.style.transform="translate(-50%, "+s.y+"px) scale("+i.zoom+")"}else if(t==HH.Right){var l=i.workspaceToControlPoint(e.getUpperRightCorner()).round();this._textEditorDiv.style.left=l.x+"px",this._textEditorDiv.style.transformOrigin="right top",this._textEditorDiv.style.transform="translate(-100%, "+l.y+"px) scale("+i.zoom+")"}else this._textEditorDiv.style.left="0px",this._textEditorDiv.style.transformOrigin="left top",this._textEditorDiv.style.transform="translate("+s.x+"px, "+s.y+"px) scale("+i.zoom+")"}switch(r){case zH.Bottom:this._textEditorDiv.style.alignItems="flex-end";break;case zH.Center:this._textEditorDiv.style.alignItems="center";break;case zH.Top:default:this._textEditorDiv.style.alignItems="flex-start"}}},e.prototype.calculateRenderStateForItemHandlers=function(e){var t=this,n=!1,r=function(e,t){return e.renderState!==t&&(e.renderState=t,n=!0,!0)},i=new Ij,o=function(e,t){e.contains(t)||e.add(t)};e.selectMany(function(e){return e.itemHandlers.toArray()}).reverse().forEach(function(e){o(i,e),e instanceof eX&&e.getNestedItemHandlers().forEach(function(e){return o(i,e)})});var s=this._selection._permissions,a=this._selection.getSelectedItemHandlers(),l=1==a.length&&a.get(0)instanceof b$;if(!this._selection.isLocked&&(s.allowMove||s.allowRotate||s.allowResize||l))for(var c=i.indexOf(function(e){return t._selection.isItemHandlerSelected(e)}),u=i.lastIndexOf(function(e){return t._selection.isItemHandlerSelected(e)}),h=i.indexOf(function(e){return e.hasBlendMode()}),d=h>-1,p=0;p<i.count();p++){var f=i.elementAt(p),m=f.parentGroupItemHandler;if(this.setHandlerState(f,p,c,h,u,d,r)&&m){var g=i.indexOf(m);this.setHandlerState(f.parentGroupItemHandler,g,c,h,u,d,r)}}else i.forEach(function(e){e.isVisible()?r(e,IU.Bottom):r(e,IU.Hidden)});return n},e.prototype.setHandlerState=function(e,t,n,r,i,o,s){return e.isVisible()?e instanceof eX&&e.getNestedItemHandlers().some(function(e){return e.renderState===IU.Active})?s(e,IU.Active):s(e,t<n&&(t<r||!o)?IU.Top:t>=n&&t<=i||o&&n>=r?IU.Active:IU.Bottom):s(e,IU.Hidden)},e.prototype._getAllCanvases=function(){return[this.surfaceCanvas,this.activeCanvas,this.inactiveCanvas,this.staticTextCanvas,this.activeTextCanvas,this.designCanvas,this.cursorCanvas]},e.prototype._createCanvasElement=function(t,n,r){var i=this._document.createElement("canvas");return i.id=t,i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.pointerEvents="none",e.setElementSize(i,n,r),i},e.setElementSize=function(e,t,n){var r=BL.devicePixelRatio;e.width=Math.ceil(t),e.style.width=Math.ceil(t/r)+"px",e.height=Math.ceil(n),e.style.height=Math.ceil(n/r)+"px"},e.prototype._addClickAndTapHandler=function(e,t){BL.IsTouchDevice()&&!BL.IsAndroid()?window.Hammer(e).on("tap",t):e.addEventListener("click",t)},e.prototype._buttonsShow=function(e){e.classList.remove("buttonsHidden"),e.classList.add("buttonsShown")},e.prototype._buttonsHidden=function(e){e.classList.remove("buttonsShown"),e.classList.add("buttonsHidden")},e.prototype._isPlaceholder=function(e){return e instanceof YW},e.prototype._isImage=function(e){return e instanceof NW},e.prototype._isGroup=function(e){return e instanceof eX},e.prototype._isImageOrPlaceholder=function(e){return this._isImage(e)||this._isPlaceholder(e)},e.prototype._getSelectButtonTitle=function(e){return this._isGroup(e)?this._canvas.replaceGroupContentButtonTitle:this._isPlaceholder(e)&&e.item.isBarcodePlaceholder?this._canvas.editBarcodeButtonTitle:this._canvas.selectButtonTitle},e.prototype._getControlRectangle=function(e,t){var n=(e=this._rotateRectangle(e,t)).toRectangleF(),r=t.zoom,i=t.screenXDpi/72*r,o=t.screenYDpi/72*r,s=FN.FromLTRB(Math.floor(n.left*i),Math.floor(n.top*o),Math.ceil(n.right*i)+this._canvas.selectionWidth,Math.ceil(n.bottom*o)+this._canvas.selectionWidth);return t.contentToWhitespaceRectangle(new FN(s.left,s.top,s.width,s.height))},Object.defineProperty(e.prototype,"_isSelectionBehavior",{get:function(){return this._canvas.mouseBehaviorManager.isSelectionMouseBehavior},enumerable:!0,configurable:!0}),e.prototype._rotateRectangle=function(e,t){var n=t.contentAngle;return n>0&&(e.rotateAt(n,new MN),90===n?e.translate(t.workspaceHeight,0):180===n?e.translate(t.workspaceWidth,t.workspaceHeight):270===n&&e.translate(0,t.workspaceWidth)),e},e}(),wY=function(){return(wY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},CY=function(){function e(e,t,n,r){this._selection=e,this._dndHandler=t,this._canvas=n,this._loadingImage=new Image,this.previewMode=!1,this.conf=r}return Object.defineProperty(e.prototype,"conf",{set:function(e){this._handlerConfiguration=wY({placeholderEditingViewMode:fL.Overlay},e||{})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(e){null!=e&&e.equals(this._offset)||null==e&&null!=this.offset||(this._offset=e)},enumerable:!0,configurable:!0}),e.prototype.redrawActiveCanvas=function(e,t,n){var r=this,i=this._getScaledContext(t),o=this._getScaledContext(n);if(null!=i&&null!=o){this._getItemHandlersByRenderState(e,IU.Active).forEach(function(e){return r.drawHandler(e,i)});var s=this._selection.getSelectedItemHandlers();if(s.length>1)s.forEach(function(e){return e.drawHighlight(o)});else{var a=this._selection.currentItemHandler;a instanceof eX&&a.drawHighlight(o,!0),null!=a&&this._isEditing(a)&&(this._handlerConfiguration.placeholderEditingViewMode===fL.Overlay&&a instanceof YW&&(this._drawFade(o),this.drawHandler(a,o)),a.drawHighlight(o))}this._selection.draw(o,this),this._dndHandler.draw(),i.restore(),o.restore()}},e.prototype.drawHandler=function(e,t){var n,r,i=!1;if(!this.previewMode)return e.draw(t);var o=null===(n=null==e?void 0:e.item)||void 0===n?void 0:n.parentContainer;o instanceof Aj&&(null===(r=null==o?void 0:o.parentComponent)||void 0===r||r.printAreas.forEach(function(n){var r=$N.rectangle(n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height);null!=r&&(i=!0,e.draw(t,r))})),i||e.draw(t)},e.prototype.redrawInactiveCanvas=function(e,t,n){var r=this,i=this._getScaledContext(t),o=this._getScaledContext(n);null!=i&&null!=o&&(this._drawMargins(i),this._getItemHandlersByRenderState(e,IU.Bottom).forEach(function(e){return r.drawHandler(e,i)}),this._getItemHandlersByRenderState(e,IU.Top).forEach(function(e){return r.drawHandler(e,o)}),o.restore(),i.restore())},e.prototype.drawRubberband=function(e,t){null==this._offset||this._offset.isOrigin()||(t.left-=this._offset.x,t.right-=this._offset.x,t.top-=this._offset.y,t.bottom-=this._offset.y);var n=this._canvas.mul,r=1/n,i="rgba(0,0,0,1)",o="rgba(0,0,0,0)",s=2/n;AU.drawDashedLine(e,t.left,t.top,t.right,t.top,r,i,o,s,s),AU.drawDashedLine(e,t.right,t.top,t.right,t.bottom,r,i,o,s,s),AU.drawDashedLine(e,t.right,t.bottom,t.left,t.bottom,r,i,o,s,s),AU.drawDashedLine(e,t.left,t.bottom,t.left,t.top,r,i,o,s,s)},e.prototype.drawVerticalLine=function(e,t,n){AU.drawLine(e,t,null!=this._offset?-this._offset.y:0,t,this._canvas.workspaceHeight,1/this._canvas.zoom,n)},e.prototype.drawHorizontalLine=function(e,t,n){AU.drawLine(e,null!=this._offset?-this._offset.x:0,t,this._canvas.workspaceWidth,t,1/this._canvas.zoom,n)},e.prototype.drawWaitClock=function(e,t){var n=this._canvas.mul,r=new KN(t.x||0,t.y||0,this._loadingImage.width/n,this._loadingImage.height/n,0);this._loadingImage.complete&&AU.drawImage(e,this._loadingImage,r,n,n)},e.prototype.setLoadingImageUrl=function(e){this._loadingImage.crossOrigin="anonymous",this._loadingImage.src=e},e.prototype.drawTextCursor=function(e,t,n){var r=this._getScaledContext(e);if(null!=r){var i=t.item.transform.toMatrix(),o=t.getControlCenter();r.translate(o.x,o.y),r.transform(i.m00,i.m10,i.m01,i.m11,i.m02,i.m12),r.translate(-o.x,-o.y),n(r),r.strokeStyle="rgb(0, 0, 0)",r.lineWidth=1/this._canvas.mul,r.stroke(),r.restore()}},e.prototype.clearTextCursor=function(e){var t=this._getScaledContext(e);null!=t&&t.restore()},e.prototype._getScaledContext=function(e){if(null==e)return null;var t=e.getContext("2d");if(null==t)return null;AU.clearCanvas(t),t.save();var n=BL.screenDpi*this._canvas.zoom/72;return t.scale(n,n),null==this._offset||this._offset.isOrigin()||t.translate(this._offset.x,this._offset.y),t},e.prototype._isEditing=function(e){return e instanceof YW&&e.editing||e instanceof b$&&e.editing},e.prototype._getItemHandlersByRenderState=function(e,t){var n=this._handlerConfiguration.placeholderEditingViewMode===fL.Normal;return e.selectMany(function(e){return e.itemHandlers.toArray()}).where(function(e){return e.renderState==t&&(n||!(e instanceof YW&&e.editing))})},e.prototype._drawFade=function(e){var t=KN.FromLTRB(null!=this._offset?-this._offset.x:0,null!=this._offset?-this._offset.y:0,this._canvas.workspaceWidth,this._canvas.workspaceHeight);AU.rectangle(e,t,0,null,"rgb(0, 0, 0)",.75)},e.prototype._drawMargins=function(e){var t,n,r,i,o=-(null!==(n=null===(t=this._offset)||void 0===t?void 0:t.x)&&void 0!==n?n:0),s=-(null!==(i=null===(r=this._offset)||void 0===r?void 0:r.y)&&void 0!==i?i:0),a=this._canvas.leftMargin+o,l=this._canvas.rightMargin,c=this._canvas.topMargin+s,u=this._canvas.bottomMargin,h=this._canvas.workspaceWidth,d=this._canvas.workspaceHeight,p=this._canvas.marginWidth/this._canvas.mul,f=this._canvas.marginColor;0!==a&&0!==l&&0!==c&&0!==u&&h>=a+l&&d>=c+u&&p>0&&(AU.drawLine(e,a,c,a,d-u,p,f),AU.drawLine(e,a,c,h-l,c,p,f),AU.drawLine(e,h-l,d-u,a,d-u,p,f),AU.drawLine(e,h-l,d-u,h-l,c,p,f))},e}(),xY=function(){return(xY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},EY=function(){function e(e){this.setConfiguration(e),this._snapData={xAnchors:[],yAnchors:[],defaultBounds:null,activeXAnchorIndex:null,activeYAnchorIndex:null,xPoints:[],yPoints:[],activeXPointIndex:null,activeYPointIndex:null}}return e.prototype.setConfiguration=function(e){this._conf=cj(this._getDefaultConf,[e||{}])},Object.defineProperty(e.prototype,"configuration",{get:function(){return this._conf},enumerable:!0,configurable:!0}),e.prototype.drawActiveLines=function(e,t,n,r){if(null!=this._snapData.activeXAnchorIndex&&n){var i=this._snapData.xAnchors[this._snapData.activeXAnchorIndex];t.drawVerticalLine(e,i.position,this._conf.snapElements[i.type].color)}if(null!=this._snapData.activeYAnchorIndex&&r){var o=this._snapData.yAnchors[this._snapData.activeYAnchorIndex];t.drawHorizontalLine(e,o.position,this._conf.snapElements[o.type].color)}},e.prototype.resetActiveLines=function(){this._snapData.activeXAnchorIndex=null,this._snapData.activeYAnchorIndex=null},e.prototype.constrainDiffToSnapLines=function(e,t,n,r,i){if(null==t)return new MN;var o=new MN(e.x-t.x,e.y-t.y);if(!this._enabled)return o;null==o&&(o=new MN(0,0));var s=o.clone();null==this._prevPoint&&(this._prevPoint=t);var a=e.x-this._prevPoint.x,l=e.y-this._prevPoint.y;if(this._prevPoint=e,this._snapData.activeXAnchorIndex=null,r){var c=this._findSnap(n,o.x,a,this._snapData.xAnchors,this._snapData.xPoints);s.x=c.diffValue,this._snapData.activeXAnchorIndex=c.activeAnchorIndex,this._snapData.activeXPointIndex=c.activePointIndex}if(this._snapData.activeYAnchorIndex=null,i){var u=this._findSnap(n,o.y,l,this._snapData.yAnchors,this._snapData.yPoints);s.y=u.diffValue,this._snapData.activeYAnchorIndex=u.activeAnchorIndex,this._snapData.activeYPointIndex=u.activePointIndex}return s},e.prototype._findSnap=function(t,n,r,i,o){var s=new e.SnapResult;s.diffValue=n;for(var a=r>0?i.length-1:0,l=r>0?1:-1,c=r>0?o.length-1:0,u=r>0?0:o.length-1,h=r>0?-1:1,d=r>0?0:i.length-1;d!==a+l;d+=l)for(var p=i[d],f=c;f!==u+h;f+=h){var m=o[f],g=this._getSnapLineTolerance(t,p.type);Math.abs(m+n-p.position)<g&&(null==s.activeAnchorIndex||this._conf.snapElements[p.type].priority>(null!=s.activeAnchorIndex?this._conf.snapElements[i[s.activeAnchorIndex].type]:null).priority)&&(s.diffValue=p.position-m,s.activeAnchorIndex=d,s.activePointIndex=f)}return s},e.prototype.constrainRectangleToSnapLines=function(e,t,n,r,i,o,s){var a=this;if(!this._enabled)return e;var l,c,u=e.clone();this._snapData.xPoints=[],this._snapData.yPoints=[];var h=r.resizeIndex-1;r.resizeIndex>4?((c=new MN(i.centerX+w$.cw[r.resizeIndex]*(i.width/2),i.centerY+w$.ch[r.resizeIndex]*(i.height/2))).rotateAt(u.angle,i.center),(l=new MN(o.centerX+w$.cw[r.resizeIndex]*(o.width/2),o.centerY+w$.ch[r.resizeIndex]*(o.height/2))).rotateAt(u.angle,o.center)):(c=i.getCornerByIndex(h),l=o.getCornerByIndex(h));var d,p,f=this,m=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),t=null==t||t,(e=null==e||e)||t){var n=a._getSnapLineTolerance(s,W$.Items);e&&(f._snapData.xPoints=[c.x],Math.abs(c.x-l.x)>n&&f._snapData.xPoints.push(l.x)),t&&(f._snapData.yPoints=[c.y],Math.abs(c.y-l.y)>n&&f._snapData.yPoints.push(l.y))}};if(n){if(i.angle%90!=0&&r.resizeIndex>4)return e;var g=u.center,y=r.resizeIndex>4&&(u.angle-90)%180==0;m(w$.cw[r.resizeIndex]!==(0^(y?1:0)),w$.ch[r.resizeIndex]!==(0^(y?1:0)));var _=this.constrainDiffToSnapLines(c,c,s,!0,!0);if(null==_||WN(_.x,0,.1)&&WN(_.y,0,.01))return e;var v=new MN((d=(p=0!==_.x&&0===this._snapData.activeXPointIndex||0!==_.y&&0===this._snapData.activeYPointIndex)?c:l).x+_.x,d.y+_.y),b=u.angle;v.rotateAt(-b,g),d.rotateAt(-u.angle,g),u.angle=0;var w=new MN((v.x-d.x)*(p?u.width/i.width:1),(v.y-d.y)*(p?u.height/i.height:1));u.centerX+=w.x/2,u.width+=w$.cw[r.resizeIndex]*w.x,u.centerY+=w.y/2,u.height+=w$.ch[r.resizeIndex]*w.y,u.rotateAt(b,g)}else if(!n){if(t.getCornerByIndex(h).equals(l,.01))return e;m();var C=this.constrainDiffToSnapLines(l,l,s,!0,!0),x=WN(C.x,0,.01),E=WN(C.y,0,.01);if(x&&E)return e;d=(p=!x&&0===this._snapData.activeXPointIndex||!E&&0===this._snapData.activeYPointIndex)?c:l;var S,P=(h+2)%4,T=o.getCornerByIndex(P);S=x?new MN(T.x,d.y+C.y):new MN(d.x+C.x,T.y);var I=LN(S,d,T),O=zN(I),k=Math.sqrt(HN(T,S))/Math.cos(O)/Math.sqrt(HN(T,d));if(null==k)return e;var R=u.getCornerByIndex(P);u.width*=k,u.height*=k;var A=u.getCornerByIndex(P);u.centerX+=R.x-A.x,u.centerY+=R.y-A.y}return u},e.prototype.fillSnapData=function(e,t,n,r,i,o){if(this.clearSnapData(),null!=i.viewer.surface.printAreas.get(0)&&(this._snapData.defaultBounds=i.viewer.surface.printAreas.get(0).bounds,this._enabled&&null!=e)){var s=[],a=[],l=function(e,t){var n=null!=r?FN.intersect(e,r):e;n.isEmpty()||(s.push({position:n.left,type:t},{position:n.left+n.width/2,type:t},{position:n.right,type:t}),a.push({position:n.top,type:t},{position:n.top+n.height/2,type:t},{position:n.bottom,type:t}))},c=this._conf.snapElements;null!=r&&c.region.enabled&&l(r,W$.Region),null!=this._snapData.defaultBounds&&c.printArea.enabled&&l(this._snapData.defaultBounds,W$.PrintArea);var u=i.getAllItemHandlers({onlyVisible:!0,onlyUnlocked:!0,whiteListFilter:w$.isSafetyLineItemHandler,flatGroupItems:!0});(c.items.enabled||c.safetyLines.enabled)&&u.forEach(function(e){if(e.layer.getVisible())if(w$.isSafetyLineItemHandler(e)){if(!c.safetyLines.enabled)return;var t=e.controlPoints[0],n=e.controlPoints[1];s.push({position:t.x,type:W$.SafetyLines}),s.push({position:n.x,type:W$.SafetyLines}),a.push({position:t.y,type:W$.SafetyLines}),a.push({position:n.y,type:W$.SafetyLines})}else!i.isItemHandlerSelected(e)&&c.items.enabled&&l(e.bounds,W$.Items)});var h=function(e,t){void 0===t&&(t=null);var n=e.sort(function(e,t){return e.position-t.position}),r=[];return n.forEach(function(e,n){var i=r.slice(-1)[0];0!==n&&WN(i.position,e.position,null!=t?t:.01)&&i.type===e.type||r.push(e)}),r},d=function(e,t){void 0===t&&(t=null);var n=e.sort(function(e,t){return e-t}),r=[];return n.forEach(function(e,n){0!==n&&WN(r.slice(-1)[0],e,null!=t?t:.01)||r.push(e)}),r};if(this._snapData.xAnchors=h(s),this._snapData.yAnchors=h(a),o.drag){var p=t.bounds;this._snapData.xPoints=[n.left,e.centerX,n.right],this._snapData.yPoints=[n.top,e.centerY,n.bottom];var f=this._getSnapLineTolerance(i,W$.Items);this._snapData.xPoints=d([p.left,n.left,t.centerX,e.centerX,n.right,p.right],f),this._snapData.yPoints=d([p.top,n.top,t.centerY,e.centerY,n.bottom,p.bottom],f)}}},e.prototype.clearSnapData=function(){this._snapData.xAnchors=[],this._snapData.yAnchors=[],this._snapData.activeXAnchorIndex=null,this._snapData.activeYAnchorIndex=null,this._snapData.xPoints=[],this._snapData.yPoints=[]},e.prototype._getSnapLineTolerance=function(e,t){return Math.abs(this._conf.snapElements[t.toString()].tolerance/e.zoom)},Object.defineProperty(e.prototype,"_getDefaultConf",{get:function(){var e={tolerance:5,color:"rgb(255,0,255)",enabled:!1,priority:0};return{snapElements:{items:xY({},e),printArea:xY({},e),safetyLines:xY({},e),region:xY({},e)}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_enabled",{get:function(){var e=this._conf.snapElements;return e.items.enabled||e.printArea.enabled||e.region.enabled||e.safetyLines.enabled},enumerable:!0,configurable:!0}),e.SnapResult=function(){this.diffValue=null,this.activeAnchorIndex=null,this.activePointIndex=null},e}();!function(e){e.Items="items",e.PrintArea="printArea",e.SafetyLines="safetyLines",e.Region="region"}(W$||(W$={})),function(e){e[e.Selection=0]="Selection",e[e.Create=1]="Create",e[e.SelectPixel=2]="SelectPixel",e[e.Locked=3]="Locked"}(X$||(X$={}));var SY,PY=function(){function e(){this._isMouseDownFired=!1,this._isMouseMoveFired=!1,this._stateChanged=new EL,this._currentState=SY.Initial,this._allowedTransitions=new Map([[SY.Initial,[SY.PointSelected,SY.RectangleSelectionStarted]],[SY.RectangleSelectionStarted,[SY.RectangleSelected,SY.RectangleSelectionChanged]],[SY.RectangleSelectionChanged,[SY.RectangleSelected,SY.RectangleSelectionChanged]],[SY.RectangleSelected,[SY.Initial]],[SY.PointSelected,[SY.Initial]]])}return e.prototype.processMouseEvent=function(e){var t=new MN(e.x,e.y);switch(e.type){case"dblclick":return this._changeState(SY.PointSelected,t);case"mousedown":this._onMouseDown();break;case"mousemove":this._onMouseMove(t);break;case"mouseup":this._onMouseUp(t)}},e.prototype.addStateChanged=function(e){this._stateChanged.add(e)},e.prototype.removeStateChanged=function(e){this._stateChanged.remove(e)},e.prototype._onMouseDown=function(){this._isMouseDownFired=!0},e.prototype._onMouseMove=function(e){return t=this,void 0,r=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){return this._isMouseDownFired?this._isMouseMoveFired?(this._changeState(SY.RectangleSelectionChanged,e),[2]):(this._isMouseMoveFired=!0,this._changeState(SY.RectangleSelectionStarted,e),[2]):[2]})},new((n=void 0)||(n=Promise))(function(e,i){function o(e){try{a(r.next(e))}catch(t){i(t)}}function s(e){try{a(r.throw(e))}catch(t){i(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(o,s)}a((r=r.apply(t,[])).next())});var t,n,r},e.prototype._onMouseUp=function(e){this._changeState(this._isMouseMoveFired?SY.RectangleSelected:SY.PointSelected,e),this._isMouseDownFired=!1,this._isMouseMoveFired=!1,this._changeState(SY.Initial,e)},e.prototype._changeState=function(e,t){if(!this._allowedTransitions.get(this._currentState).includes(e))throw new IL(this._currentState+" to "+e+" transition is restricted");this._currentState=e,this._stateChanged.notify({state:e,point:t})},e}();!function(e){e.Initial="Initial",e.PointSelected="PointSelected",e.RectangleSelectionStarted="RectangleSelectionStarted",e.RectangleSelectionChanged="RectangleSelectionChanged",e.RectangleSelected="RectangleSelected"}(SY||(SY={}));var TY=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},IY=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},OY=function(){function e(e,t,n){var r=this;if(this._args=e,this._viewer=t,this._selection=n,this._onCompleted=new EL,this._onStateChanged=function(e){switch(e.state){case SY.Initial:break;case SY.PointSelected:r._onPointSelectedState(e.point);break;case SY.RectangleSelectionStarted:r._startPoint=e.point,r._onRectangleSelectionStarted(e.point);break;case SY.RectangleSelectionChanged:r._endPoint=e.point,r._onRectangleSelectionChanged();break;case SY.RectangleSelected:r._endPoint=e.point,r._onRectangleSelected()}},null==this._args)throw new kL("CreateBehaviorHandler: Create Behavior args cannot be null");if(null==this._args.item)throw new kL("CreateBehaviorHandler: args.createdItem cannot be null!");var i=this._args.item;if(null!=i.selection||null!=i.click){if(null==i.click||null==i.selection)throw new kL("CreateBehaviorHandler: Point and Rectangle create args must be exist both or must be null");if(null==i.click.type||null==i.selection.type)throw new kL("CreateBehaviorHandler: Item type cannot be null")}else if(null==this._args.item.type)throw new kL("CreateBehaviorHandler: Item type cannot be null")}return e.prototype.init=function(){this._createBehaviorStateMachine=new PY,this._createBehaviorStateMachine.addStateChanged(this._onStateChanged),this._selection.lock(),this._viewer.setCursor(sU.cross,!0)},e.prototype.dispose=function(){this._createBehaviorStateMachine.removeStateChanged(this._onStateChanged)},e.prototype.processMouseEvent=function(e){return TY(this,void 0,void 0,function(){return IY(this,function(t){return this._currentMouseEvent=e,this._createBehaviorStateMachine.processMouseEvent(e),[2]})})},Object.defineProperty(e.prototype,"_selectAfterCreate",{get:function(){return null==this._args.selectAfterCreate||this._args.selectAfterCreate},enumerable:!0,configurable:!0}),e.prototype.addOnCompleted=function(e){this._onCompleted.add(e)},e.prototype.removeOnCompleted=function(e){this._onCompleted.remove(e)},e.prototype._onRectangleSelectionStarted=function(e){return TY(this,void 0,void 0,function(){var t;return IY(this,function(n){switch(n.label){case 0:return t=this._getCreateItemArgs(e,!0),this._selection.unlock(),t.type===PG.BoundedTextItem?[3,2]:[4,this._addItem(t)];case 1:return n.sent(),this._selection._operation={resize:!0,resizeIndex:3,arbitraryResize:!0,cornerArbitraryResize:!0,proportionalResize:!0,cornerProportionalResize:!0},[3,3];case 2:this._selection._operation={selection:!0},n.label=3;case 3:return this._selection.update(),this._selection.startTransform(e),[2]}})})},e.prototype._onRectangleSelectionChanged=function(){this._selection.processMouseEvent(this._currentMouseEvent),this._viewer.canvas.redrawDesign()},e.prototype._onRectangleSelected=function(){return TY(this,void 0,void 0,function(){var e,t,n,r;return IY(this,function(i){switch(i.label){case 0:return e=FL.clone(this._currentMouseEvent),null==this._itemAdded?[3,2]:[4,this._itemAdded.promise];case 1:i.sent(),i.label=2;case 2:return t=this._getCreateItemArgs(this._startPoint,!0).type===PG.BoundedTextItem,n=this._selectionRect,t?[4,this._viewer.commandManager.execute(GG.createItem,this._getCreateItemArgs(this._startPoint,!0))]:[3,6];case 3:return r=i.sent(),[4,this._viewer.commandManager.execute(XG.addItems,{items:[r]})];case 4:return i.sent(),[4,this._textWorkaround(n,r)];case 5:return i.sent(),[3,8];case 6:return[4,this._viewer.getHandler(this._item).waitUpdate()];case 7:i.sent(),i.label=8;case 8:return this._selection.processMouseEvent(e),this._onCompleted.notify(n),this._selectAfterCreate||this._selection.clearSelectedItemHandlers(),[2]}})})},e.prototype._onPointSelectedState=function(e){return TY(this,void 0,void 0,function(){var t;return IY(this,function(n){switch(n.label){case 0:return null==(t=this._getCreateItemArgs(e,!1))?[3,2]:[4,this._addItem(t)];case 1:n.sent(),n.label=2;case 2:return this._onCompleted.notify(e),this._selectAfterCreate||this._selection.clearSelectedItemHandlers(),[2]}})})},e.prototype._textWorkaround=function(e,t){return TY(this,void 0,void 0,function(){var n;return IY(this,function(r){switch(r.label){case 0:return[4,(n=this._viewer.getHandler(t)).waitUpdate()];case 1:return r.sent(),t.sourceRectangle=e,t.textRectangle=e,t.sourcePath=$N.rectangle(e.left,e.top,e.width,e.height),t.transform=KN.fromRectangleF(e).getTransform(KN.fromRectangleF(t.sourceRectangle)),n.update(),[2]}})})},e.prototype._addItem=function(e){return TY(this,void 0,void 0,function(){var t;return IY(this,function(n){switch(n.label){case 0:return this._itemAdded=new DU,[4,this._viewer.commandManager.execute(GG.createItem,e)];case 1:return t=n.sent(),this._item=t,[4,this._viewer.commandManager.execute(XG.addItems,{items:[t]})];case 2:return n.sent(),[4,this._viewer.canvas.waitUpdate()];case 3:return n.sent(),this._itemAdded.resolve(),[2]}})})},e.prototype._getCreateItemArgs=function(e,t){void 0===t&&(t=!1);var n=this._args.item;return this._getUpdatedArgs(null==n.click&&null==n.selection?this._args.item:t?n.selection:n.click,e,t)},e.prototype._getUpdatedArgs=function(e,t,n){void 0===n&&(n=!1);var r=Object.assign({},e);r.itemData=Object.assign({},e.itemData||{});var i=r.itemData;return null==i.location&&(i.location={}),i.location.x=t.x,i.location.y=t.y,n&&(i.width=1,i.height=1,i.location.originX=YU.Left,i.location.originY=YU.Top),r.relativeToPrintArea=!1,r},Object.defineProperty(e.prototype,"_selectionRect",{get:function(){return new FN(Math.min(this._startPoint.x,this._endPoint.x),Math.min(this._startPoint.y,this._endPoint.y),Math.abs(this._startPoint.x-this._endPoint.x),Math.abs(this._startPoint.y-this._endPoint.y))},enumerable:!0,configurable:!0}),e}();function kY(e){return null!=e&&"function"==typeof e.addOnCompleted&&"function"==typeof e.removeOnCompleted}var RY,AY=function(){function e(e,t,n,r,i,o){this._canvas=e,this._selection=t,this._hoverHandler=n,this._viewer=r,this._rotateHandler=i,this._dndHandler=o,this._isMouseButtonPressed=!1,this._isSelectionProcessed=!1,this._isMouseDrag=!1}return e.prototype.init=function(){this._selection.unlock()},e.prototype.dispose=function(){},e.prototype.onTouchStart=function(e){if(BL.IsTouchDevice()){var t=new MN(e.x,e.y),n=this._selection.hitTest(t,!1);if(n.resize||n.rotate||n.body)e.originalEvent.preventDefault();else{var r=this._canvas.getItemHandlersByHitTest(t);null!=this._getHandlerForSelect(r,t,e)&&e.originalEvent.preventDefault()}}},e.prototype.processMouseEvent=function(e){var t=new MN(e.x,e.y),n=this._canvas.getItemHandlersByHitTest(t),r=this._getHandlerForSelect(n,t,e),i=this._selection.hitTest(t,e.originalEvent.shiftKey);if(null!=this._canvas.textEditor&&!this._isMultiselection(e)&&1===this._selection.getSelectedItemHandlers().length&&!i.resize&&!i.rotate){var o=this._canvas.currentItemHandler,s=null!=r&&null!=o&&o.uniqueId===r.uniqueId;if(null!=o&&o instanceof b$&&o.inPlaceEditingEnabled&&o.processInPlaceEditingMouseEvent(e,s))return;if(null!=r&&r!=o&&r instanceof b$&&r.inPlaceEditingEnabled&&("mousedown"!==e.type&&"dblclick"!==e.type||this._processSelection(r,e),r.processInPlaceEditingMouseEvent(e,s)))return}var a=r instanceof YW&&this._placeholderButtonGroupHitTest(r,t),l=this._placeholderHandleButtonGroupHitTest(t),c=!!this._canvas.isShowFloatingItemToolbar()&&this._floatingItemToolbarHitTest(t),u=i.body||i.resize||i.rotate;!this._canvas.canvasItemHoverEnabled||i.resize||i.rotate||this._isMouseButtonPressed?this._canvas.hideHover():this._hoverHandler.processMouseEvent(e,r);var h=u||this._canvas.isResizing()||!this._canvas.violationWarningButtonsEnabled?null:this._canvas.violationWarningButtonHitTestObject(t),d=null!=h,p=this._canvas.contentUpdatingPlaceholderItemHandler,f=null!=this._viewer?this._viewer.whitespaceDiv:null;null!=f&&(f.style.pointerEvents=l||a?"none":"auto");var m=!1;if("mousedown"===e.type||"dblclick"===e.type){if(this._isSelectionProcessed=!1,null!=r){l||c||d||i.resize||i.rotate||this._canvas.currentItemHandler instanceof eX&&r.item.parentGroupItem===this._canvas.currentItemHandler.item||(this._processSelection(r,e),this._isSelectionProcessed=!0);var g=this._canvas.selectedPlaceholderItemHandler;!l||this._isMouseButtonPressed||null==g||this._canvas.autoPlaceholderEditModeEnabled?null==g||!this._canvas.autoPlaceholderEditModeEnabled||this._isMouseButtonPressed||g.editing||g.onHandleButtonMouseDown():g.showHandleButton()?g.onHandleButtonMouseDown():g.editing&&g.getPermissions(!0).showDoneButton&&g.onDoneButtonClick()}else u||c||d||!this._viewer.clearSelectionOnViewerClick||this._canvas.clearSelectedItemHandlers();var y=this._canvas.contentEditingPlaceholderItemHandler;null!=y&&u&&(y.setContentUpdating(!0),this._canvas.updatePlaceholderButtonGroups()),this._mouseDownTimeStamp=(new Date).getTime(),"dblclick"===e.type&&null!=this._canvas.currentItemHandler&&(this._viewer.selectedItems.length>1?null!=r&&(this._canvas.clearSelectedItemHandlers(),this._canvas.addSelectedItemHandler(r),r.dispatchDoubleClickEvent(e)):this._canvas.currentItemHandler.dispatchDoubleClickEvent(e)),"dblclick"!==e.type&&(this._isMouseButtonPressed=!0)}else if("mouseup"===e.type)null!=r&&!this._isMouseDrag&&!this._isSelectionProcessed&&this._canvas.currentItemHandler instanceof eX&&(m=!0),this._isMouseButtonPressed=!1,this._isMouseDrag=!1,null!=p&&p.onPlaceholderButtonMouseUp.apply(p),delete this._mouseDownTimeStamp,delete this._cursor,null!=this._rotateHandler.rotateDiv&&this._rotateHandler.removeRotateDiv(),this._viewer.selectedItems.length>0&&this._rotation(this._canvas.currentItemHandler,t,!0);else if("mousemove"===e.type){this._isMouseButtonPressed&&(this._isMouseDrag=!0);for(var _=this._canvas.getAllItemHandlers({onlyVisible:!0,onlyType:YW}),v=0;v<_.length;v++){var b=_[v],w=b.placeholderButtonGroup;this._canvas.isItemHandlerSelected(b)||null==w||(w.style.pointerEvents="none")}if(l||a)if(r instanceof YW&&null!=r.placeholderButtonGroup)r.placeholderButtonGroup.style.pointerEvents="auto";else{var C=this._canvas.selectedPlaceholderItemHandler;null!=C&&null!=C.placeholderButtonGroup&&(C.placeholderButtonGroup.style.pointerEvents="auto")}var x=this._canvas.selectedHandler;if(null!=x&&null!=x.floatingItemToolbar&&this._canvas.floatingItemToolbarEnabled&&(x.floatingItemToolbar.style.pointerEvents=i.rotate||i.resize?"none":"auto"),d&&(h.getViolationWarningButton().style.pointerEvents=i.rotate||i.resize?"none":"auto"),this._viewer.selectedItems.length>0&&this._isMouseButtonPressed&&this._rotation(x,t),null!=this._mouseDownTimeStamp&&(new Date).getTime()-this._mouseDownTimeStamp<this._canvas.mouseMoveTimeout)return}var E=this._cursor,S=null!=E;p=this._canvas.contentUpdatingPlaceholderItemHandler,null==E&&(i.resize||i.rotate||null==r||this._canvas.isItemHandlerSelected(r)||a?null==p||i.resize||i.rotate?E=a?sU.defaultCursor:this._selection.getCursor(t):(E=sU.move,S=!0):E=sU.pointer),this._viewer.setCursor(E,S),"mousemove"!==e.type&&(this._cursor="mousedown"===e.type?E:null),this._selection.processMouseEvent(e,m),m&&this._processSelection(r,e),(l||p||this._selection.isResizing())&&"mouseup"!==e.originalEvent.type||this._dndHandler.processMouseEvent(e),"mousemove"===e.type?(this._selection.isOperationNotNull()||null!=i.selection&&this._isMouseButtonPressed||this._dndHandler.isDragStarted())&&this._canvas.redrawDesign():"mouseup"===e.type&&this._canvas.redrawDesign()},e.prototype._getHandlerForSelect=function(e,t,n){var r=this;if(null!=e&&0!==e.length){var i=n.originalEvent.shiftKey||n.originalEvent.metaKey||n.originalEvent.ctrlKey,o=e.findIndex(function(e){return r._canvas.isItemHandlerSelected(e)}),s=e[0],a=this._canvas.contentEditingPlaceholderItemHandler;if(null!=a&&a.content.hitTest(t).body)return a;if(!(this._canvas.getSelectedItemHandlers().length>1&&this._selection.visibleRectangle.bounds.contains(t))||i||"dblclick"==n.type){if(e.some(function(e){return e instanceof eX})&&this._canvas.getSelectedItemHandlers().length>0){var l=this._canvas.getSelectedItemHandlers().getItem(0),c=-1;if(l instanceof eX&&e.includes(l)?c=e.indexOf(l):null!=l.item.parentGroupItem&&e.includes(this._canvas.handlerFactory.get(l.item.parentGroupItem))&&(c=e.indexOf(this._canvas.handlerFactory.get(l.item.parentGroupItem))),c>-1&&null!=e[c+1]){var u=e[c+1].item,h=l.item;if(u.parentGroupItem===h||null!=u.parentGroupItem&&u.parentGroupItem===h.parentGroupItem)return e[c+1]}}return o>0&&!e[o].bounds.containsRectangle(s.bounds)&&!i?e[o]:s}}},e.prototype._placeholderButtonGroupHitTest=function(e,t){return!(null==this._viewer||null==this._canvas.parentElement||null==e||null==e.placeholderButtonGroup||e.getPermissions()&&!e.getPermissions().showSelectButton)&&this._getPlaceholderButtonGroupRect(e.placeholderButtonGroup).contains(t)},e.prototype._placeholderHandleButtonGroupHitTest=function(e){var t=this._canvas.selectedPlaceholderItemHandler;return null!=t&&null!=t.placeholderButtonGroup&&this._getPlaceholderButtonGroupRect(t.placeholderButtonGroup).contains(e)},e.prototype._floatingItemToolbarHitTest=function(e){if(null==this._viewer||null==this._canvas.parentElement||!this._canvas.floatingItemToolbarEnabled)return!1;var t=this._canvas.selectedHandler;return null!=t&&null!=t.floatingItemToolbar&&this._canvas.getButtonGroupRectInGripsDiv(t.floatingItemToolbar).contains(e)},e.prototype._isMultiselection=function(e){return e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey},e.prototype._processSelection=function(e,t){if(null!=e){var n=this._isMultiselection(t);this._canvas.isItemHandlerSelected(e)?n?this._canvas.removeSelectedItemHandler(e):this._selection.currentItemHandler=e:n&&this._canvas.getSelectedItemHandlers().toArray().every(function(t){return t.item.parentGroupItem===e.item.parentGroupItem})?this._canvas.addSelectedItemHandler(e):this._canvas.setSelectedItemHandlers([e])}},e.prototype._rotation=function(e,t,n){var r=this,i=document.querySelectorAll("#resize-left-top, #resize-right-top, #resize-right-bottom, #resize-left-bottom, #rotate-circle, #resize-width-left, #resize-width-right, #resize-height-top, #resize-height-bottom"),o=this._viewer.contentAngle,s=null!=e&&this._canvas.isPlaceholder(e)?e:null,a=function(){i.forEach(function(e){r._buttonsShow(e)}),null!=s&&(null!=s.handleButton&&r._buttonsShow(s.handleButton),null!=s.selectButton&&r._buttonsShow(s.selectButton)),r._rotateHandler.removeRotateDiv()},l=this._viewer.element,c=this._rotateHandler.calculatePositionRotateDiv(o,Math.max(0,r._viewer.getParentPosition(r._canvas.parentElement.parentElement).left),Math.max(0,r._viewer.getParentPosition(r._canvas.parentElement.parentElement).top),t,this._canvas.parentElement.parentElement.offsetWidth,this._canvas.parentElement.parentElement.offsetHeight),u=l.scrollTop,h=l.scrollLeft,d=l.scrollWidth>l.clientWidth&&0==h||h>0,p=l.scrollHeight>l.clientHeight&&0==u||u>0,f=BL.IsTouchDevice()?0:17,m=this._viewer.height-(35+(d?f:0))+u,g=this._viewer.width-(58+(p?f:0))+h;c.y>m?c.y=m:c.y<u&&(c.y=u),c.x>g?c.x=g:c.x<h&&(c.x=h),this._selection.isRotating()?(i.forEach(function(e){r._buttonsHidden(e)}),null!=s&&(null!=s.handleButton&&this._buttonsHidden(s.handleButton),null!=s.selectButton&&this._buttonsHidden(s.selectButton)),null==this._rotateHandler.rotateDiv?this._rotateHandler.addRotateDiv(c.y,c.x):this._rotateHandler.updateRotatePositionDiv(c.y,c.x)):a(),n&&a(),this._canvas.updatePlaceholderButtonGroups()},e.prototype._getPlaceholderButtonGroupRect=function(e){var t=this._viewer.getParentPosition(this._canvas.parentElement.parentElement),n=new FN(e.offsetLeft+t.left,e.offsetTop+t.top,e.offsetWidth,e.offsetHeight),r=this._viewer.controlToWorkspaceRectangle(n),i=new FN(r.left,r.top,r.width,r.height);return KN.fromRectangleF(i).bounds},e.prototype._buttonsHidden=function(e){e.classList.remove("buttonsShown"),e.classList.add("buttonsHidden")},e.prototype._buttonsShow=function(e){e.classList.remove("buttonsHidden"),e.classList.add("buttonsShown")},e}(),MY=function(){return(MY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},DY=function(){function e(e,t,n){var r=this;this._canvas=e,this._canvasElementHandler=t,this._selection=n,this._mobileMode=BL.IsTouchDevice(),this._cursorSize=10,this._pixelRadius=this._mobileMode?6.5:8.5,this._zoom=10,this._lenseRadius=this._pixelRadius*this._zoom,this._textYPosition=130,this._textPadding={v:4,h:10},this._buttonsElementMargin=8,this._lenseCaptured=!1,this._onCompletedEvent=new PL,this._currentColorData=null,this._createButtonsElement=function(){var e=document.createElement("div");r._canvas.viewer.whitespaceDiv.appendChild(e),e.className="floating-btn-group btn-group color-select",e.style.position="absolute";var t=document.createElement("button");t.className="btn btn-default reject-button cc-icon-arrow-close",t.addEventListener("click",r._onReject),e.appendChild(t);var n=document.createElement("button");n.className="btn btn-default accept-button cc-icon-check-image",n.addEventListener("click",r._onAccept),e.appendChild(n),r._buttonsElement=e},this._onAccept=function(){r._onSelectPixelEnd(null!=r._currentColorData?oH.createColor(r._currentColorData,!1,!0):null)},this._onReject=function(){r._onSelectPixelEnd(null)},this._onSelectPixelEnd=function(e){r._onCompletedEvent.notify(r,e),r._canvas.viewer.eventManager.selectPixelFinished.notify(e),r._selection.unlock()},this._updateCreateButtonsPosition=function(){if(null!=r._buttonsElement){var e=parseFloat(r._canvasLensElement.style.left),t=parseFloat(r._canvasLensElement.style.top),n=parseFloat(r._canvasLensElement.style.height),i=parseFloat(r._canvasLensElement.style.height),o=r._buttonsElement.getBoundingClientRect();r._buttonsElement.style.left=e+n/2-o.width/2+"px";var s=t-o.height-r._buttonsElementMargin;t-o.height-r._buttonsElementMargin<=0&&(s=t+i+r._buttonsElementMargin),r._buttonsElement.style.top=s+"px"}},this._updateView=function(e){void 0===e&&(e=null);var t=e||r._currentPoint;r._updateLensImage(t),r._changePosition(t),r._mobileMode&&r._updateCreateButtonsPosition()},this._createLensCanvas=function(){var e=document.createElement("canvas");e.width=2*r._lenseRadius,e.height=2*r._lenseRadius,e.style.width=2*r._lenseRadius+"px",e.style.height=2*r._lenseRadius+"px",e.style.position="absolute",e.style.borderRadius=r._lenseRadius+"px",e.style.borderWidth="1px",e.style.borderColor="rgb(0,0,0,0.7)",e.style.borderStyle="solid",e.style.userSelect="none",e.tabIndex=-1,e.addEventListener("keydown",r._onKeyDown);var t=e.getContext("2d");return t.imageSmoothingEnabled=!1,t.imageSmoothingQuality="low",setTimeout(function(){return e.focus()}),e},this._onKeyDown=function(e){27===e.keyCode&&r._onReject()}}return e.prototype.init=function(){this._canvas.viewer.setCursor(sU.cross),this._selection.lock(!0),this._canvas.viewer.ignoreDocumentClickOnce(),this._mobileMode&&(this._canvasLensElement=this._createLensCanvas(),this._canvasElementHandler.addChild(this._canvasLensElement),this._createButtonsElement(),this._putLenseOnWhitespaceCenter(),this._canvas.viewer.add_onResize(this._updateView),this._canvasElementHandler.hideSelection())},e.prototype.addOnCompleted=function(e){this._onCompletedEvent.add(e)},e.prototype.removeOnCompleted=function(e){this._onCompletedEvent.remove(e)},e.prototype._putLenseOnWhitespaceCenter=function(){var e=this._canvas.viewer,t=e.whitespaceDiv,n=new MN(t.offsetWidth/2,t.offsetHeight/2),r=e.whitespaceToWorkspacePoint(n);this._currentPoint=r,this._updateView()},e.prototype.processMouseEvent=function(e){this._mobileMode?this._processMobileEvent(e):this._processDesktopEvent(e)},e.prototype._processDesktopEvent=function(e){var t=new MN(e.x,e.y);this._canvas.viewer.ignoreDocumentClickOnce(),"mousemove"===e.type?(null==this._canvasLensElement&&(this._canvasLensElement=this._createLensCanvas(),this._canvasElementHandler.addChild(this._canvasLensElement)),this._updateView(t)):"mouseup"===e.type&&(this._updateView(t),this._onAccept())},e.prototype._processMobileEvent=function(e){var t=new MN(e.x,e.y),n=this._canvas.viewer;if("mousemove"===e.type){if(!this._lenseCaptured)return;var r=new MN(this._currentPoint.x+t.x-this._capturedPoint.x,this._currentPoint.y+t.y-this._capturedPoint.y);this._updateView(r)}else if("mousedown"===e.type){var i=new MN(parseInt(this._canvasLensElement.style.left)+this._lenseRadius,parseInt(this._canvasLensElement.style.top)+this._lenseRadius),o=n.workspaceToWhiteSpacePoint(t);Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2))<this._lenseRadius&&(this._lenseCaptured=!0,this._capturedPoint=t.clone())}else if("mouseup"===e.type){if(!this._lenseCaptured)return;this._lenseCaptured=!1,this._currentPoint=new MN(this._currentPoint.x+t.x-this._capturedPoint.x,this._currentPoint.y+t.y-this._capturedPoint.y),this._capturedPoint=null}this._lenseCaptured&&(e.originalEvent.preventDefault(),e.originalEvent.stopPropagation())},e.prototype._changePosition=function(e){var t=this._canvas.viewer,n=pY.getRotatedPoint(t,e),r=t.workspaceToWhiteSpacePoint(n),i=2*this._lenseRadius,o=t.whitespaceDiv;this._mobileMode?(this._canvasLensElement.style.left=kW(r.x,this._lenseRadius,o.offsetWidth-this._lenseRadius)-this._lenseRadius+"px",this._canvasLensElement.style.top=kW(r.y,this._lenseRadius,o.offsetHeight-this._lenseRadius)-this._lenseRadius+"px"):(this._canvasLensElement.style.left=r.x+this._cursorSize+2*this._lenseRadius<o.offsetWidth?r.x+this._cursorSize+"px":r.x-this._cursorSize-i+"px",this._canvasLensElement.style.top=r.y+this._cursorSize+2*this._lenseRadius<o.offsetHeight?r.y+this._cursorSize+"px":r.y-this._cursorSize-i+"px")},e.prototype._updateLensImage=function(e){var t=this._canvas.viewer,n=2*this._pixelRadius,r=t.workspaceToContentPoint(e);r.x*=window.devicePixelRatio,r.y*=window.devicePixelRatio;var i=2*this._lenseRadius,o=new FN(r.x-Math.trunc(this._pixelRadius),r.y-Math.trunc(this._pixelRadius)+1,n,n),s=this._canvasElementHandler.surfaceCanvas.getContext("2d"),a=s.getImageData(o.left,o.top,o.width,o.height),l=Math.trunc(n/2),c=this._canvasLensElement.getContext("2d");AU.clearCanvas(c);for(var u=a.data,h=new QN(n,n),d=0;d<u.length;d+=4){var p=d/4,f=Math.trunc(p/n),m=p%n,g=u[d+3]/255,y=255*(1-g),_={r:Math.min(Math.round(u[d]*g+y),255),g:Math.min(Math.round(u[d+1]*g+y),255),b:Math.min(Math.round(u[d+2]*g+y),255)};c.fillStyle="rgba("+_.r+","+_.g+","+_.b+")";var v=pY.getRotatedPointFromSize(new MN(m,f),h,t.contentAngle);c.fillRect(v.x*this._zoom,v.y*this._zoom,this._zoom,this._zoom),l===f&&l===m&&(this._currentColorData=MY(MY({},_),{type:"RgbColor"}))}for(d=0;d<n;d++)AU.drawLine(c,d*this._zoom,0,d*this._zoom,i,1,"black",.15),AU.drawLine(c,0,d*this._zoom,i,d*this._zoom,1,"black",.15);if(s.globalAlpha=1,c.lineWidth=1,c.strokeStyle="#000",c.strokeRect(l*this._zoom,l*this._zoom,this._zoom,this._zoom),c.strokeStyle="#fff",c.strokeRect(l*this._zoom-1,l*this._zoom-1,this._zoom+2,this._zoom+2),this._canvas.viewer.surfaceHandler.getBounds(UV.Total).contains(e,!0)){if(!this._mobileMode){var b=this._currentColorData,w="RGB: "+b.r+" "+b.g+" "+b.b,C=s.measureText(w).width;c.font="10px Roboto",c.fillStyle="black";var x=(i-C)/2;c.fillStyle="rgba(0, 0, 0, 0.7)",AU.drawRoundedRectangle(c,new FN(x-this._textPadding.h,this._textYPosition-10,C+2*this._textPadding.h,20),10),c.fillStyle="white",c.fillText(w,x+2,this._textYPosition+3,i)}}else this._currentColorData=null},e.prototype.dispose=function(){this._canvas.viewer.setCursor(sU.defaultCursor),null!=this._buttonsElement&&(this._buttonsElement.querySelector(".accept-button").removeEventListener("click",this._onAccept),this._buttonsElement.querySelector(".accept-button").removeEventListener("touchend",this._onAccept),this._buttonsElement.querySelector(".reject-button").removeEventListener("click",this._onAccept),this._buttonsElement.querySelector(".reject-button").removeEventListener("touchend",this._onAccept),this._buttonsElement.remove()),null!=this._canvasLensElement&&(this._canvasLensElement.removeEventListener("keydown",this._onKeyDown),this._canvasLensElement.remove()),this._canvas.viewer.remove_onResize(this._updateView)},e}(),FY=function(){function e(e){this._selection=e}return e.prototype.processMouseEvent=function(e){},e.prototype.init=function(){this._selection.lock()},e.prototype.dispose=function(){this._selection.unlock()},e}(),LY=function(){function e(e,t,n,r,i,o,s){var a=this;this._selection=e,this._viewer=t,this._canvas=n,this._hoverHandler=r,this._rotateHandler=i,this._dndHandler=o,this._canvasElementHandler=s,this._onMouseBehaviorComplete=function(e){a._viewer.eventManager.mouseBehaviorCreateFinishedEvent.notify(e),(null==a._currentOptions||null==a._currentOptions.resetToDefaultBehavior||a._currentOptions.resetToDefaultBehavior)&&a.setMouseBehavior(X$.Selection)}}return Object.defineProperty(e.prototype,"currentMouseBehaviorHandler",{get:function(){return this._currentMouseBehaviorHandler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentMouseBehavior",{get:function(){return this._currentMouseBehavior},enumerable:!0,configurable:!0}),e.prototype.setMouseBehavior=function(e,t,n){switch(this._currentMouseBehavior=e,this._currentOptions=n,null!=this._currentMouseBehaviorHandler&&(kY(this._currentMouseBehaviorHandler)&&this._currentMouseBehaviorHandler.removeOnCompleted(this._onMouseBehaviorComplete),this.currentMouseBehaviorHandler.dispose()),e){case X$.Selection:this._currentMouseBehaviorHandler=this._getSelectionModeHandler();break;case X$.Create:this._currentMouseBehaviorHandler=new OY(t,this._viewer,this._selection);break;case X$.SelectPixel:this._currentMouseBehaviorHandler=new DY(this._canvas,this._canvasElementHandler,this._selection);break;case X$.Locked:this._currentMouseBehaviorHandler=new FY(this._selection)}this._currentMouseBehaviorHandler.init(),null!=this._currentMouseBehaviorHandler&&kY(this._currentMouseBehaviorHandler)&&this._currentMouseBehaviorHandler.addOnCompleted(this._onMouseBehaviorComplete),this._canvas.updateButtonGroups()},e.prototype._getSelectionModeHandler=function(){return this._selectionModeHandler||this._createSelectionHandler()},e.prototype._createSelectionHandler=function(){return this._selectionModeHandler=new AY(this._canvas,this._selection,this._hoverHandler,this._viewer,this._rotateHandler,this._dndHandler),this._selectionModeHandler},Object.defineProperty(e.prototype,"isSelectionMouseBehavior",{get:function(){return this._currentMouseBehaviorHandler===this._getSelectionModeHandler()},enumerable:!0,configurable:!0}),e.prototype.processMouseEvent=function(e){this._currentMouseBehaviorHandler.processMouseEvent(e)},e}(),BY=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},NY=function(){function e(e,t){this._failedFonts=new Array,this._activeRequests=new Array,this._textWhizz=e,this._url=t+"/api/ccviewer/fonts",this._fontRegistry=new this._textWhizz.FontRegistry(72)}return Object.defineProperty(e.prototype,"textWhizzFontRegistry",{get:function(){return this._fontRegistry},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return null!=this._fontRegistry},enumerable:!0,configurable:!0}),e.prototype.createFont=function(e,t){return this._fontRegistry.createFont(this._normalizePsName(e),t)},e.prototype.containsFonts=function(e){var t,n;try{for(var r=BY(e),i=r.next();!i.done;i=r.next())if(!this._fontRegistry.contains(this._normalizePsName(i.value)))return!1}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return!0},e.prototype.checkFailedFonts=function(e){var t,n;try{for(var r=BY(e),i=r.next();!i.done;i=r.next())if(this._failedFonts.includes(this._normalizePsName(i.value)))return!0}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return!1},e.prototype.loadFonts=function(e){var t,n;if(this.containsFonts(e))return Promise.resolve();var r=new Array;try{for(var i=BY(e),o=i.next();!o.done;o=i.next())r.push(this._loadFont(this._normalizePsName(o.value)))}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return Promise.all(r).then(function(){}).catch(function(){throw"Failed to load some fonts"})},e.prototype.clear=function(){this._fontRegistry.clear(),this._failedFonts=new Array},e.prototype._loadFont=function(e){var t=this;if(this._failedFonts.includes(e))return Promise.reject(null);var n=this._activeRequests.find(function(t){return t.id===e});if(null!=n)return n.promise;var r=$U({type:jU.get,url:this._url+"/"+e,responseType:"arraybuffer"}).then(function(e){var n=e.xhr.response;if(n){var r=new Uint8Array(n),i=r.length*r.BYTES_PER_ELEMENT,o=t._textWhizz._malloc(i),s=new Uint8Array(t._textWhizz.HEAPU8.buffer,o,i);s.set(new Uint8Array(r)),t._fontRegistry.add(s.byteOffset,s.length),t._textWhizz._free(o)}}).catch(function(){throw t._failedFonts.push(e),null}).finally(function(){t._activeRequests=t._activeRequests.filter(function(t){return t.id!==e})});return this._activeRequests.push({id:e,promise:r}),r},e.prototype._normalizePsName=function(e){return e.trim().toLowerCase()},e}(),jY=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HY=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i,o)||this;return s._currentCanvas=null,s._needWorkaroundForIOs=!1,s._needWorkaroundForIOs=BL.IsIos(),s._setCurrentCanvas(s._staticCanvas),s}return jY(t,e),t.prototype._setCurrentCanvas=function(e){this._currentCanvas!=e&&(this._textWhizz.setCurrentContext("#"+e.id),this._textWhizz.clearContext(),this._currentCanvas=e,e==this._activeCanvas&&this._needWorkaroundForIOs&&(this._textWhizz.setCurrentContextSize(Math.ceil(e.width+1),Math.ceil(e.height+1)),this._needWorkaroundForIOs=!1)),this._textWhizz.setCurrentContextSize(Math.ceil(e.width),Math.ceil(e.height));var t=this._scale,n=this._textWhizz.Matrix.createScale(t,t);this._textWhizz.setContextTransform(n)},t.prototype._getTextTransform=function(e,t,n){var r=this._scale*n,i=this._textWhizz.Matrix.createIdentity();return t.scale(1/n,1/n),i.translate(-t.x,-t.y),i.scale(e.scaleX,e.scaleY),i.rotate(zN(e.angle)),i.translate(e.translateX/n,e.translateY/n),i.translate(t.x,t.y),i.translate(this._offset.x/n,this._offset.y/n),i.scale(r,r),i},t.prototype.drawText=function(e,t,n,r,i,o){var s=this._getTextTransform(t,n,r);try{if(this._activeCanvas.style.opacity=(null!=i?i:1).toString(),this._setCurrentCanvas(this._activeCanvas),this._textWhizz.clearContext(),this._textWhizz.setContextTransform(s),null!=o){var a=o.clone();a.transform(new YN(1/r,1/r,0,0,0),new MN(0,0)),this._textWhizz.setClippingPaths(a.toTextWhizzPath(this._textWhizz))}else this._textWhizz.clearClippingPaths();this._textWhizz.addTextToContext(e)}catch(l){throw m$.createException(l,this._textWhizz)}},t.prototype.transformText=function(e,t,n,r,i,o){if(this._currentCanvas==this._activeCanvas){var s=this._getTextTransform(t,n,r);this._textWhizz.setContextTransform(s)}else this.drawText(e,t,n,r,i,o)},t.prototype.clearText=function(){this._setCurrentCanvas(this._activeCanvas),this._textWhizz.clearContext()},t.prototype.drawSelection=function(e,t,n,r,i){if(this._currentCanvas==this._activeCanvas)try{var o=t.getArea();this._textWhizz.clearContext();var s=t.getStart(),a=t.getEnd();(t.getStart().getLineIndex()>t.getEnd().getLineIndex()||t.getStart().getLineIndex()==t.getEnd().getLineIndex()&&t.getStart().getOffset()>t.getEnd().getOffset())&&(a=t.getStart(),s=t.getEnd());var l=this._colorToTextWhizz(this._selectionColor);this._textWhizz.addShapeToContext(o,l);var c=new this._textWhizz.TextRange(e.getFirstPosition(),s);this._textWhizz.addTextRangeToContext(e,c);var u=new this._textWhizz.TextRange(a,e.getLastPosition());this._textWhizz.addTextRangeToContext(e,u);var h=this._colorToTextWhizz(this._selectionTextColor);this._textWhizz.addColorTextRangeToContext(e,t,h)}catch(d){throw m$.createException(d,this._textWhizz)}},t.prototype.getTextImage=function(e,t,n){if(WN(0,t.width)||WN(0,t.height))return null;var r=this._scale,i=this._getScaledBounds(t);bY.setElementSize(this._staticCanvas,i.width,i.height);try{this._setCurrentCanvas(this._staticCanvas);var o=this._textWhizz.Matrix.createScale(n*r,n*r);o.translate(-i.left,-i.top),this._textWhizz.setContextTransform(o),this._textWhizz.clearContext(),this._textWhizz.addTextToContext(e)}catch(s){throw m$.createException(s,this._textWhizz)}try{return this._getBase64Url()}catch(s){return console.warn("Cannot get base64 image for text. Reason: "+s),null}},t}(oW),zY=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),VY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zY(t,e),t.prototype.drawText=function(e,t,n,r,i,o){var s=this._getScaledContext(t,n,r);if(s.globalAlpha=null!=i?i:1,null!=o){var a=o.clone();a.transform(new YN(1/r,1/r,0,0,0),new MN(0,0)),AU.clipPath(s,a)}try{e.draw(s)}catch(l){throw m$.createException(l,this._textWhizz)}finally{s.restore()}},t.prototype.transformText=function(e,t,n,r,i,o){this.drawText(e,t,n,r,i,o)},t.prototype.clearText=function(){var e=this._activeCanvas.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height)},t.prototype.drawSelection=function(e,t,n,r,i){var o=this._getScaledContext(n,r,i);try{t.getArea().addToContext(o),o.fillStyle=this._selectionColor.preview,o.fill(),e.draw(o);var s=this._colorToTextWhizz(this._selectionTextColor);t.draw(o,s)}catch(a){throw m$.createException(a,this._textWhizz)}finally{o.restore()}},t.prototype.getTextImage=function(e,t,n){if(WN(0,t.width)||WN(0,t.height))return null;var r=this._scale,i=this._getScaledBounds(t);bY.setElementSize(this._staticCanvas,i.width,i.height);var o=this._staticCanvas.getContext("2d");o.clearRect(0,0,o.canvas.width,o.canvas.height),o.save(),o.translate(-i.left,-i.top),o.scale(r*n,r*n);try{e.draw(o)}catch(s){throw m$.createException(s,this._textWhizz)}finally{o.restore()}try{return this._getBase64Url()}catch(s){return console.warn("Cannot get base64 image for text. Reason: "+s),null}},t.prototype._getScaledContext=function(e,t,n){var r=this._activeCanvas.getContext("2d");r.clearRect(0,0,r.canvas.width,r.canvas.height),r.save();var i=this._scale;r.scale(i,i),r.translate(this._offset.x,this._offset.y);var o=e.toMatrix();return r.translate(t.x,t.y),r.transform(o.m00,o.m10,o.m01,o.m11,o.m02,o.m12),r.translate(-t.x,-t.y),r.scale(n,n),r},t}(oW),UY=function(){function e(){}return Object.defineProperty(e,"debug",{set:function(e){if(this._debug=e,e&&null==document.getElementById("violationServiceDebug")){var t=document.createElement("div");t.id="violationServiceDebug",t.style.position="fixed",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.border="solid 1px black",t.style.width="800px",t.style.height="100px",t.style.top="calc(100% - 200px)",t.style.left="0",t.style.overflow="auto",t.style.zIndex="100",t.style.display="flex",t.style.flexDirection="column",t.style.fontSize="14px",t.style.fontWeight="500",document.documentElement.appendChild(t),this._debugTimeStart=Date.now()}},enumerable:!0,configurable:!0}),e.debugLog=function(t,n){if(void 0===n&&(n=RY.Log),this._debug){var r='<span style="color: rgb(255, 0, 255)">'+(Date.now()-this._debugTimeStart)+":</span> "+t,i=document.createElement("span");i.innerHTML=r,i.style.color=e._getMessageColor(n);var o=document.getElementById("violationServiceDebug");o.appendChild(i),o.scrollTop=o.scrollHeight}},e.extendNativeLog=function(t){var n=console[t];console[t]=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=r.join(" ");n(o),e.debugLog(o,t)}},e._getMessageColor=function(e){return e===RY.Error?"#dc3545":e===RY.Warning?"#ffc107":e===RY.Trace?"#17a2b8":"black"},e._debug=!1,e}();window.___$setDaLoggerEnabled=function(e,t){void 0===t&&(t=null),UY.debug=e,e&&(null==t?void 0:t.length)>0&&t.forEach(function(e){UY.extendNativeLog(e)})},function(e){e.Trace="trace",e.Log="log",e.Warning="warn",e.Error="error"}(RY||(RY={}));var WY,XY=function(){return(XY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},GY=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},qY=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},$Y=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},YY=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},KY=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(YY(arguments[t]));return e},QY=function(){function e(e){var t,n=this;this._violationWarningButtonCssClass="da-violation-icon",this._goodViolationIconCssClass="da-violation-icon-good",this._warningViolationIconCssClass="da-violation-icon-warning",this._violationBadIconCssClass="da-violation-icon-bad",this._qualityChangeContainerCssClass="da-quality-change-container",this._violationContainerCssClass="da-violation-container",this._qualityChangeScaleBarCssClass="da-quality-change-scale-bar",this._qualityBadToWarningChangeScaleBarCssClass="da-bad-to-warning",this._qualityWarningToGoodChangeScaleBarCssClass="da-warning-to-good",this._qualityBadToGoodChangeScaleBarCssClass="da-bad-to-good",this._qualityNoAnimationChangeScaleBarCssClass="da-no-animation",this._qualityChangeInfoBarCssClass="da-quality-change-info-bar",this._initialized=!1,this._zoomChangedEvent=new PL,this._workspaceSizeChangedEvent=new PL,this._beforeReplaceItemHandlerEvent=new EL,this._afterReplaceItemHandlerEvent=new EL,this._onSelectionLockedEvent=new EL,this.canvasItemHoverEnabled=!1,this._simpleMode=!0,this.handlerFactory=new F$(this),this._throttleRedraw=FL.throttle(this._redraw,250),this._onBeforeReplaceItemHandler=function(e){n._beforeReplaceItemHandlerEvent.fire(e)},this._onAfterReplaceItemHandler=function(e){n._afterReplaceItemHandlerEvent.fire(e)},this._onItemRemoved=function(e){var t=e.item;if(t instanceof vH){var r=n.handlerFactory.get(t);n.isItemHandlerSelected(r)&&n.removeSelectedItemHandler(r),r.canvas=null,n.handlerFactory.delete(r)}},this._onContainersChanged=function(e){var t,r,i,o,s,a,l,c;try{for(var u=$Y(e.removed),h=u.next();!h.done;h=u.next()){var d=h.value;try{for(var p=(i=void 0,$Y(d.items)),f=p.next();!f.done;f=p.next())n._onItemRemoved({item:f.value})}catch(v){i={error:v}}finally{try{f&&!f.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}}catch(b){t={error:b}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}n._updateLayers();try{for(var m=$Y(e.added),g=m.next();!g.done;g=m.next())g.value.items.add_itemRemoved(n._onItemRemoved)}catch(w){s={error:w}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}try{for(var y=$Y(e.removed),_=y.next();!_.done;_=y.next())(d=_.value).items.remove_itemRemoved(n._onItemRemoved)}catch(C){l={error:C}}finally{try{_&&!_.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}n.redraw()},this._updateLayers=function(){n.layers.clear(),n.layers.addRange(n._viewer.containersFlatList.map(function(e){return new gY(e,n)})),n.disabledLayers=n.disabledLayers.map(function(e){return n.layers.toArray().find(function(t){return t.container.id===e.container.id})}).filter(function(e){return void 0!==e}),n.maskedLayers=n.maskedLayers.map(function(e){return n.layers.toArray().find(function(t){return t.container.id===e.container.id})}).filter(function(e){return void 0!==e}),n._layersUpdatedEvent.notify(n,{})},this._onServiceImageContainerLoaded=function(e){n.redraw()},this._fontRegistryUpdated=null,this._isRedrawPaused=!1,this._viewer=e,this._prevWorkspaceSize={width:0,height:0},this._snapLinesHandler=new EY,this._selection=new w$(this,this._snapLinesHandler),this._dndHandler=new dY(this,this.viewer),this._hoverHandler=new yY(this),this._rotateHandler=new pY(this,this.viewer),this._canvasRenderer=new CY(this._selection,this._dndHandler,this,null===(t=e.configuration)||void 0===t?void 0:t.handlers),this._canvasElementHandler=new bY(this.viewer,this._selection,this._dndHandler,this._rotateHandler),this._mouseBehaviorManager=new LY(this._selection,this._viewer,this,this._hoverHandler,this._rotateHandler,this._dndHandler,this._canvasElementHandler),this.layers=new uY(this),this._disabledLayers=[],this._maskedLayers=[],this._workspaceWidth=72,this._workspaceHeight=72,this._zoom=1,this._targetDpi=null,this._hiddenFieldID="",this._parent=null,this._document=document,this._mouseMoveTimeout=100,this._disableSmoothing=!1,this._rotationGripSize=24,this._resizeGripSize=11,this._resizeGripColor="rgba(255,255,255,1)",this._rotationGripColor="rgba(0,0,255,0.2)",this._resizeGripLineColor="rgba(255,0,0,1)",this._rotationGripLineColor="rgba(112,112,112,1)",this._rotationGripLineLength=12,this._floatingItemToolbarEnabled=!1,this._violationWarningButtonsEnabled=!1,this._qualityChangeContainersEnabled=!0,this._floatingItemToolbarCssClass=null,this._placeholderButtonGroupCssClass=null,this._selectImageButtonCssClass=null,this._selectBarcodeButtonCssClass=null,this._doneButtonCssClass=null,this._handleButtonCssClass=null,this._deleteToolbarButtonCssClass=null,this._editToolbarButtonCssClass=null,this._selectToolbarButtonCssClass=null,this._bigButtonGroupCssClass=null,this._selectButtonTitle="Select image",this._editBarcodeButtonTitle="Edit barcode",this._doneButtonTitle="Done",this._handleButtonTitle="Handle",this._deleteButtonTitle="Delete item",this._editButtonTitle="Edit item",this._backgroundImage=null,this._loadingImageUrl=null,this._marginColor="rgba(100,255,100,1)",this._marginWidth=0,this._leftMargin=18,this._rightMargin=18,this._topMargin=18,this._bottomMargin=18,this._maxFontSize=null,this._minFontSize=null,this._maxLeading=null,this._minLeading=null,this._constrainedMarginEnabled=!1,this._keyEventEnabled=!0,this._selectionColor="rgba(0,0,255,0.7)",this._selectionWidth=2,this._handlerUrl=null,this._suppressOutOfRegionManipulation=!0,this._initialization=!1,this._callback=null,this._status=l$.ready,this._callbackContext=0,this._callbackCount=0,this._rgbColorProfileFileId=null,this._cmykColorProfileFileId=null,this._grayscaleColorProfileFileId=null,this._returnValue=null,this._tags={},this._ready=!1,this._serviceEndpoint=null,this._service=null,this._sendingRequestEvent=new PL,this._requestCompleteEvent=new PL,this._statusChangedEvent=new PL,this._callbackExceptionEvent=new PL,this._initializedEvent=new PL,this._invokingCallbackRequestEvent=new PL,this._currentItemHandlerChangedEvent=new EL,this._selectedItemHandlersChangedEvent=new PL,this._dragNDropDoneEvent=new PL,this._dragNDropStartingEvent=new PL,this._dragNDropPerformedEvent=new PL,this._readyEvent=new PL,this._layersUpdatedEvent=new PL,this._floatingItemToolbarEnabled=!1,this._autoPlaceholderEditModeEnabled=!1,this.handlerFactory.beforeReplaceItemHandlerEvent.add(this._onBeforeReplaceItemHandler),this.handlerFactory.afterReplaceItemHandlerEvent.add(this._onAfterReplaceItemHandler),this._initContainersObservation()}return Object.defineProperty(e.prototype,"snapLinesHandler",{get:function(){return this._snapLinesHandler},enumerable:!0,configurable:!0}),e.prototype._initContainersObservation=function(){var e,t;this._updateLayers();try{for(var n=$Y(this._viewer.containersFlatList),r=n.next();!r.done;r=n.next())r.value.items.add_itemRemoved(this._onItemRemoved)}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._viewer.containersFlatListChangedEvent.add(this._onContainersChanged)},e.prototype.setHistory=function(e){this._history=e,this._selection.history=e},Object.defineProperty(e.prototype,"conf",{set:function(e){this._canvasRenderer.conf=null==e?void 0:e.handlers,this.snapLinesHandler.setConfiguration(null==e?void 0:e.snapLines)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseBehaviorManager",{get:function(){return this._mouseBehaviorManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"history",{get:function(){return this._history},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dndHandler",{get:function(){return this._dndHandler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenFieldID",{get:function(){return this._hiddenFieldID},set:function(e){this._hiddenFieldID=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rgbColorProfileFileId",{get:function(){return this._rgbColorProfileFileId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cmykColorProfileFileId",{get:function(){return this._cmykColorProfileFileId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grayscaleColorProfileFileId",{get:function(){return this._grayscaleColorProfileFileId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serviceEndpoint",{get:function(){return this._serviceEndpoint},set:function(e){this._serviceEndpoint=e,this.service=e?new aY(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"service",{get:function(){return this._service},set:function(e){null!=this._service&&this._service.imageLoaderService.removeImageContainerLoaded(this._onServiceImageContainerLoaded),this._service=e,null!=this._service&&this._service.imageLoaderService.addImageContainerLoaded(this._onServiceImageContainerLoaded)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewer",{get:function(){return this._viewer},enumerable:!0,configurable:!0}),e.prototype.setTextWhizzModule=function(e,t){var n,r;this._textWhizz=e,this._setFontRegistry(new NY(this._textWhizz,t)),this.textEditor instanceof d$&&this.textEditor.setTextWhizz(this._textWhizz);var i=this._canvasElementHandler.staticTextCanvas,o=this._canvasElementHandler.activeTextCanvas,s=!BL.IsFirefox()&&this._textWhizz.isHardwareAccelerationAvailable("#"+i.id);s||(i=this._canvasElementHandler.replaceStaticTextCanvas(),console.warn("WebGL text rendering is not supported")),this._textRenderer=s?new HY(i,o,e,this.zoom,this.offset):new VY(i,o,e,this.zoom,this.offset);var a=this.getAllItemHandlers({flatGroupItems:!0});try{for(var l=$Y(a),c=l.next();!c.done;c=l.next())c.value.onTextWhizzInit()}catch(u){n={error:u}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}},Object.defineProperty(e.prototype,"textWhizz",{get:function(){return this._textWhizz},enumerable:!0,configurable:!0}),e.prototype._setFontRegistry=function(e){this._fontRegistry=e,null!=this._fontRegistryUpdated&&this._fontRegistryUpdated.resolve()},Object.defineProperty(e.prototype,"fontRegistry",{get:function(){return this._fontRegistry},enumerable:!0,configurable:!0}),e.prototype.waitFontRegistryInitialized=function(){return null!=this._fontRegistry?Promise.resolve():(null==this._fontRegistryUpdated&&(this._fontRegistryUpdated=new DU),this._fontRegistryUpdated.promise)},Object.defineProperty(e.prototype,"textEditor",{get:function(){return this._textEditor},set:function(e){this._textEditor=e,this._textEditor instanceof d$&&this._textWhizz&&this._textEditor.setTextWhizz(this._textWhizz)},enumerable:!0,configurable:!0}),e.prototype.initTextEditor=function(e,t,n,r){var i;this.textEditor=e==pL.None?null:e==pL.Html||BL.IsTouchDevice()?new TX(this._canvasElementHandler):new d$(this,this._canvasElementHandler),null===(i=this._textEditor)||void 0===i||i.init(t,n,r)},Object.defineProperty(e.prototype,"textRenderer",{get:function(){return this._textRenderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"simpleMode",{get:function(){return this._simpleMode},set:function(e){this._simpleMode=e,this.clearSelectedItemHandlers(),this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(e){null!=e&&e.equals(this._offset)||null==e&&null!=this.offset||(this._offset=e,this._canvasRenderer.offset=e,this._canvasElementHandler.offset=e,null!=this._textRenderer&&(this._textRenderer.offset=e),this.redraw())},enumerable:!0,configurable:!0}),e.prototype.alignItemHandler=function(e,t){if(e&&!this.isLockedOrDisabled(e)&&!this._simpleMode){var n=e instanceof YW&&!("verticalCenter"===t||"horizontalCenter"===t),r=n?e.getBoundsIncludingFrames():e.bounds,i=e.rectangle,o=e.rectangle,s=e.layer.region,a=e.getPermissions();s?"left"===t?o.centerX=a.allowMoveHorizontal?s.left+r.width/2:o.centerX:"horizontalCenter"===t?o.centerX=a.allowMoveHorizontal?s.left+s.width/2:o.centerX:"right"===t?o.centerX=a.allowMoveHorizontal?s.left+s.width-r.width/2:o.centerX:"top"===t?o.centerY=a.allowMoveVertical?s.top+r.height/2:o.centerY:"verticalCenter"===t?o.centerY=a.allowMoveVertical?s.top+s.height/2:o.centerY:"bottom"===t&&(o.centerY=a.allowMoveVertical?s.top+s.height-r.height/2:o.centerY):"left"===t?o.centerX=a.allowMoveHorizontal?this.leftMargin+r.width/2:o.centerX:"horizontalCenter"===t?o.centerX=a.allowMoveHorizontal?this.leftMargin+(this.workspaceWidth-this.rightMargin-this.leftMargin)/2:o.centerX:"right"===t?o.centerX=a.allowMoveHorizontal?this.workspaceWidth-this.rightMargin-r.width/2:o.centerX:"top"===t?o.centerY=a.allowMoveVertical?this.topMargin+r.height/2:o.centerY:"verticalCenter"===t?o.centerY=a.allowMoveVertical?this.topMargin+(this.workspaceHeight-this.bottomMargin-this.topMargin)/2:o.centerY:"bottom"===t&&(o.centerY=a.allowMoveVertical?this.workspaceHeight-this.bottomMargin-r.height/2:o.centerY),n&&!this.isLockedOrDisabled(e)&&("bottom"!==t&&"top"!==t||!e.getPermissions().allowMoveVertical||(o.centerY-=r.top+r.height/2-i.centerY),"left"!==t&&"right"!==t||!e.getPermissions().allowMoveHorizontal||(o.centerX-=r.left+r.width/2-i.centerX)),e instanceof YW?(e.setRectangle(o,null,!0),e.updateContentAndFrames(function(e){var t=e.rectangle;t.centerX+=o.centerX-i.centerX,t.centerY+=o.centerY-i.centerY,e.setRectangle(t)})):e instanceof D$?e.setRectangle(o,null,!0):e.setRectangle(o),this._selection.update(),this.redraw()}},e.prototype.alignItemHandlers=function(e){if(!this._simpleMode){var t=this.getSelectedItemHandlers();if(t.length>1){for(var n=this._selection.visibleRectangle,r=0;r<t.length;r++){var i=t.getItem(r);if(!this.isLockedOrDisabled(i)){var o=i.rectangle,s=i.rectangle,a=s.bounds;"left"===e?s.centerX=i.getPermissions().allowMoveHorizontal?n.location.x+a.width/2:s.centerX:"horizontalCenter"===e?s.centerX=i.getPermissions().allowMoveHorizontal?n.centerX:s.centerX:"right"===e?s.centerX=i.getPermissions().allowMoveHorizontal?n.getBottomRightCorner().x-a.width/2:s.centerX:"top"===e?s.centerY=i.getPermissions().allowMoveVertical?n.location.y+a.height/2:s.centerY:"verticalCenter"===e?s.centerY=i.getPermissions().allowMoveVertical?n.centerY:s.centerY:"bottom"===e&&(s.centerY=i.getPermissions().allowMoveVertical?n.getBottomRightCorner().y-a.height/2:s.centerY),i.setRectangle(s),i instanceof YW&&i.updateContentAndFrames(function(e){var t=e.rectangle;t.centerX+=s.centerX-o.centerX,t.centerY+=s.centerY-o.centerY,e.setRectangle(t)}),this._selection.update(),this.redraw()}}this.updateTexts()}}},Object.defineProperty(e.prototype,"handlerUrl",{get:function(){return this._handlerUrl},set:function(e){this._handlerUrl=e},enumerable:!0,configurable:!0}),e.prototype._deleteSelectedItemHandlersWithoutConfirm=function(){for(var e=!1,t=this.getSelectedItemHandlers().toArray(),n=0;n<t.length;n++){var r=t[n];this._canDeleteItemHandler(r)&&(r.item.parentContainer.items.remove(r.item),e=!0)}e&&(this.updateTexts(),this.updateSelection(),this.redraw())},e.prototype._canDeleteItemHandler=function(e){return!this.simpleMode&&null!=e&&null!=e.layer&&!this.isLockedOrDisabled(e)&&!e.layer.locked&&e.visible&&e.layer.getVisible()&&e.getPermissions()&&e.getPermissions().allowDelete},e.prototype.deleteSelectedItemHandlers=function(e){void 0===e&&(e=!1);for(var t=!0,n=this.getSelectedItemHandlers(),r=0;r<n.length;r++){var i=n.getItem(r);if(!this._canDeleteItemHandler(i)){t=!1;break}}t&&this.viewer.commandManager.execute(GG.deleteItems,{items:n.toArray().map(function(e){return e.item}),force:e})},Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this._tags},set:function(e){this._tags=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._workspaceWidth*this._zoom*BL.screenDpi/72},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._workspaceHeight*this._zoom*BL.screenDpi/72},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyEventEnabled",{get:function(){return this._keyEventEnabled},set:function(e){this._keyEventEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginColor",{get:function(){return this._marginColor},set:function(e){this._marginColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginWidth",{get:function(){return this._marginWidth},set:function(e){this._marginWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionColor",{get:function(){return this._selectionColor},set:function(e){this._selectionColor=e,this._updateGripsAndHoverDiv()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionWidth",{get:function(){return this._selectionWidth},set:function(e){this._selectionWidth=e,this._updateGripsAndHoverDiv()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"margin",{get:function(){return Math.min(this._leftMargin,this._topMargin,this._rightMargin,this._bottomMargin)},set:function(e){this._leftMargin=e,this._rightMargin=e,this._topMargin=e,this._bottomMargin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftMargin",{get:function(){return this._leftMargin},set:function(e){this._leftMargin!==e&&(this._leftMargin=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightMargin",{get:function(){return this._rightMargin},set:function(e){this._rightMargin!==e&&(this._rightMargin=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topMargin",{get:function(){return this._topMargin},set:function(e){this._topMargin!==e&&(this._topMargin=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomMargin",{get:function(){return this._bottomMargin},set:function(e){this._bottomMargin!==e&&(this._bottomMargin=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"constrainedMarginEnabled",{get:function(){return this._constrainedMarginEnabled},set:function(e){this._constrainedMarginEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetDpi",{get:function(){return this._targetDpi},set:function(e){this._targetDpi=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suppressOutOfRegionManipulation",{get:function(){return this._suppressOutOfRegionManipulation},set:function(e){this._suppressOutOfRegionManipulation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floatingItemToolbarEnabled",{get:function(){return this._floatingItemToolbarEnabled},set:function(e){this._floatingItemToolbarEnabled=e,e?this._addFloatingItemToolbars():this._removeFloatingItemToolbars()},enumerable:!0,configurable:!0}),e.prototype.setViolationContainersEnabled=function(e,t){this._violationWarningButtonsEnabled=e,this._qualityChangeContainersEnabled=t,this._removeViolationContainers(),(e||t)&&this._addViolationContainers()},Object.defineProperty(e.prototype,"violationWarningButtonsEnabled",{get:function(){return this._violationWarningButtonsEnabled},set:function(e){this._violationWarningButtonsEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityChangeContainersEnabled",{get:function(){return this._qualityChangeContainersEnabled},set:function(e){this._qualityChangeContainersEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxFontSize",{get:function(){return this._maxFontSize},set:function(e){this._maxFontSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minFontSize",{get:function(){return this._minFontSize},set:function(e){this._minFontSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLeading",{get:function(){return this._maxLeading},set:function(e){this._maxLeading=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minLeading",{get:function(){return this._minLeading},set:function(e){this._minLeading=e},enumerable:!0,configurable:!0}),e.prototype.getCallService=function(e,t,n,r,i){void 0===i&&(i=null);var o=this,s=rU.makeCancelable(new Promise(function(n,r){var s,a=[o.getData(!0,i)];null!=t&&(a=a.concat(t)),a=a.concat(n,function(e,t,n){r({error:e,userContext:t,methodName:n})}),(s=o.service)[e].apply(s,KY(a))}));return s.promise.then(function(e){"function"==typeof n&&n(e)}).catch(function(e){e instanceof IL?console.error("Exception of type "+e.name+": "+e.message):e.isCanceled||"function"==typeof r&&r(e.error)}),s},e.prototype.updateColors=function(e){var t,n,r,i,o,s=this;void 0===e&&(e=null);var a=null!=e?new Array(e):this.getAllItemHandlers({onlyVisible:!0}),l=new Array;try{for(var c=$Y(a),u=c.next();!u.done;u=c.next()){var h=u.value;h.validateActiveColorWebServiceCall();var d=h.getColorData();d.isEmpty()||l.push(d)}}catch(y){t={error:y}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(0===l.length)return Promise.resolve();var p=this.getCallService("UpdateByColorData",JSON.stringify(l),function(e){var t,n,r=JSON.parse(e),i=function(e){var t=a.find(function(t){return t.item.id===e.id});null!=t&&(t.setColorData(e),t.onSuccessResponse(lU.Color))};try{for(var o=$Y(r),l=o.next();!l.done;l=o.next())i(l.value)}catch(c){t={error:c}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}s.redraw()},function(e){var t,n;console.log(e);try{for(var r=$Y(a),i=r.next();!i.done;i=r.next())i.value.onErrorResponse(e)}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}),f=function(t){null===(o=a.find(function(e){return e.item.id===t.id}))||void 0===o||o.updateActiveColorWebServiceCall(p,null==e)};try{for(var m=$Y(l),g=m.next();!g.done;g=m.next())f(g.value)}catch(_){r={error:_}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return p.promise},e.prototype.waitUpdate=function(e){void 0===e&&(e=null);var t=null!=e?e:this.getAllItemHandlers();return Promise.all(t.map(function(e){return e.waitUpdate()}))},Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"surfaceCanvas",{get:function(){return this._canvasElementHandler.surfaceCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multipleSelectionEnabled",{get:function(){return this._selection.multipleSelectionEnabled},set:function(e){this._selection.multipleSelectionEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseMoveTimeout",{get:function(){return this._mouseMoveTimeout},set:function(e){this._mouseMoveTimeout=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disableSmoothing",{get:function(){return this._disableSmoothing},set:function(e){this._disableSmoothing=e},enumerable:!0,configurable:!0}),e.prototype.getAllItemHandlers=function(e){e=function(e){return null==e&&(e={}),FL.defaults(e,{excludeGroupItems:!1,flatGroupItems:!1,onlyVisible:!1,onlyUnlocked:!1,whiteListFilter:function(e){return!1}})}(e);var t=this;return this.layers.toArray().map(function(e){return e.itemHandlers.toArray()}).reduce(function(e,t){return e.concat(t)},[]).reduce(function(t,n){return t.push(n),e.flatGroupItems&&n instanceof eX&&t.push.apply(t,KY(n.getNestedItemHandlers())),t},[]).filter(function(n){if(e.whiteListFilter(n))return!0;var r=!0;return e.excludeGroupItems&&(r=r&&!(n instanceof eX)),e.onlyVisible&&r&&(r=(r=(r=r&&null!=n.layer&&n.layer.getVisible())&&n.visible)&&!n.getPermissions().noShow),e.onlyUnlocked&&r&&(r=!n.layer.locked&&!t.isLockedOrDisabled(n)),e.onlyType&&r&&(Array.isArray(e.onlyType)||(e.onlyType=[e.onlyType]),r=!1,e.onlyType.some(function(e){if(n instanceof e)return r=!0,!0})),r})},Object.defineProperty(e.prototype,"previewMode",{get:function(){var e,t;return null!==(t=null===(e=this._canvasRenderer)||void 0===e?void 0:e.previewMode)&&void 0!==t&&t},set:function(e){if(null==this._canvasRenderer)throw new IL("CanvasRendere is not initialized!");this._canvasRenderer.previewMode=e,this.redraw()},enumerable:!0,configurable:!0}),e.prototype.flatGroupItemsInLayer=function(e){var t=e.itemHandlers.toArray();return new Ij(t.reduce(function(e,t){return e.concat(t instanceof eX?KY([t],t.getNestedItemHandlers(!0)):t)},[]))},e.prototype.updateTexts=function(e){void 0===e&&(e=null);for(var t=function(e){return e instanceof xW||e instanceof VW||e instanceof S$},n=t(e)?e.uniqueId:null,r=this.layers,i=0,o=r.length;i<o;i++){var s=r.getItem(i);if(s.getVisible())for(var a=this.flatGroupItemsInLayer(s),l=0,c=a.length;l<c;l++){var u=a.getItem(l);u.uniqueId!==n&&t(u)&&u.visible&&!u.getPermissions().noShow&&this._updateWrappingRectangles(u)}}},Object.defineProperty(e.prototype,"backgroundImage",{set:function(e){this._backgroundImage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSquaredBackground",{get:function(){return this._isSquaredBackground},set:function(e){if(this._isSquaredBackground=e,this.isInitialized){var t="url("+this._backgroundImage+") repeat";this._isSquaredBackground||(t="transparent"),this.surfaceCanvas.style.background=t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadingImageUrl",{get:function(){return this._loadingImageUrl},set:function(e){"string"==typeof e&&this._loadingImageUrl!==e&&(this._loadingImageUrl=e,this._canvasRenderer.setLoadingImageUrl(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"workspaceWidth",{get:function(){return this._workspaceWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"workspaceHeight",{get:function(){return this._workspaceHeight},enumerable:!0,configurable:!0}),e.prototype.setWorkspaceSize=function(e,t,n){WN(this._workspaceWidth,e)&&WN(this._workspaceHeight,t)||(this._workspaceWidth=e,this._workspaceHeight=t,this._workspaceSizeChangedEvent.notify(this,n))},e.prototype.begin_initialization=function(){this._initialization=!0,this._prevWorkspaceSize={width:this._workspaceWidth,height:this._workspaceHeight},this.service.beginMultiCall()},e.prototype.end_initialization=function(e){void 0===e&&(e=!1),this._initialization=!1,(e||this._workspaceWidth!==this._prevWorkspaceSize.width||this._workspaceHeight!==this._prevWorkspaceSize.height)&&this._workspaceSizeChangedEvent.notify(this,{}),this.service.endMultiCall()},Object.defineProperty(e.prototype,"initialization",{get:function(){return this._initialization},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationGripColor",{get:function(){return this._rotationGripColor},set:function(e){this._rotationGripColor=e,this._updateGripsAndHoverDiv()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizeGripColor",{get:function(){return this._resizeGripColor},set:function(e){this._resizeGripColor=e,this._updateGripsAndHoverDiv()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationGripSize",{get:function(){return this._rotationGripSize},set:function(e){this._rotationGripSize=e,this._updateGripsAndHoverDiv()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizeGripSize",{get:function(){return this._resizeGripSize},set:function(e){this._resizeGripSize=e,this._updateGripsAndHoverDiv()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizeGripLineColor",{get:function(){return this._resizeGripLineColor},set:function(e){this._resizeGripLineColor=e,this._updateGripsAndHoverDiv()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationGripLineColor",{get:function(){return this._rotationGripLineColor},set:function(e){this._rotationGripLineColor=e,this._updateGripsAndHoverDiv()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationGripLineLength",{get:function(){return this._rotationGripLineLength},set:function(e){this._rotationGripLineLength=e,this._updateGripsAndHoverDiv()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholderButtonGroupCssClass",{get:function(){return this._placeholderButtonGroupCssClass},set:function(e){this._placeholderButtonGroupCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floatingItemToolbarCssClass",{get:function(){return this._floatingItemToolbarCssClass},set:function(e){this._floatingItemToolbarCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"violationContainerCssClass",{get:function(){return this._violationContainerCssClass},set:function(e){this._violationContainerCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectImageButtonCssClass",{get:function(){return this._selectImageButtonCssClass},set:function(e){this._selectImageButtonCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectBarcodeButtonCssClass",{get:function(){return this._selectBarcodeButtonCssClass},set:function(e){this._selectBarcodeButtonCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleButtonCssClass",{get:function(){return this._handleButtonCssClass},set:function(e){this._handleButtonCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doneButtonCssClass",{get:function(){return this._doneButtonCssClass},set:function(e){this._doneButtonCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"violationWarningButtonCssClass",{get:function(){return this._violationWarningButtonCssClass},set:function(e){this._violationWarningButtonCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityChangeContainerCssClass",{get:function(){return this._qualityChangeContainerCssClass},set:function(e){this._qualityChangeContainerCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityChangeScaleBarCssClass",{get:function(){return this._qualityChangeScaleBarCssClass},set:function(e){this._qualityChangeScaleBarCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityBadToWarningChangeScaleBarCssClass",{get:function(){return this._qualityBadToWarningChangeScaleBarCssClass},set:function(e){this._qualityBadToWarningChangeScaleBarCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityWarningToGoodChangeScaleBarCssClass",{get:function(){return this._qualityWarningToGoodChangeScaleBarCssClass},set:function(e){this._qualityWarningToGoodChangeScaleBarCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityBadToGoodChangeScaleBarCssClass",{get:function(){return this._qualityBadToGoodChangeScaleBarCssClass},set:function(e){this._qualityBadToGoodChangeScaleBarCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityNoAnimationChangeScaleBarCssClass",{get:function(){return this._qualityNoAnimationChangeScaleBarCssClass},set:function(e){this._qualityNoAnimationChangeScaleBarCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityChangeInfoBarCssClass",{get:function(){return this._qualityChangeInfoBarCssClass},set:function(e){this._qualityChangeInfoBarCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deleteToolbarButtonCssClass",{get:function(){return this._deleteToolbarButtonCssClass},set:function(e){this._deleteToolbarButtonCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editToolbarButtonCssClass",{get:function(){return this._editToolbarButtonCssClass},set:function(e){this._editToolbarButtonCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectToolbarButtonCssClass",{get:function(){return this._selectToolbarButtonCssClass},set:function(e){this._selectToolbarButtonCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bigButtonGroupCssClass",{get:function(){return this._bigButtonGroupCssClass},set:function(e){this._bigButtonGroupCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"goodViolationIconCssClass",{get:function(){return this._goodViolationIconCssClass},set:function(e){this._goodViolationIconCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"warningViolationIconCssClass",{get:function(){return this._warningViolationIconCssClass},set:function(e){this._warningViolationIconCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"badViolationIconCssClass",{get:function(){return this._violationBadIconCssClass},set:function(e){this._violationBadIconCssClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectButtonTitle",{get:function(){return this._selectButtonTitle},set:function(e){this.setSelectButtonTitle(e)},enumerable:!0,configurable:!0}),e.prototype.setSelectButtonTitle=function(e,t){return void 0===t&&(t=!1),this.selectButtonTitle!==(e=null!=e?e:"")&&(this._selectButtonTitle=e,t||this.updatePlaceholderButtonGroups(),!0)},Object.defineProperty(e.prototype,"editBarcodeButtonTitle",{get:function(){return this._editBarcodeButtonTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EditBarcodeButtonTitle",{set:function(e){this.setEditBarcodeButtonTitle(e)},enumerable:!0,configurable:!0}),e.prototype.setEditBarcodeButtonTitle=function(e,t){return void 0===t&&(t=!1),this.editBarcodeButtonTitle!==(e=null!=e?e:"")&&(this._editBarcodeButtonTitle=e,t||this.updatePlaceholderButtonGroups(),!0)},Object.defineProperty(e.prototype,"replaceGroupContentButtonTitle",{get:function(){return this._replaceGroupContentButtonTitle},set:function(e){this.setReplaceGroupContentButtonTitle(e)},enumerable:!0,configurable:!0}),e.prototype.setReplaceGroupContentButtonTitle=function(e,t){return void 0===t&&(t=!1),this.replaceGroupContentButtonTitle!==(e=null!=e?e:"")&&(this._replaceGroupContentButtonTitle=e,t||this.updatePlaceholderButtonGroups(),!0)},Object.defineProperty(e.prototype,"handleButtonTitle",{get:function(){return this._handleButtonTitle},set:function(e){this.setHandleButtonTitle(e)},enumerable:!0,configurable:!0}),e.prototype.setHandleButtonTitle=function(e,t){return void 0===t&&(t=!1),this.handleButtonTitle!==(e=null!=e?e:"")&&(this._handleButtonTitle=e,t||this.updatePlaceholderButtonGroups(),!0)},Object.defineProperty(e.prototype,"doneButtonTitle",{get:function(){return this._doneButtonTitle},set:function(e){this.setDoneButtonTitle(e)},enumerable:!0,configurable:!0}),e.prototype.setDoneButtonTitle=function(e,t){return void 0===t&&(t=!1),this.doneButtonTitle!==(e=null!=e?e:"")&&(this._doneButtonTitle=e,t||this.updatePlaceholderButtonGroups(),!0)},Object.defineProperty(e.prototype,"deleteButtonTitle",{get:function(){return this._deleteButtonTitle},set:function(e){this.setDeleteButtonTitle(e)},enumerable:!0,configurable:!0}),e.prototype.setDeleteButtonTitle=function(e,t){return void 0===t&&(t=!1),this.deleteButtonTitle!==(e=null!=e?e:"")&&(this._deleteButtonTitle=e,t||this.updatePlaceholderButtonGroups(),!0)},Object.defineProperty(e.prototype,"editButtonTitle",{get:function(){return this._editButtonTitle},set:function(e){this.setEditButtonTitle(e)},enumerable:!0,configurable:!0}),e.prototype.setEditButtonTitle=function(e,t){return void 0===t&&(t=!1),this.editButtonTitle!==(e=null!=e?e:"")&&(this._editButtonTitle=e,t||this.updatePlaceholderButtonGroups(),!0)},e.prototype.setZoom=function(e,t,n){var r;null==n&&(n={}),null==n.force&&(n.force=!1),null==n.updateButtonGroup&&(n.updateButtonGroup=!0),(e!==this._zoom||n.force)&&(this._zoom=e,null===(r=this._textRenderer)||void 0===r||r.setZoom(this._zoom),this._initialization||(this._updateCanvasElementSize(n.updateButtonGroup),t||this._zoomChangedEvent.notify(this,{})))},Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoPlaceholderEditModeEnabled",{get:function(){return this._autoPlaceholderEditModeEnabled},set:function(e){null!=e&&null!=e&&(this._autoPlaceholderEditModeEnabled=e)},enumerable:!0,configurable:!0}),e.prototype.calcPlatformLimitZoom=function(){var e=Wz(this.workspaceWidth,BL.screenDpi),t=Wz(this.workspaceHeight,BL.screenDpi),n=function(n){return Math.sqrt(n/(e*t))},r=function(n,r){return Math.min(n/e,r/t)};if(BL.IsIos()){var i=BL.GetIosVersion();return n("number"==typeof i[0]&&i[0]>=9&&"number"==typeof i[1]&&i[1]>=3?16e6:5e6)}return BL.IsIE()||BL.IsEdge()?r(8192,8192):BL.IsGoogleChrome()?Math.min(r(32767,32767),n(268435456)):BL.IsSafariOrSafariWebView()?Math.min(r(32767,32767)):BL.IsFirefox()?Math.min(r(32767,32767),n(472907776)):2147483647},e.prototype._updateCanvasElementSize=function(e){var t=this.width,n=this.height;this._canvasElementSize||(this._canvasElementSize={});var r=this._canvasElementSize;t===r.width&&n===r.height||(r.width=t,r.height=n,this._canvasElementHandler.updateElementSize(t,n)),(null==e||e)&&this.updateButtonGroups()},e.prototype.updateSelection=function(){if(this.getSelectedItemHandlers().where(function(e){return!e.isVisible()}).toArray().length>0&&this.getSelectedItemHandlers().where(function(e){return e.isVisible()}).toArray(),this._selection.update(),this._floatingItemToolbarEnabled){var e=this.getSelectedItemHandlers().where(function(e){return e.isVisible()}).firstOrDefault();null!=e&&null!=e.floatingItemToolbar&&this.isOnlyThisItemHandlerSelected(e)&&this.updateFloatingItemToolbar(e)}},e.prototype.getSelectedItemHandlers=function(){return this._selection.getSelectedItemHandlers()},e.prototype.setSelectedItemHandlers=function(e){this._selection.setSelectedItemHandlers(e)},e.prototype.isItemHandlerSelected=function(e){return this._selection.isItemHandlerSelected(e)},e.prototype.isOnlyThisItemHandlerSelected=function(e){return this._selection.isOnlyThisItemHandlerSelected(e)},e.prototype.addSelectedItemHandler=function(e){this._selection.addSelectedItemHandler(e)},e.prototype.removeSelectedItemHandler=function(e){this._selection.removeSelectedItemHandler(e)},e.prototype.clearSelectedItemHandlers=function(){this._selection.clearSelectedItemHandlers()},Object.defineProperty(e.prototype,"currentItemHandler",{get:function(){return this._selection.currentItemHandler},enumerable:!0,configurable:!0}),e.prototype._onDragNDropStarting=function(e){this._dragNDropStartingEvent.notify(this,e)},e.prototype._onDragNDropDone=function(){this._dragNDropDoneEvent.notify(this)},e.prototype._onDragNDropPerformed=function(e){this._dragNDropPerformedEvent.notify(this,e),this._currentItemHandlerChangedEvent.notify(this.currentItemHandler)},e.prototype.onCurrentItemHandlerChanged=function(e){this._mouseBehaviorManager.isSelectionMouseBehavior&&null==e&&this._viewer.setCursor(sU.defaultCursor),this._currentItemHandlerChangedEvent.notify(e)},e.prototype.onSelectionLocked=function(){this._onSelectionLockedEvent.notify(this)},e.prototype.enableSelection=function(){this._selection.enable()},e.prototype.disableSelection=function(){this._selection.disable()},e.prototype.isSelectionLocked=function(){return this._selection.isLocked},Object.defineProperty(e.prototype,"layers",{get:function(){return this._layers},set:function(e){this._layers=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabledLayers",{get:function(){return this._disabledLayers},set:function(e){this._disabledLayers=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskedLayers",{get:function(){return this._maskedLayers},set:function(e){this._maskedLayers=e},enumerable:!0,configurable:!0}),e.prototype.getData=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=null);var n=new mY(this,e,t);return JSON.stringify(n)},Object.defineProperty(e.prototype,"returnValue",{get:function(){return this._returnValue},enumerable:!0,configurable:!0}),e.prototype.add_zoomChanged=function(e){this._zoomChangedEvent.add(e)},e.prototype.remove_zoomChanged=function(e){this._zoomChangedEvent.remove(e)},e.prototype.add_statusChanged=function(e){this._statusChangedEvent.add(e)},e.prototype.remove_statusChanged=function(e){this._statusChangedEvent.remove(e)},e.prototype.add_callbackException=function(e){this._callbackExceptionEvent.add(e)},e.prototype.remove_callbackException=function(e){this._callbackExceptionEvent.remove(e)},e.prototype.add_initialized=function(e){this._initializedEvent.add(e)},e.prototype.remove_initialized=function(e){this._initializedEvent.remove(e)},e.prototype.add_invokingCallbackRequest=function(e){this._invokingCallbackRequestEvent.add(e)},e.prototype.remove_invokingCallbackRequest=function(e){this._invokingCallbackRequestEvent.remove(e)},e.prototype.raiseMouseMove=function(e){this._onMouseMove(e)},e.prototype.raiseMouseUp=function(e){this._onMouseUp(e)},e.prototype.raiseMouseDown=function(e){this._onMouseDown(e)},e.prototype.raiseDoubleClick=function(e){this._onDoubleClick(e)},e.prototype.raiseKeyDown=function(e){this._keyEventEnabled&&this._onKeyDown(e)},e.prototype.raisePinch=function(e){this.currentItemHandler.editing&&(e.preventDefault(),e.gesture.preventDefault(),this._selection.processPinch(e),this.redrawDesign(),this.updateSelection())},e.prototype.raiseRelease=function(){var e=this.currentItemHandler;null!=e&&(e.update(),this.updateViolationContainer(e,!0))},e.prototype.raiseKeyUp=function(e){this._keyEventEnabled&&this._onKeyUp(e)},e.prototype.raiseTouchStart=function(e){var t;null===(t=this._mouseBehaviorManager.currentMouseBehaviorHandler)||void 0===t||t.onTouchStart(e)},e.prototype.add_currentItemHandlerChanged=function(e){this._currentItemHandlerChangedEvent.add(e)},e.prototype.remove_currentItemHandlerChanged=function(e){this._currentItemHandlerChangedEvent.remove(e)},e.prototype.add_selectedItemHandlerChanged=function(e){this._selectedItemHandlersChangedEvent.add(e)},e.prototype.remove_selectedItemHandlerChanged=function(e){this._selectedItemHandlersChangedEvent.remove(e)},e.prototype.add_dragNDropDone=function(e){this._dragNDropDoneEvent.add(e)},e.prototype.remove_dragNDropDone=function(e){this._dragNDropDoneEvent.remove(e)},e.prototype.add_dragNDropStarting=function(e){this._dragNDropStartingEvent.add(e)},e.prototype.remove_dragNDropStarting=function(e){this._dragNDropStartingEvent.remove(e)},e.prototype.add_dragNDropPerformed=function(e){this._dragNDropPerformedEvent.add(e)},e.prototype.remove_dragNDropPerformed=function(e){this._dragNDropPerformedEvent.remove(e)},e.prototype.add_ready=function(e){this._readyEvent.add(e)},e.prototype.remove_ready=function(e){this._readyEvent.remove(e)},e.prototype.add_workspaceSizeChanged=function(e){this._workspaceSizeChangedEvent.add(e)},e.prototype.remove_workspaceSizeChanged=function(e){this._workspaceSizeChangedEvent.remove(e)},e.prototype.add_layersUpdated=function(e){this._layersUpdatedEvent.add(e)},e.prototype.remove_layersUpdated=function(e){this._layersUpdatedEvent.remove(e)},e.prototype.add_beforeReplaceItemHandler=function(e){this._beforeReplaceItemHandlerEvent.add(e)},e.prototype.remove_beforeReplaceItemHandler=function(e){this._beforeReplaceItemHandlerEvent.remove(e)},e.prototype.add_afterReplaceItemHandler=function(e){this._afterReplaceItemHandlerEvent.add(e)},e.prototype.remove_afterReplaceItemHandler=function(e){this._afterReplaceItemHandlerEvent.remove(e)},e.prototype.add_onSelectionLocked=function(e){this._onSelectionLockedEvent.add(e)},e.prototype.remove_onSelectionLocked=function(e){this._onSelectionLockedEvent.remove(e)},e.prototype.addElement=function(e){null!=this._viewer&&(this._removeElement(),this._parent=e,this._document=e.ownerDocument,this._document&&this._canvasElementHandler.addElement(this._parent,this._viewer.whitespaceDiv,this.width,this.height))},Object.defineProperty(e.prototype,"parentElement",{get:function(){return this._parent},enumerable:!0,configurable:!0}),e.prototype._removeElement=function(){this._canvasElementHandler.removeElement(),this._document=null},Object.defineProperty(e.prototype,"hoverDiv",{get:function(){return this._canvasElementHandler.hoverDiv},enumerable:!0,configurable:!0}),e.prototype.addStyles=function(){this._canvasElementHandler.addStyles()},e.prototype.updateHoverDiv=function(){this._canvasElementHandler.updateHoverDiv()},e.prototype.updateSelectionDiv=function(){this._canvasElementHandler.updateSelectionDiv()},e.prototype._updateGripsAndHoverDiv=function(){this._canvasElementHandler.updateSelectionDiv(),this._canvasElementHandler.updateParentSelectionDiv(),this._canvasElementHandler.updateHoverDiv()},e.prototype.showDnd=function(e,t){this._canvasElementHandler.showDnd(e,t,this._viewer.contentAngle)},e.prototype.hideDnd=function(){this._canvasElementHandler.hideDnd()},e.prototype.showSpotlight=function(e,t){var n=this,r=[],i=[];e.forEach(function(e){var o=n._viewer.getHandler(e).rectangle;r.push(o),i.push(XY(XY({},t),{id:e.id}))}),this._canvasElementHandler.showSpotlight(r,i,this.viewer)},e.prototype.hideSpotlight=function(e){var t=e.map(function(e){return e.id});this._canvasElementHandler.hideSpotlight(t)},e.prototype.updateSpotlight=function(e,t){var n=this,r=e.map(function(e){return e.id}),i=[],o=[];e.forEach(function(e){var r=n._viewer.getHandler(e).rectangle;i.push(r),o.push(XY(XY({},t),{id:e.id}))}),this._canvasElementHandler.updateSpotlight(r,i,o,this.viewer)},e.prototype.showSelection=function(e,t){this._canvasElementHandler.showSelection(e,t,this._viewer)},e.prototype.showParentSelection=function(e){this._canvasElementHandler.showParentSelection(e,this._viewer)},e.prototype.hideSelection=function(){this._canvasElementHandler.hideSelection()},e.prototype.showHover=function(e,t){this._canvasElementHandler.showHover(e,t,this._viewer)},e.prototype.updateHoverPosition=function(e,t){this._canvasElementHandler.updateHoverPosition(e,this._viewer,t)},e.prototype.hideHover=function(){this._canvasElementHandler.hideHover()},e.prototype.isPlaceholder=function(e){return e instanceof YW},e.prototype._isImage=function(e){return e instanceof NW},e.prototype._isGroup=function(e){return e instanceof eX},e.prototype._isImageOrPlaceholder=function(e){return this._isImage(e)||this.isPlaceholder(e)},e.prototype._addFloatingItemToolbars=function(){if(null!=this._viewer)for(var e=this.getAllItemHandlers(),t=0;t<e.length;t++)this.addFloatingItemToolbar(e[t])},e.prototype._removeFloatingItemToolbars=function(){if(null!=this._viewer)for(var e=this.getAllItemHandlers(),t=0;t<e.length;t++)this._canvasElementHandler.removeFloatingItemToolbar(e[t])},e.prototype._addViolationContainers=function(){if(null!=this._viewer)for(var e=this.getAllItemHandlers(),t=0;t<e.length;t++)this.addViolationContainer(e[t])},e.prototype._removeViolationContainers=function(){var e,t;if(null!=this._viewer){var n=this.getAllItemHandlers();try{for(var r=$Y(n),i=r.next();!i.done;i=r.next()){var o=i.value;this.removeViolationContainer(o);var s=o.getViolationWarningButton();if(null!=s&&s.remove(),o instanceof NW||o instanceof YW){var a=void 0;null!=(a=o.qualityChangeContainer)&&a.remove()}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}}},e.prototype.addPlaceholderButtonGroup=function(e){this._canvasElementHandler.addPlaceholderButtonGroup(e,this._viewer)},e.prototype.addFloatingItemToolbar=function(e){this._canvasElementHandler.addFloatingItemToolbar(e,this._viewer)},e.prototype.addViolationContainer=function(e){this._canvasElementHandler.addViolationContainer(e,this._viewer)},e.prototype.removePlaceholderButtonGroup=function(e){this._canvasElementHandler.removePlaceholderButtonGroup(e)},e.prototype.removeFloatingItemToolbar=function(e){this._canvasElementHandler.removeFloatingItemToolbar(e)},e.prototype.removeViolationContainer=function(e){this._canvasElementHandler.removeViolationContainer(e)},e.prototype.updateButtonGroups=function(e){void 0===e&&(e={onlyVisible:!0,floatingItemToolbar:!0,violationContainers:!0,placeholderButtons:!0}),!0===e.floatingItemToolbar&&this.updateFloatingItemToolbars(e.onlyVisible),!0===e.violationContainers&&this.updateViolationContainers(!0,e.onlyVisible),!0===e.placeholderButtons&&this.updatePlaceholderButtonGroups(e.onlyVisible)},e.prototype.updateFloatingItemToolbars=function(e){if(this._floatingItemToolbarEnabled)for(var t=this.getAllItemHandlers({onlyVisible:e,flatGroupItems:!0}),n=0;n<t.length;n++)this.updateFloatingItemToolbar(t[n])},e.prototype.updateViolationContainers=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this._violationWarningButtonsEnabled||this._qualityChangeContainersEnabled)for(var n=this.getAllItemHandlers({onlyVisible:t,flatGroupItems:!0}),r=0;r<n.length;r++)this.updateViolationContainer(n[r],e)},e.prototype.updatePlaceholderButtonGroups=function(e){void 0===e&&(e=!1);for(var t=this.getAllItemHandlers({onlyType:YW,onlyVisible:e,flatGroupItems:!0,excludeGroupItems:!0}),n=0;n<t.length;n++)this.updatePlaceholderButtonGroup(t[n])},e.prototype.updatePlaceholderButtonGroup=function(e){this._canvasElementHandler.updatePlaceholderButtonGroup(e,this._viewer)},e.prototype.updateViolationContainer=function(e,t){void 0===t&&(t=!1),this._canvasElementHandler.updateViolationContainer(e,t,this._viewer)},e.prototype.updateFloatingItemToolbar=function(e){this._canvasElementHandler.updateFloatingItemToolbar(e,this._viewer)},e.prototype.updatePlaceholderButtonGroupPosition=function(e){this._canvasElementHandler.updatePlaceholderButtonGroupPosition(e,this._viewer)},e.prototype.updateViolationContainerPosition=function(e){this._canvasElementHandler.updateViolationContainerPosition(e,this._viewer)},e.prototype.violationWarningButtonHitTestObject=function(e){if(null==this._viewer||null==this._parent||!this._violationWarningButtonsEnabled)return null;for(var t=this.getAllItemHandlers({onlyVisible:!0}).reduce(function(e,t){return KY(e,t instanceof eX?t.itemHandlers:[t])},[]),n=0;n<t.length;n++){var r=t[n].getViolationWarningButton();if("none"!==getComputedStyle(r).pointerEvents&&null!=r&&this.getButtonGroupRectInGripsDiv(r).contains(e))return t[n]}return null},e.prototype.getButtonGroupRectInGripsDiv=function(e,t){void 0===t&&(t=!1);var n=this._viewer.element.getBoundingClientRect(),r=e.getBoundingClientRect(),i=new FN(r.left-n.left,r.top-n.top,e.offsetWidth,e.offsetHeight),o=this._viewer.controlToWorkspaceRectangle(i),s=new FN(o.left,o.top,o.width,o.height),a=KN.fromRectangleF(s),l=this._viewer.contentAngle;return l>0&&!t&&(a.rotateAt(-l,new MN),90===l?a.translate(0,this.workspaceHeight):180===l?a.translate(this.workspaceWidth,this.workspaceHeight):270===l&&a.translate(this.workspaceWidth,0)),a.bounds},e.prototype.pauseRedraw=function(){this._isRedrawPaused=!0},e.prototype.continueRedraw=function(e){void 0===e&&(e=!1),this._isRedrawPaused=!1,this.redraw(e)},e.prototype.redraw=function(e){void 0===e&&(e=!1),e?this._redraw():this._throttleRedraw()},e.prototype._redraw=function(e){void 0===e&&(e=!0),!this.isInitialized||this.isUpdating||this._initialization||this._isRedrawPaused||(e&&this._canvasElementHandler.calculateRenderStateForItemHandlers(this.layers),this._canvasRenderer.redrawInactiveCanvas(this.layers,this._canvasElementHandler.surfaceCanvas,this._canvasElementHandler.inactiveCanvas),this._canvasRenderer.redrawActiveCanvas(this.layers,this._canvasElementHandler.activeCanvas,this._canvasElementHandler.designCanvas))},e.prototype.redrawDesign=function(){this._isRedrawPaused||this._canvasRenderer.redrawActiveCanvas(this.layers,this._canvasElementHandler.activeCanvas,this._canvasElementHandler.designCanvas)},e.prototype.drawWaitClock=function(e,t){this._canvasRenderer.drawWaitClock(e,t)},e.prototype.drawTextCursor=function(e){var t=this.currentItemHandler;null!=t?this._canvasRenderer.drawTextCursor(this._canvasElementHandler.cursorCanvas,t,e):console.warn("drawTextCursor: itemHandler is undefined")},e.prototype.clearTextCursor=function(){this._canvasRenderer.clearTextCursor(this._canvasElementHandler.cursorCanvas)},e.prototype.workspaceToControl=function(e){var t=e.clone(),n=BL.screenDpi/72*this.zoom;return t.scale(n,n),t.round()},e.prototype.controlToWorkspace=function(e){var t=e.clone(),n=72/(BL.screenDpi*this.zoom);return t.scale(n,n),t},e.prototype._onClick=function(e){if(e.type="click",null!=e.x&&null!=e.y){var t=e instanceof K$?e:new K$(e);this._processMouseEvent(t)}},e.prototype._onKeyDown=function(e){if("keydown"!==e.type)throw new Error("fix this!");this._processKeyEvent(e)},e.prototype._onKeyUp=function(e){if("keyup"!==e.type)throw new Error("fix this!");this._processKeyEvent(e)},e.prototype._isPrimaryPointer=function(e){var t=e.originalEvent;return t instanceof MouseEvent&&(null!=t.button||null!=t.which)?null!=t.button?0===t.button:1===t.which:t instanceof TouchEvent?1===t.touches.length||0===t.touches.length:t instanceof PointerEvent?t.isPrimary:e.which>0&&1===e.which},e.prototype._onMouseMove=function(e){if(e.type="mousemove",null!=e.x&&null!=e.y){var t=e instanceof K$?e:new K$(e);this._processMouseEvent(t)}},e.prototype._onMouseUp=function(e){if(e.type="mouseup",null!=e.x&&null!=e.y&&this._isPrimaryPointer(e)){var t=e instanceof K$?e:new K$(e);this._processMouseEvent(t)}},e.prototype._onMouseDown=function(e){if(e.type="mousedown",null!=e.x&&null!=e.y&&this._isPrimaryPointer(e)){var t=e instanceof K$?e:new K$(e);this._processMouseEvent(t)}},e.prototype._onDoubleClick=function(e){if(e.type="dblclick",null!=e.x&&null!=e.y){var t=e instanceof K$?e:new K$(e);this._processMouseEvent(t)}},e.prototype._processMouseEvent=function(e){this._mouseBehaviorManager.processMouseEvent(e)},e.prototype.isSelectionByHitTest=function(e){return this._selection.visibleRectangle.contains(e)},e.prototype.getItemHandlersByHitTest=function(e){for(var t=this,n=[],r=function(e){return e.visible&&!t.isLockedOrDisabled(e)&&!e.getPermissions().noShow&&!e.isEmpty()},i=this.layers.length-1;i>=0;i--){var o=this.layers.getItem(i);if(o.getVisible()&&!o.locked)for(var s=o.itemHandlers.length-1;s>=0;s--){var a=o.itemHandlers.getItem(s);r(a)&&a.hitTest(e).body&&(n.push(a),a instanceof eX&&a.item.groupItemPermissions.allowSelectNestedItems&&n.push.apply(n,KY(a.getNestedItemHandlers(!1,!0).filter(function(t){return!0===t.hitTest(e).body&&r(t)}))))}}return n},e.prototype._processKeyEvent=function(e){if("keydown"===e.type||"keyup"===e.type){if(null!=this.textEditor){var t=this.currentItemHandler;if(null!=t&&t instanceof b$&&t.editing&&t.processInPlaceEditingKeyEvent(e))return}if("keydown"===e.type&&"Delete"===e.code)this.deleteSelectedItemHandlers(!0);else if("keydown"===e.type&&(e.ctrlKey||e.metaKey))switch(e.code){case"KeyZ":this._history.undo();break;case"KeyY":this._history.redo()}else this._selection.processKeyEvent(e),this.redrawDesign()}},Object.defineProperty(e.prototype,"contentUpdatingPlaceholderItemHandler",{get:function(){var e=this.selectedPlaceholderItemHandler;return null!=e&&e.isContentUpdating()?e:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentEditingPlaceholderItemHandler",{get:function(){var e=this.selectedPlaceholderItemHandler;return null!=e&&e.editing?e:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedPlaceholderItemHandler",{get:function(){var e=this.selectedHandler;return e instanceof YW?e:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedHandler",{get:function(){var e=this.getSelectedItemHandlers();return 1===e.length?e.getItem(0):null},enumerable:!0,configurable:!0}),e.prototype.isShowFloatingItemToolbar=function(e){if(!this.mouseBehaviorManager.isSelectionMouseBehavior)return!1;var t=this.selectedHandler,n=!1,r=!1;return null!=e?(n=this.isOnlyThisItemHandlerSelected(e),r=this._autoPlaceholderEditModeEnabled&&this.isPlaceholder(e)):null!=t&&(n=this.isOnlyThisItemHandlerSelected(t),r=this._autoPlaceholderEditModeEnabled&&this.isPlaceholder(t)),null!=t&&n&&t.isVisible()&&!t.isLocked()&&!r&&this._floatingItemToolbarEnabled&&(t.showDeleteToolbarButton()&&!this.simpleMode||t.showEditToolbarButton()||(this._isImageOrPlaceholder(t)||this._isGroup(t))&&t.showSelectToolbarButton())&&!this._selection.isOperationNotNull()&&null==this.contentEditingPlaceholderItemHandler&&null==this.contentUpdatingPlaceholderItemHandler},e.prototype.isResizing=function(){return this._selection.isResizing()},Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUpdating",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){var e=this;this.begin_initialization(),BL.IsTouchDevice()&&(this.rotationGripSize=24),this._onSelectedItemHandlersChangedDelegate=function(t){e.updateButtonGroups(),e._selection.update(),e._selectedItemHandlersChangedEvent.notify(null),e._canvasElementHandler.calculateRenderStateForItemHandlers(e.layers)&&e._redraw(!1)};var t=this.getSelectedItemHandlers();t.add_itemAdded(this._onSelectedItemHandlersChangedDelegate),t.add_itemRemoved(this._onSelectedItemHandlersChangedDelegate),this._onSelectedItemHandlersDeletingDelegate=this._deleteSelectedItemHandlersWithoutConfirm.bind(this),this._canvasRenderer.setLoadingImageUrl(this._loadingImageUrl),this._document=document,this.redraw(),this._initialized=!0,this._initializedEvent.notify(null),this._checkReady(),this.end_initialization()},e.prototype.checkReady=function(){this._ready=!1,this._checkReady()},e.prototype._checkReady=function(){var e=this;if(!this._ready){for(var t=this.layers,n=[],r=0,i=t.length;r<i;r++)for(var o=t.getItem(r).itemHandlers,s=0,a=o.length;s<a;s++){var l=o.getItem(s);l.ready||n.push(l)}if(0===n.length)this._ready=!0,UY.debugLog("Canvas is ready!"),this._readyEvent.notify(this);else{var c=function(t,r){for(var i=0,o=n.length;i<o;i++)if(n[i]==t){n[i].remove_ready(c),n.splice(i,1);break}0===n.length&&(e._ready=!0,UY.debugLog("Canvas is ready!"),e._readyEvent.notify(e))};for(r=0,i=n.length;r<i;r++)n[r].add_ready(c)}}},e.prototype._updateWrappingRectangles=function(e,t){var n,r;return void 0===t&&(t=!1),GY(this,void 0,void 0,function(){var i,o,s,a,l,c,u,h,d,p,f,m,g,y,_,v,b,w,C,x,E,S,P,T,I;return qY(this,function(O){switch(O.label){case 0:return this.viewer.frontEndTextRenderingEnabled||!(e instanceof xW||e instanceof VW)?[3,2]:[4,this._updateWrappingRectanglesWithoutTextWhizz(e,t)];case 1:return O.sent(),[2];case 2:return!0===this._initialization||null==this.textWhizz?[2]:t&&e instanceof xW?(e.update(),[2]):(i=null!==(r=null===(n=e.layer)||void 0===n?void 0:n.index)&&void 0!==r?r:-1,o=e.index,-1===i||-1===o?[2]:e.isUpdating?[4,e.waitUpdate()]:[3,4]);case 3:O.sent(),O.label=4;case 4:return s=null,e instanceof xW||e instanceof S$?(s=e.getTextRectangle(),[3,9]):[3,5];case 5:return e instanceof VW?e.getControlBounds().equals(FN.FromLTRB(0,0,10,10))?(c=(l=KN).fromRectangleF,[4,e.getBoundingPathsBounds()]):[3,7]:[3,9];case 6:return a=c.apply(l,[O.sent(),e.angle]),[3,8];case 7:a=e.rectangle,O.label=8;case 8:s=a,O.label=9;case 9:for(u=$N.rotatedRectangle(s).toTextWhizzPath(this.textWhizz),h=[],p=i,f=(d=this.layers).length;p>-1&&p<f;p++)if((m=d.getItem(p)).getVisible())for(g=this.flatGroupItemsInLayer(m),y=0,_=g.length;y<_;y++)(v=g.getItem(y)).visible&&!v.getPermissions().noShow&&v.item.textWrappingMode!==Bj.None&&(v.index>o||m.index>i)&&(b=v.getTextWrappingPath(),this.textWhizz.Path.intersect(u,b.toTextWhizzPath(this.textWhizz)).isEmpty()||h.push(b));w=h.length>0?new $N:null;try{for(C=$Y(h),x=C.next();!x.done;x=C.next())w.addPath(x.value)}catch(k){T={error:k}}finally{try{x&&!x.done&&(I=C.return)&&I.call(C)}finally{if(T)throw T.error}}return S=!(E=e.lastRectangle)||!s.equals(E),e.lastRectangle=s,P=null==e.item.wrappingPath||!e.item.wrappingPath.isEqual(w),e.item.wrappingPath=w,!P&&(t||S&&h.length>0)&&e.update(),[2]}})})},e.prototype._updateWrappingRectanglesWithoutTextWhizz=function(e,t){return void 0===t&&(t=!1),GY(this,void 0,void 0,function(){var n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,_,v,b,w,C,x,E,S,P,T,I,O,k;return qY(this,function(R){switch(R.label){case 0:return!0===this._initialization?[2]:t&&e instanceof xW?(e.update(),[2]):(r=e.index,-1===(n=e.layer.index)||-1===r?[2]:e.isUpdating?[4,e.waitUpdate()]:[3,2]);case 1:R.sent(),R.label=2;case 2:return i=null,e instanceof xW?(i=e.getTextRectangle(),[3,7]):[3,3];case 3:return e.getControlBounds().equals(FN.FromLTRB(0,0,10,10))?(a=(s=KN).fromRectangleF,[4,e.getBoundingPathsBounds()]):[3,5];case 4:return o=a.apply(s,[R.sent(),e.angle]),[3,6];case 5:o=e.rectangle,R.label=6;case 6:i=o,R.label=7;case 7:for(l=[],u=n,h=(c=this.layers).length;u>-1&&u<h;u++)if((d=c.getItem(u)).getVisible())for(p=this.flatGroupItemsInLayer(d),f=0,m=p.length;f<m;f++)(g=p.getItem(f)).visible&&!g.getPermissions().noShow&&g.item.textWrappingMode!==Bj.None&&(g.index>r||d.index>n)&&(y=this._getItemHandlerWrappingRectangle(g),i.intersectsWith(y)&&l.push(y));_=l.length>0?new $N:null;try{for(v=$Y(l),b=v.next();!b.done;b=v.next())C=(w=b.value).getUpperLeftCorner(),x=w.getUpperRightCorner(),E=w.getBottomRightCorner(),S=w.getBottomLeftCorner(),_.moveTo(C.x,C.y),_.lineTo(x.x,x.y),_.lineTo(E.x,E.y),_.lineTo(S.x,S.y),_.lineTo(C.x,C.y),_.close()}catch(A){O={error:A}}finally{try{b&&!b.done&&(k=v.return)&&k.call(v)}finally{if(O)throw O.error}}return T=!(P=e.lastRectangle)||!i.equals(P),e.lastRectangle=i,I=null==e.item.wrappingPath||!e.item.wrappingPath.isEqual(_),e.item.wrappingPath=_,!I&&(t||T&&l.length>0)&&e.update(),[2]}})})},e.prototype._getItemHandlerWrappingRectangle=function(e){if(e instanceof xW){var t=KN.fromRectangleF(e.item.textRectangle,0);switch(e.item.transform.isEmpty||t.transform(e.item.transform.clone(),t.center),e.item.textWrappingMode){case Bj.Square:return KN.fromRectangleF(t.bounds);case Bj.Tight:default:return t}}else switch(e.item.textWrappingMode){case Bj.Square:return KN.fromRectangleF(e.bounds);case Bj.Tight:default:return e.rectangle}},e.prototype.dispose=function(){var e=this.getSelectedItemHandlers();null!=this._onSelectedItemHandlersChangedDelegate&&(e.remove_itemAdded(this._onSelectedItemHandlersChangedDelegate),delete this._onSelectedItemHandlersChangedDelegate),null!=this._onSelectedItemHandlersChangedDelegate&&(e.remove_itemRemoved(this._onSelectedItemHandlersChangedDelegate),delete this._onSelectedItemHandlersDeletingDelegate),this.getAllItemHandlers({flatGroupItems:!0}).forEach(function(e){return e.dispose()})},e.prototype.hitTestSelection=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=null);var i=null==this._offset||this._offset.isOrigin()?t.clone():new MN(t.x-this._offset.x,t.y-this._offset.y),o={},s=new DN;0!==e.angle&&s.rotate(-e.angle),s.translate(-e.centerX,-e.centerY),i=s.transformPoint(i,!0);var a=e.width,l=e.height,c=this.mul,u=null!=r?Math.max(r/c,l):l,h=null!=r?Math.max(r/c,a):a;o.body=new FN(-h/2,-u/2,h,u).contains(i),o.resize=!1,o.resizeIndex=0;for(var d=(BL.IsTouchDevice()?33:this.resizeGripSize)/c,p=d/2,f=[null,new FN(-a/2-p,-l/2-p,d,d),new FN(a/2-p,-l/2-p,d,d),new FN(a/2-p,l/2-p,d,d),new FN(-a/2-p,l/2-p,d,d),new FN(-a/2-p,0-p,d,d),new FN(0-p,-l/2-p,d,d),new FN(a/2-p,0-p,d,d),new FN(0-p,l/2-p,d,d)],m=new Array(5,7),g=1,y=f.length;g<y;g++)if(f[g].contains(i)&&(!n||-1!==m.indexOf(g))){o.resize=!0,o.resizeIndex=g;break}l<0&&(l=-l),o.rotate=!1,o.rotateIndex=0;var _=i.x-0,v=i.y-(l/2+this.rotationGripSize/c+(d=this.rotationGripSize/2/c));return _*_+v*v<d*d&&(o.rotate=!0,o.rotateIndex=6),o},Object.defineProperty(e.prototype,"mul",{get:function(){return 96*this.zoom/72},enumerable:!0,configurable:!0}),e.prototype.isLockedOrDisabled=function(e){return null==e||e.isLocked()||this.disabledLayers.includes(e.layer)},e.prototype.onLayerTextureLoaded=function(){for(var e=0;e<this.layers.length;e++){var t=this.layers.getItem(e);if(!t.locked&&!t.isTextureLoadedOrNotExists())return}this.redraw()},e}(),ZY=function(){function e(e,t){var n=this;this._productParser=new yU,this._watermarkCollectionChangedEvent=new PL,this._watermarkContainers=new Ij,this._onSurfacePropertyChanged=function(e,t){switch(t){case"width":case"height":n._updateWatermark()}},this._watermarkConfig=e,this._service=t,this._clearWatermarkContainer()}return Object.defineProperty(e.prototype,"surface",{get:function(){return this._surface},set:function(e){this._surface!==e&&(null!=this._surface&&this.surface.removePropertyChanged(this._onSurfacePropertyChanged),this._surface=e,this._watermarkConfig=null!=this._surface&&null!=this._surface.parentProduct?this._surface.parentProduct.watermarkConfig:null,null!=this._surface&&this.surface.addPropertyChanged(this._onSurfacePropertyChanged),this._updateWatermark())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"watermarkConfig",{get:function(){return this._watermarkConfig},set:function(e){this._watermarkConfig!==e&&(this._watermarkConfig=e,this._updateWatermark())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"watermarkContainers",{get:function(){return null==this._watermarkContainers&&(this._watermarkContainers=new Ij),this._watermarkContainers},enumerable:!0,configurable:!0}),e.prototype._setWatermarkContainers=function(e){this._watermarkContainers=e,this._watermarkCollectionChangedEvent.notify(this)},e.prototype.add_watermarkCollectionChanged=function(e){this._watermarkCollectionChangedEvent.add(e)},e.prototype.remove_watermarkCollectionChanged=function(e){this._watermarkCollectionChangedEvent.remove(e)},e.prototype._clearWatermarkContainer=function(){this._watermarkContainers=null},e.prototype._updateWatermark=function(){this._clearWatermarkContainer(),null!=this.surface&&0!==this.surface.width&&0!==this.surface.height&&null!=this.watermarkConfig&&null!=this.watermarkConfig.visibility&&!1!==this.watermarkConfig.visibility.canvas&&this._requestWatermarkItems()},e.prototype._requestWatermarkItems=function(){var e=this,t=Math.random();this._requestWatermarkItemsId=t,this._service.getWatermarkItemsAsync(this.surface.width,this.surface.height,this._watermarkConfig).then(function(n){try{if(t!==e._requestWatermarkItemsId)return;var r=new Ij([e._productParser.parseContainer(n)]);e._setWatermarkContainers(r)}catch(i){throw i}}).catch(function(e){console.error("Error while updating watermark items.",e)})},e}(),JY=function(e){this.text={fitToPathStep:1},this.messages={warningImageResolution:"Image resolution ([DPI_VALUE_PLACEHOLDER] dpi) is close to poor, however, print quality may still be acceptable but far from ideal.",badImageResolution:"Too low image resolution ([DPI_VALUE_PLACEHOLDER] dpi) which may result in poor print quality",moreThanOneWarning:"Element has more than one warning.",safetyLinesViolationWarning:"The object is too close to the edge.",bleedViolationWarning:"The object edge is inside the bleed area. It may be trimmed incorrectly. Move it inside the safe zone or outside of the bleed line.",regionViolationWarning:"The object goes out of the region.",textCropWarning:"The text is too long for this box. Some text strings are clipped. Try to make it shorter or use smaller font."},this.violationService={enabled:!0,bleedViolationWarningEnabled:!0,qualityChangeContainersEnabled:!0,regionViolationWarningEnabled:!0,safetyLineViolationWarningEnabled:!0,textCropViolationWarningEnabled:!0,violationWarningButtonsEnabled:!0,qualityMeter:{renderingDpi:300,enabled:!0,qualityLevels:{bad:100,warning:100}}},cj(this,[e=null!=e?e:{}],{deep:!0})},eK=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},tK=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},nK=function(){function e(e,t){var n=this;this._viewer=e,this._backendUrl=t,this._viewer.add_onResize(function(){n._updatePosition(),null!=n._expireLicenseMessageElement&&n._updateHeightExpireLicenseMessage()})}return e.prototype.checkLicense=function(){return eK(this,void 0,void 0,function(){var e,t;return tK(this,function(n){switch(n.label){case 0:return null!=this._license?[3,2]:(e=this,[4,this._getLicense()]);case 1:e._license=n.sent(),n.label=2;case 2:return this._license.isEnterprise&&!this._license.isTrial?(this._getLeftDays()<=30&&(this._expireLicenseMessageElement=this._createExpireLicenseMessage(),(t=document.getElementById("aspnetForm").parentElement).insertBefore(this._expireLicenseMessageElement,t.childNodes[0]),this._updateHeightExpireLicenseMessage()),[2]):(this._isFullLicense()||(this._watermarkElement=this._createElement(),this._viewer.element.parentElement.appendChild(this._watermarkElement),this._updatePosition()),[2])}})})},e.prototype._updatePosition=function(){if(null!=this._watermarkElement){var t=this._viewer.element.clientHeight-this._watermarkElement.clientHeight-e._margin;this._watermarkElement.style.left=this._viewer.element.clientWidth-this._watermarkElement.clientWidth-e._margin+"px",this._watermarkElement.style.top=t+"px"}},e.prototype._isFullLicense=function(){return!this._license.isTrial&&!this._license.isDeveloper},e.prototype._createExpireLicenseMessage=function(){var e=document.createElement("div");e.style.background="rgba(244, 67, 54, 0.1)";var t=document.createElement("p");return t.style.color="#F44336",t.style.fontSize="14px",t.style.margin="0",t.style.lineHeight="20px",t.style.padding="8px 16px",t.textContent="The license expires soon. It won't affect your current design, but please contact the website administrator or customer service department and let them know that you see this message.",e.appendChild(t),e},e.prototype._updateHeightExpireLicenseMessage=function(){var e=this._expireLicenseMessageElement;if(null!=e){var t=e.clientHeight;document.getElementById("aspnetForm").style.height="calc(100% - "+t+"px)",e.style.textAlign=t>36?"left":"center"}},e.prototype._createElement=function(){var e=document.createElement("div");e.id="cvLicenseWatermark",e.style.width="auto",e.style.height="auto",e.style.whiteSpace="nowrap",e.style.position="absolute",e.style.borderRadius="4px",e.style.backgroundColor="rgba(255, 255, 255, 0.5)",e.style.zIndex="1",e.style.pointerEvents="none";var t=document.createElement("div");t.style.padding="8px",t.style.display="flex",t.style.flexDirection="column";var n=document.createElement("span");n.style.fontFamily="Roboto",n.style.fontStyle="normal",n.style.fontWeight="500",n.style.fontSize="14px",n.style.lineHeight="15px",n.style.color="#333333";var r=document.createElement("span");r.style.fontFamily="Roboto",r.style.fontStyle="normal",r.style.fontSize="12px",r.style.lineHeight="18px",r.style.color="#333333",n.textContent="This is a "+this._getLicenseType()+" edition";var i=this._license.expirationDate.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.textContent="Expires on "+i+" ("+this._getLeftDays()+" days left)",t.appendChild(n),t.appendChild(r),e.appendChild(t),e},e.prototype._getLicenseType=function(){return this._license.isTrial?"Trial":this._license.isDeveloper?"Developer":""},e.prototype._getLeftDays=function(){var e=Math.max(0,this._license.expirationDate.getTime()-Date.now());return Math.ceil(e/864e5)},e.prototype._getLicense=function(){return eK(this,void 0,void 0,function(){var e,t;return tK(this,function(n){switch(n.label){case 0:return[4,(r=nj(this._backendUrl,"license"),$U({url:r,type:jU.get,headers:[HU.json]}))];case 1:if((e=n.sent()).status!==NU.Ok)throw new ML("Cannot get license from server");return t=JSON.parse(e.value),[2,uj(new rK,{isDeveloper:t.isDeveloper,isTrial:t.isTrial,isDesktopOnly:t.isDesktopOnly,isEnterprise:t.isEnterprise,expirationDate:new Date(t.expirationDate)})]}var r})})},e._margin=12,e}(),rK=function(){},iK=function(){function e(e,t,n,r){this._productHandler=e,this._canvas=n,this._eventManager=r,this._productThemeApplier=new GX,this.productThemes=t}return e.prototype.applyProductTheme=function(e,t,n){var r=this,i=null;if("string"==typeof e)i=this.productThemes[e];else if(e instanceof oK)i=e;else if(e instanceof Object)i=new oK(e);else if(null==e)throw new kL("Theme must be not null");if(null==i)throw new kL("Theme not found");var o=t.getAllItems({ignoreMockups:!1,flatGroupItems:!0}).filter(function(e){return!(e.parentGroupItem instanceof Tz)}),s=[];return this.currentProductTheme=i,n.execute(qG.clearSelection),o.forEach(function(e){e instanceof vH&&r.applyToItem(e,i)&&s.push(e)}),s.length>0&&r$.updateItems(s,this._productHandler,this._canvas,{addToHistory:!0,redraw:!0,updatePhase:Gq.Final}),0===s.length&&console.warn("No colors were applied from theme. Please check that theme matches to the product."),this._eventManager.productThemeChangedEvent.notify(this.currentProductTheme),s.length>0},e.prototype.applyToItem=function(e,t,n){return this._productThemeApplier.applyToItem(e,t,n)},e}(),oK=function(e){Object.assign(this,e)},sK=function(){function e(e,t){void 0===t&&(t=10),this._snapshots=[],this._current=-1,this._enabled=!0,this._locked=!1,this._pauseCount=0,this._addSnapshotOnResume=!1,this._overflowMaxUndoStepCount=!1,this._changed=new EL,this._snapshotHandler=e,this.historySize=t}return Object.defineProperty(e.prototype,"historySize",{set:function(e){e>=0?this._maxUndoStepCount=e:(console.warn("History: historySize value isn't correct, reset to 10"),this._maxUndoStepCount=10)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._current<this._snapshots.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._current>=1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overflowMaxUndoStepCount",{get:function(){return this._overflowMaxUndoStepCount},enumerable:!0,configurable:!0}),e.prototype.enable=function(){this._enabled||(this._enabled=!0)},e.prototype.disable=function(){this._enabled&&(this._enabled=!1,this.clear())},e.prototype.isPaused=function(){return this._pauseCount>0},e.prototype.pause=function(){this._pauseCount++,1===this._pauseCount&&(this._addSnapshotOnResume=!1)},e.prototype.resume=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!1),this._pauseCount<=0||(this._pauseCount--,0===this._pauseCount&&(e&&this._addSnapshotOnResume||t)&&this.addSnapshot(!1,n))},e.prototype.raiseChanged=function(){this._changed.notify()},e.prototype._clearRedo=function(){this._snapshots.splice(this._current+1)},e.prototype._clearUndo=function(){this._snapshots.splice(0,this._current+1),this._current=-1,this._overflowMaxUndoStepCount=!1},e.prototype.clear=function(e){void 0===e&&(e=!1),this._snapshots=[],this._current=-1,this.addSnapshot(!0),e||this.raiseChanged()},e.prototype.addSnapshot=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this._enabled&&!this._locked)if(this._pauseCount>0)this._addSnapshotOnResume=!0;else{var n=this._snapshotHandler.createSnapshot();if(null==n)throw"Snapshot can not be null";this._locked=!0,this.canRedo&&this._clearRedo(),t&&this._snapshots.length>0&&(this._snapshots.pop(),this._current--),this._snapshots.push(n),this._current++,this._locked=!1,this._current>this._maxUndoStepCount&&(this._snapshots.splice(0,1),this._current--,this._overflowMaxUndoStepCount=!0),e||this.raiseChanged()}},e.prototype.redo=function(){this._enabled&&this.canRedo&&(this._locked=!0,this._current++,this._snapshotHandler.loadSnapshot(this._snapshots[this._current]),this._locked=!1,this.raiseChanged())},e.prototype.undo=function(){this._enabled&&this.canUndo&&(this._locked=!0,this._current--,this._snapshotHandler.loadSnapshot(this._snapshots[this._current]),this._locked=!1,this.raiseChanged())},e.prototype.addChanged=function(e){this._changed.add(e)},e.prototype.removeChanged=function(e){this._changed.remove(e)},e}(),aK=function(){function e(e){this._viewer=e}return Object.defineProperty(e.prototype,"_product",{get:function(){return null!=this._surface?this._surface.parentProduct:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_surface",{get:function(){return this._viewer.surface},enumerable:!0,configurable:!0}),e.prototype.createSnapshot=function(){var e=null!=this._product?this._product:this._surface;if(null!=e)return e.clone()},e.prototype.loadSnapshot=function(e){var t=e.clone();if(t instanceof eU)throw new OL("Surface as snapshot not implemented!");var n=this._surface.id,r=t.surfaces.firstOrDefault(function(e){return e.id===n});this._viewer.surface=null!=r?r:t.surfaces.get(0),this._viewer.eventManager.snapshotLoadedEvent.fire(t)},e}(),lK=function(){function e(e){var t=this;this._viewer=e,this.getHandler=function(e){return t._viewer.getHandler(e)}}return Object.defineProperty(e.prototype,"currentSurface",{get:function(){return this._viewer.surface},set:function(e){this._viewer.surface=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentAngle",{get:function(){return this._viewer.contentAngle},enumerable:!0,configurable:!0}),e.prototype.redraw=function(){this._viewer.canvas.redraw()},Object.defineProperty(e.prototype,"regionForCurrentContainer",{get:function(){var e=this._viewer.userEditContainer;return null!=e?e.region:null},enumerable:!0,configurable:!0}),e.prototype.beginMultiCall=function(){null!=this._viewer&&null!=this._viewer.canvas&&null!=this._viewer.canvas.service&&this._viewer.canvas.service.beginMultiCall()},e.prototype.endMultiCall=function(){null!=this._viewer&&null!=this._viewer.canvas&&null!=this._viewer.canvas.service&&this._viewer.canvas.service.endMultiCall()},e.prototype.findItemByHitTest=function(e,t){var n=this,r=this._viewer.pageToWorkspacePoint(e,t),i=this._viewer.canvas.getItemHandlersByHitTest(r),o=i.find(function(e){return n._viewer.canvas.isItemHandlerSelected(e)});return null!=o?o.item:null!=i[0]?i[0].item:null},e.prototype.waitUpdate=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){switch(e.label){case 0:return[4,this._viewer.canvas.waitUpdate()];case 1:return[2,e.sent()]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},Object.defineProperty(e.prototype,"product",{get:function(){var e=this.currentSurface;return null==e?null:e.parentProduct},enumerable:!0,configurable:!0}),e.prototype.checkSelectionByHitTest=function(e,t){var n=this._viewer.pageToWorkspacePoint(e,t);return this._viewer.canvas.isSelectionByHitTest(n)},Object.defineProperty(e.prototype,"selectedItems",{get:function(){return this._viewer.canvas.getSelectedItemHandlers().toArray().map(function(e){return e.item})},enumerable:!0,configurable:!0}),e.prototype.getPrintAreaVisualSize=function(e,t){var n=this.getPrintAreaBounds(e,t);return this.getVisualSize(n)},e.prototype.getVisualSize=function(e){var t=this._viewer.contentAngle;if(0===t)return EW.from(e);var n=new KN(0,0,e.width,e.height);return n.rotateAt(t,new MN),EW.from(n.bounds)},e.prototype.getPrintAreaBounds=function(e,t){var n=null!=e?e:this._viewer.userEditContainer,r=null!=t?t:this._viewer.getUserEditPrintArea();return null!=n.region?n.region:r.bounds},Object.defineProperty(e.prototype,"userEditContainer",{get:function(){return this._viewer.userEditContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userEditPrintArea",{get:function(){return this._viewer.getUserEditPrintArea()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suppressOutOfRegionManipulation",{get:function(){return this._viewer.canvas.suppressOutOfRegionManipulation},enumerable:!0,configurable:!0}),e.prototype.updateSelection=function(){null!=this._viewer.canvas&&this._viewer.canvas.updateSelection()},e.prototype.replaceItem=function(e,t){var n,r=e.parentGroupItem,i=e.parentContainer,o=null===(n=null!=r?r:i)||void 0===n?void 0:n.items;if(null!=o){var s=o.indexOf(e);o.replaceAt(t,s),t.parentContainer=i,t.parentGroupItem=r,null!=this._viewer.canvas&&this._viewer.canvas.handlerFactory.replaceItemHandler(e,t)}},e}(),cK=function(){function e(e){this._surface=e}return e.prototype.getBounds=function(e){var t=this.getPrintAreasBounds(e);return FN.union(t,new FN(0,0,this._surface.width,this._surface.height))},e.prototype.getPrintAreasBounds=function(e){return FN.getOverallBounds(this._surface.printAreas.toArray().map(function(t){return t.getBounds(e)}))},e}(),uK=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},hK=function(){function e(){}return e.prototype.isAvailableFor=function(e){throw new OL("Violation.ts: isAvailableFor is not implemented!")},e.prototype.getViolationInfo=function(e,t){throw new OL("Violation.ts: getViolationState is not implemented!")},e.prototype.getStatePropertyName=function(){throw new OL("Violation.ts: getAlias is not implemented!")},e.prototype.getDataPropertyName=function(){throw new OL("Violation.ts: getAlias is not implemented!")},e._computeTotalViolationState=function(e){if(FL.isEmpty(e)||e.includes(WY.None))return WY.None;var t=e.filter(function(e){return null!=e});return 0===t.length?WY.None:Math.max.apply(Math,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(uK(arguments[t]));return e}(t))},e.computeTotalViolationInfo=function(t,n,r){var i={},o=[],s={},a=[];return t.forEach(function(e){if(e.isAvailableFor(n)){var t=e.getViolationInfo(n,r);o.push(t.state),FL.isEmpty(t.message)||a.push(t.message),null!=t.data&&(s[e.getDataPropertyName()]=t.data),i[e.getStatePropertyName()]=t.state}}),i.state=e._computeTotalViolationState(o),i.data=s,i.messages=a,i},e}(),dK=function(){function e(){}return Object.defineProperty(e,"none",{get:function(){return{state:WY.None}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"good",{get:function(){return{state:WY.Good}},enumerable:!0,configurable:!0}),e}();!function(e){e[e.None=0]="None",e[e.Good=1]="Good",e[e.Warning=2]="Warning",e[e.Bad=3]="Bad"}(WY||(WY={}));var pK=function(){return(pK=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},fK=function(){function e(e){var t=this;this._violationService=e,this._timeouts=[],this._onItemViolationStateChanged=function(e){var n=pK({},e.new);n.state!==WY.Good||null!=e.old&&e.old.state!==WY.Good&&e.old.state!==WY.None||(n.state=WY.None),t._violationViewChangedEvent.notify(n);var r=n.item.id,i=function(e){var n=t._timeouts.find(function(t){return t.id===e});null!=n&&(t._timeouts=t._timeouts.filter(function(e){return e.id!==n.id}),clearInterval(n.timeoutId))};if(n.state!==WY.Good&&i(e.new.item.id),n.state===WY.Good){var o=setTimeout(function(e){var n=pK({},e);n.state=WY.None,n.messages=null,t._violationViewChangedEvent.notify(n),i(n.item.id)},2e3,n);t._timeouts.push({id:r,timeoutId:o})}},this._violationViewChangedEvent=new EL,this._violationService.addItemViolationStateChanged(this._onItemViolationStateChanged)}return e.prototype.addViolationViewChanged=function(e){this._violationViewChangedEvent.add(e)},e.prototype.removeViolationViewChanged=function(e){this._violationViewChangedEvent.remove(e)},e}(),mK=function(){function e(e,t,n,r,i,o,s){var a=this;this._conf=t,this._violationServiceFactory=r,this._productHandler=i,this._messages=o,this._eventManager=s,this._onViolationViewChanged=function(e){var t=a._productHandler.getHandler(e.item);if(null!=t){var n=null!=e.messages?1===e.messages.length?e.messages[0]:a._messages.moreThanOneWarning:null;switch(e.state){case WY.Good:t.setGoodViolationIcon("");break;case WY.Warning:t.setWarningViolationIcon(n);break;case WY.Bad:t.setBadViolationIcon(n);break;case WY.None:t.setNoneViolationIcon()}}},this._onItemDpiChanged=function(e){var t=e.item;if((t instanceof FV||t instanceof nV)&&null!=(t instanceof FV?t.content instanceof nV?t.imageContent:null:t)){var n=a._productHandler.getHandler(t),r=Math.round(e.newValue),i=a._violationServiceFactory.renderingDpi,o=a._conf.qualityMeter.qualityLevels,s=a._getQualityChangeInfoBarText(r,i,o);n.setQualityChangeInfoBarText(s);var l=a._getQualityChangeScaleBarProgress(r,i,o,e.state);n.setQualityChangeScaleBarWidth(l),a._setScaleBarClass(e.state,o,n)}},e.violationWarningButtonsEnabled=t.violationWarningButtonsEnabled,e.qualityChangeContainersEnabled=t.qualityChangeContainersEnabled,(this._conf.qualityChangeContainersEnabled||this._conf.violationWarningButtonsEnabled)&&(this._addStyles(),e.violationWarningButtonsEnabled&&(this._violationViewController=new fK(n),this._violationViewController.addViolationViewChanged(this._onViolationViewChanged)),this._conf.qualityChangeContainersEnabled&&this._eventManager.addImageDpiChanged(this._onItemDpiChanged))}return e.prototype._getQualityChangeInfoBarText=function(e,t,n){return e+"/"+Math.round(n.warning/100*t)+" dpi"},e.prototype._getQualityChangeScaleBarProgress=function(e,t,n,r){var i=r===WY.Bad,o=(n.bad===n.warning?.5*n.bad:i?n.bad-(n.warning-n.bad):n.bad)*(t/100),s=Math.round((i?n.bad:n.warning)/100*t);return 100*(1-(s-e)/(s-o))},e.prototype._setScaleBarClass=function(e,t,n){var r=e===WY.Bad;t.bad===t.warning?n.setBadToGoodChangeScaleBarClass():r?n.setBadToWarningChangeScaleBarClass():n.setWarningToGoodChangeScaleBarClass()},e.prototype._addStyles=function(){var e=document.createElement("style");e.type="text/css",e.innerHTML="#cvWhitespace .da-quality-change-container {\n            padding: 2px;\n            margin: 4px;\n            background-color: rgba(97, 97, 97, 0.9);\n            height: 24px;\n            z-index: -2;\n            min-width: 76px;\n            flex-direction: column;            \n            display: none;\n          }\n          #cvWhitespace .da-quality-change-container.buttonsShown {\n            display: flex;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-scale-bar {\n            width: 72px;\n            height: 4px;\n            position: relative;\n            transition: width 0.1s linear;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-scale-bar.da-no-animation {\n            transition: none;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-scale-bar:before {\n            position: absolute;\n            content: \"\";\n            width: 72px;\n            height: 4px;\n            z-index: -1;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-scale-bar.da-bad-to-warning {\n            background-color: #FFB300;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-scale-bar.da-bad-to-warning:before {\n            background-color: red;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-scale-bar.da-warning-to-good {\n            background-color: lawngreen;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-scale-bar.da-warning-to-good:before {\n            background-color: #FFB300;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-scale-bar.da-bad-to-good {\n            background-color: lawngreen;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-scale-bar.da-bad-to-good:before {\n            background-color: red;\n          }\n          #cvWhitespace .da-quality-change-container .da-quality-change-info-bar {\n            font-family: 'Roboto';\n            font-weight: 500;\n            font-size: 8pt;\n            color: white;\n            text-align: center;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex: 1;\n          }\n          #cvWhitespace .da-violation-container {\n            display: flex;\n            align-items: center;\n            pointer-events: none;\n          }\n          #cvWhitespace .da-violation-icon {            \n            text-shadow: none;\n            padding: 0;            \n            background: transparent;\n            border: none;\n            visibility: hidden;\n            outline: none !important;\n            pointer-events: none !important;\n            width: 32px;\n            height: 32px;\n          }\n          .da-quality-change-container.buttonsShown ~ .da-violation-icon {\n            width: 0 !important;\n            height: 0 !important;\n            opacity: 0;\n          }\n          #cvWhitespace .da-violation-icon svg {\n            width: 100%;\n            height: 100%;\n            transform: scale(0.8);\n            transition: opacity 0.25s ease-in-out, transform 0.25s linear, color 0.25s linear;\n            display: none;\n          }\n          #cvWhitespace .da-violation-icon.da-violation-icon-bad,\n          #cvWhitespace .da-violation-icon.da-violation-icon-warning,\n          #cvWhitespace .da-violation-icon.da-violation-icon-good {\n            display: flex;\n          }\n          #cvWhitespace .da-violation-icon.da-violation-icon-warning,\n          #cvWhitespace .da-violation-icon.da-violation-icon-bad {\n            pointer-events: auto !important;\n          }\n          #cvWhitespace .da-violation-icon.da-violation-icon-good .good-svg {\n            opacity: 1;\n            display: flex;\n          }\n          #cvWhitespace .da-violation-icon.da-violation-icon-bad .warning-svg {\n            opacity: 0.75;\n            color: red;\n            display: flex;\n          }\n          #cvWhitespace .da-violation-icon.da-violation-icon-bad:active .warning-svg {\n            color: #da0000;\n          }\n          #cvWhitespace .da-violation-icon.da-violation-icon-warning .warning-svg {\n            display: flex;\n            color: #FFB300;\n            opacity: 0.55;\n          }\n          #cvWhitespace .da-violation-icon.da-violation-icon-warning:active .warning-svg {\n            color: #da8f00;\n          }\n          #cvWhitespace .da-violation-icon.da-violation-icon-good .good-svg {\n            opacity: 1;\n            color: lawngreen;\n          }\n          #cvWhitespace .da-violation-icon.da-violation-icon-good:active .good-svg {\n            color: #63c900;\n          }\n          #cvWhitespace .da-violation-icon.active svg,\n          #cvWhitespace .da-violation-icon.active svg {\n            opacity: 1 !important;\n          }\n          #cvWhitespace .da-violation-icon:active svg,\n          #cvWhitespace .da-violation-icon:hover svg,\n          #cvWhitespace .da-violation-icon:active svg,\n          #cvWhitespace .da-violation-icon:hover svg {\n            opacity: 1 !important;\n            transform: scale(1);\n          }",document.head.appendChild(e)},e.prototype.dispose=function(){var e,t;null===(e=this._violationViewController)||void 0===e||e.removeViolationViewChanged(this._onViolationViewChanged),null===(t=this._eventManager)||void 0===t||t.removeImageDpiChanged(this._onItemDpiChanged)},e}(),gK=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yK=function(){return(yK=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_K=function(e){function t(t,n,r,i,o){var s=e.call(this)||this;return s._productHandler=t,s._messages=r,s._renderingDpi=i,s._eventManager=o,s._dpiValuePlaceholder="[DPI_VALUE_PLACEHOLDER]",s._getQualityInfo=function(e){var t,n,r=s._productHandler.getHandler(e);if(null==r)return dK.none;var i=null===(n=null===(t=e.source)||void 0===t?void 0:t.origin)||void 0===n?void 0:n.originalSize,o=s._getRenderingToSourceImageDpiRatio(r,i);if(null==o)return dK.none;var a=s._renderingDpi*o,l={dpiValue:a},c=100*o;return s._qualityLevels.bad-c>.001?{state:WY.Bad,data:l,message:s._getMessage(WY.Bad,a)}:s._qualityLevels.warning-c>.001?{state:WY.Warning,data:l,message:s._getMessage(WY.Warning,a)}:{state:WY.Good,data:l}},s._getRenderingToSourceImageDpiRatio=function(e,t){var n,r,i=e.rectangle;return null!=t?(n=t.height,r=t.width):(n=e.item.source.height,r=e.item.source.width),Math.min(n/(i.height*s._renderingDpi/72),r/(i.width*s._renderingDpi/72))},s._checkDpiChanging=function(e,t,n){var r,i,o=null===(r=null==t?void 0:t.data[s.getDataPropertyName()])||void 0===r?void 0:r.dpiValue,a=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.dpiValue;null==o||WN(o,a)||s._eventManager.imageDpiChangedEvent.notify({oldValue:o,newValue:a,item:n,state:e.state})},s._qualityLevels=yK({bad:100,warning:100},(null==n?void 0:n.qualityLevels)||{}),s._qualityLevels.warning<s._qualityLevels.bad&&console.warn("violationWarningsSettings.qualityMeter.qualityLevels.warning cannot be less than violationWarningsSettings.qualityMeter.qualityLevels.bad."),s}return gK(t,e),Object.defineProperty(t.prototype,"renderingDpi",{set:function(e){this._renderingDpi=e},enumerable:!0,configurable:!0}),t.prototype.isAvailableFor=function(e){return e instanceof nV||e instanceof FV},t.prototype.getViolationInfo=function(e,t){var n,r;if(e instanceof FV&&e.isStubOrEmpty)return dK.good;var i=r$.getImageItem(e);if(null==i||null==(null===(n=i.source)||void 0===n?void 0:n.id))return dK.none;if(null===(r=i.source)||void 0===r?void 0:r.isVector)return dK.good;var o=e.violationSettings instanceof Zz?e.violationSettings:null;if(null==o||!o.allowImageQuality)return dK.good;var s=this._getQualityInfo(i);return this._checkDpiChanging(s,t,e),s},t.prototype._getMessage=function(e,t){var n=Math.round(t).toString();return(e===WY.Bad?this._messages.badImageResolution:this._messages.warningImageResolution).replace(this._dpiValuePlaceholder,n)},t.prototype.getStatePropertyName=function(){return t.statePropertyName},t.prototype.getDataPropertyName=function(){return t.dataPropertyName},t.dataPropertyName="qualityViolationData",t.statePropertyName="qualityViolationState",t}(hK),vK=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bK=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},wK=function(e){function t(t,n){var r=e.call(this)||this;return r._productHandler=t,r._messages=n,r}return vK(t,e),t.prototype.isAvailableFor=function(e){return!0},t.prototype.getViolationInfo=function(e){var t,n,r;if(!r$.isTextItemHandlerReady(e,this._productHandler))return dK.none;if(!e.violationSettings.allowSafetyLines||(null===(r=e.parentContainer)||void 0===r?void 0:r.name)!==bU.MAIN_CONTAINER_NAME)return dK.good;var i=r$.getItemBoundsForViolationCheck(this._productHandler.getHandler(e)),o=e.parentContainer.parentComponent.printAreas,s=!1;try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),l=a.next();!l.done&&(s=null!=this._getSafetyRectsFromPrintArea(l.value).find(function(e){return!e.containsRectangle(i)}));l=a.next());}catch(u){t={error:u}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var c=s?WY.Warning:WY.Good;return{state:c,message:c===WY.Warning?this._messages.safetyLinesViolationWarning:null}},t.prototype._getSafetyRectsFromPrintArea=function(e){var t=[];return t.push.apply(t,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(bK(arguments[t]));return e}(e.safetyLines.toArray().map(function(t){return t.getRectangle(e.bounds)}))),e.bleed.isEmpty&&e.slug.isEmpty||t.push(e.getBounds(UV.Trim)),t},t.prototype.getStatePropertyName=function(){return t.statePropertyName},t.statePropertyName="safetyLineViolationState",t}(hK),CK=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xK=function(e){function t(t,n){var r=e.call(this)||this;return r._productHandler=t,r._messages=n,r}return CK(t,e),t.prototype.isAvailableFor=function(e){return!0},t.prototype.getViolationInfo=function(e){var t,n,r;if(!r$.isTextItemHandlerReady(e,this._productHandler))return dK.none;if(!e.violationSettings.allowBleedArea||(null===(r=e.parentContainer)||void 0===r?void 0:r.name)!==bU.MAIN_CONTAINER_NAME)return dK.good;var i=r$.getItemBoundsForViolationCheck(this._productHandler.getHandler(e)),o=e.parentContainer.parentComponent.printAreas,s=!1;try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),l=a.next();!l.done;l=a.next()){var c=l.value,u=c.safetyLines.firstOrDefault(function(e){return e.pdfBox===tU.Trim}),h=c.safetyLines.firstOrDefault(function(e){return e.pdfBox===tU.Bleed});if(null!=u&&null!=h||!c.bleed.isEmpty){var d=c.bleed.isEmpty?u.getRectangle(c.bounds):c.getBounds(UV.Trim),p=c.bleed.isEmpty?h.getRectangle(c.bounds):c.getBounds(UV.Bleed);if((i.left<d.left&&i.left>p.left||i.top<d.top&&i.top>p.top||i.right>d.right&&i.right<p.right||i.bottom>d.bottom&&i.bottom<p.bottom)&&(s=!0),!s)break}}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var f=s?WY.Warning:WY.Good;return{state:f,message:f===WY.Warning?this._messages.bleedViolationWarning:null}},t.prototype.getStatePropertyName=function(){return t.statePropertyName},t.statePropertyName="bleedViolationState",t}(hK),EK=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SK=function(e){function t(t,n){var r=e.call(this)||this;return r._productHandler=t,r._messages=n,r._isItemOutOfRegion=function(e){if(null==e.parentContainer||null==e.parentContainer.region)return!1;var t=r$.getItemBoundsForViolationCheck(r._productHandler.getHandler(e)),n=e.parentContainer.region.clone();return!TW(FN.intersect(n,t),t)},r}return EK(t,e),t.prototype.isAvailableFor=function(e){return!0},t.prototype.getViolationInfo=function(e){var t;if(!r$.isTextItemHandlerReady(e,this._productHandler))return dK.none;if(!e.violationSettings.allowRegion||(null===(t=e.parentContainer)||void 0===t?void 0:t.name)!==bU.MAIN_CONTAINER_NAME)return dK.good;var n=this._isItemOutOfRegion(e)?WY.Warning:WY.Good;return{state:n,message:n===WY.Warning?this._messages.regionViolationWarning:null}},t.prototype.getStatePropertyName=function(){return t.statePropertyName},t.statePropertyName="regionViolationState",t}(hK),PK=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),TK=function(e){function t(t,n){var r=e.call(this)||this;return r._productHandler=t,r._messages=n,r.prepareItem=function(e){e instanceof ZH&&(e.checkTextCrop=!0)},r}return PK(t,e),t.prototype.isAvailableFor=function(e){return e instanceof ZH},t.prototype.getViolationInfo=function(e){if(!r$.isTextItemHandlerReady(e,this._productHandler))return dK.none;if(!e.violationSettings.allowTextCrop)return dK.good;var t=this._productHandler.getHandler(e);if(t instanceof b$&&t.isInEdit)return dK.none;var n=t.textCropped?WY.Warning:WY.Good;return{state:n,message:n===WY.Warning?this._messages.textCropWarning:null}},t.prototype.getStatePropertyName=function(){return t.statePropertyName},t.statePropertyName="textCropViolationState",t}(hK),IK=function(){return(IK=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},OK=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},kK=function(){function e(e,t,n){var r=this;this._violations=e,this._eventManager=t,this._productHandler=n,this._globalCheck=function(){UY.debugLog('<span style="color: white">Start global check</span>');for(var e=r._itemsToCheck.length-1;e>=0;e--)r._checkItem(r._itemsToCheck.get(e));UY.debugLog('<span style="color: white">End global check</span>')},this._globalCheckPeriod=700,this._globalCheckDebounce=FL.throttle(this._globalCheck,this._globalCheckPeriod,{leading:!1,trailing:!0}),this._itemsToCheck=new Ij,this._violationInfos=new Map,this._isStarted=!1,this.getItemInfo=function(e,t){return void 0===t&&(t=!1),UY.debugLog('Get item info for <span style="color: rgb(0,255,255)">'+e.name.substring(0,20)+"...</span> "+(t?" with force":"")),!t&&r._violationInfos.has(e.id)||r._checkItem(e),r._violationInfos.get(e.id)},this._checkItem=function(e){var t=r._violationInfos.get(e.id),n=hK.computeTotalViolationInfo(r._violations,e,r._violationInfos.get(e.id));r._violationInfos.set(e.id,n),(null==t?void 0:t.state)===n.state&&ij(null==t?void 0:t.messages,n.messages)||((null==t?void 0:t.state)!==n.state?r._logStateChanged(e,n.state):UY.debugLog('Item <span style="color: rgb(0,255,255)">'+e.name.substring(0,20)+"...</span> changed message"),r._itemViolationStateChangedEvent.notify({new:IK(IK({},n),{item:e}),old:null!=t?IK(IK({},t),{item:e}):null})),n.state===WY.None&&UY.debugLog('Item <span style="color: rgb(0,255,255)">'+e.name.substring(0,20)+"...</span> has undefined state"),r._itemsToCheck.contains(e)&&r._itemsToCheck.remove(e)},this._scheduleSurfaceItemsCheck=function(){UY.debugLog("Schedule all items"),r._itemsToCheck.clear(),r._violationInfos.clear(),r._productHandler.currentSurface.getAllItems({ignoreMockups:!0,excludeGroupItems:!1,flatGroupItems:!0}).forEach(r._scheduleItemCheck)},this._scheduleItemCheck=function(e){!r._itemsToCheck.contains(e)&&!e.locked&&e.parentContainer instanceof Aj&&(UY.debugLog('Schedule item <span style="color: rgb(0,255,255)">'+e.name.substring(0,20)+"...</span>"),r._violations.forEach(function(t){return null!=t.prepareItem?t.prepareItem(e):null}),r._itemsToCheck.contains(e)||r._itemsToCheck.push(e))},this._onItemRemoved=function(e){r._removeViolationItemData(e.item)},this._removeViolationItemData=function(e){r._violationInfos.has(e.id)&&r._violationInfos.delete(e.id),r._itemsToCheck.contains(e)&&r._itemsToCheck.remove(e)},this._onItemAdded=function(e){r._scheduleItemCheck(e.item)},this._onImageContentChanged=function(e){null!=e&&r._scheduleItemCheck(e)},this._onContainerCollectionChanged=function(e){e.type!==fj.Move&&e.item instanceof Aj&&e.item.items.forEach(e.type===fj.Remove?r._removeViolationItemData:r._scheduleItemCheck)},this._itemViolationStateChangedEvent=new EL,this.dispose=function(){var e=r._eventManager;e.removeSurfaceChanged(r._scheduleSurfaceItemsCheck),e.removePrintAreaCollectionChanged(r._scheduleSurfaceItemsCheck),e.removePrintAreaPropertyChanged(r._scheduleSurfaceItemsCheck),e.removeItemAdded(r._onItemAdded),e.removeItemRemoved(r._onItemRemoved),e.removeItemPropertyChanged(r._scheduleItemCheck),e.removeItemChanging(r._scheduleItemCheck),e.removeItemChanged(r._scheduleItemCheck),r._itemsToCheck.remove_collectionChanged(r._globalCheckDebounce)},this._logStateChanged=function(e,t){var n="";switch(t){default:n="black";break;case WY.Good:n="green";break;case WY.Warning:n="yellow";break;case WY.Bad:n="red"}var r='item with name <span style="color: rgb(0,255,255)">"'+e.name.substring(0,20)+'..."</span> change violation on <span style="color: '+n+'">'+WY[t].toString()+"</span>.";UY.debugLog(r)},0!==this._violations.length&&this._init()}return e.prototype._init=function(){var e=this._eventManager;e.addSurfaceChanged(this._scheduleSurfaceItemsCheck),e.addPrintAreaPropertyChanged(this._scheduleSurfaceItemsCheck),e.addPrintAreaCollectionChanged(this._scheduleSurfaceItemsCheck),e.addReady(this._scheduleSurfaceItemsCheck),e.addTextWhizzReady(this._scheduleSurfaceItemsCheck),e.addItemAdded(this._onItemAdded),e.addItemRemoved(this._onItemRemoved),e.addItemPropertyChanged(this._scheduleItemCheck),e.addItemChanging(this._scheduleItemCheck),e.addItemChanged(this._scheduleItemCheck),e.addImageContentChanged(this._onImageContentChanged),e.addContainerCollectionChanged(this._onContainerCollectionChanged),this._itemsToCheck.add_itemAdded(this._globalCheckDebounce),this._scheduleSurfaceItemsCheck(),this._isStarted=!0},e.prototype.extend=function(e){var t;FL.isEmpty(e)||(UY.debugLog("Extend violations with "+e.map(function(e){return e.constructor.prototype.name}).join(", ")),(t=this._violations).push.apply(t,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(OK(arguments[t]));return e}(e)),this._isStarted||this._init(),this._globalCheckDebounce())},e.prototype.addItemViolationStateChanged=function(e){this._itemViolationStateChangedEvent.add(e)},e.prototype.removeItemViolationStateChanged=function(e){this._itemViolationStateChangedEvent.remove(e)},e}(),RK=function(){function e(e,t,n,r){var i,o,s,a;this._conf=e,this._messages=t,this._eventManager=n,this._productHandler=r,this._renderingDpi=null!==(s=null===(o=null===(i=this._conf)||void 0===i?void 0:i.qualityMeter)||void 0===o?void 0:o.renderingDpi)&&void 0!==s?s:300,this._violations=[(null===(a=this._conf.qualityMeter)||void 0===a?void 0:a.enabled)?new _K(this._productHandler,this._conf.qualityMeter,this._messages,this._renderingDpi,this._eventManager):null,this._conf.safetyLineViolationWarningEnabled?new wK(this._productHandler,this._messages):null,this._conf.bleedViolationWarningEnabled?new xK(this._productHandler,this._messages):null,this._conf.regionViolationWarningEnabled?new SK(this._productHandler,this._messages):null,this._conf.textCropViolationWarningEnabled?new TK(this._productHandler,this._messages):null].filter(function(e){return null!=e})}return e.prototype.create=function(){return new kK(this._violations,this._eventManager,this._productHandler)},Object.defineProperty(e.prototype,"renderingDpi",{get:function(){return this._renderingDpi},set:function(e){this._renderingDpi=e,UY.debugLog('Set dpi: <span style="color: rgb(0,255,255)">'+e+"</span>");var t=this._violations.find(function(e){return e instanceof _K});null!=t&&(t.renderingDpi=e)},enumerable:!0,configurable:!0}),e}(),AK=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),MK=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},DK=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},FK=function(e){function t(t){var n=t.holderElement,r=t.backendUrl,i=t.surface,o=void 0===i?new eU:i,s=t.canvasBackground,a=void 0===s?"chess":s,l=t.rulerEnabled,c=void 0===l||l,u=t.frontEndTextRenderingEnabled,h=void 0!==u&&u,d=t.zone,p=t.productViewerPartId,f=void 0===p?"ProductViewer":p,m=e.call(this,void 0===d?null:d)||this;return m._containersFlatList=[],m.containersFlatListChangedEvent=new EL,m._textFormattingEnabled=!0,m._updateItem=function(e){e instanceof Dz&&(e.fitToPathStep=m.configuration.text.fitToPathStep)},m._onHistoryChanged=function(e,t){m._history.addSnapshot()},m._surface=null,m._onCurrentSurfaceContainerAdded=function(e){e.item.name===bU.MAIN_CONTAINER_NAME&&e.item.renderingType===Tj.Normal&&(m.userEditContainer=e.item)},m._onSurfacePropertyChanged=function(e,t){switch(t){case"mockup":m._updateContainersFlatList();break;case"width":case"height":var n=m._surfaceHandler.getBounds(UV.Total);m._canvas.setWorkspaceSize(n.width,n.height);break;case"rotateAngle":m.contentAngle=m.surface.rotateAngle}},m._onPrintAreaPropertyChanged=function(e,t){"bounds"!==t&&"slug"!==t&&"bleed"!==t||m._updateCanvasByPrintAreaBounds()},m._updateCanvasByPrintAreaBounds=function(){var e=m._surfaceHandler.getBounds(UV.Total);m._canvas.workspaceWidth===e.width&&m._canvas.workspaceHeight===e.height||m._canvas.setWorkspaceSize(e.width,e.height);var t=new MN(-Math.min(0,e.left),-Math.min(0,e.top));m._canvas.offset=t;var n=m._surfaceHandler.getPrintAreasBounds(UV.Trim);m._baseRulersOffset=new MN(n.left+t.x,n.top+t.y)},m._updateContainersFlatList=function(){var e=m._containersFlatList;m._containersFlatList=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(MK(arguments[t]));return e}(m.surface.mockup.underContainers,m.surface.containers,m.surface.mockup.overContainers,m.previewMode?[]:m._safetyLinesHandler.safetyLinesContainers,m._watermarkHandler.watermarkContainers,m._gridHandler.gridContainers),m.containersFlatListChangedEvent.notify(m._getDifference(e,m._containersFlatList))},m._setActiveThrowsException=!1,m.frontEndTextRenderingEnabled=h,m._backendUrl=r,m._serviceEndPoint=nj(m._backendUrl,"api/ccviewer"),m._normalizeHolderElement(n),m._viewerElement=m._createViewerElement(n,f),m._canvas=m._createCanvas(),m._configuration=new JY(null),m._screenXDpi=m._screenYDpi=96,m._canvasSaveStateDelegate=null,m._bitmapViewerSaveStateDelegate=null,m._mouseMoveDelegate=null,m._mouseUpDelegate=null,m._mouseDownDelegate=null,m._ignoreMouseDown=!1,m._ignoreMouseDownTimeout=null,m._doubleClickDelegate=null,m._zoomDelegate=null,m._resizeDelegate=null,m._keyDownDelegate=null,m._keyUpDelegate=null,m._modalBgClass=null,m._clearSelectionOnDocumentClick=!0,m._clearSelectionOnViewerClick=!0,m._devicePixelRatio=1,m._whitespaceDiv=null,m._resizeCheckIntervalId=null,m._workspaceRotation=new NX,m._safetyLinesHandler=new rY(m._configuration.printZone),m._safetyLinesHandler.addChanged(m._updateContainersFlatList),m._safetyLinesHandler.addVisibilityChanged(function(){m.canvas.redraw()}),m._watermarkHandler=new ZY(null,m._canvas.service),m._watermarkHandler.add_watermarkCollectionChanged(m._updateContainersFlatList),m._gridHandler=new eY,m._gridHandler.addChanged(function(){m.canvas.redraw()}),m._eventManager=new U$(o.parentProduct,m),m._eventManager.addPrintAreaPropertyChanged(m._onPrintAreaPropertyChanged),m._eventManager.addPrintAreaCollectionChanged(m._updateCanvasByPrintAreaBounds),m.frontEndTextRenderingEnabled&&m._eventManager.addItemPropertyChanged(function(e,t){e instanceof ZH&&m._canvas.handlerFactory.replaceTextItemHandler(e)}),m._productHandler=new lK(m),m.surface=o,m._licenseHandler=new nK(m,m._serviceEndPoint),m.initialize({ignore:!1}),m.zoomMode=s$.bestFit,m.viewportAlignment=o$.centerCenter,m.rulerEnabled=c,m._setCanvasBackground(a),m._snapshotHandler=new aK(m),m._variableItemHelper=new CG(m._productHandler,m._canvas,m._eventManager),m._history=m._initializeHistory(),m._productThemeManager=new iK(m._productHandler,null,m._canvas,m._eventManager),m._itemsDataApplier=new Qq(m._productHandler,m._canvas,m._productThemeManager),m._commandManager=new Xq(m._history,m._productHandler,m._productThemeManager,m._variableItemHelper,m._eventManager,m._canvas,m._itemsDataApplier),m.eventManager.addItemAdded(function(e){return m._updateItem(e.item)}),m.setMouseBehavior(X$.Selection),m}return AK(t,e),Object.defineProperty(t.prototype,"containersFlatList",{get:function(){return this._containersFlatList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandManager",{get:function(){return this._commandManager},enumerable:!0,configurable:!0}),t.prototype.setMouseBehavior=function(e,t,n){if(null==this.canvas)throw new IL("Canvas is not initialized!");this.canvas.mouseBehaviorManager.setMouseBehavior(e,t,n)},Object.defineProperty(t.prototype,"mouseBehavior",{get:function(){return this.canvas.mouseBehaviorManager.currentMouseBehavior},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"configuration",{get:function(){return this._configuration},set:function(e){var t,n;this._configuration=new JY(e),this.gridHandler.setConfig(this._configuration.grid,this._configuration.rulers),this._setRulersConfig(null===(t=this._configuration)||void 0===t?void 0:t.rulers),this._variableItemHelper.maskSymbol=this._configuration.variableItemsMaskSymbol,this._productThemeManager.productThemes=this._configuration.productThemes,null!=this.surface&&null!=this.surface.parentProduct&&this.surface.parentProduct.getAllItems().forEach(this._updateItem),this.history.historySize=this.configuration.historySize,this.commandManager.configuration=this.configuration,this._safetyLinesHandler.conf=this._configuration.printZone,this.canvas.conf=this._configuration;var r=null===(n=this._configuration)||void 0===n?void 0:n.violationService;(null==r?void 0:r.enabled)&&(this._violationServiceFactory=new RK(r,this._configuration.messages,this._eventManager,this._productHandler),this._violationService=this._violationServiceFactory.create(),((null==r?void 0:r.qualityChangeContainersEnabled)||(null==r?void 0:r.violationWarningButtonsEnabled))&&(this._CanvasViolationVisualizer=new mK(this.canvas,r,this._violationService,this._violationServiceFactory,this._productHandler,this._configuration.messages,this._eventManager)))},enumerable:!0,configurable:!0}),t.prototype.exitEditMode=function(){this._canvas.getAllItemHandlers({onlyType:b$}).forEach(function(e){e.editing&&e.exitEditMode()})},t.prototype._initializeHistory=function(){var e=new sK(this._snapshotHandler);return this.eventManager.addSurfaceCollectionChanged(this._onHistoryChanged),this.eventManager.addContainerCollectionChanged(this._onHistoryChanged),this.eventManager.addItemCollectionChanged(this._onHistoryChanged),this.eventManager.addUnderMockupContainerCollectionChanged(this._onHistoryChanged),this.eventManager.addOverMockupContainerCollectionChanged(this._onHistoryChanged),this.eventManager.addPreviewMockupContainerCollectionChanged(this._onHistoryChanged),this.eventManager.addItemPropertyChanged(this._onHistoryChanged),this.canvas.setHistory(e),e},t.prototype._normalizeHolderElement=function(e){e.style.overflow="hidden",e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.msUserSelect="none",e.style.position="relative"},t.prototype._createViewerElement=function(e,t){var n=document.createElement("div");return n.id=e.id+"_"+t,n.attributes.name=n.id,n.style.width="100%",n.style.height="100%",n.style.display="block",n.style.zIndex="1",n.style.margin="0",n.style.padding="0",n.style.border="0",n.style.position="relative",n.style.overflow="hidden",n.style.transform="translate3d(0px, 0px, 0px)",n.style.touchAction="none",e.appendChild(n),n},Object.defineProperty(t.prototype,"licenseHandler",{get:function(){return this._licenseHandler},enumerable:!0,configurable:!0}),t.prototype._createCanvas=function(){var e=new QY(this);return e.serviceEndpoint=this._serviceEndPoint,e.loadingImageUrl=nj(this._serviceEndPoint,"/resource?image=waitclock"),e.handlerUrl=this._serviceEndPoint,e.initialize(),e.multipleSelectionEnabled=!0,e},t.prototype._setCanvasBackground=function(e){"chess"===e?(this.canvas.backgroundImage=nj(this._serviceEndPoint,"/resource?image=background"),this.canvas.isSquaredBackground=!0):this.canvas.surfaceCanvas.style.backgroundColor=e.color},t.prototype.setTextWhizzModule=function(e){this.canvas.setTextWhizzModule(e,this._backendUrl),UY.debugLog("TextWhizz loaded"),this.eventManager.textWhizzReadyEvent.notify(e)},t.prototype.initTextEditor=function(e,t,n){void 0===n&&(n=pL.Default),this.canvas.initTextEditor(n,e,t,this._serviceEndPoint)},Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"whitespaceDiv",{get:function(){return this._whitespaceDiv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"surface",{get:function(){return this._surface},set:function(e){if(null==e)throw new RL("surface");var t=this.surface;e!==t&&(this._canvas.clearSelectedItemHandlers(),this._surface=e,this._eventManager.setProduct(e.parentProduct),this._onCurrentSurfaceChange(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"safetyLinesHandler",{get:function(){return this._safetyLinesHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridHandler",{get:function(){return this._gridHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"surfaceHandler",{get:function(){return this._surfaceHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"violationService",{get:function(){return this._violationService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"violationServiceFactory",{get:function(){return this._violationServiceFactory},enumerable:!0,configurable:!0}),t.prototype._onCurrentSurfaceChange=function(e){var t,n,r,i,o,s,a,l,c,u,h,d;this._safetyLinesHandler.surface=this.surface,this._watermarkHandler.surface=this.surface,this._gridHandler.surface=this.surface,this._surfaceHandler=new cK(this.surface);var p=this._surfaceHandler.getBounds(UV.Total);if(this._updateCanvasByPrintAreaBounds(),this.canvas.service.beginMultiCall(),this._canvas.setWorkspaceSize(p.width,p.height),this._updateContainersFlatList(),this.canvas.service.endMultiCall(),null!=e){try{for(var f=DK(this._getContainerCollections(e)),m=f.next();!m.done;m=f.next()){var g=m.value;try{for(var y=(r=void 0,DK(g)),_=y.next();!_.done;_=y.next()){var v=_.value;try{for(var b=(o=void 0,DK(v.items)),w=b.next();!w.done;w=b.next())this.getHandler(w.value).canvas=null}catch(O){o={error:O}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}}}catch(k){r={error:k}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}g.remove_collectionChanged(this._updateContainersFlatList)}}catch(R){t={error:R}}finally{try{m&&!m.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}e.containers.remove_itemAdded(this._onCurrentSurfaceContainerAdded)}try{for(var C=DK(this._getContainerCollections(this._surface)),x=C.next();!x.done;x=C.next()){g=x.value;try{for(var E=(c=void 0,DK(g)),S=E.next();!S.done;S=E.next()){v=S.value;try{for(var P=(h=void 0,DK(v.items)),T=P.next();!T.done;T=P.next())this.getHandler(T.value).canvas=this.canvas}catch(A){h={error:A}}finally{try{T&&!T.done&&(d=P.return)&&d.call(P)}finally{if(h)throw h.error}}}}catch(M){c={error:M}}finally{try{S&&!S.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}g.add_collectionChanged(this._updateContainersFlatList)}}catch(D){a={error:D}}finally{try{x&&!x.done&&(l=C.return)&&l.call(C)}finally{if(a)throw a.error}}if(this._canvas.updateColors(),this.surface.addPropertyChanged(this._onSurfacePropertyChanged),this.contentAngle=this.surface.rotateAngle,this._updateAlignMargin(),this._eventManager.surfaceChangedEvent.notify(this._surface),this._canvas.redraw(),this.zoomMode=s$.bestFit,this.canvas.updateButtonGroups({onlyVisible:!1}),this.canvas.clearSelectedItemHandlers(),this.surface.containers.length>0){var I=this.surface.containers.firstOrDefault(function(e){return e.name===bU.MAIN_CONTAINER_NAME});this.userEditContainer=null!=I?I:this.surface.containers.get(0),this.surface.containers.add_itemAdded(this._onCurrentSurfaceContainerAdded)}},t.prototype._updateAlignMargin=function(){if(this.surface instanceof eU&&null!=this._canvas&&!this.surface.printAreas.empty){var e={left:0,right:0,top:0,bottom:0},t=this.surface.printAreas.selectMany(function(e){return e.safetyLines});if(t.length>0){var n=this.configuration.alignToSafetyLineName,r=FL.isEmpty(n)?null:t.firstOrDefault(function(e){return e.name==n});null==r&&(r=t.first());var i=r.getMargin();e.left=i.left,e.right=i.right,e.top=i.top,e.bottom=i.bottom}var o=this.surface.printAreas.get(0).bounds;e.left+=o.left,e.top+=o.top,e.right+=this.surface.width-o.right,e.bottom+=this.surface.height-o.bottom,this._canvas.leftMargin=e.left,this._canvas.rightMargin=e.right,this._canvas.topMargin=e.top,this._canvas.bottomMargin=e.bottom}},t.prototype._getContainerCollections=function(e){return[e.mockup.underContainers,e.mockup.overContainers,e.containers,this._safetyLinesHandler.safetyLinesContainers,this._watermarkHandler.watermarkContainers,this._gridHandler.gridContainers]},Object.defineProperty(t.prototype,"watermarkConfig",{get:function(){return this._watermarkHandler.watermarkConfig},set:function(e){this._watermarkHandler.watermarkConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){var e=this.canvas.getSelectedItemHandlers();return null!==e?e.select(function(e){return e.item}).toArray():null},set:function(e){if(null!=e){var t=e.map(this.canvas.handlerFactory.get);this.canvas.setSelectedItemHandlers(t)}else this.canvas.clearSelectedItemHandlers()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentItem",{get:function(){var e=this.canvas.currentItemHandler;return null!=e?e.item:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomConfig",{get:function(){return this._configuration?this._configuration.zoom:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previewMode",{get:function(){return this.canvas.previewMode},set:function(e){this.canvas.previewMode=e,this._updateContainersFlatList()},enumerable:!0,configurable:!0}),t.prototype._getDifference=function(e,t){return{added:t.reduce(function(t,n){return e.includes(n)||t.push(n),t},new Array),removed:e.reduce(function(e,n){return t.includes(n)||e.push(n),e},new Array)}},Object.defineProperty(t.prototype,"contentWidth",{get:function(){return this._getContentDimension(this.workspaceWidth,BL.screenDpi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentHeight",{get:function(){return this._getContentDimension(this.workspaceHeight,BL.screenDpi)},enumerable:!0,configurable:!0}),t.prototype._getContentDimension=function(e,t){var n=Wz(e,t)*this.zoom/BL.devicePixelRatio;return Math.ceil(n)},Object.defineProperty(t.prototype,"workspaceWidth",{get:function(){return this.canvas.workspaceWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workspaceHeight",{get:function(){return this.canvas.workspaceHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualSizeHorizontalScale",{get:function(){return BL.screenDpi/BL.devicePixelRatio/72},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualSizeVerticalScale",{get:function(){return BL.screenDpi/BL.devicePixelRatio/72},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modalBgClass",{get:function(){return this._modalBgClass},set:function(e){this._modalBgClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFormattingEnabled",{get:function(){return this._textFormattingEnabled},set:function(e){this._textFormattingEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clearSelectionOnDocumentClick",{get:function(){return this._clearSelectionOnDocumentClick},set:function(e){this._clearSelectionOnDocumentClick=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clearSelectionOnViewerClick",{get:function(){return this._clearSelectionOnViewerClick},set:function(e){this._clearSelectionOnViewerClick=e},enumerable:!0,configurable:!0}),t.prototype._renderContent=function(e){return e+='<div id="cvImage" style="',(e+="width:"+this.contentWidth+"px;height:"+this.contentHeight+"px;")+'position:absolute;left:0px;top:0px;z-index:1"/>'},t.prototype._setZoomMode=function(t){e.prototype._setZoomMode.call(this,t),WN(this.canvas.zoom,this.zoom)||(this.canvas.setZoom(this.zoom),this.canvas.redraw())},t.prototype.setZoom=function(t,n){if("number"==typeof t){this.zoomConfig&&(t>this.zoomConfig.max&&(t=this.zoomConfig.max),t<this.zoomConfig.min&&(t=this.zoomConfig.min)),t=e.prototype.setZoom.call(this,t,n);var r=this.canvas;return r.service.beginMultiCall(),r.setZoom(t),r.service.endMultiCall().finally(function(){return r.redraw()}),t}},t.prototype.getMaxZoom=function(){var t=e.prototype.getMaxZoom.call(this);return Math.min(t,this.canvas.calcPlatformLimitZoom())},t.prototype._onDocumentClick=function(t){if(!0!==this._ignoreDocumentClickOnce){if(e.prototype._onDocumentClick.call(this,t),this.clearSelectionOnDocumentClick&&!this._ignoreSelectionClick(t)){var n=this.canvas;n&&n.getSelectedItemHandlers().length>0&&(n.clearSelectedItemHandlers(),n.redraw())}}else this._ignoreDocumentClickOnce=!1},t.prototype._ignoreSelectionClick=function(e){return!!this.element.contains(e.target)||rU.isEventPathContainsClass(e,t.preventClickHandleClass)},t.prototype._onMouseMove=function(t){e.prototype._onMouseMove.call(this,t)},t.prototype._onTouch=function(t){e.prototype._onTouch.call(this,t),this._touchFlags.isScroll=!0,this._touchFlags.isScrollChecked=!1,this._touchFlags.gestureCenter=null,this._touchFlags.lastPinchEvent=null,this._touchFlags.initialCurrentLeft=this._holderElement.scrollLeft,this._touchFlags.initialCurrentTop=this._holderElement.scrollTop},t.prototype._onPinch=function(t){if(this._touchFlags.pinchStarted||(this._touchFlags.pinchStarted=!0),this.canvas.raisePinch(t),!t.defaultPrevented){null!==this._touchFlags.mouseDown.onTimeout&&(clearTimeout(this._touchFlags.mouseDown.timeout),this._touchFlags.mouseDown.onTimeout=null);var n=this._touchFlags;if(null==n.gestureCenter&&(n.gestureCenter=t.gesture.center),n.lastPinchEvent=t,n.isScroll?this.scrollingPosition=new MN(n.initialCurrentLeft+(n.gestureCenter.pageX-t.gesture.center.pageX),n.initialCurrentTop+(n.gestureCenter.pageY-t.gesture.center.pageY)):(!BL.IsIos()||BL.IosMajorVersion()>5)&&e.prototype._onPinch.call(this,t,!1),!n.isScrollChecked&&this.pinchZoomEnabled&&t.gesture.deltaTime>350){n.isScrollChecked=!0;var r=this._calcAngle(t.gesture.touches[0],t.gesture.touches[1],n.gestureCenter);this._isPinchByAngle(r,t.gesture.scale)&&this._isPinchByModule(t.gesture.touches[0],t.gesture.touches[1],n.gestureCenter)&&(n.isScroll=!1,e.prototype._onPinch.call(this,t,!1))}}},t.prototype._onRelease=function(t){var n=this._touchFlags;if(this._touchFlags.pinchStarted)return this._touchFlags.pinchStarted=!1,void this.canvas.raiseRelease();if(this.pinchZoomEnabled&&!n.isScrollChecked&&null!=n.lastPinchEvent){var r=this._calcAngle(n.lastPinchEvent.gesture.touches[0],n.lastPinchEvent.gesture.touches[1],n.gestureCenter);this._isPinchByAngle(r,n.lastPinchEvent.gesture.scale)&&e.prototype._onPinch.call(this,n.lastPinchEvent,!1)}e.prototype._onRelease.call(this,t)},t.prototype._isPinchByAngle=function(e,t){return BL.IsTouchIE()?e>=160||t<=.85||t>=1.3:e>=160&&(t<=.85||t>=1.3)},t.prototype._isPinchByModule=function(e,t,n){var r=[e.pageX-n.pageX,e.pageY-n.pageY],i=[t.pageX-n.pageX,t.pageY-n.pageY],o=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)),s=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)),a=[r[0]+i[0],r[1]+i[1]],l=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2));return l<o&&l<s},t.prototype._calcAngle=function(e,t,n){var r=[e.pageX-n.pageX,e.pageY-n.pageY],i=[t.pageX-n.pageX,t.pageY-n.pageY],o=(r[0]*i[0]+r[1]*i[1])/(Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2))*Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)));return 180*Math.acos(o)/Math.PI},t.prototype.initialize=function(n){var r=this,i=void 0===n?{}:n,o=i.ignore,s=i.intervalCheckLoop;if(void 0!==o&&!o){e.prototype.initialize.call(this,void 0===s?null:s),this._contentElements.push(this._imageCtx=this.element.querySelector("#cvImage")),this._whitespaceDiv=document.createElement("div"),this._whitespaceDiv.id="cvWhitespace",this._whitespaceDiv.tabIndex=-1,this._whitespaceDiv.style.position="absolute",this._whitespaceDiv.style.zIndex="1",this._whitespaceDiv.style.overflow="hidden",this._holderElement.appendChild(this._whitespaceDiv),this._updateWhitespace();var a=this._pointerEvents;this._whitespaceDiv.addEventListener("click",rU.createBoundedWrapper(this,this._onWorkspaceClick)),a.start.split(" ").forEach(function(e){r._holderElement.addEventListener(e,rU.createBoundedWrapper(r,r._onWhitespaceMouseDown))}),a.move.split(" ").forEach(function(e){r._holderElement.addEventListener(e,rU.createBoundedWrapper(r,r._onWhitespaceMouseMove))}),a.up.split(" ").forEach(function(e){r._holderElement.addEventListener(e,rU.createBoundedWrapper(r,r._onWhitespaceMouseUp))}),a.cancel.split(" ").forEach(function(e){r._holderElement.addEventListener(e,rU.createBoundedWrapper(r,r._onWhitespaceMouseUp))}),q$(this._whitespaceDiv,{behavior:{touchAction:"pan-x pan-y "}}).on("doubletap",this._onWorkspaceDoubleClick.bind(this));var l=this.canvas;l.addStyles();var c,u=this._contentCtx.firstChild;this._onCanvasStatusChangedDelegate||(this._onCanvasStatusChangedDelegate=this._onCanvasStatusChanged.bind(this),l.add_statusChanged(this._onCanvasStatusChangedDelegate)),l.status==l$.ready&&l.isInitialized?(l.setZoom(this.zoom,!0),l.addElement(u),l.redraw()):(c=(function(){l.status==l$.ready&&l.isInitialized&&(l.remove_statusChanged(c),l.remove_initialized(c),c=null,l.setZoom(this.getZoom(),!0),l.addElement(u),l.redraw())}).bind(this),l.add_statusChanged(c),l.add_initialized(c));var h=function(e,n){var r=n.currentItemHandler;return r instanceof b$&&r.editing?e.keyCode>=112&&e.keyCode<=123||!0===e.altKey:!(null!=e.code&&!rU.isEventPathContainsClass(e,t.preventKeyHandleClass)&&rU.getEventPath(e).includes(l.viewer.whitespaceDiv))||"ArrowLeft"!==e.code&&"ArrowUp"!==e.code&&"ArrowRight"!==e.code&&"ArrowDown"!==e.code&&"ShiftLeft"!==e.code&&"ShiftRight"!==e.code&&"Delete"!==e.code&&function(e){return!e.ctrlKey&&!e.metaKey||"KeyZ"!==e.code&&"KeyY"!==e.code}(e)};this._keyUpDelegate=function(e){h(e,l)||(l.raiseKeyUp(e),e.preventDefault())},this._keyDownDelegate=function(e){h(e,l)||(l.raiseKeyDown(e),e.preventDefault())},document.addEventListener("keyup",this._keyUpDelegate),document.addEventListener("keydown",this._keyDownDelegate),this._touchFlags.mouseDown={onTimeout:null},this._mouseDownDelegate=function(e,t){return r._setActiveElementIeFix(),"touchstart"===t.type||"MSPointerDown"===t.type||"pointerDown"===t.type?("touchstart"===t.type&&(r._ignoreMouseDown=!0,null==l||l.raiseTouchStart(t)),null!=r._ignoreMouseDownTimeout&&clearTimeout(r._ignoreMouseDownTimeout),r._ignoreMouseDownTimeout=setTimeout(function(){this._ignoreMouseDown=!1},300),r._touchFlags.mouseDown.onTimeout=function(){l.raiseMouseDown(t)}):r._ignoreMouseDown||l.raiseMouseDown(t),!0},this.add_workspaceMouseDown(this._mouseDownDelegate),this._doubleClickDelegate=function(e,t){return r._setActiveElementIeFix(),l.raiseDoubleClick(t),!0},this.add_workspaceDoubleClick(this._doubleClickDelegate),this._mouseMoveDelegate=function(e,t){return null!==r._touchFlags.mouseDown.onTimeout&&(clearTimeout(r._touchFlags.mouseDown.timeout),r._touchFlags.mouseDown.onTimeout(),r._touchFlags.mouseDown.onTimeout=null),l.raiseMouseMove(t),!0},this.add_workspaceMouseMove(this._mouseMoveDelegate);var d=!1;this._mouseUpDelegate=function(e,t){if(BL.IsTouchDevice()){if(d)return;d=!0,setTimeout(function(){return d=!1},200)}return null!==r._touchFlags.mouseDown.onTimeout&&(clearTimeout(r._touchFlags.mouseDown.timeout),r._touchFlags.mouseDown.onTimeout(),r._touchFlags.mouseDown.onTimeout=null),l.raiseMouseUp(t),!0},this.add_workspaceMouseUp(this._mouseUpDelegate),this._resizeDelegate=this._onResize.bind(this),l.add_workspaceSizeChanged(this._resizeDelegate),this._resizeCheckIntervalId=this._intervalCheckLoop.start({checkFunction:function(){return r._devicePixelRatio!==BL.devicePixelRatio},onChange:function(){r._devicePixelRatio=BL.devicePixelRatio,r._onResize(r,!1)}})}},t.prototype._onWorkspaceClick=function(t){e.prototype._onWorkspaceClick.call(this,t);var n=new MN(t.x,t.y),r=this.canvas.getItemHandlersByHitTest(n);null!=r[0]&&r[0].dispatchClickEvent(null)},t.prototype._setActiveElementIeFix=function(){if(BL.IsIE()){var e=this.element;try{if(document.activeElement!==e&&e.setActive){if(!this._setActiveThrowsException)try{e.setActive(!0)}catch(n){this._setActiveThrowsException=!0}if(this._setActiveThrowsException){var t=null;try{t=this._getCurrentScrollPosition()}catch(n){}e.focus(),t&&window.parent.scrollTo(t.x,t.y)}}}catch(n){console.log(n)}}},t.prototype._getCurrentScrollPosition=function(){var e,t,n=null!=window.parent?window.parent:window;return void 0!==n.pageXOffset?(e=n.pageXOffset,t=n.pageYOffset):void 0!==n.scrollX?(e=n.scrollX,t=n.scrollY):document.documentElement&&void 0!==document.documentElement.scrollLeft?(e=document.documentElement.scrollLeft,t=document.documentElement.scrollTop):(e=document.body.scrollLeft,t=document.body.scrollTop),{x:e,y:t}},t.prototype._updateWhitespace=function(){if(null!=this._whitespaceDiv){var e=90===this._contentAngle||270===this._contentAngle,t=e?this.contentHeight:this.contentWidth,n=e?this.contentWidth:this.contentHeight,r=this._getViewportLocation(),i=this.width,o=this.height,s=this.rulerEnabled?this.rulerWidth:0,a=this.scrollBarWidth,l=this.scrollBarsStyle===i$.always,c=this.scrollBarsStyle===i$.auto,u=l||c&&n>o-s,h=l||c&&t>i-s,d=(u=u||h&&c&&n>o-s-a)?a:0,p=(h=h||u&&c&&t>i-s-a)?a:0;this._whitespaceDiv.style.left=Math.min(r.x,s)+"px",this._whitespaceDiv.style.top=Math.min(r.y,s)+"px",this._whitespaceDiv.style.width=Math.max(i-s-d,t)+"px",this._whitespaceDiv.style.height=Math.max(o-s-p,n)+"px",c&&(this._holderElement.style.overflowX=h?"auto":"hidden",this._holderElement.style.overflowY=u?"auto":"hidden"),this.canvas.updateButtonGroups()}},t.prototype._updateViewport=function(){e.prototype._updateViewport.call(this),this._updateWhitespace()},t.prototype._onWhitespaceDoubleClick=function(e){var t=this._useWorkspaceCoords(e);this._workspaceDoubleClickEvent.notify(this,{x:t.x,y:t.y})},t.prototype._onWhitespaceMouseDown=function(e){if(!this._isManyTouches(e)){var t=this._useWorkspaceCoords(e);this._workspaceMouseDownEvent.notify(this,t),BL.IsTouchIE()||this._whitespaceDiv.setCapture()}},t.prototype._onWhitespaceMouseUp=function(e){if(!this._isManyTouches(e)){var t=this._useWorkspaceCoords(e);this._workspaceMouseUpEvent.notify(this,t),this._whitespaceDiv.releaseCapture()}},t.prototype._onWhitespaceMouseMove=function(e){if(this._isManyTouches(e))e.preventDefault();else{var t=this._useWorkspaceCoords(e);this._workspaceMouseMoveEvent.notify(this,t)}},t.prototype._getElementForCursor=function(){return null!=this._whitespaceDiv?this._whitespaceDiv:e.prototype._getElementForCursor.call(this)},t.prototype._onResize=function(t,n){e.prototype._onResize.call(this,t,n);var r=this.canvas;r.service.beginMultiCall(),r.setZoom(this.zoom,void 0,{force:!0,updateButtonGroup:n}),r.service.endMultiCall().finally(function(){return r.redraw()})},t.prototype._onCanvasStatusChanged=function(e){this.canvas.status==l$.busy?this.lockViewer():this.unlockViewer()},t.prototype.lockViewer=function(){this._isViewerLocked=!0;var e=this.element,t=document.getElementById(this.id+"_modalBg");if(!t){var n=(t=document.createElement("div")).style;n.position="absolute",n.top="0",n.left="0",this._modalBgClass?t.className=this._modalBgClass:(n.backgroundPosition="50% 50%",n.backgroundColor="#000000",n.opacity="0.4",n.filter="alpha(opacity=40)",n.zIndex="1000"),t.id=this.id+"_modalBg",e.offsetParent&&e.offsetParent.appendChild(t),n.width="100%",n.height="100%",n.bottom="0",n.right="0"}t.style.display="block"},t.prototype.unlockViewer=function(){this._isViewerLocked=!1;var e=document.getElementById(this.id+"_modalBg");e&&(e.style.display="none")},t.prototype.contentToWhitespaceRectangle=function(e){var t=this.rulerEnabled?this.rulerWidth:0,n=this._getViewportLocation();return new FN(e.left+n.x-t,e.top+n.y-t,e.width,e.height)},Object.defineProperty(t.prototype,"eventManager",{get:function(){return this._eventManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"history",{get:function(){return this._history},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userEditContainer",{get:function(){return this._userEditContainer},set:function(e){var t=this;if(this._userEditContainer!=e){this.canvas.clearSelectedItemHandlers(),this._userEditContainer=e;var n=this.canvas;if(null!=n){var r=this.surface.containers,i=[],o=[],s=r.where(function(e){return e.renderingType!==Tj.Normal}).toArray();null!=this._userEditContainer?(i=r.where(function(e){return e!=t._userEditContainer&&e.renderingType!==Tj.Normal}).toArray(),o=s.slice(s.findIndex(function(e){return t._userEditContainer.id===e.id})+1,s.length)):(i=s,o=s),n.disabledLayers=i.map(function(e){return n.layers.getLayerByContainerId(e.id)}),n.maskedLayers=o.map(function(e){return n.layers.getLayerByContainerId(e.id)}),n.redraw()}this._eventManager.userEditContainerChangedEvent.notify(this._userEditContainer)}},enumerable:!0,configurable:!0}),t.prototype.getUserEditSurface=function(){return this.surface},t.prototype.getUserEditPrintArea=function(){return this.surface.printAreas.get(0)},Object.defineProperty(t.prototype,"variableItemHelper",{get:function(){return this._variableItemHelper},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"productThemeManager",{get:function(){return this._productThemeManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"productHandler",{get:function(){return this._productHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsDataApplier",{get:function(){return this._itemsDataApplier},enumerable:!0,configurable:!0}),t.prototype.getHandler=function(e){return this._canvas.handlerFactory.get(e)},t.prototype.waitUpdate=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){switch(e.label){case 0:return[4,this._canvas.waitUpdate()];case 1:return e.sent(),[2]}})},new((t=void 0)||(t=Promise))(function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},t.prototype.getParentPosition=function(e){var t=this.element;return{top:e.offsetTop-t.scrollTop,left:e.offsetLeft-t.scrollLeft}},t.prototype.dispose=function(){var t,n,r,i;null!=this._resizeCheckIntervalId&&this._intervalCheckLoop.stop(this._resizeCheckIntervalId);var o=this.canvas;o&&(this._mouseUpDelegate&&(this.remove_workspaceMouseUp(this._mouseUpDelegate),this._mouseUpDelegate=null),this._mouseDownDelegate&&(this.remove_workspaceMouseDown(this._mouseDownDelegate),this._mouseDownDelegate=null),this._mouseMoveDelegate&&(this.remove_workspaceMouseMove(this._mouseMoveDelegate),this._mouseMoveDelegate=null),this._doubleClickDelegate&&(this.remove_workspaceDoubleClick(this._doubleClickDelegate),this._doubleClickDelegate=null),this._zoomDelegate&&(this.remove_zoomed(this._zoomDelegate),this._zoomDelegate=null),this._onCanvasStatusChangedDelegate&&(o.remove_statusChanged(this._onCanvasStatusChangedDelegate),delete this._onCanvasStatusChangedDelegate),this._resizeDelegate&&(o.remove_workspaceSizeChanged(this._resizeDelegate),delete this._resizeDelegate),o.dispose()),null===(t=this._eventManager)||void 0===t||t.dispose(),null===(n=this._safetyLinesHandler)||void 0===n||n.dispose(),this._surface.containers.remove_itemAdded(this._onCurrentSurfaceContainerAdded),null===(r=this._CanvasViolationVisualizer)||void 0===r||r.dispose(),null===(i=this._violationService)||void 0===i||i.dispose(),e.prototype.dispose.call(this)},t.prototype._refresh=function(){this._refreshTimer&&window.clearTimeout(this._refreshTimer),this._needToRefresh=!1},t.preventKeyHandleClass="preventCanvasKeyHandle",t.preventClickHandleClass="preventCanvasClickHandle",t}(J$),LK=n("f/Cj");const BK=["viewer"];function NK(e,t){1&e&&Ps(0,"div",3)}let jK=(()=>{class e{constructor(e){this._eventManager=e,this.alignItems=new x,this.changeGroupType=new x,this.gridEnabled=new x,this.previewEnabled=new x,this.rulersEnabled=new x,this.$containerCollectionChanged=this._fromEventManager("ContainerCollectionChanged"),this.$selectedItemsChanged=this._fromEventManager("SelectedItemChanged"),this.$currentItemChanged=this._fromEventManager("CurrentItemChanged"),this.$itemCollectionChanged=this._fromEventManager("ItemCollectionChanged"),this.$placeholderSelectClick=this._fromEventManager("SelectButtonClick"),this.$surfaceCollectionChanged=this._fromEventManager("SurfaceCollectionChanged"),this.$itemAdded=this._fromEventManager("ItemAdded"),this.$itemRemoved=this._fromEventManager("ItemRemoved"),this.$snapshotLoaded=this._fromEventManager("SnapshotLoadedEvent"),this.$mouseSelectPixel=this._fromEventManager("MouseSelectPixelFinished"),this.$snapshotLoaded=this._fromEventManager("SnapshotLoadedEvent"),this.$enteredEditMode=this._fromEventManager("EnteredEditMode"),this.$exitedEditMode=this._fromEventManager("ExitedEditMode")}get $alignItems(){return this.alignItems.asObservable()}get $changeGroupType(){return this.changeGroupType.asObservable()}get $girdEnabled(){return this.gridEnabled.asObservable()}get $previewEnabled(){return this.previewEnabled.asObservable()}get $rulersEnabled(){return this.rulersEnabled.asObservable()}_fromEventManager(e){return new _(t=>this._eventManager[`add${e}`](e=>t.next(e)))}}return e.\u0275fac=function(t){return new(t||e)(sr(U$))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),HK=(()=>{class e{constructor(){this.availableFontsByPsName={arialmt:{postScriptName:"ArialMT",style:"Regular",family:"Arial",default:!0,system:!1},"arial-boldmt":{postScriptName:"Arial-BoldMT",style:"Bold",family:"Arial",default:!1,system:!1},"arial-bolditalicmt":{postScriptName:"Arial-BoldItalicMT",style:"Bold Italic",family:"Arial",default:!1,system:!1},"arial-italicmt":{postScriptName:"Arial-ItalicMT",style:"Italic",family:"Arial",default:!1,system:!1},"arial-black":{postScriptName:"Arial-Black",style:"Black",family:"Arial",default:!1,system:!1}}}getCssFontFamily(e){return`_cc_family_${e.toLocaleLowerCase()}`}getCssPsName(e){return`_cc_psname_${e}`}recognizeStyleByPsName(e){const t=this.availableFontsByPsName[e].style.toLocaleLowerCase();return"bold"===t?mX.Bold:"italic"===t?mX.Italic:"bold italic"===t?mX.BoldItalic:"regular"===t?mX.Regular:mX.Other}findSuitableFontParams(e,t,n){let r="arialmt";return t&&n?r="arial-bolditalicmt":t?r="arial-boldmt":n&&(r="arial-italicmt"),{postScriptName:r,fauxBold:!1,fauxItalic:!1}}findOriginalFamilyName(e){return"Arial"}findOriginalPsName(e){return e.toLocaleLowerCase()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const zK={provide:FK,useFactory:function(e){const t=document.createElement("div"),n=window[Symbol.for("viewerConfig")]||{},r=new FK(Object.assign({holderElement:t},n)),i=window[Symbol.for("textEditor")]||{};if(r.frontEndTextRenderingEnabled){const t={onRuntimeInitialized:()=>r.setTextWhizzModule(t)};LK(t),r.initTextEditor(e,i.useSimpleFontList||!1,i.mode||pL.Default)}return t.style.height="100%",window.viewer=r,r},deps:[HK]},VK={provide:QY,useFactory:function(e){return e.canvas},deps:[FK]},UK={provide:Xq,useFactory:function(e){return e.commandManager},deps:[FK]},WK={provide:U$,useFactory:function(e){return e.eventManager},deps:[FK]},XK={provide:sK,useFactory:function(e){return e.history},deps:[FK]},GK=new Xn("VIEWER_CONTAINER"),qK={provide:GK,useFactory:function(e){return e._viewerElement.parentElement},deps:[FK]};let $K=(()=>{class e{constructor(e,t,n){this._viewer=t,this._daEventsSrv=n,this.itemAdded=new Xl,this.itemRemoved=new Xl,this.selectPixel=new Xl,this.selectItems=new Xl,this.unselectItems=new Xl,this.contextMenu=new Xl,this.subscriber=new x,this._container=e,this._daEventsSrv.$itemAdded.pipe(Hp(this.subscriber)).subscribe(e=>this.itemAdded.emit(e.item)),this._daEventsSrv.$itemRemoved.pipe(Hp(this.subscriber)).subscribe(e=>this.itemRemoved.emit(e.item)),this._daEventsSrv.$mouseSelectPixel.pipe(Hp(this.subscriber)).subscribe(e=>this.selectPixel.emit(e)),this._daEventsSrv.$selectedItemsChanged.pipe(xd(e=>!!e.length)).subscribe(e=>this.selectItems.emit(e)),this._daEventsSrv.$selectedItemsChanged.pipe(xd(e=>!e.length)).subscribe(()=>this.unselectItems.emit())}set configuration(e){this.configure(e)}set surface(e){this._viewer.surface=e}set surfaceContainer(e){this._viewer.userEditContainer=e}ngOnInit(){return ad(this,void 0,void 0,function*(){this.container.nativeElement.appendChild(this._container)})}ngOnDestroy(){this.subscriber.next(null),this.subscriber.complete(),this.subscriber.unsubscribe()}configure(e){var t,n,r,i,o,s,a;if(e){if(Object.assign(this._viewer,e.extras),Object.assign(this._viewer.canvas,e.canvas),this._viewer.canvas.handleButtonCssClass=null===(t=e.canvas)||void 0===t?void 0:t.handleButtonCssClass,this._viewer.canvas.doneButtonCssClass=null===(n=e.canvas)||void 0===n?void 0:n.doneButtonCssClass,this._viewer.canvas.selectImageButtonCssClass=null===(r=e.canvas)||void 0===r?void 0:r.selectImageButtonCssClass,this._viewer.canvas.loadingImageUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAUCAYAAABmvqYOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAwVJREFUeNqclE9oE1EQxmeTLGnatGtocqhR04MeClUMVWupJyO5iBTBgAcvIojiqUUoeNOLh0I9Fk9qwYsHL+qhiOCf5CJiMFIUQqxJiAk2aU1MN2k3TfxmfRvW2NjYBz925+3svHnfzHvSzMwM7WBcB1/A4385WToMtgvMmuxb4KzJnt3qJ1uHwV8AD3gPTmqa9hHP3bIs38XzOzgH9oLQ/wT3gSS4AW4j6JTL5dLsdrvKu15fXz+8urpKWITtq+IfB6hsF5y/fQUPwIjT6cz7fL5WH5XnYrGYarVan4g6TADndpp7wTMwZLFY8oODg/oksv8Lv99P8KmyL3jaSUFZjknQjUGJRIKSySRVKhUqFoukqqoemEe1WiVeHHY3zPPbaW4RBbyE7arIijPTg7ndbgoEArpTJBKhXC7HmpPD4WAf1n4aPATf2mXO28uBoCRJalNgZDs2NtZ0Gh0dbWbPo6urq4jHBZDW5WwTfBFcFE6yMckZokOaTtls9o+fhCyvwGX+1yzLUSHHB24lBJLgfGRzc3Mf7B/0W3yan5+n8fFxwo4oHo/rc6ZCd+O/+zDftWp+DB+nuYeh80u8vwZDcP6MbOuY13fJ2obDYT2Y0UG8ABfbUM9cUG56tV6vLwwPDydsNn09DcVRUqlUfz6fH2Ef2M9l1kUE48EHCIeK1tbWKJPJKJiXxc73c7dZg8FgDS8NfDjUaDQ0bis8rRsbG+W+vj5ruVxOYuE7tVrtIJ51o3PgQ5CMlpeXaWVlRUEx7wmte8EjI/Mz4Dgy1gqFAoVCIfJ6vRSNRuV0Oh1XFEVGu00gaRekKAEX11IU2g3teUPcJT+55cFU2z5HMLNpdMoA2MPdZjQKeANOCLsB6lvdH3wn+LHt05BGm5ubI4/Ho2vZ09NDS0tLA8iM+15radVFky21u5y4oDeh9QK0tHPm0Jt1pFKpxAenjOCfRJGMcaqTe9omrkcJBbqGqk/zcYeOWSzWi7kDCKzQDodZ87d82aMDmocIwa/gvR8UdhL8lwADABtmSFbWE/QHAAAAAElFTkSuQmCC",this._viewer.safetyLinesHandler.visible=!0,e.configuration&&(this._viewer.configuration=e.configuration),null===(i=null==e?void 0:e.handlersConfig)||void 0===i?void 0:i.gridHandlerConfig){const{horizontalColor:t,enabled:n,lineWidthPx:r,stepX:i,stepY:o,verticalColor:s}=e.handlersConfig.gridHandlerConfig;this._viewer.gridHandler.setConfig({horizontalColor:t,enabled:n,lineWidthPx:r,stepY:o,stepX:i,verticalColor:s},{unit:dL.Point})}(null===(o=null==e?void 0:e.handlersConfig)||void 0===o?void 0:o.snapLinesHandler)&&this._viewer.canvas.snapLinesHandler.setConfiguration(e.handlersConfig.snapLinesHandler),null!=(null===(s=e.zoom)||void 0===s?void 0:s.maxZoom)&&this._viewer.setMaxZoom(e.zoom.maxZoom),null!=(null===(a=e.zoom)||void 0===a?void 0:a.minZoom)&&(this._viewer.minZoom=e.zoom.minZoom)}}emitContext(e){this.contextMenu.emit({x:e.clientX,y:e.clientY})}}return e.\u0275fac=function(t){return new(t||e)(ws(GK),ws(FK),ws(jK))},e.\u0275cmp=Ue({type:e,selectors:[["au-da-viewer"]],viewQuery:function(e,t){if(1&e&&ic(BK,3),2&e){let e;rc(e=sc())&&(t.container=e.first)}},inputs:{configuration:"configuration",surface:"surface",surfaceContainer:"surfaceContainer",disable:"disable"},outputs:{itemAdded:"itemAdded",itemRemoved:"itemRemoved",selectPixel:"selectPixel",selectItems:"selectItems",unselectItems:"unselectItems",contextMenu:"contextMenu"},decls:3,vars:1,consts:[[1,"viewer",3,"contextmenu"],["viewer",""],["class","overlay",4,"ngIf"],[1,"overlay"]],template:function(e,t){1&e&&(Es(0,"div",0,1),Ds("contextmenu",function(e){return t.emitContext(e)}),Ss(),vs(2,NK,1,0,"div",2)),2&e&&(Ui(2),Cs("ngIf",t.disable))},directives:[uh],styles:[".viewer{height:100%;width:100%;background:#f2f2f2}#cvWhitespace{outline:none}.overlay{position:absolute;width:100%;height:100%;top:0;z-index:1}"],encapsulation:2}),e})();const YK={provide:vU,useFactory:function(){return new vU}};let KK=(()=>{class e{constructor(e,t){this._history=e,this._daEvtSrv=t,this._historyChanged=new x,this._undo=new x,this._redo=new x,this._history.addChanged(()=>this._historyChanged.next())}get $snapshotLoaded(){return this._daEvtSrv.$snapshotLoaded}get $historyChanged(){return this._historyChanged.asObservable()}get $undo(){return this._undo.asObservable()}get $redo(){return this._redo.asObservable()}get canUndo(){return this._history.canUndo}get canRedo(){return this._history.canRedo}undo(){this._history.undo(),this._undo.next()}redo(){this._history.redo(),this._redo.next()}clear(){this._history.clear()}pause(){this._history.pause()}resume(){this._history.resume()}addSnapshot(){this._history.addSnapshot()}}return e.\u0275fac=function(t){return new(t||e)(sr(sK),sr(jK))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const QK={name:"millimeters",shortName:"mm",ratio:2.835,accuracy:1},ZK={name:"centimeters",shortName:"cm",ratio:28.346,accuracy:2},JK={name:"inch",shortName:"in",ratio:72,accuracy:4},eQ={name:"point",shortName:"pt",ratio:1,accuracy:0},tQ={name:"percent",shortName:"%",ratio:.01,accuracy:0},nQ={name:"degree",shortName:"\xb0",ratio:1,accuracy:0},rQ=e=>e instanceof Cz,iQ=e=>{const t=new Map([[QK.shortName,QK],[ZK.shortName,ZK],[JK.shortName,JK],[eQ.shortName,eQ],[tQ.shortName,tQ],[nQ.shortName,nQ]]);return Object.assign({},t.get(e))},oQ=new Xn("CONFIG_SRV_TOKEN");let sQ=(()=>{class e{constructor(e,t,n,r,i,o,s){this._jsonSerializer=e,this._viewer=t,this._cm=n,this._canvas=r,this._daEvtSrv=i,this._cnfSrv=o,this._httpClient=s,this._cnfSrv.$designAtomsConfig.subscribe(e=>this.cnf=e)}setItemAngle(e,t){if(t%=360,rQ(e)){this._canvas.pauseRedraw();const n=e;n.items.forEach(e=>e.transform.setAngle(t)),n.transform.setAngle(t),this._canvas.continueRedraw()}else e.transform.setAngle(t),(e=>e instanceof FV)(e)&&this.updatePlaceholderContent(e);return t}updatePlaceholderContent(e){const t=this._viewer.getHandler(e),n=e.content;if(n){const r=this._viewer.getHandler(n);t.content=r,r.updateRectangle(!1,e.contentResizeMode,t)}this._canvas.redraw()}updateLinkedPlaceholders(e,t,n){t&&e.forEach(e=>{var r,i;const o=(null===(r=e.content)||void 0===r?void 0:r.source.id)!==(null===(i=n)||void 0===i?void 0:i.source.id);e.linkId===t&&o&&(e.content=n?n.clone():n,this.updatePlaceholderContent(e))})}addContentToPlaceholder(e,t){return ad(this,void 0,void 0,function*(){if(e)try{const n=yield this.createItem(e,"Image");return yield this._cm.execute(GG.setImageItem,{item:n,targetItem:t}),n}catch(n){throw n}})}bindPlaceholderToLinkGroup(e,t){var n,r;const i=t.linkId,o=e.filter(e=>e.linkId===i&&e!==t);if(o.length){const e=o[0].content;(null===(r=null===(n=t.content)||void 0===n?void 0:n.source)||void 0===r?void 0:r.id)!==e.source.id&&(t.content=e?e.clone():e,this.updatePlaceholderContent(t))}}checkAlignment(e){const{width:t,height:n}=this._viewer.surface,r=[null,null];if(e.parentGroupItem){const{top:t,left:n,center:i,bottom:o,right:s}=this._viewer.getHandler(e.parentGroupItem).bounds,{top:a,left:l,center:c,bottom:u,right:h}=this._viewer.getHandler(e).bounds;t===a&&(r[0]="top"),o===u&&(r[0]="bottom"),i.y===c.y&&(r[0]="verticalCenter"),n===l&&(r[1]="left"),s===h&&(r[1]="right"),i.x===c.x&&(r[1]="horizontalCenter")}else{const{top:i,left:o,center:s,bottom:a,right:l}=this._viewer.getHandler(e).bounds;0===o&&(r[1]="left"),l===t&&(r[1]="right"),s.y===n/2&&(r[0]="verticalCenter"),0===i&&(r[0]="top"),a===n&&(r[0]="bottom"),s.x===t/2&&(r[1]="horizontalCenter")}return r}alignItems(e,t){return ad(this,void 0,void 0,function*(){t?t[0].parentGroupItem?yield this._cm.execute(GG.alignIntoGroup,{group:t[0].parentGroupItem,items:t,align:e}):yield this._cm.execute(GG.alignItems,{items:t,align:e}):yield this._cm.execute(GG.groupAlign,{align:e}),this._daEvtSrv.alignItems.next({items:t,align:e})})}moveItemsToLayer(e,t){return ad(this,void 0,void 0,function*(){t.forEach(t=>t.parentGroupItem?(t.parentGroupItem.items.remove(t),void e.items.add(t)):t.parentContainer?(t.parentContainer.items.remove(t),void e.items.add(t)):void 0),this.selectItems(t)})}moveItemsToPage(e,t){return ad(this,void 0,void 0,function*(){const n=t.map(e=>e.clone());yield this._cm.execute(XG.addItems,{items:n,surface:e.parentComponent,targetContainer:e}),yield this._cm.execute(GG.deleteItems,{items:t})})}switchItemLock(e){return ad(this,void 0,void 0,function*(){if(1===e.length){const[t]=e;t.locked=!t.locked,t.locked&&(yield this.removeFromSelection([t]))}else e.map(e=>e.locked).reduce((e,t)=>e&&t)?e.forEach(e=>e.locked=!1):(e.forEach(e=>e.locked=!0),yield this._cm.execute(qG.clearSelection))})}switchItemVisible(e){return ad(this,void 0,void 0,function*(){if(1===e.length){const[t]=e;t.visible=!t.visible,t.visible||(yield this.removeFromSelection([t]))}else e.map(e=>!e.visible).reduce((e,t)=>e&&t)?(e.forEach(e=>e.visible=!1),yield this._cm.execute(qG.clearSelection)):e.forEach(e=>e.visible=!0)})}selectItems(e){return ad(this,void 0,void 0,function*(){yield this._cm.execute(qG.clearSelection),yield this._cm.execute(qG.selectItems,{items:e})})}addToSelection(e){return ad(this,void 0,void 0,function*(){yield this._cm.execute(qG.selectItems,{items:e,multiselection:!0})})}changeItemIndex(e,t,n){n.items.move(e,t),this._viewer.productHandler.redraw()}resizeItem(e,t,n){return ad(this,void 0,void 0,function*(){yield this._cm.execute(WG.resize,{target:[e],width:t,height:n,defaultOptions:{resize:SW.Arbitrary}})})}moveItemToPoint(e,t){return ad(this,void 0,void 0,function*(){const{x:n,y:r}=t,{left:i,top:o}=this._viewer.getHandler(e).bounds;yield this._cm.execute(GG.translateItems,{translateX:n-i,translateY:r-o,items:[e]})})}removeFromSelection(e){return ad(this,void 0,void 0,function*(){const t=e.filter(e=>this._viewer.selectedItems.includes(e));if(t.length>0){const e=this._viewer.selectedItems.filter(e=>!t.includes(e));yield this._cm.execute(qG.clearSelection),yield this._cm.execute(qG.selectItems,{items:e})}})}highlightItem(e,t){const n=this._viewer.getHandler(e);this._canvas.showHover(n.rectangle,t||e.name)}showSelection(e,t){const n=this._viewer.getHandler(e);this._canvas.showSelection(n.rectangle,t)}hideSelection(){this._canvas.hideSelection()}lowlightItem(){this._canvas.hideHover()}createItem(e,t){return ad(this,void 0,void 0,function*(){try{const n=new FormData;e instanceof File?(n.append("sourceType","File"),n.append("sourceFile",e,e.name)):e.sourceOwnerId?(n.append("sourceType","PrivateImageStorage"),n.append("sourceId",e.sourceId),n.append("sourceOwnerId",e.sourceOwnerId)):(n.append("sourceType","ImageStorage"),n.append("sourceId",e.sourceId));const r=t?{itemType:t}:{},i=yield this._httpClient.post(`${this.cnf.baseUrl}/api/atoms/v1/itemCreator`,n,{params:new Fb({fromObject:Object.assign({tenantId:this.cnf.tenantId.toString()},r)})}).toPromise();return this._jsonSerializer.productParser.parseItem(i)}catch(n){throw console.warn(n),n}})}convertToLayout(e){return ad(this,void 0,void 0,function*(){const t=yield this._cm.execute(GG.convertGroupIntoLayout,{items:e});this._daEvtSrv.changeGroupType.next({items:t,type:_V.type})})}convertToGroup(e){return ad(this,void 0,void 0,function*(){const t=yield this._cm.execute(GG.convertLayoutIntoGroup,{items:e});this._daEvtSrv.changeGroupType.next({items:t,type:Cz.type})})}isBelongToItem(e){return!!this._viewer.productHandler.findItemByHitTest(e.x,e.y)}isBelongToSelection(e){const{x:t,y:n}=this._viewer.pageToWorkspacePoint(e.x,e.y),r=this._viewer.canvas._selection.visibleRectangle;if(!r)return!1;const{bounds:{height:i,width:o},location:{x:s,y:a}}=r;return t>=s&&t<=s+o&&n>=a&&n<=a+i}}return e.\u0275fac=function(t){return new(t||e)(sr(vU),sr(FK),sr(Xq),sr(QY),sr(jK),sr(oQ),sr(Gb))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),aQ=(()=>{class e{constructor(e){this._confSrv=e,this._subscriber=new x,this._confSrv.$unit.subscribe(e=>this._configUnit=e)}ngOnDestroy(){this._subscriber.next(),this._subscriber.complete(),this._subscriber.unsubscribe()}transform(e,t){return this.value2unit(e,t)}value2unit(e,t){if(!t)return e;const n=iQ(t);return n?e/n.ratio:this._configUnit.shortName===t?e/this._configUnit.ratio:e}unit2value(e,t){if(!t)return e;const n=iQ(t);return n?n.ratio*e:this._configUnit.shortName===t?this._configUnit.ratio*e:e}}return e.\u0275fac=function(t){return new(t||e)(ws(oQ))},e.\u0275pipe=Ke({name:"unit2",type:e,pure:!0}),e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),lQ=(()=>{class e{constructor(e,t){this._viewer=e,this._daEvtSrv=t}get gridEnabled(){return this._viewer.gridHandler.visible}get previewEnabled(){return this._viewer.previewMode}get rulersEnabled(){return this._viewer.rulerEnabled}switchGrid(){this._viewer.gridHandler.visible=!this._viewer.gridHandler.visible,this._daEvtSrv.gridEnabled.next(this._viewer.gridHandler.visible)}enableGrid(){this._viewer.gridHandler.visible||(this._viewer.gridHandler.visible=!0,this._daEvtSrv.gridEnabled.next(!0))}disableGrid(){this._viewer.gridHandler.visible&&(this._viewer.gridHandler.visible=!1,this._daEvtSrv.gridEnabled.next(!1))}switchRulers(){this._viewer.rulerEnabled=!this._viewer.rulerEnabled,this._daEvtSrv.rulersEnabled.next(this._viewer.rulerEnabled)}enableRulers(){this._viewer.rulerEnabled||(this._viewer.rulerEnabled=!0,this._daEvtSrv.rulersEnabled.next(!0))}disableRulers(){this._viewer.rulerEnabled&&(this._viewer.rulerEnabled=!1,this._daEvtSrv.rulersEnabled.next(!1))}switchPreview(){this._viewer.previewMode=!this._viewer.previewMode,this._daEvtSrv.previewEnabled.next(this._viewer.previewMode)}enablePreview(){this._viewer.previewMode||(this._viewer.previewMode=!0,this._daEvtSrv.previewEnabled.next(!0))}disablePreview(){this._viewer.previewMode&&(this._viewer.previewMode=!1,this._daEvtSrv.previewEnabled.next(!1))}}return e.\u0275fac=function(t){return new(t||e)(sr(FK),sr(jK))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),cQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[YK,zK,VK,UK,WK,XK,qK,sQ,jK,KK,lQ,aQ,HK],imports:[[aw,Oh]]}),e})();const uQ={message:"Attach a schema that matches the elements of a design.",title:"The design does not contain any data schema",secondMessage:"If you are not an administrator who configures the editor, please contact the website support team."},hQ={message:"Make sure that the design contains elements for each field in a schema.",title:"The design does not match the attached data schema",secondMessage:"If you are not an administrator who configures the editor, please contact the website support team."},dQ={message:"Make sure that they are using the same data schema.",title:"The data set for the prefill options is not compatible with this design",secondMessage:"If you are not an administrator who configures the editor, please contact the website support team."},pQ={message:"Someone might delete a design or moved it to another location. Reconfigure the editor and select this item one more time.",title:"Design not found",secondMessage:"If you are not an administrator who configures the editor, please contact the website support team."},fQ={message:"The editor failed to fetch the data from the server. Note the time when you notice this error and send us a screenshot of this problem. We will try to get it to work as soon as possible.",title:"Something went wrong"},mQ={message:"Someone might delete a data set or moved it to another location. Reconfigure the editor and select this item one more time.",title:"Data set not found",secondMessage:"If you are not an administrator who configures the editor, please contact the website support team."},gQ={message:"Something went wrong and we could not get your credentials.",title:"Unauthorized",secondMessage:"Try to login again and back to the page."},yQ=new Xn("API_BASE_URL");class _Q{constructor(){this.apiUrl="http://localhost:54220",this.apiKey="ApiKey",this.authorizationToken=null}getAuthorizationToken(){return ad(this,void 0,void 0,function*(){return this.authorizationToken})}setAuthorizationToken(e){this.authorizationToken=e}}let vQ=(()=>{class e extends class{constructor(e){this.configuration=e}transformOptions(e){return ad(this,void 0,void 0,function*(){const t=yield this.configuration.getAuthorizationToken();return e.headers=null!=t?e.headers.append("authorization","Bearer "+t):e.headers.append("X-API-Key",this.configuration.apiKey),e})}getBaseUrl(e){return this.configuration.apiUrl}transformResult(e,t,n){return n(t)}}{constructor(e,t,n){super(e),this.jsonParseReviver=void 0,this.http=t,this.baseUrl=null!=n?n:this.getBaseUrl("")}convertColors(e,t){let n=this.baseUrl+"/api/atoms/v1/colorConverter?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(n+="tenantId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");let r={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json",Accept:"application/json"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("post",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processConvertColors(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processConvertColors(e))}catch(t){return Up(t)}}))}processConvertColors(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?xQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Not Found",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}createDesign(e,t,n,r){let i=this.baseUrl+"/api/atoms/v1/designs?";if(null!=e&&(i+="privateStorage="+encodeURIComponent(""+e)+"&"),null!=t&&(i+="privateStorageOwner="+encodeURIComponent(""+t)+"&"),null===n)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==n&&(i+="tenantId="+encodeURIComponent(""+n)+"&"),i=i.replace(/[?&]$/,"");let o={body:JSON.stringify(r),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json",Accept:"application/json"})};return L(this.transformOptions(o)).pipe(H(e=>this.http.request("post",i,e))).pipe(H(e=>this.transformResult(i,e,e=>this.processCreateDesign(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(i,e,e=>this.processCreateDesign(e))}catch(t){return Up(t)}}))}processCreateDesign(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 201===t?xQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}loadProduct(e,t,n,r){let i=this.baseUrl+"/api/atoms/v1/designs/{id}/model?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(i=i.replace("{id}",encodeURIComponent(""+e)),null!=t&&(i+="privateStorage="+encodeURIComponent(""+t)+"&"),null!=n&&(i+="privateStorageOwner="+encodeURIComponent(""+n)+"&"),null===r)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==r&&(i+="tenantId="+encodeURIComponent(""+r)+"&"),i=i.replace(/[?&]$/,"");let o={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(o)).pipe(H(e=>this.http.request("get",i,e))).pipe(H(e=>this.transformResult(i,e,e=>this.processLoadProduct(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(i,e,e=>this.processLoadProduct(e))}catch(t){return Up(t)}}))}processLoadProduct(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?xQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Not Found",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}saveProduct(e,t,n,r,i){let o=this.baseUrl+"/api/atoms/v1/designs/{id}/model?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(o=o.replace("{id}",encodeURIComponent(""+e)),null!=t&&(o+="privateStorage="+encodeURIComponent(""+t)+"&"),null!=n&&(o+="privateStorageOwner="+encodeURIComponent(""+n)+"&"),null===r)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==r&&(o+="tenantId="+encodeURIComponent(""+r)+"&"),o=o.replace(/[?&]$/,"");let s={body:JSON.stringify(i),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json"})};return L(this.transformOptions(s)).pipe(H(e=>this.http.request("put",o,e))).pipe(H(e=>this.transformResult(o,e,e=>this.processSaveProduct(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(o,e,e=>this.processSaveProduct(e))}catch(t){return Up(t)}}))}processSaveProduct(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?xQ(n).pipe(H(e=>ld(null))):404===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Not Found",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}loadDataSchema(e,t){let n=this.baseUrl+"/api/atoms/v1/designs/{id}/schema?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/octet-stream"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("get",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processLoadDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processLoadDataSchema(e))}catch(t){return Up(t)}}))}processLoadDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);if(200===t||206===t){const i=e.headers?e.headers.get("content-disposition"):void 0,o=i?/filename="?([^"]*?)"?(;|$)/g.exec(i):void 0;return ld({fileName:o&&o.length>1?o[1]:void 0,data:n,status:t,headers:r})}return 404===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Not Found",t,e,r,n)})):409===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Conflict",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}saveDataSchema(e,t,n){let r=this.baseUrl+"/api/atoms/v1/designs/{id}/schema?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),r=r.replace(/[?&]$/,"");const i=new FormData;null!=n&&i.append("schema",n.data,n.fileName?n.fileName:"schema");let o={body:i,observe:"response",responseType:"blob",headers:new Ab({})};return L(this.transformOptions(o)).pipe(H(e=>this.http.request("put",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processSaveDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processSaveDataSchema(e))}catch(t){return Up(t)}}))}processSaveDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?xQ(n).pipe(H(e=>ld(null))):404===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Not Found",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}deleteDataSchema(e,t){let n=this.baseUrl+"/api/atoms/v1/designs/{id}/schema?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("delete",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processDeleteDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processDeleteDataSchema(e))}catch(t){return Up(t)}}))}processDeleteDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?xQ(n).pipe(H(e=>ld(null))):409===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Conflict",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}loadVdpData(e,t){let n=this.baseUrl+"/api/atoms/v1/designs/{id}/vdpData?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("get",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processLoadVdpData(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processLoadVdpData(e))}catch(t){return Up(t)}}))}processLoadVdpData(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?xQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Not Found",t,e,r,n)})):409===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Conflict",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}saveVdpData(e,t,n){let r=this.baseUrl+"/api/atoms/v1/designs/{id}/vdpData?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),r=r.replace(/[?&]$/,"");let i={body:JSON.stringify(n),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("put",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processSaveVdpData(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processSaveVdpData(e))}catch(t){return Up(t)}}))}processSaveVdpData(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?xQ(n).pipe(H(e=>ld(null))):404===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Not Found",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}deleteVdpData(e,t){let n=this.baseUrl+"/api/atoms/v1/designs/{id}/vdpData?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("delete",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processDeleteVdpData(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processDeleteVdpData(e))}catch(t){return Up(t)}}))}processDeleteVdpData(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?xQ(n).pipe(H(e=>ld(null))):409===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Conflict",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}createItem(e,t,n,r,i,o){let s=this.baseUrl+"/api/atoms/v1/itemCreator?";if(null!=e&&(s+="itemType="+encodeURIComponent(""+e)+"&"),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(s+="tenantId="+encodeURIComponent(""+t)+"&"),s=s.replace(/[?&]$/,"");const a=new FormData;null!=n&&a.append("sourceType",n.toString()),null!=r&&a.append("sourceId",r.toString()),null!=i&&a.append("sourceOwnerId",i.toString()),null!=o&&a.append("sourceFile",o.data,o.fileName?o.fileName:"sourceFile");let l={body:a,observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(l)).pipe(H(e=>this.http.request("post",s,e))).pipe(H(e=>this.transformResult(s,e,e=>this.processCreateItem(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(s,e,e=>this.processCreateItem(e))}catch(t){return Up(t)}}))}processCreateItem(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?xQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?xQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),CQ("Not Found",t,e,r,n)})):401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}renderProduct(e,t,n){let r=this.baseUrl+"/api/atoms/v1/renderer?";if(null!=e&&(r+="attachment="+encodeURIComponent(""+e)+"&"),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),r=r.replace(/[?&]$/,"");let i={body:JSON.stringify(n),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json",Accept:"application/json"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("post",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processRenderProduct(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processRenderProduct(e))}catch(t){return Up(t)}}))}processRenderProduct(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);if(200===t||206===t){const i=e.headers?e.headers.get("content-disposition"):void 0,o=i?/filename="?([^"]*?)"?(;|$)/g.exec(i):void 0;return ld({fileName:o&&o.length>1?o[1]:void 0,data:n,status:t,headers:r})}return 401===t?xQ(n).pipe(H(e=>CQ("Unauthorized",t,e,r))):403===t?xQ(n).pipe(H(e=>CQ("Forbidden",t,e,r))):200!==t&&204!==t?xQ(n).pipe(H(e=>CQ("An unexpected server error occurred.",t,e,r))):ld(null)}}return e.\u0275fac=function(t){return new(t||e)(sr(_Q),sr(Gb),sr(yQ,8))},e.\u0275prov=de({factory:function(){return new e(sr(_Q),sr(Gb),sr(yQ,8))},token:e,providedIn:"root"}),e})();var bQ=function(e){return e.Jpeg="Jpeg",e.Png="Png",e.Tiff="Tiff",e.Pdf="Pdf",e}({});class wQ extends Error{constructor(e,t,n,r,i){super(),this.isApiException=!0,this.message=e,this.status=t,this.response=n,this.headers=r,this.result=i}static isApiException(e){return!0===e.isApiException}}function CQ(e,t,n,r,i){return Up(null!=i?i:new wQ(e,t,n,r,null))}function xQ(e){return new _(t=>{if(e){let n=new FileReader;n.onload=e=>{t.next(e.target.result),t.complete()},n.readAsText(e)}else t.next(""),t.complete()})}function EQ(e,t,n="ApiKey"){const r=new _Q;return r.apiKey=n,r.apiUrl=t,r.setAuthorizationToken(e),r}let SQ=(()=>{class e{static forRoot(t,n,r="ApiKey"){return{ngModule:e,providers:[{provide:yQ,useValue:n},{provide:_Q,useFactory:EQ.bind(this,t,n,r)}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[]]}),e})();const PQ=new Xn("API_BASE_URL");class TQ{constructor(){this.apiUrl="http://localhost:64288",this.apiKey="ApiKey",this.authorizationToken=null}getAuthorizationToken(){return ad(this,void 0,void 0,function*(){return this.authorizationToken})}setAuthorizationToken(e){this.authorizationToken=e}}class IQ{constructor(e){this.configuration=e}transformOptions(e){return ad(this,void 0,void 0,function*(){const t=yield this.configuration.getAuthorizationToken();return e.headers=null!=t?e.headers.append("authorization","Bearer "+t):e.headers.append("X-API-Key",this.configuration.apiKey),e})}getBaseUrl(e){return this.configuration.apiUrl}transformResult(e,t,n){return n(t)}}let OQ=(()=>{class e extends IQ{constructor(e,t,n){super(e),this.jsonParseReviver=void 0,this.http=t,this.baseUrl=null!=n?n:this.getBaseUrl("")}check(e,t){let n=this.baseUrl+"/api/processor/v1/dataSets/{id}/check?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("post",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processCheck(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processCheck(e))}catch(t){return Up(t)}}))}processCheck(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}exportDataSet(e,t){let n=this.baseUrl+"/api/processor/v1/dataSets/{id}/export?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/octet-stream"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("get",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processExportDataSet(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processExportDataSet(e))}catch(t){return Up(t)}}))}processExportDataSet(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);if(200===t||206===t){const i=e.headers?e.headers.get("content-disposition"):void 0,o=i?/filename="?([^"]*?)"?(;|$)/g.exec(i):void 0;return ld({fileName:o&&o.length>1?o[1]:void 0,data:n,status:t,headers:r})}return 404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}embedDataSchema(e,t){let n=this.baseUrl+"/api/processor/v1/dataSets/{id}/schema/embed?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("post",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processEmbedDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processEmbedDataSchema(e))}catch(t){return Up(t)}}))}processEmbedDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}extractDataSchema(e,t,n){let r=this.baseUrl+"/api/processor/v1/dataSets/{id}/schema/extract?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),r=r.replace(/[?&]$/,"");let i={body:JSON.stringify(n),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("post",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processExtractDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processExtractDataSchema(e))}catch(t){return Up(t)}}))}processExtractDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>ld(null))):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}linkDataSchema(e,t,n){let r=this.baseUrl+"/api/processor/v1/dataSets/{id}/schema/link?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),r=r.replace(/[?&]$/,"");let i={body:JSON.stringify(n),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json",Accept:"application/json"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("post",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processLinkDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processLinkDataSchema(e))}catch(t){return Up(t)}}))}processLinkDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}update(e,t,n,r,i,o){let s=this.baseUrl+"/api/processor/v1/dataSets/{id}/update?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(s=s.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(s+="tenantId="+encodeURIComponent(""+t)+"&"),s=s.replace(/[?&]$/,"");const a=new FormData;null!=n&&a.append("name",n.toString()),null!=r&&a.append("path",r.toString()),null!=i&&a.append("customFields",i.toString()),null!=o&&a.append("file",o.data,o.fileName?o.fileName:"file");let l={body:a,observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(l)).pipe(H(e=>this.http.request("post",s,e))).pipe(H(e=>this.transformResult(s,e,e=>this.processUpdate(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(s,e,e=>this.processUpdate(e))}catch(t){return Up(t)}}))}processUpdate(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}importDataSet(e,t,n,r,i){let o=this.baseUrl+"/api/processor/v1/dataSets/import?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(o+="tenantId="+encodeURIComponent(""+e)+"&"),o=o.replace(/[?&]$/,"");const s=new FormData;if(null!=t&&s.append("name",t.toString()),null!=n&&s.append("path",n.toString()),null!=r&&s.append("customFields",r.toString()),null==i)throw new Error("The parameter 'sourceFile' cannot be null.");s.append("sourceFile",i.data,i.fileName?i.fileName:"sourceFile");let a={body:s,observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(a)).pipe(H(e=>this.http.request("post",o,e))).pipe(H(e=>this.transformResult(o,e,e=>this.processImportDataSet(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(o,e,e=>this.processImportDataSet(e))}catch(t){return Up(t)}}))}processImportDataSet(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 201===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):409===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Conflict",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}}return e.\u0275fac=function(t){return new(t||e)(sr(TQ),sr(Gb),sr(PQ,8))},e.\u0275prov=de({factory:function(){return new e(sr(TQ),sr(Gb),sr(PQ,8))},token:e,providedIn:"root"}),e})(),kQ=(()=>{class e extends IQ{constructor(e,t,n){super(e),this.jsonParseReviver=void 0,this.http=t,this.baseUrl=null!=n?n:this.getBaseUrl("")}preparePreview(e,t,n,r,i,o,s,a,l,c,u){let h=this.baseUrl+"/api/processor/v1/images/{id}/preview/{namespace}/{name}/{width}x{height}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(h=h.replace("{id}",encodeURIComponent(""+e)),null==t)throw new Error("The parameter 'namespace' must be defined.");if(h=h.replace("{namespace}",encodeURIComponent(""+t)),null==n)throw new Error("The parameter 'name' must be defined.");if(h=h.replace("{name}",encodeURIComponent(""+n)),null==r)throw new Error("The parameter 'width' must be defined.");if(h=h.replace("{width}",encodeURIComponent(""+r)),null==i)throw new Error("The parameter 'height' must be defined.");if(h=h.replace("{height}",encodeURIComponent(""+i)),null!=o&&(h+="jpegQuality="+encodeURIComponent(""+o)+"&"),null!=s&&(h+="fitMode="+encodeURIComponent(""+s)+"&"),null!=a&&(h+="interpolationMode="+encodeURIComponent(""+a)+"&"),null!=l&&(h+="background="+encodeURIComponent(""+l)+"&"),null===c)throw new Error("The parameter 'force' cannot be null.");if(void 0!==c&&(h+="force="+encodeURIComponent(""+c)+"&"),null===u)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==u&&(h+="tenantId="+encodeURIComponent(""+u)+"&"),h=h.replace(/[?&]$/,"");let d={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/octet-stream"})};return L(this.transformOptions(d)).pipe(H(e=>this.http.request("get",h,e))).pipe(H(e=>this.transformResult(h,e,e=>this.processPreparePreview(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(h,e,e=>this.processPreparePreview(e))}catch(t){return Up(t)}}))}processPreparePreview(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);if(200===t||206===t){const i=e.headers?e.headers.get("content-disposition"):void 0,o=i?/filename="?([^"]*?)"?(;|$)/g.exec(i):void 0;return ld({fileName:o&&o.length>1?o[1]:void 0,data:n,status:t,headers:r})}return 404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}preparePreviewUrl(e,t,n,r,i,o,s,a,l,c,u){let h=this.baseUrl+"/api/processor/v1/images/{id}/preview/{namespace}/{name}/{width}x{height}/url?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(h=h.replace("{id}",encodeURIComponent(""+e)),null==t)throw new Error("The parameter 'namespace' must be defined.");if(h=h.replace("{namespace}",encodeURIComponent(""+t)),null==n)throw new Error("The parameter 'name' must be defined.");if(h=h.replace("{name}",encodeURIComponent(""+n)),null==r)throw new Error("The parameter 'width' must be defined.");if(h=h.replace("{width}",encodeURIComponent(""+r)),null==i)throw new Error("The parameter 'height' must be defined.");if(h=h.replace("{height}",encodeURIComponent(""+i)),null!=o&&(h+="jpegQuality="+encodeURIComponent(""+o)+"&"),null!=s&&(h+="fitMode="+encodeURIComponent(""+s)+"&"),null!=a&&(h+="interpolationMode="+encodeURIComponent(""+a)+"&"),null!=l&&(h+="background="+encodeURIComponent(""+l)+"&"),null===c)throw new Error("The parameter 'force' cannot be null.");if(void 0!==c&&(h+="force="+encodeURIComponent(""+c)+"&"),null===u)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==u&&(h+="tenantId="+encodeURIComponent(""+u)+"&"),h=h.replace(/[?&]$/,"");let d={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(d)).pipe(H(e=>this.http.request("get",h,e))).pipe(H(e=>this.transformResult(h,e,e=>this.processPreparePreviewUrl(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(h,e,e=>this.processPreparePreviewUrl(e))}catch(t){return Up(t)}}))}processPreparePreviewUrl(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}update(e,t,n,r,i,o){let s=this.baseUrl+"/api/processor/v1/images/{id}/update?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(s=s.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(s+="tenantId="+encodeURIComponent(""+t)+"&"),s=s.replace(/[?&]$/,"");const a=new FormData;null!=n&&a.append("name",n.toString()),null!=r&&a.append("path",r.toString()),null!=i&&a.append("customFields",i.toString()),null!=o&&a.append("file",o.data,o.fileName?o.fileName:"file");let l={body:a,observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(l)).pipe(H(e=>this.http.request("post",s,e))).pipe(H(e=>this.transformResult(s,e,e=>this.processUpdate(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(s,e,e=>this.processUpdate(e))}catch(t){return Up(t)}}))}processUpdate(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}importImage(e,t,n,r,i,o,s,a,l,c,u,h,d,p){let f=this.baseUrl+"/api/processor/v1/images/import?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(f+="tenantId="+encodeURIComponent(""+e)+"&"),f=f.replace(/[?&]$/,"");const m=new FormData;if(null!=t&&m.append("name",t.toString()),null!=n&&m.append("path",n.toString()),null!=r&&m.append("customFields",r.toString()),null!=i&&m.append("previewSettings.makePreview",i.toString()),null!=o&&m.append("previewSettings.namespace",o.toString()),null!=s&&m.append("previewSettings.name",s.toString()),null!=a&&m.append("previewSettings.width",a.toString()),null!=l&&m.append("previewSettings.height",l.toString()),null!=c&&m.append("previewSettings.jpegQuality",c.toString()),null!=u&&m.append("previewSettings.fitMode",u.toString()),null!=h&&m.append("previewSettings.interpolationMode",h.toString()),null!=d&&m.append("previewSettings.background",d.toString()),null==p)throw new Error("The parameter 'sourceFile' cannot be null.");m.append("sourceFile",p.data,p.fileName?p.fileName:"sourceFile");let g={body:m,observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(g)).pipe(H(e=>this.http.request("post",f,e))).pipe(H(e=>this.transformResult(f,e,e=>this.processImportImage(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(f,e,e=>this.processImportImage(e))}catch(t){return Up(t)}}))}processImportImage(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 201===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):409===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Conflict",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}}return e.\u0275fac=function(t){return new(t||e)(sr(TQ),sr(Gb),sr(PQ,8))},e.\u0275prov=de({factory:function(){return new e(sr(TQ),sr(Gb),sr(PQ,8))},token:e,providedIn:"root"}),e})(),RQ=(()=>{class e extends IQ{constructor(e,t,n){super(e),this.jsonParseReviver=void 0,this.http=t,this.baseUrl=null!=n?n:this.getBaseUrl("")}check(e,t,n){let r=this.baseUrl+"/api/processor/v1/private-designs/{id}/check?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),null!=n&&(r+="userId="+encodeURIComponent(""+n)+"&"),r=r.replace(/[?&]$/,"");let i={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("post",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processCheck(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processCheck(e))}catch(t){return Up(t)}}))}processCheck(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}getDepositPhotos(e,t,n){let r=this.baseUrl+"/api/processor/v1/private-designs/{id}/depositphotos?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),null!=n&&(r+="userId="+encodeURIComponent(""+n)+"&"),r=r.replace(/[?&]$/,"");let i={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("post",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processGetDepositPhotos(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processGetDepositPhotos(e))}catch(t){return Up(t)}}))}processGetDepositPhotos(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}exportDesign(e,t,n){let r=this.baseUrl+"/api/processor/v1/private-designs/{id}/export?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),null!=n&&(r+="userId="+encodeURIComponent(""+n)+"&"),r=r.replace(/[?&]$/,"");let i={observe:"response",responseType:"blob",headers:new Ab({})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("get",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processExportDesign(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processExportDesign(e))}catch(t){return Up(t)}}))}processExportDesign(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>ld(null))):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}preparePreview(e,t,n,r,i,o,s,a,l,c,u){let h=this.baseUrl+"/api/processor/v1/private-designs/{id}/preview/{namespace}/{name}/{width}x{height}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(h=h.replace("{id}",encodeURIComponent(""+e)),null==t)throw new Error("The parameter 'namespace' must be defined.");if(h=h.replace("{namespace}",encodeURIComponent(""+t)),null==n)throw new Error("The parameter 'name' must be defined.");if(h=h.replace("{name}",encodeURIComponent(""+n)),null==r)throw new Error("The parameter 'width' must be defined.");if(h=h.replace("{width}",encodeURIComponent(""+r)),null==i)throw new Error("The parameter 'height' must be defined.");if(h=h.replace("{height}",encodeURIComponent(""+i)),null!=o&&(h+="surfaceIndex="+encodeURIComponent(""+o)+"&"),null!=s&&(h+="stub="+encodeURIComponent(""+s)+"&"),null!=a&&(h+="format="+encodeURIComponent(""+a)+"&"),null===l)throw new Error("The parameter 'force' cannot be null.");if(void 0!==l&&(h+="force="+encodeURIComponent(""+l)+"&"),null===c)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==c&&(h+="tenantId="+encodeURIComponent(""+c)+"&"),null!=u&&(h+="userId="+encodeURIComponent(""+u)+"&"),h=h.replace(/[?&]$/,"");let d={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/octet-stream"})};return L(this.transformOptions(d)).pipe(H(e=>this.http.request("get",h,e))).pipe(H(e=>this.transformResult(h,e,e=>this.processPreparePreview(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(h,e,e=>this.processPreparePreview(e))}catch(t){return Up(t)}}))}processPreparePreview(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);if(200===t||206===t){const i=e.headers?e.headers.get("content-disposition"):void 0,o=i?/filename="?([^"]*?)"?(;|$)/g.exec(i):void 0;return ld({fileName:o&&o.length>1?o[1]:void 0,data:n,status:t,headers:r})}return 404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}preparePreviewUrl(e,t,n,r,i,o,s,a,l,c,u){let h=this.baseUrl+"/api/processor/v1/private-designs/{id}/preview/{namespace}/{name}/{width}x{height}/url?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(h=h.replace("{id}",encodeURIComponent(""+e)),null==t)throw new Error("The parameter 'namespace' must be defined.");if(h=h.replace("{namespace}",encodeURIComponent(""+t)),null==n)throw new Error("The parameter 'name' must be defined.");if(h=h.replace("{name}",encodeURIComponent(""+n)),null==r)throw new Error("The parameter 'width' must be defined.");if(h=h.replace("{width}",encodeURIComponent(""+r)),null==i)throw new Error("The parameter 'height' must be defined.");if(h=h.replace("{height}",encodeURIComponent(""+i)),null!=o&&(h+="surfaceIndex="+encodeURIComponent(""+o)+"&"),null!=s&&(h+="stub="+encodeURIComponent(""+s)+"&"),null!=a&&(h+="format="+encodeURIComponent(""+a)+"&"),null===l)throw new Error("The parameter 'force' cannot be null.");if(void 0!==l&&(h+="force="+encodeURIComponent(""+l)+"&"),null===c)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==c&&(h+="tenantId="+encodeURIComponent(""+c)+"&"),null!=u&&(h+="userId="+encodeURIComponent(""+u)+"&"),h=h.replace(/[?&]$/,"");let d={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(d)).pipe(H(e=>this.http.request("get",h,e))).pipe(H(e=>this.transformResult(h,e,e=>this.processPreparePreviewUrl(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(h,e,e=>this.processPreparePreviewUrl(e))}catch(t){return Up(t)}}))}processPreparePreviewUrl(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}embedDataSchema(e,t,n){let r=this.baseUrl+"/api/processor/v1/private-designs/{id}/schema/embed?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),null!=n&&(r+="userId="+encodeURIComponent(""+n)+"&"),r=r.replace(/[?&]$/,"");let i={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("post",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processEmbedDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processEmbedDataSchema(e))}catch(t){return Up(t)}}))}processEmbedDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}extractDataSchema(e,t,n,r){let i=this.baseUrl+"/api/processor/v1/private-designs/{id}/schema/extract?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(i=i.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(i+="tenantId="+encodeURIComponent(""+t)+"&"),null!=n&&(i+="userId="+encodeURIComponent(""+n)+"&"),i=i.replace(/[?&]$/,"");let o={body:JSON.stringify(r),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json"})};return L(this.transformOptions(o)).pipe(H(e=>this.http.request("post",i,e))).pipe(H(e=>this.transformResult(i,e,e=>this.processExtractDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(i,e,e=>this.processExtractDataSchema(e))}catch(t){return Up(t)}}))}processExtractDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>ld(null))):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}linkDataSchema(e,t,n,r){let i=this.baseUrl+"/api/processor/v1/private-designs/{id}/schema/link?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(i=i.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(i+="tenantId="+encodeURIComponent(""+t)+"&"),null!=n&&(i+="userId="+encodeURIComponent(""+n)+"&"),i=i.replace(/[?&]$/,"");let o={body:JSON.stringify(r),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json",Accept:"application/json"})};return L(this.transformOptions(o)).pipe(H(e=>this.http.request("post",i,e))).pipe(H(e=>this.transformResult(i,e,e=>this.processLinkDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(i,e,e=>this.processLinkDataSchema(e))}catch(t){return Up(t)}}))}processLinkDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}removeDataSchema(e,t,n){let r=this.baseUrl+"/api/processor/v1/private-designs/{id}/schema/remove?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),null!=n&&(r+="userId="+encodeURIComponent(""+n)+"&"),r=r.replace(/[?&]$/,"");let i={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("post",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processRemoveDataSchema(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processRemoveDataSchema(e))}catch(t){return Up(t)}}))}processRemoveDataSchema(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}update(e,t,n,r,i,o,s){let a=this.baseUrl+"/api/processor/v1/private-designs/{id}/update?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(a=a.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(a+="tenantId="+encodeURIComponent(""+t)+"&"),null!=n&&(a+="userId="+encodeURIComponent(""+n)+"&"),a=a.replace(/[?&]$/,"");const l=new FormData;null!=r&&l.append("designParams.name",r.toString()),null!=i&&l.append("designParams.path",i.toString()),null!=o&&l.append("designParams.customFields",o.toString()),null!=s&&l.append("file",s.data,s.fileName?s.fileName:"file");let c={body:l,observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(c)).pipe(H(e=>this.http.request("post",a,e))).pipe(H(e=>this.transformResult(a,e,e=>this.processUpdate(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(a,e,e=>this.processUpdate(e))}catch(t){return Up(t)}}))}processUpdate(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Not Found",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}createBlankDesign(e,t,n){let r=this.baseUrl+"/api/processor/v1/private-designs/blank?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(r+="tenantId="+encodeURIComponent(""+e)+"&"),null!=t&&(r+="userId="+encodeURIComponent(""+t)+"&"),r=r.replace(/[?&]$/,"");let i={body:JSON.stringify(n),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json",Accept:"application/json"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("post",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processCreateBlankDesign(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processCreateBlankDesign(e))}catch(t){return Up(t)}}))}processCreateBlankDesign(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 201===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):409===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Conflict",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}importDesign(e,t,n,r,i,o,s,a,l,c,u,h,d){let p=this.baseUrl+"/api/processor/v1/private-designs/import?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(p+="tenantId="+encodeURIComponent(""+e)+"&"),null!=t&&(p+="userId="+encodeURIComponent(""+t)+"&"),p=p.replace(/[?&]$/,"");const f=new FormData;if(null!=n&&f.append("designParams.name",n.toString()),null!=r&&f.append("designParams.path",r.toString()),null!=i&&f.append("designParams.customFields",i.toString()),null!=o&&f.append("previewSettings.makePreview",o.toString()),null!=s&&f.append("previewSettings.namespace",s.toString()),null!=a&&f.append("previewSettings.name",a.toString()),null!=l&&f.append("previewSettings.width",l.toString()),null!=c&&f.append("previewSettings.height",c.toString()),null!=u&&f.append("previewSettings.stub",u.toString()),null!=h&&f.append("previewSettings.format",h.toString()),null==d)throw new Error("The parameter 'sourceFile' cannot be null.");f.append("sourceFile",d.data,d.fileName?d.fileName:"sourceFile");let m={body:f,observe:"response",responseType:"blob",headers:new Ab({Accept:"application/json"})};return L(this.transformOptions(m)).pipe(H(e=>this.http.request("post",p,e))).pipe(H(e=>this.transformResult(p,e,e=>this.processImportDesign(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(p,e,e=>this.processImportDesign(e))}catch(t){return Up(t)}}))}processImportDesign(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 201===t?FQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):409===t?FQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),DQ("Conflict",t,e,r,n)})):401===t?FQ(n).pipe(H(e=>DQ("Unauthorized",t,e,r))):403===t?FQ(n).pipe(H(e=>DQ("Forbidden",t,e,r))):200!==t&&204!==t?FQ(n).pipe(H(e=>DQ("An unexpected server error occurred.",t,e,r))):ld(null)}}return e.\u0275fac=function(t){return new(t||e)(sr(TQ),sr(Gb),sr(PQ,8))},e.\u0275prov=de({factory:function(){return new e(sr(TQ),sr(Gb),sr(PQ,8))},token:e,providedIn:"root"}),e})();var AQ=function(e){return e.Jpeg="Jpeg",e.Png="Png",e}({});class MQ extends Error{constructor(e,t,n,r,i){super(),this.isApiException=!0,this.message=e,this.status=t,this.response=n,this.headers=r,this.result=i}static isApiException(e){return!0===e.isApiException}}function DQ(e,t,n,r,i){return Up(null!=i?i:new MQ(e,t,n,r,null))}function FQ(e){return new _(t=>{if(e){let n=new FileReader;n.onload=e=>{t.next(e.target.result),t.complete()},n.readAsText(e)}else t.next(""),t.complete()})}function LQ(e,t,n="ApiKey"){const r=new TQ;return r.apiKey=n,r.apiUrl=t,r.setAuthorizationToken(e),r}let BQ=(()=>{class e{static forRoot(t,n,r="ApiKey"){return{ngModule:e,providers:[{provide:PQ,useValue:n},{provide:TQ,useFactory:LQ.bind(this,t,n,r)}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[]]}),e})();const NQ=new Xn("API_BASE_URL");class jQ{constructor(){this.apiUrl="http://localhost:56416",this.apiKey="ApiKey",this.authorizationToken=null}getAuthorizationToken(){return ad(this,void 0,void 0,function*(){return this.authorizationToken})}setAuthorizationToken(e){this.authorizationToken=e}}let HQ=(()=>{class e extends class{constructor(e){this.configuration=e}transformOptions(e){return ad(this,void 0,void 0,function*(){const t=yield this.configuration.getAuthorizationToken();return e.headers=null!=t?e.headers.append("authorization","Bearer "+t):e.headers.append("X-API-Key",this.configuration.apiKey),e})}getBaseUrl(e){return this.configuration.apiUrl}transformResult(e,t,n){return n(t)}}{constructor(e,t,n){super(e),this.jsonParseReviver=void 0,this.http=t,this.baseUrl=null!=n?n:this.getBaseUrl("")}create(e,t,n,r,i,o,s,a,l,c,u,h){let d=this.baseUrl+"/api/storage/v1/images?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(d+="tenantId="+encodeURIComponent(""+e)+"&"),d=d.replace(/[?&]$/,"");const p=new FormData;if(null!=t&&p.append("metadata.isVector",t.toString()),null!=n&&p.append("metadata.width",n.toString()),null!=r&&p.append("metadata.height",r.toString()),null!=i&&p.append("metadata.format",i.toString()),null!=o&&p.append("metadata.dpiX",o.toString()),null!=s&&p.append("metadata.dpiY",s.toString()),null!=a&&a.forEach(e=>p.append("metadata.pages",e.toString())),null!=l&&p.append("file",l.data,l.fileName?l.fileName:"file"),null==c)throw new Error("The parameter 'path' cannot be null.");if(p.append("path",c.toString()),null==u)throw new Error("The parameter 'name' cannot be null.");p.append("name",u.toString()),null!=h&&p.append("customFields",JSON.stringify(h));let f={body:p,observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(f)).pipe(H(e=>this.http.request("post",d,e))).pipe(H(e=>this.transformResult(d,e,e=>this.processCreate(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(d,e,e=>this.processCreate(e))}catch(t){return Up(t)}}))}processCreate(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 201===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):409===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Conflict",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}getAll(e,t,n,r,i,o,s,a){let l=this.baseUrl+"/api/storage/v1/images?";if(null!=e&&(l+="path="+encodeURIComponent(""+e)+"&"),null===t)throw new Error("The parameter 'includeSubfolders' cannot be null.");if(void 0!==t&&(l+="includeSubfolders="+encodeURIComponent(""+t)+"&"),null!=n&&(l+="skip="+encodeURIComponent(""+n)+"&"),null!=r&&(l+="take="+encodeURIComponent(""+r)+"&"),null!=i&&(l+="sorting="+encodeURIComponent(""+i)+"&"),null!=o&&(l+="search="+encodeURIComponent(""+o)+"&"),null!=s&&(l+="customFields="+encodeURIComponent(""+s)+"&"),null===a)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==a&&(l+="tenantId="+encodeURIComponent(""+a)+"&"),l=l.replace(/[?&]$/,"");let c={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(c)).pipe(H(e=>this.http.request("get",l,e))).pipe(H(e=>this.transformResult(l,e,e=>this.processGetAll(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(l,e,e=>this.processGetAll(e))}catch(t){return Up(t)}}))}processGetAll(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}copy(e,t,n,r,i){let o=this.baseUrl+"/api/storage/v1/images/{id}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(o=o.replace("{id}",encodeURIComponent(""+e)),null!=t&&(o+="path="+encodeURIComponent(""+t)+"&"),null!=n&&(o+="name="+encodeURIComponent(""+n)+"&"),null===r)throw new Error("The parameter 'strategy' cannot be null.");if(void 0!==r&&(o+="strategy="+encodeURIComponent(""+r)+"&"),null===i)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==i&&(o+="tenantId="+encodeURIComponent(""+i)+"&"),o=o.replace(/[?&]$/,"");let s={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(s)).pipe(H(e=>this.http.request("post",o,e))).pipe(H(e=>this.transformResult(o,e,e=>this.processCopy(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(o,e,e=>this.processCopy(e))}catch(t){return Up(t)}}))}processCopy(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 201===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):409===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Conflict",t,e,r,n)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}update(e,t,n,r,i,o,s,a,l,c,u,h,d){let p=this.baseUrl+"/api/storage/v1/images/{id}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(p=p.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(p+="tenantId="+encodeURIComponent(""+t)+"&"),p=p.replace(/[?&]$/,"");const f=new FormData;null!=n&&f.append("metadata.isVector",n.toString()),null!=r&&f.append("metadata.width",r.toString()),null!=i&&f.append("metadata.height",i.toString()),null!=o&&f.append("metadata.format",o.toString()),null!=s&&f.append("metadata.dpiX",s.toString()),null!=a&&f.append("metadata.dpiY",a.toString()),null!=l&&l.forEach(e=>f.append("metadata.pages",e.toString())),null!=c&&f.append("file",c.data,c.fileName?c.fileName:"file"),null!=u&&f.append("path",u.toString()),null!=h&&f.append("name",h.toString()),null!=d&&f.append("customFields",JSON.stringify(d));let m={body:f,observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(m)).pipe(H(e=>this.http.request("put",p,e))).pipe(H(e=>this.transformResult(p,e,e=>this.processUpdate(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(p,e,e=>this.processUpdate(e))}catch(t){return Up(t)}}))}processUpdate(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):409===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Conflict",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}get(e,t){let n=this.baseUrl+"/api/storage/v1/images/{id}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("get",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processGet(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processGet(e))}catch(t){return Up(t)}}))}processGet(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}delete(e,t){let n=this.baseUrl+"/api/storage/v1/images/{id}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("delete",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processDelete(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processDelete(e))}catch(t){return Up(t)}}))}processDelete(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}getFile(e,t,n){let r=this.baseUrl+"/api/storage/v1/images/{id}/file?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null!=t&&(r+="attachment="+encodeURIComponent(""+t)+"&"),null===n)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==n&&(r+="tenantId="+encodeURIComponent(""+n)+"&"),r=r.replace(/[?&]$/,"");let i={observe:"response",responseType:"blob",headers:new Ab({Accept:"application/octet-stream"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("get",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processGetFile(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processGetFile(e))}catch(t){return Up(t)}}))}processGetFile(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);if(200===t||206===t){const i=e.headers?e.headers.get("content-disposition"):void 0,o=i?/filename="?([^"]*?)"?(;|$)/g.exec(i):void 0;return ld({fileName:o&&o.length>1?o[1]:void 0,data:n,status:t,headers:r})}return 404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}addPreview(e,t,n,r,i,o,s,a){let l=this.baseUrl+"/api/storage/v1/images/{id}/preview?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(l=l.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(l+="tenantId="+encodeURIComponent(""+t)+"&"),l=l.replace(/[?&]$/,"");const c=new FormData;if(null==n)throw new Error("The parameter 'name' cannot be null.");if(c.append("name",n.toString()),null==r)throw new Error("The parameter 'namespace' cannot be null.");if(c.append("namespace",r.toString()),null==i)throw new Error("The parameter 'width' cannot be null.");if(c.append("width",i.toString()),null==o)throw new Error("The parameter 'height' cannot be null.");c.append("height",o.toString()),null!=s&&c.append("format",s.toString()),null!=a&&c.append("file",a.data,a.fileName?a.fileName:"file");let u={body:c,observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(u)).pipe(H(e=>this.http.request("put",l,e))).pipe(H(e=>this.transformResult(l,e,e=>this.processAddPreview(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(l,e,e=>this.processAddPreview(e))}catch(t){return Up(t)}}))}processAddPreview(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}batchCopy(e,t){let n=this.baseUrl+"/api/storage/v1/images/batchCopy?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(n+="tenantId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");let r={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json-patch+json"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("post",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processBatchCopy(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processBatchCopy(e))}catch(t){return Up(t)}}))}processBatchCopy(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>ld(null))):409===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Conflict",t,e,r,n)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}batchDelete(e,t){let n=this.baseUrl+"/api/storage/v1/images/batchDelete?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(n+="tenantId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");let r={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json-patch+json"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("post",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processBatchDelete(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processBatchDelete(e))}catch(t){return Up(t)}}))}processBatchDelete(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>ld(null))):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}batchUpdateParentFolder(e,t){let n=this.baseUrl+"/api/storage/v1/images/batchUpdateParentFolder?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(n+="tenantId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");let r={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json-patch+json"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("post",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processBatchUpdateParentFolder(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processBatchUpdateParentFolder(e))}catch(t){return Up(t)}}))}processBatchUpdateParentFolder(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>ld(null))):409===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Conflict",t,e,r,n)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}getAllCollections(e){let t=this.baseUrl+"/api/storage/v1/images/collections?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(t+="tenantId="+encodeURIComponent(""+e)+"&"),t=t.replace(/[?&]$/,"");let n={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(n)).pipe(H(e=>this.http.request("get",t,e))).pipe(H(e=>this.transformResult(t,e,e=>this.processGetAllCollections(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(t,e,e=>this.processGetAllCollections(e))}catch(n){return Up(n)}}))}processGetAllCollections(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}createCollection(e,t){let n=this.baseUrl+"/api/storage/v1/images/collections?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(n+="tenantId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");let r={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json-patch+json",Accept:"text/plain"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("post",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processCreateCollection(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processCreateCollection(e))}catch(t){return Up(t)}}))}processCreateCollection(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 201===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):409===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Conflict",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}getCollection(e,t){let n=this.baseUrl+"/api/storage/v1/images/collections/{id}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("get",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processGetCollection(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processGetCollection(e))}catch(t){return Up(t)}}))}processGetCollection(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}updateCollection(e,t,n){let r=this.baseUrl+"/api/storage/v1/images/collections/{id}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),r=r.replace(/[?&]$/,"");let i={body:JSON.stringify(n),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json-patch+json",Accept:"text/plain"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("put",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processUpdateCollection(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processUpdateCollection(e))}catch(t){return Up(t)}}))}processUpdateCollection(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):409===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Conflict",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}deleteCollection(e,t){let n=this.baseUrl+"/api/storage/v1/images/collections/{id}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("delete",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processDeleteCollection(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processDeleteCollection(e))}catch(t){return Up(t)}}))}processDeleteCollection(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}getFolder(e,t){let n=this.baseUrl+"/api/storage/v1/images/folders?";if(null!=e&&(n+="fullPath="+encodeURIComponent(""+e)+"&"),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("get",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processGetFolder(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processGetFolder(e))}catch(t){return Up(t)}}))}processGetFolder(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}createFolder(e,t){let n=this.baseUrl+"/api/storage/v1/images/folders?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(n+="tenantId="+encodeURIComponent(""+e)+"&"),n=n.replace(/[?&]$/,"");let r={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json-patch+json",Accept:"text/plain"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("post",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processCreateFolder(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processCreateFolder(e))}catch(t){return Up(t)}}))}processCreateFolder(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 201===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):409===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Conflict",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}deleteFolder(e,t){let n=this.baseUrl+"/api/storage/v1/images/folders?";if(null!=e&&(n+="fullPath="+encodeURIComponent(""+e)+"&"),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("delete",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processDeleteFolder(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processDeleteFolder(e))}catch(t){return Up(t)}}))}processDeleteFolder(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}getFolderInfo(e,t){let n=this.baseUrl+"/api/storage/v1/images/folders/{id}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(n=n.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(n+="tenantId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");let r={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(r)).pipe(H(e=>this.http.request("get",n,e))).pipe(H(e=>this.transformResult(n,e,e=>this.processGetFolderInfo(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(n,e,e=>this.processGetFolderInfo(e))}catch(t){return Up(t)}}))}processGetFolderInfo(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}updateFolder(e,t,n){let r=this.baseUrl+"/api/storage/v1/images/folders/{id}?";if(null==e)throw new Error("The parameter 'id' must be defined.");if(r=r.replace("{id}",encodeURIComponent(""+e)),null===t)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==t&&(r+="tenantId="+encodeURIComponent(""+t)+"&"),r=r.replace(/[?&]$/,"");let i={body:JSON.stringify(n),observe:"response",responseType:"blob",headers:new Ab({"Content-Type":"application/json-patch+json",Accept:"text/plain"})};return L(this.transformOptions(i)).pipe(H(e=>this.http.request("put",r,e))).pipe(H(e=>this.transformResult(r,e,e=>this.processUpdateFolder(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(r,e,e=>this.processUpdateFolder(e))}catch(t){return Up(t)}}))}processUpdateFolder(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):404===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Not Found",t,e,r,n)})):409===t?UQ(n).pipe(H(e=>{let n=null;return n=""===e?null:JSON.parse(e,this.jsonParseReviver),VQ("Conflict",t,e,r,n)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}getAllFolders(e){let t=this.baseUrl+"/api/storage/v1/images/folders/all?";if(null===e)throw new Error("The parameter 'tenantId' cannot be null.");void 0!==e&&(t+="tenantId="+encodeURIComponent(""+e)+"&"),t=t.replace(/[?&]$/,"");let n={observe:"response",responseType:"blob",headers:new Ab({Accept:"text/plain"})};return L(this.transformOptions(n)).pipe(H(e=>this.http.request("get",t,e))).pipe(H(e=>this.transformResult(t,e,e=>this.processGetAllFolders(e)))).pipe(lw(e=>{if(!(e instanceof zb))return Up(e);try{return this.transformResult(t,e,e=>this.processGetAllFolders(e))}catch(n){return Up(n)}}))}processGetAllFolders(e){const t=e.status,n=e instanceof Ub?e.body:e.error instanceof Blob?e.error:void 0;let r={};if(e.headers)for(let i of e.headers.keys())r[i]=e.headers.get(i);return 200===t?UQ(n).pipe(H(e=>{let t=null;return t=""===e?null:JSON.parse(e,this.jsonParseReviver),ld(t)})):401===t?UQ(n).pipe(H(e=>VQ("Unauthorized",t,e,r))):403===t?UQ(n).pipe(H(e=>VQ("Forbidden",t,e,r))):200!==t&&204!==t?UQ(n).pipe(H(e=>VQ("An unexpected server error occurred.",t,e,r))):ld(null)}}return e.\u0275fac=function(t){return new(t||e)(sr(jQ),sr(Gb),sr(NQ,8))},e.\u0275prov=de({factory:function(){return new e(sr(jQ),sr(Gb),sr(NQ,8))},token:e,providedIn:"root"}),e})();class zQ extends Error{constructor(e,t,n,r,i){super(),this.isApiException=!0,this.message=e,this.status=t,this.response=n,this.headers=r,this.result=i}static isApiException(e){return!0===e.isApiException}}function VQ(e,t,n,r,i){return Up(null!=i?i:new zQ(e,t,n,r,null))}function UQ(e){return new _(t=>{if(e){let n=new FileReader;n.onload=e=>{t.next(e.target.result),t.complete()},n.readAsText(e)}else t.next(""),t.complete()})}function WQ(e,t,n="ApiKey"){const r=new jQ;return r.apiKey=n,r.apiUrl=t,r.setAuthorizationToken(e),r}let XQ=(()=>{class e{static forRoot(t,n,r="ApiKey"){return{ngModule:e,providers:[{provide:NQ,useValue:n},{provide:jQ,useFactory:WQ.bind(this,t,n,r)}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({imports:[[]]}),e})();const GQ={provide:oQ,useClass:(()=>{class e{constructor(e,t,n){this._assetProcessorCnf=e,this._designAtomsCnf=t,this._assetStorageCnf=n,this._editorConfig=new LC(null)}get $config(){return this._editorConfig.asObservable().pipe(xd(e=>!!e))}get $symbols(){return this.$config.pipe(P(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.symbols)||cL}))}get $designId(){return this.$config.pipe(P(e=>e.design.designId))}get $tenantId(){return this.$config.pipe(P(e=>e.access.tenantId))}get $token(){return this.$config.pipe(P(e=>e.access.token))}get $apiKey(){return this.$config.pipe(P(e=>e.access.apiKey))}get $designAtomsApi(){return this.$config.pipe(P(e=>e.api.designAtoms))}get $assetProcessorApi(){return this.$config.pipe(P(e=>e.api.assetProcessor))}get $assetStorageApi(){return this.$config.pipe(P(e=>e.api.assetStorage))}get $userId(){return this.$config.pipe(P(e=>e.access.userId))}get $unit(){return new _(e=>e.next(iQ("in")))}get $designAtomsConfig(){return this.$config.pipe(P(e=>({baseUrl:e.api.designAtoms,tenantId:e.access.tenantId})))}get $allowManipulations(){return this.$config.pipe(P(e=>{var t;return!!(null===(t=e.settings)||void 0===t?void 0:t.allowManipulations)}))}set config(e){this._editorConfig.next(e),this._setToken(e.access.token,e.access.apiKey),this._setDomain(e.api)}_setToken(e,t){this._assetProcessorCnf.apiKey=t,this._assetStorageCnf.apiKey=t,this._designAtomsCnf.apiKey=t,this._assetProcessorCnf.setAuthorizationToken(e||null),this._designAtomsCnf.setAuthorizationToken(e||null),this._assetStorageCnf.setAuthorizationToken(e||null)}_setDomain(e){this._assetProcessorCnf.apiUrl=e.assetProcessor,this._assetStorageCnf.apiUrl=e.assetStorage,this._designAtomsCnf.apiUrl=e.designAtoms}}return e.\u0275fac=function(t){return new(t||e)(sr(TQ),sr(_Q),sr(jQ))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})()};let qQ=(()=>{class e{constructor(e,t,n,r){this._serializer=e,this._configSrv=t,this._designAtoms=n,this._privateDesignProcessor=r,this._product=new LC(null),this._configSrv.$userId.subscribe(e=>this._userId=e),this._configSrv.$designId.subscribe(e=>this._designId=e),this._configSrv.$tenantId.subscribe(e=>this._tenantId=Number(e)),this._configSrv.$designAtomsApi.subscribe(e=>this._designAtoms.baseUrl=e),this._configSrv.$assetProcessorApi.subscribe(e=>this._privateDesignProcessor.baseUrl=e)}set product(e){this._product.next(e)}get product(){return this._product.value}get $product(){return this._product.asObservable().pipe(xd(e=>!!e))}loadProduct(e,t){return ad(this,void 0,void 0,function*(){try{const n=yield this._designAtoms.loadProduct(e,t,null,this._tenantId).toPromise();return this._serializer.deserialize(n)}catch(n){switch(n.status){case 404:throw pQ;case 500:throw fQ;case 401:throw gQ}}})}createPrivateProduct(e){return ad(this,void 0,void 0,function*(){const t=this._serializer.serialize(this._product.value,!0),n=zR.toBinary(e),r=yield this._readAsDataURL(n);return(yield this._designAtoms.createDesign(!0,this._userId,this._tenantId,{path:"/",dataSchema:r,product:JSON.parse(t)}).toPromise()).id})}saveProduct(){return ad(this,void 0,void 0,function*(){const e=this._serializer.serialize(this._product.value,!0);return yield this._designAtoms.saveProduct(this._designId,!0,this._userId,this._tenantId,JSON.parse(e)).toPromise(),this._designId})}createPreviews(e,t,n){return ad(this,void 0,void 0,function*(){const r=this.product.surfaces.toArray().map((r,i)=>ad(this,void 0,void 0,function*(){return this._privateDesignProcessor.preparePreviewUrl(e,"dd-editor",`surface-index-${i}-${e}`,t,n,i,!1,AQ.Jpeg,!1,this._tenantId,this._userId).toPromise()}));return Promise.all(r)})}createPreviewLink(e,t,n){return ad(this,void 0,void 0,function*(){return this._privateDesignProcessor.preparePreviewUrl(e,"dd-editor",e,t,n,0,null,null,!0,this._tenantId,this._userId).toPromise()})}createPdf(e,t){return ad(this,void 0,void 0,function*(){const n=this._serializer.serialize(this._product.value,!0),r=yield this._designAtoms.renderProduct(t,this._tenantId,{product:JSON.parse(n),renderingConfig:Object.assign(Object.assign({},e),{format:bQ.Pdf})}).toPromise();return URL.createObjectURL(r.data)})}_readAsDataURL(e){const t=new Blob([e.buffer]),n=new FileReader;return new Promise((e,r)=>{n.readAsDataURL(t),n.addEventListener("load",()=>e(n.result.replace("data:application/octet-stream;base64,",""))),n.addEventListener("error",()=>r()),n.addEventListener("abort",()=>r())})}}return e.\u0275fac=function(t){return new(t||e)(sr(vU),sr(oQ),sr(vQ),sr(RQ))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const $Q={titleTemplate:"{text_max_length} {number_max}, {variant_in_group}",fields:[{name:"text_max_length",description:"Enter string less 10 symbols",title:"Text max length",prompt:"Text max length",config:{oneofKind:"string",string:{constraints:[{rule:{oneofKind:"maxLength",maxLength:{value:10}}}]}}},{name:"text_min_length",description:"Enter string more 5 symbols",title:"Text min length",prompt:"Text min length",config:{oneofKind:"string",string:{constraints:[{rule:{oneofKind:"minLength",minLength:{value:5}}}]}}},{name:"text_max_lines",description:"Enter maximum 3 lines",title:"Text max lines",prompt:"Text max lines",config:{oneofKind:"string",string:{constraints:[{rule:{oneofKind:"maxLines",maxLines:{value:3}}}]}}},{name:"text_min_lines",description:"Enter minimum 2 lines",title:"Text min lines",prompt:"Text min lines",config:{oneofKind:"string",string:{constraints:[{rule:{oneofKind:"minLines",minLines:{value:2}}}]}}},{name:"text_max_length_per_line",description:"Enter maximum 5 symbols per line",title:"Max length per line",prompt:"Max length per line",config:{oneofKind:"string",string:{constraints:[{rule:{oneofKind:"maxLengthPerLine",maxLengthPerLine:{value:5}}}]}}},{name:"text_min_length_per_line",description:"Enter minimum 5 symbols per line",title:"Max length per line",prompt:"Max length per line",config:{oneofKind:"string",string:{constraints:[{rule:{oneofKind:"minLengthPerLine",minLengthPerLine:{value:5}}}]}}},{name:"text_pattern",description:"Enter string by pattern /^[A].{1}[0-5]{3,3}[D]$/",title:"Max length per line",prompt:"Max length per line",config:{oneofKind:"string",string:{constraints:[{rule:{oneofKind:"pattern",pattern:{value:"^[A].{1}[0-5]{3,3}[D]$"}}}]}}},{name:"text_required",description:"Required text",title:"Required text",prompt:"Required text",required:!0,config:{oneofKind:"string",string:{constraints:[]}}},{name:"number_max",description:"Enter number less 100",prompt:"Number max",title:"Number max",config:{oneofKind:"number",number:{constraints:[{rule:{oneofKind:"max",max:{value:100}}}]}}},{name:"number_min",description:"Enter number more 100",prompt:"Min number",title:"Min number",config:{oneofKind:"number",number:{constraints:[{rule:{oneofKind:"min",min:{value:100}}}]}}},{name:"number_is_integer",description:"Enter integer number",prompt:"Integer",title:"Integer",config:{oneofKind:"number",number:{constraints:[{rule:{oneofKind:"isInteger",isInteger:{value:!0}}}]}}},{name:"number_required",description:"Required number",prompt:"Required number",title:"Required number",config:{oneofKind:"number",number:{constraints:[]}},required:!0},{name:"number_format",description:"",prompt:"",title:"",config:{oneofKind:"number",number:{constraints:[],format:"+# (###) ### ####"}}},{name:"variant_required",required:!0,config:{oneofKind:"variant",variant:{variants:[{value:"https://google.com",title:"Google"},{value:"https://bing.com",title:"Bing"},{value:"https://yandex.com",title:"Yandex"}]}}},{name:"variant_in_group",config:{oneofKind:"variant",variant:{variants:[{value:"Red"},{value:"Green"},{value:"Blue"}]}}},{name:"image_root",config:{oneofKind:"image",image:{root:"/test"}}}]},YQ={image_root:"602cd9875b4c09aac9529116",text_max_length:"asd",number_max:"38",variant_in_group:"Green"},KQ={image_root:"602cd9875b4c09aac9529114",text_max_length:"asd2",number_max:"85",variant_in_group:"Red"},QQ={image_root:"602cd9865b4c09aac9529112",text_max_length:"ytu",number_max:"64",variant_in_group:"Red"},ZQ={image_root:"602cd9865b4c09aac9529110",text_max_length:"qwcgl",number_max:"3",variant_in_group:"Blue"},JQ={image_root:"602cd9855b4c09aac952910e",text_max_length:"zerwe",number_max:"12",variant_in_group:"Green"},eZ={image_root:"602cd9845b4c09aac952910a",text_max_length:"uibnmbn",number_max:"63",variant_in_group:"Blue"};let tZ=(()=>{class e{constructor(e,t){this._httpClient=e,this._confSrv=t,this._confSrv.$designAtomsApi.subscribe(e=>this._atomsApi=e),this._confSrv.$assetStorageApi.subscribe(e=>this._storageApi=e),this._confSrv.$tenantId.subscribe(e=>this._tenantId=e)}createBlankProduct(e,t){const n=new eU(e,t);return n.containers.add(uj(new Aj,{name:bU.BG_CONTAINER_NAME,locked:!0})),n.containers.add(uj(new Aj,{name:bU.MAIN_CONTAINER_NAME,locked:!1})),n.printAreas.add(new YV(FN.FromObject({height:t,width:e,left:0,top:0}))),n.name="Page 1",new CU([n,new eU(e,t),new eU(e,t),new eU(e,t)])}createTestProduct(){const e=this.createBlankProduct(600,400),{items:t}=e.surfaces.get(0).containers.get(1);return t.add(Object(hx.merge)(new RH($N.rectangle(50,50,400,200)),{fillColor:new Kj({r:200,g:150,b:0,a:255}),borderColor:new Kj({r:0,g:0,b:0,a:0}),borderWidth:0,name:"Rect"})),t.add(Object(hx.merge)(new RH($N.rectangle(80,80,400,200)),{fillColor:new Kj({r:138,g:100,b:146,a:255}),borderColor:new Kj({r:0,g:0,b:0,a:0}),borderWidth:0,name:"Rect 1"})),t.add(Object(hx.merge)(new gz("Text",new FN(100,50,400,200),"OpenSans",14),{name:"Text item"})),e}productVariant_1(){const e=new eU(600,600);this._addContainer(e),this._addItem(e,this._createContentItem(gz.type,"Andrey","Name")),this._addItem(e,this._createContentItem(gz.type,"Kernichniy","Surname")),this._addItem(e,this._createContentItem(gz.type,"15","Level")),this._addItem(e,this._createContentItem(uz.type,"1234567","Barcode"));const t=this._createContentItem(uz.type,"","Qr");t.barcodeFormat=JH.QR_CODE,this._addItem(e,t);const n=new eU(600,600),r=this._createContentItem(uz.type,"","Qr");r.barcodeFormat=JH.QR_CODE;const i=this._createContentItem(Cz.type,[this._createContentItem(gz.type,"Promises","Song name"),this._createContentItem(gz.type,"You got me so wild,\n      How can I ever deny,","Song text"),this._createContentItem(gz.type,"Nero","Author"),this._createContentItem(gz.type,"Promises","Song name"),r],"Group Item");this._addContainer(n),this._addItem(n,i);const o=new eU(600,600);this._addContainer(o),this._addItem(o,this._createContentItem(BV.type,"Example text","Text")),this._addItem(o,this._createContentItem(uz.type,"1234567","Barcode"));const s=this._createContentItem(uz.type,"","Qr");return s.barcodeFormat=JH.QR_CODE,this._addItem(o,s),new CU([e,n,o])}_addContainer(e){e.containers.add(uj(new Aj,{name:bU.MAIN_CONTAINER_NAME,locked:!1}))}_addItem(e,t){e.containers.firstOrDefault().items.add(t)}_createContentItem(e,t,n){switch(e){case BV.type:{const e=new BV(t);return e.name=n,e.font.postScriptName="ArialMT",e}case gz.type:{const e=new gz(t);return e.name=n,e.font.postScriptName="ArialMT",e}case uz.type:{const e=new uz;return e.barcodeContent=t,e.name=n,e}case FV.type:{const e=new FV;return e.content=t,e.name=n,e}case Cz.type:{const e=new Cz(t);return e.name=n,e}}}createTestSchema(){return ad(this,void 0,void 0,function*(){return zR.create($Q)})}createTestDataSet(){return ad(this,void 0,void 0,function*(){const e=yield this.createTestSchema();return UR.create({schema:e,rows:[{cells:YQ},{cells:KQ},{cells:QQ},{cells:ZQ},{cells:JQ},{cells:eZ}]})})}writeTestSchemaToProduct(e){return ad(this,void 0,void 0,function*(){const t=yield this.createTestSchema(),n=new FormData;n.append("schema",new Blob([zR.toBinary(t)])),yield this._httpClient.put(`${this._atomsApi}/api/atoms/v1/designs/${e}/schema`,n,{params:new Fb({fromObject:{tenantId:this._tenantId}})}).toPromise()})}writeTestDataSet(e){return ad(this,void 0,void 0,function*(){e||(e=yield this.createTestDataSet());const t=UR.toBinary(e),n=new FormData;return n.append("file",new Blob([new Uint8Array(t)])),n.append("path","/"),n.append("name","test_data_schema"),(yield this._httpClient.post(`${this._storageApi}/api/storage/v1/dataSets`,n,{params:new Fb({fromObject:{tenantId:this._tenantId}})}).toPromise()).id})}}return e.\u0275fac=function(t){return new(t||e)(sr(Gb),sr(oQ))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),nZ=(()=>{class e{constructor(e,t){this._productSrv=e,this._viewer=t,this._surfaces=new LC([]),this._current=new LC(null),this._productSrv.$product.subscribe(e=>{this._surfaces.next(e.surfaces.toArray());const t=e.surfaces.get(0);this.setCurrent(t)})}get $surfaces(){return this._surfaces.asObservable()}get $current(){return this._current.asObservable().pipe(xd(e=>!!e))}setCurrent(e){this._viewer.surface=e,this._current.next(e)}}return e.\u0275fac=function(t){return new(t||e)(sr(qQ),sr(FK))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class rZ{constructor(e,t){this.options=e,this.formatString=t}}class iZ{constructor(e,t,n){this.whole=e,this.decimal=t,this.positive=n}toNumber(){return Number([this.positive?"":"-",this.whole.join(""),".",this.decimal.join("")].join(""))}static stripTrailingZeros(e){return new iZ(this.stripTrailingZerosLeft(e.whole),this.stripTrailingZerosRight(e.decimal),e.positive)}static round(e,t){if(e.decimal.length>t){const n=e.toNumber();return this.fromString(n.toFixed(t))}return e}static fromString(e){var t;const n=Number(e);if(!isNaN(n)){const r=(null!==(t=e.split(".")[1])&&void 0!==t?t:[]).length;return iZ.fromNumber(n,r)}throw new Error(`A ${e} is not a number!`)}static fromNumber(e,t){var n,r;const i=e.toFixed(t).split(".");let o=null!==(n=i.shift())&&void 0!==n?n:"";const s=null!==(r=i.shift())&&void 0!==r?r:"";let a=!0;"-"===o[0]&&(a=!1,o=o.slice(1));const l=new iZ(Array.from(o),Array.from(s),a);return this.stripTrailingZeros(l)}static stripTrailingZerosLeft(e){const t=e.findIndex(e=>"0"!=e);return e.slice(-1===t?e.length:t,e.length)}static stripTrailingZerosRight(e){const t=[].concat(e).reverse().findIndex(e=>"0"!=e);return e.slice(0,-1===t?0:e.length-t)}static isDigitLarger5(e){return-1!=["6","7","8","9"].indexOf(e)}}class oZ extends rZ{constructor(){super(...arguments),this.escapeSymbolRegExp=/(\\(?![\s|\\]))/g,this.extractValue=(e,t)=>{var n;const r=null!==(n=t.match(e))&&void 0!==n?n:[];return r.length>=2?{result:r[1],remainder:t.replace(e,"")}:{result:null,remainder:t}}}format(e){if(e>9999999999999998)throw new Error("Input number is too big");const t=this.getAlignedDigitizedNumber(e),n=this.getFormatParts();return[t.positive?"":"-",this.fillPlaceholdersLeft(n[0],t),t.decimal.length>0?this.options.decimalSeparator:"",this.fillPlaceholdersRight(n[1],t)].join("")}static create(e,t){return new oZ(e,t)}static compatible(e){return e.split(".").every(e=>Array.from(e).some(this.isPlaceholder)&&!Array.from(e).some(this.isForbidden))}static isPlaceholder(e){return"#"===e||"?"===e||"0"===e}static isForbidden(e){return"/"===e||"%"===e}fillPlaceholdersLeft(e,t){const n=[],r=[].concat(t.whole),i=e.findIndex(e=>oZ.isPlaceholder(e)),o=e.slice(void 0,i).reverse(),s=e=>{oZ.isPlaceholder(e)?n.unshift(r.pop()):this.checkForEscapeSymbols(e)?n.unshift(this.removeEscapeSymbols(e)):n.unshift(e)};for(e.slice(i,void 0).reverse().forEach(s);r.length>0;)n.unshift(r.pop());return o.forEach(s),n.join("")}fillPlaceholdersRight(e,t){const n=[],r=Array.from(e),i=[].concat(t.decimal);return r.forEach(e=>{oZ.isPlaceholder(e)?n.push(i.shift()):this.checkForEscapeSymbols(e)?n.push(this.removeEscapeSymbols(e)):n.push(e)}),n.join("")}removeEscapeSymbols(e){return e.replace(this.escapeSymbolRegExp,"")}checkForEscapeSymbols(e){return this.escapeSymbolRegExp.test(e)}getAlignedDigitizedNumber(e){const t=this.getFormatParts(),n=this.getPlaceholdersOnly(t[1]),r=iZ.fromNumber(e,this.options.precision),i=r.decimal.length>n.length?iZ.round(r,n.length):r;return new iZ(this.getAlignedLeft(t[0],i),this.getAlignedRight(t[1],i),i.positive)}getFormatParts(){const e=this.formatString.split(/(?<!\\)\./);return[this.splitFormat(e[0]),this.splitFormat(e[1])]}splitFormat(e){var t;const n=[],r=[/^(?<!\\)\"(.*?)(?<!\\)\"/,/^(\\.{1})/,/^(.{1})/];let i=(null!=e?e:"").slice();for(;i.length>0;){const e=qR.Maybe.fromFalsy(r.map(e=>this.extractValue(e,i)).find(e=>null!=e.result));n.push(null!==(t=e.just().result)&&void 0!==t?t:""),i=e.just().remainder}return n}getAlignedLeft(e,t){const n=this.getPlaceholdersOnly(e),r=[].concat(t.whole);let i=n.length-r.length;for(;n.length>r.length;){switch(n[i-1]){case"#":r.unshift("");break;case"?":r.unshift(" ");break;case"0":r.unshift("0");break;default:throw new Error(`The ${n[i]} is unexpected placeholder.`)}i--}return r}getAlignedRight(e,t){const n=this.getPlaceholdersOnly(e),r=[].concat(t.decimal);let i=r.length;for(;n.length>r.length;){switch(n[i]){case"#":r.push("");break;case"?":r.push(" ");break;case"0":r.push("0");break;default:throw new Error(`The ${n[i]} is unexpected placeholder.`)}i++}return r}getPlaceholdersOnly(e){return e.filter(oZ.isPlaceholder)}}class sZ{constructor(e,t,n){this.decimalSeparator=null!=e?e:".",this.thousandSeparator=null!=t?t:"",this.precision=null!=n?n:20}}class aZ extends rZ{initNumberFormatter(){var e;const t=null!==(e=this.formatString.match(this.getNestedValueRegExp()))&&void 0!==e?e:[];if(!(t.length>=2))throw new Error(`The ${this.formatString} is unexpected format string for this format strategy.`);this.numberFormatter=this.getNumberFormatter(t[1],this.options)}format(e){var t,n;this.initNumberFormatter();const r=null!==(n=null===(t=this.numberFormatter)||void 0===t?void 0:t.format(this.modifyNumber(e)))&&void 0!==n?n:"";return this.formatString.replace(this.getNestedValueRegExp(),`${this.processDollarForReplace(r)}${this.getMeaningfulRegExpGroups().map(e=>`$${e}`).join("")}`)}processDollarForReplace(e){return e.replace("$","$$$$")}}class lZ extends aZ{static compatible(e){return this.percentRegex.test(e)}static create(e,t){return new lZ(e,t)}getNumberFormatter(e,t){return uZ.build(e,t)}getMeaningfulRegExpGroups(){return[2]}getNestedValueRegExp(){return lZ.percentRegex}modifyNumber(e){return 100*e}}lZ.percentRegex=/(.*)(%$)/;class cZ extends aZ{static create(e,t){return new cZ(e,t)}static compatible(e){return this.thousandReducerRegex.test(e)}getNumberFormatter(e,t){return uZ.build(e,t)}getMeaningfulRegExpGroups(){return[3]}getNestedValueRegExp(){return cZ.thousandReducerRegex}modifyNumber(e){return e/Math.pow(1e3,this.getOrderOfMagnitude())}getOrderOfMagnitude(){var e;const t=null!==(e=this.formatString.match(this.getNestedValueRegExp()))&&void 0!==e?e:[];if(t.length>=3)return t[2].length;throw new Error(`The ${this.formatString} does not contain any commas. Fail to determine an order of magnitude.`)}}cZ.thousandReducerRegex=/^([^,]+)(,+)([^,#0?]*$)/;class uZ{constructor(e,t){this.options=e,this.formatString=t}static build(e,t){return this.findStrategy(e,null!=t?t:new sZ).just()}static validate(e){return this.findStrategy(e,new sZ).isJust()}static findStrategy(e,t){return qR.Maybe.fromFalsy([lZ,cZ,oZ].find(t=>t.compatible(e))).map(n=>n.create(t,e))}}let hZ=(()=>{class e{constructor(e,t,n,r,i,o,s){this._pagesSrv=e,this._productSrv=t,this._daItemSrv=n,this._jsonSerializer=r,this._cm=i,this._viewer=o,this._confSrv=s,this._surfaces=[],this._formatMap=new Map,this._assetStorageImages=new Map,this._allowManipulations=!1,this._pagesSrv.$surfaces.subscribe(e=>this._surfaces=e),this._productSrv.$product.subscribe(()=>setTimeout(()=>this.updateViolation(),5)),this._confSrv.$allowManipulations.subscribe(e=>this._allowManipulations=e)}set format(e){this._formatMap=e}writeValue(e,t){return ad(this,void 0,void 0,function*(){const n=this.findItems(e),r=this._formatMap.get(e),i=n.map(e=>this.writeToType(e,t,r));yield Promise.all(i)})}writeToType(e,t,n){return ad(this,void 0,void 0,function*(){e instanceof ZH&&this._writeToText(e,t,n),e instanceof uz&&this._writeToBarcode(e,t,n),e instanceof nV&&(yield this._writeToImage(e,t)),e instanceof FV&&this._writeToPlaceholder(e,t,n),e instanceof Cz&&this._writeToGroup(e,t)})}readPermissions(e){return this.findItems(e).map(e=>this._readPermissionFromType(e)).reduce((e,t)=>e&&t,!0)}readValue(e){const[t]=this.findItems(e);if(t)return this._readFromType(t);throw new Error(`Can not found items with name "${e}"`)}_readFromType(e){if(e instanceof ZH)return"string"==typeof e.tags.nonFormattedValue?e.tags.nonFormattedValue:lj(e.text);if(e instanceof uz)return"string"==typeof e.tags.nonFormattedValue?e.tags.nonFormattedValue:e.barcodeContent;if(e instanceof nV)return e.tags.imageValue;if(e instanceof FV){if(e.isBarcodePlaceholder){const t=e.content;return"string"==typeof e.tags.nonFormattedValue?e.tags.nonFormattedValue:t.barcodeContent}return e.tags.imageValue}return e instanceof Cz?e.items.toArray().find(e=>e.visible).name:""}_readPermissionFromType(e){return e instanceof ZH?e.textPermissions.allowChangeText:e instanceof uz?e.barcodePermissions.allowChangeBarcodeContent:e instanceof nV?e.imagePermissions.allowChangeImage:e instanceof FV?e.placeholderPermissions.allowEditContent:e instanceof Cz?e.groupItemPermissions.allowReplaceContent:void 0}findItems(e){let t=[];return this._surfaces.forEach(n=>{this.findInSurface(n,t=>t.name===e,e=>t.push(e))}),t}_findInItem(e,t,n,r){rQ(e)?n(e)?r(e,t):e.items.forEach(e=>this._findInItem(e,t,n,r)):n(e)&&r(e,t)}findInSurface(e,t,n){e.containers.forEach(r=>r.items.forEach(r=>this._findInItem(r,e,t,n)))}findSurfacesWithItem(e){const t=new Set;return this._surfaces.forEach(n=>this.findInSurface(n,t=>t.name===e,(e,n)=>t.add(n))),Array.from(t)}formatString(e,t){let n;return uZ.validate(e||"")&&(n=uZ.build(e).format(Number(parseFloat(t)))),n}_writeToText(e,t,n){const r=this.formatString(n,t);t="number"==typeof t?t.toString():t,e.tags.nonFormattedValue=t,t=r||t,e.text=aj(e.text)?`<p>${t}</p>`:t}_writeToBarcode(e,t,n){const r=this.formatString(n,t);e.tags.nonFormattedValue=t,t=r||t.toString(),e.barcodeContent=t}_writeToGroup(e,t){e.items.forEach(e=>{e.visible=e.name==t})}_writeToImage(e,t){return ad(this,void 0,void 0,function*(){t?yield this._applyImgValue(e,t):this._restoreOriginalImage(e),this.updateViolation()})}_writeToPlaceholder(e,t,n){return ad(this,void 0,void 0,function*(){e.isBarcodePlaceholder?this._writeToBarcode(e.content,t,n):t?(yield this._applyImgValue(e,t),e.isStubContent=!1):this._restoreOriginalImage(e),this.updateViolation()})}_applyImgValue(e,t){return ad(this,void 0,void 0,function*(){let n;if(e instanceof FV?e.content&&(n=this._jsonSerializer.serializeModelComponent(e.content)):n=this._jsonSerializer.serializeModelComponent(e),"string"==typeof t)yield this._applySourceFromAssetId(e,t);else{const n=t.payload instanceof WF?this._applySourceFromAssetId(e,t.payload.id):this._applySourceFromImage(e,t.payload);yield n}this._keepOriginalImage(e,n),e.tags.imageValue=t})}_applySourceFromAssetId(e,t){return ad(this,void 0,void 0,function*(){let n=this._assetStorageImages.get(t);n||(n=this._daItemSrv.createItem({sourceId:t},"Image"),this._assetStorageImages.set(t,n));const r=yield n,i=Object.assign({},e.tags);yield this._cm.execute(GG.setImageItem,{item:r.clone(),targetItem:e}),e.tags=i})}_applySourceFromImage(e,t){return ad(this,void 0,void 0,function*(){const n=JSON.parse(JSON.stringify(t)),r=this._jsonSerializer.productParser.parseItem(n),i=Object.assign({},e.tags);yield this._cm.execute(GG.setImageItem,{item:r,targetItem:e}),e.tags=i})}_keepOriginalImage(e,t){e.tags.wasModified||(e.tags.originalSource=t,e.tags.wasModified=!0)}_restoreOriginalImage(e){if(e.tags.originalSource){const t=JSON.parse(e.tags.originalSource);this._applySourceFromImage(e,t)}else e instanceof FV&&(e.content=null,this._daItemSrv.updatePlaceholderContent(e));delete e.tags.originalSource,delete e.tags.wasModified,delete e.tags.imageValue}updateViolation(){this._allowManipulations?this._viewer.canvas.updateViolationContainers(!0):(this._viewer.setMouseBehavior(X$.Selection),this._viewer.canvas.updateViolationContainers(!0),this._viewer.setMouseBehavior(X$.Locked))}}return e.\u0275fac=function(t){return new(t||e)(sr(nZ),sr(qQ),sr(sQ),sr(vU),sr(Xq),sr(FK),sr(oQ))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),dZ=(()=>{class e{constructor(e,t,n,r,i){this._httpClient=e,this._configSrv=t,this._imgProcessor=n,this._dataSetProcessor=r,this._imagesStorage=i,this._previewCache=new Map,this._configSrv.$tenantId.subscribe(e=>this._tenantId=Number(e)),this._configSrv.$designAtomsApi.subscribe(e=>this._designAtomsApi=e),this._configSrv.$assetStorageApi.subscribe(e=>this._imagesStorage.baseUrl=e),this._configSrv.$assetProcessorApi.subscribe(e=>{this._imgProcessor.baseUrl=e,this._dataSetProcessor.baseUrl=e})}createPreviewLink(e,t,n){return ad(this,void 0,void 0,function*(){return this._imgProcessor.preparePreviewUrl(e,"dd-editor",e,t,n,null,null,null,null,!1,this._tenantId).toPromise()})}getDataSet(e){return ad(this,void 0,void 0,function*(){try{const t=yield this._dataSetProcessor.exportDataSet(e,this._tenantId).toPromise(),n=yield t.data.arrayBuffer();return UR.fromBinary(new Uint8Array(n))}catch(t){switch(t.status){case 404:throw mQ;case 500:throw fQ}}})}checkDataSet(e){return ad(this,void 0,void 0,function*(){try{const t=yield this._dataSetProcessor.check(e,this._tenantId).toPromise();let n=!1;return t.dataValidationProblems.forEach(e=>{"Missing"===e.validationRule&&(n=!0)}),n}catch(t){}})}getImage(e){return ad(this,void 0,void 0,function*(){return yield this._imagesStorage.get(e,this._tenantId).toPromise()})}getFiles(){if(this._files)return this._files;{const e=this._imagesStorage.getAll("/",!0,null,null,null,null,null,this._tenantId).pipe(P(e=>e.items)).toPromise();return this._files=e,this._files}}getFolders(){return ad(this,void 0,void 0,function*(){return this._folders||(this._folders=this._imagesStorage.getAllFolders(this._tenantId).pipe(P(e=>e.map(e=>({name:e.name,id:e.id,path:`${e.path}${e.name}`})).sort((e,t)=>e.path.split("/").length-t.path.split("/").length))).toPromise()),this._folders})}getFile(e){return this.getImage(e)}createPreview(e){return ad(this,void 0,void 0,function*(){const t=yield e.arrayBuffer();return URL.createObjectURL(new Blob([t]))})}createTreePreview(e){return ad(this,void 0,void 0,function*(){const t=this._previewCache.get(e);if(t)return t;{const t=this._imgProcessor.preparePreviewUrl(e,"uploader",e,128,128,null,null,null,null,!1,this._tenantId).toPromise();return this._previewCache.set(e,t),t}})}uploadFile(e){const t=new FormData;return t.set("sourceType","File"),t.set("sourceFile",e),this._httpClient.post(`${this._designAtomsApi}/api/atoms/v1/itemCreator`,t,{params:new Fb({fromObject:{itemType:"Image",tenantId:this._tenantId.toString()}}),reportProgress:!0,observe:"events"})}}return e.\u0275fac=function(t){return new(t||e)(sr(Gb),sr(oQ),sr(kQ),sr(OQ),sr(HQ))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pZ=(()=>{class e{constructor(e,t,n,r){this._configSrv=e,this._itemSrv=t,this._fsSrv=n,this._designAtomsApi=r,this._schema=new LC(null),this._configSrv.$tenantId.subscribe(e=>this._tenantId=Number(e)),this._configSrv.$designAtomsApi.subscribe(e=>this._designAtomsApi.baseUrl=e)}set schema(e){this._schema.next(e),this._itemSrv.format=this.mapFormat(e)}get $schema(){return this._schema.asObservable()}getProductSchema(e){return ad(this,void 0,void 0,function*(){try{const t=yield this._designAtomsApi.loadDataSchema(e,this._tenantId).toPromise(),n=yield t.data.arrayBuffer();return zR.fromBinary(new Uint8Array(n))}catch(t){throw uQ}})}mapFormat(e){const t=new Map;return e.fields.forEach(e=>{if("number"===e.config.oneofKind){const n=XR.getNumberConfig(e);n.format&&t.set(e.name,n.format)}}),t}createFormValue(e){try{const t={};return e.fields.map(e=>t[e.name]=this._itemSrv.readValue(e.name)),t}catch(t){throw hQ}}createFormConfig(e,t){const n=e.fields.map(e=>{const n={label:e.title||e.name,name:e.name,placeholder:e.prompt||e.name,description:e.description,value:t[e.name]};switch(e.config.oneofKind){case"number":return this._createNumberField(e,n);case"string":return this._createStringField(e,n);case"variant":return this._createOptionField(e,n);case"image":return this._createImageField(e,n)}});return Promise.all(n)}buildSchemaTitle(e,t){return ad(this,void 0,void 0,function*(){const n=[];(t=t||this._schema.value).fields.forEach(e=>{"image"===e.config.oneofKind&&n.push(e.name)});const r=n.map(t=>this._fsSrv.getImage(e[t])),i=yield Promise.all(r),o=Object.assign({},e);i.forEach(e=>{Object.keys(o).forEach(t=>{o[t]===e.id&&(o[t]=e.name)})});const s=new BA(t);return t?s.buildTitle(o):""})}checkDataSet(e,t){let n=!1;e.fields.forEach(e=>n=!t.hasOwnProperty(e.name));let r=!1;return Object.keys(t).forEach(t=>{-1===e.fields.findIndex(e=>e.name===t)&&(r=!0)}),n||r}_createValidator(e){return t=>{var n;const r=new RA(e);let i;switch(e.config.oneofKind){case"image":i=r.validate({[e.name]:t.value?`${e.config.image.root}${null===(n=t.value)||void 0===n?void 0:n.name}`:""});break;default:i=r.validate({[e.name]:t.value})}return i.isRightValue?{}:{[i.value.rule]:i.value.reason}}}_createNumberField(e,t){return ad(this,void 0,void 0,function*(){const n=[];return XR.getNumberConfig(e).constraints.forEach(t=>{switch(t.rule.oneofKind){case"min":n.push({name:"min",validator:this._createValidator(e)});break;case"max":n.push({name:"max",validator:this._createValidator(e)});break;case"isInteger":n.push({name:"is-integer",validator:this._createValidator(e)})}}),e.required&&n.push({name:"required",validator:this._createValidator(e)}),new bF(Object.assign(Object.assign({},t),{validations:n}))})}_createStringField(e,t){return ad(this,void 0,void 0,function*(){const n=XR.getStringConfig(e),r=[];let i=!1;n.constraints.forEach(t=>{const o=XR.getStringRule(t);switch(t.rule.oneofKind){case"maxLength":r.push({name:"max-length",validator:this._createValidator(e)});break;case"maxLengthPerLine":n.constraints.find(({rule:e})=>"maxLines"===e.oneofKind||"minLines"===e.oneofKind)||(i=!0),r.push({name:"max-length-per-line",validator:this._createValidator(e)});break;case"maxLines":i=i||o.value>1,r.push({name:"max-lines",validator:this._createValidator(e)});break;case"minLength":r.push({name:"min-length",validator:this._createValidator(e)});break;case"minLengthPerLine":n.constraints.find(({rule:e})=>"maxLines"===e.oneofKind||"minLines"===e.oneofKind)||(i=!0),r.push({name:"min-length-per-line",validator:this._createValidator(e)});break;case"minLines":i=i||o.value>1,r.push({name:"min-lines",validator:this._createValidator(e)});break;case"pattern":r.push({name:"pattern",validator:this._createValidator(e)})}}),e.required&&r.push({name:"required",validator:this._createValidator(e)});const o=Object.assign(Object.assign({},t),{validations:r});return i?new wF(o):new bF(o)})}_createOptionField(e,t){return ad(this,void 0,void 0,function*(){const n=XR.getVariantConfig(e),r={};n.variants.forEach((e,t)=>r[e.value.toString()]={label:e.title||e.value,order:t});const i=e.required?[{name:"required",validator:this._createValidator(e)}]:[];return new CF(Object.assign(Object.assign({},t),{validations:i,options:r}))})}_createImageField(e,t){return ad(this,void 0,void 0,function*(){const n=XR.getImageConfig(e);n.sources=null!=n.sources?n.sources:xR.ANY;const r=e.required?[{name:"required",validator:this._createValidator(e)}]:[];return new xF(Object.assign({acceptFiles:"image/jpeg,image/jpg,image/png,image/gif",maxFileSize:5242880,multiply:!1,allowUpload:n.sources===xR.UPLOADS||n.sources===xR.ANY,allowMediaLib:n.sources===xR.ASSETS||n.sources===xR.ANY,root:n.root,validations:r},t))})}}return e.\u0275fac=function(t){return new(t||e)(sr(oQ),sr(hZ),sr(dZ),sr(vQ))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fZ=(()=>{class e{constructor(e,t,n){this._itemSrv=e,this.pagesSrv=t,this._canvas=n,this._focusedMap=new Map,this._enteredMap=new Map,this._spotlightSurfaces=new x,this.pagesSrv.$current.subscribe(e=>this._surface=e)}get $spotlightSurfaces(){return this._spotlightSurfaces.asObservable()}spotlightByFocus(e,t){this._blur&&(this._blur=!1,this.extinguishByBlur(this._last.name)),this._last={name:e,isError:t},this._focusedMap.set(e,!0),this.spotlightItem(e,t)}spotlightByHover(e,t){this._enteredMap.set(e,!0),this.spotlightItem(e,t)}spotlightBySymbols(){this._focusedMap.set(this._last.name,this._last.isError),this.spotlightItem(this._last.name,this._last.isError)}extinguishBySymbols(){Array.from(this._focusedMap).reduce((e,t)=>e[1]||t[1],!1)&&(this._focusedMap.set(this._last.name,!1),this._enteredMap.get(this._last.name)||this.extinguishItem(this._last.name))}extinguishByBlur(e){this._blur=!0,this._focusedMap.set(e,!1),this._enteredMap.get(e)||this.extinguishItem(e)}extinguishByLeave(e){this._enteredMap.set(e,!1),this._focusedMap.get(e)||this.extinguishItem(e)}spotlightItem(e,t){let n=[];this._itemSrv.findInSurface(this._surface,t=>t.name===e,e=>n.push(e)),this._canvas.showSpotlight(n,{transition:250,color:t?"#30c2ff":"#dc3545",width:2,name:e});const r=this._itemSrv.findSurfacesWithItem(e);this._spotlightSurfaces.next(Array.from(r))}updateSpotlight(e,t){if(this._focusedMap.get(e)||this._enteredMap.get(e)){this._last={name:e,isError:t};let n=[];this._itemSrv.findInSurface(this._surface,t=>t.name===e,e=>n.push(e)),this._canvas.updateSpotlight(n,{transition:250,color:t?"#30c2ff":"#dc3545",width:2,name:e})}}extinguishItem(e){let t=[];this._itemSrv.findInSurface(this._surface,t=>t.name===e,e=>t.push(e)),this._canvas.hideSpotlight(t),this._spotlightSurfaces.next([])}}return e.\u0275fac=function(t){return new(t||e)(sr(hZ),sr(nZ),sr(QY))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const mZ=["list"],gZ=function(e){return{active:e}};function yZ(e,t){if(1&e&&(Es(0,"mat-list-option",9),la(1),Ss()),2&e){const e=t.$implicit,n=t.index,r=Bs();Cs("ngClass",Dl(4,gZ,r.spotlight.includes(e)))("value",e),Ui(1),ha(" ",n+1,". ",e.name," ")}}const _Z=function(e){return{hide:e}};let vZ=(()=>{class e{constructor(e){this._spotlightItem=e,this.surfaces=[],this.select=new Xl,this.close=new Xl,this.spotlight=[],this._spotlightItem.$spotlightSurfaces.subscribe(e=>this.spotlight=e)}ngOnChanges(){this.matList&&(this.matList.writeValue([]),this.matList.writeValue([this.current]))}}return e.\u0275fac=function(t){return new(t||e)(ws(fZ))},e.\u0275cmp=Ue({type:e,selectors:[["au-pages-list"]],viewQuery:function(e,t){if(1&e&&ic(mZ,1),2&e){let e;rc(e=sc())&&(t.matList=e.first)}},inputs:{isOpen:"isOpen",surfaces:"surfaces",current:"current"},outputs:{select:"select",close:"close"},features:[at],decls:11,vars:6,consts:[[1,"pages-panel",3,"ngClass"],[1,"head","d-flex","align-items-center","justify-content-between"],[1,"title"],["mat-icon-button","",1,"close-button",3,"matTooltip","click"],["svgIcon","dde-close"],[1,"list"],[3,"multiple","selectionChange"],["list",""],[3,"ngClass","value",4,"ngFor","ngForOf"],[3,"ngClass","value"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"div",1),Es(2,"div",2),la(3,"Pages"),Ss(),Es(4,"div"),Es(5,"button",3),Ds("click",function(){return t.close.emit()}),Ps(6,"mat-icon",4),Ss(),Ss(),Ss(),Es(7,"div",5),Es(8,"mat-selection-list",6,7),Ds("selectionChange",function(e){return t.select.emit(e.option.value)}),vs(10,yZ,2,6,"mat-list-option",8),Ss(),Ss(),Ss()),2&e&&(Cs("ngClass",Dl(4,_Z,!t.isOpen)),Ui(5),Cs("matTooltip","Close"),Ui(3),Cs("multiple",!1),Ui(2),Cs("ngForOf",t.surfaces))},directives:[sh,yE,wC,Iw,$S,lh,qS],styles:[".pages-panel{height:100%}.pages-panel.hide{display:none}.pages-panel .head{padding-left:20px;height:56px}.pages-panel .head .title{font-weight:400;font-size:16px;line-height:24px;color:#282828}.pages-panel .list{height:calc(100% - 56px);overflow-y:auto}.pages-panel .list .mat-list-item-content{padding:0 20px!important}.pages-panel .mat-list-base{padding-top:0}.pages-panel .mat-list-item{height:40px!important}.pages-panel .mat-list-item.active{background:rgba(0,0,0,.04);transition:background .3s}.pages-panel .mat-list-text{color:#282828;font-size:14px;line-height:20px}"],encapsulation:2}),e})(),bZ=(()=>{class e{transform(e){return""===e||null==e?"<No data>":e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=Ke({name:"noData",type:e,pure:!0}),e})(),wZ=(()=>{class e{constructor(e){this._schemaSrv=e,this._schemaSrv.$schema.subscribe(e=>this._schema=e)}transform(e){var t;if(null===(t=this._schema)||void 0===t?void 0:t.titleTemplate)return this._schemaSrv.buildSchemaTitle(e);{const t=Object.keys(e)[0];return Promise.resolve(e[t])}}}return e.\u0275fac=function(t){return new(t||e)(ws(pZ))},e.\u0275pipe=Ke({name:"idString",type:e,pure:!0}),e})();const CZ=["list"];function xZ(e,t){if(1&e&&(Es(0,"mat-list-option",13),la(1),Hl(2,"noData"),Hl(3,"async"),Hl(4,"idString"),Ss()),2&e){const e=t.$implicit;Cs("value",e.cells),Ui(1),ua(" ",zl(2,2,zl(3,4,zl(4,6,e.cells)))," ")}}let EZ=(()=>{class e{constructor(){this.rows=[],this.close=new Xl,this.selected=new Xl,this.search=new lb,this.filteredRows=[]}ngOnInit(){this.filteredRows=this.rows,this.search.valueChanges.subscribe(e=>{if(e){const t=e.split(" ").filter(e=>!!e),n=this.rows.filter(e=>{let n;return Object.keys(e.cells).forEach(r=>t.forEach(t=>n=n||e[r].toLowerCase().includes(t.toLowerCase()))),n});this.filteredRows=n}else this.filteredRows=this.rows})}selectSet(e){this.selected.emit(e),this.search.setValue(""),this.matList.writeValue([])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["au-prefill-search"]],viewQuery:function(e,t){if(1&e&&ic(CZ,1),2&e){let e;rc(e=sc())&&(t.matList=e.first)}},inputs:{rows:"rows"},outputs:{close:"close",selected:"selected"},decls:16,vars:4,consts:[[1,"prefill-search"],[1,"search"],[1,"head","d-flex","align-items-center","justify-content-between"],[1,"title"],["mat-icon-button","",1,"close",3,"matTooltip","click"],["svgIcon","dde-close"],["appearance","outline",1,"search-input"],["svgIcon","dde-search","matPrefix",""],["autocomplete","off","placeholder","Search","matInput","",3,"formControl"],[1,"list"],[3,"multiple","selectionChange"],["list",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"div",1),Es(2,"div",2),Es(3,"div",3),la(4,"Choose data"),Ss(),Es(5,"div"),Es(6,"button",4),Ds("click",function(){return t.close.emit()}),Ps(7,"mat-icon",5),Ss(),Ss(),Ss(),Es(8,"div"),Es(9,"mat-form-field",6),Ps(10,"mat-icon",7),Ps(11,"input",8),Ss(),Ss(),Ss(),Es(12,"div",9),Es(13,"mat-selection-list",10,11),Ds("selectionChange",function(e){return t.selectSet(e.option.value)}),vs(15,xZ,5,8,"mat-list-option",12),Ss(),Ss(),Ss()),2&e&&(Ui(6),Cs("matTooltip","Close"),Ui(5),Cs("formControl",t.search),Ui(2),Cs("multiple",!1),Ui(2),Cs("ngForOf",t.filteredRows))},directives:[yE,wC,Iw,eS,qE,uS,lv,kv,bb,$S,lh,qS],pipes:[bZ,Eh,wZ],styles:[".prefill-search{height:100%}.prefill-search .search{padding:0 20px 20px}.prefill-search .search .head{height:56px}.prefill-search .search .head .title{font-weight:400;font-size:16px;line-height:24px}.prefill-search .search .search-input{width:100%}.prefill-search .list{height:calc(100% - 112px);overflow-y:auto}.prefill-search .list .mat-list-item-content{padding:0 20px}.prefill-search .mat-list-base{padding-top:0}.prefill-search .mat-list-item{height:40px}.prefill-search .mat-list-text{color:#282828;font-size:14px;line-height:20px}"],encapsulation:2}),e})();function SZ(e,t){1&e&&(Es(0,"span",7),la(1,"(Modified)"),Ss())}function PZ(e,t){if(1&e&&(Es(0,"div",5),Es(1,"span"),la(2),Hl(3,"noData"),Hl(4,"async"),Hl(5,"idString"),Ss(),vs(6,SZ,2,0,"span",6),Ss()),2&e){const e=Bs();Ui(2),ca(zl(3,2,zl(4,4,zl(5,6,e.data)))),Ui(4),Cs("ngIf",e.modified)}}let TZ=(()=>{class e{constructor(){this.choose=new Xl,this.reset=new Xl}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["au-prefill"]],inputs:{data:"data",modified:"modified"},outputs:{choose:"choose",reset:"reset"},decls:9,vars:1,consts:[[1,"prefill"],[1,"title"],["class","current-set",4,"ngIf"],[1,"prefill-actions"],["mat-flat-button","",1,"prefill-btn",3,"click"],[1,"current-set"],["class","ml-2",4,"ngIf"],[1,"ml-2"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"div",1),la(2,"Prefill"),Ss(),vs(3,PZ,7,8,"div",2),Es(4,"div",3),Es(5,"button",4),Ds("click",function(){return t.choose.emit()}),la(6,"Choose"),Ss(),Es(7,"button",4),Ds("click",function(){return t.reset.emit()}),la(8,"Reset"),Ss(),Ss(),Ss()),2&e&&(Ui(3),Cs("ngIf",t.data))},directives:[uh,yE],pipes:[bZ,Eh,wZ],styles:[".prefill[_ngcontent-%COMP%]{padding:20px 20px 0;color:#282828}.prefill[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:24px}.prefill[_ngcontent-%COMP%]   .current-set[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;line-height:20px}.prefill[_ngcontent-%COMP%]   .prefill-actions[_ngcontent-%COMP%]{margin-top:16px}.prefill[_ngcontent-%COMP%]   .prefill-actions[_ngcontent-%COMP%]   .prefill-btn[_ngcontent-%COMP%]{background:#f4f4f4;color:#686868}.prefill[_ngcontent-%COMP%]   .prefill-actions[_ngcontent-%COMP%]   .prefill-btn[_ngcontent-%COMP%]:first-child{margin-right:8px}"]}),e})();function IZ(e,t){if(1&e){const e=ks();Es(0,"button",9),Ds("click",function(){Rt(e);const n=t.$implicit;return Bs().setZoom(n)}),la(1),Hl(2,"percent"),Ss()}if(2&e){const e=t.$implicit;Ui(1),ca(zl(2,1,e))}}let OZ=(()=>{class e{constructor(e,t){this._viewer=e,this._pagesSrv=t,this._zoom=[...uL],this._pagesSrv.$current.subscribe(()=>{this._currentZoom&&this._viewer.setZoom(this._currentZoom)})}get zoomMenu(){return hL}get zoom(){return this._viewer.zoom}get mode(){return s$}zoomIn(){const e=this._zoom.findIndex(e=>this._viewer.zoom===e);if(e<0){const e=[...this._zoom,this.zoom].sort((e,t)=>e-t),t=e.findIndex(e=>this._viewer.zoom===e);return this._viewer.setZoom(e[t+1]),void(this._currentZoom=e[t+1])}e+1<this._zoom.length&&(this._viewer.setZoom(this._zoom[e+1]),this._currentZoom=this._zoom[e+1])}zoomOut(){const e=this._zoom.slice().reverse(),t=e.findIndex(e=>this._viewer.zoom===e);if(t<0){const e=[...this._zoom,this.zoom].sort((e,t)=>e-t).reverse(),t=e.findIndex(e=>this._viewer.zoom===e);return this._viewer.setZoom(e[t+1]),void(this._currentZoom=e[t+1])}t+1<this._zoom.length&&(this._viewer.setZoom(e[t+1]),this._currentZoom=e[t+1])}setZoom(e){this._viewer.setZoom(e),this._currentZoom=e}setMode(e){this._viewer.zoomMode=e}}return e.\u0275fac=function(t){return new(t||e)(ws(FK),ws(nZ))},e.\u0275cmp=Ue({type:e,selectors:[["au-zoom-control"]],decls:14,vars:7,consts:[[1,"d-flex","align-items-center","justify-content-center","zoom"],["mat-icon-button","","aria-label","Zoom out",3,"matTooltip","click"],["svgIcon","dde-minus"],[1,"zoom-display"],["mat-button","",3,"matMenuTriggerFor"],["mat-icon-button","","aria-label","Zoom in",3,"matTooltip","click"],["svgIcon","dde-plus"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(Es(0,"div",0),Es(1,"button",1),Ds("click",function(){return t.zoomOut()}),Ps(2,"mat-icon",2),Ss(),Es(3,"div",3),Es(4,"button",4),la(5),Hl(6,"percent"),Ss(),Ss(),Es(7,"button",5),Ds("click",function(){return t.zoomIn()}),Ps(8,"mat-icon",6),Ss(),Es(9,"mat-menu",null,7),vs(11,IZ,3,3,"button",8),Es(12,"button",9),Ds("click",function(){return t.setMode(t.mode.bestFit)}),la(13,"Fit"),Ss(),Ss(),Ss()),2&e){const e=bs(10);Ui(1),Cs("matTooltip","Zoom out"),Ui(3),Cs("matMenuTriggerFor",e),Ui(1),ca(zl(6,5,t.zoom)),Ui(2),Cs("matTooltip","Zoom in"),Ui(4),Cs("ngForOf",t.zoomMenu)}},directives:[yE,wC,Iw,Z_,$_,lh,W_],pipes:[Ih],styles:[".zoom[_ngcontent-%COMP%]{padding:4px 9px}.zoom[_ngcontent-%COMP%]   .zoom-display[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:20px;color:#282828}.mat-menu-item[_ngcontent-%COMP%]{height:36px;line-height:36px}"]}),e})();const kZ=function(e){return{active:e}};function RZ(e,t){if(1&e){const e=ks();Es(0,"div"),Es(1,"button",7),Ds("click",function(){Rt(e);const n=t.$implicit,r=Bs();return r.symbol=n,r.insert.emit(r.symbol)}),la(2),Ss(),Ss()}if(2&e){const e=t.$implicit,n=Bs();Ui(1),Cs("ngClass",Dl(2,kZ,n.symbol===e)),Ui(1),ca(e)}}let AZ=(()=>{class e{constructor(e){this._configSrv=e,this.symbols=[],this.insert=new Xl,this.close=new Xl,this._configSrv.$symbols.subscribe(e=>this.symbols=e)}}return e.\u0275fac=function(t){return new(t||e)(ws(oQ))},e.\u0275cmp=Ue({type:e,selectors:[["au-symbol-selector"]],outputs:{insert:"insert",close:"close"},decls:9,vars:2,consts:[[1,"symbol-selector"],[1,"head","d-flex","align-items-center","justify-content-between"],[1,"title"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","dde-close"],[1,"symbols","d-flex","flex-wrap"],[4,"ngFor","ngForOf"],["mat-button","",1,"symbol-button",3,"ngClass","click"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"div",1),Es(2,"div",2),la(3,"Insert special symbol"),Ss(),Es(4,"div"),Es(5,"button",3),Ds("click",function(){return t.close.emit()}),Ps(6,"mat-icon",4),Ss(),Ss(),Ss(),Es(7,"div",5),vs(8,RZ,3,4,"div",6),Ss(),Ss()),2&e&&(Ui(5),Cs("matTooltip","Close"),Ui(3),Cs("ngForOf",t.symbols))},directives:[yE,wC,Iw,lh,sh],styles:[".symbol-selector{width:320px;padding:16px}.symbol-selector .title{font-weight:500;font-size:16px;line-height:24px;color:#282828}.symbol-selector .mat-button{min-width:40px;max-width:40px;height:40px}.symbol-selector .mat-button.active{background:rgba(0,0,0,.04)}.symbol-selector .footer{margin-top:16px}.symbol-selector .footer .mat-flat-button{color:#fff}"],encapsulation:2}),e})();const MZ=function(e){return{active:e}};let DZ=(()=>{class e{constructor(){this.toggleList=new Xl,this.changePage=new Xl}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["au-pagination"]],inputs:{page:"page",total:"total",activeList:"activeList"},outputs:{toggleList:"toggleList",changePage:"changePage"},decls:10,vars:10,consts:[[1,"d-flex","pagination"],["mat-icon-button","",1,"pages-list",3,"matTooltip","ngClass","click"],["svgIcon","dde-pages"],[1,"d-flex","align-items-center"],["mat-icon-button","","aria-label","Previous page",1,"p-prev",3,"matTooltip","disabled","click"],["svgIcon","dde-left"],[1,"page-indicator"],["mat-icon-button","","aria-label","Next page",1,"p-next",3,"matTooltip","disabled","click"],["svgIcon","dde-right"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"button",1),Ds("click",function(){return t.toggleList.emit()}),Ps(2,"mat-icon",2),Ss(),Es(3,"div",3),Es(4,"button",4),Ds("click",function(){return t.changePage.emit(t.page-1)}),Ps(5,"mat-icon",5),Ss(),Es(6,"div",6),la(7),Ss(),Es(8,"button",7),Ds("click",function(){return t.changePage.emit(t.page+1)}),Ps(9,"mat-icon",8),Ss(),Ss(),Ss()),2&e&&(Ui(1),Cs("matTooltip","Pages list")("ngClass",Dl(8,MZ,t.activeList)),Ui(3),Cs("matTooltip","Previous page")("disabled",0===t.page),Ui(3),ha("",t.page+1," of ",t.total||1,""),Ui(1),Cs("matTooltip","Next page")("disabled",t.page===t.total-1))},directives:[yE,wC,sh,Iw],styles:[".pagination[_ngcontent-%COMP%]{padding:4px 9px}.pagination[_ngcontent-%COMP%]   .page-indicator[_ngcontent-%COMP%]{padding:10px 6px;font-size:14px;line-height:20px;color:#282828}.pagination[_ngcontent-%COMP%]   .mat-icon-button.active[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}"]}),e})(),FZ=(()=>{class e{ngOnInit(){this.time=new Date}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ue({type:e,selectors:[["au-warn-page"]],inputs:{title:"title",message:"message",secondMessage:"secondMessage",designPath:"designPath"},decls:21,vars:8,consts:[[1,"warn-container"],[1,"warn-ico"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJUSURBVHgB7ZjdTfMwFIZfl7T67tp+EhdcUTaADWCDTgDdABADAGIAYAIYgRHYAO5BarimkFzx1xZjhx/FECc+zikKUh4pUtK67Tl9/cRJgJqamhobEf71IjSX8dcYodW/RxCpTb5vzeEIc338BT6Kl1nbLYJVMCPAjP63AdnLfleEAuOVLhCDiQYYuUOwZy9eo98LNsEIWwJaWInJ0GFoLBCoFJ5CMMCYwHTXcWBHNXoCJlgaGKE5kJADwkdWuYRmmUL54lp/mkXo0gkUi2uDR+hSCRDEtVFa6JIJ2MVtDdbRiW7RHl6htbFuG1ZaaO8EtLgNSOuPt4fXaPQWk30Zx4i789bvmgJr85icwwPvBorE7cqxcRyJJnLK8Bbaawr5i2vDX2hyAq7i0hJI8BLaIwHnFZeKFvoQREgNROqanrjiUulTV2hSAxIN8j9EZQ6CdFp1boBfXBtS3YYGztPUSeIPcS/UbgeOeEicxlloxwQScZ2L1+jF65PXMAQRZ6ELG/AV92F7RxV+kzTyuHcAD5yELpxCfpfKXIjwP8ZLeSNyE/g9cW0UC21NwEfcGZErdE4CdHFnRK7QmQ1wrLiO9wOuWIXOnEIc4lLuB9zIFvpHAlziik77az+9JviTLbTRgBZXRcLy5IxhHfiBBLZ0jenXjCmkHoWfzPhqszSq4KMuJtufx0YCqvjKP8tXNRqP6b85IKtw2ixAGEIZDQiIM1QclcBl+tho4AmTYzUkRGWR4Qum++lXjAYWgPAZ0zXV5ak++aEyJLWc69p0jaipqampDG9Jxgwpb7FWzwAAAABJRU5ErkJggg==","alt","warn"],[1,"warn-title"],[1,"warn-message"],[1,"debug-info"],[1,"debug-line"],[1,"font-weight-bolder"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"div",1),Ps(2,"img",2),Ss(),Es(3,"div",3),la(4),Ss(),Es(5,"div",4),la(6),Ss(),Es(7,"div",5),Es(8,"div",6),Es(9,"span",7),la(10,"Time: "),Ss(),Es(11,"span"),la(12),Hl(13,"date"),Ss(),Ss(),Es(14,"div"),Es(15,"span",7),la(16,"Design: "),Ss(),Es(17,"span"),la(18),Ss(),Ss(),Ss(),Es(19,"div",4),la(20),Ss(),Ss()),2&e&&(Ui(4),ca(t.title),Ui(2),ca(t.message),Ui(6),ua("",Vl(13,5,t.time,"M/d/yy, h:mm a")," UTC"),Ui(6),ca(t.designPath),Ui(2),ca(t.secondMessage))},pipes:[Sh],styles:["[_nghost-%COMP%]{margin:auto}.warn-container[_ngcontent-%COMP%]{max-width:640px;color:#282828}.warn-container[_ngcontent-%COMP%]   .warn-title[_ngcontent-%COMP%]{font-family:Roboto;font-size:24px;font-style:normal;font-weight:700;line-height:32px;margin-top:26px}.warn-container[_ngcontent-%COMP%]   .warn-message[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-style:normal;font-weight:400;line-height:24px;margin-top:20px;margin-bottom:20px}.warn-container[_ngcontent-%COMP%]   .debug-info[_ngcontent-%COMP%]{background:#f5f5f5;font-family:Roboto;padding:20px;font-size:16px;color:#282828;border-radius:4px}.warn-container[_ngcontent-%COMP%]   .debug-info[_ngcontent-%COMP%]   .debug-line[_ngcontent-%COMP%]{margin-bottom:8px}.warn-container[_ngcontent-%COMP%]   .debug-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:24px}"]}),e})();const LZ=["symbolPanel"],BZ=["btnPanel"];function NZ(e,t){if(1&e){const e=ks();Es(0,"au-prefill-search",8),Ds("selected",function(t){return Rt(e),Bs().setDataSet(t)})("close",function(){return Rt(e),Bs().isOpenSearch=!1}),Ss()}2&e&&Cs("rows",Bs().dataSets.rows)}function jZ(e,t){if(1&e){const e=ks();Es(0,"au-prefill",16),Ds("reset",function(){return Rt(e),Bs(3).reset()})("choose",function(){return Rt(e),Bs(3).clickChoose()}),Ss()}if(2&e){const e=Bs(3);Cs("data",e.currentSet)("modified",e.isModified)}}function HZ(e,t){if(1&e){const e=ks();Ts(0),vs(1,jZ,1,2,"au-prefill",14),Es(2,"au-dynamic-form",15),Ds("blur",function(t){return Rt(e),Bs(2).blurExtinguishItem(t)})("focus",function(t){return Rt(e),Bs(2).focusSpotlight(t)})("mouseEnter",function(t){return Rt(e),Bs(2).spotlightItem(t)})("mouseLeave",function(t){return Rt(e),Bs(2).extinguishItem(t)}),Ss(),Is()}if(2&e){const e=Bs(2);Ui(1),Cs("ngIf",e.dataSets),Ui(1),Cs("fields",e.formConf)("configuration",e.conf)}}function zZ(e,t){1&e&&(Ts(0),Ps(1,"mat-progress-spinner",17),Is()),2&e&&(Ui(1),Cs("diameter",35)("strokeWidth",3))}function VZ(e,t){if(1&e){const e=ks();Es(0,"div",9),Ds("scroll",function(){return Rt(e),Bs().updatePanelPosition()})("click",function(e){return e.stopPropagation()}),vs(1,HZ,3,3,"ng-container",10),vs(2,zZ,2,2,"ng-container",10),Es(3,"eui-floating-panel",11,12),Es(5,"button",13),Ds("click",function(){return Rt(e),Bs().clickSymbols()}),la(6,"Insert symbols"),Ss(),Ss(),Ss()}if(2&e){const e=Bs();Ui(1),Cs("ngIf",!e.isInitializing),Ui(1),Cs("ngIf",e.isInitializing),Ui(1),Cs("position",e.insertBtnPosition)}}function UZ(e,t){if(1&e){const e=ks();Es(0,"div",25),Ds("click",function(e){return e.stopPropagation()}),Es(1,"au-pagination",26),Ds("changePage",function(t){return Rt(e),Bs(2).setPageIndex(t)})("toggleList",function(){Rt(e);const t=Bs(2);return t.isOpenList=!t.isOpenList}),Ss(),Ss()}if(2&e){const e=Bs(2);Ui(1),Cs("total",e.surfaces.length)("page",e.pageIdx)("activeList",e.isOpenList)}}const WZ=function(){return{right:"248px"}},XZ=function(){return{}};function GZ(e,t){if(1&e){const e=ks();Es(0,"div",18),Ps(1,"au-da-viewer",19),Es(2,"div",20),Ps(3,"au-zoom-control"),Ss(),vs(4,UZ,2,3,"div",21),Es(5,"eui-floating-panel",22,23),Ds("outsideClick",function(){return Rt(e),Bs().closeSymbols()}),Es(7,"au-symbol-selector",24),Ds("close",function(){return Rt(e),Bs().closeSymbols()})("insert",function(t){return Rt(e),Bs().insertSymbol(t)}),Ss(),Ss(),Ss()}if(2&e){const e=Bs();Ui(1),Cs("configuration",e.viewerConf),Ui(1),Cs("ngStyle",e.isOpenList?Ml(4,WZ):Ml(5,XZ)),Ui(2),Cs("ngIf",e.surfaces.length>1),Ui(1),Cs("position",e.symbolsPosition)}}function qZ(e,t){if(1&e&&Ps(0,"au-warn-page",27),2&e){const e=Bs();Cs("title",e.warningData.title)("message",e.warningData.message)("designPath",e.designPath)("secondMessage",e.warningData.secondMessage)}}let $Z=(()=>{class e extends IC{constructor(e,t,n,r,i,o,s,a,l,c){super(),this._productSrv=e,this._devSrv=t,this._pagesSrv=n,this._schemaSrv=r,this._fs=i,this._configSrv=o,this._itemSrv=s,this._spotlightSrv=a,this._canvas=l,this._viewer=c,this.surfaces=[],this.formConf=[],this.symbolsPosition={x:0,y:0},this.insertBtnPosition={x:169,y:0},this.pageIdx=0,this._currentInput=null,this._inputSelection={start:0,end:0},this._isValid=new x,this._originalFormData={},this._formatMap=new Map,this._ignNextChange=!1,this.conf=new EF({showButtons:!1,showCancel:!1}),this._viewer.setMouseBehavior(X$.Locked),this._pagesSrv.$surfaces.pipe(Hp(this.subscriber)).subscribe(e=>this.surfaces=e),this._pagesSrv.$current.pipe(Hp(this.subscriber)).subscribe(e=>this.current=e)}get viewerConf(){return gL}get form(){var e;return null===(e=this.dynamicForm)||void 0===e?void 0:e.form}get setProduct(){return e=>this._productSrv.product=e}get generateTestProduct(){return()=>this._devSrv.createTestProduct()}get generateTestDataSet(){return()=>this._devSrv.createTestDataSet()}get writeTestSchema(){return e=>ad(this,void 0,void 0,function*(){return this._devSrv.writeTestSchemaToProduct(e)})}get writeTestDataSet(){return()=>ad(this,void 0,void 0,function*(){return this._devSrv.writeTestDataSet()})}get setEditorConfig(){return e=>ad(this,void 0,void 0,function*(){this.isInitializing=!0,this.designPath=e.design.designPath,this._configSrv.config=e,this._isPrivateDesign=e.design.isPrivateDesign,this._configureCanvas(e.settings);try{this._productSrv.product=yield this._productSrv.loadProduct(e.design.designId,e.design.isPrivateDesign),yield this._initSchema(e.design.designId),this.currentSet=this._productSrv.product.tags.selectedSet,yield this._initForm(),this._initDataSet(e.design.dataSetId)}catch(n){return console.error(n),void this._displayError(n)}this.isInitializing=!1;const t=yield this._awaitControls();this._disableFields(),Object.keys(t).forEach(e=>{const t=this.formConf.find(t=>t.name===e);this._subscribeToControl(this.form.controls[e],t)}),this._validateForm()})}get getPreview(){return(e,t,n)=>ad(this,void 0,void 0,function*(){return this._productSrv.createPreviews(e,t,n)})}get getPdfPreview(){return e=>ad(this,void 0,void 0,function*(){return this._productSrv.createPdf(e)})}get getPreviewLink(){return(e,t,n)=>ad(this,void 0,void 0,function*(){return this._productSrv.createPreviewLink(e,t,n)})}get $isValid(){return this._isValid.asObservable()}get save(){return()=>{if(this.dynamicForm.validate())return this._isPrivateDesign?this._productSrv.saveProduct():this._productSrv.createPrivateProduct(this.schema);{const e={};return this.dynamicForm.fields.forEach(t=>{const n=this.form.controls[t.name].errors;n&&(e[t.name]=n)}),Promise.reject(e)}}}get getIdString(){return()=>this._schemaSrv.buildSchemaTitle(this.form.value,this.schema)}selectPage(e){this.pageIdx=this.surfaces.findIndex(t=>t===e),this._pagesSrv.setCurrent(e)}setPageIndex(e){this.pageIdx=e,this._pagesSrv.setCurrent(this.surfaces[e])}spotlightItem(e){this._spotlightSrv.spotlightByHover(e.name,!this.form.controls[e.name].errors)}focusSpotlight(e){this._displaySymbols(e),this._spotlightSrv.spotlightByFocus(e.field.name,!this.form.controls[e.field.name].errors)}_displaySymbols({event:e,field:t}){this._currentField=t;const n=()=>{this._currentInput=e.target,this._inputSelection.start=this._currentInput.selectionStart,this._inputSelection.end=this._currentInput.selectionEnd},r=()=>{const e=this._currentInput.getBoundingClientRect();this.insertBtnPosition.y=e.y-55,this.symbolsPosition.y=this.insertBtnPosition.y};this.symbolPanel.isOpen?"input"!==t.type&&"textarea"!==t.type||(n(),r()):"input"!==t.type&&"textarea"!==t.type||(n(),this.btnPanel.open(),r())}blurExtinguishItem({field:e}){this.btnPanel.close(),this._spotlightSrv.extinguishByBlur(e.name)}extinguishItem(e){this._spotlightSrv.extinguishByLeave(e.name)}setDataSet(e){this.isOpenSearch=!1,this._productSrv.product.tags.selectedSet=e,this._fillForm(e),this.currentSet=e}reset(){delete this._productSrv.product.tags.selectedSet,this.currentSet=null,this.closeSymbols(),this._fillForm(this._originalFormData,!0)}insertSymbol(e){if(this.symbolPanel.close(),this._currentInput){this._currentInput.focus();const{start:t,end:n}=this._inputSelection,r=(e,t)=>{this.form.get(this._currentField.name).setValue(e),this._itemSrv.writeValue(this._currentField.name,e),this._currentInput.setSelectionRange(t+1,t+1)};if(t===n)r(`${this._currentInput.value.slice(0,t)}${e}${this._currentInput.value.slice(t,this._currentInput.value.length)}`,t);else{const i=this._currentInput.value.slice(t,n),[o]=this._currentInput.value.split(i);r(this._currentInput.value.replace(i,e),o.length)}}}updatePanelPosition(){if(this._currentInput){const e=this._currentInput.getBoundingClientRect();this.insertBtnPosition.y=e.y-55,this.symbolsPosition.y=this.insertBtnPosition.y}}_fillForm(e,t){Object.keys(e).forEach(n=>{var r,i;""!==e[n]&&null!=e[n]&&(null===(r=this.form.get(n))||void 0===r||r.setValue(e[n])),t&&(null===(i=this.form.get(n))||void 0===i||i.setValue(e[n]))}),this._validateForm()}_subscribeToControl(e,t){e.valueChanges.subscribe(n=>{this._ignNextChange?this._ignNextChange=!1:this._itemSrv.writeValue(t.name,n),this._isValid.next(this.form.valid),setTimeout(()=>this._spotlightSrv.updateSpotlight(t.name,e.valid),0)})}_changedFields(e){const t=[];return Object.keys(this.currentSet).forEach(n=>{this.currentSet[n]!==e[n]&&t.push(n)}),t}_validateForm(){this.dynamicForm.validate(),this._isValid.next(this.form.valid)}closeSymbols(){this.symbolPanel.close(),this._spotlightSrv.extinguishBySymbols()}clickSymbols(){this._spotlightSrv.spotlightBySymbols(),this.symbolPanel.open(),this.btnPanel.close(),this.symbolsPosition.y=this.insertBtnPosition.y}clickChoose(){this.isOpenSearch=!0,this.closeSymbols(),this.btnPanel.close()}_awaitControls(){return ad(this,void 0,void 0,function*(){const e=t=>setTimeout(()=>{var n;return(null===(n=this.form)||void 0===n?void 0:n.controls)?t(this.form.controls):e(t)},30);return new Promise(t=>e(t))})}_displayError(e){console.warn(e.message),this.warningData=e,this.isInitializing=!1}_disableFields(){this.schema.fields.forEach(e=>{const t=this._itemSrv.readPermissions(e.name),n=this.form.get(e.name);t||n.disable()})}_initDataSet(e){return ad(this,void 0,void 0,function*(){if(e&&(this.dataSets=yield this._fs.getDataSet(e),this._schemaSrv.checkDataSet(this.schema,this.dataSets.rows[0].cells)))throw dQ})}_initSchema(e){return ad(this,void 0,void 0,function*(){const t=yield this._schemaSrv.getProductSchema(e);this._schemaSrv.schema=t,this.schema=t,this._formatMap=this._schemaSrv.mapFormat(this.schema)})}_initForm(){return ad(this,void 0,void 0,function*(){this._originalFormData=this._schemaSrv.createFormValue(this.schema),this.formConf=yield this._schemaSrv.createFormConfig(this.schema,this._originalFormData)})}_configureCanvas(e){this.allowManipulations=null==e?void 0:e.allowManipulations,this._canvas.simpleMode=!this.allowManipulations,this._viewer.setMouseBehavior(this.allowManipulations?X$.Selection:X$.Locked),this._canvas.keyEventEnabled=!1;const{items:t,printArea:n,region:r,safetyLines:i}=this._canvas.snapLinesHandler.configuration.snapElements;t.enabled=null==e?void 0:e.itemsSnapLines,n.enabled=null==e?void 0:e.printAreaSnapLines,r.enabled=null==e?void 0:e.regionSnapLines,i.enabled=null==e?void 0:e.regionSnapLines}}return e.\u0275fac=function(t){return new(t||e)(ws(qQ),ws(tZ),ws(nZ),ws(pZ),ws(dZ),ws(oQ),ws(hZ),ws(fZ),ws(QY),ws(FK))},e.\u0275cmp=Ue({type:e,selectors:[["au-data-driven-editor"]],viewQuery:function(e,t){if(1&e&&(ic(PF,1),ic(LZ,1),ic(BZ,1)),2&e){let e;rc(e=sc())&&(t.dynamicForm=e.first),rc(e=sc())&&(t.symbolPanel=e.first),rc(e=sc())&&(t.btnPanel=e.first)}},inputs:{setProduct:"setProduct",generateTestProduct:"generateTestProduct",generateTestDataSet:"generateTestDataSet",writeTestSchema:"writeTestSchema",writeTestDataSet:"writeTestDataSet",setEditorConfig:"setEditorConfig",getPreview:"getPreview",getPdfPreview:"getPdfPreview",getPreviewLink:"getPreviewLink",$isValid:"$isValid",save:"save",getIdString:"getIdString"},features:[is],decls:8,vars:11,consts:[[1,"dde","d-flex","h-100","position-relative"],[3,"isOpen","width","outsideClick"],[3,"rows","selected","close",4,"ngIf"],["class","d-flex flex-column h-100 left-panel",3,"scroll","click",4,"ngIf"],["class","w-100 h-100 position-relative canvas-preview",4,"ngIf"],[3,"title","message","designPath","secondMessage",4,"ngIf"],["float","right",3,"isOpen","width","outsideClick"],[3,"isOpen","surfaces","current","select","close"],[3,"rows","selected","close"],[1,"d-flex","flex-column","h-100","left-panel",3,"scroll","click"],[4,"ngIf"],[3,"position"],["btnPanel",""],["mat-flat-button","",1,"insert-symbol-btn",3,"click"],[3,"data","modified","reset","choose",4,"ngIf"],[3,"fields","configuration","blur","focus","mouseEnter","mouseLeave"],[3,"data","modified","reset","choose"],["color","primary","mode","indeterminate",1,"spinner",3,"diameter","strokeWidth"],[1,"w-100","h-100","position-relative","canvas-preview"],[3,"configuration"],[1,"zoom-panel",3,"ngStyle"],["class","pagination-panel",3,"click",4,"ngIf"],[3,"position","outsideClick"],["symbolPanel",""],[3,"close","insert"],[1,"pagination-panel",3,"click"],[3,"total","page","activeList","changePage","toggleList"],[3,"title","message","designPath","secondMessage"]],template:function(e,t){1&e&&(Es(0,"div",0),Es(1,"eui-sidebar",1),Ds("outsideClick",function(){return t.isOpenSearch=!1}),vs(2,NZ,1,1,"au-prefill-search",2),Ss(),vs(3,VZ,7,3,"div",3),vs(4,GZ,8,6,"div",4),vs(5,qZ,1,4,"au-warn-page",5),Es(6,"eui-sidebar",6),Ds("outsideClick",function(){return t.isOpenList=!1}),Es(7,"au-pages-list",7),Ds("select",function(e){return t.selectPage(e)})("close",function(){return t.isOpenList=!1}),Ss(),Ss(),Ss()),2&e&&(Ui(1),Cs("isOpen",t.isOpenSearch)("width",320),Ui(1),Cs("ngIf",t.schema&&t.dataSets),Ui(1),Cs("ngIf",!t.warningData),Ui(1),Cs("ngIf",!t.warningData),Ui(1),Cs("ngIf",t.warningData),Ui(1),Cs("isOpen",t.isOpenList)("width",240),Ui(1),Cs("isOpen",t.isOpenList)("surfaces",t.surfaces)("current",t.current))},directives:[kC,uh,vZ,EZ,OC,yE,PF,TZ,bS,$K,yh,OZ,AZ,DZ,FZ],styles:[":host{height:100%;display:block}.dde{border-top:1px solid #eee;border-bottom:1px solid #eee;overflow-x:hidden}.dde,.dde .left-panel{border-right:1px solid #eee;box-sizing:border-box}.dde .left-panel{min-width:320px;max-width:320px;max-height:100%;overflow-y:auto}.dde .left-panel au-dynamic-form{width:100%}.dde .left-panel au-form-tree{position:relative;display:block;width:100%}.dde .left-panel au-form-tree .mat-form-field-subscript-wrapper{top:35px}.dde .left-panel au-form-tree .mat-form-field-subscript-wrapper .mat-error{color:#dc3545;font-family:Roboto,Helvetica Neue,sans-serif;font-size:10px}.dde .left-panel form{height:calc(100% - 40px);overflow-y:auto;padding:20px}.dde .left-panel form img{width:20px;height:20px}.dde .left-panel .mat-focused .mat-form-field-outline-start{border-top:2px solid #1fb6ff!important;border-left:2px solid #1fb6ff!important;border-bottom:2px solid #1fb6ff!important;border-right:none;background:transparent!important}.dde .left-panel .mat-focused .mat-form-field-outline-end{border-top:2px solid #1fb6ff!important;border-left:none;border-bottom:2px solid #1fb6ff!important;border-right:2px solid #1fb6ff!important;background:transparent!important}.dde .left-panel .mat-form-field-invalid .mat-form-field-outline-start{border-top:2px solid #dc3545!important;border-left:2px solid #dc3545!important;border-bottom:2px solid #dc3545!important;border-right:none;background:transparent!important}.dde .left-panel .mat-form-field-invalid .mat-form-field-outline-end{border-top:2px solid #dc3545!important;border-left:none;border-bottom:2px solid #dc3545!important;border-right:2px solid #dc3545!important;background:transparent!important}.dde .left-panel .mat-form-field-invalid .mat-select-arrow{color:#dc3545}.dde .left-panel .field-wrapper:not(:last-child),.dde .left-panel .fields-wrapper:not(:last-child){margin-bottom:2em!important}.dde .left-panel .field-description,.dde .left-panel .field-label{font-family:Roboto,Helvetica Neue,sans-serif}.dde .left-panel .spinner{margin:auto}.dde .canvas-preview{background:#ddd}.dde .canvas-preview au-da-viewer{display:block;width:100%;height:calc(100% - 65px);position:relative}.dde .canvas-preview au-da-viewer #cvContent{box-shadow:0 8px 24px rgba(0,0,0,.2)}.dde .canvas-preview au-da-viewer .cc-icon-placeholder-select{display:none}.dde .canvas-preview .pagination-panel,.dde .canvas-preview .zoom-panel{position:absolute;background:#fff;bottom:8px;border-radius:3px;z-index:1;box-shadow:0 1px 2px 0 rgba(0,0,0,.24)}.dde .canvas-preview .zoom-panel{right:8px;transition:right .3s}.dde .canvas-preview .pagination-panel{left:calc(50% - 111px)}.dde .insert-symbol-btn{font-size:14px;line-height:40px;color:#686868}.floating-panel{box-shadow:0 2px 8px rgba(0,0,0,.2)!important}.cdk-overlay-container .buttons-container .mat-flat-button.mat-primary{color:#fff}.cdk-overlay-container mat-tree-node{outline-color:#30c2ff}.cdk-overlay-container img{width:20px!important;height:20px!important}"],encapsulation:2}),e})();const YZ={schedule(e,t){const n=setTimeout(e,t);return()=>clearTimeout(n)},scheduleBeforeRender(e){if("undefined"==typeof window)return YZ.schedule(e,0);if(void 0===window.requestAnimationFrame)return YZ.schedule(e,16);const t=window.requestAnimationFrame(e);return()=>window.cancelAnimationFrame(t)}};let KZ;function QZ(e,t,n){let r=n;return function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE}(e)&&t.some((t,n)=>!("*"===t||!function(e,t){if(!KZ){const e=Element.prototype;KZ=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}return e.nodeType===Node.ELEMENT_NODE&&KZ.call(e,t)}(e,t)||(r=n,0))),r}class ZZ{constructor(e,t){this.componentFactory=t.get(ka).resolveComponentFactory(e)}create(e){return new JZ(this.componentFactory,e)}}class JZ{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Uy(1),this.events=this.eventEmitters.pipe(Bp(e=>X(...e))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:e})=>e)),this.ngZone=this.injector.get(Mc),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null!==this.componentRef&&null===this.scheduledDestroyFn&&(this.scheduledDestroyFn=YZ.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t){this.runInZone(()=>{var n,r;null!==this.componentRef?((n=t)!==(r=this.getInputValue(e))&&(n==n||r==r)||void 0===t&&this.unchangedInputs.has(e))&&(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=ns.create({providers:[],parent:this.injector}),n=function(e,t){const n=e.childNodes,r=t.map(()=>[]);let i=-1;t.some((e,t)=>"*"===e&&(i=t,!0));for(let o=0,s=n.length;o<s;++o){const e=n[o],s=QZ(e,t,i);-1!==s&&r[s].push(e)}return r}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,n,e),this.viewChangeDetectorRef=this.componentRef.injector.get(sl),this.implementsOnChanges="function"==typeof this.componentRef.instance.ngOnChanges,this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Jc).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:t,templateName:n})=>e.instance[t].pipe(P(e=>({name:n,value:e}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=YZ.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const n=this.inputChanges[e];if(n)return void(n.currentValue=t);const r=this.unchangedInputs.has(e),i=r?void 0:this.getInputValue(e);this.inputChanges[e]=new st(i,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class eJ extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}new Ha("11.2.5");const tJ={provide:$b,useClass:(()=>{class e{constructor(e){this._confSrv=e,this._confSrv.$token.subscribe(e=>this._token=e),this._confSrv.$apiKey.subscribe(e=>this._apiKey=e)}intercept(e,t){return this._apiKey?(e=e.clone({headers:e.headers.set("X-API-Key",this._apiKey)}),t.handle(e)):this._token?(e=e.clone({headers:e.headers.set("Authorization",`Bearer ${this._token}`)}),t.handle(e)):t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(sr(oQ))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),multi:!0},nJ={provide:dc,useFactory:function(e,t){return()=>{e.addSvgIconSetLiteral(t.bypassSecurityTrustHtml('<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol id="dde-close" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M18 6L6 18" stroke="#686868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M6 6L18 18" stroke="#686868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</symbol>\n<symbol id="dde-left" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 18L9 12L15 6" stroke="#686868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</symbol>\n<symbol id="dde-minus" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 12H19" stroke="#686868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</symbol>\n<symbol id="dde-pages" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect x="9" y="2" width="12" height="16" fill="white" stroke="#686868" stroke-width="1.5" stroke-linejoin="round"/>\n<rect x="3" y="6" width="12" height="16" fill="white" stroke="#686868" stroke-width="1.5" stroke-linejoin="round"/>\n</symbol>\n<symbol id="dde-plus" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12 5V19" stroke="#686868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M5 12H19" stroke="#686868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</symbol>\n<symbol id="dde-right" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M9 18L15 12L9 6" stroke="#686868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</symbol>\n<symbol id="dde-search" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M9.16667 15.8333C12.8486 15.8333 15.8333 12.8486 15.8333 9.16667C15.8333 5.48477 12.8486 2.5 9.16667 2.5C5.48477 2.5 2.5 5.48477 2.5 9.16667C2.5 12.8486 5.48477 15.8333 9.16667 15.8333Z" stroke="#686868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M17.5 17.5L13.875 13.875" stroke="#686868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</symbol>\n</svg>'))}},deps:[vw,nd],multi:!0},rJ={provide:Qr,useClass:(()=>{class e{handleError(e){console.error(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})()},iJ={provide:UF,useExisting:dZ},oJ={provide:zF,useExisting:dZ};let sJ=(()=>{class e{constructor(e){this._injector=e}ngDoBootstrap(){const e=function(e,t){const n=function(e,t){return t.get(ka).resolveComponentFactory(e).inputs}(e,t.injector),r=t.strategyFactory||new ZZ(e,t.injector),i=function(e){const t={};return e.forEach(({propName:e,templateName:n})=>{var r;t[(r=n,r.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`))]=e}),t}(n);class o extends eJ{constructor(e){super(),this.injector=e}get ngElementStrategy(){if(!this._ngElementStrategy){const e=this._ngElementStrategy=r.create(this.injector||t.injector);n.forEach(({propName:t})=>{if(!this.hasOwnProperty(t))return;const n=this[t];delete this[t],e.setInputValue(t,n)})}return this._ngElementStrategy}attributeChangedCallback(e,t,n,r){this.ngElementStrategy.setInputValue(i[e],n)}connectedCallback(){let e=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),e=!0),this.ngElementStrategy.connect(this),e||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(e=>{const t=function(e,t,n){if("function"!=typeof CustomEvent){const r=e.createEvent("CustomEvent");return r.initCustomEvent(t,!1,!1,n),r}return new CustomEvent(t,{bubbles:!1,cancelable:!1,detail:n})}(this.ownerDocument,e.name,e.value);this.dispatchEvent(t)})}}return o.observedAttributes=Object.keys(i),n.forEach(({propName:e})=>{Object.defineProperty(o.prototype,e,{get(){return this.ngElementStrategy.getInputValue(e)},set(t){this.ngElementStrategy.setInputValue(e,t)},configurable:!0,enumerable:!0})}),o}($Z,{injector:this._injector});customElements.define("au-data-driven-editor",e)}}return e.\u0275fac=function(t){return new(t||e)(sr(ns))},e.\u0275mod=qe({type:e}),e.\u0275inj=pe({providers:[tJ,nJ,GQ,rJ,iJ,oJ],imports:[[cQ,RC,BQ.forRoot(null,null),XQ.forRoot(null,null),SQ.forRoot(null,null),sd,Ib,lL,Fg,aw,ev,Ow,xC,tS,YS,CS,_E,hS]]}),e})();var aJ=n("kiQV");!function(){if(Gc)throw new Error("Cannot enable prod mode after platform setup.");Xc=!1}();const lJ=new Date("Tue Apr 27 2021 16:18:07 GMT+0700 (GMT+07:00)");console.info("%c%s","color: #1fb6ff;",`Data Driven Editor v.${aJ.b} by Aurigma Inc.\nBuild using DA v.${aJ.a["@aurigma/design-atoms"]}.\nBuild time: ${lJ.toLocaleDateString()} ${lJ.toLocaleTimeString()}.`),id().bootstrapModule(sJ).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);
</script>