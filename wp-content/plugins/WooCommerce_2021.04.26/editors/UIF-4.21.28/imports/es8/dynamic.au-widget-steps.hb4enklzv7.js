(window.multistep_editor_jsonpFunction=window.multistep_editor_jsonpFunction||[]).push([[40],{964:function(t,e,s){"use strict";s.r(e),s.d(e,"AuWidgetSteps",function(){return r}),s.d(e,"widget",function(){return r});var a,i=s(0),n=s(1),o=s(172),c=s(6);!function(t){t[t.previous=0]="previous",t[t.visited=1]="visited",t[t.all=2]="all"}(a||(a={}));class d{constructor(t){this.enabled=t}}var l=s(16);let r=class extends o.a{constructor(){super(...arguments),this._visitedSteps=[],this._paperTabsSelector="paper-tabs",this._prevButtonSelector=".nav__back-button",this._nextButtonSelector=".nav__next-button"}connectedCallback(){super.connectedCallback(),this.stepSubscription=this.observe(l.a.STEP_CHANGED).subscribe(t=>this._stepChangeCallback(t))}async _stepChangeCallback(t){const e=t.data.step;if(this._visitedSteps.find(t=>t.index===e.index)||this._visitedSteps.push(e),c.a.isNotNullOrUndefined(this.params)&&c.a.isNotNullOrUndefined(this.params.availabilityMode)){switch(a[this.params.availabilityMode.toString()]){case a.previous:await this.handleModePrevious(e);break;case a.visited:await this.handleModeVisited(e);break;case a.all:}this.updateParams(this.params)}}async handleModeVisited(t){const e=await this._getStepTabs();e.forEach((s,a)=>{const i=a===t.index+1||c.a.isNotNullOrUndefined(this._visitedSteps.find(t=>t.index===a));this._applyConfig(e,a.toString(),new d(i))})}async handleModePrevious(t){const e=await this._getStepTabs();e.forEach((s,a)=>{const i=a<=t.index+1;this._applyConfig(e,a.toString(),new d(i))})}async enableStep(t,e){const s=await this._getStepTabs();this._applyConfig(s,t,new d(e))}updateParams(t){t.steps&&this.changeStepState(t.steps);const e=this.auWizard.querySelectorShadow(".stepSelector__tabs");e&&e.notifyResize()}async changeStepState(t){const e=await this._getStepTabs();Object.keys(t).forEach(s=>{const a=t[s];this._applyConfig(e,s,a)})}_applyConfig(t,e,s){const a=c.a.isNum(e)?t[Number(e)]:t.find(t=>t.title===e);if(a&&c.a.isNotNullOrUndefined(s.enabled)){a.disabled=!s.enabled;const t="disabledstep";s.enabled?a.classList.remove(t):a.classList.add(t)}this.auWizard._showDefaultTopBar&&this._handleNavButtons(t)}async _handleNavButtons(t){const e=t.findIndex(t=>t.classList.contains("iron-selected")),s=t[e-1],a=t[e+1];if(s){const t=await this._getPrevButton();t&&(t.disabled=s.disabled)}if(a){const t=await this._getNextButton();t&&(t.disabled=a.disabled)}}async _getStepTabs(){const t=await this.publishData({selector:this._paperTabsSelector},l.a.GET_ELEMENT_FROM_AU_WIZARD);return t&&t.children?[].slice.call(t.children).filter(t=>"paper-tab"===t.tagName.toLowerCase()):[]}async _getPrevButton(){return await this.publishData({selector:this._prevButtonSelector},l.a.GET_ELEMENT_FROM_AU_WIZARD)}async _getNextButton(){return await this.publishData({selector:this._nextButtonSelector},l.a.GET_ELEMENT_FROM_AU_WIZARD)}disconnectedCallback(){super.disconnectedCallback(),this.stepSubscription.unsubscribe()}};Object(i.b)([Object(n.c)(),Object(i.d)("design:type",Object)],r.prototype,"params",void 0),r=Object(i.b)([Object(n.a)("au-widget-steps")],r)}}]);