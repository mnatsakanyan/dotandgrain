(window.multistep_editor_jsonpFunction=window.multistep_editor_jsonpFunction||[]).push([[46],{748:function(e,t,n){var r,i;
/**
 * Monet.js 0.9.2
 *
 * (c) 2012-2021 Chris Myers
 * @license Monet.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * https://monet.github.io/monet.js/
 */"undefined"!=typeof self&&self,void 0===(i="function"==typeof(r=function(){"use strict";var e={apply2:y,assign:f(Object.assign)?Object.assign:function(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(e[n]=t[n]);return e},compose:c,curry:l(g(l),[])([]),idFunction:h,isFunction:f,noop:u,swap:g},t="@@type",n="monet.js",r={Identity:"Identity",Maybe:"Maybe",Either:"Either",Validation:"Validation",List:"List",NEL:"NEL",IO:"IO",MonadT:"MonadT",Reader:"Reader",Free:"Free"};function i(e,r){e[t]=n+"/"+r}function s(e){return function(r){return(r[t]||r.constructor[t])===n+"/"+e}}function a(e){return function(n){var r=n[t]||n.constructor&&n.constructor[t];return Boolean(r)&&r.length>=e.length&&r.indexOf(e)===r.length-e.length}}function o(e){return null==e}function u(){}function l(e,t){return function(){var n=t.concat(function(e){return Array.prototype.slice.call(e)}(arguments));return n.length>=e.length?e.apply(null,n.slice(0,n.length)):l(e,n)}}function c(e,t){return function(n){return e(t(n))}}function f(e){return Boolean(e&&e.constructor&&e.call&&e.apply)}function h(e){return e}function d(e,t){return e===t||e!=e&&t!=t||!(!e||!t)&&!(!f(e.equals)||!f(t.equals))&&e.equals(t)}function p(e){return function(t){return d(e,t)}}function m(){return!1}function g(e){return function(t,n){return e(n,t)}}function y(e,t,n){return t.ap(e.map(l(n,[])))}function w(e,t){for(var n=e,r=t;!n.isNil&&!r.isNil;){if(!p(n.head())(r.head()))return!1;n=n.tail(),r=r.tail()}return n.isNil&&r.isNil}function b(e,t){return function e(t,n){return n.isNil?Z(n):G(function(){return e(t,n.tail())}).map(l(L,[])(t(n.head())))}(e,t).run()}function v(e,t){return e.foldRight(I)(function(e,n){return t(e)?L(e,n):n})}function k(e,t){return function e(t,n){if(t.isNil)return Z(C());var r=t.head();return n(r)?Z(D(r)):G(function(){return e(t.tail(),n)})}(e,t).run()}function N(e,t){return function e(t,n){if(t.isNil)return Z(!1);var r=t.head();return d(r,n)?Z(!0):G(function(){return e(t.tail(),n)})}(e,t).run()}function L(e,t){return t.cons(e)}function T(){switch(arguments.length){case 0:return new T.fn.init;case 1:return new T.fn.init(arguments[0]);default:return new T.fn.init(arguments[0],arguments[1])}}e.List=T;var I,S=function(e,t){t.isNil||(e(t.head()),S(e,t.tail()))},E=function(e,t,n){return function t(n,r){return r.isNil?Z(n):G(function(){return t(e(n,r.head()),r.tail())})}(t,n).run()},O=function(e,t,n){return function t(n,r){return n.isNil?Z(r):G(function(){return t(n.tail(),r)}).map(function(t){return e(n.head(),t)})}(t,n).run()},R=function(e,t){return function e(t,n){return t.isNil?Z(n):G(function(){return e(t.tail(),n).map(function(e){return e.cons(t.head())})})}(e,t).run()},B=function(e,t){return e.foldRight(t.of(I))(t.map2(L))},F=function(e){return e.foldLeft(I)(g(L))},U=function(e,t){return e.bind(function(e){return t.map(function(t){return t(e)})})};function x(e){return new Error("Cannot create an empty Non-Empty List. Passed head is "+e+".")}function A(e,t){if(o(e))throw x(e);return new A.fn.init(e,t)}T.fn=T.prototype={init:function(){var e=arguments[0],t=arguments[1];0===arguments.length?(this.isNil=!0,this.size_=0):(this.isNil=!1,this.head_=e,this.tail_=t||I,this.size_=this.tail_.size()+1),i(this,r.List)},of:function(e){return new T(e)},size:function(){return this.size_},equals:function(e){return(T.isOfType(e)||A.isOfType(e))&&w(this,e)},cons:function(e){return T(e,this)},snoc:function(e){return this.concat(T(e))},map:function(e){return b(e,this)},toArray:function(){return E(function(e,t){return e.push(t),e},[],this)},toSet:function(){return new Set(this)},foldLeft:function(e){var t=this;return function(n){return E(n,e,t)}},foldRight:function(e){var t=this;return function(n){return O(n,t,e)}},append:function(e){return R(this,e)},filter:function(e){return v(this,e)},find:function(e){return k(this,e)},flatten:function(){return O(R,this,I)},flattenMaybe:function(){return this.flatMap($.toList)},reverse:function(){return F(this)},bind:function(e){return this.map(e).flatten()},forEach:function(e){S(e,this)},contains:function(e){return N(this,e)},sequenceMaybe:function(){return B(this,$)},sequenceValidation:function(){return this.foldLeft(V(I))(function(e,t){return e.ap(t.map(function(e){return function(t){return L(e,t)}}))}).map(F)},sequenceEither:function(){return B(this,_)},sequenceIO:function(){return B(this,P)},sequenceReader:function(){return B(this,J)},sequence:function(e){return B(this,e)},head:function(){return this.head_},headMaybe:function(){return this.isNil?C():D(this.head_)},lookup:function(e){return this.isNil||e>=this.size()?C():$.fromNull(this.toArray()[e])},nth:function(e){return this.isNil||e>=this.size()?void 0:this.toArray()[e]},tail:function(){return this.isNil?I:this.tail_},tails:function(){return this.isNil?T(I,I):this.tail().tails().cons(this)},ap:function(e){return U(this,e)},apTo:function(e){return U(e,this)},isNEL:m,toString:function(){return this.isNil?"Nil":"List("+this.toArray().join(", ")+")"},inspect:function(){return this.toString()}},T.fn.init.prototype=T.fn,i(T,r.List),i(T.fn.init,r.List),T.isInstance=s(r.List),T.isOfType=a(r.List),T.prototype.empty=function(){return I},T.fromArray=function(e){return e.reduceRight(function(e,t){return e.cons(t)},I)},T.from=function(e){return T.fromArray(Array.from(e))},T.of=function(e){return new T(e,I)},T.prototype.each=T.prototype.forEach,I=e.Nil=new T.fn.init,e.NEL=e.NonEmptyList=A,A.of=function(e){return A(e,I)},A.fn=A.prototype={init:function(e,t){if(o(e))throw x(e);this.isNil=!1,this.head_=e,this.tail_=o(t)?I:t,this.size_=this.tail_.size()+1,i(this,r.NEL)},equals:function(e){return T.isOfType(e)||A.isOfType(e)&&w(this,e)},cons:function(e){return A(e,this.toList())},snoc:function(e){return this.concat(A(e))},map:function(e){return A(e(this.head_),b(e,this.tail_))},bind:function(e){var t=e(this.head_);if(!t.isNEL())throw new Error("NEL.fn.bind: Passed function must return a NonEmptyList.");var n=this.tail().foldLeft(I.snoc(t.head()).append(t.tail()))(function(t,n){var r=e(n).toList();return t.snoc(r.head()).append(r.tail())});return new A(n.head(),n.tail())},head:function(){return this.head_},lookup:function(e){return e>=this.size()?C():$.fromNull(this.toArray()[e])},nth:function(e){return e>=this.size()?void 0:this.toArray()[e]},tail:function(){return this.tail_},tails:function(){var e=this.toList().tails().map(A.fromList).flattenMaybe();return A(e.head(),e.tail())},toList:function(){return T(this.head_,this.tail_)},reverse:function(){if(this.tail().isNil)return this;var e=this.tail().reverse();return A(e.head(),e.tail().append(T(this.head())))},foldLeft:function(e){return this.toList().foldLeft(e)},foldRight:function(e){return this.toList().foldRight(e)},reduceLeft:function(e){return this.tail().foldLeft(this.head())(e)},filter:function(e){return v(this.toList(),e)},find:function(e){return k(this.toList(),e)},flatten:function(){return O(R,this.toList().map(function(e){return e.isNEL()?e.toList():e}),I)},flattenMaybe:function(){return this.toList().flatMap($.toList)},contains:function(e){return N(this.toList(),e)},append:function(e){return A.fromList(this.toList().append(e.toList())).some()},cobind:function(e){return this.cojoin().map(e)},size:function(){return this.size_},forEach:function(e){return this.toList().forEach(e)},isNEL:function(){return!0},toString:function(){return"NEL("+this.toArray().join(", ")+")"},inspect:function(){return this.toString()}},A.fromList=function(e){return e.isNil?C():D(A(e.head(),e.tail()))},A.fromArray=function(e){return A.fromList(T.fromArray(e))},A.from=function(e){return A.fromList(T.from(e))},A.fn.init.prototype=A.fn,i(A,r.NEL),i(A.fn.init,r.NEL),A.isInstance=s(r.NEL),A.isOfType=a(r.NEL),A.prototype.toArray=T.prototype.toArray,A.prototype.toSet=T.prototype.toSet,A.prototype.extract=A.prototype.copure=A.prototype.head,A.prototype.cojoin=A.prototype.tails,A.prototype.coflatMap=A.prototype.mapTails=A.prototype.cobind,A.prototype.ap=T.prototype.ap,A.prototype.apTo=T.prototype.apTo;var $=e.Maybe={};$.fromFalsy=function(e){return e?$.Some(e):$.None()},$.fromNull=function(e){return o(e)?$.None():$.Some(e)},$.fromUndefined=function(e){return void 0===e?$.None():$.Some(e)},$.fromEmpty=function(e){return o(t=e)||""===t||Array.isArray(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length?$.None():$.Some(e);var t},$.of=function(e){return D(e)};var D=$.Just=$.Some=$.some=e.Some=e.Just=function(e){return new $.fn.init(!0,e)},C=$.Nothing=$.None=$.none=e.None=e.Nothing=function(){return new $.fn.init(!1,null)};$.toList=function(e){return e.toList()},$.fn=$.prototype={init:function(e,t){if(this.isValue=e,e&&o(t))throw new Error("Can not create Some with illegal value: "+t+".");this.val=t,i(this,r.Maybe)},isSome:function(){return this.isValue},isNone:function(){return!this.isSome()},bind:function(e){return this.isValue?e(this.val):this},some:function(){if(this.isValue)return this.val;throw new Error("Cannot call .some() on a None.")},orSome:function(e){return this.isValue?this.val:e},orLazy:function(e){return this.cata(e,h)},orNull:function(){return this.orSome(null)},orUndefined:function(){return this.orSome(void 0)},orElse:function(e){return this.catchMap(function(){return e})},ap:function(e){var t=this.val;return this.isValue?e.map(function(e){return e(t)}):this},apTo:function(e){return e.ap(this)},equals:function(e){return $.isOfType(e)&&this.cata(function(){return e.isNone()},function(t){return e.fold(!1)(p(t))})},toArray:function(){return this.map(function(e){return[e]}).orLazy(function(){return[]})},toSet:function(){return new Set(this)},toList:function(){return this.map(T).orLazy(function(){return I})},toEither:function(e){return this.isSome()?q(this.val):X(e)},toValidation:function(e){return this.isSome()?V(this.val):M(e)},fold:function(e){var t=this;return function(n){return t.isSome()?n(t.val):e}},foldLeft:function(e){return this.toList().foldLeft(e)},foldRight:function(e){return this.toList().foldRight(e)},cata:function(e,t){return this.isSome()?t(this.val):e()},catchMap:function(e){return this.isSome()?this:e()},filter:function(e){var t=this;return t.flatMap(function(n){return e(n)?t:C()})},orNoneIf:function(e){return e?C():this},contains:function(e){return!!this.isSome()&&d(this.val,e)},forEach:function(e){this.cata(u,e)},orElseRun:function(e){this.cata(e,u)},toString:function(){return this.isSome()?"Just("+this.val+")":"Nothing"},inspect:function(){return this.toString()}},$.prototype.orJust=$.prototype.getOrElse=$.prototype.orSome,$.prototype.just=$.prototype.some,$.prototype.isJust=$.prototype.isSome,$.prototype.isNothing=$.prototype.isNone,$.prototype.orNothingIf=$.prototype.orNoneIf,$.fn.init.prototype=$.fn,i($,r.Maybe),i($.fn.init,r.Maybe),$.isInstance=s(r.Maybe),$.isOfType=a(r.Maybe);var j=e.Validation={},V=j.Success=j.success=e.Success=function(e){return new j.fn.init(e,!0)},M=j.Fail=j.fail=e.Fail=function(e){return new j.fn.init(e,!1)};j.of=function(e){return V(e)},j.fn=j.prototype={init:function(e,t){this.val=e,this.isSuccessValue=t,i(this,r.Validation)},success:function(){if(this.isSuccess())return this.val;throw new Error("Cannot call success() on a Fail.")},isSuccess:function(){return this.isSuccessValue},isFail:function(){return!this.isSuccessValue},fail:function(){if(this.isSuccess())throw new Error("Cannot call fail() on a Success.");return this.val},bind:function(e){return this.isSuccess()?e(this.val):this},ap:function(e){var t=this.val;return this.isSuccess()?e.map(function(e){return e(t)}):e.isFail()?j.Fail(K.append(t,e.fail())):this},apTo:function(e){return e.ap(this)},acc:function(){var e=function(){return e};return this.isSuccessValue?j.success(e):this},foldLeft:function(e){return this.toMaybe().toList().foldLeft(e)},foldRight:function(e){return this.toMaybe().toList().foldRight(e)},cata:function(e,t){return this.isSuccessValue?t(this.val):e(this.val)},catchMap:function(e){return this.isSuccess()?this:e(this.val)},swap:function(){return this.isSuccess()?M(this.val):V(this.val)},failMap:function(e){return this.isFail()?M(e(this.val)):this},bimap:function(e,t){return this.isSuccessValue?this.map(t):this.failMap(e)},forEach:function(e){this.cata(u,e)},forEachFail:function(e){this.cata(e,u)},equals:function(e){return j.isOfType(e)&&this.cata(function(t){return e.cata(p(t),m)},function(t){return e.cata(m,p(t))})},toMaybe:function(){return this.isSuccess()?D(this.val):C()},toEither:function(){return(this.isSuccess()?q:X)(this.val)},toString:function(){return(this.isSuccess()?"Success(":"Fail(")+this.val+")"},inspect:function(){return this.toString()}},j.prototype.fold=j.prototype.cata,j.fn.init.prototype=j.fn,i(j,r.Validation),i(j.fn.init,r.Validation),j.isInstance=s(r.Validation),j.isOfType=a(r.Validation);var K=e.Semigroup={append:function(e,t){if(f(e.concat))return e.concat(t);throw new Error("Couldn't find a semigroup appender in the environment, please specify your own append function")}},W=e.monadTransformer=e.MonadT=e.monadT=function(e){return new W.fn.init(e)};W.of=function(e){return W(e)},W.fn=W.prototype={init:function(e){this.monad=e,i(j,r.MonadT)},map:function(e){return W(this.monad.map(function(t){return t.map(e)}))},bind:function(e){return W(this.monad.map(function(t){return t.flatMap(e)}))},ap:function(e){return W(this.monad.flatMap(function(t){return e.perform().map(function(e){return t.ap(e)})}))},perform:function(){return this.monad}},W.fn.init.prototype=W.fn;var P=e.IO=e.io=function(e){return new P.fn.init(e)};P.of=function(e){return P(function(){return e})},P.fn=P.prototype={init:function(e){if(!f(e))throw new Error("IO requires a function.");this.effectFn=e,i(this,r.IO)},map:function(e){var t=this;return P(function(){return e(t.effectFn())})},bind:function(e){var t=this;return P(function(){return e(t.effectFn()).run()})},ap:function(e){var t=this;return e.map(function(e){return e(t.effectFn())})},apTo:function(e){return e.ap(this)},run:function(){return this.effectFn()}},P.fn.init.prototype=P.fn,i(P,r.IO),i(P.fn.init,r.IO),P.isInstance=s(r.IO),P.isOfType=a(r.IO),P.prototype.perform=P.prototype.performUnsafeIO=P.prototype.run;var _=e.Either={};_.of=function(e){return q(e)},_.fromTry=function(e){try{return _.right(e())}catch(e){return _.left(e)}},_.fromPromise=function(e){return e.then(_.Right,_.Left)};var q=_.Right=_.right=e.Right=function(e){return new _.fn.init(e,!0)},X=_.Left=_.left=e.Left=function(e){return new _.fn.init(e,!1)};_.fn=_.prototype={init:function(e,t){this.isRightValue=t,this.value=e,i(this,r.Either)},bind:function(e){return this.isRightValue?e(this.value):this},ap:function(e){var t=this;return this.isRightValue?e.map(function(e){return e(t.value)}):this},apTo:function(e){return e.ap(this)},leftMap:function(e){return this.isLeft()?X(e(this.value)):this},isRight:function(){return this.isRightValue},isLeft:function(){return!this.isRight()},right:function(){if(this.isRightValue)return this.value;throw new Error("Cannot call right() on a Left.")},left:function(){if(this.isRightValue)throw new Error("Cannot call left() on a Right.");return this.value},foldLeft:function(e){return this.toMaybe().toList().foldLeft(e)},foldRight:function(e){return this.toMaybe().toList().foldRight(e)},cata:function(e,t){return this.isRightValue?t(this.value):e(this.value)},catchMap:function(e){return this.isRight()?this:e(this.value)},swap:function(){return this.isRight()?X(this.value):q(this.value)},forEach:function(e){this.cata(u,e)},forEachLeft:function(e){this.cata(e,u)},equals:function(e){return _.isOfType(e)&&this.cata(function(t){return e.cata(p(t),m)},function(t){return e.cata(m,p(t))})},bimap:function(e,t){return this.isRightValue?this.map(t):this.leftMap(e)},toMaybe:function(){return this.isRight()?D(this.value):C()},toValidation:function(){return this.isRight()?V(this.value):M(this.value)},toString:function(){return this.cata(function(e){return"Left("+e+")"},function(e){return"Right("+e+")"})},toPromise:function(){return this.cata(function(e){return Promise.reject(e)},function(e){return Promise.resolve(e)})},inspect:function(){return this.toString()}},_.prototype.fold=_.prototype.cata,_.fn.init.prototype=_.fn,i(_,r.Either),i(_.fn.init,r.Either),_.isInstance=s(r.Either),_.isOfType=a(r.Either);var J=e.Reader=function(e){return new J.fn.init(e)};J.of=function(e){return J(function(t){return e})},J.ask=function(){return J(h)},J.fn=J.prototype={init:function(e){this.f=e,i(this,r.Reader)},run:function(e){return this.f(e)},bind:function(e){var t=this;return J(function(n){return e(t.run(n)).run(n)})},ap:function(e){var t=this;return e.bind(function(e){return J(function(n){return e(t.run(n))})})},apTo:function(e){return e.ap(this)},map:function(e){var t=this;return J(function(n){return e(t.run(n))})},local:function(e){var t=this;return J(function(n){return t.run(e(n))})}},J.fn.init.prototype=J.fn,i(J,r.Reader),i(J.fn.init,r.Reader),J.isInstance=s(r.Reader),J.isOfType=a(r.Reader);var z=e.Free={},G=z.Suspend=e.Suspend=function(e){return new z.fn.init(e,!0)},Z=z.Return=e.Return=function(e){return new z.fn.init(e,!1)};function Y(e){return new Y.fn.init(e)}function H(e){!function(e){e.prototype.flatMap=e.prototype.chain=e.prototype.bind,e.pure=e.unit=e.of,e.prototype.of=e.of,f(e.prototype.append)&&(e.prototype.concat=e.prototype.append),e.prototype.point=e.prototype.pure=e.prototype.unit=e.prototype.of}(e),function(e){f(e.prototype.filter)&&(e.prototype.filterNot=function(e){return this.filter(function(t){return!e(t)})})}(e),function(e){e.prototype.join=function(){return this.flatMap(h)},e.map2=function(e){return function(t,n){return t.flatMap(function(t){return n.map(function(n){return e(t,n)})})}}}(e),function(e){f(e.prototype.map)||(e.prototype.map=function(e){return this.bind(c(this.of,e))})}(e),function(e){e.prototype.takeLeft=function(e){return y(this,e,function(e,t){return e})},e.prototype.takeRight=function(e){return y(this,e,function(e,t){return t})}}(e),function(e){f(e.prototype.toArray)&&(e.prototype.every=e.prototype.forall=function(e){return this.toArray().every(e)},e.prototype.exists=function(e){return this.toArray().some(e)})}(e),function(e){["equals","map","ap","chain"].filter(function(t){return f(e.prototype[t])}).forEach(function(t){e.prototype["fantasy-land/"+t]=e.prototype[t]})}(e),function(e){f(e.prototype.toArray)&&(e.prototype[Symbol.iterator]=function(){return this.toArray()[Symbol.iterator]()})}(e),function(e){f(e.prototype.toArray)&&(e.prototype.to=function(e){return e(this)})}(e)}return z.of=function(e){return Z(e)},z.liftF=function(e){return f(e)?G(c(Z,e)):G(e.map(Z))},z.fn=z.prototype={init:function(e,t){this.isSuspend=t,t?this.functor=e:this.val=e,i(this,r.Free)},run:function(){return this.go(function(e){return e()})},bind:function(e){return this.isSuspend?f(this.functor)?G(c(function(t){return t.bind(e)},this.functor)):G(this.functor.map(function(t){return t.bind(e)})):e(this.val)},ap:function(e){return this.bind(function(t){return e.map(function(e){return e(t)})})},apTo:function(e){return e.ap(this)},resume:function(){return this.isSuspend?X(this.functor):q(this.val)},go1:function(e){return function t(n){return n.resume().cata(function(n){return t(e(n))},h)}(this)},go:function(e){for(var t=this.resume();t.isLeft();)t=e(t.left()).resume();return t.right()}},z.fn.init.prototype=z.fn,i(z,r.Free),i(z.fn.init,r.Free),z.isInstance=s(r.Free),z.isOfType=a(r.Free),e.Identity=Y,Y.of=function(e){return new Y(e)},Y.fn=Y.prototype={init:function(e){this.val=e,i(this,r.Identity)},bind:function(e){return e(this.val)},get:function(){return this.val},forEach:function(e){e(this.val)},equals:function(e){return Y.isOfType(e)&&p(this.get())(e.get())},contains:function(e){return d(this.val,e)},toString:function(){return"Identity("+this.val+")"},inspect:function(){return this.toString()},ap:function(e){var t=this.val;return e.map(function(e){return e(t)})},apTo:function(e){return e.ap(this)},toArray:function(){return[this.get()]},toList:function(){return T(this.get(),I)},toSet:function(){return new Set(this)}},Y.fn.init.prototype=Y.fn,i(Y,r.Identity),i(Y.fn.init,r.Identity),Y.isInstance=s(r.Identity),Y.isOfType=a(r.Identity),H(W),H(_),H($),H(P),H(A),H(T),H(j),H(J),H(z),H(Y),e})?r.call(t,n,t,e):r)||(e.exports=i)},929:function(e,t,n){"use strict";function r(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,0==(128&r))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,0==(128&r))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function i(e,t,n){for(let r=0;r<28;r+=7){const i=e>>>r,s=!(i>>>7==0&&0==t),a=255&(s?128|i:i);if(n.push(a),!s)return}const r=e>>>28&15|(7&t)<<4,i=!(t>>3==0);if(n.push(255&(i?128|r:r)),i){for(let e=3;e<31;e+=7){const r=t>>>e,i=!(r>>>7==0),s=255&(i?128|r:r);if(n.push(s),!i)return}n.push(t>>>31&1)}}n.d(t,"a",function(){return ft});const s=4294967296;function a(e){let t="-"==e[0];t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function a(t,a){const o=Number(e.slice(t,a));i*=n,(r=r*n+o)>=s&&(i+=r/s|0,r%=s)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),[t,r,i]}function o(e,t){if(t<=2097151)return""+(s*t+e);let n=(e>>>24|t<<8)>>>0&16777215,r=t>>16&65535,i=(16777215&e)+6777216*n+6710656*r,a=n+8147497*r,o=2*r;function u(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return i>=1e7&&(a+=Math.floor(i/1e7),i%=1e7),a>=1e7&&(o+=Math.floor(a/1e7),a%=1e7),u(o,0)+u(a,o)+u(i,1)}function u(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function l(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<7,0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<14,0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<21,0==(128&e))return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(let t=5;0!=(128&e)&&t<10;t++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}const c=function(){const e=new DataView(new ArrayBuffer(8));return void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}();function f(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const h=/^-?[0-9]+$/,d=4294967296;class p{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=this.hi*d+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class m extends p{static from(e){if(c)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=c.C(e);case"number":if(0===e)return this.ZERO;e=c.C(e);case"bigint":if(!e)return this.ZERO;if(e<c.UMIN)throw new Error("signed value for ulong");if(e>c.UMAX)throw new Error("ulong too large");return c.V.setBigUint64(0,e,!0),new m(c.V.getInt32(0,!0),c.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!h.test(e))throw new Error("string is no integer");let[t,n,r]=a(e);if(t)throw new Error("signed value");return new m(n,r);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new m(e,e/d)}throw new Error("unknown value "+typeof e)}toString(){return c?this.toBigInt().toString():o(this.lo,this.hi)}toBigInt(){return f(c),c.V.setInt32(0,this.lo,!0),c.V.setInt32(4,this.hi,!0),c.V.getBigUint64(0,!0)}}m.ZERO=new m(0,0);class g extends p{static from(e){if(c)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=c.C(e);case"number":if(0===e)return this.ZERO;e=c.C(e);case"bigint":if(!e)return this.ZERO;if(e<c.MIN)throw new Error("ulong too small");if(e>c.MAX)throw new Error("ulong too large");return c.V.setBigInt64(0,e,!0),new g(c.V.getInt32(0,!0),c.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!h.test(e))throw new Error("string is no integer");let[t,n,r]=a(e),i=new g(n,r);return t?i.negate():i;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new g(e,e/d):new g(-e,-e/d).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return 0!=(2147483648&this.hi)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new g(t,e)}toString(){if(c)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+o(e.lo,e.hi)}return o(this.lo,this.hi)}toBigInt(){return f(c),c.V.setInt32(0,this.lo,!0),c.V.setInt32(4,this.hi,!0),c.V.getBigInt64(0,!0)}}g.ZERO=new g(0,0);const y=e=>String.fromCharCode.apply(String,e);function w(e,t){if(!e)throw new Error(t)}const b=3.4028234663852886e38,v=-3.4028234663852886e38,k=4294967295,N=2147483647,L=-2147483648;function T(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>N||e<L)throw new Error("invalid int 32: "+e)}function I(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>k||e<0)throw new Error("invalid uint 32: "+e)}function S(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>b||e<v))throw new Error("invalid float 32: "+e)}var E;!function(e){e.symbol=Symbol("protobuf-ts/unknown"),e.onRead=((n,r,i,s,a)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:s,data:a})}),e.onWrite=((t,n,r)=>{for(let{no:t,wireType:i,data:s}of e.list(n))r.tag(t,i).raw(s)}),e.list=((n,r)=>{if(t(n)){let t=n[e.symbol];return r?t.filter(e=>e.no==r):t}return[]}),e.last=((t,n)=>e.list(t,n).slice(-1)[0]);const t=t=>t&&Array.isArray(t[e.symbol])}(E||(E={}));const O={readUnknownField:!0,readerFactory:e=>new class{constructor(e){this.varint64=r,this.uint32=l,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case B.Bit64:this.pos+=4;case B.Bit32:this.pos+=4;break;case B.LengthDelimited:let t=this.uint32();this.pos+=t;break;case B.Varint:for(;128&this.buf[this.pos++];);}return this.assertBounds(),this.buf.slice(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new g(...this.varint64())}uint64(){return new m(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return new g(e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new m(this.sfixed32(),this.sfixed32())}sfixed64(){return new g(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.slice(t,this.pos)}string(){return function(e){if(e.length<1)return"";let t,n=0,r=[],i=[],s=0,a=e.length;for(;n<a;)(t=e[n++])<128?i[s++]=t:t>191&&t<224?i[s++]=(31&t)<<6|63&e[n++]:t>239&&t<365?(t=((7&t)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,i[s++]=55296+(t>>10),i[s++]=56320+(1023&t)):i[s++]=(15&t)<<12|(63&e[n++])<<6|63&e[n++],s>8191&&(r.push(y(i)),s=0);return r.length?(s&&r.push(y(i.slice(0,s))),r.join("")):y(i.slice(0,s))}(this.bytes())}}(e)},R={writeUnknownFields:!0,writerFactory:()=>new class{constructor(e){this.stack=[],this.textEncoder=null!==e&&void 0!==e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(I(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return T(e),u(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){S(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){I(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){T(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return T(e),u(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=g.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=m.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=g.from(e);return i(t.lo,t.hi,this.buf),this}sint64(e){let t=g.from(e),n=t.hi>>31;return i(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=m.from(e);return i(t.lo,t.hi,this.buf),this}}};var B,F,U,x;function A(e,t,n){let r,i,s=n;for(let n of e.fields){let e=n.localName;if(n.oneof){const a=s[n.oneof];if(void 0===a)continue;if(r=a[e],(i=t[n.oneof]).oneofKind=a.oneofKind,void 0===r){delete i[e];continue}}else if(i=t,void 0===(r=s[e]))continue;switch(n.kind){case"scalar":case"enum":n.repeat?i[e]=r.concat():i[e]=r;break;case"message":let t=n.T();if(n.repeat)for(let n=0;n<r.length;n++)i[e][n]=t.create(r[n]);else void 0===i[e]?i[e]=t.create(r):t.mergePartial(i[e],r);break;case"map":switch(n.V.kind){case"scalar":case"enum":Object.assign(i[e],r);break;case"message":let t=n.V.T();for(let n of Object.keys(r))i[e][n]=t.create(r[n])}}}}function $(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);"_"==i?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):0==r?n.push(i.toLowerCase()):n.push(i)}return n.join("")}function D(e){var t,n,r,i;return e.localName=null!==(t=e.localName)&&void 0!==t?t:$(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:$(e.name),e.repeat=null!==(r=e.repeat)&&void 0!==r?r:x.NO,e.opt=null!==(i=e.opt)&&void 0!==i?i:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function C(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(B||(B={})),function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(F||(F={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(U||(U={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(x||(x={}));class j{constructor(e){this.info=e}prepare(){if(this.data)return;const e=[],t=[],n=[];for(let r of this.info.fields)if(r.oneof)n.includes(r.oneof)||(n.push(r.oneof),e.push(r.oneof),t.push(r.oneof));else switch(t.push(r.localName),r.kind){case"scalar":case"enum":r.opt&&!r.repeat||e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t,n=!1){if(t<0)return!0;if(null===e||void 0===e||"object"!=typeof e)return!1;this.prepare();let r=Object.keys(e),i=this.data;if(r.length<i.req.length||i.req.some(e=>!r.includes(e)))return!1;if(!n&&r.some(e=>!i.known.includes(e)))return!1;if(t<1)return!0;for(const r of i.oneofs){const i=e[r];if(!C(i))return!1;if(void 0===i.oneofKind)continue;const s=this.info.fields.find(e=>e.localName===i.oneofKind);if(!s)return!1;if(!this.field(i[i.oneofKind],s,n,t))return!1}for(const r of this.info.fields)if(void 0===r.oneof&&!this.field(e[r.localName],r,n,t))return!1;return!0}field(e,t,n,r){let i=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:i?this.scalars(e,t.T,r,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:i?this.scalars(e,F.INT32,r):this.scalar(e,F.INT32);case"message":return void 0===e||(i?this.messages(e,t.T(),n,r):this.message(e,t.T(),n,r));case"map":if("object"!=typeof e||null===e)return!1;if(r<2)return!0;if(!this.mapKeys(e,t.K,r))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,r,t.V.L);case"enum":return this.scalars(Object.values(e),F.INT32,r);case"message":return this.messages(Object.values(e),t.V.T(),n,r)}}return!0}message(e,t,n,r){return n?t.isAssignable(e,r):t.is(e,r)}messages(e,t,n,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(n){for(let n=0;n<e.length&&n<r;n++)if(!t.isAssignable(e[n],r-1))return!1}else for(let n=0;n<e.length&&n<r;n++)if(!t.is(e[n],r-1))return!1;return!0}scalar(e,t,n){let r=typeof e;switch(t){case F.UINT64:case F.FIXED64:case F.INT64:case F.SFIXED64:case F.SINT64:switch(n){case U.BIGINT:return"bigint"==r;case U.NUMBER:return"number"==r&&!isNaN(e);default:return"string"==r}case F.BOOL:return"boolean"==r;case F.STRING:return"string"==r;case F.BYTES:return e instanceof Uint8Array;case F.DOUBLE:case F.FLOAT:return"number"==r&&!isNaN(e);default:return"number"==r&&Number.isInteger(e)}}scalars(e,t,n,r){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e))for(let i=0;i<e.length&&i<n;i++)if(!this.scalar(e[i],t,r))return!1;return!0}mapKeys(e,t,n){let r=Object.keys(e);switch(t){case F.INT32:case F.FIXED32:case F.SFIXED32:case F.SINT32:case F.UINT32:return this.scalars(r.slice(0,n).map(e=>parseInt(e)),t,n);case F.BOOL:return this.scalars(r.slice(0,n).map(e=>"true"==e||"false"!=e&&e),t,n);default:return this.scalars(r,t,n,U.STRING)}}}function V(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}let M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),K=[];for(let e=0;e<M.length;e++)K[M[e].charCodeAt(0)]=e;function W(e,t){switch(t){case U.BIGINT:return e.toBigInt();case U.NUMBER:return e.toNumber();default:return e.toString()}}K["-".charCodeAt(0)]=M.indexOf("+"),K["_".charCodeAt(0)]=M.indexOf("/");class P{constructor(e){this.info=e}prepare(){if(void 0===this.fMap){this.fMap={};for(const e of this.info.fields)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,n){if(!e){let e=V(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,n){this.prepare();const r=[];for(const[s,a]of Object.entries(e)){const e=this.fMap[s];if(!e){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const o=e.localName;let u;if(e.oneof){if(r.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(e.oneof),u=t[e.oneof]={oneofKind:o}}else u=t;if("map"==e.kind){if(null===a)continue;this.assert(null!==(i=a)&&"object"==typeof i&&!Array.isArray(i),e.name,a);const t=u[o];for(const[r,i]of Object.entries(a)){let s;switch(this.assert(null!==i,e.name+" map value",null),e.V.kind){case"message":s=e.V.T().internalJsonRead(i,n);break;case"enum":s=this.enum(e.V.T(),i,e.name);break;case"scalar":s=this.scalar(i,e.V.T,e.V.L,e.name)}this.assert(void 0!==s,e.name+" map value",i);let a=r;e.K==F.BOOL&&(a="true"==a||"false"!=a&&a),t[a=this.scalar(a,e.K,U.STRING,e.name).toString()]=s}}else if(e.repeat){if(null===a)continue;this.assert(Array.isArray(a),e.name,a);const t=u[o];for(const r of a){let i;switch(this.assert(null!==r,e.name,null),e.kind){case"message":i=e.T().internalJsonRead(r,n);break;case"enum":i=this.enum(e.T(),r,e.name);break;case"scalar":i=this.scalar(r,e.T,e.L,e.name)}this.assert(void 0!==i,e.name,a),t.push(i)}}else switch(e.kind){case"message":if(null===a&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}u[o]=e.T().internalJsonRead(a,n,u[o]);break;case"enum":u[o]=this.enum(e.T(),a,e.name);break;case"scalar":u[o]=this.scalar(a,e.T,e.L,e.name)}}var i}enum(e,t,n){if("google.protobuf.NullValue"==e[0]&&w(null===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return w(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let r=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(r=t.substring(e[2].length));let i=e[1][r];return w("number"==typeof i,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),i}w(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,r){let i;try{switch(t){case F.DOUBLE:case F.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){i="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){i="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let r=Number(e);if(Number.isNaN(r)){i="not a number";break}if(!Number.isFinite(r)){i="too large or small";break}return t==F.FLOAT&&S(r),r;case F.INT32:case F.FIXED32:case F.SFIXED32:case F.SINT32:case F.UINT32:if(null===e)return 0;let s;if("number"==typeof e?s=e:""===e?i="empty string":"string"==typeof e&&(e.trim().length!==e.length?i="extra whitespace":s=Number(e)),void 0===s)break;return t==F.UINT32?I(s):T(s),s;case F.INT64:case F.SFIXED64:case F.SINT64:if(null===e)return W(g.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return W(g.from(e),n);case F.FIXED64:case F.UINT64:if(null===e)return W(m.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return W(m.from(e),n);case F.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case F.STRING:if(null===e)return"";if("string"!=typeof e){i="extra whitespace";break}try{encodeURIComponent(e)}catch(i){i="invalid UTF8";break}return e;case F.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,r=new Uint8Array(t),i=0,s=0,a=0;for(let t=0;t<e.length;t++){if(void 0===(n=K[e.charCodeAt(t)]))switch(e[t]){case"=":s=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:a=n,s=1;break;case 1:r[i++]=a<<2|(48&n)>>4,a=n,s=2;break;case 2:r[i++]=(15&a)<<4|(60&n)>>2,a=n,s=3;break;case 3:r[i++]=(3&a)<<6|n,s=0}}if(1==s)throw Error("invalid base64 string.");return r.subarray(0,i)}(e)}}catch(e){i=e.message}this.assert(!1,r+(i?" - "+i:""),e)}}class _{constructor(e){this.info=e}write(e,t){const n={},r=e;for(const e of this.info.fields.filter(e=>!e.oneof)){let i=this.field(e,r[e.localName],t);void 0!==i&&(n[t.useProtoFieldName?e.name:e.jsonName]=i)}for(const e of this.info.fields){if(!e.oneof)continue;const i=r[e.oneof];if(i.oneofKind!==e.localName)continue;let s=void 0;w(void 0!==(s="scalar"==e.kind||"enum"==e.kind?this.field(e,i[e.localName],{enumAsInteger:t.enumAsInteger,useProtoFieldName:t.useProtoFieldName,emitDefaultValues:!0}):this.field(e,i[e.localName],t))),n[t.useProtoFieldName?e.name:e.jsonName]=s}return n}field(e,t,n){let r=void 0;if("map"==e.kind){w("object"==typeof t&&null!==t);const i={};switch(e.V.kind){case"scalar":for(const[n,r]of Object.entries(t)){const t=this.scalar(e.V.T,r,e.name,!1,!0);w(void 0!==t),i[n.toString()]=t}break;case"message":const r=e.V.T();for(const[s,a]of Object.entries(t)){const t=this.message(r,a,e.name,n);w(void 0!==t),i[s.toString()]=t}break;case"enum":const s=e.V.T();for(const[r,a]of Object.entries(t)){w(void 0===a||"number"==typeof a);const t=this.enum(s,a,e.name,!1,!0,n.enumAsInteger);w(void 0!==t),i[r.toString()]=t}}(n.emitDefaultValues||Object.keys(i).length>0)&&(r=i)}else if(e.repeat){w(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){const r=this.scalar(e.T,t[n],e.name,e.opt,!0);w(void 0!==r),i.push(r)}break;case"enum":const r=e.T();for(let s=0;s<t.length;s++){w(void 0===t[s]||"number"==typeof t[s]);const a=this.enum(r,t[s],e.name,e.opt,!0,n.enumAsInteger);w(void 0!==a),i.push(a)}break;case"message":const s=e.T();for(let r=0;r<t.length;r++){const a=this.message(s,t[r],e.name,n);w(void 0!==a),i.push(a)}}(n.emitDefaultValues||i.length>0||n.emitDefaultValues)&&(r=i)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,n)}return r}enum(e,t,n,r,i,s){if("google.protobuf.NullValue"==e[0])return null;if(void 0!==t){if(0!==t||i||r)return w("number"==typeof t),w(Number.isInteger(t)),s||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else w(r)}message(e,t,n,r){return void 0===t?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,n,r,i){if(void 0===t)return void w(r);const s=i||r;switch(e){case F.INT32:case F.SFIXED32:case F.SINT32:return 0===t?s?0:void 0:(T(t),t);case F.FIXED32:case F.UINT32:return 0===t?s?0:void 0:(I(t),t);case F.FLOAT:S(t);case F.DOUBLE:return 0===t?s?0:void 0:(w("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case F.STRING:return""===t?s?"":void 0:(w("string"==typeof t),t);case F.BOOL:return!1===t?!s&&void 0:(w("boolean"==typeof t),t);case F.UINT64:case F.FIXED64:w("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let n=m.from(t);if(n.isZero()&&!s)return;return n.toString();case F.INT64:case F.SFIXED64:case F.SINT64:w("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let r=g.from(t);if(r.isZero()&&!s)return;return r.toString();case F.BYTES:return w(t instanceof Uint8Array),t.byteLength?function(e){let t,n="",r=0,i=0;for(let s=0;s<e.length;s++)switch(t=e[s],r){case 0:n+=M[t>>2],i=(3&t)<<4,r=1;break;case 1:n+=M[i|t>>4],i=(15&t)<<2,r=2;break;case 2:n+=M[i|t>>6],n+=M[63&t],r=0}return r&&(n+=M[i],n+="=",1==r&&(n+="=")),n}(t):s?"":void 0}}}function q(e,t=U.STRING){switch(e){case F.BOOL:return!1;case F.UINT64:case F.FIXED64:return W(m.ZERO,t);case F.INT64:case F.SFIXED64:case F.SINT64:return W(g.ZERO,t);case F.DOUBLE:case F.FLOAT:return 0;case F.BYTES:return new Uint8Array(0);case F.STRING:return"";default:return 0}}class X{constructor(e){this.info=e}prepare(){this.fieldNoToField||(this.fieldNoToField=new Map(this.info.fields.map(e=>[e.no,e])))}read(e,t,n,r){this.prepare();const i=void 0===r?e.len:e.pos+r;for(;e.pos<i;){const[r,i]=e.tag(),s=this.fieldNoToField.get(r);if(!s){let s=n.readUnknownField;if("throw"==s)throw new Error(`Unknown field ${r} (wire type ${i}) for ${this.info.typeName}`);let a=e.skip(i);!1!==s&&(!0===s?E.onRead:s)(this.info.typeName,t,r,i,a);continue}let a=t,o=s.repeat,u=s.localName;switch(s.oneof&&(a=a[s.oneof]).oneofKind!==u&&(a=t[s.oneof]={oneofKind:u}),s.kind){case"scalar":case"enum":let r="enum"==s.kind?F.INT32:s.T,l="scalar"==s.kind?s.L:void 0;if(o){let t=a[u];if(i==B.LengthDelimited&&r!=F.STRING&&r!=F.BYTES){let n=e.uint32()+e.pos;for(;e.pos<n;)t.push(this.scalar(e,r,l))}else t.push(this.scalar(e,r,l))}else a[u]=this.scalar(e,r,l);break;case"message":if(o){let t=a[u],r=s.T().internalBinaryRead(e,e.uint32(),n);t.push(r)}else a[u]=s.T().internalBinaryRead(e,e.uint32(),n,a[u]);break;case"map":let[c,f]=this.mapEntry(s,e,n);a[u][c]=f}}}mapEntry(e,t,n){let r=t.uint32(),i=t.pos+r,s=void 0,a=void 0;for(;t.pos<i;){let[r,i]=t.tag();switch(r){case 1:s=e.K==F.BOOL?t.bool().toString():this.scalar(t,e.K,U.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(t,e.V.T,e.V.L);break;case"enum":a=t.int32();break;case"message":a=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw new Error(`Unknown field ${r} (wire type ${i}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===s){let t=q(e.K);s=e.K==F.BOOL?t.toString():t}if(void 0===a)switch(e.V.kind){case"scalar":a=q(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create()}return[s,a]}scalar(e,t,n){switch(t){case F.INT32:return e.int32();case F.STRING:return e.string();case F.BOOL:return e.bool();case F.DOUBLE:return e.double();case F.FLOAT:return e.float();case F.INT64:return W(e.int64(),n);case F.UINT64:return W(e.uint64(),n);case F.FIXED64:return W(e.fixed64(),n);case F.FIXED32:return e.fixed32();case F.BYTES:return e.bytes();case F.UINT32:return e.uint32();case F.SFIXED32:return e.sfixed32();case F.SFIXED64:return W(e.sfixed64(),n);case F.SINT32:return e.sint32();case F.SINT64:return W(e.sint64(),n)}}}class J{constructor(e){this.info=e}prepare(){this.fields||(this.fields=this.info.fields.concat().sort((e,t)=>e.no-t.no))}write(e,t,n){this.prepare();for(const r of this.fields){let i,s,a=r.repeat,o=r.localName;if(r.oneof){const t=e[r.oneof];if(t.oneofKind!==o)continue;i=t[o],s=!0}else i=e[o],s=!1;switch(r.kind){case"scalar":case"enum":let e="enum"==r.kind?F.INT32:r.T;if(a)if(w(Array.isArray(i)),a==x.PACKED)this.packed(t,e,r.no,i);else for(const n of i)this.scalar(t,e,r.no,n,!0);else void 0===i?w(r.opt):this.scalar(t,e,r.no,i,s||r.opt);break;case"message":if(a){w(Array.isArray(i));for(const e of i)this.message(t,n,r.T(),r.no,e)}else this.message(t,n,r.T(),r.no,i);break;case"map":w("object"==typeof i&&null!==i);for(const[e,s]of Object.entries(i))this.mapEntry(t,n,r,e,s)}}let r=n.writeUnknownFields;!1!==r&&(!0===r?E.onWrite:r)(this.info.typeName,e,t)}mapEntry(e,t,n,r,i){e.tag(n.no,B.LengthDelimited),e.fork();let s=r;switch(n.K){case F.INT32:case F.FIXED32:case F.UINT32:case F.SFIXED32:case F.SINT32:s=Number.parseInt(r);break;case F.BOOL:w("true"==r||"false"==r),s="true"==r}switch(this.scalar(e,n.K,1,s,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,i,!0);break;case"enum":this.scalar(e,F.INT32,2,i,!0);break;case"message":this.message(e,t,n.V.T(),2,i)}e.join()}message(e,t,n,r,i){void 0!==i&&(n.internalBinaryWrite(i,e.tag(r,B.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,r,i){let[s,a,o]=this.scalarInfo(t,r);o&&!i||(e.tag(n,s),e[a](r))}packed(e,t,n,r){if(!r.length)return;w(t!==F.BYTES&&t!==F.STRING),e.tag(n,B.LengthDelimited),e.fork();let[,i]=this.scalarInfo(t);for(let t=0;t<r.length;t++)e[i](r[t]);e.join()}scalarInfo(e,t){let n,r=B.Varint,i=void 0===t,s=0===t;switch(e){case F.INT32:n="int32";break;case F.STRING:s=i||!t.length,r=B.LengthDelimited,n="string";break;case F.BOOL:s=!1===t,n="bool";break;case F.UINT32:n="uint32";break;case F.DOUBLE:r=B.Bit64,n="double";break;case F.FLOAT:r=B.Bit32,n="float";break;case F.INT64:s=i||g.from(t).isZero(),n="int64";break;case F.UINT64:s=i||m.from(t).isZero(),n="uint64";break;case F.FIXED64:s=i||m.from(t).isZero(),r=B.Bit64,n="fixed64";break;case F.BYTES:s=i||!t.byteLength,r=B.LengthDelimited,n="bytes";break;case F.FIXED32:r=B.Bit32,n="fixed32";break;case F.SFIXED32:r=B.Bit32,n="sfixed32";break;case F.SFIXED64:s=i||g.from(t).isZero(),r=B.Bit64,n="sfixed64";break;case F.SINT32:n="sint32";break;case F.SINT64:s=i||g.from(t).isZero(),n="sint64"}return[r,n,i||s]}}const z={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},G={ignoreUnknownFields:!1};const Z=Object.values;function Y(e,t,n){if(t===n)return!0;if(e!==F.BYTES)return!1;let r=t,i=n;if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!=i[e])return!1;return!0}function H(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!Y(e,t[r],n[r]))return!1;return!0}function Q(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}class ee{constructor(e,t){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(D),this.refTypeCheck=new j(this),this.refJsonReader=new P(this),this.refJsonWriter=new _(this),this.refBinReader=new X(this),this.refBinWriter=new J(this)}create(e){let t=function(e){let t={};for(let n of e.fields){let e=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=q(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&A(this,t,e),t}clone(e){let t=this.create();return A(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let e=r.localName,i=r.oneof?t[r.oneof][e]:t[e],s=r.oneof?n[r.oneof][e]:n[e];switch(r.kind){case"enum":case"scalar":let e="enum"==r.kind?F.INT32:r.T;if(!(r.repeat?H(e,i,s):Y(e,i,s)))return!1;break;case"map":if(!("message"==r.V.kind?Q(r.V.T(),Z(i),Z(s)):H("enum"==r.V.kind?F.INT32:r.V.T,Z(i),Z(s))))return!1;break;case"message":let t=r.T();if(!(r.repeat?Q(t,i,s):t.equals(i,s)))return!1}}return!0}(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){A(this,e,t)}fromBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},O),e):O}(t);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},G),e):G}(t))}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},z),e):z}(t))}toJsonString(e,t){var n;let r=this.toJson(e,t);return JSON.stringify(r,null,null!==(n=null===t||void 0===t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},R),e):R}(t);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let r=null!==n&&void 0!==n?n:this.create();return this.refJsonReader.read(e,r,t),r}throw new Error(`Unable to parse message ${this.typeName} from JSON ${V(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create();return this.refBinReader.read(e,i,n,t),i}}var te;!function(e){e[e.ASSETS=0]="ASSETS",e[e.UPLOADS=1]="UPLOADS",e[e.ANY=2]="ANY"}(te||(te={}));const ne=new class extends ee{constructor(){super("ImageConfig",[{no:1,name:"root",kind:"scalar",opt:!0,T:9},{no:2,name:"reason",kind:"scalar",opt:!0,T:9},{no:3,name:"sources",kind:"enum",opt:!0,T:()=>["ImageConfig.Sources",te]}])}create(e){const t={};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.root=e.string();break;case 2:i.reason=e.string();break;case 3:i.sources=e.int32();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){void 0!==e.root&&t.tag(1,B.LengthDelimited).string(e.root),void 0!==e.reason&&t.tag(2,B.LengthDelimited).string(e.reason),void 0!==e.sources&&t.tag(3,B.Varint).int32(e.sources);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const re=new class extends ee{constructor(){super("NumberConfig",[{no:1,name:"constraints",kind:"message",repeat:1,T:()=>ie},{no:2,name:"format",kind:"scalar",opt:!0,T:9}])}create(e){const t={constraints:[]};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.constraints.push(ie.internalBinaryRead(e,e.uint32(),n));break;case 2:i.format=e.string();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){for(let r=0;r<e.constraints.length;r++)ie.internalBinaryWrite(e.constraints[r],t.tag(1,B.LengthDelimited).fork(),n).join();void 0!==e.format&&t.tag(2,B.LengthDelimited).string(e.format);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const ie=new class extends ee{constructor(){super("NumberConstraint",[{no:1,name:"reason",kind:"scalar",opt:!0,T:9},{no:2,name:"min",kind:"message",oneof:"rule",T:()=>se},{no:3,name:"max",kind:"message",oneof:"rule",T:()=>ae},{no:4,name:"isInteger",kind:"message",oneof:"rule",T:()=>oe}])}create(e){const t={rule:{oneofKind:void 0}};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.reason=e.string();break;case 2:i.rule={oneofKind:"min",min:se.internalBinaryRead(e,e.uint32(),n,i.rule.min)};break;case 3:i.rule={oneofKind:"max",max:ae.internalBinaryRead(e,e.uint32(),n,i.rule.max)};break;case 4:i.rule={oneofKind:"isInteger",isInteger:oe.internalBinaryRead(e,e.uint32(),n,i.rule.isInteger)};break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){void 0!==e.reason&&t.tag(1,B.LengthDelimited).string(e.reason),"min"===e.rule.oneofKind&&se.internalBinaryWrite(e.rule.min,t.tag(2,B.LengthDelimited).fork(),n).join(),"max"===e.rule.oneofKind&&ae.internalBinaryWrite(e.rule.max,t.tag(3,B.LengthDelimited).fork(),n).join(),"isInteger"===e.rule.oneofKind&&oe.internalBinaryWrite(e.rule.isInteger,t.tag(4,B.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const se=new class extends ee{constructor(){super("NumberMinRule",[{no:1,name:"value",kind:"scalar",T:1}])}create(e){const t={value:0};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.double();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,B.Bit64).double(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const ae=new class extends ee{constructor(){super("NumberMaxRule",[{no:1,name:"value",kind:"scalar",T:1}])}create(e){const t={value:0};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.double();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,B.Bit64).double(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const oe=new class extends ee{constructor(){super("NumberIsIntegerRule",[{no:1,name:"value",kind:"scalar",T:8}])}create(e){const t={value:!1};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.bool();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){!1!==e.value&&t.tag(1,B.Varint).bool(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const ue=new class extends ee{constructor(){super("StringConfig",[{no:1,name:"constraints",kind:"message",repeat:1,T:()=>le}])}create(e){const t={constraints:[]};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.constraints.push(le.internalBinaryRead(e,e.uint32(),n));break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){for(let r=0;r<e.constraints.length;r++)le.internalBinaryWrite(e.constraints[r],t.tag(1,B.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const le=new class extends ee{constructor(){super("StringConstraint",[{no:1,name:"reason",kind:"scalar",opt:!0,T:9},{no:2,name:"pattern",kind:"message",oneof:"rule",T:()=>ce},{no:3,name:"minLength",kind:"message",oneof:"rule",T:()=>fe},{no:4,name:"maxLength",kind:"message",oneof:"rule",T:()=>he},{no:5,name:"minLines",kind:"message",oneof:"rule",T:()=>de},{no:6,name:"maxLines",kind:"message",oneof:"rule",T:()=>pe},{no:7,name:"minLengthPerLine",kind:"message",oneof:"rule",T:()=>me},{no:8,name:"maxLengthPerLine",kind:"message",oneof:"rule",T:()=>ge}])}create(e){const t={rule:{oneofKind:void 0}};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.reason=e.string();break;case 2:i.rule={oneofKind:"pattern",pattern:ce.internalBinaryRead(e,e.uint32(),n,i.rule.pattern)};break;case 3:i.rule={oneofKind:"minLength",minLength:fe.internalBinaryRead(e,e.uint32(),n,i.rule.minLength)};break;case 4:i.rule={oneofKind:"maxLength",maxLength:he.internalBinaryRead(e,e.uint32(),n,i.rule.maxLength)};break;case 5:i.rule={oneofKind:"minLines",minLines:de.internalBinaryRead(e,e.uint32(),n,i.rule.minLines)};break;case 6:i.rule={oneofKind:"maxLines",maxLines:pe.internalBinaryRead(e,e.uint32(),n,i.rule.maxLines)};break;case 7:i.rule={oneofKind:"minLengthPerLine",minLengthPerLine:me.internalBinaryRead(e,e.uint32(),n,i.rule.minLengthPerLine)};break;case 8:i.rule={oneofKind:"maxLengthPerLine",maxLengthPerLine:ge.internalBinaryRead(e,e.uint32(),n,i.rule.maxLengthPerLine)};break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){void 0!==e.reason&&t.tag(1,B.LengthDelimited).string(e.reason),"pattern"===e.rule.oneofKind&&ce.internalBinaryWrite(e.rule.pattern,t.tag(2,B.LengthDelimited).fork(),n).join(),"minLength"===e.rule.oneofKind&&fe.internalBinaryWrite(e.rule.minLength,t.tag(3,B.LengthDelimited).fork(),n).join(),"maxLength"===e.rule.oneofKind&&he.internalBinaryWrite(e.rule.maxLength,t.tag(4,B.LengthDelimited).fork(),n).join(),"minLines"===e.rule.oneofKind&&de.internalBinaryWrite(e.rule.minLines,t.tag(5,B.LengthDelimited).fork(),n).join(),"maxLines"===e.rule.oneofKind&&pe.internalBinaryWrite(e.rule.maxLines,t.tag(6,B.LengthDelimited).fork(),n).join(),"minLengthPerLine"===e.rule.oneofKind&&me.internalBinaryWrite(e.rule.minLengthPerLine,t.tag(7,B.LengthDelimited).fork(),n).join(),"maxLengthPerLine"===e.rule.oneofKind&&ge.internalBinaryWrite(e.rule.maxLengthPerLine,t.tag(8,B.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const ce=new class extends ee{constructor(){super("StringPatternRule",[{no:1,name:"value",kind:"scalar",T:9}])}create(e){const t={value:""};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.string();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){""!==e.value&&t.tag(1,B.LengthDelimited).string(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const fe=new class extends ee{constructor(){super("StringMinLengthRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,B.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const he=new class extends ee{constructor(){super("StringMaxLengthRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,B.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const de=new class extends ee{constructor(){super("StringMinLinesRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,B.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const pe=new class extends ee{constructor(){super("StringMaxLinesRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,B.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const me=new class extends ee{constructor(){super("StringMinLengthPerLineRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,B.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const ge=new class extends ee{constructor(){super("StringMaxLengthPerLineRule",[{no:1,name:"value",kind:"scalar",T:13}])}create(e){const t={value:0};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.uint32();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){0!==e.value&&t.tag(1,B.Varint).uint32(e.value);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const ye=new class extends ee{constructor(){super("VariantConfig",[{no:1,name:"variants",kind:"message",repeat:1,T:()=>we},{no:2,name:"reason",kind:"scalar",opt:!0,T:9}])}create(e){const t={variants:[]};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.variants.push(we.internalBinaryRead(e,e.uint32(),n));break;case 2:i.reason=e.string();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){for(let r=0;r<e.variants.length;r++)we.internalBinaryWrite(e.variants[r],t.tag(1,B.LengthDelimited).fork(),n).join();void 0!==e.reason&&t.tag(2,B.LengthDelimited).string(e.reason);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const we=new class extends ee{constructor(){super("Variant",[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9}])}create(e){const t={value:""};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.value=e.string();break;case 2:i.title=e.string();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){""!==e.value&&t.tag(1,B.LengthDelimited).string(e.value),void 0!==e.title&&t.tag(2,B.LengthDelimited).string(e.title);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};class be{static getFieldConfig(e){if(null==e.config)return null;switch(e.config.oneofKind){case"string":return e.config.string;case"number":return e.config.number;case"variant":return e.config.variant;case"image":return e.config.image;default:throw new Error(`The field config type ${e.config.oneofKind} is not supported.`)}}static getStringConfig(e){return"string"==e.config.oneofKind?e.config.string:null}static getNumberConfig(e){return"number"==e.config.oneofKind?e.config.number:null}static getVariantConfig(e){return"variant"==e.config.oneofKind?e.config.variant:null}static getImageConfig(e){return"image"==e.config.oneofKind?e.config.image:null}static getStringRule(e){if(null==e.rule)return null;switch(e.rule.oneofKind){case"pattern":return e.rule.pattern;case"minLength":return e.rule.minLength;case"maxLength":return e.rule.maxLength;case"minLines":return e.rule.minLines;case"maxLines":return e.rule.maxLines;case"minLengthPerLine":return e.rule.minLengthPerLine;case"maxLengthPerLine":return e.rule.maxLengthPerLine;default:throw new Error(`The string rule type ${e.rule.oneofKind} is not supported.`)}}static getNumberRule(e){if(null==e.rule)return null;switch(e.rule.oneofKind){case"min":return e.rule.min;case"max":return e.rule.max;case"isInteger":return e.rule.isInteger;default:throw new Error(`The number rule type ${e.rule.oneofKind} is not supported.`)}}static getConstraintRuleDisplayName(e){if(null==(null===e||void 0===e?void 0:e.rule))return null;switch(e.rule.oneofKind){case"pattern":return"Pattern";case"minLength":return"Min characters";case"maxLength":return"Max characters";case"minLines":return"Min number of lines";case"maxLines":return"Max number of lines";case"minLengthPerLine":return"Min characters per line";case"maxLengthPerLine":return"Max characters per line";case"min":return"Min value";case"max":return"Max value";case"isInteger":return"Only integer";default:throw new Error(`The rule type ${e.rule.oneofKind} is not supported.`)}}static getSupportedRuleTypes(e){if(void 0==e)return;const t="string"==typeof e?e:e.oneofKind;return"string"==t?this.supportedStringRuleTypes.slice():"number"==t?this.supportedNumberRuleTypes.slice():"variant"==t?["variants"]:"image"==t?["root"]:void 0}static createConfig(e,t){switch(e){case"number":return this._buildOneofItem(e,re.create({constraints:this._createNumberConstraints(t)}));case"variant":return this._buildOneofItem(e,ye.create(this._createVariantConfig(t[0])));case"string":return this._buildOneofItem(e,ue.create({constraints:this._createStringConstraints(t)}));case"image":return this._buildOneofItem(e,ne.create(this._createImageConfig(t[0])));case void 0:return;default:throw new Error(`Unknown config type: ${e}`)}}static _buildOneofItem(e,t){const n={oneofKind:e};return n[e]=t,n}static _createNumberConstraints(e){const t=[];for(let n of e){let e={};switch(n.ruleType){case"isInteger":e.rule=this._buildOneofItem(n.ruleType,oe.create({value:this.toBool(n.value)}));break;case"min":e.rule=this._buildOneofItem(n.ruleType,se.create({value:this.toNumber(n.value)}));break;case"max":e.rule=this._buildOneofItem(n.ruleType,ae.create({value:this.toNumber(n.value)}));break;default:continue}null!=n.reason&&(e.reason=n.reason),t.push(e)}return t}static _createVariantConfig(e){return null==e?{}:{variants:e.variants,reason:e.reason}}static _createImageConfig(e){if(null==e)return{};return{root:e.value,reason:e.reason,sources:(()=>{switch(e.sources){case"Assets":case 0:return te.ASSETS;case"Uploads":case 1:return te.UPLOADS;case"Any":case 2:default:return te.ANY}})()}}static _createStringConstraints(e){const t=[];for(let n of e){const e={};switch(n.ruleType){case"minLength":e.rule=this._buildOneofItem(n.ruleType,fe.create({value:this.toNumber(n.value)}));break;case"maxLength":e.rule=this._buildOneofItem(n.ruleType,he.create({value:this.toNumber(n.value)}));break;case"minLengthPerLine":e.rule=this._buildOneofItem(n.ruleType,me.create({value:this.toNumber(n.value)}));break;case"maxLengthPerLine":e.rule=this._buildOneofItem(n.ruleType,ge.create({value:this.toNumber(n.value)}));break;case"minLines":e.rule=this._buildOneofItem(n.ruleType,de.create({value:this.toNumber(n.value)}));break;case"maxLines":e.rule=this._buildOneofItem(n.ruleType,pe.create({value:this.toNumber(n.value)}));break;case"pattern":e.rule=this._buildOneofItem(n.ruleType,ce.create({value:n.value}));break;default:continue}null!=n.reason&&(e.reason=n.reason),t.push(e)}return t}static toNumber(e){if(void 0!==e){const t=Number(e);if(isNaN(t))throw new Error(`A ${e} is not a number. Ensure that you did not mistype in a feature file.`);return t}return e}static toBool(e){return void 0!==e?"boolean"==typeof e?e:"true"===e.toLowerCase():e}}be.supportedStringRuleTypes=["pattern","minLength","maxLength","minLines","maxLines","minLengthPerLine","maxLengthPerLine"],be.supportedNumberRuleTypes=["min","max","isInteger"];var ve,ke=n(748);!function(e){e.ok="ok",e.missing="missing",e.required="required",e.stringPattern="pattern",e.stringMinLength="min-length",e.stringMaxLength="max-length",e.stringMinLengthPerLine="min-length-per-line",e.stringMaxLengthPerLine="max-length-per-line",e.stringMinLines="min-lines",e.stringMaxLines="max-lines",e.variantNotInList="in-list",e.numberIsNumber="is-number",e.numberMin="min",e.numberMax="max",e.numberIsInteger="is-integer",e.imageRoot="root",e.noSuchField="no-such-field"}(ve||(ve={}));class Ne{static fromField(e,t,n,r){var i,s;switch(null===(i=e.config)||void 0===i?void 0:i.oneofKind){case"number":return new Ie(e,t,n,r);case"string":return new Te(e,t,n,r);case"variant":return new Se(e,t,n);case"image":return new Ee(e,t,n);default:throw new Error(`Cannot create validation problem for the field of type ${null===(s=e.config)||void 0===s?void 0:s.oneofKind} because it is not supported.`)}}}class Le{constructor(e,t,n){this.fieldName=e,this.reason=n,this.rule=t}static processReason(e,t,n){let r=e.replace("{value}",t);return void 0!==n&&(r=r.replace("{constraint}",n)),r}}class Te extends Le{static getRuleByConstraint(e){switch(e.rule.oneofKind){case"maxLength":return ve.stringMaxLength;case"minLength":return ve.stringMinLength;case"maxLengthPerLine":return ve.stringMaxLengthPerLine;case"minLengthPerLine":return ve.stringMinLengthPerLine;case"maxLines":return ve.stringMaxLines;case"minLines":return ve.stringMinLines;case"pattern":return ve.stringPattern;default:throw new Error(`String validation problem rule for ${e.rule.oneofKind} is not defined.`)}}static getDefaultReason(e,t,n){switch(t.rule.oneofKind){case"maxLength":return`The ${e.name} field length is greater than ${t.rule.maxLength.value}`;case"minLength":return`The ${e.name} field length is less than ${t.rule.minLength.value}`;case"maxLengthPerLine":return`The length of the longest line in ${e.name} field is greater than ${t.rule.maxLengthPerLine.value}`;case"minLengthPerLine":return`The length of the shortest line in ${e.name} field is less than ${t.rule.minLengthPerLine.value}`;case"maxLines":return`The number of lines in ${e.name} is greater than ${t.rule.maxLines.value}`;case"minLines":return`The number of lines in ${e.name} is less than ${t.rule.minLines.value}`;case"pattern":return`The ${e.name} field is ${n} but it does not match a specified pattern /${t.rule.pattern.value}/`;default:throw new Error(`String validation problem rule for ${t.rule.oneofKind} is not defined.`)}}constructor(e,t,n,r){var i;super(e.name,Te.getRuleByConstraint(t),Le.processReason(null!==(i=t.reason)&&void 0!==i?i:Te.getDefaultReason(e,t,n),n,r))}}class Ie extends Le{static getRuleByConstraint(e){switch(e.rule.oneofKind){case"isInteger":return ve.numberIsInteger;case"min":return ve.numberMin;case"max":return ve.numberMax;default:throw new Error(`Number validation problem rule for ${e.rule.oneofKind} is not defined.`)}}static getDefaultReason(e,t,n){switch(t.rule.oneofKind){case"max":return`The ${e.name} field is ${n} but it should be not greater than ${t.rule.max.value}.`;case"min":return`The ${e.name} field is ${n} but it should be not less than ${t.rule.min.value}.`;case"isInteger":return`The ${e.name} field is ${n} but it must be an integer number.`;default:throw new Error(`Number validation problem rule for ${t.rule.oneofKind} is not defined.`)}}constructor(e,t,n,r){var i;super(e.name,Ie.getRuleByConstraint(t),Le.processReason(null!==(i=t.reason)&&void 0!==i?i:Ie.getDefaultReason(e,t,n),n,r))}}class Se extends Le{constructor(e,t,n){var r;super(e.name,ve.variantNotInList,Le.processReason(null!==(r=t.reason)&&void 0!==r?r:`The value ${n} of ${e.name} must be one of ${t.variants.map(e=>e.value).join(", ")}`,n))}}class Ee extends Le{constructor(e,t,n){var r;super(e.name,ve.imageRoot,Le.processReason(null!==(r=t.reason)&&void 0!==r?r:`The image ${n} in the ${e.name} field must be located in the ${t.root} folder`,n))}}class Oe extends Le{constructor(e){super(e,ve.ok,"")}}function Re(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function Be(e){return function t(n){return 0===arguments.length||Re(n)?t:e.apply(this,arguments)}}var Fe=Be(function(e){return null==e});function Ue(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var xe=Object.prototype.toString,Ae=function(){return"[object Arguments]"===xe.call(arguments)?function(e){return"[object Arguments]"===xe.call(e)}:function(e){return Ue("callee",e)}}(),$e=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};var De=Be(function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():$e(e)?[]:function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)?"":function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)?{}:Ae(e)?function(){return arguments}():void 0});function Ce(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return Re(n)?t:Be(function(t){return e(n,t)});default:return Re(n)&&Re(r)?t:Re(n)?Be(function(t){return e(t,r)}):Re(r)?Be(function(t){return e(n,t)}):e(n,r)}}}function je(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function Ve(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}var Me="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},Ke=!{toString:null}.propertyIsEnumerable("toString"),We=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Pe=function(){return arguments.propertyIsEnumerable("length")}(),_e=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},qe="function"!=typeof Object.keys||Pe?Be(function(e){if(Object(e)!==e)return[];var t,n,r=[],i=Pe&&Ae(e);for(t in e)!Ue(t,e)||i&&"length"===t||(r[r.length]=t);if(Ke)for(n=We.length-1;n>=0;)Ue(t=We[n],e)&&!_e(r,t)&&(r[r.length]=t),n-=1;return r}):Be(function(e){return Object(e)!==e?[]:Object.keys(e)}),Xe=Be(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function Je(e,t,n,r){var i=je(e);function s(e,t){return ze(e,t,n.slice(),r.slice())}return!Ve(function(e,t){return!Ve(s,t,e)},je(t),i)}function ze(e,t,n,r){if(Me(e,t))return!0;var i,s,a=Xe(e);if(a!==Xe(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(a){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(i=e.constructor,null==(s=String(i).match(/^function (\w*)/))?"":s[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!Me(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!Me(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var o=n.length-1;o>=0;){if(n[o]===e)return r[o]===t;o-=1}switch(a){case"Map":return e.size===t.size&&Je(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&Je(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=qe(e);if(u.length!==qe(t).length)return!1;var l=n.concat([e]),c=r.concat([t]);for(o=u.length-1;o>=0;){var f=u[o];if(!Ue(f,t)||!ze(t[f],e[f],l,c))return!1;o-=1}return!0}var Ge=Ce(function(e,t){return ze(e,t,[],[])}),Ze=Be(function(e){return null!=e&&Ge(e,De(e))});function Ye(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,s){return t.apply(this,arguments)};case 6:return function(e,n,r,i,s,a){return t.apply(this,arguments)};case 7:return function(e,n,r,i,s,a,o){return t.apply(this,arguments)};case 8:return function(e,n,r,i,s,a,o,u){return t.apply(this,arguments)};case 9:return function(e,n,r,i,s,a,o,u,l){return t.apply(this,arguments)};case 10:return function(e,n,r,i,s,a,o,u,l,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var He=Ce(function(e,t){return 1===e?Be(t):Ye(e,function e(t,n,r){return function(){for(var i=[],s=0,a=t,o=0;o<n.length||s<arguments.length;){var u;o<n.length&&(!Re(n[o])||s>=arguments.length)?u=n[o]:(u=arguments[s],s+=1),i[o]=u,Re(u)||(a-=1),o+=1}return a<=0?r.apply(this,i):Ye(a,e(t,i,r))}}(e,[],t))}),Qe=Be(function(e){return He(e.length,e)}),et=Ce(function(e,t){return t<e?t:e}),tt=Ce(function(e,t){return t>e?t:e}),nt=Ce(function(e,t){return e<t}),rt=Ce(function(e,t){return e>t});class it{constructor(e){this.checkMissing=(e=>e.hasOwnProperty(this.field.name)?Object(ke.Right)(e[this.field.name]):Object(ke.Left)(new Le(this.field.name,ve.missing,`Data must contain ${it.getFieldDisplayName(this.field)} field.`))),this.checkRequired=(e=>this.field.required&&this.isOmitted(e)?Object(ke.Left)(new Le(this.field.name,ve.required,`The ${it.getFieldDisplayName(this.field)} field cannot be empty.`)):this.getOptionalFieldResult(e)),this.getOptionalFieldResult=(e=>this.isOmitted(e)?Object(ke.Left)(new Oe(this.field.name)):Object(ke.Right)(e)),this.checkConfig=(e=>ke.Maybe.fromUndefined(st.Build(this.field)).map(t=>t.validate(e)).getOrElse(Object(ke.Right)(e))),this.field=e}validate(e){return this.checkMissing(e).chain(this.checkRequired).chain(this.checkConfig)}isOmitted(e){return Fe(e)||Ze(e)}static getFieldDisplayName(e){return null!=e.title&&""!=e.title.trim()?e.title:e.name}}class st{static Build(e){switch(e.config.oneofKind){case"string":return new ot(e);case"number":return new ut(e);case"variant":return new lt(e);case"image":return new ct(e);default:return}}}class at{constructor(e){this._field=e}validate(e){return Object(ke.Right)(e)}checkConstraint(e,t){return Qe(this.checkIfRuleIsSet)(e,ke.Maybe.fromUndefined(this.findConstraintByRuleName(e)),t,(t,n)=>Ne.fromField(this._field,this.findConstraintByRuleName(e),n,t))}checkIfRuleIsSet(e,t,n,r,i){return t.cata(()=>Object(ke.Right)(i),t=>n(i,t.rule[e].value)?Object(ke.Left)(r(t.rule[e].value,i)):Object(ke.Right)(i))}}class ot extends at{constructor(e){super(e),this._config=be.getStringConfig(e)}findConstraintByRuleName(e){var t,n;return(null!==(n=null===(t=this._config)||void 0===t?void 0:t.constraints)&&void 0!==n?n:[]).find(t=>t.rule.oneofKind==e)}validate(e){return super.validate(e).chain(this.checkConstraint("pattern",(e,t)=>!RegExp(t).test(e))).chain(this.checkConstraint("minLength",(e,t)=>e.length<t)).chain(this.checkConstraint("maxLength",(e,t)=>e.length>t)).chain(this.checkConstraint("minLines",(e,t)=>ot.getLines(e).length<t)).chain(this.checkConstraint("maxLines",(e,t)=>ot.getLines(e).length>t)).chain(this.checkConstraint("minLengthPerLine",(e,t)=>ot.getLineLengthBy(et,e)<t)).chain(this.checkConstraint("maxLengthPerLine",(e,t)=>ot.getLineLengthBy(tt,e)>t))}}ot.getLines=(e=>e.split(/(\r\n|\r|\n)/).filter(e=>"\n"!==e)),ot.getLineLengthBy=((e,t)=>ot.getLines(t).map(e=>e.length).reduce(e));class ut extends at{constructor(e){super(e),this.validate=(e=>super.validate(e).chain(this.checkIsNumber).chain(this.checkConstraint("isInteger",(e,t)=>t&&!Number.isInteger(e))).chain(this.checkConstraint("min",nt)).chain(this.checkConstraint("max",rt))),this.checkIsNumber=(e=>isNaN(Number(e))?Object(ke.Left)(new Le(this._field.name,ve.numberIsNumber,`The ${it.getFieldDisplayName(this._field)} field value ${e} is not a number.`)):Object(ke.Right)(Number(e))),this._config=be.getNumberConfig(e)}findConstraintByRuleName(e){var t,n;return(null!==(n=null===(t=this._config)||void 0===t?void 0:t.constraints)&&void 0!==n?n:[]).find(t=>t.rule.oneofKind==e)}}class lt{constructor(e){this._config=be.getVariantConfig(e),this._field=e}validate(e){var t;return(null===(t=this._config)||void 0===t?void 0:t.variants.every(t=>t.value!==e))?Object(ke.Left)(Ne.fromField(this._field,this._config,e,null)):Object(ke.Right)(e)}}class ct{constructor(e){this._config=be.getImageConfig(e),this._field=e}validate(e){var t,n;let r=null!==(n=null===(t=this._config)||void 0===t?void 0:t.root)&&void 0!==n?n:"/";return r.startsWith("/")||(r=`/${r}`),e.startsWith(r)?Object(ke.Right)(e):Object(ke.Left)(Ne.fromField(this._field,this._config,e,null))}}class ft{constructor(e){this.interpolateString=((e,t)=>e.replace(/{([^}]+)}/g,(e,n)=>{var r;return null!==(r=t[n])&&void 0!==r?r:""})),this.schema=e}validateValue(e,t){return this.findFieldByName(e).map(e=>new it(e)).toEither(new Le(e,ve.noSuchField,`The ${e} field does not exist in a schema.`)).bind(n=>n.validate({[e]:t})).cata(e=>e,t=>new Oe(e))}validate(e){var t;return(null!==(t=this.schema.fields)&&void 0!==t?t:[]).map(t=>new it(t).validate(e)).map(e=>e.cata(e=>e,e=>new Oe(e)))}buildTitle(e){return this.interpolateString(this.schema.titleTemplate,e)}findFieldByName(e){return ke.Maybe.fromNull(this.schema.fields.find(t=>t.name===e))}}const ht=new class extends ee{constructor(){super("Schema",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"titleTemplate",kind:"scalar",T:9},{no:3,name:"fields",kind:"message",repeat:1,T:()=>dt}])}create(e){const t={name:"",titleTemplate:"",fields:[]};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.name=e.string();break;case 2:i.titleTemplate=e.string();break;case 3:i.fields.push(dt.internalBinaryRead(e,e.uint32(),n));break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){""!==e.name&&t.tag(1,B.LengthDelimited).string(e.name),""!==e.titleTemplate&&t.tag(2,B.LengthDelimited).string(e.titleTemplate);for(let r=0;r<e.fields.length;r++)dt.internalBinaryWrite(e.fields[r],t.tag(3,B.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const dt=new class extends ee{constructor(){super("Field",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"required",kind:"scalar",opt:!0,T:8},{no:3,name:"string",kind:"message",oneof:"config",T:()=>ue},{no:4,name:"variant",kind:"message",oneof:"config",T:()=>ye},{no:5,name:"number",kind:"message",oneof:"config",T:()=>re},{no:9,name:"image",kind:"message",oneof:"config",T:()=>ne},{no:6,name:"title",kind:"scalar",opt:!0,T:9},{no:7,name:"prompt",kind:"scalar",opt:!0,T:9},{no:8,name:"description",kind:"scalar",opt:!0,T:9}])}create(e){const t={name:"",config:{oneofKind:void 0}};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.name=e.string();break;case 2:i.required=e.bool();break;case 3:i.config={oneofKind:"string",string:ue.internalBinaryRead(e,e.uint32(),n,i.config.string)};break;case 4:i.config={oneofKind:"variant",variant:ye.internalBinaryRead(e,e.uint32(),n,i.config.variant)};break;case 5:i.config={oneofKind:"number",number:re.internalBinaryRead(e,e.uint32(),n,i.config.number)};break;case 9:i.config={oneofKind:"image",image:ne.internalBinaryRead(e,e.uint32(),n,i.config.image)};break;case 6:i.title=e.string();break;case 7:i.prompt=e.string();break;case 8:i.description=e.string();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){""!==e.name&&t.tag(1,B.LengthDelimited).string(e.name),void 0!==e.required&&t.tag(2,B.Varint).bool(e.required),"string"===e.config.oneofKind&&ue.internalBinaryWrite(e.config.string,t.tag(3,B.LengthDelimited).fork(),n).join(),"variant"===e.config.oneofKind&&ye.internalBinaryWrite(e.config.variant,t.tag(4,B.LengthDelimited).fork(),n).join(),"number"===e.config.oneofKind&&re.internalBinaryWrite(e.config.number,t.tag(5,B.LengthDelimited).fork(),n).join(),"image"===e.config.oneofKind&&ne.internalBinaryWrite(e.config.image,t.tag(9,B.LengthDelimited).fork(),n).join(),void 0!==e.title&&t.tag(6,B.LengthDelimited).string(e.title),void 0!==e.prompt&&t.tag(7,B.LengthDelimited).string(e.prompt),void 0!==e.description&&t.tag(8,B.LengthDelimited).string(e.description);let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};new class extends ee{constructor(){super("DataSet",[{no:1,name:"schema",kind:"message",T:()=>ht},{no:2,name:"rows",kind:"message",repeat:1,T:()=>pt}])}create(e){const t={rows:[]};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:i.schema=ht.internalBinaryRead(e,e.uint32(),n,i.schema);break;case 2:i.rows.push(pt.internalBinaryRead(e,e.uint32(),n));break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}internalBinaryWrite(e,t,n){e.schema&&ht.internalBinaryWrite(e.schema,t.tag(1,B.LengthDelimited).fork(),n).join();for(let r=0;r<e.rows.length;r++)pt.internalBinaryWrite(e.rows[r],t.tag(2,B.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}};const pt=new class extends ee{constructor(){super("Row",[{no:1,name:"cells",kind:"map",K:9,V:{kind:"scalar",T:9}}])}create(e){const t={cells:{}};return void 0!==e&&A(this,t,e),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:this.binaryReadMap1(i.cells,e,n);break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let a=e.skip(r);!1!==s&&(!0===s?E.onRead:s)(this.typeName,i,t,r,a)}}return i}binaryReadMap1(e,t,n){let r,i,s=t.uint32(),a=t.pos+s;for(;t.pos<a;){let[e,n]=t.tag();switch(e){case 1:r=t.string();break;case 2:i=t.string();break;default:throw new globalThis.Error("unknown map entry field for field Row.cells")}}e[null!==r&&void 0!==r?r:""]=null!==i&&void 0!==i?i:""}internalBinaryWrite(e,t,n){for(let n of Object.keys(e.cells))t.tag(1,B.LengthDelimited).fork().tag(1,B.LengthDelimited).string(n).tag(2,B.LengthDelimited).string(e.cells[n]).join();let r=n.writeUnknownFields;return!1!==r&&(1==r?E.onWrite:r)(this.typeName,e,t),t}}},931:function(e,t,n){"use strict";var r,i;n.d(t,"a",function(){return a}),function(e){e[e.ModalOpen=0]="ModalOpen",e[e.ModalClose=1]="ModalClose",e[e.FullScreen=2]="FullScreen",e[e.FullWindow=3]="FullWindow",e[e.OriginalSize=4]="OriginalSize",e[e.AssetManagerOpened=5]="AssetManagerOpened",e[e.AssetManagerClosed=6]="AssetManagerClosed",e[e.RevertProduct=7]="RevertProduct",e[e.ObjectInspectorVisibilityChange=8]="ObjectInspectorVisibilityChange",e[e.OnSurfaceChanged=9]="OnSurfaceChanged",e[e.CanRedoChanged=10]="CanRedoChanged",e[e.CanUndoChanged=11]="CanUndoChanged",e[e.OnImageDpiChanged=12]="OnImageDpiChanged",e[e.PopupOpen=13]="PopupOpen"}(r||(r={})),function(e){e[e.FullScreen=0]="FullScreen",e[e.FullWindow=1]="FullWindow",e[e.OriginalSize=2]="OriginalSize"}(i||(i={}));var s,a=function(){function e(){}return e.ModalOpen=r[r.ModalOpen],e.ModalClose=r[r.ModalClose],e.FullWindow=r[r.FullWindow],e.FullScreen=r[r.FullScreen],e.OriginalSize=r[r.OriginalSize],e.AssetManagerOpened=r[r.AssetManagerOpened],e.AssetManagerClosed=r[r.AssetManagerClosed],e.RevertProduct=r[r.RevertProduct],e.OnSurfaceChanged=r[r.OnSurfaceChanged],e.CanUndoChanged=r[r.CanUndoChanged],e.CanRedoChanged=r[r.CanRedoChanged],e.OnImageDpiChanged=r[r.OnImageDpiChanged],e.PopupOpen=r[r.PopupOpen],e.BoundsNotification="BoundsNotification",e.ItemChanged="ItemChanged",e.ItemAdded="ItemAdded",e.ItemRemoved="ItemRemoved",e.SelectedItemsChanged="SelectedItemsChanged",e}();!function(e){e[e.Event=0]="Event",e[e.ProcedureResponse=1]="ProcedureResponse"}(s||(s={}))}}]);