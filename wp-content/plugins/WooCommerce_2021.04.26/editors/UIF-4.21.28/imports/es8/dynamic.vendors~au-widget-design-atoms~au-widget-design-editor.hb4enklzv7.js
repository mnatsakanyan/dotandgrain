(window.multistep_editor_jsonpFunction=window.multistep_editor_jsonpFunction||[]).push([[4],{380:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"e",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"f",function(){return u}),n.d(e,"d",function(){return c});var r,o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(t){function e(n){var r=t.call(this,n)||this;return r.name="CustomersCanvasException",Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e.prototype.toString=function(){return this.name+": "+this.message},e.prototype.toJSON=function(){return{name:this.name,innerException:this.innerException,message:this.message}},e}(Error),a=function(t){function e(n){var r=t.call(this,n)||this;return r.name="NotImplementedException",Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(i),s=function(t){function e(n){var r=t.call(this,n)||this;return r.name="ArgumentException",Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(i),l=function(t){function e(n){var r=t.call(this,n)||this;return r.name="ArgumentNullException",Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(s),u=function(t){function e(n){var r=t.call(this,n)||this;return r.name="OutOfRangeException",Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(i),c=function(t){function e(n){var r=t.call(this,n)||this;return r.name="InvalidOperationException",Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(i);!function(t){function e(n){var r=t.call(this,n)||this;return r.name="UnexpectedDataException",Object.setPrototypeOf(r,e.prototype),r}o(e,t)}(i)},381:function(t,e,n){"use strict";n.r(e),n.d(e,"getOrientedSquare",function(){return r.h}),n.d(e,"getBounds",function(){return r.f}),n.d(e,"getTriangleAngle",function(){return r.l}),n.d(e,"normalizeAngle",function(){return r.m}),n.d(e,"getScalarProduct",function(){return r.i}),n.d(e,"getSquareDistanceToSegment",function(){return r.k}),n.d(e,"getSquareDistanceToPoint",function(){return r.j}),n.d(e,"getLineWidth",function(){return r.g}),n.d(e,"ConvertDegreeToRadian",function(){return r.c}),n.d(e,"ConvertRadianToDegree",function(){return r.d}),n.d(e,"Clamp",function(){return r.a}),n.d(e,"EqualsOfFloatNumbers",function(){return r.e}),n.d(e,"CompareRectangels",function(){return r.b}),n.d(e,"Matrix",function(){return o.a}),n.d(e,"PathSegment",function(){return i.b}),n.d(e,"Path",function(){return i.a}),n.d(e,"PointF",function(){return a.a}),n.d(e,"RectangleF",function(){return s.a}),n.d(e,"RotatedRectangleF",function(){return c}),n.d(e,"SizeF",function(){return h}),n.d(e,"Transform",function(){return l.a});var r=n(398),o=n(461),i=n(432),a=n(408),s=n(403),l=n(433),u=n(380),c=function(){function t(t,e,n,r,o){this.centerX=t||0,this.centerY=e||0,this.width=n||0===n?n:2,this.height=r||0===r?r:2,this.angle=o||0}return t.prototype.getSimplifiedObject=function(){return{centerX:this.centerX,centerY:this.centerY,width:this.width,height:this.height,angle:this.angle}},t.prototype.clone=function(){return new t(this.centerX,this.centerY,this.width,this.height,this.angle)},Object.defineProperty(t.prototype,"bounds",{get:function(){for(var t=new a.a(this.centerX,this.centerY),e=this.width,n=this.height,r=[new a.a(-e/2,-n/2),new a.a(-e/2,n/2),new a.a(e/2,-n/2),new a.a(e/2,n/2)],o=0,i=0,l=0,u=0,c=0;c<4;c++)r[c].rotate(this.angle),(r[c].x<o||0===c)&&(o=r[c].x),(r[c].y<i||0===c)&&(i=r[c].y),(r[c].x>l||0===c)&&(l=r[c].x),(r[c].y>u||0===c)&&(u=r[c].y);return new s.a(o+t.x,i+t.y,l-o,u-i)},enumerable:!0,configurable:!0}),t.prototype.equals=function(t,e){return null!=t&&Object(r.e)(this.centerX,t.centerX,e)&&Object(r.e)(this.centerY,t.centerY,e)&&Object(r.e)(this.width,t.width,e)&&Object(r.e)(this.height,t.height,e)&&Object(r.e)(this.angle,t.angle,e)},t.prototype.getUpperLeftCorner=function(){var t=new a.a(-this.width/2,-this.height/2);return t=(t=t.rotate(this.angle)).translate(this.centerX,this.centerY)},t.prototype.getUpperCenterPoint=function(){var t=new a.a(0,-this.height/2);return t=(t=t.rotate(this.angle)).translate(this.centerX,this.centerY)},t.prototype.getLeftCenterPoint=function(){var t=new a.a(-this.width/2,0);return t=(t=t.rotate(this.angle)).translate(this.centerX,this.centerY)},t.prototype.getUpperRightCorner=function(){var t=new a.a(this.width/2,-this.height/2);return t=(t=t.rotate(this.angle)).translate(this.centerX,this.centerY)},t.prototype.getBottomRightCorner=function(){var t=new a.a(this.width/2,this.height/2);return t=(t=t.rotate(this.angle)).translate(this.centerX,this.centerY)},t.prototype.getBottomLeftCorner=function(){var t=new a.a(-this.width/2,this.height/2);return t=(t=t.rotate(this.angle)).translate(this.centerX,this.centerY)},t.prototype._checkProjectionIntersection=function(t,e){var n=this._getProjections(t),r=this._getProjections(e);return n.left<=r.right&&n.right>=r.left&&n.top<=r.bottom&&n.bottom>=r.top},t.prototype._getProjections=function(t){var e,n,r,o;e=n=t[0].x,r=o=t[0].y;for(var i=1;i<t.length;i++)e=Math.min(e,t[i].x),n=Math.max(n,t[i].x),r=Math.min(r,t[i].y),o=Math.max(o,t[i].y);return{left:e,right:n,top:r,bottom:o}},t.prototype.intersectsWith=function(t){var e=this.clone(),n=t.clone();if(!Object(r.e)(this.angle,0)){var o=e.angle;e.angle=0,(u=n.center).rotateAt(-o,e.center),n.center=u,n.angle-=o}var i=[e.getUpperLeftCorner(),e.getUpperRightCorner(),e.getBottomRightCorner(),e.getBottomLeftCorner()],a=[n.getUpperLeftCorner(),n.getUpperRightCorner(),n.getBottomRightCorner(),n.getBottomLeftCorner()],s=this._checkProjectionIntersection(i,a),l=!0;if(s&&!Object(r.e)(this.angle,t.angle)){e=this.clone();var u;o=(n=t.clone()).angle;n.angle=0,(u=e.center).rotateAt(-o,n.center),e.center=u,e.angle-=o,i=[e.getUpperLeftCorner(),e.getUpperRightCorner(),e.getBottomRightCorner(),e.getBottomLeftCorner()],a=[n.getUpperLeftCorner(),n.getUpperRightCorner(),n.getBottomRightCorner(),n.getBottomLeftCorner()],l=this._checkProjectionIntersection(i,a)}return s&&l},Object.defineProperty(t.prototype,"location",{get:function(){return this.getUpperLeftCorner()},set:function(t){var e=this.getUpperLeftCorner();this.centerX=this.centerX+(t.x-e.x),this.centerY=this.centerY+(t.y-e.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return new a.a(this.centerX,this.centerY)},set:function(t){this.centerX=t.x,this.centerY=t.y},enumerable:!0,configurable:!0}),t.prototype.rotateAt=function(t,e){var n=this.center;return n.rotateAt(t,e),this.center=n,this.angle+=t,this},t.prototype.translate=function(t,e){this.centerX+=t,this.centerY+=e},t.prototype.setTransform=function(t){null==t||t.equals(new l.a)||(this.width*=t.scaleX,this.height*=t.scaleY,this.angle+=t.angle,this.centerX+=t.translateX,this.centerY+=t.translateY)},t.prototype.getTransform=function(t){if(null==t||this.equals(t))return new l.a;var e=0===t.width?0:this.width/t.width,n=0===t.height?0:this.height/t.height,r=this.angle-t.angle,o=t.center,i=this.centerX-o.x,a=this.centerY-o.y;return new l.a(e,n,i,a,r)},t.prototype.transform=function(t,e){this.rotateAt(t.angle,e),t.setAngle(0),this.setTransform(t)},t.prototype.toString=function(){return[this.centerX,this.centerY,this.width,this.height,this.angle].join(",")},t.prototype.toRectangleF=function(){return new s.a(this.centerX-this.width/2,this.centerY-this.height/2,this.width,this.height)},t.prototype.contains=function(t){var e=this.clone();e.angle=0;var n=t.clone();return n.rotateAt(-this.angle,this.center),e.bounds.contains(n)},t.prototype.getCornerByIndex=function(t){switch(t){case 0:return this.getUpperLeftCorner();case 1:return this.getUpperRightCorner();case 2:return this.getBottomRightCorner();case 3:return this.getBottomLeftCorner();default:return null}},t.prototype.transformByMatrix=function(t){var e=this.clone();return e.center=t.transformPoint(e.center),e.width*=t.scaleX,e.height*=t.scaleY,e.angle+=t.angle,e},t.union=function(e,n){var r=e.clone(),o=n.clone(),i=r.angle,l=r.center;r.angle=0,o.rotateAt(-i,l);var u=s.a.union(r.bounds,o.bounds),c=new a.a(u.left+u.width/2,u.top+u.height/2),h=new t;h.center=c;var p=-1===Math.sign(e.width)||-1===Math.sign(e.width)?-1:1,f=-1===Math.sign(e.height)||-1===Math.sign(n.height)?-1:1;return h.width=u.width*p,h.height=u.height*f,h.rotateAt(i,l),h},t.fromRectangleF=function(e,n){return new t(e.left+e.width/2,e.top+e.height/2,e.width,e.height,"number"==typeof n?n:0)},t.FromLTRB=function(e,n,r,o){return t.fromRectangleF(s.a.FromLTRB(e,n,r,o))},t.getRectWithOffset=function(t,e){if(null==t)throw new u.a("RotatedRectangleF.getRectWithOffset: rectangle cannot be null!");return null==e||e.isOrigin()?t.clone():t.transformByMatrix((new o.a).translate(e.x,e.y))},t}(),h=function(){function t(t,e){this.width=0,this.height=0,this.width=t,this.height=e}return t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.toString=function(){return[this.width,this.height].join(",")},t.prototype.updateByMatrix=function(t){return t.updateObjectByMatrix(this,"width","height"),this},t}()},382:function(t,e,n){"use strict";n.r(e),n.d(e,"BaseItem",function(){return i.a}),n.d(e,"SmartItem",function(){return u}),n.d(e,"Item",function(){return c.a}),n.d(e,"ShapeItem",function(){return h.a}),n.d(e,"ContentItem",function(){return p.a}),n.d(e,"BaseTextItem",function(){return f.a}),n.d(e,"BlendMode",function(){return d.a}),n.d(e,"AutoScaledTextItem",function(){return y.a}),n.d(e,"BarcodeItem",function(){return R}),n.d(e,"EncodingOptions",function(){return k}),n.d(e,"BarcodeFormat",function(){return b.a}),n.d(e,"BarcodeSubType",function(){return o}),n.d(e,"BarcodeData",function(){return C}),n.d(e,"BarcodePermissions",function(){return g.a}),n.d(e,"BoundedTextItem",function(){return B.a}),n.d(e,"ClipartItem",function(){return E.a}),n.d(e,"ColorGroup",function(){return E.b}),n.d(e,"ColorGroupTarget",function(){return E.c}),n.d(e,"ItemColorProperty",function(){return E.d}),n.d(e,"ContentPermissions",function(){return A.a}),n.d(e,"CurvedTextItem",function(){return F.a}),n.d(e,"DashedLineItem",function(){return W}),n.d(e,"EllipseItem",function(){return X}),n.d(e,"FrontendPermissions",function(){return Y.a}),n.d(e,"GroupItem",function(){return K.a}),n.d(e,"GridItem",function(){return J.a}),n.d(e,"ImageEffect",function(){return $.a}),n.d(e,"ImageItem",function(){return Q.a}),n.d(e,"ImageMetaData",function(){return Z.a}),n.d(e,"ImagePermissions",function(){return tt.a}),n.d(e,"InStringPlaceholder",function(){return et.a}),n.d(e,"ItemPermissions",function(){return nt.a}),n.d(e,"ItemToolbarPermissions",function(){return rt.a}),n.d(e,"LayoutItem",function(){return ot.g}),n.d(e,"LayoutType",function(){return ot.h}),n.d(e,"AutoLayoutAlignItems",function(){return ot.a}),n.d(e,"AutoLayoutOrientation",function(){return ot.d}),n.d(e,"AutoLayoutJustifyContent",function(){return ot.c}),n.d(e,"AutoLayoutAnchorPoint",function(){return ot.b}),n.d(e,"DefaultLayoutSettings",function(){return ot.f}),n.d(e,"AutoLayoutSettings",function(){return ot.e}),n.d(e,"LineItem",function(){return D}),n.d(e,"LinePermissions",function(){return L}),n.d(e,"ManipulationPermissions",function(){return it.a}),n.d(e,"OverlayEffect",function(){return at.a}),n.d(e,"ParagraphSettings",function(){return st.a}),n.d(e,"PathBoundedTextItem",function(){return pt}),n.d(e,"PathBoundedTextPermissions",function(){return ut}),n.d(e,"VerticalContentAlignment",function(){return ft.d}),n.d(e,"HorizontalContentAlignment",function(){return ft.a}),n.d(e,"ResizeMode",function(){return ft.c}),n.d(e,"PlaceholderItem",function(){return ft.b}),n.d(e,"PlaceholderPermissions",function(){return dt.a}),n.d(e,"PlainTextItem",function(){return yt.a}),n.d(e,"PolylineItem",function(){return _t}),n.d(e,"RectangleItem",function(){return vt.a}),n.d(e,"ResizeGripsPermissions",function(){return _.a}),n.d(e,"ArchedTextItem",function(){return wt}),n.d(e,"ShadowSettings",function(){return Ct.a}),n.d(e,"ShapePermissions",function(){return Pt.a}),n.d(e,"Size",function(){return xt.a}),n.d(e,"LineJoin",function(){return Ot.a}),n.d(e,"StrokeSettings",function(){return Ot.b}),n.d(e,"FitMode",function(){return ct.b}),n.d(e,"ShrinkMode",function(){return ct.d}),n.d(e,"OverflowStrategy",function(){return ct.c}),n.d(e,"TextAlignment",function(){return ct.e}),n.d(e,"TextVerticalAlignment",function(){return ct.f}),n.d(e,"FirstBaselineOffset",function(){return ct.a}),n.d(e,"TextPermissions",function(){return It.a}),n.d(e,"ThemeBinding",function(){return St.a}),n.d(e,"VisualizationPermissions",function(){return Tt.a}),n.d(e,"WrappingMode",function(){return gt.a});var r,o,i=n(483),a=n(387),s=n(383),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){var n=t.call(this)||this;return n.type=e.type,n}return l(e,t),e.prototype._copy=function(e,n,r,o){return t.prototype._copy.call(this,e,n,r,o),n.sourceDpi=e.sourceDpi,n.smartObjectDpi=e.smartObjectDpi,n.smartObjectRectangle=e.smartObjectRectangle,n.smartObjectSize=e.smartObjectSize,n.smartObjectStorageId=e.smartObjectStorageId,null!=e.warpControlPoints&&(n.warpControlPoints=e.warpControlPoints.map(function(t){return t})),null!=e.projectiveTransform&&(n.projectiveTransform=e.projectiveTransform.map(function(t){return t})),null!=e.vectorMask&&(n.vectorMask=e.vectorMask.map(function(t){return t})),n},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(s.h)(this.sourceDpi,e.sourceDpi)&&Object(s.h)(this.smartObjectDpi,e.smartObjectDpi)&&a.isEqual(this.smartObjectRectangle,e.smartObjectRectangle)&&a.isEqual(this.smartObjectSize,e.smartObjectSize)&&Object(s.h)(this.smartObjectStorageId,e.smartObjectStorageId)&&Object(s.d)(this.warpControlPoints,e.warpControlPoints)&&Object(s.d)(this.projectiveTransform,e.projectiveTransform)&&Object(s.d)(this.vectorMask,e.vectorMask)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="SmartItem",e}(i.a),c=n(415),h=n(431),p=n(489),f=n(407),d=n(442),y=n(546),g=n(493),m=n(380),_=n(414),v=n(386),b=n(468);!function(t){t.None="None",t.VCard="VCard",t.Phone="Phone",t.Url="Url"}(o||(o={}));var w=n(913),C=function(){function t(t){if(this.barcodeFormat=b.a.QR_CODE,this.barcodeSubType=o.None,a.isString(t))try{t=JSON.parse(t)}catch(e){console.warn("Unable to parse BarcodeData from string ",t,e),t=null}a.isObject(t)&&a.extend(this,t)}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return a.isEmpty(this.firstName)&&a.isEmpty(this.lastName)&&a.isEmpty(this.organization)&&a.isEmpty(this.position)&&a.isEmpty(this.email)&&a.isEmpty(this.mobilePhone)&&a.isEmpty(this.url)&&a.isEmpty(this.phone)&&a.isEmpty(this.barcodeValue)},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){return null!=t&&this.barcodeFormat===t.barcodeFormat&&this.barcodeSubType===t.barcodeSubType&&this.firstName===t.firstName&&this.lastName===t.lastName&&this.organization===t.organization&&this.position===t.position&&this.email===t.email&&this.mobilePhone===t.mobilePhone&&this.url===t.url&&this.phone===t.phone&&this.barcodeValue===t.barcodeValue},t.prototype._isEmpty=function(t){return a.isEmpty(null!=t?t.trim():null)},t.prototype.toVCardString=function(){var t={n:[{value:[this.lastName,this.firstName,"","",""]}],"email;internet":[{value:this.email}],org:[{value:this.organization}],"tel;cell":[{value:this.mobilePhone}],"tel;work":[{value:this.phone}],title:[{value:this.position}],url:[{value:this.url}]};return w.generate(t)},t.fromVCardString=function(e){var n=null!=e?w.parse(e):{},r=new t;return r.barcodeFormat=b.a.QR_CODE,r.barcodeSubType=o.VCard,r.email=n.email&&n.email[0]&&n.email[0].value,r.lastName=n.n&&n.n[0]&&n.n[0].value[0],r.firstName=n.n&&n.n[0]&&n.n[0].value[1],r.organization=n.org&&n.org[0]&&n.org[0].value,r.mobilePhone=n.tel&&n.tel[0]&&n.tel[0].value,r.phone=n.tel&&n.tel[1]&&n.tel[1].value,r.position=n.title&&n.title[0]&&n.title[0].value,r.url=n.url&&n.url[0]&&n.url[0].value,r},t}(),P=n(400),x=n(402),O=n(464),I=n(443),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},j=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},R=function(t){function e(n,r,i,a){var s=t.call(this)||this;return s._barcodeContent="",s._barcodeFormat=b.a.QR_CODE,s._barcodeOptions=new k,s._barcodeSubType=o.Url,s._color=new v.RgbColor("rgb(0,0,0)"),s.type=e.type,s._onOptionsPropertyChanged=function(t,e){s._propertyChanged.notify(s,"barcodeOptions")},s._barcodePermissions=new g.a,s._barcodeOptions.pureBarcode=!0,s._ignorePermissionsChange=!1,s.manipulationPermissions.resizeGrips=new _.a(!0,!1),s.itemPermissions.itemToolbarPermissions.showEditButton=!0,s.shapePermissions.allowChangeFillColor=!0,s.barcodePermissions.allowChangeBarcodeType=!1,s.barcodePermissions.allowChangeBarcodeColor=!0,s.barcodePermissions.allowChangeBarcodeContent=!0,s._ignorePermissionsChange=!0,s.fillColor=new v.RgbColor("rgba(255,255,255,1)"),null!=n&&(s._barcodeFormat=n),null!=r&&(s._barcodeContent=r),null!=i&&(s._barcodeOptions=i),s._subscribeOptionsPropertyChanged(),null!=a&&(s.sourceRectangle=a),s.applyPermissionsConstrain(),s}return S(e,t),Object.defineProperty(e.prototype,"barcodePermissions",{get:function(){return this._barcodePermissions},set:function(t){if(null==t)throw new m.a("barcodePermissions cannot be null");Object(s.h)(this._barcodePermissions,t)||(this._barcodePermissions.propertyChanged.remove(this._onPermissionsChanged),this._barcodePermissions=t,this._barcodePermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barcodeContent",{get:function(){return this._barcodeContent},set:function(t){this._barcodeContent!==t&&(this._barcodeContent=t,this._propertyChanged.notify(this,"barcodeContent"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barcodeFormat",{get:function(){return this._barcodeFormat},set:function(t){this._barcodeFormat!==t&&(this._barcodeFormat=t,this._propertyChanged.notify(this,"barcodeFormat"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barcodeSubType",{get:function(){return this._barcodeSubType},set:function(t){this._barcodeSubType!==t&&(this._barcodeSubType=t,this._propertyChanged.notify(this,"barcodeSubType"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color.equals(t)||(this._color=t,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barcodeOptions",{get:function(){return this._barcodeOptions},set:function(t){JSON.stringify(this._barcodeOptions)!==JSON.stringify(t)&&(this._unsubscribeOptionsPropertyChanged(),this._barcodeOptions=t,this._subscribeOptionsPropertyChanged(),this._propertyChanged.notify(this,"barcodeOptions"))},enumerable:!0,configurable:!0}),e.prototype._subscribeOptionsPropertyChanged=function(){null!=this._barcodeOptions&&this._barcodeOptions.addPropertyChanged(this._onOptionsPropertyChanged)},e.prototype._unsubscribeOptionsPropertyChanged=function(){null!=this._barcodeOptions&&this._barcodeOptions.removePropertyChanged(this._onOptionsPropertyChanged)},Object.defineProperty(e.prototype,"isQrCode",{get:function(){return this.barcodeFormat===b.a.QR_CODE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSquareCode",{get:function(){return this.barcodeFormat===b.a.QR_CODE||this.barcodeFormat===b.a.DATA_MATRIX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLinearBarcode",{get:function(){return this.barcodeFormat===b.a.EAN_13||this.barcodeFormat===b.a.EAN_8||this.barcodeFormat==b.a.CODE_128||this.barcodeFormat===b.a.UPC_A||this.barcodeFormat===b.a.UPC_E},enumerable:!0,configurable:!0}),e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.barcodePermissions=e.barcodePermissions.clone(),n.barcodeContent=e.barcodeContent,n.barcodeFormat=e.barcodeFormat,n.barcodeSubType=e.barcodeSubType,n.color=e.color.clone(),n.barcodeOptions=new k,n.barcodeOptions.width=e.barcodeOptions.width,n.barcodeOptions.height=e.barcodeOptions.height,n.barcodeOptions.margin=e.barcodeOptions.margin,n.barcodeOptions.pureBarcode=e.barcodeOptions.pureBarcode,n.barcodeOptions.errorCorrection=e.barcodeOptions.errorCorrection,n.barcodeOptions.characterSet=e.barcodeOptions.characterSet,n.barcodeOptions.pdf417Compact=e.barcodeOptions.pdf417Compact,n.barcodeOptions.pdf417Compaction=e.barcodeOptions.pdf417Compaction,n.barcodeOptions.pdf417Dimensions=e.barcodeOptions.pdf417Dimensions,n.barcodeOptions.disableEci=e.barcodeOptions.disableEci,n.barcodeOptions.code128ForceCodesetB=e.barcodeOptions.code128ForceCodesetB,n.barcodeOptions.aztecLayers=e.barcodeOptions.aztecLayers,n.barcodeOptions.qrVersion=e.barcodeOptions.qrVersion},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(s.h)(this._barcodePermissions,e._barcodePermissions)&&Object(s.h)(this._barcodeContent,e._barcodeContent)&&Object(s.h)(this._barcodeFormat,e._barcodeFormat)&&Object(s.h)(this._barcodeSubType,e._barcodeSubType)&&Object(s.h)(this._color,e._color)&&Object(s.h)(this._barcodeOptions,e._barcodeOptions)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.prototype.getSimplifiedObject=function(e){a.isArray(e)||a.isString(e)||(e=[]);var n=t.prototype.getSimplifiedObject.call(this,["barcodePermissions","isQrCode","isLinearBarcode","isSquareCode","barcodeData"].concat(e));return n.barcodePermissions=this.barcodePermissions.getSimplifiedObject(),n},e.prototype.applyPermissionsConstrain=function(){null!=this.itemPermissions&&null!=this.itemPermissions.itemToolbarPermissions&&(null==this.barcodePermissions||this.barcodePermissions.allowChangeBarcodeContent?this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=null:this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=this.barcodePermissions.allowChangeBarcodeContent,this.itemPermissions.itemToolbarPermissions.showSelectButton=!1)},Object.defineProperty(e.prototype,"barcodeData",{get:function(){var t=new C;switch(t.barcodeSubType=this.barcodeSubType,t.barcodeFormat=this.barcodeFormat,t.barcodeFormat){case b.a.EAN_13:case b.a.EAN_8:case b.a.UPC_A:case b.a.UPC_E:case b.a.CODE_128:case b.a.DATA_MATRIX:t.barcodeValue=this.barcodeContent;break;case b.a.QR_CODE:switch(this.barcodeSubType){case o.Phone:t.phone=this.barcodeContent;break;case o.Url:t.url=this.barcodeContent;break;case o.VCard:return C.fromVCardString(this.barcodeContent)}}return t},enumerable:!0,configurable:!0}),e.prototype.applyBarcodeData=function(t){this.barcodeFormat=t.barcodeFormat,this.barcodeSubType=null!=t.barcodeSubType?t.barcodeSubType:this.barcodeFormat===b.a.QR_CODE?o.Phone:o.None;var e="";switch(this.barcodeFormat){case b.a.QR_CODE:switch(this.barcodeSubType){case o.Phone:e=t.phone;break;case o.None:case o.Url:e=t.url;break;case o.VCard:e=t.toVCardString()}break;case b.a.EAN_8:case b.a.EAN_13:case b.a.UPC_A:case b.a.UPC_E:case b.a.CODE_128:case b.a.DATA_MATRIX:e=t.barcodeValue}this.barcodeContent=e},e.type="BarcodeItem",T([Object(P.a)({enumObject:b.a}),j("design:type",String),j("design:paramtypes",[String])],e.prototype,"barcodeFormat",null),T([Object(P.a)({enumObject:o}),j("design:type",String),j("design:paramtypes",[String])],e.prototype,"barcodeSubType",null),e}(p.a),k=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return S(e,t),e.prototype.equals=function(t){return null!=t&&Object(s.h)(this.width,t.width)&&Object(s.h)(this.height,t.height)&&Object(s.h)(this.margin,t.margin)&&Object(s.h)(this.pureBarcode,t.pureBarcode)&&Object(s.h)(this.errorCorrection,t.errorCorrection)&&Object(s.h)(this.characterSet,t.characterSet)&&Object(s.h)(this.pdf417Compact,t.pdf417Compact)&&Object(s.h)(this.pdf417Compaction,t.pdf417Compaction)&&a.isEqual(this.pdf417Dimensions,t.pdf417Dimensions)&&Object(s.h)(this.disableEci,t.disableEci)&&Object(s.h)(this.code128ForceCodesetB,t.code128ForceCodesetB)&&Object(s.h)(this.aztecLayers,t.aztecLayers)&&Object(s.h)(this.qrVersion,t.qrVersion)},e.type="EncodingOptions",T([Object(O.a)(),Object(P.a)({factory:new I.c(0)}),j("design:type",Number)],e.prototype,"width",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c(0)}),j("design:type",Number)],e.prototype,"height",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c(0)}),j("design:type",Number)],e.prototype,"margin",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c(!0)}),j("design:type",Boolean)],e.prototype,"pureBarcode",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c("")}),j("design:type",String)],e.prototype,"errorCorrection",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c("")}),j("design:type",String)],e.prototype,"characterSet",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c(!1)}),j("design:type",Boolean)],e.prototype,"pdf417Compact",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c("")}),j("design:type",String)],e.prototype,"pdf417Compaction",void 0),T([Object(O.a)(),j("design:type",Object)],e.prototype,"pdf417Dimensions",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c(!1)}),j("design:type",Boolean)],e.prototype,"disableEci",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c(!1)}),j("design:type",Boolean)],e.prototype,"code128ForceCodesetB",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c(0)}),j("design:type",Number)],e.prototype,"aztecLayers",void 0),T([Object(O.a)(),Object(P.a)({factory:new I.c(0)}),j("design:type",Number)],e.prototype,"qrVersion",void 0),e}(x.a),B=n(547),E=n(495),A=n(552),F=n(549),M=n(408),z=n(384),L=function(){function t(t){this._allowChangeLineWidth=!0,this._allowChangeLineColor=!0,this.propertyChanged=new z.a,null==t&&(t=!0),this.allowChangeLineWidth=t,this.allowChangeLineColor=t}return Object.defineProperty(t.prototype,"allowChangeLineWidth",{get:function(){return this._allowChangeLineWidth},set:function(t){this._allowChangeLineWidth!==t&&(this._allowChangeLineWidth=t,this.propertyChanged.notify("allowChangeLineWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeLineColor",{get:function(){return this._allowChangeLineColor},set:function(t){this._allowChangeLineColor!==t&&(this._allowChangeLineColor=t,this.propertyChanged.notify("allowChangeLineColor"))},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){var t={};return t.allowChangeLineWidth=this.allowChangeLineWidth,t.allowChangeLineColor=this.allowChangeLineColor,t},t.prototype.clone=function(){var e=new t;return e.allowChangeLineWidth=this.allowChangeLineWidth,e.allowChangeLineColor=this.allowChangeLineColor,e},t.prototype.equals=function(t){return this.allowChangeLineColor===t.allowChangeLineColor&&this.allowChangeLineWidth===t.allowChangeLineWidth},t}(),N=n(398),H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(t){function e(n,r){var o=t.call(this)||this;return o._width=4,o._color=new v.RgbColor("rgba(0, 0, 0, 1)"),o._sourcePoint0=new M.a,o._sourcePoint1=new M.a,o._fixedWidth=!1,o._overprintStroke=!1,o.lineColorForAbnormalRendering=new v.RgbColor("rgb(0,0,0)"),o.type=e.type,o._sourcePoint0=null!=n?n:new M.a,o._sourcePoint1=null!=r?r:new M.a,o._linePermissions=new L,o._linePermissions.propertyChanged.add(o._onPermissionsChanged),o._ignorePermissionsChange=!0,o.itemPermissions.itemToolbarPermissions.showEditButton=!1,o.itemPermissions.itemToolbarPermissions.showSelectButton=!1,o._ignorePermissionsChange=!1,o}return H(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){N.e(this._width,t)||(this._width=t,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){v.Color.equals(this._color,t)||(this._color=t,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourcePoint0",{get:function(){return this._sourcePoint0},set:function(t){M.a.isEqual(this._sourcePoint0,t)||(this._sourcePoint0=t,this._propertyChanged.notify(this,"sourcePoint0"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourcePoint1",{get:function(){return this._sourcePoint1},set:function(t){M.a.isEqual(this._sourcePoint1,t)||(this._sourcePoint1=t,this._propertyChanged.notify(this,"sourcePoint1"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedWidth",{get:function(){return this._fixedWidth},set:function(t){this._fixedWidth!==t&&(this._fixedWidth=t,this._propertyChanged.notify(this,"fixedWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linePermissions",{get:function(){return this._linePermissions},set:function(t){if(null==t)throw new m.a("linePermissions cannot be null");Object(s.h)(this._linePermissions,t)||(this._linePermissions.propertyChanged.remove(this._onPermissionsChanged),this._linePermissions=t,this._linePermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overprintStroke",{get:function(){return this._overprintStroke},set:function(t){t!=this._overprintStroke&&(this._overprintStroke=t,this._propertyChanged.notify(this,"overprintStroke"))},enumerable:!0,configurable:!0}),e.prototype._subscribeToPermissionChanged=function(){this._linePermissions.propertyChanged.add(this._onPermissionsChanged)},e.prototype._unsubscribeFromPermissionChanged=function(){this._linePermissions.propertyChanged.remove(this._onPermissionsChanged)},e.prototype.applyPermissionsConstrain=function(){t.prototype.applyPermissionsConstrain.call(this),this.itemPermissions.itemToolbarPermissions.showEditButton=!1,this.itemPermissions.itemToolbarPermissions.showSelectButton=!1,this.isRenderTypeIsNormal||(this.linePermissions.allowChangeLineColor=!1)},e.prototype.getSimplifiedObject=function(e){var n=t.prototype.getSimplifiedObject.call(this,["linePermissions"].concat(e));return n.linePermissions=this.linePermissions.getSimplifiedObject(),n},e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.width=e.width,n.color=e.color.clone(),n.sourcePoint0=e.sourcePoint0.clone(),n.sourcePoint1=e.sourcePoint1.clone(),n.fixedWidth=e.fixedWidth,n.linePermissions=null!=e._linePermissions?e._linePermissions.clone():null,n.overprintStroke=e.overprintStroke},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(s.h)(this._width,e._width)&&Object(s.h)(this._color,e._color)&&Object(s.h)(this._sourcePoint0,e._sourcePoint0)&&Object(s.h)(this._sourcePoint1,e._sourcePoint1)&&Object(s.h)(this._fixedWidth,e._fixedWidth)&&Object(s.h)(this._linePermissions,e._linePermissions)&&Object(s.h)(this._overprintStroke,e._overprintStroke)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="LineItem",e}(c.a),V=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(t){function e(n,r){var o=t.call(this,n,r)||this;return o._dashWidth=3,o._altDashWidth=3,o._altColor=new v.RgbColor("rgba(0,0,0,0)"),o.type=e.type,o}return V(e,t),Object.defineProperty(e.prototype,"dashWidth",{get:function(){return this._dashWidth},set:function(t){N.e(this._dashWidth,t)||(this._dashWidth=t,this._propertyChanged.notify(this,"dashWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altDashWidth",{get:function(){return this._altDashWidth},set:function(t){N.e(this._altDashWidth,t)||(this._altDashWidth=t,this._propertyChanged.notify(this,"altDashWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altColor",{get:function(){return this._altColor},set:function(t){v.Color.equals(this._altColor,t)||(this._altColor=t,this._propertyChanged.notify(this,"altColor"))},enumerable:!0,configurable:!0}),e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.dashWidth=e.dashWidth,n.altDashWidth=e.altDashWidth,n.altColor=e.altColor.clone()},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(s.h)(this._dashWidth,e._dashWidth)&&Object(s.h)(this._altDashWidth,e._altDashWidth)&&Object(s.h)(this._altColor,e._altColor)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="DashedLineItem",e}(D),U=n(403),q=n(432),G=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(t){function e(n){void 0===n&&(n=new U.a(0,0,10,10));var r=t.call(this,q.a.ellipse(n.left,n.top,n.width,n.height))||this;return r.type=e.type,r.sourceRectangle=n,r.manipulationPermissions.resizeGrips=new _.a(!0,!0),r}return G(e,t),e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="EllipseItem",e}(h.a),Y=n(539),K=n(496),J=n(557),$=n(422),Q=n(447),Z=n(492),tt=n(490),et=n(558),nt=n(537),rt=n(538),ot=n(559),it=n(535),at=n(466),st=n(465),lt=n(381),ut=function(){function t(t){this.propertyChanged=new z.a,null==t&&(t=!0),this.allowChangeColumnCount=t}return Object.defineProperty(t.prototype,"allowChangeColumnCount",{get:function(){return this._allowChangeColumnCount},set:function(t){this._allowChangeColumnCount!==t&&(this._allowChangeColumnCount=t,this.propertyChanged.notify("allowChangeColumnCount"))},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){var t={};return t.allowChangeColumnCount=this.allowChangeColumnCount,t},t.prototype.clone=function(){var e=new t;return e.allowChangeColumnCount=this.allowChangeColumnCount,e},t.prototype.equals=function(t){return this.allowChangeColumnCount===t.allowChangeColumnCount},t}(),ct=n(446),ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(t){function e(n,r,o,i){var a=t.call(this,n,o,i)||this;return a._boundingPaths=[],a._wrappingMargin=7,a._wrappingPath=null,a._paragraphSettings=new st.a,a._characterLimit=null,a._isVertical=!1,a._firstBaselineOffset=ct.a.Ascent,a._firstBaselineMinOffset=0,a.type=e.type,null!=r&&(a.boundingPaths=r),a._pathBoundedTextPermissions=new ut,a._pathBoundedTextPermissions.propertyChanged.add(a._onPermissionsChanged),a}return ht(e,t),Object.defineProperty(e.prototype,"characterLimit",{get:function(){return this._characterLimit},set:function(t){null===this._characterLimit&&null===t||Object(lt.EqualsOfFloatNumbers)(this._characterLimit,t)||(this._characterLimit=t,this._propertyChanged.notify(this,"characterLimit"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundingPaths",{get:function(){return this._boundingPaths},set:function(t){t.length===this.boundingPaths.length&&this.boundingPaths.every(function(e,n){return e.isEqual(t[n])})||(this._boundingPaths=t,this._propertyChanged.notify(this,"boundingPaths"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrappingPath",{get:function(){return this._wrappingPath},set:function(t){null==this._wrappingPath&&null==t||null!=this._wrappingPath&&this._wrappingPath.isEqual(t)||(this._wrappingPath=t,this._propertyChanged.notify(this,"wrappingPath"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrappingMargin",{get:function(){return this._wrappingMargin},set:function(t){Object(lt.EqualsOfFloatNumbers)(this._wrappingMargin,t)||(this._wrappingMargin=t,this._propertyChanged.notify(this,"wrappingMargin"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paragraphSettings",{get:function(){return this._paragraphSettings},set:function(t){st.a.equals(this._paragraphSettings,t)||(this._paragraphSettings=t,this._propertyChanged.notify(this,"paragraphSettings"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._propertyChanged.notify(this,"isVertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathBoundedTextPermissions",{get:function(){return this._pathBoundedTextPermissions},set:function(t){if(null==t)throw new m.a("pathBoundedTextPermissions cannot be null");Object(s.h)(this._pathBoundedTextPermissions,t)||(this._pathBoundedTextPermissions.propertyChanged.remove(this._onPermissionsChanged),this._pathBoundedTextPermissions=t,this._pathBoundedTextPermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstBaselineOffset",{get:function(){return this._firstBaselineOffset},set:function(t){this._firstBaselineOffset!==t&&(this._firstBaselineOffset=t,null!=t&&this._propertyChanged.notify(this,"firstBaselineOffset"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstBaselineMinOffset",{get:function(){return this._firstBaselineMinOffset},set:function(t){Object(lt.EqualsOfFloatNumbers)(this._firstBaselineMinOffset,t)||(this._firstBaselineMinOffset=t,null!=t&&this._propertyChanged.notify(this,"firstBaselineMinOffset"))},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(e){var n=t.prototype.getSimplifiedObject.call(this,["pathBoundedTextPermissions"].concat(e));return n.pathBoundedTextPermissions=this.pathBoundedTextPermissions.getSimplifiedObject(),n},e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.characterLimit=e.characterLimit,n.boundingPaths=e.boundingPaths.map(function(t){return t.clone()}),n.wrappingMargin=e.wrappingMargin,n.paragraphSettings=e.paragraphSettings.clone(),n.isVertical=e.isVertical,n.pathBoundedTextPermissions=e.pathBoundedTextPermissions.clone(),n.wrappingPath=null!=e.wrappingPath?e.wrappingPath.clone():null,n.firstBaselineOffset=e.firstBaselineOffset,n.firstBaselineMinOffset=e.firstBaselineMinOffset},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(s.h)(this._characterLimit,e._characterLimit)&&Object(s.c)(this._boundingPaths,e._boundingPaths)&&Object(s.h)(this._wrappingMargin,e._wrappingMargin)&&Object(s.h)(this._paragraphSettings,e._paragraphSettings)&&Object(s.h)(this._isVertical,e._isVertical)&&Object(s.h)(this._pathBoundedTextPermissions,e._pathBoundedTextPermissions)&&Object(s.h)(this._wrappingPath,e._wrappingPath)&&Object(s.h)(this.firstBaselineOffset,e.firstBaselineOffset)&&Object(s.h)(this.firstBaselineMinOffset,e.firstBaselineMinOffset)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="PathBoundedTextItem",e}(f.a),ft=n(488),dt=n(551),yt=n(548),gt=n(421),mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_t=function(t){function e(n){var r=t.call(this)||this;if(r._width=20,r._color=new v.RgbColor("rgba(255,255,61,1)"),r._points=[],r.type=e.type,r._points=[],n&&n.length&&n.length>0)for(var o=0;o<n.length;o++)n[o]instanceof M.a&&r._points.push(n[o]);return r.textWrappingMode=gt.a.None,r}return mt(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){N.e(this._width,t)||(this._width=t,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){v.Color.equals(this._color,t)||(this._color=t,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourcePoints",{get:function(){return this._points},set:function(t){this._points=t,this._propertyChanged.notify(this,"sourcePoints")},enumerable:!0,configurable:!0}),e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.width=e.width,n.color=e.color.clone(),n.sourcePoints=e.sourcePoints.map(function(t){return t.clone()})},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(s.h)(this._width,e._width)&&Object(s.h)(this._color,e._color)&&Object(s.c)(this._points,e._points)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="PolylineItem",e}(c.a),vt=n(482),bt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wt=function(t){function e(n,r,o,i){var a=t.call(this,n,o,i)||this;return a.type=e.type,a._center=r,a._ignorePermissionsChange=!0,a.manipulationPermissions.resizeGrips.setCornerArbitrary(!1),a.manipulationPermissions.resizeGrips.edge=!1,a.textPermissions.allowChangeTextAlignment=!1,a.textPermissions.allowChangeLeading=!1,a._ignorePermissionsChange=!1,a}return bt(e,t),e.prototype.applyPermissionsConstrain=function(){t.prototype.applyPermissionsConstrain.call(this),null!=this.manipulationPermissions&&null!=this.manipulationPermissions.resizeGrips&&(this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(!1),this.manipulationPermissions.resizeGrips.edgeConstraint=!1),null!=this.textPermissions&&(this.textPermissions.allowChangeLeading=!1,this.textPermissions.allowChangeTextAlignment=!1)},Object.defineProperty(e.prototype,"center",{get:function(){return this._center},set:function(t){lt.PointF.isEqual(this._center,t)||(this._center=t,this._propertyChanged.notify(this,"center"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bend",{get:function(){return this._bend},set:function(t){Object(lt.EqualsOfFloatNumbers)(this._bend,t)||(this._bend=t,this._propertyChanged.notify(this,"bend"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"warp",{get:function(){return this._warp},set:function(t){this._warp!==t&&(this._warp=t,this._propertyChanged.notify(this,"warp"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLineCount",{get:function(){return 1},set:function(t){throw console.error("ArchedText set maxLineCount",t),new m.d("Max Line Count of ArchedTextItem can not be redefined!")},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(e){return t.prototype.getSimplifiedObject.call(this,["maxLineCount"].concat(e))},e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.center=e.center,n.bend=e.bend,n.warp=e.warp},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(s.h)(this._center,e._center)&&Object(s.h)(this._bend,e._bend)&&Object(s.h)(this._warp,e._warp)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="ArchedTextItem",e}(f.a),Ct=n(445),Pt=n(544),xt=n(467),Ot=n(444),It=n(545),St=n(542),Tt=n(536)},383:function(t,e,n){"use strict";n.d(e,"p",function(){return Gn}),n.d(e,"s",function(){return Xn}),n.d(e,"h",function(){return Yn}),n.d(e,"c",function(){return Kn}),n.d(e,"d",function(){return Jn}),n.d(e,"l",function(){return $n}),n.d(e,"m",function(){return Qn}),n.d(e,"k",function(){return Zn}),n.d(e,"r",function(){return tr}),n.d(e,"g",function(){return er}),n.d(e,"i",function(){return nr}),n.d(e,"e",function(){return rr}),n.d(e,"f",function(){return or}),n.d(e,"n",function(){return ir}),n.d(e,"j",function(){return ar}),n.d(e,"q",function(){return sr}),n.d(e,"a",function(){return lr}),n.d(e,"b",function(){return ur}),n.d(e,"o",function(){return cr});var r=n(380),o=(n(484),n(387)),i=n(391);var a=function(){this.__data__=[],this.size=0};var s=function(t,e){return t===e||t!=t&&e!=e};var l=function(t,e){for(var n=t.length;n--;)if(s(t[n][0],e))return n;return-1},u=Array.prototype.splice;var c=function(t){var e=this.__data__,n=l(e,t);return!(n<0||(n==e.length-1?e.pop():u.call(e,n,1),--this.size,0))};var h=function(t){var e=this.__data__,n=l(e,t);return n<0?void 0:e[n][1]};var p=function(t){return l(this.__data__,t)>-1};var f=function(t,e){var n=this.__data__,r=l(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}d.prototype.clear=a,d.prototype.delete=c,d.prototype.get=h,d.prototype.has=p,d.prototype.set=f;var y=d;var g=function(){this.__data__=new y,this.size=0};var m=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var _=function(t){return this.__data__.get(t)};var v=function(t){return this.__data__.has(t)},b=n(412),w=b.a.Symbol,C=Object.prototype,P=C.hasOwnProperty,x=C.toString,O=w?w.toStringTag:void 0;var I=function(t){var e=P.call(t,O),n=t[O];try{t[O]=void 0;var r=!0}catch(t){}var o=x.call(t);return r&&(e?t[O]=n:delete t[O]),o},S=Object.prototype.toString;var T=function(t){return S.call(t)},j="[object Null]",R="[object Undefined]",k=w?w.toStringTag:void 0;var B=function(t){return null==t?void 0===t?R:j:k&&k in Object(t)?I(t):T(t)};var E=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},A="[object AsyncFunction]",F="[object Function]",M="[object GeneratorFunction]",z="[object Proxy]";var L,N=function(t){if(!E(t))return!1;var e=B(t);return e==F||e==M||e==A||e==z},H=b.a["__core-js_shared__"],D=(L=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"";var V=function(t){return!!D&&D in t},W=Function.prototype.toString;var U=function(t){if(null!=t){try{return W.call(t)}catch(t){}try{return t+""}catch(t){}}return""},q=/^\[object .+?Constructor\]$/,G=Function.prototype,X=Object.prototype,Y=G.toString,K=X.hasOwnProperty,J=RegExp("^"+Y.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var $=function(t){return!(!E(t)||V(t))&&(N(t)?J:q).test(U(t))};var Q=function(t,e){return null==t?void 0:t[e]};var Z=function(t,e){var n=Q(t,e);return $(n)?n:void 0},tt=Z(b.a,"Map"),et=Z(Object,"create");var nt=function(){this.__data__=et?et(null):{},this.size=0};var rt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ot="__lodash_hash_undefined__",it=Object.prototype.hasOwnProperty;var at=function(t){var e=this.__data__;if(et){var n=e[t];return n===ot?void 0:n}return it.call(e,t)?e[t]:void 0},st=Object.prototype.hasOwnProperty;var lt=function(t){var e=this.__data__;return et?void 0!==e[t]:st.call(e,t)},ut="__lodash_hash_undefined__";var ct=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=et&&void 0===e?ut:e,this};function ht(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ht.prototype.clear=nt,ht.prototype.delete=rt,ht.prototype.get=at,ht.prototype.has=lt,ht.prototype.set=ct;var pt=ht;var ft=function(){this.size=0,this.__data__={hash:new pt,map:new(tt||y),string:new pt}};var dt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var yt=function(t,e){var n=t.__data__;return dt(e)?n["string"==typeof e?"string":"hash"]:n.map};var gt=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e};var mt=function(t){return yt(this,t).get(t)};var _t=function(t){return yt(this,t).has(t)};var vt=function(t,e){var n=yt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}bt.prototype.clear=ft,bt.prototype.delete=gt,bt.prototype.get=mt,bt.prototype.has=_t,bt.prototype.set=vt;var wt=bt,Ct=200;var Pt=function(t,e){var n=this.__data__;if(n instanceof y){var r=n.__data__;if(!tt||r.length<Ct-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wt(r)}return n.set(t,e),this.size=n.size,this};function xt(t){var e=this.__data__=new y(t);this.size=e.size}xt.prototype.clear=g,xt.prototype.delete=m,xt.prototype.get=_,xt.prototype.has=v,xt.prototype.set=Pt;var Ot=xt;var It=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},St=function(){try{var t=Z(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Tt=function(t,e,n){"__proto__"==e&&St?St(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},jt=Object.prototype.hasOwnProperty;var Rt=function(t,e,n){var r=t[e];jt.call(t,e)&&s(r,n)&&(void 0!==n||e in t)||Tt(t,e,n)};var kt=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var s=e[i],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),o?Tt(n,s,l):Rt(n,s,l)}return n};var Bt=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var Et=function(t){return null!=t&&"object"==typeof t},At="[object Arguments]";var Ft=function(t){return Et(t)&&B(t)==At},Mt=Object.prototype,zt=Mt.hasOwnProperty,Lt=Mt.propertyIsEnumerable,Nt=Ft(function(){return arguments}())?Ft:function(t){return Et(t)&&zt.call(t,"callee")&&!Lt.call(t,"callee")},Ht=Array.isArray,Dt=n(741),Vt=9007199254740991,Wt=/^(?:0|[1-9]\d*)$/;var Ut=function(t,e){var n=typeof t;return!!(e=null==e?Vt:e)&&("number"==n||"symbol"!=n&&Wt.test(t))&&t>-1&&t%1==0&&t<e},qt=9007199254740991;var Gt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=qt},Xt={};Xt["[object Float32Array]"]=Xt["[object Float64Array]"]=Xt["[object Int8Array]"]=Xt["[object Int16Array]"]=Xt["[object Int32Array]"]=Xt["[object Uint8Array]"]=Xt["[object Uint8ClampedArray]"]=Xt["[object Uint16Array]"]=Xt["[object Uint32Array]"]=!0,Xt["[object Arguments]"]=Xt["[object Array]"]=Xt["[object ArrayBuffer]"]=Xt["[object Boolean]"]=Xt["[object DataView]"]=Xt["[object Date]"]=Xt["[object Error]"]=Xt["[object Function]"]=Xt["[object Map]"]=Xt["[object Number]"]=Xt["[object Object]"]=Xt["[object RegExp]"]=Xt["[object Set]"]=Xt["[object String]"]=Xt["[object WeakMap]"]=!1;var Yt=function(t){return Et(t)&&Gt(t.length)&&!!Xt[B(t)]};var Kt=function(t){return function(e){return t(e)}},Jt=n(532),$t=Jt.a&&Jt.a.isTypedArray,Qt=$t?Kt($t):Yt,Zt=Object.prototype.hasOwnProperty;var te=function(t,e){var n=Ht(t),r=!n&&Nt(t),o=!n&&!r&&Object(Dt.a)(t),i=!n&&!r&&!o&&Qt(t),a=n||r||o||i,s=a?Bt(t.length,String):[],l=s.length;for(var u in t)!e&&!Zt.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ut(u,l))||s.push(u);return s},ee=Object.prototype;var ne=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ee)};var re=function(t,e){return function(n){return t(e(n))}},oe=re(Object.keys,Object),ie=Object.prototype.hasOwnProperty;var ae=function(t){if(!ne(t))return oe(t);var e=[];for(var n in Object(t))ie.call(t,n)&&"constructor"!=n&&e.push(n);return e};var se=function(t){return null!=t&&Gt(t.length)&&!N(t)};var le=function(t){return se(t)?te(t):ae(t)};var ue=function(t,e){return t&&kt(e,le(e),t)};var ce=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},he=Object.prototype.hasOwnProperty;var pe=function(t){if(!E(t))return ce(t);var e=ne(t),n=[];for(var r in t)("constructor"!=r||!e&&he.call(t,r))&&n.push(r);return n};var fe=function(t){return se(t)?te(t,!0):pe(t)};var de=function(t,e){return t&&kt(e,fe(e),t)},ye=n(910);var ge=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var me=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i};var _e=function(){return[]},ve=Object.prototype.propertyIsEnumerable,be=Object.getOwnPropertySymbols,we=be?function(t){return null==t?[]:(t=Object(t),me(be(t),function(e){return ve.call(t,e)}))}:_e;var Ce=function(t,e){return kt(t,we(t),e)};var Pe=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},xe=re(Object.getPrototypeOf,Object),Oe=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Pe(e,we(t)),t=xe(t);return e}:_e;var Ie=function(t,e){return kt(t,Oe(t),e)};var Se=function(t,e,n){var r=e(t);return Ht(t)?r:Pe(r,n(t))};var Te=function(t){return Se(t,le,we)};var je=function(t){return Se(t,fe,Oe)},Re=Z(b.a,"DataView"),ke=Z(b.a,"Promise"),Be=Z(b.a,"Set"),Ee=Z(b.a,"WeakMap"),Ae=U(Re),Fe=U(tt),Me=U(ke),ze=U(Be),Le=U(Ee),Ne=B;(Re&&"[object DataView]"!=Ne(new Re(new ArrayBuffer(1)))||tt&&"[object Map]"!=Ne(new tt)||ke&&"[object Promise]"!=Ne(ke.resolve())||Be&&"[object Set]"!=Ne(new Be)||Ee&&"[object WeakMap]"!=Ne(new Ee))&&(Ne=function(t){var e=B(t),n="[object Object]"==e?t.constructor:void 0,r=n?U(n):"";if(r)switch(r){case Ae:return"[object DataView]";case Fe:return"[object Map]";case Me:return"[object Promise]";case ze:return"[object Set]";case Le:return"[object WeakMap]"}return e});var He=Ne,De=Object.prototype.hasOwnProperty;var Ve=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&De.call(t,"index")&&(n.index=t.index,n.input=t.input),n},We=b.a.Uint8Array;var Ue=function(t){var e=new t.constructor(t.byteLength);return new We(e).set(new We(t)),e};var qe=function(t,e){var n=e?Ue(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},Ge=/\w*$/;var Xe=function(t){var e=new t.constructor(t.source,Ge.exec(t));return e.lastIndex=t.lastIndex,e},Ye=w?w.prototype:void 0,Ke=Ye?Ye.valueOf:void 0;var Je=function(t){return Ke?Object(Ke.call(t)):{}};var $e=function(t,e){var n=e?Ue(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Qe="[object Boolean]",Ze="[object Date]",tn="[object Map]",en="[object Number]",nn="[object RegExp]",rn="[object Set]",on="[object String]",an="[object Symbol]",sn="[object ArrayBuffer]",ln="[object DataView]",un="[object Float32Array]",cn="[object Float64Array]",hn="[object Int8Array]",pn="[object Int16Array]",fn="[object Int32Array]",dn="[object Uint8Array]",yn="[object Uint8ClampedArray]",gn="[object Uint16Array]",mn="[object Uint32Array]";var _n=function(t,e,n){var r=t.constructor;switch(e){case sn:return Ue(t);case Qe:case Ze:return new r(+t);case ln:return qe(t,n);case un:case cn:case hn:case pn:case fn:case dn:case yn:case gn:case mn:return $e(t,n);case tn:return new r;case en:case on:return new r(t);case nn:return Xe(t);case rn:return new r;case an:return Je(t)}},vn=Object.create,bn=function(){function t(){}return function(e){if(!E(e))return{};if(vn)return vn(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var wn=function(t){return"function"!=typeof t.constructor||ne(t)?{}:bn(xe(t))},Cn="[object Map]";var Pn=function(t){return Et(t)&&He(t)==Cn},xn=Jt.a&&Jt.a.isMap,On=xn?Kt(xn):Pn,In="[object Set]";var Sn=function(t){return Et(t)&&He(t)==In},Tn=Jt.a&&Jt.a.isSet,jn=Tn?Kt(Tn):Sn,Rn=1,kn=2,Bn=4,En="[object Arguments]",An="[object Function]",Fn="[object GeneratorFunction]",Mn="[object Object]",zn={};zn[En]=zn["[object Array]"]=zn["[object ArrayBuffer]"]=zn["[object DataView]"]=zn["[object Boolean]"]=zn["[object Date]"]=zn["[object Float32Array]"]=zn["[object Float64Array]"]=zn["[object Int8Array]"]=zn["[object Int16Array]"]=zn["[object Int32Array]"]=zn["[object Map]"]=zn["[object Number]"]=zn[Mn]=zn["[object RegExp]"]=zn["[object Set]"]=zn["[object String]"]=zn["[object Symbol]"]=zn["[object Uint8Array]"]=zn["[object Uint8ClampedArray]"]=zn["[object Uint16Array]"]=zn["[object Uint32Array]"]=!0,zn["[object Error]"]=zn[An]=zn["[object WeakMap]"]=!1;var Ln=function t(e,n,r,o,i,a){var s,l=n&Rn,u=n&kn,c=n&Bn;if(r&&(s=i?r(e,o,i,a):r(e)),void 0!==s)return s;if(!E(e))return e;var h=Ht(e);if(h){if(s=Ve(e),!l)return ge(e,s)}else{var p=He(e),f=p==An||p==Fn;if(Object(Dt.a)(e))return Object(ye.a)(e,l);if(p==Mn||p==En||f&&!i){if(s=u||f?{}:wn(e),!l)return u?Ie(e,de(s,e)):Ce(e,ue(s,e))}else{if(!zn[p])return i?e:{};s=_n(e,p,l)}}a||(a=new Ot);var d=a.get(e);if(d)return d;a.set(e,s),jn(e)?e.forEach(function(o){s.add(t(o,n,r,o,e,a))}):On(e)&&e.forEach(function(o,i){s.set(i,t(o,n,r,i,e,a))});var y=h?void 0:(c?u?je:Te:u?fe:le)(e);return It(y||e,function(o,i){y&&(o=e[i=o]),Rt(s,i,t(o,n,r,i,e,a))}),s},Nn=1,Hn=4;var Dn=function(t){return Ln(t,Nn|Hn)},Vn=n(381),Wn=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Un=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},qn=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Un(arguments[e]));return t};function Gn(t,e,n){var r=!1;return null!=n&&(r="boolean"==typeof n?n:n.ignoreCase),(t=r?t.toLowerCase():t)===(e=r?e.toLowerCase():e)}function Xn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e.pop();if(0===e.length&&""===r)return t;if(r=r.replace(/^(\/|\s)+/g,""),t=t.replace(/(\/|\s)+$/g,""),0===e.length)return t+"/"+r;var i=o(e).map(function(t){return t.replace(/^(\/|\s)+/g,"").replace(/(\/|\s)+$/g,"")});return o.flatten([t,i,r]).join("/")}function Yn(t,e){if(null==t&&null==e)return!0;if(null==t&&null!=e||null!=t&&null==e)return!1;var n=typeof t;if(n!==typeof e)return!1;if("string"===n||"boolean"===n)return t===e;if("number"===n)return Object(Vn.EqualsOfFloatNumbers)(t,e);if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&Kn(t,e);var r=e;return("function"==typeof t.equals&&"function"==typeof r.equals?function(t,e){return t.equals(e)}:function(t,e){return t==e})(t,e)}function Kn(t,e){return null==t?t===e:t.reduce(function(t,n,r){return t&&Yn(n,e[r])},!0)}function Jn(t,e){return t.reduce(function(t,n,r){return t&&n==e[r]},!0)}function $n(t){return null==t||""===t.trim()}function Qn(t){return!($n(t)||!t.startsWith("<"))&&null==(new DOMParser).parseFromString("<root>"+t+"</root>","application/xml").querySelector("parsererror")}function Zn(t,e){var n,r,i,a;void 0===e&&(e=" ");var s=(new DOMParser).parseFromString("<root>"+t+"</root>","application/xml");if(null==s.querySelector("parsererror")){try{for(var l=Wn(Array.from(s.querySelectorAll("br"))),u=l.next();!u.done;u=l.next()){u.value.textContent=e}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}var c=Array.from(s.querySelectorAll("p, li"));if(c.length>1){var h=o.without(c,c[c.length-1]);try{for(var p=Wn(h),f=p.next();!f.done;f=p.next()){var d=f.value,y=document.createElementNS("application/xml","span");y.textContent=e,d.appendChild(y)}}catch(t){i={error:t}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return s.querySelector("root").textContent}return console.warn("Bad value",s),function(t){var e=(new DOMParser).parseFromString("<span></span>","application/xml");e.querySelector("span").textContent=t;var n=(new XMLSerializer).serializeToString(e);return n=n.replace("<span>","").replace("</span>","").replace("<span/>","").replace("<span />","")}(t)}function tr(t){return(new DOMParser).parseFromString("<span>"+t+"</span>","application/xml").querySelector("span").textContent}function er(t){return"data:text/css,"+encodeURI(t)}new Map;function nr(t){var e=[t.font.postScriptName];if(Qn(t.text))try{null!=t.text&&function(t,e,n){var r=(new DOMParser).parseFromString("<body>"+t+"</body>","application/xml"),o={acceptNode:function(t){var n=t.nodeName.toLowerCase();return e.includes(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}};i.a.IsIE()&&(o=function(t){return t.acceptNode}(o));var a=document.createTreeWalker(r.childNodes[0],NodeFilter.SHOW_ELEMENT,o,!1);for(;a.nextNode();){var s=a.currentNode;n(s)}}(t.text,["span","ol","ul"],function(t){var n=function(t){var e,n,r=t.attributes.getNamedItem("style");if(null==r||null==r.value)return null;var o=r.value.split(";"),i=new Map;try{for(var a=Wn(o),s=a.next();!s.done;s=a.next()){var l=s.value;if(null!=(l=l.trim())&&""!==l){var u=l.split(":"),c=u[0].trim(),h=u[1].trim();i.set(c,h)}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i}(t);null!=n&&n.has("font-name")&&e.push(n.get("font-name"))})}catch(t){console.error("Unexpected exception while parsing item text"),console.error(t)}return e}function rr(t,e,n){if((n=function(t){null==t&&(t={});return o.defaults(t,{deep:!1,ignoreNull:!0}),t}(n)).ignoreNull)for(var r=0;r<e.length;r++){var i=Dn(e[r]);a(i),e[r]=i}return n.deep?function t(e){var n=[];for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=e;var i=qn(n);var a=function(e){for(var n in e)e.hasOwnProperty(n)&&("object"==typeof e[n]&&null!=o[n]?"object"==typeof o[n]?o[n]=t(o[n],e[n]):o=e[n]:o[n]=e[n])};for(var s=0;s<i.length;s++){var l=i[s];a(l)}return o}.apply(void 0,qn([t],e)):Object.assign.apply(Object,qn([t],e));function a(t){var e,n;try{for(var r=Wn(Object.keys(t)),o=r.next();!o.done;o=r.next()){var i=o.value,s=t[i];null===s?t.hasOwnProperty(i)?delete t[i]:t[i]=void 0:"object"==typeof s&&a(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}}function or(t,e){return rr(t,[e],{deep:!0})}function ir(t,e){return null==t&&(t={}),o.defaults(t,e),t}function ar(t,e){var n=Object.getOwnPropertyNames(t);return n[n.map(function(e){return t[e].toString().toLowerCase()}).indexOf(e.toLowerCase())]}function sr(t,e){null==e?e=[]:"string"==typeof e&&(e=[e]);var n=[];for(var r in t)n.push(r);return n.filter(function(n){var r,o;try{for(var i=Wn(["_","$$"]),a=i.next();!a.done;a=i.next()){var s=a.value;if(n.startsWith(s))return!1}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return!e.some(function(t){return t===n})&&"function"!=typeof t[n]}).reduce(function(e,n){return e[n]=t[n],e},{})}function lr(t,e){return null!=e?e:t}function ur(t,e){return void 0!==e?e:t}function cr(t,e){var n=null;"string"==typeof t&&/%$/.test(t)?n=e*Number(t.split(/%/)[0])/100:n=Number(t);if("number"!=typeof n||isNaN(n))throw new r.a("'"+t+"' is not a number or percent string");return n}},384:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return h});var r,o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},l=function(){function t(){this._listeners=[]}return t.prototype.add=function(t){this._listeners.push(t)},t.prototype.remove=function(t){this._listeners=this._listeners.filter(function(e){return e!==t})},t.prototype.listenersCount=function(){return this._listeners.length},t.prototype.notify=function(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{for(var o=i(this._listeners),a=o.next();!a.done;a=o.next()){a.value.apply(void 0,s(n))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t}(),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.add=function(e){t.prototype.add.call(this,e)},e.prototype.remove=function(e){t.prototype.remove.call(this,e)},e.prototype.notify=function(e){t.prototype.notify.call(this,e)},e.prototype.fire=function(t){this.notify(t)},e}(l),c=function(t){function e(e){var n=t.call(this)||this;return n._sender=e,n}return o(e,t),e.prototype.add=function(e){t.prototype.add.call(this,e)},e.prototype.remove=function(e){t.prototype.remove.call(this,e)},e.prototype.notify=function(e){t.prototype.notify.call(this,this._sender,e)},e.prototype.fire=function(t){this.notify(t)},e}(l),h=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._sender=e,n}return o(e,t),e.prototype.add=function(e){t.prototype.add.call(this,e)},e.prototype.remove=function(e){t.prototype.remove.call(this,e)},e.prototype.notify=function(e,n){t.prototype.notify.call(this,e,n)},e}(l)},386:function(t,e,n){"use strict";n.r(e),n.d(e,"Color",function(){return o.a}),n.d(e,"RgbColor",function(){return i.a}),n.d(e,"CmykColor",function(){return a.a}),n.d(e,"GrayscaleColor",function(){return s.a}),n.d(e,"LabColor",function(){return l.a}),n.d(e,"ColorFactory",function(){return u.a}),n.d(e,"SpotColor",function(){return p}),n.d(e,"Utils",function(){return c.a});var r,o=n(420),i=n(485),a=n(584),s=n(540),l=n(541),u=n(486),c=n(463),h=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e){var n=t.call(this,e)||this;if(null==e)return n;var r="Incorrect SpotColor format: "+JSON.stringify(e);if("string"==typeof e)n._tryInitFromString(e)?n._previewFromServer=c.a.isValidRgbColor(n.preview):console.warn(r);else try{n._init(e)}catch(t){console.warn(r)}return n}return h(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"SpotColor"},enumerable:!0,configurable:!0}),e.prototype._tryInitFromString=function(t){e._spot.lastIndex=0;var n=e._spot.exec(t);return null!=n&&10===n.length&&(this._init({inkName:n[1].replace(/'/g,"").replace(/\"/g,""),inkColor:u.a.createColor(n[2]),inkSolidity:null!=n[4]?+n[4]:1,tint:null!=n[7]?c.a.convertPercentToByte(n[7]):255,preview:null!=n[9]?n[9]:null}),!0)},e.prototype.toString=function(){var t=this.inkColor.clone();return t.preview=null,"spot('"+this.inkName+"',"+t.toString()+","+this.inkSolidity+","+c.a.convertByteToPercent(this.tint)+","+this.preview+")"},e.prototype.clone=function(){return new e(this)},e.prototype.equals=function(n){return n instanceof e&&(t.prototype.equals.call(this,n)&&n instanceof e&&this.inkName===n.inkName&&this.inkColor.equals(n.inkColor)&&this.inkSolidity===n.inkSolidity&&this.alpha===n.alpha&&this.tint===n.tint)},e.prototype.getData=function(){var e=t.prototype.getData.call(this);return e.inkName=this.inkName,e.inkColor=this.inkColor.getData(),e.inkSolidity=this.inkSolidity,e.alpha=this.alpha,e.tint=this.tint,e},e.prototype._getPreview=function(){return this.preview},e.prototype._init=function(e){t.prototype._init.call(this,e),e.alpha=null!=e.alpha?e.alpha:255,e.tint=null!=e.tint?e.tint:255;var n=u.a.createColor(e.inkColor,!0);this._validateString(e.inkName),this._validateNumber(e.inkSolidity,0,1),this._validateNumber(e.alpha),this._validateNumber(e.tint),this.inkName=e.inkName,this.inkColor=n,this.inkSolidity=e.inkSolidity,this.alpha=e.alpha,this.tint=e.tint},e._spot=/^\s*spot\(\s*([^()]*)\s*,\s*(.{3,4}\([^()]*\))\s*(,\s*(\d{1}(\.\d{1,})?))?\s*(,\s*(\d{1,3})%)?\s*(,\s*(.*)\s*)?\)\s*;{0,1}\s*$/g,e}(o.a);u.a.registerColor("SpotColor","spot",p)},387:function(t,e,n){var r;(function(){var n=this,o=n._,i=Array.prototype,a=Object.prototype,s=Function.prototype,l=i.push,u=i.slice,c=a.toString,h=a.hasOwnProperty,p=Array.isArray,f=Object.keys,d=s.bind,y=Object.create,g=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};t.exports&&(e=t.exports=m),e._=m,m.VERSION="1.8.3";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}},v=function(t,e,n){return null==t?m.identity:m.isFunction(t)?_(t,e,n):m.isObject(t)?m.matcher(t):m.property(t)};m.iteratee=function(t,e){return v(t,e,1/0)};var b=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],a=t(i),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=i[u])}return n}},w=function(t){if(!m.isObject(t))return{};if(y)return y(t);g.prototype=t;var e=new g;return g.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},P=Math.pow(2,53)-1,x=C("length"),O=function(t){var e=x(t);return"number"==typeof e&&e>=0&&e<=P};function I(t){return function(e,n,r,o){n=_(n,o,4);var i=!O(e)&&m.keys(e),a=(i||e).length,s=t>0?0:a-1;return arguments.length<3&&(r=e[i?i[s]:s],s+=t),function(e,n,r,o,i,a){for(;i>=0&&i<a;i+=t){var s=o?o[i]:i;r=n(r,e[s],s,e)}return r}(e,n,r,i,s,a)}}m.each=m.forEach=function(t,e,n){var r,o;if(e=_(e,n),O(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var i=m.keys(t);for(r=0,o=i.length;r<o;r++)e(t[i[r]],i[r],t)}return t},m.map=m.collect=function(t,e,n){e=v(e,n);for(var r=!O(t)&&m.keys(t),o=(r||t).length,i=Array(o),a=0;a<o;a++){var s=r?r[a]:a;i[a]=e(t[s],s,t)}return i},m.reduce=m.foldl=m.inject=I(1),m.reduceRight=m.foldr=I(-1),m.find=m.detect=function(t,e,n){var r;if(void 0!==(r=O(t)?m.findIndex(t,e,n):m.findKey(t,e,n))&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=v(e,n),m.each(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r},m.reject=function(t,e,n){return m.filter(t,m.negate(v(e)),n)},m.every=m.all=function(t,e,n){e=v(e,n);for(var r=!O(t)&&m.keys(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(!e(t[a],a,t))return!1}return!0},m.some=m.any=function(t,e,n){e=v(e,n);for(var r=!O(t)&&m.keys(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(e(t[a],a,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return O(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=function(t,e){var n=u.call(arguments,2),r=m.isFunction(e);return m.map(t,function(t){var o=r?e:t[e];return null==o?o:o.apply(t,n)})},m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,o,i=-1/0,a=-1/0;if(null==e&&null!=t)for(var s=0,l=(t=O(t)?t:m.values(t)).length;s<l;s++)(r=t[s])>i&&(i=r);else e=v(e,n),m.each(t,function(t,n,r){((o=e(t,n,r))>a||o===-1/0&&i===-1/0)&&(i=t,a=o)});return i},m.min=function(t,e,n){var r,o,i=1/0,a=1/0;if(null==e&&null!=t)for(var s=0,l=(t=O(t)?t:m.values(t)).length;s<l;s++)(r=t[s])<i&&(i=r);else e=v(e,n),m.each(t,function(t,n,r){((o=e(t,n,r))<a||o===1/0&&i===1/0)&&(i=t,a=o)});return i},m.shuffle=function(t){for(var e,n=O(t)?t:m.values(t),r=n.length,o=Array(r),i=0;i<r;i++)(e=m.random(0,i))!==i&&(o[i]=o[e]),o[e]=n[i];return o},m.sample=function(t,e,n){return null==e||n?(O(t)||(t=m.values(t)),t[m.random(t.length-1)]):m.shuffle(t).slice(0,Math.max(0,e))},m.sortBy=function(t,e,n){return e=v(e,n),m.pluck(m.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var S=function(t){return function(e,n,r){var o={};return n=v(n,r),m.each(e,function(r,i){var a=n(r,i,e);t(o,r,a)}),o}};m.groupBy=S(function(t,e,n){m.has(t,n)?t[n].push(e):t[n]=[e]}),m.indexBy=S(function(t,e,n){t[n]=e}),m.countBy=S(function(t,e,n){m.has(t,n)?t[n]++:t[n]=1}),m.toArray=function(t){return t?m.isArray(t)?u.call(t):O(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:O(t)?t.length:m.keys(t).length},m.partition=function(t,e,n){e=v(e,n);var r=[],o=[];return m.each(t,function(t,n,i){(e(t,n,i)?r:o).push(t)}),[r,o]},m.first=m.head=m.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,m.identity)};var T=function(t,e,n,r){for(var o=[],i=0,a=r||0,s=x(t);a<s;a++){var l=t[a];if(O(l)&&(m.isArray(l)||m.isArguments(l))){e||(l=T(l,e,n));var u=0,c=l.length;for(o.length+=c;u<c;)o[i++]=l[u++]}else n||(o[i++]=l)}return o};function j(t){return function(e,n,r){n=v(n,r);for(var o=x(e),i=t>0?0:o-1;i>=0&&i<o;i+=t)if(n(e[i],i,e))return i;return-1}}function R(t,e,n){return function(r,o,i){var a=0,s=x(r);if("number"==typeof i)t>0?a=i>=0?i:Math.max(i+s,a):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=e(u.call(r,a,s),m.isNaN))>=0?i+a:-1;for(i=t>0?a:s-1;i>=0&&i<s;i+=t)if(r[i]===o)return i;return-1}}m.flatten=function(t,e){return T(t,e,!1)},m.without=function(t){return m.difference(t,u.call(arguments,1))},m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=v(n,r));for(var o=[],i=[],a=0,s=x(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e?(a&&i===u||o.push(l),i=u):n?m.contains(i,u)||(i.push(u),o.push(l)):m.contains(o,l)||o.push(l)}return o},m.union=function(){return m.uniq(T(arguments,!0,!0))},m.intersection=function(t){for(var e=[],n=arguments.length,r=0,o=x(t);r<o;r++){var i=t[r];if(!m.contains(e,i)){for(var a=1;a<n&&m.contains(arguments[a],i);a++);a===n&&e.push(i)}}return e},m.difference=function(t){var e=T(arguments,!0,!0,1);return m.filter(t,function(t){return!m.contains(e,t)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(t){for(var e=t&&m.max(t,x).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.object=function(t,e){for(var n={},r=0,o=x(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},m.findIndex=j(1),m.findLastIndex=j(-1),m.sortedIndex=function(t,e,n,r){for(var o=(n=v(n,r,1))(e),i=0,a=x(t);i<a;){var s=Math.floor((i+a)/2);n(t[s])<o?i=s+1:a=s}return i},m.indexOf=R(1,m.findIndex,m.sortedIndex),m.lastIndexOf=R(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o};var k=function(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var i=w(t.prototype),a=t.apply(i,o);return m.isObject(a)?a:i};m.bind=function(t,e){if(d&&t.bind===d)return d.apply(t,u.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),r=function(){return k(t,r,e,this,n.concat(u.call(arguments)))};return r},m.partial=function(t){var e=u.call(arguments,1),n=function(){for(var r=0,o=e.length,i=Array(o),a=0;a<o;a++)i[a]=e[a]===m?arguments[r++]:e[a];for(;r<arguments.length;)i.push(arguments[r++]);return k(t,n,this,this,i)};return n},m.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t[n=arguments[e]]=m.bind(t[n],t);return t},m.memoize=function(t,e){var n=function(r){var o=n.cache,i=""+(e?e.apply(this,arguments):r);return m.has(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return n.cache={},n},m.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,o,i,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:m.now(),a=null,i=t.apply(r,o),a||(r=o=null)};return function(){var u=m.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return r=this,o=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=u,i=t.apply(r,o),a||(r=o=null)):a||!1===n.trailing||(a=setTimeout(l,c)),i}},m.debounce=function(t,e,n){var r,o,i,a,s,l=function(){var u=m.now()-a;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(s=t.apply(i,o),r||(i=o=null)))};return function(){i=this,o=arguments,a=m.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(s=t.apply(i,o),i=o=null),s}},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2);var B=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function A(t,e){var n=E.length,r=t.constructor,o=m.isFunction(r)&&r.prototype||a,i="constructor";for(m.has(t,i)&&!m.contains(e,i)&&e.push(i);n--;)(i=E[n])in t&&t[i]!==o[i]&&!m.contains(e,i)&&e.push(i)}m.keys=function(t){if(!m.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)m.has(t,n)&&e.push(n);return B&&A(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return B&&A(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r},m.mapObject=function(t,e,n){e=v(e,n);for(var r,o=m.keys(t),i=o.length,a={},s=0;s<i;s++)a[r=o[s]]=e(t[r],r,t);return a},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()},m.extend=b(m.allKeys),m.extendOwn=m.assign=b(m.keys),m.findKey=function(t,e,n){e=v(e,n);for(var r,o=m.keys(t),i=0,a=o.length;i<a;i++)if(e(t[r=o[i]],r,t))return r},m.pick=function(t,e,n){var r,o,i={},a=t;if(null==a)return i;m.isFunction(e)?(o=m.allKeys(a),r=_(e,n)):(o=T(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,l=o.length;s<l;s++){var u=o[s],c=a[u];r(c,u,a)&&(i[u]=c)}return i},m.omit=function(t,e,n){if(m.isFunction(e))e=m.negate(e);else{var r=m.map(T(arguments,!1,!1,1),String);e=function(t,e){return!m.contains(r,e)}}return m.pick(t,e,n)},m.defaults=b(m.allKeys,!0),m.create=function(t,e){var n=w(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var a=n[i];if(e[a]!==o[a]||!(a in o))return!1}return!0};var F=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var o=c.call(t);if(o!==c.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var i="[object Array]"===o;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(m.isFunction(a)&&a instanceof a&&m.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),i){if((l=t.length)!==e.length)return!1;for(;l--;)if(!F(t[l],e[l],n,r))return!1}else{var u,h=m.keys(t);if(l=h.length,m.keys(e).length!==l)return!1;for(;l--;)if(u=h[l],!m.has(e,u)||!F(t[u],e[u],n,r))return!1}return n.pop(),r.pop(),!0};m.isEqual=function(t,e){return F(t,e)},m.isEmpty=function(t){return null==t||(O(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=p||function(t){return"[object Array]"===c.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){m["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}}),m.isArguments(arguments)||(m.isArguments=function(t){return m.has(t,"callee")}),"object"!=typeof Int8Array&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&t!==+t},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===c.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){return null!=t&&h.call(t,e)},m.noConflict=function(){return n._=o,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=C,m.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=_(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=m.invert(M),L=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}};m.escape=L(M),m.unescape=L(z),m.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),m.isFunction(r)?r.call(t):r};var N=0;m.uniqueId=function(t){var e=++N+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,W=function(t){return"\\"+D[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r=RegExp([(e.escape||H).source,(e.interpolate||H).source,(e.evaluate||H).source].join("|")+"|$","g"),o=0,i="__p+='";t.replace(r,function(e,n,r,a,s){return i+=t.slice(o,s).replace(V,W),o=s+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),e}),i+="';\n",e.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(e.variable||"obj","_",i)}catch(t){throw t.source=i,t}var s=function(t){return a.call(this,t,m)},l=e.variable||"obj";return s.source="function("+l+"){\n"+i+"}",s},m.chain=function(t){var e=m(t);return e._chain=!0,e};var U=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){m.each(m.functions(t),function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),U(this,n.apply(m,t))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],U(this,n)}}),m.each(["concat","join","slice"],function(t){var e=i[t];m.prototype[t]=function(){return U(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},void 0===(r=function(){return m}.apply(e,[]))||(t.exports=r)}).call(this)},388:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(436),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n,r){var o=t.call(this,r,n)||this;return o._items=e,o}return i(e,t),e}(o.b)},391:function(t,e,n){"use strict";var r={IsIos:function(){return(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream},GetIosVersion:function(){if(null==navigator.appVersion||!r.IsIos())return[];var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return null==t?[]:t.slice(1).map(function(t){return parseInt(t,10)}).map(function(t){return isNaN(t)?null:t})},IosMajorVersion:function(){var t=navigator.userAgent,e=t.indexOf("OS ");if(e>-1)return Number(t.substr(e+3,3).replace("_",".").charAt(0))},IsAndroid:function(){return!!navigator.userAgent.toLowerCase().match(/(android)/)},IsTouchDevice:function(){return r.IsIos()||r.IsAndroid()||r.IsTouchIE()},IsNativeAndroidBrowser:function(){var t=navigator.userAgent;return t.indexOf("Mozilla/5.0")>-1&&t.indexOf("Android ")>-1&&t.indexOf("AppleWebKit")>-1&&!(t.indexOf("Chrome")>-1)},IsGoogleChrome:function(){return"object"==typeof window.chrome},IsSafari:function(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")},IsSafariOrSafariWebView:function(){return r.IsSafari()||r.IsIos()},IsFirefox:function(){return-1!==navigator.userAgent.indexOf("Firefox")&&-1===navigator.userAgent.indexOf("Seamonkey")},IsTouchIE:function(){return-1!==navigator.userAgent.indexOf("Trident")&&-1!==navigator.userAgent.indexOf("Touch")},IsIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0},IsEdge:function(){return-1!=navigator.userAgent.indexOf("Edge")},GetEdgeHtmlVersion:function(){return r.IsEdge()?navigator.userAgent.match(/Edge\/(\d+).(\d+)/).slice(1).map(function(t){return parseInt(t,10)}).map(function(t){return isNaN(t)?null:t}):[]},get devicePixelRatio(){return null!=window.devicePixelRatio?window.devicePixelRatio:1},get screenDpi(){return 96*r.devicePixelRatio},IsSmallScreen:function(){return window.innerWidth<=500}};e.a=r},392:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(381),o=function(){function t(){}return t.drawLine=function(e,n,r,o,i,a,s,l){void 0===l&&(l=1),!t.isFullTransparentColor(s)&&a>0&&(null==l||l>0)&&(e.save(),l&&(e.globalAlpha=e.globalAlpha*l),e.lineWidth=a,e.strokeStyle=s,e.beginPath(),e.moveTo(n,r),e.lineTo(o,i),e.closePath(),e.stroke(),e.restore())},t.drawDashedLine=function(e,n,r,o,i,a,s,l,u,c,h){if(void 0===h&&(h=1),a>0&&u>0&&c>0&&(null==h||h>0)){if(e.save(),h&&(e.globalAlpha=e.globalAlpha*h),e.lineWidth=a,o<n){var p=n;n=o,o=p,p=r,r=i,i=p}var f,d=o-n,y=i-r,g=u+c,m=Math.sqrt(d*d+y*y),_=Math.floor(m/g),v=(d/=m/g)*(u/g),b=d*(c/g),w=(y/=m/g)*(u/g),C=y*(c/g),P=n,x=r;if(!t.isFullTransparentColor(s)){for(e.strokeStyle=s,e.beginPath(),e.moveTo(P,x),f=0;f<_;f++)P+=v,x+=w,e.lineTo(P,x),P+=b,x+=C,f+1<_&&e.moveTo(P,x);P+v<=o&&x+w<=i?(e.moveTo(P,x),e.lineTo(P+v,x+w)):(e.moveTo(P,x),e.lineTo(o,i)),e.closePath(),e.stroke()}if(P=n+v,x=r+w,!t.isFullTransparentColor(l)){for(e.strokeStyle=l,e.beginPath(),e.moveTo(P,x),f=0;f<_;f++)P+=b,x+=C,e.lineTo(P,x),P+=v,x+=w,f+1<_&&e.moveTo(P,x);P<o&&x<i&&(e.moveTo(P,x),e.lineTo(o,i)),e.closePath(),e.stroke()}e.restore()}},t.drawPolyline=function(e,n,r,o,i){if(!t.isFullTransparentColor(o)&&r>0&&(null==i||i>0)&&n&&n.length>1){e.save(),i&&(e.globalAlpha=e.globalAlpha*i),e.lineWidth=r,e.strokeStyle=o,e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var a=1,s=n.length;a<s;++a){var l=n[a];e.lineTo(l.x,l.y)}e.stroke(),e.restore()}},t.drawPath=function(e,n,r,o,i,a,s){t.path(e,n,r,o,null,i,a,s,[])},t.fillPath=function(e,n,r,o,i,a){t.path(e,n,r,o,i,0,null,a,[])},t.path=function(e,n,o,i,a,s,l,u,c){var h=null!=l&&!t.isFullTransparentColor(l)&&s>0,p=null!=a&&!t.isFullTransparentColor(a);if((h||p)&&(null==u||u>0)){e.save(),u&&(e.globalAlpha=e.globalAlpha*u);var f=i.toMatrix();if(e.translate(o.x,o.y),e.transform(f.m00,f.m10,f.m01,f.m11,f.m02,f.m12),e.translate(-o.x,-o.y),n instanceof r.Path?n.draw(e):"function"==typeof n.addToContext&&n.addToContext(e),p&&(e.fillStyle=a,e.fill()),h){if(n instanceof r.Path&&!Object(r.EqualsOfFloatNumbers)(i.scaleX,i.scaleY)){e.restore(),e.save(),u&&(e.globalAlpha=u);var d=n.clone();d.transform(i,o),d.draw(e)}else if(s/=i.scaleX,c&&c.length>0)for(var y=0;y<c.length;y++)c[y]/=i.scaleX;e.lineWidth=s,e.strokeStyle=l,e.setLineDash(c),e.stroke()}e.restore()}},t.clipPath=function(t,e){e.draw(t),t.clip()},t.drawImage=function(e,n,o,i,a,s,l,u,c){if(void 0===s&&(s=!1),void 0===l&&(l=null),void 0===u&&(u=1),void 0===c&&(c=null),null==u||u>0){e.save(),u&&(e.globalAlpha=e.globalAlpha*u),e.translate(o.centerX,o.centerY),e.rotate(Object(r.ConvertDegreeToRadian)(o.angle));var h=null!=c?c.width:n.naturalWidth||e.canvas.width,p=null!=c?c.height:n.naturalHeight||e.canvas.height,f=void 0!=i&&0!==i&&void 0!=a&&0!==a&&Math.abs(h-o.width*i)<1&&Math.abs(p-o.height*a)<1;s||(s=(e.imageSmoothingEnabled||!0===e.msImageSmoothingEnabled)&&Math.abs(o.angle)%90<.01&&f),s&&(e.imageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1);try{f?(e.scale(1/i,1/a),null!=c?e.drawImage(n,c.left,c.top,c.width,c.height,-o.width*i/2,-o.height*a/2,h,p):e.drawImage(n,-o.width*i/2,-o.height*a/2,h,p),e.scale(i,a)):null!=c?e.drawImage(n,c.left,c.top,c.width,c.height,-o.width/2,-o.height/2,o.width,o.height):e.drawImage(n,-o.width/2,-o.height/2,o.width,o.height),l&&!t.isFullTransparentColor(l)&&(e.fillStyle=l,e.fillRect(-o.width/2,-o.height/2,o.width,o.height))}catch(t){}s&&(e.imageSmoothingEnabled=!0,e.msImageSmoothingEnabled=!0),e.restore()}},t.drawRectangle=function(e,n,r,o,i){t.rectangle(e,n,r,o,null,i)},t.fillRectangle=function(e,n,r,o){t.rectangle(e,n,0,null,r,o)},t.rectangle=function(e,n,o,i,a,s){void 0===a&&(a=null),void 0===s&&(s=1);var l=i&&!t.isFullTransparentColor(i)&&o>0,u=a&&!t.isFullTransparentColor(a);(l||u)&&(null==s||s>0)&&(e.save(),s&&(e.globalAlpha=e.globalAlpha*s),e.translate(n.centerX,n.centerY),e.rotate(Object(r.ConvertDegreeToRadian)(n.angle)),u&&(e.fillStyle=a,e.fillRect(-n.width/2,-n.height/2,n.width,n.height)),l&&(e.lineWidth=o,e.strokeStyle=i,e.strokeRect(-n.width/2,-n.height/2,n.width,n.height)),e.restore())},t.isFullTransparentColor=function(t){if(!t)return!1;var e=t.A||t.a;if(0===e)return!0;if("string"==typeof t){if(e=/^\s*rgba\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*\,\s*(\d{1,}(\.\d{1,})?)\s*\)\s*;{0,1}\s*$/i.exec(t))return 0===(e=parseFloat(e[1]))}return!1},t.clearCanvas=function(t,e){void 0===e&&(e=!1),e&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.clearRect(0,0,t.canvas.width,t.canvas.height),e&&t.restore()},t.drawRoundedRectangle=function(t,e,n){t.roundedRectangle(e.left,e.top,e.width,e.height,n)},t}();CanvasRenderingContext2D.prototype.roundedRectangle=function(t,e,n,r,o){var i=2*Math.PI/2,a=2*Math.PI/4;this.beginPath(),this.arc(o+t,o+e,o,-a,i,!0),this.lineTo(t,e+r-o),this.arc(o+t,r-o+e,o,i,a,!0),this.lineTo(t+n-o,e+r),this.arc(t+n-o,e+r-o,o,a,0,!0),this.lineTo(t+n,e+o),this.arc(t+n-o,e+o,o,0,-a,!0),this.lineTo(t+o,e),this.stroke(),this.fill(),this.closePath()}},393:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r,o,i=n(384),a=n(533),s=n(534),l=(n(912),n(380)),u=n(742),c=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},p=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t};o=(r=s).from,r.from=function(t){return t instanceof f?t:o(t)};var f=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._collection=[],this.constructor=function(t){throw new l.e},this._itemAddedEvent=new i.a,this._itemRemovedEvent=new i.a,this._itemMovedEvent=new i.a,this._enumerable=s.from(this._collection),0!==t.length&&this.setRange(t)}return t.prototype.setRange=function(t){this.clear(),this.addRange(t)},t.prototype.addRange=function(e){var n;e instanceof t&&(e=e._collection),"getEnumerator"in(n=e)&&"toArray"in n&&(e=e.toArray());for(var r=0;r<e.length;r++)this.add(e[r])},t.prototype.add=function(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{for(var o=c(n),i=o.next();!i.done;i=o.next()){var a=i.value;this.insertAt(this._collection.length,a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.push=function(t){return this.add(t),this.length},t.prototype.insertAt=function(t,e){var n,r,o;Array.isArray(e)||(e=[e]);try{for(var i=c(e),a=i.next();!a.done;a=i.next()){var s=a.value;this._checkIfItemExists(s)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}if(t<0||t>this._collection.length)throw new l.f;(o=this._collection).splice.apply(o,p([t,0],e));for(var u=0;u<e.length;u++){s=e[u];this._onItemAdded(this._collection.indexOf(s),s)}},t.prototype.remove=function(t){if(!this.contains(t))throw new l.a(a.c);return this.removeAt(this.indexOf(t))},t.prototype.removeAt=function(t){if(t<0||t>this._collection.length-1)throw new l.f;var e=this._collection[t];return this._collection.splice(t,1),this._onItemRemoved(t,e),e},t.prototype.removeRange=function(t,e){for(var n=this._collection.slice(),r=this._collection.splice(t,e-t+1),o=0;o<r.length;o++){var i=r[o];this._onItemRemoved(n.indexOf(i),i)}return r},t.prototype.move=function(t,e,n){"boolean"!=typeof n&&(n=!1);var r=this._collection[t];return r&&t>=0&&e>=0&&t!=e&&(this._collection.splice(t,1),this._collection.splice(e,0,r),n||this._onItemMoved(t,e)),r},t.prototype.clear=function(){for(var t=this.length-1;t>=0;t--)this.removeAt(t)},t.prototype.replaceAt=function(t,e){if(e<0||e>this._collection.length-1)throw new l.f;this._collection[e]=t},Object.defineProperty(t.prototype,"length",{get:function(){return this._collection.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this.getItem(t)},t.prototype.set=function(t,e){throw new l.e},t.prototype.getItem=function(t){return this._collection[t]},t.prototype._checkIfItemExists=function(t){if(this.contains(t))throw new l.a(a.b)},t.prototype._onItemAdded=function(t,e){this._itemAddedEvent.notify({item:e,index:t,type:u.a.Add})},t.prototype.add_itemAdded=function(t){this._itemAddedEvent.add(t)},t.prototype.remove_itemAdded=function(t){this._itemAddedEvent.remove(t)},t.prototype._onItemRemoved=function(t,e){this._itemRemovedEvent.notify({item:e,index:t,type:u.a.Remove})},t.prototype.add_itemRemoved=function(t){this._itemRemovedEvent.add(t)},t.prototype.remove_itemRemoved=function(t){this._itemRemovedEvent.remove(t)},t.prototype._onItemMoved=function(t,e){this._itemMovedEvent.notify({oldIndex:t,newIndex:e,type:u.a.Move})},t.prototype.add_itemMoved=function(t){this._itemMovedEvent.add(t)},t.prototype.remove_itemMoved=function(t){this._itemMovedEvent.remove(t)},t.prototype.add_collectionChanged=function(t){this.add_itemMoved(t),this.add_itemRemoved(t),this.add_itemAdded(t)},t.prototype.remove_collectionChanged=function(t){this.remove_itemMoved(t),this.remove_itemRemoved(t),this.remove_itemAdded(t)},t.prototype[Symbol.iterator]=function(){return this._collection.values()},t.prototype.toArray=function(){return this._collection.slice()},t.prototype.getEnumerator=function(){return this._enumerable.getEnumerator()},t.prototype.traverseBreadthFirst=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).traverseBreadthFirst.apply(t,p(e))},t.prototype.traverseDepthFirst=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).traverseDepthFirst.apply(t,p(e))},t.prototype.flatten=function(){return this._enumerable.flatten()},t.prototype.pairwise=function(t){return this._enumerable.pairwise(t)},t.prototype.scan=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).scan.apply(t,p(e))},t.prototype.select=function(t){return this._enumerable.select(t)},t.prototype.selectMany=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).selectMany.apply(t,p(e))},t.prototype.where=function(t){return this._enumerable.where(t)},t.prototype.choose=function(t){return this._enumerable.choose(t)},t.prototype.ofType=function(t){return this._enumerable.ofType(t)},t.prototype.zip=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).zip.apply(t,p(e))},t.prototype.merge=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).merge.apply(t,p(e))},t.prototype.join=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).join.apply(t,p(e))},t.prototype.groupJoin=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).groupJoin.apply(t,p(e))},t.prototype.all=function(t){return this._enumerable.all(t)},t.prototype.any=function(t){return this._enumerable.any(t)},t.prototype.isEmpty=function(){return this._enumerable.isEmpty()},t.prototype.concat=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).concat.apply(t,p(e))},t.prototype.alternate=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).alternate.apply(t,p(e))},t.prototype.defaultIfEmpty=function(t){return this._enumerable.defaultIfEmpty(t)},t.prototype.distinct=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).distinct.apply(t,p(e))},t.prototype.distinctUntilChanged=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).distinctUntilChanged.apply(t,p(e))},t.prototype.except=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).except.apply(t,p(e))},t.prototype.intersect=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).intersect.apply(t,p(e))},t.prototype.union=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).union.apply(t,p(e))},t.prototype.sequenceEqual=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).sequenceEqual.apply(t,p(e))},t.prototype.orderBy=function(t){return this._enumerable.orderBy(t)},t.prototype.orderByDescending=function(t){return this._enumerable.orderByDescending(t)},t.prototype.reverse=function(){return this._enumerable.reverse()},t.prototype.shuffle=function(){return this._enumerable.shuffle()},t.prototype.weightedSample=function(t){return this._enumerable.weightedSample(t)},t.prototype.groupBy=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).groupBy.apply(t,p(e))},t.prototype.partitionBy=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).partitionBy.apply(t,p(e))},t.prototype.buffer=function(t){return this._enumerable.buffer(t)},t.prototype.aggregate=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).aggregate.apply(t,p(e))},t.prototype.average=function(t){return this._enumerable.average(t)},t.prototype.count=function(t){return this._enumerable.count(t)},t.prototype.max=function(t){return this._enumerable.max(t)},t.prototype.min=function(t){return this._enumerable.min(t)},t.prototype.maxBy=function(t){return this._enumerable.maxBy(t)},t.prototype.minBy=function(t){return this._enumerable.minBy(t)},t.prototype.sum=function(t){return this._enumerable.sum(t)},t.prototype.elementAt=function(t){return this._enumerable.elementAt(t)},t.prototype.elementAtOrDefault=function(t,e){return this._enumerable.elementAtOrDefault(t,e)},t.prototype.first=function(t){return this._enumerable.first(t)},t.prototype.firstOrDefault=function(t,e){return"function"==typeof t?this._enumerable.firstOrDefault(t,e):this._enumerable.firstOrDefault(e)},t.prototype.last=function(t){return this._enumerable.last(t)},t.prototype.lastOrDefault=function(t,e){return"function"==typeof t?this._enumerable.lastOrDefault(t,e):this._enumerable.lastOrDefault(e)},t.prototype.single=function(t){return this._enumerable.single(t)},t.prototype.singleOrDefault=function(t,e){return this._enumerable.singleOrDefault(t,e)},t.prototype.skip=function(t){return this._enumerable.skip(t)},t.prototype.skipWhile=function(t){return this._enumerable.skipWhile(t)},t.prototype.take=function(t){return this._enumerable.take(t)},t.prototype.takeWhile=function(t){return this._enumerable.takeWhile(t)},t.prototype.takeExceptLast=function(t){return this._enumerable.takeExceptLast(t)},t.prototype.takeFromLast=function(t){return this._enumerable.takeFromLast(t)},t.prototype.indexOf=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).indexOf.apply(t,p(e))},t.prototype.lastIndexOf=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).lastIndexOf.apply(t,p(e))},t.prototype.asEnumerable=function(){return this._enumerable},t.prototype.cast=function(){return this._enumerable.cast()},t.prototype.toLookup=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).toLookup.apply(t,p(e))},t.prototype.toObject=function(t,e){return this._enumerable.toObject(t,e)},t.prototype.toDictionary=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).toDictionary.apply(t,p(e))},t.prototype.toJSONString=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).toJSONString.apply(t,p(e))},t.prototype.toJoinedString=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).toJoinedString.apply(t,p(e))},t.prototype.doAction=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).doAction.apply(t,p(e))},t.prototype.forEach=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).forEach.apply(t,p(e))},t.prototype.write=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).write.apply(t,p(e))},t.prototype.writeLine=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).writeLine.apply(t,p(e))},t.prototype.force=function(){return this._enumerable.force()},t.prototype.letBind=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).letBind.apply(t,p(e))},t.prototype.share=function(){return this._enumerable.share()},t.prototype.memoize=function(){return this._enumerable.memoize()},t.prototype.catchError=function(t){return this._enumerable.catchError(t)},t.prototype.finallyAction=function(t){return this._enumerable.finallyAction(t)},t.prototype.log=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).log.apply(t,p(e))},t.prototype.trace=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).trace.apply(t,p(e))},t.prototype.insert=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).insert.apply(t,p(e))},t.prototype.contains=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._enumerable).contains.apply(t,p(e))},t}()},394:function(t,e,n){"use strict";n.d(e,"a",function(){return k}),n.d(e,"b",function(){return r});var r,o=n(383),i=n(439),a=n(488),s=n(447),l=n(382),u=n(407),c=n(492),h=n(380),p=n(416),f=n(413),d=n(387),y=n(391),g=n(396),m=n(421),_=n(500),v=n(386),b=n(422),w=n(437),C=n(381),P=n(417),x=n(467),O=n(449),I=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},S=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},T=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},j=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(T(arguments[e]));return t},R=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k=function(){function t(){}return t.isBgContainerItem=function(t){if(t.parentContainer instanceof f.d)return t.parentContainer instanceof f.d&&o.p(t.parentContainer.name,p.a.BG_CONTAINER_NAME,!0)},t.isFgContainerItem=function(t){return t.parentContainer instanceof f.d&&o.p(t.parentContainer.name,p.a.FG_CONTAINER_NAME,!0)},t.isImage=function(e){return(e instanceof s.a||e instanceof a.b)&&!t.isBgContainerItem(e)},t.isEmptyPlaceholder=function(t){return t instanceof a.b&&t.isStubOrEmpty},t.isDataMatrixBarcode=function(t){return t instanceof l.BarcodeItem&&t.barcodeFormat===l.BarcodeFormat.DATA_MATRIX||t instanceof a.b&&t.barcodeFormat==l.BarcodeFormat.DATA_MATRIX},t.isQrCode=function(t){return t instanceof l.BarcodeItem&&t.isQrCode||t instanceof a.b&&t.barcodeFormat==l.BarcodeFormat.QR_CODE},t.isLinearBarcode=function(t){return t instanceof l.BarcodeItem&&t.isLinearBarcode||t instanceof a.b&&(t.barcodeFormat==l.BarcodeFormat.EAN_13||t.barcodeFormat==l.BarcodeFormat.EAN_8||t.barcodeFormat==l.BarcodeFormat.UPC_A||t.barcodeFormat==l.BarcodeFormat.UPC_E||t.barcodeFormat==l.BarcodeFormat.CODE_128)},t.isVariableItem=function(t){return t.canSetIsVariable()},t.isMultiValueItem=function(t){return(t instanceof s.a||t instanceof u.a)&&0!==t.values.length},t.isTextType=function(t){return t===u.a||u.a.prototype.isPrototypeOf(t.prototype)},t.getAllowTextFormatting=function(t,e){var n,r,o,i;if(null!=t&&t instanceof l.BoundedTextItem&&t.overflowStrategy!==l.OverflowStrategy.Clip&&t.overflowStrategy!==l.OverflowStrategy.ExpandBox)return!1;var a=t instanceof l.CurvedTextItem?0:null!==(n=null===t||void 0===t?void 0:t.maxLineCount)&&void 0!==n?n:0,s=null!==(r=null===t||void 0===t?void 0:t.maxLineLength)&&void 0!==r?r:0;return!(a>0||s>0)&&(null!==(i=null===(o=null===t||void 0===t?void 0:t.textPermissions)||void 0===o?void 0:o.allowTextFormatting)&&void 0!==i?i:e)},t.allowMoveHorizontal=function(t){return!t.locked&&(!t.manipulationPermissions||t.manipulationPermissions.allowMoveHorizontal)},t.allowMoveVertical=function(t){return!t.locked&&(!t.manipulationPermissions||t.manipulationPermissions.allowMoveVertical)},t.allowManipulate=function(t){return!t.locked&&(!t.manipulationPermissions||t.manipulationPermissions.allowMoveVertical||t.manipulationPermissions.allowMoveHorizontal||t.manipulationPermissions.allowDelete||t.manipulationPermissions.allowRotate)},t.clearImageContent=function(t){if(null!=t){var e=t.content;e instanceof s.a&&(e.source.id=null,e.source.width=null,e.source.height=null,e.isUserImage=!1,e.fillColor=new v.RgbColor("rgba(0,0,0,0)"))}},t.getImageItem=function(t){if(null==t)return null;if(t instanceof s.a)return t;var e=t.content;if(e instanceof s.a)return e;if(null==e||e instanceof l.BarcodeItem)return null;throw new h.c("Wrong placeholder content!")},t.getImagePermissions=function(t){return null==t?null:t instanceof s.a?t.imagePermissions:t.getImagePermissions()},t.getContentEffect=function(t){return t.content instanceof s.a?t.content.effect:t.contentEffect},t.getAllowChangeContent=function(e){if(e instanceof l.BarcodeItem||e instanceof a.b&&e.isBarcodePlaceholder)return t.getBarcodePermissions(e).allowChangeBarcodeContent;var n=t.getImagePermissions(e),r=null==n||n.allowChangeImage,o=t.getImageItem(e);return r&&(null==o||0===o.values.length)},t.getImageMetaDataFromFile=function(e,n,r){return void 0===r&&(r=null),I(this,void 0,void 0,function(){var a,s,l;return S(this,function(u){switch(u.label){case 0:a={filePath:n,userId:r},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,i.e({url:o.s(e,"/api/ImagePicker/GetFileMetadata"),type:i.b.post,headers:[i.a.json],data:JSON.stringify(a)})];case 2:return s=u.sent(),[2,t._parseImageMetadata(s.value)];case 3:throw l=u.sent(),new h.c(JSON.parse(l.toJSON().message).ExceptionMessage);case 4:return[2]}})})},t.getImageMetaDataFromDesignImage=function(e,n){return I(this,void 0,void 0,function(){var r,a,s;return S(this,function(l){switch(l.label){case 0:r={designImageName:n},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,i.e({url:o.s(e,"/api/ImagePicker/GetDesignImageMeta"),type:i.b.post,headers:[i.a.json],data:JSON.stringify(r)})];case 2:return a=l.sent(),[3,4];case 3:throw s=l.sent(),new h.c(JSON.parse(s.toJSON().message).ExceptionMessage);case 4:return[2,t._parseImageMetadata(a.value)]}})})},t.getImageMetadataFromRemoteFile=function(e,n){return I(this,void 0,void 0,function(){var r,a,s;return S(this,function(l){switch(l.label){case 0:r={url:n},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,i.e({url:o.s(e,"/api/ImagePicker/GetWebImageMeta"),type:i.b.post,headers:[i.a.json],data:JSON.stringify(r)})];case 2:return a=l.sent(),[3,4];case 3:throw s=l.sent(),new h.c(JSON.parse(s.toJSON().message).ExceptionMessage);case 4:return[2,t._parseImageMetadata(a.value)]}})})},t._parseImageMetadata=function(t){var e=JSON.parse(t),n=new c.a;return n.storageId=e.storageId,n.name=e.name,n.size.width=e.width,n.size.height=e.height,n},t.getTextFromRichTextItem=function(t){return o.k(t.text)},t.getMaxFontSize=function(t){if(null==t||!(t instanceof u.a))return null;if(!o.m(t.text))return t.font.size;var e=[t.font.size];try{null!=t.text&&function(t,e,n){var r=(new DOMParser).parseFromString("<body>"+t+"</body>","application/xml"),o={acceptNode:function(t){var n=t.nodeName.toLowerCase();return e.includes(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}};y.a.IsIE()&&(o=function(t){return t.acceptNode}(o));var i=document.createTreeWalker(r.childNodes[0],NodeFilter.SHOW_ELEMENT,o,!1);for(;i.nextNode();){var a=i.currentNode;n(a)}}(t.text,["span","ol","ul"],function(t){var n=function(t){var e,n,r=t.attributes.getNamedItem("style");if(null==r||null==r.value)return null;var o=r.value.split(";"),i=new Map;try{for(var a=R(o),s=a.next();!s.done;s=a.next()){var l=s.value;if(null!=(l=l.trim())&&""!==l){var u=l.split(":"),c=u[0].trim(),h=u[1].trim();i.set(c,h)}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i}(t);null!=n&&n.has("font-size")&&e.push(parseFloat(n.get("font-size")))})}catch(t){console.error("Unexpected exception while parsing item text"),console.error(t)}return Math.max.apply(Math,j(e))},t.getBarcodeItem=function(t){if(null==t)return null;if(t instanceof l.BarcodeItem)return t;var e=t.content;if(e instanceof l.BarcodeItem)return e;if(null==e)return null;throw new h.c("Wrong placeholder content!")},t.getBarcodePermissions=function(t){if(null==t)return null;if(t instanceof l.BarcodeItem)return t.barcodePermissions;if(null!=t.contentPermissions)return t.contentPermissions.barcodePermissions;var e=t.content;return e instanceof l.BarcodeItem?e.barcodePermissions:null},t.getImageUrlFromImageMetadata=function(t,e,n,r,o){var i=null!=n?n:t.size.width,a=null!=r?r:t.size.height,s=null!=o&&o;return _.a.getImageUrl(e,t.storageId,i,a,null,null,s,null,t.pageIndex)},t.updateItems=function(t,e,n,i){var a,s;if(i=o.n(i,{addToHistory:!0,updatePhase:r.Final,redraw:!0}),0!==t.length){try{for(var l=R(t),u=l.next();!u.done;u=l.next()){var c=u.value;this._updateItem(e,c,i,n)}}catch(t){a={error:t}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}i.redraw&&e.redraw()}},t._updateItem=function(t,e,n,r){var o=t.getHandler(e);null!=o&&null!=o.layer&&(e instanceof s.a?this._updateImageItem(e,o,n,r):e instanceof a.b&&this._updatePlaceholderItem(e,o,n,r))},t._updateImageItem=function(t,e,n,o){e.quickUpdate(),n.updatePhase===r.Final&&(t.getItemChangedEvent().fire(),e.update(),o.updateTexts())},t._updatePlaceholderItem=function(t,e,n,r){null!=t.content&&this._updateImageItem(t.content,e.content,n,r),this._hidePlaceholderButtonWhileImageLoad(e)||e.update()},t._hidePlaceholderButtonWhileImageLoad=function(t){if(t.isEmptyContent()||!t.getPermissions().showSelectButton&&!t.getPermissions().showHandleButton)return!1;var e=function(n){n.removeReady(e),t.getPermissions().showSelectButton=!0,t.update()};return t.content.addReady(e),t.getPermissions().showSelectButton=!1,t.update(),!0},t.getItemBoundsForViolationCheck=function(t){return t instanceof g.l?t.getBoundsIncludingFrames():t.bounds},t.createCloneName=function(t,e,n){var r;"string"!=typeof(r="string"==typeof t?t:e.getRealItemName(t))&&(r="");var o=n.currentSurface.getAllItems({ignoreMockups:!1,excludeGroupItems:!0,flatGroupItems:!0}).toArray(),i=function(t){return o.some(function(n){return e.getRealItemName(n)===t})};if(!i(r))return r;var a=0,s=r.match(/_(\d+)$/);if(null!=s&&r.length>=2){r=r.substr(0,r.length-s[0].length);var l=parseInt(s[1]);l>0&&(a=l)}var u,c=1;do{if(!i(u=r+"_"+(a+c).toString()))break;c++}while(c<=1e4);return"string"==typeof t?u:e.createNewItemName(t,u)},t.createImageContentForPlaceholder=function(e,n,r,o){if(e.isBarcodePlaceholder!==n instanceof l.BarcodeData)return null;var i,a=r.getHandler(e),u=a.getTransformedRectangle(!1);u.angle=0;var h=e.content,p=e.contentPermissions;if(e.isBarcodePlaceholder&&n instanceof l.BarcodeData){var f=u.clone(),d=n.barcodeFormat===l.BarcodeFormat.QR_CODE||n.barcodeFormat===l.BarcodeFormat.DATA_MATRIX,y=Object(w.f)(new x.a(d?1:2.5,1),new x.a(u.width,u.height));f.width=y.width,f.height=y.height;var g=void 0;null!=h.barcodeOptions?g=h.barcodeOptions:(g=new l.EncodingOptions).pureBarcode=!0,(i=new l.BarcodeItem(n.barcodeFormat,null,g,f.toRectangleF())).applyBarcodeData(n),e.barcodeFormat=n.barcodeFormat}else n instanceof c.a&&(i=new s.a(n.storageId,u.location,u.width,u.height,n.size.width/n.size.height));i instanceof s.a&&n instanceof c.a&&(O.a.setDataToImage(n,i),i.effect=e.contentEffect,i.imagePermissions=p.imagePermissions.clone(),i.effect==b.a.Colorize&&null!=e.contentFillColor&&(i.fillColor=e.contentFillColor),null!=e.contentOverlayEffect&&(i.overlayEffect=e.contentOverlayEffect.clone())),i.transform.setAngle(e.transform.angle),r.getHandler(i).updateRectangle(null,e.contentResizeMode,a,o),i.textWrappingMode=m.a.Square,i.isVariable=null!=h&&h.isVariable,i instanceof l.BarcodeItem&&(i.barcodePermissions=p.barcodePermissions.clone());var _=e.contentPermissions.imagePermissions.allowKeepOverlayColor;return null==h?(i instanceof s.a&&(i.allowedSubfolder=e.allowedSubfolder,i.allowedTabs=e.allowedTabs),i.opacity=e.opacity):(h instanceof s.a&&i instanceof s.a&&(i.allowedSubfolder=h.allowedSubfolder,i.allowedTabs=h.allowedTabs,i.imagePermissions=h.imagePermissions.clone(),_&&t.setOverlayEffectColor(i,h.overlayEffect.color)),i.manipulationPermissions=h.manipulationPermissions.clone(),i.opacity=e.content.opacity,i.fillColor=h.fillColor.clone(),i instanceof l.BarcodeItem&&h instanceof l.BarcodeItem&&(i.barcodePermissions=h.barcodePermissions.clone())),i},t.positionItemInArea=function(e,n,r,o,i,s,c,h){if(void 0===i&&(i=!0),void 0===s&&(s=null),void 0===c&&(c=null),void 0===h&&(h=!0),n instanceof l.GroupItem)return n.getNestedItems(!0).forEach(function(n){return t.positionItemInArea(e,n,r,o,i,s,c,h)});var p=e.userEditContainer,f=null!=s?s.toRectangleF():p.region,d=null!=f,y=p.parentComponent.printAreas.getItem(0).bounds,g=d?f:y,m=g.center,_=i?w.a.from(g):e.getPrintAreaVisualSize(p),v=Math.min(_.width/r,_.height/o),b=null!=c?c:new C.PointF(r/2,o/2),P=function(t){var n=m;if(t instanceof l.BoundedTextItem||t instanceof l.AutoScaledTextItem)t.textRectangle.width*=v,t.textRectangle.height*=v,t.textRectangle.left=n.x+v*(t.textRectangle.left-b.x)-0,t.textRectangle.top=n.y+v*(t.textRectangle.top-b.y)-0;else if(t instanceof l.PlainTextItem){var r=n.x+v*(t.baselineLocation.x-b.x),o=n.y+v*(t.baselineLocation.y-b.y);t.baselineLocation.x=r,t.baselineLocation.y=o}else{var i=e.getHandler(t).getTransformedRectangle(h),a=n.x+v*(i.centerX-b.x),s=n.y+v*(i.centerY-b.y);t.transform.setScaleX(v),t.transform.setScaleY(v),t.transform.move(a-i.centerX,s-i.centerY)}};P(n),n instanceof a.b&&n.updateContentAndFrames(P),n instanceof u.a&&(n.font.size*=v)},t.rotateItems=function(t,e,n,r){var o=function(e){if(e instanceof l.GroupItem)return e.applyToItems(o);var i=t.getHandler(e),s=i.getTransformedRectangle(!1);s.rotateAt(r,n);var u=s.getTransform(i.getTransformedRectangle(!1));e.transform.move(u.translateX,u.translateY),e.transform.rotate(u.angle),e instanceof a.b&&e.updateContentAndFrames(o)};e.forEach(function(t){return o(t)})},t.changeItemsContent=function(t,e,n,r,o,i){var h,p,f,y,g,m,_=this,v=r.map(function(t){return t.clone()}),b=v.filter(function(t){return t instanceof l.GroupItem}),w=o.filter(function(t){return t instanceof l.GroupItem});this._replaceContentFromOldToNewItems(b,w,function(r,o){return _.changeItemsContent(t,e,n,o.items.toArray(),r.items.toArray(),i)},i);var C=v.filter(function(t){return t instanceof u.a}),O=o.filter(function(t){return t instanceof u.a}),I=t.getAllItems({ignoreMockups:!1,flatGroupItems:!0}),S=I.filter(function(t){return t instanceof u.a});S=d.without.apply(d,j([S],O));try{for(var T=R(O),k=T.next();!k.done;k=T.next()){var B=k.value;if(0!==B.placeholders.length){var E=function(t){var e=S.filter(function(e){return null!=e.placeholders.toArray().find(function(e){return e.name===t.name})});if(0===e.length)return"continue";t.value=e[0].placeholders.toArray().find(function(e){return e.name===t.name}).value};try{for(var A=(f=void 0,R(B.placeholders.toArray())),F=A.next();!F.done;F=A.next()){E(F.value)}}catch(t){f={error:t}}finally{try{F&&!F.done&&(y=A.return)&&y.call(A)}finally{if(f)throw f.error}}}}}catch(t){h={error:t}}finally{try{k&&!k.done&&(p=T.return)&&p.call(T)}finally{if(h)throw h.error}}this._replaceContentFromOldToNewItems(C,O,function(t,e){t.text=e.text,null!=e.tags&&(t.tags=e.tags)},i);var M=function(t,e){var r=new c.a;r.size=new x.a(e.imageContent.source.width,e.imageContent.source.height),r.storageId=e.imageContent.source.id,r.name=e.imageContent.name,r.origin=e.imageContent.source.origin,r.isVector=e.imageContent.source.isVector,r.pageIndex=e.imageContent.source.pageIndex,n.execute(P.b.setImageMetadata,{dataList:[{item:t,imageData:r,tags:e.tags}]}),e.isEmptyContent||t.isEmptyContent||null==e.content.tags||(t.content.tags=e.content.tags)},z=function(t){return t instanceof a.b&&!t.isStubOrEmpty&&t.content instanceof s.a},L=v.filter(z),N=o.filter(function(t){return t instanceof a.b}),H=I.filter(z);H=d.without.apply(d,j([H],N));var D=N.filter(function(t){return null!=t.linkId});if(0!==D.length){var V=new Set,W=function(t){var e=H.find(function(e){return e.linkId===t.linkId&&!e.isStubOrEmpty&&e.content instanceof s.a});if(null==e)return"continue";V.add(e.linkId),M(t,e),N=d.without(N,t)};try{for(var U=R(D),q=U.next();!q.done;q=U.next()){W(q.value)}}catch(t){g={error:t}}finally{try{q&&!q.done&&(m=U.return)&&m.call(U)}finally{if(g)throw g.error}}L=L.filter(function(t){return!V.has(t.linkId)})}this._replaceContentFromOldToNewItems(L,N,M,i)},t._replaceContentFromOldToNewItems=function(t,e,n,r){for(var o=t.map(function(t){return t.name}),i=[],a=function(t){o.find(function(n){return n===e[t].name})&&(o.splice(o.indexOf(e[t].name),1),i.push(t))},s=0;s<e.length;s++)a(s);var l,u=function(a){var s=e[a],u=void 0;i.includes(a)?u=t.find(function(t){return t.name===s.name}):r&&0!==o.length&&(l=o.shift(),u=t.find(function(t){return t.name===l})),null!=u&&(n(s,u.clone()),t.splice(t.indexOf(u),1))};for(s=0;s<e.length;s++)u(s)},t.getEmptyPlaceholdersFromProduct=function(t,e){void 0===e&&(e=!1);var n=[];return t.getAllItems({flatGroupItems:!0,ignoreMockups:!0}).filter(function(t){if(!(t instanceof a.b&&t.isStubOrEmpty&&null!=t.parentContainer&&t.parentContainer.name===p.a.MAIN_CONTAINER_NAME))return!1;if(e)return!0;if(null!=t.linkId){if(n.includes(t.linkId))return!1;n.push(t.linkId)}return!0})},t.waitForItemsUpdated=function(t,e){return I(this,void 0,void 0,function(){var n,r;return S(this,function(o){switch(o.label){case 0:return n=t.filter(function(t){return t instanceof l.GroupItem}).map(function(t){return t.getNestedItems(!0)}).reduce(function(t,e){return j(t,e)},[]),r=t.concat(n).map(function(t){return e.handlerFactory.get(t)}),[4,e.waitUpdate(r)];case 1:return o.sent(),[2]}})})},t.setOverlayEffectColor=function(e,n){null!=e&&(t._getItemOverlayEffect(e).color=n)},t._getItemOverlayEffect=function(t){return t instanceof s.a?(t.overlayEffect=null!=t.overlayEffect?t.overlayEffect:new l.OverlayEffect,t.overlayEffect):(t.contentOverlayEffect=null!=t.contentOverlayEffect?t.contentOverlayEffect:new l.OverlayEffect,t.contentOverlayEffect)},t}();!function(t){t[t.InProgress=0]="InProgress",t[t.Final=1]="Final"}(r||(r={}))},396:function(t,e,n){"use strict";n.d(e,"a",function(){return o.a}),n.d(e,"b",function(){return i.a}),n.d(e,"c",function(){return a.a}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return s.a}),n.d(e,"f",function(){return c.a}),n.d(e,"g",function(){return h.a}),n.d(e,"h",function(){return p.a}),n.d(e,"i",function(){return f.a}),n.d(e,"j",function(){return d.a}),n.d(e,"k",function(){return _}),n.d(e,"l",function(){return v.a}),n.d(e,"m",function(){return b.a}),n.d(e,"n",function(){return w.a}),n.d(e,"o",function(){return C.a});n(566),n(567),n(568);var r,o=n(569),i=n(424),a=(n(502),n(570),n(411)),s=(n(474),n(425)),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"colorGroups":null!=this.canvas&&(this.update(),this.canvas.redraw())}t.prototype._onItemPropertyChanged.call(this,e,n)},Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e}(s.a),c=(n(571),n(494),n(472),n(580),n(508),n(422)),h=(n(564),n(434)),p=(n(586),n(498),n(576),n(509),n(476),n(451)),f=n(572),d=n(575),y=n(382),g=n(381),m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return m(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"baselineLocation":this.update(null,null,"frame")}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype.drawItemHandler=function(e){t.prototype.drawItemHandler.call(this,e)},e.prototype._addTextWhizzFrames=function(t){t.addFrame(this._createTextWhizzFrame())},e.prototype.setTextWhizzWrappingPath=function(t){},e.prototype.updateTextWhizzFrames=function(t){t.replaceFrame(this._createTextWhizzFrame(),0)},e.prototype._getEndTransformTrigger=function(t){return t?null:"frame"},e.prototype._applyTransform=function(t,e,n){var r,o;if(t instanceof y.PlainTextItem){var i=t.baselineLocation.clone();i.transform(e,n),t.baselineLocation=i;var a=this._getPreviewScaleLimits(),s=this.item.previewScale*e.scaleY;s=Math.min(null!==(r=a.max)&&void 0!==r?r:Number.MAX_VALUE,s),s=Math.max(null!==(o=a.min)&&void 0!==o?o:Number.MIN_VALUE,s),t.previewScale=s}},e.prototype._getPreviewScaleLimits=function(){var e,n,r=t.prototype._getPreviewScaleLimits.call(this);return this.item.leading>0&&(null==this.canvas.maxLeading||isNaN(this.canvas.maxLeading)||(r.max=Math.min(null!==(e=r.max)&&void 0!==e?e:Number.MAX_VALUE,this.canvas.maxLeading/this.item.leading)),null==this.canvas.minLeading||isNaN(this.canvas.minLeading)||(r.min=Math.max(null!==(n=r.min)&&void 0!==n?n:Number.MIN_VALUE,this.canvas.minLeading/this.item.leading))),r},e.prototype._createTextWhizzFrame=function(){var t=this.item.baselineLocation.clone(),e=this.item.previewScale;Object(g.EqualsOfFloatNumbers)(e,1)||t.scale(1/e,1/e);var n=new this._textWhizz.PointTextFrame;return n.point=t,n},e.typeName="NewPlainTextItemHandler",e}(p.a),v=(n(475),n(565),n(410)),b=n(501),w=(n(448),n(562)),C=(n(445),n(435),n(423));n(444),n(421)},398:function(t,e,n){"use strict";n.d(e,"h",function(){return i}),n.d(e,"f",function(){return a}),n.d(e,"l",function(){return s}),n.d(e,"m",function(){return l}),n.d(e,"i",function(){return u}),n.d(e,"k",function(){return c}),n.d(e,"j",function(){return h}),n.d(e,"g",function(){return p}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d}),n.d(e,"a",function(){return y}),n.d(e,"e",function(){return g}),n.d(e,"b",function(){return m});var r=n(403),o=n(408),i=function(t,e,n){return t.x*e.y+t.y*n.x+e.x*n.y-(n.x*e.y+e.x*t.y+n.y*t.x)},a=function(t){if(0==t.length)return new r.a(0,0,0,0);for(var e=t[0],n=e.x,o=e.x,i=e.y,a=e.y,s=1,l=t.length;s<l;++s)e=t[s],n=Math.min(n,e.x),o=Math.max(o,e.x),i=Math.min(i,e.y),a=Math.max(a,e.y);return new r.a(n,i,o-n,a-i)},s=function(t,e,n){var r=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2),o=Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2),a=Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2),s=0;a*o!=0&&(s=y(-1,(-r+a+o)/(2*Math.sqrt(a)*Math.sqrt(o)),1));var l=i(t,e,n),u=Math.acos(s);return l>0&&(u=-u),d(u)},l=function(t){return(t%=360)<0&&(t+=360),t},u=function(t,e){return t.x*e.x+t.y*e.y},c=function(t,e,n){var r=new o.a(n.x-e.x,n.y-e.y),i=new o.a(t.x-e.x,t.y-e.y),a=u(i,r);if(a<=0)return h(t,e);var s=u(r,r);if(s<a)return h(t,n);var l=a/s,c=new o.a(e.x+r.x*l,e.y+r.y*l);return h(t,c)},h=function(t,e){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)},p=function(t,e,n,r,o){function i(t,e,n,r){var o=Math.pow(e-r,2),i=Math.pow(t-n,2);return Math.sqrt(o*i/(i+o))}if(t.x==e.x)return n*r;if(t.y==e.y)return n*o;var a=i(t.x,t.y,e.x,e.y);return n*i(t.x*r,t.y*o,e.x*r,e.y*o)/a},f=function(t){return Math.PI*t/180},d=function(t){return 180*t/Math.PI},y=function(t,e,n){return Math.max(t,Math.min(n,e))},g=function(t,e,n){return"number"==typeof t&&"number"==typeof e&&("number"!=typeof n&&(n=1e-4),0!=n?Math.abs(t-e)<=n:t==e)},m=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){for(var r=t[n],o=!1,i=0;i<e.length;i++)if(r.isEqual(e[i])){o=!0;break}if(!o)return!1}return!0}},400:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=new(function(){function t(){this.data={},this._typeDictionary={}}return t.prototype.getPropertyMetadata=function(t,e){var n=t.type;if(null==n)return null;if(null==this._typeDictionary[n]){this._typeDictionary[n]=[];for(var r=t;null!=r.constructor.type;)this._typeDictionary[n].push(r.constructor.type),r=Object.getPrototypeOf(r)}for(var o=0;o<this._typeDictionary[n].length;o++){var i=this._typeDictionary[n][o];if(null!=this.data[i]){var a=this.data[i][e];if(null!=a)return a}}return null},t}());function o(t){return function(e,n){var o=e.constructor.type;null==r.data[o]&&(r.data[o]={});var i=r.data[o];null==i[n]&&(i[n]={type:null!=t.enumObject?"enum":typeof e[n],displayName:null!=t&&null!=t.displayName?t.displayName:n,propertyFactory:t.factory,values:null!=t.enumObject?Object.keys(t.enumObject).map(function(e){return t.enumObject[e]}).filter(function(t){return"string"==typeof t}):null,ignore:null==t.ignore||t.ignore})}}},402:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(380),o=n(739),i=n(484),a=n(384),s=n(383),l=n(387),u=function(){function t(t,e){void 0===e&&(e=""),this._name="",this._propertyChanged=new a.c,this.id=null!=t?t:(new i.a).toString(),this.name=e,null==this._tags&&(this._tags={})}return Object.defineProperty(t.prototype,"version",{get:function(){return o.a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name!==t&&(this._name=t,this._propertyChanged.notify(this,"name"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tags",{get:function(){return this._tags},set:function(t){if(null==t)throw new r.a("value is null!");this._tags=t},enumerable:!0,configurable:!0}),t.prototype._copy=function(t,e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),e.name=t.name,n?e.generateNewIds():e.id=t.id,null!=this.tags)for(var o in e.tags={},t.tags)e.tags[o]=l.clone(t.tags[o])},t.prototype.getSimplifiedObject=function(t){var e=s.q(this,t);return e.tags=this.tags,e.id=this.id.toString(),e},t.prototype.generateNewIds=function(){this._generateNewId()},t.prototype._generateNewId=function(){this.id=(new i.a).toString()},t.prototype.toString=function(){return this.name},t.prototype.addPropertyChanged=function(t){this._propertyChanged.add(t)},t.prototype.removePropertyChanged=function(t){this._propertyChanged.remove(t)},t.prototype.equals=function(t){return this.name===t.name&&this.version===t.version},t}()},403:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(408),o=n(398),i=n(461),a=n(380),s=n(387),l=n(384),u=function(){function t(t,e,n,r){this._propertyChanged=new l.c,this._left="number"==typeof t?t:0,this._top="number"==typeof e?e:0,this._width="number"==typeof n?n:2,this._height="number"==typeof r?r:2,this._id=Math.random().toString()}return t.prototype.toJSON=function(){return{left:this.left,top:this.top,width:this.width,height:this.height,id:this._id}},Object.defineProperty(t.prototype,"left",{get:function(){return this._left},set:function(e){Object(o.e)(e,this._left,t._tolerance)||(this._left=e,this._propertyChanged.notify(this,"left"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._top},set:function(e){Object(o.e)(e,this._top,t._tolerance)||(this._top=e,this._propertyChanged.notify(this,"top"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){Object(o.e)(e,this._width,t._tolerance)||(this._width=e,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){Object(o.e)(e,this._height,t._tolerance)||(this._height=e,this._propertyChanged.notify(this,"height"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.FromLTRB=function(e,n,r,o){return new t(e,n,r-e,o-n)},t.FromObject=function(e){return new t(e.left,e.top,e.width,e.height)},t.intersect=function(e,n){var r=Math.max(e.left,n.left),o=Math.min(e.right,n.right),i=Math.max(e.top,n.top),a=Math.min(e.bottom,n.bottom);return o>=r&&a>=i?new t(r,i,o-r,a-i):t.empty},t.union=function(e,n){var r=Math.min(e.left,n.left),o=Math.max(e.left+e.width,n.left+n.width),i=Math.min(e.top,n.top);return new t(r,i,o-r,Math.max(e.top+e.height,n.top+n.height)-i)},Object.defineProperty(t,"empty",{get:function(){return new t(0,0,-1,-1)},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return t.isEqual(this,e)},t.isEqual=function(t,e,n){return void 0===n&&(n=1e-4),null==t&&null==e||null!=t&&null!=e&&(Object(o.e)(t.left,e.left,n)&&Object(o.e)(t.top,e.top,n)&&Object(o.e)(t.width,e.width,n)&&Object(o.e)(t.height,e.height,n))},t.prototype.contains=function(t,e,n){if(null==e&&(e=!1),e){"number"!=typeof n&&(n=1e-4);var r=this.left,i=this.top,a=this.left+this.width,s=this.top+this.height;return(t.x>r||Object(o.e)(t.x,r,n))&&(t.y>i||Object(o.e)(t.y,i,n))&&(t.x<a||Object(o.e)(t.x,a,n))&&(t.y<s||Object(o.e)(t.y,s,n))}return t.x>this.left&&t.y>this.top&&t.x<this.left+this.width&&t.y<this.top+this.height},t.prototype.containsRectangle=function(t){var e=new r.a(t.left,t.top),n=new r.a(t.right,t.bottom);return this.contains(e,!0)&&this.contains(n,!0)},t.prototype.clone=function(){return new t(this.left,this.top,this.width,this.height)},t.prototype.isEmpty=function(){return this.width<=0||this.height<=0},t.prototype.inflate=function(t){this.left-=t,this.top-=t,this.width+=2*t,this.height+=2*t},t.prototype.intersectsWith=function(t){return t.left<this.right&&this.left<t.right&&t.top<this.bottom&&this.top<t.bottom},t.prototype.updateByMatrix=function(t){if(0!==t.angle)throw new a.a("RectangleF cannot be transformed by angle!");var e=new r.a(this.left,this.top),n=new r.a(this.right,this.bottom),o=t.transformPoint(e),i=t.transformPoint(n);return this.left=o.x,this.top=o.y,this.right=i.x,this.bottom=i.y,this},t.prototype.getShrinked=function(e){return t.FromLTRB(this.left-e.left,this.top-e.top,this.right+e.right,this.bottom+e.bottom)},t.prototype.toString=function(){return[this.left,this.top,this.width,this.height].join(",")},t.fromString=function(e){var n=e.replace(", ",",").split(",");return new t(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]))},t.getMatrix=function(t,e){var n=new i.a,r=t.center,o=e.center;return n.scaleRelativeToPoint(e.width/t.width,e.height/t.height,r),n.translate((o.x-r.x)/n.scaleX,(o.y-r.y)/n.scaleY),n},t.getOverallBounds=function(e){return s.isEmpty(e)?t.empty:e.reduce(function(e,n){return null==e?n.clone():t.union(e,n)})},Object.defineProperty(t.prototype,"right",{get:function(){return this.left+this.width},set:function(t){this.width=t-this.left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.top+this.height},set:function(t){this.height=t-this.top},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return new r.a(this.left+this.width/2,this.top+this.height/2)},enumerable:!0,configurable:!0}),t.prototype.addPropertyChanged=function(t){this._propertyChanged.add(t)},t.prototype.removePropertyChanged=function(t){this._propertyChanged.remove(t)},t._tolerance=1e-6,t}()},404:function(t,e,n){"use strict";n.r(e),n.d(e,"RenderingType",function(){return r.a}),n.d(e,"Container",function(){return o.a}),n.d(e,"MockupContainer",function(){return o.b}),n.d(e,"SurfaceContainer",function(){return o.d}),n.d(e,"SpotColorContainer",function(){return o.c}),n.d(e,"TextureContainer",function(){return o.e}),n.d(e,"CropMark",function(){return i.a}),n.d(e,"CropMarkTextAlignment",function(){return i.c}),n.d(e,"CropMarkText",function(){return i.b}),n.d(e,"ModelComponent",function(){return a.a}),n.d(e,"PrintArea",function(){return s.a}),n.d(e,"Product",function(){return l.a}),n.d(e,"PdfBox",function(){return u.a}),n.d(e,"SafetyLine",function(){return u.b}),n.d(e,"Surface",function(){return c.a}),n.d(e,"SurfaceMockup",function(){return h.a}),n.d(e,"Uuid",function(){return p.a}),n.d(e,"Watermark",function(){return f}),n.d(e,"ItemMask",function(){return d.a});var r=n(462),o=n(413),i=n(553),a=n(402),s=n(554),l=n(556),u=n(478),c=n(471),h=n(497),p=n(484),f=function(){function t(){}return t.prototype.clone=function(){var e=new t;return e.storageId=this.storageId,e.width=this.width,e.height=this.height,e},t}(),d=n(560)},407:function(t,e,n){"use strict";n.d(e,"a",function(){return x});var r,o=n(482),i=n(386),a=n(444),s=n(445),l=n(545),u=n(380),c=n(383),h=n(387),p=n(381),f=n(446),d=n(384),y=n(393),g=n(400),m=n(443),_=n(402),v=n(743),b=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},C=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},P=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x=function(t){function e(n,r,o){var a=t.call(this)||this;a._text="",a._originalText="",a._underline=!1,a._color=new i.RgbColor("rgb(0,0,0)"),a._alignment=f.e.Left,a._tracking=0,a._leading=0,a._checkTextCrop=!0,a._overlapLinesEnabled=!1,a._verticalScale=1,a._horizontalScale=1,a._stroke=null,a._shadow=null,a._previewScale=1,a._placeholders=new y.a,a._displayText=null,a._colorPalette=new y.a,a._baselineShift=0,a._overprintText=!1,a.values=[],a._maxLineLength=null,a._maxLineCount=null,a.isTextPlaceholder=!1,a.textColorForAbnormalRendering=new i.RgbColor("rgb(0,0,0)"),a.type=e.type,a._onFontPropertyChanged=function(t,e){a._propertyChanged.notify(a,"font")},a._onShadowPropertyChanged=function(t,e){a._propertyChanged.notify(a,"shadow")},a._onStrokePropertyChanged=function(t,e){a._propertyChanged.notify(a,"stroke")},a.borderWidth=0,a.fillColor=new i.RgbColor("rgba(0, 0, 0, 0)"),a.text=null!=n?n:"",a._font=new e.FontSettings(r,null!=o?o:10),a._subscribeFontPropertyChanged(),a.textPermissions=new l.a,a._setViolationSettings(new v.a,!0);var s=function(){a._displayText=null,a._propertyChanged.notify(a,"text")};return a._placeholders.add_itemAdded(function(t){return t.item.addPropertyChanged(s)}),a._placeholders.add_itemRemoved(function(t){return t.item.removePropertyChanged(s)}),a._ignorePermissionsChange=!0,a.itemPermissions.allowRemoveOnLayoutChange=!0,a.itemPermissions.itemToolbarPermissions.showEditButton=!0,a._ignorePermissionsChange=!1,a}return b(e,t),Object.defineProperty(e.prototype,"maxLineCount",{get:function(){return this._maxLineCount},set:function(t){this._maxLineCount!==t&&(this._maxLineCount=t,this._displayText=null,this._propertyChanged.notify(this,"maxLineCount"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLineLength",{get:function(){return this._maxLineLength},set:function(t){this._maxLineLength!==t&&(this._maxLineLength=t,this._displayText=null,this._propertyChanged.notify(this,"maxLineLength"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewScale",{get:function(){return this._previewScale},set:function(t){p.EqualsOfFloatNumbers(this._previewScale,t)||(this._previewScale=t,this._propertyChanged.notify(this,"previewScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){a.b.equals(this._stroke,t)||(this._unsubscribeStrokePropertyChanged(),this._stroke=t,this._subscribeStrokePropertyChanged(),this._propertyChanged.notify(this,"stroke"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadow",{get:function(){return this._shadow},set:function(t){null==this._shadow&&null==t||null!=t&&t.equals(this._shadow)||(this._unsubscribeShadowPropertyChanged(),this._shadow=t,this._subscribeShadowPropertyChanged(),this._propertyChanged.notify(this,"shadow"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalScale",{get:function(){return this._horizontalScale},set:function(t){p.EqualsOfFloatNumbers(this._horizontalScale,t)||(this._horizontalScale=t,this._propertyChanged.notify(this,"horizontalScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalScale",{get:function(){return this._verticalScale},set:function(t){p.EqualsOfFloatNumbers(this._verticalScale,t)||(this._verticalScale=t,this._propertyChanged.notify(this,"verticalScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkTextCrop",{get:function(){return this._checkTextCrop},set:function(t){this._checkTextCrop!==t&&(this._checkTextCrop=t,this._propertyChanged.notify(this,"checkTextCrop"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlapLinesEnabled",{get:function(){return this._overlapLinesEnabled},set:function(t){this._overlapLinesEnabled!==t&&(this._overlapLinesEnabled=t,this._propertyChanged.notify(this,"overlapLinesEnabled"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this._alignment},set:function(t){this._alignment!==t&&(this._alignment=t,this._propertyChanged.notify(this,"alignment"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tracking",{get:function(){return this._tracking},set:function(t){p.EqualsOfFloatNumbers(this._tracking,t)||(this._tracking=t,this._propertyChanged.notify(this,"tracking"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(t){p.EqualsOfFloatNumbers(this._leading,t)||(this._leading=t,this._propertyChanged.notify(this,"leading"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalText",{get:function(){return null!=this._originalText?this._originalText:""},set:function(t){this._originalText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"underline",{get:function(){return this._underline},set:function(t){this._underline!==t&&(this._underline=t,this._propertyChanged.notify(this,"underline"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(t){e.FontSettings.equals(this._font,t)||(this._unsubscribeFontPropertyChanged(),this._font=t,this._subscribeFontPropertyChanged(),this._propertyChanged.notify(this,"font"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return null==this._displayText&&(this._displayText=this.getUpdatedText(this._text)),this._text=this._displayText,this._text},set:function(t){this._text!==t&&(this._text=t,this._displayText=null,this._propertyChanged.notify(this,"text"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){i.Color.equals(this._color,t)||(this._color=t,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselineShift",{get:function(){return this._baselineShift},set:function(t){p.EqualsOfFloatNumbers(this._baselineShift,t)||(this._baselineShift=t,this._propertyChanged.notify(this,"baselineShift"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overprintText",{get:function(){return this._overprintText},set:function(t){t!=this._overprintText&&(this._overprintText=t,this._propertyChanged.notify(this,"overprintText"))},enumerable:!0,configurable:!0}),e.prototype.getUpdatedText=function(t){var e,n,r=t;this.placeholders.length>0&&(r=this._replaceInStringPlaceholders());var o=null!==(e=this._maxLineCount)&&void 0!==e?e:0,i=null!==(n=this._maxLineLength)&&void 0!==n?n:0;if(o>0||i>0){c.m(r)&&(r=c.k(t,"\n"));var a=r.split("\n");if(o>0&&a.length>o&&(a=a.splice(0,o)),i>0)for(var s=0;s<a.length;s++)a[s].length>i&&(a[s]=a[s].substr(0,i));return a.join("\n")}return r},Object.defineProperty(e.prototype,"placeholders",{get:function(){return this._placeholders},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorPalette",{get:function(){return this._colorPalette},enumerable:!0,configurable:!0}),e.prototype._canSetIsVariable=function(){return!0},Object.defineProperty(e.prototype,"previewFontSize",{get:function(){return this.font.size*this.previewScale},set:function(t){this.font.size=t/this.previewScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewLeading",{get:function(){return this.leading*this.previewScale},set:function(t){this.leading=t/this.previewScale},enumerable:!0,configurable:!0}),e.prototype.applyPermissionsConstrain=function(){t.prototype.applyPermissionsConstrain.call(this),this.itemPermissions.itemToolbarPermissions.showSelectButton=!1,null==this.textPermissions||this.textPermissions.allowChangeText?this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=null:this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=!1,this.isRenderTypeIsNormal||(this.textPermissions.allowChangeFontColor=!1,this.textPermissions.allowChangeShadow=!1,this.textPermissions.allowChangeStroke=!1)},Object.defineProperty(e.prototype,"textPermissions",{get:function(){return this._textPermissions},set:function(t){if(null==t)throw new u.a("textPermissions cannot be null");Object(c.h)(this._textPermissions,t)||(null!=this._textPermissions&&this._textPermissions.propertyChanged.remove(this._onPermissionsChanged),this._textPermissions=t,this.applyPermissionsConstrain(),this._textPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"textPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(t){this._setViolationSettings(t)},enumerable:!0,configurable:!0}),e.prototype._setViolationSettings=function(e,n){if(void 0===n&&(n=!1),!(n||e instanceof v.a))throw new u.a("Shape ViolationSettings property must has TextViolationSettings type!");t.prototype._setViolationSettings.call(this,e,n)},e.prototype._subscribeFontPropertyChanged=function(){null!=this._font&&this._font.addPropertyChanged(this._onFontPropertyChanged)},e.prototype._unsubscribeFontPropertyChanged=function(){null!=this._font&&this._font.removePropertyChanged(this._onFontPropertyChanged)},e.prototype._subscribeShadowPropertyChanged=function(){null!=this._shadow&&this._shadow.addPropertyChanged(this._onShadowPropertyChanged)},e.prototype._unsubscribeShadowPropertyChanged=function(){null!=this._shadow&&this._shadow.removePropertyChanged(this._onShadowPropertyChanged)},e.prototype._subscribeStrokePropertyChanged=function(){null!=this._stroke&&this._stroke.addPropertyChanged(this._onStrokePropertyChanged)},e.prototype._unsubscribeStrokePropertyChanged=function(){null!=this._stroke&&this._stroke.removePropertyChanged(this._onStrokePropertyChanged)},e.prototype.getSimplifiedObject=function(e){var n=t.prototype.getSimplifiedObject.call(this,["_placeholders","currentTextImage","textPermissions","textForTextWhizz","shadow","stroke"].concat(e));return n.placeholders=this.placeholders.toArray(),n.textPermissions=this.textPermissions.getSimplifiedObject(),n.font=this.font.getSimplifiedObject(),n.shadow=null!=this.shadow?this.shadow.getSimplifiedObject():null,n.stroke=null!=this.stroke?this.stroke.getSimplifiedObject():null,n},e.prototype._replaceInStringPlaceholders=function(){return c.m(this.originalText)?this._replaceInStringPlaceholdersValueInRichText():this._replaceInStringPlaceholdersValueInPlainText()},e.prototype._replaceInStringPlaceholdersValueInPlainText=function(){var t=this.originalText;return this.placeholders.forEach(function(e){t=t.replace(e.id,e.value)}),t},e.prototype._replaceInStringPlaceholdersValueInRichText=function(){if(null==this._originalTextDom){var t=new DOMParser;this._originalTextDom=t.parseFromString("<xml>"+this.originalText+"</xml>","text/xml")}var e=this._originalTextDom.cloneNode(!0),n=e.getElementsByTagName("span");this.placeholders.forEach(function(t){if(null!=n&&n.length)for(var e=0;e<n.length;e++){var r=n[e];null!=r.textContent&&(r.textContent=r.textContent.replace(t.id,t.value))}});var r=(new XMLSerializer).serializeToString(e);return r.substr(0,r.length-6).substr(5)},e.prototype._copy=function(e,n,r,o){var i,a;if(t.prototype._copy.call(this,e,n,r,o),n.textPermissions=e._textPermissions.clone(),n.placeholders.setRange(e.placeholders.toArray().map(function(t){return t.clone()})),n.color=e._color.clone(),n.text=e._text,n.font=e._font.clone(),n.underline=e._underline,n.originalText=e._originalText,n.leading=e._leading,n.tracking=e._tracking,n.alignment=e._alignment,n.checkTextCrop=e._checkTextCrop,n.verticalScale=e._verticalScale,n.horizontalScale=e._horizontalScale,n.shadow=null!=e._shadow?e._shadow.clone():null,n.stroke=null!=e._stroke?e._stroke.clone():null,n.previewScale=e._previewScale,n._maxLineCount=e._maxLineCount,n.isTextPlaceholder=e.isTextPlaceholder,n.maxLineLength=e.maxLineLength,n.overlapLinesEnabled=e.overlapLinesEnabled,n.colorPalette.setRange(e.colorPalette.toArray().map(function(t){return t.clone()})),n.baselineShift=e.baselineShift,n.overprintText=e.overprintText,null!=e.values){n.values=[];try{for(var s=P(e.values),l=s.next();!l.done;l=s.next()){var u=l.value;n.values.push(u.clone())}}catch(t){i={error:t}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}}},e.prototype.equals=function(e){var n=t.prototype.equals.call(this,e),r=Object(c.h)(this._textPermissions,e._textPermissions),o=Object(c.c)(this._placeholders.toArray(),e._placeholders.toArray()),i=Object(c.h)(this._color,e._color),a=Object(c.h)(this._text,e._text),s=Object(c.h)(this._font,e._font),l=Object(c.h)(this._underline,e._underline),u=Object(c.h)(this._originalText,e._originalText),h=Object(c.h)(this._leading,e._leading),p=Object(c.h)(this._tracking,e._tracking),f=Object(c.h)(this._alignment,e._alignment),d=Object(c.h)(this._checkTextCrop,e._checkTextCrop),y=Object(c.h)(this._verticalScale,e._verticalScale),g=Object(c.h)(this._previewScale,e._previewScale),m=Object(c.h)(this._maxLineCount,e._maxLineCount),_=Object(c.h)(this.isTextPlaceholder,e.isTextPlaceholder),v=Object(c.h)(this._maxLineLength,e._maxLineLength),b=Object(c.h)(this._overlapLinesEnabled,e._overlapLinesEnabled),w=Object(c.h)(this._stroke,e._stroke),C=Object(c.c)(this.values,e.values),P=Object(c.c)(this._colorPalette.toArray(),e._colorPalette.toArray()),x=Object(c.h)(this._baselineShift,e._baselineShift),O=Object(c.h)(this._overprintText,e._overprintText);return n&&r&&o&&i&&a&&s&&l&&u&&h&&p&&f&&d&&y&&g&&m&&_&&v&&b&&w&&C&&P&&x&&O},e.prototype.isEmptyText=function(){return""===this.text},e.prototype.isEmptyXmlText=function(){return"<p></p>"===this.text||"<p><span></span></p>"===this.text},e.prototype.isEmpty=function(){return!this.isTextPlaceholder&&(this.isEmptyText()||this.isEmptyXmlText())},e.type="baseText",w([Object(g.a)({factory:new m.c(1),displayName:"Max line count"}),C("design:type",Number),C("design:paramtypes",[Number])],e.prototype,"maxLineCount",null),w([Object(g.a)({factory:new m.c(50),displayName:"Max line length"}),C("design:type",Number),C("design:paramtypes",[Number])],e.prototype,"maxLineLength",null),w([Object(g.a)({factory:new m.b(a.b),displayName:"Stroke"}),C("design:type",a.b),C("design:paramtypes",[a.b])],e.prototype,"stroke",null),w([Object(g.a)({factory:new m.b(s.a),displayName:"Shadow"}),C("design:type",s.a),C("design:paramtypes",[s.a])],e.prototype,"shadow",null),w([Object(g.a)({enumObject:f.e}),C("design:type",Number),C("design:paramtypes",[Number])],e.prototype,"alignment",null),e}(o.a);!function(t){var e=function(t){function e(e,n){void 0===n&&(n=10);var r=t.call(this)||this;return r._fauxBold=!1,r._fauxItalic=!1,r._allCaps=!1,r._openTypeFeatures=[],r.$_propertyChanged=new d.c,r._postScriptName=e,r._size=n,r}return b(e,t),e.prototype.clone=function(){var t=new e(this._postScriptName,this._size);return t._openTypeFeatures=h.clone(this._openTypeFeatures),t.allCaps=this._allCaps,t.fauxItalic=this._fauxItalic,t.fauxBold=this._fauxBold,t},Object.defineProperty(e.prototype,"fauxBold",{get:function(){return this._fauxBold},set:function(t){this._fauxBold!==t&&(this._fauxBold=t,this.$_propertyChanged.notify(this,"fauxBold"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fauxItalic",{get:function(){return this._fauxItalic},set:function(t){this._fauxItalic!==t&&(this._fauxItalic=t,this.$_propertyChanged.notify(this,"fauxItalic"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allCaps",{get:function(){return this._allCaps},set:function(t){this._allCaps!==t&&(this._allCaps=t,this.$_propertyChanged.notify(this,"allCaps"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openTypeFeatures",{get:function(){return this._openTypeFeatures},set:function(t){this._openTypeFeatures!==t&&(this._openTypeFeatures=t,this.$_propertyChanged.notify(this,"openTypeFeatures"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"postScriptName",{get:function(){return this._postScriptName},set:function(t){this._postScriptName!==t&&(this._postScriptName=t,this.$_propertyChanged.notify(this,"postScriptName"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){p.EqualsOfFloatNumbers(this._size,t)||(this._size=t,this.$_propertyChanged.notify(this,"size"))},enumerable:!0,configurable:!0}),e.prototype.addPropertyChanged=function(t){this.$_propertyChanged.add(t)},e.prototype.removePropertyChanged=function(t){this.$_propertyChanged.remove(t)},e.equals=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.equals(e)},e.prototype.equals=function(t){return this.postScriptName===t.postScriptName&&this.size===t.size&&this.fauxBold===t.fauxBold&&this.fauxItalic===t.fauxItalic&&this.allCaps===t.allCaps&&h.isEqual(this.openTypeFeatures,t.openTypeFeatures)},e.prototype.getSimplifiedObject=function(){return{allCaps:this.allCaps,fauxBold:this.fauxBold,fauxItalic:this.fauxItalic,openTypeFeatures:this.openTypeFeatures,postScriptName:this.postScriptName,size:this.size}},e}(_.a);t.FontSettings=e;var n=function(){function t(t,e){this.name=t,this.text=e}return t.prototype.equals=function(t){return null!=t&&Object(c.h)(this.name,t.name)&&Object(c.h)(this.text,t.text)},t.prototype.clone=function(){return new t(this.name,this.text)},t}();t.BaseTextValue=n}(x||(x={}))},408:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(398),o=function(){function t(t,e){this.x=0,this.y=0,this.x=t||0,this.y=e||0}return t.prototype.rotate=function(e){return this.rotateAt(e,new t(0,0))},t.prototype.rotateAt=function(e,n){n||(n=new t(0,0));var o=Object(r.c)(e),i=Math.cos(o)*(this.x-n.x)-Math.sin(o)*(this.y-n.y)+n.x,a=Math.sin(o)*(this.x-n.x)+Math.cos(o)*(this.y-n.y)+n.y;return this.x=i,this.y=a,this},t.prototype.translate=function(t,e){return this.x=this.x+t,this.y=this.y+e,this},t.prototype.scale=function(t,e){return this.x=this.x*t,this.y=this.y*e,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.equals=function(t,e){return null!=t&&Object(r.e)(this.x,t.x,e)&&Object(r.e)(this.y,t.y,e)},t.isEqual=function(t,e,n){return void 0===n&&(n=1e-4),null==t&&null==e||null!=t&&null!=e&&t.equals(e)},t.prototype.distance=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},t.prototype.transform=function(e,n){return null==n&&(n=new t),this.translate(-n.x,-n.y),this.scale(e.scaleX,e.scaleY),this.rotate(e.angle),this.translate(e.translateX,e.translateY),this.translate(n.x,n.y),this},t.prototype.toString=function(){return[this.x,this.y].join(",")},t.prototype.toIPoint=function(){return{x:this.x,y:this.y}},t.fromIPoint=function(e){return new t(e.x,e.y)},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.isOrigin=function(){return 0===this.x&&0===this.y},t}()},409:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a});var r,o,i,a,s=n(404),l=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},u=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},h=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t};!function(t){var e;t.round3=function(t){return Math.round(1e3*t)/1e3},t.createBoundedWrapper=function(t,e,n){return null==n?e.bind(t):Function.prototype.bind.apply(e,[t].concat(n))},t.cursorToCss=function(t){var n=e;return void 0==n&&(e=n=["default","nw-resize","ne-resize","sw-resize","se-resize","n-resize","s-resize","w-resize","e-resize","move","crosshair","pointer","ew-resize","ns-resize","nesw-resize","nwse-resize","text"]),n[t]},t.makeSingle=function(t){var e;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return l(this,void 0,void 0,function(){var r,o,i,a;return u(this,function(s){switch(s.label){case 0:r=e=new Object,o=t.apply(void 0,h(n)),s.label=1;case 1:return(a=o.next(i)).done?[2,a.value]:[4,a.value];case 2:if(i=s.sent(),r!==e)return[2];s.label=3;case 3:return[3,1];case 4:return[2]}})})}},t.makeCancelable=function(t){var e=!1;return{promise:new Promise(function(n,r){t.then(function(t){return e?r({isCanceled:!0}):n(t)}),t.catch(function(t){return r(e?{isCanceled:!0}:t)})}),id:(new s.Uuid).toString(),cancel:function(){e=!0}}},t.getEventPath=function(t){if(null==t.view||!(t instanceof t.view.UIEvent))throw new Error("Unexpected event type");if(null!=t.path)return(Array.isArray(t.path)?t.path:Array.prototype.slice.call(t.path)).filter(function(t){return t instanceof Element});var e=[],n=t.target;n instanceof t.view.Element||null==console||console.log("unexpected event target",n);do{e.push(n),n=n.parentElement}while(null!=n&&n!==t.currentTarget);return e},t.isEventPathContainsClass=function(e,n){var r;if(e instanceof UIEvent)r=e;else{if(!(e.originalEvent instanceof UIEvent))throw new Error("Unexpected event type");r=e.originalEvent}return!!t.getEventPath(r).some(function(t){return t.classList.contains(n)})}}(r||(r={})),function(t){t[t.defaultCursor=0]="defaultCursor",t[t.sizeNW=1]="sizeNW",t[t.sizeNE=2]="sizeNE",t[t.sizeSW=3]="sizeSW",t[t.sizeSE=4]="sizeSE",t[t.sizeN=5]="sizeN",t[t.sizeS=6]="sizeS",t[t.sizeW=7]="sizeW",t[t.sizeE=8]="sizeE",t[t.move=9]="move",t[t.cross=10]="cross",t[t.pointer=11]="pointer",t[t.sizeEW=12]="sizeEW",t[t.sizeNS=13]="sizeNS",t[t.sizeNESW=14]="sizeNESW",t[t.sizeNWSE=15]="sizeNWSE",t[t.text=16]="text"}(o||(o={})),function(t){t[t.rgb=16777216]="rgb",t[t.cmyk=335544320]="cmyk",t[t.grayScale=301989888]="grayScale",t[t.unknown=0]="unknown"}(i||(i={})),function(t){t[t.Item=0]="Item",t[t.Color=1]="Color"}(a||(a={}))},410:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r,o=n(423),i=n(381),a=n(472),s=n(561),l=n(392),u=n(386),c=n(384),h=n(565),p=n(382),f=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t){function e(n,r){void 0===r&&(r=null);var o=t.call(this,e._getItemPath(n),n,r)||this;return o._content=null,o._topFrames=[],o._bottomFrames=[],o._editing=!1,o._showMaskedContent=!0,o._isContentUpdating=!1,o._previousRectangle=null,o._placeholderButtonGroup=null,o._editButtonGroup=null,o._doneButtonGroup=null,o._selectButton=null,o._doneButton=null,o._handleButton=null,o._qualityChangeContainer=null,o._qualityChangeScaleBar=null,o._qualityChangeInfoBar=null,o._forceQualityChangeInfoBar=!1,o._emptyPlaceholderBorderColor=new u.RgbColor({r:204,g:204,b:204}),o._emptyPlaceholderBorderWidth=1,o._selectButtonClickEvent=new c.c,o._selectButtonClickHandler=o._onSelectButtonClick.bind(o),o}return f(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e._getItemPath=function(t){return null==t?null:null!=t.sourcePath?t.sourcePath:null!=t.sourceRectangle?i.Path.rectangle(t.sourceRectangle.left,t.sourceRectangle.top,t.sourceRectangle.width,t.sourceRectangle.height):null},e.prototype._onItemPropertyChanged=function(e,n){var r,o=this;switch(n){case"content":this.content=null!=e.content&&null!=this.canvas?this.canvas.handlerFactory.get(e.content):null,this.update();break;case"topFrames":null!=this.canvas&&(this.topFrames=e.topFrames.map(function(t){return o.canvas.handlerFactory.get(t)})),this.update();break;case"bottomFrames":null!=this.canvas&&(this.bottomFrames=e.bottomFrames.map(function(t){return o.canvas.handlerFactory.get(t)})),this.update();break;case"locked":null===(r=this.canvas)||void 0===r||r.updatePlaceholderButtonGroup(this);break;case"isStubContent":this._reloadPlaceholderButtons();break;case"isCoverMode":null!=this._content&&this.item.isCoverMode&&this._content.setRectangle(this._content.rectangle);break;case"contentOverlayEffect":this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._onItemVisibilityChanged=function(){var e;t.prototype._onItemVisibilityChanged.call(this),null===(e=this.canvas)||void 0===e||e.updatePlaceholderButtonGroup(this)},e.prototype._setVisible=function(e){if(this.visible!==e){t.prototype._setVisible.call(this,e),null!=this._content&&(this._content.visible=e);var n=this.canvas;null!=n&&n.updatePlaceholderButtonGroup(this)}},e.prototype.quickUpdate=function(){this.isVisible()&&this.update(),null!=this.canvas&&this.canvas.updatePlaceholderButtonGroup(this)},Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){var e=this.canvas;if(null==e||this.isStubOrEmpty()||e.removeViolationContainer(this._content),this._content=t,null!=this._content&&(this._content.layer=this.layer,this._content.parentPlaceholder=this,this._content.contentType=a.a.PlaceholderContent),null!=e){if(this._reloadPlaceholderButtons(),null==this._content)return;this._content.canvas=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topFrames",{get:function(){return this._topFrames},set:function(t){var e=this;this._topFrames=t,this._updateTopFrames(function(t){t.contentType=a.a.TopFrame,t.layer=e.layer,t.parentPlaceholder=e,t.canvas=e.canvas})},enumerable:!0,configurable:!0}),e.prototype.getTopFrame=function(t){return null!=this._topFrames?this._topFrames[t]:null},e.prototype.setTopFrame=function(t,e){e._contentType=a.a.TopFrame,e._layer=this.layer,e._parentPlaceholder=this,e.canvas=this.canvas,this._topFrames[t]=e},Object.defineProperty(e.prototype,"bottomFrames",{get:function(){return this._bottomFrames},set:function(t){var e=this;this._bottomFrames=t,this._updateBottomFrames(function(t){t.contentType=a.a.BottomFrame,t.layer=e.layer,t.parentPlaceholder=e,t.canvas=e.canvas})},enumerable:!0,configurable:!0}),e.prototype.getBottomFrame=function(t){return null!=this._bottomFrames?this._bottomFrames[t]:null},e.prototype.setBottomFrame=function(t,e){e._contentType=a.a.BottomFrame,e._layer=this.layer,e._parentPlaceholder=this,e.canvas=this.canvas,this._bottomFrames[t]=e},e.prototype.isEmptyContent=function(){return null==this._content},e.prototype._reloadPlaceholderButtons=function(){var t=this.canvas;null!=t&&(t.removePlaceholderButtonGroup(this),t.addPlaceholderButtonGroup(this),this.isStubOrEmpty()?t.removeViolationContainer(this._content):t.addViolationContainer(this._content))},e.prototype.isStubOrEmpty=function(){return this.item.isStubContent||this.isEmptyContent()},Object.defineProperty(e.prototype,"editing",{get:function(){return!this.isStubOrEmpty()&&this._editing},set:function(t){if(this._editing!==t){if(t&&!this.getPermissions().allowEditContent&&this.isStubOrEmpty())return;this._editing=t,this.raiseChanged();var e=this.canvas;null!=e&&(e.updateSelection(),e.updatePlaceholderButtonGroup(this),e.updateFloatingItemToolbar(this),e.redraw())}},enumerable:!0,configurable:!0}),e.prototype.isCoverMode=function(){return this.item.isCoverMode},e.prototype._createItemHandlerPermissions=function(){var e=t.prototype._createItemHandlerPermissions.call(this);return e.allowEditContent=this.item.placeholderPermissions.allowEditContent,e.showSelectButton=this.item.placeholderPermissions.showSelectButton,e.showHandleButton=this.item.placeholderPermissions.showHandleButton,e},e.prototype.showEditButton=function(){var e=t.prototype.showEditToolbarButton,n=!!this.isStubOrEmpty()||!this.item.imageContent.source.isVector;return e&&n},e.prototype.getPermissions=function(e){if(!this.editing||null!=e&&e)return t.prototype.getPermissions.call(this);if(!this.isEmptyContent()){var n=this._content.getPermissions().clone();return n.allowDelete=!1,n}return new s.a({},!1)},Object.defineProperty(e.prototype,"showMaskedContent",{get:function(){return this._showMaskedContent},set:function(t){this._showMaskedContent=t},enumerable:!0,configurable:!0}),e.prototype.setRectangle=function(e,n,r){!this.editing||r?t.prototype.setRectangle.call(this,e,n):this._content.setRectangle(e,n)},e.prototype._createDataInstance=function(t){return new h.a(t)},e.prototype.drawItemHandler=function(e){if(null!=e){var n=function(t){t.drawItemHandler(e)},r=this.editing&&this.showMaskedContent;r||this._updateBottomFrames(n);var o=l.a,a=this.originalPath,s=this.getControlCenter(),c=this.item.transform;if(this.isEmptyContent())t.prototype.drawItemHandler.call(this,e),Object(i.EqualsOfFloatNumbers)(0,this.item.borderWidth)&&o.drawPath(e,a,s,c,this._emptyPlaceholderBorderWidth,this._emptyPlaceholderBorderColor,1);else{r&&this._content._drawMaskedContent(e);var h=this.isNormalRenderingType?this.item.opacity:1;e.save();var p=null;null!=this.item.mask&&null!=this.item.mask.vectorMask?(p=this._getTransformedClippingPath(),a=this.item.mask.vectorMask):p=this._getTransformedPath(),null!=p&&o.clipPath(e,p),null!=a&&o.fillPath(e,a,s,c,this.item.fillColor.preview,h),this._content.drawItemHandler(e),this.canvas.dndHandler.isDragSource(this)&&(e.globalCompositeOperation="destination-out",o.fillRectangle(e,this.rectangle,new u.RgbColor({r:0,g:0,b:0}),.3),e.globalCompositeOperation="source-over"),e.restore(),o.drawPath(e,a,s,c,this._getActualBorderWidth(),this.item.borderColor.preview,h)}if(r){if(e.globalCompositeOperation="destination-over",null!=this._bottomFrames)for(var f=this._bottomFrames.length-1;f>=0;f--)n(this._bottomFrames[f]);e.globalCompositeOperation="source-over"}this.canvas.dndHandler.isDragTarget(this)&&this.isNormalRenderingType&&o.fillRectangle(e,this.rectangle,new u.RgbColor({r:0,g:0,b:0}),.5),this._updateTopFrames(n)}},e.prototype.getSelectionRectangle=function(){return this.editing?this._content.getSelectionRectangle():t.prototype.getSelectionRectangle.call(this)},e.prototype._getHighlightRectangle=function(){return this.editing?this.rectangle:t.prototype._getHighlightRectangle.call(this)},e.prototype.getBorderMargin=function(){return this.editing?this._content.getBorderMargin():t.prototype.getBorderMargin.call(this)},e.prototype.update=function(){this.updateColors(),this.updateContentAndFrames(function(t){t.update()}),null!=this.canvas&&this.canvas.updatePlaceholderButtonGroup(this)},e.prototype.addSelectButtonClick=function(t){this._selectButtonClickEvent.add(t)},e.prototype.removeSelectButtonClick=function(t){this._selectButtonClickEvent.remove(t)},e.prototype._onSelectButtonClick=function(){this._selectButtonClickEvent.notify(this)},e.prototype.getChangeContentButtonClickEvent=function(){return this._selectButtonClickEvent},e.prototype._onAddedOnCanvas=function(e){var n=this;t.prototype._onAddedOnCanvas.call(this,e),this.updateContentAndFrames(function(t){t.layer=n.layer,t.parentPlaceholder=n,t.canvas=e}),null!=e&&null==this.placeholderButtonGroup&&e.addPlaceholderButtonGroup(this),null!=this.content&&(this.content.canvas=e)},e.prototype._onRemovedFromCanvas=function(e){t.prototype._onRemovedFromCanvas.call(this,e),this.updateContentAndFrames(function(t){t._onRemovedFromCanvas(e)}),null!=e&&e.removePlaceholderButtonGroup(this)},e.prototype._transformRectangle=function(e,n){if(this._previousRectangle=this.rectangle,t.prototype._transformRectangle.call(this,e,n),!this.isEmptyContent()&&null!=this.content.startRectangle)if(this.item.isStubContent&&this.item.fixedStubContentSize&&!this.editing){var r=n.clone();r.Width=e.Width,r.Height=e.Height,this.content._transformRectangle(e,r)}else this.content._transformRectangle(e,n);this.editing||this._updateFrames(function(t){null!=t.startRectangle&&t._transformRectangle(e,n)}),this._previousRectangle=null;var o=this.canvas;null!=o&&o.updatePlaceholderButtonGroupPosition(this)},e.prototype._startTransform=function(){t.prototype._startTransform.call(this),this.editing&&(this._startRectangle=this._content.rectangle),this.updateContentAndFrames(function(t){t._startRectangle=t.rectangle})},e.prototype.endTransform=function(t,e){this._endTransform(t,e)},e.prototype._endTransform=function(t,e,n){void 0===n&&(n=!1),t&&(e||null!=this._startRectangle)&&(this.updateContentAndFrames(function(n){return n._endTransform(t,e,!0)}),n||this._itemPropertyChangedEvent.notify(this,"transform")),t&&e||(delete this._startRectangle,this.updateContentAndFrames(function(t){delete t._startRectangle})),null!=this.canvas&&this.canvas.updateFloatingItemToolbar(this),this.updateViolationContainerPosition()},e.prototype._transformChanged=function(){t.prototype._transformChanged.call(this);var e=this.canvas;null!=e&&e.updatePlaceholderButtonGroupPosition(this)},e.prototype._onResized=function(){return this.updateContentAndFrames(function(t){t._onResized()}),t.prototype._onResized.call(this)},e.prototype.showSelectButton=function(){return this.isStubOrEmpty()&&this.getPermissions().showSelectButton},e.prototype.showSelectToolbarButton=function(){return this._permissions.showSelectToolbarButton},e.prototype.showHandleButton=function(){return!this.isStubOrEmpty()&&this.getPermissions().allowEditContent&&this.getPermissions().showHandleButton&&!this._editing},e.prototype.onHandleButtonMouseDown=function(){this._isContentUpdating=!0,this.editing=!0},e.prototype.onPlaceholderButtonMouseUp=function(){this._isContentUpdating=!1,this.canvas.updatePlaceholderButtonGroup(this)},e.prototype.onDoneButtonClick=function(){var t=this.canvas;null!=t&&(t.setSelectedItemHandlers([this]),this.editing=!1)},e.prototype.setContentUpdating=function(t){this._isContentUpdating=t},e.prototype.isContentUpdating=function(){return this._isContentUpdating},e.prototype._updateFrames=function(t){this._updateTopFrames(t),this._updateBottomFrames(t)},e.prototype._updateTopFrames=function(t,e){if(null!=this._topFrames)for(var n=0;n<this._topFrames.length;n++)t(this._topFrames[n],null!=e?e[n]:null)},e.prototype._updateBottomFrames=function(t,e){if(null!=this._bottomFrames)for(var n=0;n<this._bottomFrames.length;n++)t(this._bottomFrames[n],null!=e?e[n]:null)},e.prototype._updateContent=function(t){this.isEmptyContent()||t(this._content)},e.prototype.updateContentAndFrames=function(t){this._updateContent(t),this._updateFrames(t)},e.prototype.getBoundsIncludingFrames=function(){var t=this.bounds;return this._updateFrames(function(e){t=i.RectangleF.union(t,e.bounds)}),t},e.prototype.getRectangleIncludingFrames=function(){var t=this.rectangle;return this._updateFrames(function(e){t=i.RotatedRectangleF.union(e.rectangle,t)}),t},Object.defineProperty(e.prototype,"qualityChangeScaleBar",{get:function(){return this._qualityChangeScaleBar},set:function(t){this._qualityChangeScaleBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityChangeInfoBar",{get:function(){return this._qualityChangeInfoBar},set:function(t){this._qualityChangeInfoBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityChangeContainer",{get:function(){return this._qualityChangeContainer},set:function(t){this._qualityChangeContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceQualityChangeInfoBar",{get:function(){return this._forceQualityChangeInfoBar},set:function(t){this._forceQualityChangeInfoBar=t;var e=this.canvas;null!=e&&e.updateViolationContainer(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholderButtonGroup",{get:function(){return this._placeholderButtonGroup},set:function(t){this._placeholderButtonGroup=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doneButtonGroup",{get:function(){return this._doneButtonGroup},set:function(t){this._doneButtonGroup=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectButton",{get:function(){return this._selectButton},set:function(t){this._selectButton=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doneButton",{get:function(){return this._doneButton},set:function(t){this._doneButton=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleButton",{get:function(){return this._handleButton},set:function(t){this._handleButton=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectButtonClickHandler",{get:function(){return this._selectButtonClickHandler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editButtonGroup",{get:function(){return this._editButtonGroup},set:function(t){this._editButtonGroup=t},enumerable:!0,configurable:!0}),e.prototype.setQualityChangeScaleBarWidth=function(t){null!=this._qualityChangeScaleBar&&(t=Math.max(0,t),t=Math.min(100,t),this._qualityChangeScaleBar.style.width=t+"%")},e.prototype.setQualityChangeInfoBarText=function(t){null!=this._qualityChangeInfoBar&&(this._qualityChangeInfoBar.innerText=t)},e.prototype.setBadToWarningChangeScaleBarClass=function(){var t=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=t){var e=this._qualityChangeScaleBar.getAttribute("class"),n=t.qualityBadToWarningChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=t.qualityWarningToGoodChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var o=t.qualityBadToGoodChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,!1);var i=t.qualityNoAnimationChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,this._qualityChangeScaleBar.getAttribute("class")!==e)}},e.prototype.setWarningToGoodChangeScaleBarClass=function(){var t=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=t){var e=this._qualityChangeScaleBar.getAttribute("class"),n=t.qualityWarningToGoodChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=t.qualityBadToWarningChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var o=t.qualityBadToGoodChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,!1);var i=t.qualityNoAnimationChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,this._qualityChangeScaleBar.getAttribute("class")!==e)}},e.prototype.setBadToGoodChangeScaleBarClass=function(){var t=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=t){var e=this._qualityChangeScaleBar.getAttribute("class"),n=t.qualityBadToGoodChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=t.qualityBadToWarningChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var o=t.qualityWarningToGoodChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,!1);var i=t.qualityNoAnimationChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,this._qualityChangeScaleBar.getAttribute("class")!==e)}},e.prototype.rotateContentLeft=function(){this._rotateContent(-90)},e.prototype.rotateContentRight=function(){this._rotateContent(90)},e.prototype._rotateContent=function(t){if(!this.isStubOrEmpty()){var e=this.content.getTransformedRectangle(!1);e.angle=Object(i.normalizeAngle)((e.angle+t)%360),this.content.setTransformedRectangle(e),this.canvas.redraw()}},e.prototype.getContentScale=function(){if(this.isStubOrEmpty())return null;var t=this.getTransformedRectangle(!1),e=this.content.getTransformedRectangle(!1),n=90===Object(i.normalizeAngle)(t.angle-e.angle)||270===Object(i.normalizeAngle)(t.angle-e.angle),r=n?e.height/t.width:e.width/t.width,o=n?e.width/t.height:e.height/t.height;return this.item.contentResizeMode===p.ResizeMode.Fit?100*Math.max(r,o):100*Math.min(r,o)},e.prototype.setContentScale=function(t){if(!this.isStubOrEmpty()){var e=this.content.getTransformedRectangle(!1),n=t/this.getContentScale();this.content.setTransformedRectangle(new i.RotatedRectangleF(e.centerX,e.centerY,e.width*n,e.height*n,e.angle)),this.content.item.getItemChangingEvent().notify(),this.canvas.redraw()}},e.prototype.resetContent=function(){if(!this.isStubOrEmpty()){var t=this.getTransformedRectangle(!1),e=this.content.getTransformedRectangle(!1),n=100/this.getContentScale(),r=90===Object(i.normalizeAngle)(t.angle-e.angle)||270===Object(i.normalizeAngle)(t.angle-e.angle),o=this.content.item,a=r?e.height/e.width:e.width/e.height,s=o.ratioWidthToHeight||o.sourceRectangle.width/o.sourceRectangle.height,l=a<s?n*(s/a):n,u=a>s?n*(a/s):n,c=r?e.height*l:e.width*l,h=r?e.width*u:e.height*u,f=this.item.contentResizeMode===p.ResizeMode.Fit?Math.min(t.width/c,t.height/h):Math.max(t.width/c,t.height/h);this.content.setTransformedRectangle(new i.RotatedRectangleF(t.centerX,t.centerY,c*f,h*f,t.angle)),this.content.item.getItemChangedEvent().notify(),this.canvas.redraw()}},e.prototype.transformByMatrix=function(t){this.setRectangle(this.rectangle.transformByMatrix(t),!1,!0),1===t.scaleX&&1===t.scaleY||this._onResized(),this._transformChanged(),null!=this.canvas&&this.canvas.updateSelection()},e.prototype.getSelectToolbarButtonClickEvent=function(){return this._selectButtonClickEvent},e.typeName="PlaceholderItemHandler",e}(o.a)},411:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return d});var r,o=n(386),i=n(382),a=n(448),s=n(502),l=n(473),u=n(392),c=n(503),h=n(383),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t){function e(e,n){void 0===n&&(n=null);var r=t.call(this,e,n)||this;return r._defaultWidth=10,r._currentTextImage=null,r._onCanvasChangedDelegate=null,r._updatedFromServer=!1,r._isUpdatingAfterResize=!1,r._height=0,r._updateTextsFunc=function(){null!=r.canvas&&r.canvas.updateTexts()},r._imageContainer=new l.a(r._onImageLoaded.bind(r)),r._allowNegativeResize=!1,r}return p(e,t),e.prototype._getSrc=function(){var t=this._imageContainer.source;return h.l(t)?this._createImageUrl():t},Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"text":case"font":this.update(null,this._updateTextsFunc);break;case"underline":case"color":case"alignment":case"leading":case"tracking":case"verticalScale":case"horizontalScale":case"previewScale":case"stroke":case"shadow":case"baselineShift":this.update();break;case"checkTextCrop":e.checkTextCrop&&this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n),this.item.text=e.text,this.item.font=e.font,this.item.leading=e.leading,this.item.color=e.color,this.item.stroke=e.stroke,this.item.shadow=e.shadow,this.item.verticalScale=e.verticalScale,this.item.horizontalScale=e.horizontalScale,this.item.previewScale=e.previewScale,this.item.mask=e.mask,this.item.baselineShift=e.baselineShift,this._updateVectorMaskCenter()},Object.defineProperty(e.prototype,"currentTextImage",{get:function(){return null!=this._currentTextImage?this._currentTextImage:this._currentTextImage=new d},set:function(t){this._currentTextImage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textCropped",{get:function(){return this.item.checkTextCrop?null!=this.currentTextImage&&this.currentTextImage.textCropped:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this._imageContainer.isLoaded},enumerable:!0,configurable:!0}),e.prototype._isLoadingImage=function(){return this._imageContainer.isLoading},e.prototype._setIsLoadingImage=function(t){this._imageContainer.isLoading=t},Object.defineProperty(e.prototype,"isUpdatingAfterResize",{get:function(){return this._isUpdatingAfterResize},set:function(t){this._isUpdatingAfterResize=t},enumerable:!0,configurable:!0}),e.prototype._getText=function(){var t=this.isEmptyTextPlaceholder()?this.item.originalText:this.item.text;return h.m(t)?this._xmlToHtml(t).textContent.trim():t.trim()},e.prototype.isEmptyTextPlaceholder=function(){return this.item.isTextPlaceholder&&""===this.item.text},e.prototype.update=function(t,e){var n=this;if(this.isVisible()){this._update(null,t,function(){n._afterUpdate(e)})}else"function"==typeof t&&t()},e.prototype.getColorData=function(){var e=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null,r=t.prototype.getColorData.call(this);return e.color.needUpdate(n)&&(r.color=e.color.getData()),null!=e.stroke&&e.stroke.color.needUpdate(n)&&(r.stroke=e.stroke.color.getData()),null!=e.shadow&&e.shadow.color.needUpdate(n)&&(r.shadow=e.shadow.color.getData()),r},e.prototype.setColorData=function(e){t.prototype.setColorData.call(this,e),this._modifyItem(function(t){null!=e.color&&(t.color=o.ColorFactory.createColor(e.color)),null!=e.stroke&&(t.stroke.color=o.ColorFactory.createColor(e.stroke)),null!=e.shadow&&(t.shadow.color=o.ColorFactory.createColor(e.shadow))})},e.prototype.hasColorsToUpdate=function(){var e=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null;return t.prototype.hasColorsToUpdate.call(this)||e.color.needUpdate(n)||null!=e.stroke&&e.stroke.color.needUpdate(n)||null!=e.shadow&&e.shadow.color.needUpdate(n)},e.prototype.isEmpty=function(){return this.item.isEmpty()},e.prototype.isVisible=function(){var e=null==this.item.parentGroupItem||this.item.parentGroupItem.isChildVisible(this.item);return t.prototype.isVisible.call(this)&&e},e.prototype._afterUpdate=function(t){"function"==typeof t&&t(),this._updatedFromServer=!0,null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.redrawDesign())},e.prototype._xmlToHtml=function(t){return(new DOMParser).parseFromString("<body>"+t+"</body>","text/html").getElementsByTagName("body")[0]},e.prototype._validateBeforeCallService=function(){return""!==this._getText()},e.prototype._onValidateBeforeCallServiceFailed=function(){this._getSrc()?this._setDefaultTextControlPoints():this._updateEmptyTextControlPoints()},e.prototype._updateEmptyTextControlPoints=function(){var e=this,n=null,r=this._createDataInstance(this),o=JSON.parse(this._getDataItem());n=o.text,o.text="a";var i=[JSON.stringify(r),o];t.prototype._callService.call(this,"Update"+this.getTypeName(),i,function(t){var r=null;"object"==typeof t&&(r=t.item,t=t.itemHandlerData),null!=r&&(r.text=n,e._applyDataItem(r,t)),e.setData(t);var o=e.canvas;null!=o&&(o.updateSelection(),o.redraw()),e.onSuccessResponse()},function(t){e.onErrorResponse(t)},null)},e.prototype._setDefaultTextControlPoints=function(){var t=this.item.alignment;t===i.TextAlignment.Center?this._controlPoints[0].x+=(this._controlPoints[1].x-this._controlPoints[0].x)/2-this._defaultWidth/2:t===i.TextAlignment.Right&&(this._controlPoints[0].x=this._controlPoints[1].x-this._defaultWidth),this._controlPoints[1].x=this._controlPoints[0].x+this._defaultWidth,this.raiseChanged();var e=this.canvas;null!=e&&(e.updateSelection(),e.redraw()),this.onSuccessResponse()},e.prototype._transformChanged=function(){var e=this;if(t.prototype._transformChanged.call(this),this.isUpdating&&this._callbacks){var n=this.item.transform.clone();this._callbacks.push(function(){e.item.setTransform(n,!0)})}},e.prototype._createImageUrl=function(){var t=this.canvas;return null==t?null:this.canvas.service.imageLoaderService.hasImageContainerFor(this.currentTextImage.cacheFileId)?null:null!=this.currentTextImage.cacheFileId&&0!==this.currentTextImage.cacheFileId.length||null!=this.currentTextImage.base64Image&&0!==this.currentTextImage.base64Image.length?this.currentTextImage&&this.currentTextImage.base64Image?"data:image/png;base64,"+this.currentTextImage.base64Image:t.handlerUrl+"/txt?f="+encodeURIComponent(this.currentTextImage.cacheFileId):null},e.prototype._updateImageUrl=function(){if(""!==this._getText()&&this.isVisible()){var t=this.canvas;if(null!=t&&t.isInitialized){var e=this._createImageUrl();null==this._imageContainer.source||e!==this._imageContainer.source?null===e?(this._imageContainer.clear(),t.redraw()):this._imageContainer.updateUrl(e):!0===this.isUpdatingAfterResize&&(this.isUpdatingAfterResize=!1,t.redraw())}}},e.prototype.quickUpdate=function(){this._updateImageUrl(),this.isVisible()&&!this._imageContainer.source&&this.canvas&&!this.canvas.service.imageLoaderService.hasImageContainerFor(this.currentTextImage.cacheFileId)&&this.update()},e.prototype._getBoundsMargin=function(){return 2*this._getActualBorderWidth()},e.prototype.drawItemHandler=function(t){if(null!=t&&null!=this.canvas&&!0===this._updatedFromServer&&""!==this._getText()){this._hasVectorMask()&&(t.save(),this._clip(t));var e=this.item,n=this.rectangle,r=this.isEmptyTextPlaceholder()?.5:1;u.a.fillRectangle(t,n,e.fillColor.preview,e.opacity*r);try{var o=this.canvas.service.imageLoaderService.getImageContainerFor(this.currentTextImage.cacheFileId);if(null!=o){var i=this.canvas.service.imageLoaderService.getImageContainerRectangleFor(this.currentTextImage.cacheFileId);c.a.renderTextImage(this,o,i,t,r)}else c.a.renderTextImage(this,this._imageContainer,null,t,r)}catch(t){console.error(t),this.update()}var a=this._getActualBorderWidth();a>0&&(n.width+=a,n.height+=a,u.a.drawRectangle(t,n,a,e.borderColor.preview,e.opacity*r)),this._hasVectorMask()&&t.restore()}},e.prototype._createDataInstance=function(t){return new s.a(t)},e.prototype._onImageLoaded=function(){this.isUpdatingAfterResize=!1,this._height=this.rectangle.height,null!=this.canvas&&this.canvas.redraw(),this._dispatchReadyEvent()},e.prototype._onResized=function(){return null!=this.canvas&&(this.isUpdatingAfterResize=!0),t.prototype._onResized.call(this)},e.prototype._onCanvasChanged=function(){this.update()},e.prototype._onAddedOnCanvas=function(e,n){t.prototype._onAddedOnCanvas.call(this,e,n),null==this.canvas||this._onCanvasChangedDelegate||(this._onCanvasChangedDelegate=this._onCanvasChanged.bind(this),this.canvas.add_zoomChanged(this._onCanvasChangedDelegate))},e.prototype._onRemovedFromCanvas=function(e){t.prototype._onRemovedFromCanvas.call(this,e),e&&null!=this._onCanvasChangedDelegate&&(e.remove_zoomChanged(this._onCanvasChangedDelegate),delete this._onCanvasChangedDelegate)},e.prototype._endTransform=function(e,n){t.prototype._endTransform.call(this,e,n),e&&n&&this.update()},e.prototype.dispose=function(){this._imageContainer.dispose(),null!=this._onCanvasChangedDelegate&&(null!=this.canvas&&this.canvas.remove_zoomChanged(this._onCanvasChangedDelegate),delete this._onCanvasChangedDelegate),t.prototype.dispose.call(this)},e.typeName="BaseTextItemHandler",e}(a.a),d=function(){return function(){this.cacheFileId=null,this.base64Image=null,this.textCropped=null}}()},412:function(t,e,n){"use strict";var r=n(740),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();e.a=i},413:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return h}),n.d(e,"c",function(){return p}),n.d(e,"e",function(){return f});var r,o=n(402),i=n(387),a=n(393),s=n(462),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e,n){var r=t.call(this)||this;return r._items=new a.a,r._visible=!0,r.parentComponent=null,r.locked=!1,r.renderingType=s.a.Normal,r.type="Container",r.region=null,r._onItemAdded=function(t){t.item.parentContainer=r},r._items=new a.a,r._items.add_itemAdded(r._onItemAdded),null!=e&&r.items.setRange(e),null!=n&&(r.name=n),r}return l(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this._propertyChanged.notify(this,"visible"))},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){var e=t.prototype.getSimplifiedObject.call(this,["parentComponent","version"]);return e.version=this.version,e},e.prototype.generateNewIds=function(){this._generateNewId(),this._items.forEach(function(t){return t.generateNewIds()})},e.prototype._copy=function(e,n,r){t.prototype._copy.call(this,e,n,r),n.items.addRange(e.items.toArray().map(function(t){return t.clone(r)})),n.locked=e.locked,n.visible=e.visible,n.renderingType=e.renderingType,n.translationKey=e.translationKey,n.region=null!=e.region?e.region.clone():null},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e}(o.a),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.locked=!0,e.noPrint=!1,e.noShow=!1,e.size=null,e}return l(e,t),e.prototype._copy=function(e,n,r){t.prototype._copy.call(this,e,n,r),n.noPrint=e.noPrint,n.noShow=e.noShow,n.size=null!=e.size?e.size.clone():null},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e}(u),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.locked=!1,e.type="SurfaceContainer",e}return l(e,t),e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e}(u),p=function(t){function e(){var e=t.call(this)||this;return e.type="SpotColorContainer",e.renderingType=s.a.Grayscale,e}return l(e,t),e.prototype._copy=function(e,n,r){t.prototype._copy.call(this,e,n,r),n.previewColor=e.previewColor},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e}(h),f=function(t){function e(){var e=t.call(this)||this;return e.type="TextureContainer",e.renderingType=s.a.Solid,e}return l(e,t),Object.defineProperty(e.prototype,"previewTextureSource",{get:function(){return this._previewTextureSource},set:function(t){t!==this._previewTextureSource&&(this._previewTextureSource=t,this._propertyChanged.notify(this,"previewTextureSource"))},enumerable:!0,configurable:!0}),e.prototype._copy=function(e,n,r){return t.prototype._copy.call(this,e,n,r),n.previewTextureSource=null!=e.previewTextureSource?e.previewTextureSource.clone():null,n.previewTextureName=e.previewTextureName,n},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e.prototype.getSimplifiedObject=function(e){i.isArray(e)||i.isString(e)||(e=[]);var n=t.prototype.getSimplifiedObject.call(this);return n.previewTextureSource={id:this.previewTextureSource.id,width:this.previewTextureSource.width,height:this.previewTextureSource.height,isVector:this.previewTextureSource.isVector,pageIndex:this.previewTextureSource.pageIndex,url:this.previewTextureSource.url,actualSize:this.previewTextureSource.actualSize,saveAspectRatio:this.previewTextureSource.saveAspectRatio,origin:this.previewTextureSource.origin},n},e}(h)},414:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(380),o=n(384),i=n(387),a=n(400),s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(e,n,r){void 0===r&&(r=!0),this._edgeConstraint=null,this._cornerArbitraryConstraint=null,this.propertyChanged=new o.a,this.type=t.type,this.edge=n,this._setCornerValues(e,n,r)}return Object.defineProperty(t.prototype,"edgeConstraint",{set:function(t){var e=this.edge;this._edgeConstraint=t,this.edge!==e&&this.propertyChanged.notify()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edge",{get:function(){return null!=this._edgeConstraint?this._edgeConstraint:this._edge},set:function(t){this._edge!==t&&(this._edge=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"corner",{get:function(){return this._corner},set:function(t){if(null==t)throw new r.b("corner cannot be null");this._corner!==t&&(this._corner=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),t.prototype._setCornerValues=function(e,n,r){this.corner=e&&n?r?[t.arbitrary,t.proportional]:[t.proportional,t.arbitrary]:e?[t.proportional]:n?[t.arbitrary]:[]},t.prototype.getCornerProportional=function(){return this.corner.includes(t.proportional)},t.prototype.getCornerArbitrary=function(){return null!=this._cornerArbitraryConstraint?this._cornerArbitraryConstraint:this.corner.includes(t.arbitrary)},t.prototype.setCornerProportional=function(t){var e=this.getCornerArbitrary();this._setCornerValues(t,e,!0)},t.prototype.setCornerArbitrary=function(t){var e=this.getCornerProportional();this._setCornerValues(e,t,!0)},t.prototype.setCornerArbitraryConstraint=function(t){var e=this.getCornerArbitrary();this._cornerArbitraryConstraint=t,this.getCornerArbitrary()!==e&&this.propertyChanged.notify()},t.prototype.clone=function(){var e=new t(!0,!0);return e.edge=this.edge,e.corner=this.corner.slice(),e},t.prototype.equals=function(t){return this.edge===t.edge&&i.isEqual(this.corner,t.corner)},Object.defineProperty(t.prototype,"data",{get:function(){return{Edge:this.edge,Corner:this.corner}},enumerable:!0,configurable:!0}),t._fromData=function(e){if(null==e)return new t(!1,!1);var n=new t(!0,!0);return n.corner=e.Corner,n.edge=e.Edge,n},t.prototype.getSimplifiedObject=function(){var t={};return t.edge=this.edge,t.corner=this.corner,t},t.arbitrary="Arbitrary",t.proportional="Proportional",t.type="ResizeGripsPermissions",s([Object(a.a)({ignore:!0}),l("design:type",Boolean),l("design:paramtypes",[Boolean])],t.prototype,"edgeConstraint",null),t}()},415:function(t,e,n){"use strict";n.d(e,"a",function(){return I});var r,o=n(483),i=n(413),a=n(535),s=n(536),l=n(537),u=n(539),c=n(380),h=n(384),p=n(381),f=n(433),d=n(386),y=n(421),g=n(542),m=n(387),_=n(462),v=n(442),b=n(383),w=n(400),C=n(543),P=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),x=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},O=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},I=function(t){function e(){var n=t.call(this)||this;n._visible=!0,n._locked=!1,n._opacity=1,n._fromLayout=!1,n._textWrappingMode=y.a.None,n._isVariable=!1,n._blendMode=v.a.Normal,n._ignorePermissionsChange=!1,n._mask=null,n._onPermissionsChanged=function(){n._propertyChanged.notify(n,"permissions")},n._parentGroupItem=null,n.themeBinding=new g.a,n._onTransformChanged=function(t){n._propertyChanged.notify(n,"transform")},n._onMaskChanged=function(t){n._propertyChanged.notify(n,"mask")},n._changedEvent=new h.b(n),n._changingEvent=new h.a,n.type=e.type;var r=new l.a;return r.allowRemoveOnLayoutChange=!1,n.itemPermissions=r,n.setManipulationPermissions(new a.a),n.visualizationPermissions=new s.a,n.frontendPermissions=new u.a,n._setViolationSettings(new C.a,!0),n.setTransform(new f.a),n}return P(e,t),e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.itemPermissions=e._itemPermissions.clone(),n.visible=e._visible,n.locked=e._locked,n.opacity=e._opacity,n.isVariable=e._isVariable,n.textWrappingMode=e._textWrappingMode,n.setManipulationPermissions(e._manipulationPermissions.clone()),n.visualizationPermissions=e._visualizationPermissions.clone(),n.frontendPermissions=e._frontendPermissions.clone(),n.violationSettings=e._violationSettings.clone(),n.transform=e._transform.clone(),n.containerName=e.containerName,n.themeBinding=e.themeBinding.clone(),n.mask=null!=e.mask?e.mask.clone():null,n.blendMode=e.blendMode},e.prototype.equals=function(e){var n=t.prototype.equals.call(this,e),r=Object(b.h)(this._itemPermissions,e._itemPermissions),o=Object(b.h)(this._visible,e._visible),i=Object(b.h)(this._locked,e._locked),a=Object(b.h)(this._opacity,e._opacity),s=Object(b.h)(this._isVariable,e._isVariable),l=Object(b.h)(this._textWrappingMode,e._textWrappingMode),u=Object(b.h)(this._manipulationPermissions,e._manipulationPermissions),c=Object(b.h)(this._visualizationPermissions,e._visualizationPermissions),h=Object(b.h)(this._frontendPermissions,e._frontendPermissions),p=Object(b.h)(this._transform,e._transform),f=Object(b.h)(this._violationSettings,e._violationSettings),d=Object(b.h)(this.containerName,e.containerName),y=Object(b.h)(this.themeBinding,e.themeBinding),g=Object(b.h)(this._mask,e._mask),m=Object(b.h)(this.blendMode,e.blendMode);return n&&r&&o&&i&&a&&s&&l&&u&&c&&h&&p&&f&&d&&y&&g&&m},Object.defineProperty(e.prototype,"manipulationPermissions",{get:function(){return this.getManipulationPermissions()},set:function(t){this.setManipulationPermissions(t)},enumerable:!0,configurable:!0}),e.prototype.getManipulationPermissions=function(){return this._manipulationPermissions},e.prototype.setManipulationPermissions=function(t){if(null==t)throw new c.a("manipulationPermissions cannot be null");Object(b.h)(this._manipulationPermissions,t)||(null!=this._manipulationPermissions&&this._manipulationPermissions.propertyChanged.remove(this._onPermissionsChanged),this._manipulationPermissions=t,this.applyPermissionsConstrain(),this._manipulationPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"manipulationPermissions"))},Object.defineProperty(e.prototype,"visualizationPermissions",{get:function(){return this._visualizationPermissions},set:function(t){if(null==t)throw new c.a("visualizationPermissions cannot be null");Object(b.h)(this._visualizationPermissions,t)||(null!=this._visualizationPermissions&&this._visualizationPermissions.propertyChanged.remove(this._onPermissionsChanged),this._visualizationPermissions=t,this.applyPermissionsConstrain(),this._visualizationPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"visualizationPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemPermissions",{get:function(){return this._itemPermissions},set:function(t){if(null==t)throw new c.a("itemPermissions cannot be null");Object(b.h)(this._itemPermissions,t)||(null!=this._itemPermissions&&this._itemPermissions.propertyChanged.remove(this._onPermissionsChanged),this._itemPermissions=t,this.applyPermissionsConstrain(),this._itemPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"itemPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frontendPermissions",{get:function(){return this._frontendPermissions},set:function(t){if(null==t)throw new c.a("frontendPermissions cannot be null");Object(b.h)(this._frontendPermissions,t)||(null!=this._frontendPermissions&&this._frontendPermissions.propertyChanged.remove(this._onPermissionsChanged),this._frontendPermissions=t,this.applyPermissionsConstrain(),this._frontendPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"frontendPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(t){this._setViolationSettings(t)},enumerable:!0,configurable:!0}),e.prototype._setViolationSettings=function(t,e){if(void 0===e&&(e=!1),null==t)throw new c.a("violationSettings cannot be null");Object(b.h)(this._violationSettings,t)||(null!=this._violationSettings&&this._violationSettings.removePropertyChanged(this._onPermissionsChanged),this._violationSettings=t,this.applyPermissionsConstrain(),this._violationSettings.addPropertyChanged(this._onPermissionsChanged),this._propertyChanged.notify(this,"violationSettings"))},e.prototype.applyPermissionsConstrain=function(){this.isRenderTypeIsNormal||(this.itemPermissions.allowOpacityChange=!1)},e.prototype._onContainerChanged=function(){t.prototype._onContainerChanged.call(this),this.applyPermissionsConstrain()},Object.defineProperty(e.prototype,"parentGroupItem",{get:function(){return this._parentGroupItem},set:function(t){this._parentGroupItem=t,null!=t&&(this.parentContainer=this._parentGroupItem.parentContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this._blendMode!==t&&(this._blendMode=t,this._propertyChanged.notify(this,"blendMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},set:function(t){this.setTransform(t)},enumerable:!0,configurable:!0}),e.prototype.setTransform=function(t,e){void 0===e&&(e=!1),this._transform&&this._transform.removeTransformChanged(this._onTransformChanged);var n=!1;f.a.isEqual(this._transform,t)||(this._transform=t,n=!0),this._transform&&this._transform.addTransformChanged(this._onTransformChanged),!e&&n&&this._propertyChanged.notify(this,"transform")},Object.defineProperty(e.prototype,"textWrappingMode",{get:function(){return this._textWrappingMode},set:function(t){this._textWrappingMode!==t&&(this._textWrappingMode=t,this._propertyChanged.notify(this,"textWrappingMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locked",{get:function(){return this._locked},set:function(t){this._locked!==t&&(this._locked=t,this._propertyChanged.notify(this,"locked"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){Object(b.h)(this.mask,t)||(null!=this._mask&&this._mask.removeMaskChanged(this._onMaskChanged),this._mask=t,null!=this._mask&&this._mask.addMaskChanged(this._onMaskChanged),this._propertyChanged.notify(this,"mask"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this._propertyChanged.notify(this,"visible"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this._opacity},set:function(t){p.EqualsOfFloatNumbers(this._opacity,t)||(this._opacity=t,this._propertyChanged.notify(this,"opacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVariable",{get:function(){return this._isVariable},set:function(t){if(this._isVariable!==t){if(!this._canSetIsVariable())throw new c.d("Unable to set isVariable on item of type '"+this.type+"'");this._isVariable=t,this._propertyChanged.notify(this,"isVariable")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fromLayout",{get:function(){return this._fromLayout},set:function(t){this._fromLayout!==t&&(this._fromLayout=t,this._propertyChanged.notify(this,"fromLayout"))},enumerable:!0,configurable:!0}),e.prototype.canSetIsVariable=function(){return this._canSetIsVariable()},e.prototype._canSetIsVariable=function(){return!1},e.prototype._getParentContainer=function(){return null!=this.parentContainer?this.parentContainer:null},e.prototype.getSimplifiedObject=function(e){m.isArray(e)||m.isString(e)||(e=[]);var n=t.prototype.getSimplifiedObject.call(this,["_changedEvent","_changingEvent","manipulationPermissions","itemPermissions","visualizationPermissions","frontendPermissions","renderingType","isRenderTypeIsNormal","parentGroupItem"].concat(e));return n.manipulationPermissions=this.manipulationPermissions.getSimplifiedObject(),n.itemPermissions=this.itemPermissions.getSimplifiedObject(),n.visualizationPermissions=this.visualizationPermissions.getSimplifiedObject(),n.frontendPermissions=this.frontendPermissions.getSimplifiedObject(),n.mask=null!=this.mask?this.mask.getSimplifiedObject():null,n},e.prototype.getItemChangedEvent=function(){return this._changedEvent},e.prototype.getItemChangingEvent=function(){return this._changingEvent},e.prototype._getThemeBinding=function(t){return null!=t?t:this.themeBinding},e.prototype._applyThemeColor=function(t,e,n){if(null!=t&&null!=e[t]){var r=d.ColorFactory.createColor(e[t]);if(r)return n(r),!0}return!1},Object.defineProperty(e.prototype,"isRenderTypeIsNormal",{get:function(){return this.renderingType===_.a.Normal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderingType",{get:function(){return this.parentContainer instanceof i.d?this.parentContainer.renderingType:_.a.Normal},enumerable:!0,configurable:!0}),e.type="item",x([Object(w.a)({enumObject:v.a,displayName:"Blend mode"}),O("design:type",String),O("design:paramtypes",[String])],e.prototype,"blendMode",null),x([Object(w.a)({enumObject:y.a}),O("design:type",Number),O("design:paramtypes",[Number])],e.prototype,"textWrappingMode",null),x([Object(w.a)({displayName:"Locked"}),O("design:type",Boolean),O("design:paramtypes",[Boolean])],e.prototype,"locked",null),e}(o.a)},416:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(470),o=function(){function t(){}return t.getProductSerializer=function(){return null!=t.jsonProductSerializerFactory?t.jsonProductSerializerFactory():t._defaultJsonProductSerializerFactory()},t._defaultJsonProductSerializerFactory=function(){return new r.a},t.jsonProductSerializerFactory=null,t.MAIN_CONTAINER_NAME="Main",t.BG_CONTAINER_NAME="Background",t.FG_CONTAINER_NAME="Foreground",t.BG_SOLIDCOLOR="solidColor",t.SPINE_AND_FOLDING_CONTAINER_NAME="Spine&Folding",t}()},417:function(t,e,n){"use strict";n.d(e,"a",function(){return Hn}),n.d(e,"c",function(){return _t}),n.d(e,"e",function(){return vt}),n.d(e,"b",function(){return bt}),n.d(e,"d",function(){return wt});var r,o=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},i=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=function(){function t(t){this._productHandler=t}return t.prototype._switchSurface=function(t){var e=this._productHandler.product;if(null!=e){var n=e.surfaces;if(!(n.length<=0)){var r=n.indexOf(this._productHandler.currentSurface);-1===r&&(console.warn("Current surface is not found in product"),r=0);var o,i=n.length-1;o=null!=t?Math.max(Math.min(r+t,i),0):r<i?r+1:0,this.switchToSurface(n.get(o))}}},t.prototype.switchToSurface=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){return null==(e=this._productHandler.product)?[2]:0===e.surfaces.length?(console.warn("Surfaces are not found!"),[2]):this._productHandler.currentSurface===t?[2]:(this._productHandler.currentSurface=t,[2])})})},t.prototype.getNextSurface=function(t){return o(this,void 0,void 0,function(){var e,n,r,o;return i(this,function(i){return null==(e=this._productHandler.product)?[2]:(n=e.surfaces).length<=0?[2,null]:(-1==(r=n.indexOf(this._productHandler.currentSurface))&&(console.warn("Current surface is not found in product"),r=0),o=r,null!=t?o+=t:o++,[2,e.surfaces.get(o)])})})},t.prototype.switchToNextSurface=function(){this._switchSurface()},t.prototype.switchSurfaceForward=function(){return o(this,void 0,void 0,function(){return i(this,function(t){return this._switchSurface(1),[2]})})},t.prototype.switchSurfaceBackward=function(){return o(this,void 0,void 0,function(){return i(this,function(t){return this._switchSurface(-1),[2]})})},t}();!function(t){t.switchToSurface="switchToSurface",t.getNextSurface="getNextSurface",t.switchToNextSurface="switchToNextSurface",t.switchSurfaceForward="switchSurfaceForward",t.switchSurfaceBackward="switchSurfaceBackward"}(r||(r={}));var s,l=n(380),u=n(436),c=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(e,n,r){var o=t.call(this,r,n)||this;return o._product=e,o}return c(e,t),e}(u.b),p=n(745),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},y=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=function(t){function e(e,n,r,o){var i=t.call(this,r,n,o)||this;return i._productHandler=e,i._rotationAlgorithm=new p.a,i}return f(e,t),e.prototype._executeCommandBody=function(){return d(this,void 0,void 0,function(){return y(this,function(t){return[2,this.rotateProduct(this._args.rotationType)]})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e.prototype.rotateProduct=function(t){return null!=this._productHandler&&null!=this._product&&this._rotationAlgorithm.rotate(this._productHandler.currentSurface,t),this._productHandler.contentAngle},e}(h),m=n(416),_=n(381),v=n(382),b=n(394),w=n(386),C=n(582),P=n(469),x=n(449),O=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),I=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},S=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},T=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(t){function e(e,n,r,o,i,a,s,l){var u=t.call(this,r,n,o)||this;return u._productHandler=e,u._commandManager=i,u._productThemeManager=a,u._canvas=s,u._eventManager=l,u}return O(e,t),e.prototype._executeCommandBody=function(){return I(this,void 0,void 0,function(){var t,e=this;return S(this,function(n){return t=this._args.data instanceof v.ImageMetaData,[2,this.changeBackground(this._args.surfaces,t?"image":"solidColor",t?function(t){t instanceof v.PlaceholderItem&&e._setBgImage(t,e._args.data)}:function(t){(t instanceof v.PlaceholderItem||t instanceof v.RectangleItem)&&e._selectBgRectangleColor(t,e._args.data)},t?null:this._args.data)]})})},e.prototype.changeBackground=function(t,e,n,r){var o,i,a=this;try{var s=void 0;switch(e){case"image":case"solidColor":s=t.map(function(t){return a.getOrCreateBgItems(t,e)}).reduce(function(t,e){return t.concat(e)},[]);break;default:throw new l.e}try{for(var u=T(s),c=u.next();!c.done;c=u.next()){var h=c.value;if(h instanceof v.PlaceholderItem||h instanceof v.RectangleItem){if(h instanceof v.PlaceholderItem){b.a.clearImageContent(h);var p=h.content;r instanceof w.Color?(r.equals(h.fillColor)||(h.themeBinding.fill=null,p.themeBinding.fill=null),h.fillColor=w.ColorFactory.createColor(r),p.fillColor=w.ColorFactory.createColor(r)):null!=r&&(h.themeBinding.fill=r.title,p.themeBinding.fill=r.title)}n(h)}}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return b.a.updateItems(s,this._productHandler,this._canvas),s}finally{}},e.prototype.getOrCreateBgItems=function(t,e){var n,r,o,i,a=this,s=function(t){var e=new v.PlaceholderItem(t);return e.contentResizeMode=v.ResizeMode.Fill,e.content=new v.ImageItem,a._productHandler.getHandler(e.content).setRectangle(_.RotatedRectangleF.fromRectangleF(t)),e},u=function(t){return t.every(function(t){return t instanceof v.PlaceholderItem||t instanceof v.RectangleItem})},c=t.containers.first(function(t){return t.name===m.a.BG_CONTAINER_NAME}),h=c.items.toArray();if(0===h.length){var p=s((y=t.printAreas.getItem(0)).getBounds(P.a.Bleed));return this._addItem(t,c,p,!1),[p]}if(t.printAreas.length===h.length){for(var f=[],d=0;d<t.printAreas.length;d++){var y=t.printAreas.getItem(d),g=h[d];if(g instanceof v.ImageItem){var w=g,C=w.frontendPermissions;this._commandManager.execute(bt.deleteItems,{items:[w],force:!0}),(p=s(y.getBounds(P.a.Bleed))).frontendPermissions=C,this._addItem(t,c,p,!1),f.push(p)}else if(g instanceof v.PlaceholderItem){var x=g;if(e!==m.a.BG_SOLIDCOLOR){var O=y.getBounds(P.a.Bleed),I=_.Path.rectangle(O.left,O.top,O.width,O.height),S=!1;x.sourcePath.isEqual(I)||(x.sourcePath=I,S=!0),_.RectangleF.isEqual(x.sourceRectangle,O)||(x.sourceRectangle=O,S=!0),(S&&0!==x.transform.translateX||0!==x.transform.translateY)&&(x.transform.setTranslateX(0),x.transform.setTranslateY(0));var j=_.RotatedRectangleF.fromRectangleF(O),R=this._productHandler.getHandler(x.content);R.getTransformedRectangle().equals(j)||(R.setTransformedRectangle(j),S=!0),S&&b.a.updateItems(h,this._productHandler,this._canvas,{redraw:!0})}else x.content instanceof v.ImageItem&&x.content.source.type!=v.ImageItem.ImageSourceType.None&&(x.sourceRectangle=y.getBounds(P.a.Bleed));f.push(x)}}return f}if(u(h)){var k=m.a.BG_SOLIDCOLOR;if(e===k)if(null==h.find(function(t){return t.name===k})){y=t.printAreas.getItem(0);var B=(o=y.getBounds(P.a.Bleed),i=new v.RectangleItem(o),a._productHandler.getHandler(i).setRectangle(_.RotatedRectangleF.fromRectangleF(o)),i.borderWidth=0,i);B.name=k,this._addItem(t,c,B,!1)}if(null!=this._historyArgs.history&&this._historyArgs.history.pause(),u(h=c.items.toArray()))try{for(var E=T(h),A=E.next();!A.done;A=E.next()){var F=A.value,M=F.name===k;F.visualizationPermissions.noPrint=e===k?!M:M,F.visualizationPermissions.noShow=e===k?!M:M}}catch(t){n={error:t}}finally{try{A&&!A.done&&(r=E.return)&&r.call(E)}finally{if(n)throw n.error}}return b.a.updateItems(h,this._productHandler,this._canvas,{redraw:!0}),null!=this._historyArgs.history&&this._historyArgs.history.resume(),h}throw new l.e("Containers contains unexpected content")},e.prototype._addItem=function(t,e,n,r){this._commandManager.execute(vt.addItems,{surface:t,targetContainer:e,items:[n],selectOnCanvas:!0})},e.prototype._setBgImage=function(t,e){var n=t.content;this._productHandler.getHandler(n).setTransformedRectangle(this._getBgImageRectangle(t,e)),t.fillColor=w.ColorFactory.createColor("rgba(0,0,0,0)"),n.fillColor=w.ColorFactory.createColor("rgba(0,0,0,0)"),null!=n.overlayEffect&&(n.imagePermissions.allowKeepOverlayColor?b.a.setOverlayEffectColor(n,n.overlayEffect.color):n.overlayEffect.color=null),x.a.setDataToImage(e,n),this._eventManager.imageContentChangedEvent.fire(t)},e.prototype._getBgImageRectangle=function(t,e){var n,r,o=this._productHandler.getHandler(t).getTransformedRectangle(!1),i=e.size.width/e.size.height;return i<o.width/o.height?r=(n=o.width)/i:n=(r=o.height)*i,new _.RotatedRectangleF(o.centerX,o.centerY,n,r,0)},e.prototype._selectBgRectangleColor=function(t,e){e instanceof w.Color?t.fillColor=w.ColorFactory.createColor(e):null!=e&&(t.themeBinding.fill=e.title,(new C.a).applyToItem(t,this._productThemeManager.currentProductTheme))},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(h),R=n(387),k=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B=function(t){function e(e,n,r){var o=t.call(this,r,n)||this;return o.surface=e,o}return k(e,t),e}(u.b),E=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},F=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},M=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},z=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(M(arguments[e]));return t},L=function(t){function e(e,n,r,o,i,a,s,l){var u=t.call(this,r.surface,n,r)||this;return u._productHandler=e,u._productThemeManager=o,u._canvas=i,u._variableItemHelper=a,u._commandManager=s,u._eventManager=l,u}return E(e,t),e.prototype._executeCommandBody=function(){return A(this,void 0,void 0,function(){var t,e,n,r,o,i,a=this;return F(this,function(s){switch(s.label){case 0:return t=this._args,e=t.items,n=t.targetGroupItem,r=t.index,o=t.orderIndex,i=R.extend({targetContainer:this._productHandler.userEditContainer,surface:this._productHandler.currentSurface,selectOnCanvas:!0,index:null,orderIndex:null,ignoreOrderRules:!1,ignoreCanvasRotate:!0,createCloneName:!1},this._args),this._historyArgs.history.pause(),null==n?[3,2]:[4,this._insertItemsIntoGroupItem(e,n,r,o)];case 1:return s.sent(),this._eventManager.itemCollectionChangedEvent.notify(),[3,4];case 2:return e.forEach(function(t){return a._addItem(i,t)}),this._canvas.updateTexts(),[4,b.a.waitForItemsUpdated(e,this._canvas)];case 3:s.sent(),s.label=4;case 4:return e.some(function(t){return t instanceof v.PlainTextItem})||this._canvas.redraw(),this._historyArgs.history.resume(),i.selectOnCanvas&&this._commandManager.execute(wt.selectItems,{items:e.filter(function(t){return!t.locked})}),[2]}})})},e.prototype._addItem=function(t,e){null!=this._productThemeManager.currentProductTheme&&(new C.a).applyToItem(e,this._productThemeManager.currentProductTheme),null==t.index&&(t.index=-1);var n=t.targetContainer;this._args.createCloneName&&(e.name=b.a.createCloneName(e,this._variableItemHelper,this._productHandler));var r=n.items;if(r.add(e),-1!==t.index)n.items.move(r.length-1,t.index);else if(!t.ignoreOrderRules&&e instanceof v.ImageItem&&r.length>1){var o=R.find(r.toArray().slice().reverse(),function(t){return t instanceof v.BoundedTextItem||t instanceof v.PathBoundedTextItem}),i=R.find(r.toArray(),function(t){return t instanceof v.BaseTextItem}),a=-1;null!=o?a=r.indexOf(o)+1:null!=i&&(a=r.indexOf(i)),-1!==a&&n.items.move(r.length-1,a)}},e.prototype._insertItemsIntoGroupItem=function(t,e,n,r){return A(this,void 0,void 0,function(){var o,i,a;return F(this,function(s){switch(s.label){case 0:if(e instanceof v.LayoutItem?e.addItems(t,n,r):e.addItems(t,n),!((o=z(t,t.filter(function(t){return t instanceof v.GroupItem}).reduce(function(t,e){return z(t,e.getNestedItems(!0))},[]))).length>0))return[3,2];for(i=e;null!=i.parentGroupItem;)i=i.parentGroupItem;return a=i.locked,i.locked=!0,[4,b.a.waitForItemsUpdated(o,this._canvas)];case 1:s.sent(),i.locked=a,s.label=2;case 2:return[2]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(B),N=n(388),H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},V=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},W=function(t){function e(e,n,r,o,i,a){var s=t.call(this,r.items,n,r)||this;return s._productHandler=e,s._canvas=o,s._commandManager=a,s._conf=i.messages.delete,s}return H(e,t),e.prototype._executeCommandBody=function(){return D(this,void 0,void 0,function(){var t;return V(this,function(e){return t=R.extend({force:!1,autoUngroup:!0,autoParentGroupDelete:!0},this._args),this.deleteItems(t.items,t.force,t.autoUngroup,t.autoParentGroupDelete),[2]})})},e.prototype.deleteItems=function(t,e,n,r){if(0!=t.length&&((t.every(function(t){return t.manipulationPermissions.allowDelete})||e)&&(!(!e&&this._conf.enabled)||confirm(this._conf.message)))){for(var o=0;o<t.length;o++){var i=t[o],a=i.parentGroupItem;null!=a?(a.items.contains(i)&&(a instanceof v.LayoutItem?a.removeItems([i]):a.items.remove(i)),r&&0===a.items.length?this.deleteItem(a):n&&a.items.length<2&&this._commandManager.execute(bt.ungroupItems,{items:a.items.toArray()})):this.deleteItem(i)}this._canvas.updateTexts(),this._canvas.updateSelection(),this._productHandler.redraw()}},e.prototype.deleteItem=function(t){if(null!=t){var e=null!=t.parentGroupItem?t.parentGroupItem:t.parentContainer;null!=e&&e.items.contains(t)&&e.items.remove(t)}},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),U=n(504),q=n(396),G=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Y=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},K=function(t){function e(e,n,r){var o=t.call(this,n)||this;return o._productHandler=e,o._canvas=r,o}return G(e,t),e.prototype.execute=function(){return X(this,void 0,void 0,function(){var t,e,n,r=this;return Y(this,function(o){return t=[],e=this._args.items,n=null!=this._args.multiselection&&this._args.multiselection,e.forEach(function(e){var o=r._productHandler.getHandler(e),i=!1;(o instanceof q.c||o instanceof q.h)&&o.isEmpty()&&(i=!0),null==o||o.isLocked()||!o.isVisible()&&!i||e.visualizationPermissions.noShow||(r._canvas.isItemHandlerSelected(o)&&n?r._canvas.removeSelectedItemHandler(o):n?r._canvas.addSelectedItemHandler(o):t.push(o),r.lastSelectedItem=e)}),n||this._canvas.setSelectedItemHandlers(t),this._canvas.redraw(),[2]})})},e}(U.a),J=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Q=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Z=function(t){function e(e,n,r){var o=t.call(this,null)||this;return o._productHandler=e,o._commandManager=n,o._canvas=r,o._canSelectItem=function(t){var e=o._productHandler.currentSurface;return null!=e&&!t.visualizationPermissions.noShow&&!t.locked&&e.getBackgroundItem()!=t},o}return J(e,t),e.prototype.execute=function(){return $(this,void 0,void 0,function(){var t,e,n,r;return Q(this,function(o){switch(o.label){case 0:return null==(t=this._productHandler.currentSurface)?[2]:null==(e=t.printAreas)||e.count()<=0?[2]:null==(n=t.getAllItems({ignoreMockups:!0}).toArray())||n.length<=0?[2]:null==this._canvas?[2]:(null==r&&(r=n.reverse().find(this._canSelectItem)),[4,this._canvas.waitUpdate()]);case 1:return o.sent(),null!=r&&this._commandManager.execute(wt.selectItems,{items:[r],multiselection:!1}),[2]}})})},e}(U.a),tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},nt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},rt=function(t){function e(e){var n=t.call(this,null)||this;return n._canvas=e,n}return tt(e,t),e.prototype.execute=function(){return et(this,void 0,void 0,function(){return nt(this,function(t){return this._canvas.clearSelectedItemHandlers(),this._canvas.redraw(),[2]})})},e}(U.a),ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},at=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},st=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},lt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(st(arguments[e]));return t},ut=function(t){function e(e,n,r,o,i){var a=t.call(this,r.items,n,r)||this;return a._productHandler=e,a._commandManager=o,a._variableItemHelper=i,a}return ot(e,t),e.prototype._executeCommandBody=function(){return it(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s,l,u=this;return at(this,function(c){switch(c.label){case 0:return 0==this._items.length?[2]:(t=this._items[0].parentContainer,e=this._items[0].parentGroupItem,n=this._items.map(function(t){return u.cloneItem(t)}),r=[],o=[],i=[],a=function(t,a){var s=u._items.findIndex(function(e){return e===t});if(s>-1&&(r.push(a),o.push({item:n[s],index:a}),e instanceof v.LayoutItem)){var l=e.getItemOrderIndex(t);i.push({clone:n[s],orderIndex:l+1})}},e?e.items.toArray().forEach(a):t.items.toArray().forEach(a),s=Math.max.apply(Math,lt(r))+1,l=o.sort(function(t,e){return t.index-e.index}).reverse().map(function(t){return t.item}),e?(e instanceof v.LayoutItem?i.sort(function(t,e){return t.orderIndex-e.orderIndex}).reverse().forEach(function(t){return e.addItem(t.clone,null,t.orderIndex)}):e.addItems(l,s),[3,3]):[3,1]);case 1:return[4,this._commandManager.execute(vt.addItems,{surface:t.parentComponent,targetContainer:t,items:l,selectOnCanvas:!0,index:s,ignoreOrderRules:null,ignoreCanvasRotate:!0,createCloneName:!0})];case 2:c.sent(),c.label=3;case 3:return[4,this._commandManager.execute(wt.selectItems,{items:n})];case 4:return c.sent(),[2]}})})},e.prototype.cloneItem=function(t){var e=t.clone(!0),n=5,r=5,o=this._productHandler.contentAngle;o>0&&(90!==o&&180!==o||(r=-5),180!==o&&270!==o||(n=-5));var i=this._productHandler.regionForCurrentContainer,a=b.a.getItemBoundsForViolationCheck(this._productHandler.getHandler(t));a.left+=n,a.top+=r;var s=0,l=0;null==i||i.containsRectangle(a)||(s=i.right-a.right,l=i.bottom-a.bottom,s=s<0?s:0,l=l<0?l:0);var u=function(t){t.transform.move(n+s,r+l),t instanceof v.PlaceholderItem&&t.updateContentAndFrames(u),t instanceof v.GroupItem&&t.applyToItems(u)};for(var c in u(e),e)-1!=c.indexOf("$$")&&delete e[c];return e},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),ct=n(407),ht=n(558),pt=n(746),ft=n(383),dt=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yt=function(){function t(){}return t.prototype.convert=function(t){var e=this._replaceInterpolationStrings(t);if(e.isEmpty)return!1;t.originalText=e.inStringText,t.text=e.inStringText;var n=t.placeholders;return t.placeholders.addRange(n.concat(e.placeholders)),!0},t.prototype._replaceInterpolationStrings=function(t){var e,n,r=pt.a.getInterpolationVariables(t),o=new gt;if(R.isEmpty(r))return o;var i,a,s=t.text;try{for(var l=dt(r),u=l.next();!u.done;u=l.next()){var c=u.value,h="[#"+c.name+"]",p="{{"+c.name+"}}";s=ft.m(t.text)?mt(s,p,h):(i=p,a=h,s.replace(i,a));var f=new ht.a(h,c.name,c.mask,c.name,c.values);o.placeholders.push(f)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return o.inStringText=s,o},t}(),gt=function(){function t(){this.placeholders=[]}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return R.isEmpty(this.placeholders)},enumerable:!0,configurable:!0}),t}();function mt(t,e,n){var r=(new DOMParser).parseFromString("<body>"+t+"</body>","text/xml").getElementsByTagName("body")[0];if(!r.textContent.includes(e))return t;for(var o=r,i=null;o!==i;){if(!(o=R.find(o.childNodes,function(t){return t.textContent.includes(e)})))return t;R.isEmpty(o.childNodes)&&(i=o)}return i.textContent=i.textContent.replace(e,n),r.innerHTML}var _t,vt,bt,wt,Ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},xt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ot=function(t){function e(e,n,r,o){var i=t.call(this,r,n)||this;return i._productHandler=e,i._canvas=o,i}return Ct(e,t),e.prototype._executeCommandBody=function(){return Pt(this,void 0,void 0,function(){return xt(this,function(t){return this.replaceInterpolationPlaceholders(),[2]})})},e.prototype.replaceInterpolationPlaceholders=function(){var t=R.filter(this._product.getAllItems({ignoreMockups:!1,flatGroupItems:!0}),function(t){return t instanceof ct.a}),e=new yt,n=[];return t.forEach(function(t){e.convert(t)&&n.push(t)}),n.length>0&&b.a.updateItems(n,this._productHandler,this._canvas),n},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(h),It=n(404),St=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},jt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Rt=function(t){function e(e,n,r,o,i){var a=t.call(this,n,e,r)||this;return a._productThemeManager=o,a._commandManager=i,a}return St(e,t),e.prototype._executeCommandBody=function(){return Tt(this,void 0,void 0,function(){return jt(this,function(t){return[2,this._productThemeManager.applyProductTheme(this._args.theme,this._product,this._commandManager)]})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(h),kt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Et=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},At=function(t){function e(e,n,r,o,i){var a=t.call(this,[r.placeholder],n,r)||this;return a._productHandler=e,a._productThemeManager=o,a._eventManager=i,a}return kt(e,t),e.prototype._executeCommandBody=function(){return Bt(this,void 0,void 0,function(){var t,e,n,r,o;return Et(this,function(i){return t=this._args.content,e=this._args.placeholder,n=this._productHandler.getHandler(e),null!=t?(r=this._productHandler.getHandler(t),e.content=t,o=this._productThemeManager.currentProductTheme,e.contentPermissions.imagePermissions.allowKeepOverlayColor||null!=e.contentOverlayEffect?null!=o&&this._productThemeManager.applyToItem(e,o):e.imageContent.overlayEffect=null,n.content=r,e.content.getItemChangedEvent().fire()):(e.content=null,n.content=null,e.itemPermissions.itemToolbarPermissions.showEditButton=!0),this._eventManager.imageContentChangedEvent.fire(e),[2]})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Ft=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},zt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Lt=function(t){function e(e,n,r,o){var i=t.call(this,r.items,n,r)||this;return i._productHandler=e,i._canvas=o,i}return Ft(e,t),e.prototype._executeCommandBody=function(){return Mt(this,void 0,void 0,function(){var t;return zt(this,function(e){if(0===this._items.length)return[2];for(t=0;t<this._items.length;t++)this.alignItem(this._items[t],this._args.align);return this._canvas.updateTexts(),[2]})})},e.prototype.alignItem=function(t,e){var n=t.locked?null:this._productHandler.getHandler(t);null!=n&&n instanceof q.b&&this._canvas.alignItemHandler(n,e)},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ht=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Dt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Vt=function(t){function e(e,n,r){var o=t.call(this,null,e,n)||this;return o._canvas=r,o}return Nt(e,t),e.prototype._executeCommandBody=function(){return Ht(this,void 0,void 0,function(){return Dt(this,function(t){return this._canvas.alignItemHandlers(this._args.align),[2]})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Wt=n(415),Ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Gt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xt=function(t){function e(e,n,r,o,i){var a=t.call(this,r.items,n,r)||this;return a._productHandler=e,a._commandManager=o,a._canvas=i,a}return Ut(e,t),e.prototype._executeCommandBody=function(){return qt(this,void 0,void 0,function(){return Gt(this,function(t){return[2,this.bringItems(this._items,this._args.position)]})})},e.prototype.bringItems=function(t,e){var n=this;if(0!==t.length){var r=this._productHandler.currentSurface;"front"===e||"levelUp"===e?r.containers.reverse().forEach(function(r){return r.items.reverse().forEach(function(r){r instanceof Wt.a&&R.contains(t,r)&&n.bringItem(r,e,!1)})}):"bottom"!==e&&"levelDown"!==e||r.containers.forEach(function(r){return r.items.forEach(function(r){r instanceof Wt.a&&R.contains(t,r)&&n.bringItem(r,e,!1)})});var o=t.map(function(t){return n._productHandler.getHandler(t)});this._canvas.setSelectedItemHandlers(o),this._canvas.updateTexts()}},e.prototype.bringItem=function(t,e,n){if(null==n&&(n=!0),t.itemPermissions.allowZOrderChange){var r=t.parentContainer.items.toArray(),o=R.indexOf(r,t),i=r.length-1,a=o;if(o>=0)switch(e){case"front":a=i;break;case"levelUp":a=Math.min(o+1,i);break;case"levelDown":a=Math.max(o-1,0);break;case"bottom":a=0}this._commandManager.execute(bt.moveItem,{item:t,newIndex:a,needUpdate:n})}},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Yt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Jt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},$t=function(t){function e(e,n,r){var o=t.call(this,[r.item],n,r)||this;return o._productHandler=e,o}return Yt(e,t),e.prototype._executeCommandBody=function(){return Kt(this,void 0,void 0,function(){return Jt(this,function(t){return[2,this.moveTo(this._args.item,this._args.newIndex,this._args.needUpdate)]})})},e.prototype.moveTo=function(t,e,n){null==n&&(n=!0);var r=null!=t?t.parentContainer:null;if(null!=r){var o=r.items.toArray(),i=Math.max(o.length-1,0),a=R.indexOf(o,t);e=Math.min(Math.max(e,0),i),a=Math.min(Math.max(a,0),i);var s=this._getMoveRange(o,a);if(null==s)return;if(e<s[0]?e=s[0]:e>s[1]&&(e=s[1]),a===e)return;r.items.move(a,e),this._productHandler.redraw()}},e.prototype._getMoveRange=function(t,e){if(e<0)return null;if(null==t)return null;if(e>=t.length)return null;for(var n=e,r=e,o=e-1;o>=0;o--){if(!t[o].itemPermissions.allowZOrderChange)break;n=o}for(o=e+1;o<t.length;o++){if(!t[o].itemPermissions.allowZOrderChange)break;r=o}return[n,r]},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Qt=n(747),Zt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),te=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},ee=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ne=function(t){function e(e,n,r,o){var i=t.call(this,[],r,o)||this;return i._itemsDataApplier=e,i._productHandler=n,i}return Zt(e,t),e.prototype._executeCommandBody=function(){return te(this,void 0,void 0,function(){var t,e,n,r,o,i=this;return ee(this,function(a){switch(a.label){case 0:t=null!=this._args.items?this._args.items:this._productHandler.selectedItems,e=!1,n=t.filter(function(t){return t instanceof(i._args.type||Object)}),r=0,a.label=1;case 1:return r<n.length?(o=n[r],[4,this._itemsDataApplier.applyToItem(o,this._args.itemData,this._args.applyParams)]):[3,4];case 2:e=a.sent()||e,a.label=3;case 3:return r++,[3,1];case 4:return this._productHandler.redraw(),[2]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),re=n(437),oe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ie=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},ae=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},se=function(t){function e(e,n,r){var o=t.call(this,[],n,e)||this;return o._productHandler=r,o}return oe(e,t),e.prototype._executeCommandBody=function(){return ie(this,void 0,void 0,function(){var t,e,n=this;return ae(this,function(r){return t=null!=this._args.items?this._args.items:this._productHandler.selectedItems,e=this._args.scale,t.forEach(function(t){if(t instanceof v.PlaceholderItem){var r=n._productHandler.getHandler(t);r.forceQualityChangeInfoBar=null!=n._args.forceQualityChangeInfoBar&&n._args.forceQualityChangeInfoBar,Object(re.d)(r.getContentScale(),e)||r.setContentScale(e),n._historyArgs.historyUpdateMode!==u.a.NotUpdate&&r.quickUpdate()}}),this._productHandler.updateSelection(),this._productHandler.redraw(),[2]})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),le=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ue=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},ce=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},he=function(t){function e(e,n,r){var o=t.call(this,[],n,e)||this;return o._productHandler=r,o}return le(e,t),e.prototype._executeCommandBody=function(){return ue(this,void 0,void 0,function(){var t=this;return ce(this,function(e){return(null!=this._args&&null!=this._args.items?this._args.items:this._productHandler.selectedItems).forEach(function(e){e instanceof v.PlaceholderItem&&t._productHandler.getHandler(e).resetContent()}),[2]})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),pe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fe=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},de=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ye=function(t){function e(e,n,r){var o=t.call(this,[],n,e)||this;return o._productHandler=r,o}return pe(e,t),e.prototype._executeCommandBody=function(){return fe(this,void 0,void 0,function(){var t,e,n=this;return de(this,function(r){return null==this._args.barcodeFormat?[2]:(t=null!=this._args.items?this._args.items:this._productHandler.selectedItems,R.isEmpty(t)?[2]:((e=new v.BarcodeData).barcodeFormat=this._args.barcodeFormat,e.barcodeSubType=this._args.barcodeFormat===v.BarcodeFormat.QR_CODE?v.BarcodeSubType.VCard:v.BarcodeSubType.None,t.filter(function(t){return t instanceof v.PlaceholderItem}).forEach(function(t){if(null==t.content||null==t.barcodeFormat||!(t.content instanceof v.BarcodeItem))return!1;t.content=b.a.createImageContentForPlaceholder(t,e,n._productHandler),t.content.barcodeContent=null,t.isStubContent=!0,n._productHandler.getHandler(t).content=n._productHandler.getHandler(t.content)}),[2]))})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),ge=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),me=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},_e=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ve=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},be=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ve(arguments[e]));return t},we=function(t){function e(e,n,r){var o=t.call(this,[],n,e)||this;return o._productHandler=r,o}return ge(e,t),e.prototype._executeCommandBody=function(){return me(this,void 0,void 0,function(){var t=this;return _e(this,function(e){return(null!=this._args.items?this._args.items:this._productHandler.selectedItems).filter(function(t){return t instanceof v.PathBoundedTextItem}).forEach(function(e){return t._setColumnCount(e,t._args.value)}),[2]})})},e.prototype._setColumnCount=function(t,e){for(var n=function(t){return function(t){if(0===t.length)return _.RectangleF.empty;var e=Math.min.apply(Math,be(t.map(function(t){return t.left}))),n=Math.max.apply(Math,be(t.map(function(t){return t.right}))),r=Math.min.apply(Math,be(t.map(function(t){return t.top}))),o=Math.max.apply(Math,be(t.map(function(t){return t.bottom})));return _.RectangleF.FromLTRB(e,r,n,o)}(t.map(function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.position="absolute",e.style.visibility="hidden";var n=document.createElementNS("http://www.w3.org/2000/svg","path");e.appendChild(n),n.setAttribute("d",t.toString());var r=document.querySelector("body");r.appendChild(e);var o=(i=n.getBBox(),new _.RectangleF(i.x,i.y,i.width,i.height));var i;return r.removeChild(e),o}))}(t.boundingPaths),r=(n.width-10*(e-1))/e,o=[],i=0;i<e;i++){var a=n.left+(r+10)*i,s=n.top,l=a+r,u=s+n.height,c=new _.Path;c.moveTo(a,s),c.lineTo(l,s),c.lineTo(l,u),c.lineTo(a,u),c.lineTo(a,s),o.push(c)}t.boundingPaths=o},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Ce=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pe=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},xe=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Oe=function(t){function e(e,n,r){var o=t.call(this,[],n,e)||this;return o._productHandler=r,o}return Ce(e,t),e.prototype._executeCommandBody=function(){return Pe(this,void 0,void 0,function(){var t,e,n=this;return xe(this,function(r){return t=null!=this._args.items?this._args.items:this._productHandler.selectedItems,e=null==this._args.clockwise||this._args.clockwise,t.filter(function(t){return t instanceof v.PlaceholderItem}).forEach(function(t){var r=n._productHandler.getHandler(t);return e?r.rotateContentRight():r.rotateContentLeft()}),[2]})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Ie=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Se=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Te=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},je=function(t){function e(e,n,r,o){var i=t.call(this,[],n,e)||this;return i._productHandler=r,i._commandManager=o,i}return Ie(e,t),e.prototype._executeCommandBody=function(){return Se(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s,l,u=this;return Te(this,function(c){switch(c.label){case 0:return t=this._args,e=t.items,n=t.selectOnCanvas,[4,Promise.all(e.map(function(t){return b.a.positionItemInArea(u._productHandler,t,u._args.sourceWidth,u._args.sourceHeight,!1),u._commandManager.execute(vt.addItems,{items:[t],selectOnCanvas:!1,ignoreOrderRules:!0,ignoreCanvasRotate:!1})}))];case 1:return c.sent(),(r=this._productHandler.contentAngle)>0?[4,this._productHandler.waitUpdate()]:[3,3];case 2:c.sent(),o=this._productHandler.userEditContainer,i=this._productHandler.userEditPrintArea,a=o.region,s=null!=a?a:i.bounds,l=s.center,b.a.rotateItems(this._productHandler,e,l,-r),c.label=3;case 3:return n&&this._commandManager.execute(wt.selectItems,{items:e.filter(function(t){return!t.locked})}),[2]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Re=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Be=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ee=function(t){function e(e,n,r,o,i){var a=t.call(this,[],n,e)||this;return a._productHandler=r,a._product=o,a._commandManager=i,a}return Re(e,t),e.prototype._executeCommandBody=function(){return ke(this,void 0,void 0,function(){var t,e,n,r,o=this;return Be(this,function(i){switch(i.label){case 0:return t=this._productHandler.userEditContainer,e=this._product.getAllItems({ignoreMockups:!0}).filter(function(e){var n=e.parentContainer.parentComponent===o._productHandler.currentSurface,r=e.parentContainer.id===t.id,i=e.itemPermissions.allowRemoveOnLayoutChange;return n&&r&&i}),n=function(t){return t instanceof v.BaseTextItem&&0===t.placeholders.length&&0===t.values.length},r=e.filter(function(t){return t instanceof v.PlaceholderItem||n(t)}),this._args.items.forEach(function(t){t.fromLayout=!0,t.itemPermissions.allowRemoveOnLayoutChange=!0,b.a.positionItemInArea(o._productHandler,t,o._args.sourceWidth,o._args.sourceHeight,!0),o._commandManager.execute(vt.addItems,{items:[t],selectOnCanvas:!1,ignoreOrderRules:!0,ignoreCanvasRotate:!0,createCloneName:null==r||null==r.find(function(e){return e.name===t.name})})}),[4,this._productHandler.waitUpdate()];case 1:return i.sent(),b.a.changeItemsContent(this._product,this._productHandler,this._commandManager,r,this._args.items,!0),0!==e.length&&this._commandManager.execute(bt.deleteItems,{items:e,force:!0}),[2]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Ae=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Me=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ze=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Le=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ze(arguments[e]));return t},Ne=function(t){function e(e,n,r){var o=t.call(this,null,e,n)||this;return o._commandManager=r,o}return Ae(e,t),e.prototype._executeCommandBody=function(){return Fe(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s,l,u,c,h;return Me(this,function(p){switch(p.label){case 0:return t=this._args,e=t.items,n=t.asLayoutItem,null==e||0===e.length?[2]:(r=ze(e,1),o=r[0],i=o.parentContainer,a=o.parentGroupItem,s=(null!=a?a.items:i.items).toArray(),e.some(function(t){return t.parentGroupItem!==a})?[2]:(l=Math.max.apply(Math,Le(e.map(function(t){return s.indexOf(t)})))-e.length+1,u=e.sort(function(t,e){return s.indexOf(t)-s.indexOf(e)}),c=u.map(function(t){return t.clone()}),(h=n?new v.LayoutItem(c):new v.GroupItem(c)).name="Group item",this._commandManager.execute(wt.clearSelection),this._commandManager.execute(bt.deleteItems,{items:e,force:!0,autoUngroup:!1,autoParentGroupDelete:!1}),[4,this._commandManager.execute(vt.addItems,{items:[h],targetContainer:i,index:l,selectOnCanvas:!0,targetGroupItem:a})]));case 1:return p.sent(),[2]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),He=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),De=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Ve=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},We=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ue=function(t){function e(e,n,r){var o=t.call(this,null,e,n)||this;return o._commandManager=r,o}return He(e,t),e.prototype._executeCommandBody=function(){return De(this,void 0,void 0,function(){var t,e,n;return Ve(this,function(r){switch(r.label){case 0:return t=this._args,e=t.items,n=t.keepNestedGroups,[4,this._ungroupItems(e,n)];case 1:return r.sent(),[2]}})})},e.prototype._ungroupItems=function(t,e){return void 0===e&&(e=!1),De(this,void 0,void 0,function(){var n,r,o=this;return Ve(this,function(i){switch(i.label){case 0:return[4,this._commandManager.execute(wt.clearSelection)];case 1:return i.sent(),n=this._historyArgs.history,0===t.length?[2]:!e&&t.every(function(t){return t instanceof v.GroupItem&&t.groupItemPermissions.allowUngroup})?(n.pause(),t.forEach(function(t){return o._ungroupItems(t.items.toArray(),!0)}),n.resume(),[2]):t.every(function(t,e,n){var r=We(n,1)[0];return null!=t.parentGroupItem&&t.parentGroupItem===r.parentGroupItem})?(n.pause(),[4,this._extractItemsFromGroupItem(t)]):[2];case 2:return r=i.sent(),n.resume(),[4,this._commandManager.execute(wt.selectItems,{items:r})];case 3:return i.sent(),[2]}})})},e.prototype._extractItemsFromGroupItem=function(t){return De(this,void 0,void 0,function(){var e,n,r,o,i,a,s,l,u;return Ve(this,function(c){switch(c.label){case 0:return(e=t[0].parentGroupItem).items.toArray().filter(function(e){return!t.includes(e)}).length<2&&(t=e.items.toArray()),n=t.map(function(t){return t.clone()}).reverse(),r=e.parentContainer,o=e.parentGroupItem,i=null!=o?o.items.toArray():r.items.toArray(),a=i.indexOf(e),s=null,o instanceof v.LayoutItem&&(l=o.getItemsOrder(),u=l.indexOf(e.id),s=u),[4,this._commandManager.execute(bt.deleteItems,{items:t,force:!0,autoUngroup:!1,autoParentGroupDelete:!0})];case 1:return c.sent(),0!==e.items.length?[3,3]:[4,this._commandManager.execute(bt.deleteItems,{items:[e],force:!0,autoUngroup:!1})];case 2:c.sent(),c.label=3;case 3:return[4,this._commandManager.execute(vt.addItems,{targetContainer:r,items:n,index:a,orderIndex:s,selectOnCanvas:!1,targetGroupItem:o})];case 4:return c.sent(),[2,n]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),qe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ge=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Xe=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ye=function(t){function e(e,n,r,o,i,a,s){var l=t.call(this,null,e,n)||this;return l._productHandler=r,l._product=o,l._commandManager=i,l._productThemeManager=a,l._canvas=s,l}return qe(e,t),e.prototype._executeCommandBody=function(){return Ge(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s,l;return Xe(this,function(u){switch(u.label){case 0:return t=this._args,e=t.targetGroupItem,n=t.newItems,null==e||null==n||n.length<1?[2]:(r=!1,o=this._productHandler.getHandler(e),i=o.getTransformedRectangle(r),a=e.items.toArray(),b.a.changeItemsContent(this._product,this._productHandler,this._commandManager,a,n,!1),e.items.clear(),e.addItems(n),(s=e.getNestedItems(!0).filter(function(t){return t instanceof v.BaseTextItem})).length>0?[4,b.a.waitForItemsUpdated(s,this._canvas)]:[3,2]);case 1:u.sent(),u.label=2;case 2:return l=o.getTransformedRectangle(r).bounds,b.a.positionItemInArea(this._productHandler,e,l.width,l.height,!0,i,l.center,r),null!=this._productThemeManager.currentProductTheme&&this._updateAppliedProductTheme(),0===i.angle?[3,5]:s.length>0?[4,b.a.waitForItemsUpdated(s,this._canvas)]:[3,4];case 3:u.sent(),u.label=4;case 4:b.a.rotateItems(this._productHandler,[e],i.center,i.angle),u.label=5;case 5:return this._commandManager.execute(wt.selectItems,{items:[e]}),[2]}})})},e.prototype._updateAppliedProductTheme=function(){this._commandManager.execute(_t.applyProductTheme,{theme:this._productThemeManager.currentProductTheme})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Ke=n(495),Je=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$e=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Qe=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ze=function(t){function e(e,n){return t.call(this,null,e,n)||this}return Je(e,t),e.prototype._executeCommandBody=function(){return $e(this,void 0,void 0,function(){var t,e,n,r;return Qe(this,function(o){if(t=this._args,e=t.clipartItem,n=t.colorGroup,r=t.newColor,!(e instanceof Ke.a)||null==n||null==r)throw new Error("ChangeClipartItemColorCommand: Uncorrect arguments");if(!(r instanceof w.Color||r.color instanceof w.Color))throw new Error("ChangeClipartItemColorCommand: Uncorrect color");return e.setColor(n,r),[2]})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),tn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),en=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},nn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},rn=function(t){function e(e,n,r,o){var i=t.call(this,n,e,r)||this;return i._commandManager=o,i}return tn(e,t),e.prototype._executeCommandBody=function(){return en(this,void 0,void 0,function(){var t,e;return nn(this,function(n){switch(n.label){case 0:return t=b.a.getEmptyPlaceholdersFromProduct(this._product),e=this._args.metadataList.map(function(e,n){return{imageData:e,item:t[n]}}).filter(function(t){return null!=t.item}),[4,this._commandManager.execute(bt.setImageMetadata,{dataList:e})];case 1:return n.sent(),[2,e.map(function(t){return t.item})]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(h),on=n(44),an=n(505),sn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ln=function(){return(ln=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},un=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},cn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},hn=function(t){function e(e,n,r,o,i,a){var s=t.call(this,n,e,r)||this;return s._productHandler=o,s._commandManager=i,s._canvas=a,s._executeCommandBody=function(){return un(s,void 0,void 0,function(){var t,e,n,r=this;return cn(this,function(o){switch(o.label){case 0:null!=this._canvas&&this._canvas.pauseRedraw(),o.label=1;case 1:return o.trys.push([1,,4,7]),t=this._convertedArgs.target,e=this._items.map(this._productHandler.getHandler),null==this._canvas?[3,3]:(n=this._canvas.getAllItemHandlers(),[4,Promise.all(e.filter(function(t){return t instanceof q.c&&!n.includes(t)}).map(function(t){return t.updateForExternalCanvas(r._canvas),t.waitUpdate()}))]);case 2:o.sent(),o.label=3;case 3:return e.forEach(function(t){t._startTransform(),t.beginUpdate()}),t instanceof It.Product?this._resizeProduct(t):t instanceof It.PrintArea?this._resizePrintArea(t):R.isArray(t)&&(t[0]instanceof It.Surface?t.forEach(function(t){return r._resizeSurface(t)}):t[0]instanceof v.Item&&this._resizeItems(t)),this._items.map(this._productHandler.getHandler).forEach(function(t){t.endTransform(!0,!0),t.endUpdate()}),[3,7];case 4:return null==this._canvas?[3,6]:[4,this._canvas.waitUpdate()];case 5:o.sent(),this._canvas.updateSelection(),this._canvas.continueRedraw(),this._canvas.updateTexts(),o.label=6;case 6:return[7];case 7:return[2]}})})},s._resizeProduct=function(t){t.surfaces.forEach(function(t){return s._resizeSurface(t)})},s._resizeSurface=function(t){var e=new _.RectangleF(0,0,t.width,t.height),n=s._getTransformMatrix(e,an.a.Left,an.a.Top);t.mockup.allContainers.forEach(function(e){return s._resizeMockupContainer(e,n,t)}),t.printAreas.forEach(function(t){return s._resizePrintAreaBounds(t,n)}),t.containers.forEach(function(e){return s._resizeContainer(e,n,t)}),n.updateObjectByMatrix(t,"width","height")},s._resizeMockupContainer=function(t,e,n){null!=t.size&&t.size.updateByMatrix(e),s._resizeContainer(t,e,n)},s._resizeContainer=function(t,e,n,r){void 0===r&&(r=null),null!=t.region&&t.region.updateByMatrix(e);var o=function(t){return r.bounds.intersectsWith(s._productHandler.getHandler(t).bounds)},i=t.items.toArray().filter(function(t){return null==r||o(t)}),a=s._getResizeOptions(t).resize,l=s._getItemsMatrix(i,a,e,n),u=s._getResizeOptions(t).resetPlaceholderContent;t.items.forEach(function(t){var n=null!=r?s._getTranslateMatrixRelativeToPrintArea(r.bounds,s._productHandler.getHandler(t).bounds,o(t)?l:e):l;s._resizeItem(t,n,u)})},s._resizeItems=function(t){var e;if(s._getResizeOptions().resize===re.b.Original)throw new l.c("Original type not supported when resizing items.");if(1===t.length){var n=s._productHandler.getHandler(t[0]).rectangle;n.angle=0,e=n.bounds}else e=s._getItemsBounds(t);var r=s._getTransformMatrix(e),o=s._getItemsMatrix(t,s._getResizeOptions().resize,r,null);t.forEach(function(t){var e;return s._resizeItem(t,o,null===(e=s._defaultResizeOptions.resetPlaceholderContent)||void 0===e||e)})},s._resizeItem=function(t,e,n){var r=function(t){var n;t.transformByMatrix(e);var r=t.item;r instanceof v.ImageItem&&(null===(n=r.values)||void 0===n||n.filter(function(t){return null!=(null===t||void 0===t?void 0:t.transformedRectangle)}).forEach(function(t){t.transformedRectangle=t.transformedRectangle.transformByMatrix(e)}))},o=function(t){n&&null!=t.content&&t.content.updateRectangle(!1,t.item.contentResizeMode,t)},i=s._productHandler.getHandler(t);r(i),i instanceof q.l&&(i.updateContentAndFrames(r),o(i)),i instanceof q.e&&i.itemHandlers.toArray().filter(function(t){return t instanceof q.l}).forEach(o)},s._resizePrintAreaBounds=function(t,e){t.bounds.updateByMatrix(e)},s._resizePrintArea=function(t){var e=s._product.surfaces.toArray().find(function(e){return e.printAreas.contains(t)}),n=s._getMatrixForPrintArea(t);e.containers.forEach(function(r){return s._resizeContainer(r,n,e,t)}),e.printAreas.forEach(function(e){e!==t&&s._resizePrintAreaBounds(e,s._getTranslateMatrixRelativeToPrintArea(t.bounds,e.bounds,n))}),s._resizePrintAreaBounds(t,n),s._resizeSurfaceByPrintArea(e)},s._resizeSurfaceByPrintArea=function(t){var e=_.RectangleF.getOverallBounds(t.printAreas.toArray().map(function(t){return t.bounds}));new _.RectangleF(0,0,t.width,t.height).containsRectangle(e)||(t.width=Math.max(t.width,e.right),t.height=Math.max(t.height,e.bottom),e.left>=0||e.top>=0||s._commandManager.execute(bt.translateItems,{items:t.getAllItems().toArray(),translateX:-Math.min(0,e.left),translateY:-Math.min(0,e.top)}))},s._getTransformMatrix=function(t,e,n){void 0===e&&(e=an.a.Center),void 0===n&&(n=an.a.Center);var r=Object(re.g)(t,e,n),o=new _.Matrix;return o.scaleRelativeToPoint(s._getScaleMultiplier(s._args.width,t.width),s._getScaleMultiplier(s._args.height,t.height),r),o},s._getScaleMultiplier=function(t,e){if("string"==typeof t){if(/%$/.test(t))return Number(t.split(/%/)[0])/100;var n=parseFloat(t);if(isNaN(n))throw new l.a("ResizeCommand: Wrong string format: "+t);t=n}if(t<=0)throw new l.a("ResizeCommand: Wrong value: "+t);if(e<=0)throw new l.a("ResizeCommand: Wrong parentSize: "+e);return t/e},s._convertedArgs=null!=s._args.target?s._args:s._convertExternalConfig(s._args),s}return sn(e,t),Object.defineProperty(e.prototype,"_items",{get:function(){var t=this._convertedArgs.target;if(t instanceof It.Product)return t.getAllItems();if(t instanceof It.PrintArea){var e=this._product.surfaces.firstOrDefault(function(e){return e.printAreas.contains(t)});return null==e?[]:e.getAllItems().toArray()}return R.isArray(t)?t[0]instanceof v.Item?t:t[0]instanceof It.Surface?R.flatten(t.map(function(t){return t.getAllItems().toArray()})):[]:[]},enumerable:!0,configurable:!0}),e.prototype._getTranslateMatrixRelativeToPrintArea=function(t,e,n){var r=new _.Matrix;if(e.bottom<=t.top||e.right<=t.left)return r;if(t.intersectsWith(e))return n;var o=t.clone().updateByMatrix(n);return r.translate(e.left>t.right||Object(re.d)(t.right-e.left,0)?o.right-t.right:0,e.top>t.bottom||Object(re.d)(t.bottom-e.top,0)?o.bottom-t.bottom:0),r},e.prototype._getItemsMatrix=function(t,e,n,r){var o;if(e!==re.b.Original){var i=this._getItemsBounds(t),a=i.clone().updateByMatrix(n),s=Object(re.e)(i,a,e);o=_.RectangleF.getMatrix(i,s)}else o=this._getTranslateMatrixForOriginalMode(n,r);return o},e.prototype._getTranslateMatrixForOriginalMode=function(t,e,n,r){void 0===n&&(n=an.a.Center),void 0===r&&(r=an.a.Center);var o=new _.RectangleF(0,0,e.width,e.height),i=Object(re.g)(o,n,r),a=o.updateByMatrix(t),s=Object(re.g)(a,n,r),l=new _.Matrix;return l.translate(s.x-i.x,s.y-i.y),l},e.prototype._getResizeOptions=function(t){var e=this;return Object(on.maybe)(this._args.containerOptions).bind(function(e){return Object(on.maybe)(t).map(function(t){return e[t.name]})}).caseOf({just:function(t){return ln(ln({},e._defaultResizeOptions),t)},nothing:function(){return e._defaultResizeOptions}})},Object.defineProperty(e.prototype,"_defaultResizeOptions",{get:function(){return ln({resize:re.b.Fit,resetPlaceholderContent:!0},this._args.defaultOptions||{})},enumerable:!0,configurable:!0}),e.prototype._getItemsBounds=function(t){var e=this;return R.isEmpty(t)?_.RectangleF.empty:_.RectangleF.getOverallBounds(t.map(function(t){return e._productHandler.getHandler(t).bounds}))},e.prototype._getMatrixForPrintArea=function(t){return this._getTransformMatrix(t.bounds,an.a.Left,an.a.Top)},e.prototype._convertExternalConfig=function(t){var e;switch(t.targetType){case"surfaces":if(R.isEmpty(t.targetIds))throw new l.a("ResizeCommand: target Ids cannot be empty");e=this._product.surfaces.toArray().filter(function(e){return t.targetIds.includes(e.id)});break;case"items":if(R.isEmpty(t.targetIds))throw new l.a("ResizeCommand: target Ids cannot be empty");e=this._productHandler.currentSurface.getAllItems({ignoreMockups:!1,flatGroupItems:!0}).toArray().filter(function(e){return t.targetIds.includes(e.id)});break;case"printArea":if(R.isEmpty(t.targetIds))throw new l.a("ResizeCommand: target Ids cannot be empty");e=R.flatten(this._product.surfaces.toArray().map(function(t){return t.printAreas.toArray()})).find(function(e){return t.targetIds.includes(e.id)});break;default:e=this._product}return{target:e,width:t.width,height:t.height,containerOptions:t.containerOptions,defaultOptions:t.defaultOptions}},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(h),pn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},dn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},yn=function(t){function e(e,n,r,o){var i=t.call(this,[],e,n)||this;return i._productHandler=r,i._canvas=o,i._convertedArgs=null!=n.items?n:i._convertExternalConfig(n),i._items=i._convertedArgs.items,i}return pn(e,t),e.prototype._executeCommandBody=function(){return fn(this,void 0,void 0,function(){var t,e=this;return dn(this,function(n){null!=this._canvas&&this._canvas.pauseRedraw();try{t=this._transformMatrix,this._items.forEach(function(n){var r=function(n){e._productHandler.getHandler(n).transformByMatrix(t)};r(n),n instanceof v.PlaceholderItem&&n.updateContentAndFrames(r)})}finally{null!=this._canvas&&this._canvas.continueRedraw()}return[2]})})},Object.defineProperty(e.prototype,"_transformMatrix",{get:function(){var t=this._parentRectangle,e=Object(ft.o)(this._args.translateX,t.width),n=Object(ft.o)(this._args.translateY,t.height),r=new _.Matrix;return r.translate(e,n),r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_parentRectangle",{get:function(){return Object(on.maybe)(this._items[0]).map(function(t){return t.parentContainer}).map(function(t){return{surface:t.parentComponent,container:t}}).map(function(t){var e=t.surface,n=t.container;return{printArea:e.printAreas.get(0),container:n}}).map(function(t){var e=t.printArea,n=t.container;return Object(on.maybe)(n.region).caseOf({just:function(t){return _.RectangleF.union(e.bounds,t)},nothing:function(){return e.bounds}})}).caseOf({just:function(t){return new v.Size(t.width,t.height)},nothing:function(){return new v.Size(100,100)}})},enumerable:!0,configurable:!0}),e.prototype._convertExternalConfig=function(t){if(R.isEmpty(t.itemIds))throw new l.a("TranslateItemsCommand: itemIds cannot be null.");return{items:this._productHandler.currentSurface.getAllItems({ignoreMockups:!1,flatGroupItems:!0}).toArray().filter(function(e){return t.itemIds.includes(e.id)}),translateX:t.translateX,translateY:t.translateY}},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),gn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},_n=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},vn=function(t){function e(e,n,r,o){var i=t.call(this,r.items,n,r)||this;return i._productHandler=e,i._cm=o,i}return gn(e,t),e.prototype._executeCommandBody=function(){return mn(this,void 0,void 0,function(){var t,e,n,r,o,i,a=this;return _n(this,function(s){switch(s.label){case 0:return t=this._args,e=t.align,n=t.group,r=t.items,n&&r?(o=this._productHandler.getHandler(n).bounds,i=r.map(function(t){return n.items.toArray().includes(t)?a.alignItemIntoGroup(t,e,o):Promise.resolve()}),[4,Promise.all(i)]):[2];case 1:return s.sent(),[2]}})})},e.prototype.alignItemIntoGroup=function(t,e,n){return mn(this,void 0,void 0,function(){var r,o,i,a,s,l,u,c,h,p,f,d,y,g,m;return _n(this,function(_){switch(_.label){case 0:switch(r=n.top,o=n.bottom,i=n.left,a=n.right,s=n.center,l=s.x,u=s.y,c=this._productHandler.getHandler(t).bounds,h=c.top,p=c.bottom,f=c.left,d=c.right,y=c.center,g=y.x,m=y.y,e){case"top":return[3,1];case"bottom":return[3,3];case"left":return[3,5];case"right":return[3,7];case"horizontalCenter":return[3,9];case"verticalCenter":return[3,11]}return[3,13];case 1:return[4,this._cm.execute(bt.translateItems,{items:[t],translateX:0,translateY:r-h})];case 2:return _.sent(),[3,13];case 3:return[4,this._cm.execute(bt.translateItems,{items:[t],translateX:0,translateY:o-p})];case 4:return _.sent(),[3,13];case 5:return[4,this._cm.execute(bt.translateItems,{items:[t],translateX:i-f,translateY:0})];case 6:return _.sent(),[3,13];case 7:return[4,this._cm.execute(bt.translateItems,{items:[t],translateX:a-d,translateY:0})];case 8:return _.sent(),[3,13];case 9:return[4,this._cm.execute(bt.translateItems,{items:[t],translateX:l-g,translateY:0})];case 10:return _.sent(),[3,13];case 11:return[4,this._cm.execute(bt.translateItems,{items:[t],translateX:0,translateY:u-m})];case 12:return _.sent(),[3,13];case 13:return[2]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),bn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Cn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Pn=function(t){function e(e,n,r,o){var i=t.call(this,n.items,e)||this;return i._commandManager=r,i._canvas=o,i}return bn(e,t),e.prototype._executeCommandBody=function(){return wn(this,void 0,void 0,function(){var t,e,n=this;return Cn(this,function(r){switch(r.label){case 0:return[4,this._commandManager.execute(bt.deleteItems,{items:this._items})];case 1:return r.sent(),t=this._items,e=[],t.forEach(function(t){if(t instanceof v.GroupItem){var n=new v.LayoutItem(t.items.toArray(),new v.DefaultLayoutSettings);n.name=t.name.includes("Group item")?t.name.replace("Group item","Layout item"):t.name,e.push(n)}}),[4,this._commandManager.execute(vt.addItems,{items:e})];case 2:return r.sent(),e.forEach(function(t){n._canvas.viewer.getHandler(t).generateAndApplyAutolayoutSettings()}),[2,e]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),xn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),On=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},In=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Sn=function(t){function e(e,n,r){var o=t.call(this,n.items,e)||this;return o._commandManager=r,o}return xn(e,t),e.prototype._executeCommandBody=function(){return On(this,void 0,void 0,function(){var t,e;return In(this,function(n){switch(n.label){case 0:return[4,this._commandManager.execute(bt.deleteItems,{items:this._items})];case 1:return n.sent(),t=this._items,e=[],t.forEach(function(t){if(t instanceof v.LayoutItem){var n=new v.GroupItem(t.items.toArray());n.name=t.name.includes("Layout item")?t.name.replace("Layout item","Group item"):t.name,e.push(n)}}),[4,this._commandManager.execute(vt.addItems,{items:e})];case 2:return n.sent(),[2,e]}})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Tn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Rn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},kn=function(t){function e(e,n,r){var o=t.call(this,[n.item],e,n)||this;return o._commandManager=r,o}return Tn(e,t),e.prototype._executeCommandBody=function(){return jn(this,void 0,void 0,function(){var t;return Rn(this,function(n){if(null==this._args.item||null==this._args.targetItem)throw new l.a("SetImageItemCommand: item and target item cannot be null");return t={dataList:[{imageData:e.getImageData(this._args.item),item:this._args.targetItem,tags:this._args.item.tags}],dpi:this._args.dpi,keepLocation:this._args.keepLocation},this._commandManager.execute(bt.setImageMetadata,t,u.a.NotUpdate),[2]})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e.getImageData=function(t){var e,n;if(null==t.source)return null;var r=new v.ImageMetaData;return r.isUserImage=t.isUserImage,r.storageId=t.source.id,r.pageIndex=t.source.pageIndex,r.isVector=t.source.isVector,r.name=null!==(e=t.displayName)&&void 0!==e?e:t.name,r.origin=null===(n=t.source.origin)||void 0===n?void 0:n.clone(),r.size.width=t.source.width,r.size.height=t.source.height,r},e}(N.a),Bn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),En=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},An=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Fn=function(t){function e(e,n,r){var o=t.call(this,null,e,n)||this;return o._productHandler=r,o}return Bn(e,t),e.prototype._executeCommandBody=function(){return En(this,void 0,void 0,function(){var t,e;return An(this,function(n){return null==(t=this._args.item)?[2]:!(t instanceof v.ShapeItem)||t instanceof v.PlaceholderItem?(console.warn("ConvertItemToPlaceholderCommand: item type "+t.type+" is not supported"),[2]):((e=new v.PlaceholderItem(t.sourceRectangle.clone())).sourcePath=t.sourcePath.clone(),e.sourcePathId=t.sourcePathId,e.transform=t.transform.clone(),e.name=t.name,e.manipulationPermissions=t.manipulationPermissions.clone(),e.visualizationPermissions=t.visualizationPermissions.clone(),e.itemPermissions=t.itemPermissions.clone(),e.shapePermissions=t.shapePermissions.clone(),this._productHandler.replaceItem(t,e),t instanceof v.ContentItem?(e.content=t,e.isStubContent=!0):(e.fillColor=t.fillColor,e.borderColor=t.borderColor,e.borderWidth=t.borderWidth),[2,e])})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Mn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},Ln=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Nn=function(t){function e(e,n,r){var o=t.call(this,null,e,n)||this;return o._productHandler=r,o}return Mn(e,t),e.prototype._executeCommandBody=function(){return zn(this,void 0,void 0,function(){var t,e,n,r;return Ln(this,function(o){return null==(t=this._args.item)?[2]:t instanceof v.PlaceholderItem?(t.isEmptyContent?((n=new v.ShapeItem(t.sourcePath.clone())).sourcePath=t.sourcePath.clone(),n.sourcePathId=t.sourcePathId,n.transform=t.transform.clone(),n.name=t.name,n.manipulationPermissions=t.manipulationPermissions.clone(),n.visualizationPermissions=t.visualizationPermissions.clone(),n.itemPermissions=t.itemPermissions.clone(),n.shapePermissions=t.shapePermissions.clone(),n.fillColor=t.fillColor,n.borderColor=t.borderColor,n.borderWidth=t.borderWidth,e=n):(r=t.content,t.content=null,r.parentPlaceholder=null,e=r),this._productHandler.replaceItem(t,e),[2,e]):(console.warn("ConvertPlaceholderToItemCommand: item type "+t.type+" is not supported"),[2])})})},e.prototype.redo=function(){throw new l.e},e.prototype.undo=function(){throw new l.e},e}(N.a),Hn=function(){function t(t,e,n,r,o,i,s){this._history=t,this._productHandler=e,this._productThemeManager=n,this._variableItemHelper=r,this._eventManager=o,this._canvas=i,this._itemsDataApplier=s,this._surfaceManager=new a(e)}return Object.defineProperty(t.prototype,"_product",{get:function(){return this._productHandler.product},enumerable:!0,configurable:!0}),t.prototype.execute=function(t,e,n){var o={history:this._history,historyUpdateMode:n};switch(t){case r.switchToSurface:return this._surfaceManager.switchToSurface(e.value instanceof It.Surface?e.value:this._product.surfaces.get(e.value));case r.getNextSurface:return this._surfaceManager.getNextSurface(e.spinIndex);case r.switchSurfaceForward:return this._surfaceManager.switchSurfaceForward();case r.switchSurfaceBackward:return this._surfaceManager.switchSurfaceBackward();case _t.rotateProduct:return new g(this._productHandler,o,this._product,e).execute();case _t.replaceInterpolationPlaceholders:return new Ot(this._productHandler,o,this._product,this._canvas).execute();case _t.changeBackground:return new j(this._productHandler,o,this._product,e,this,this._productThemeManager,this._canvas,this._eventManager).execute();case _t.applyProductTheme:return new Rt(o,this._product,e,this._productThemeManager,this).execute();case _t.fillPlaceholders:return new rn(o,this._product,e,this).execute();case _t.resize:return new hn(o,this._product,e,this._productHandler,this,this._canvas).execute();case vt.addItems:return new L(this._productHandler,o,e,this._productThemeManager,this._canvas,this._variableItemHelper,this,this._eventManager).execute();case bt.deleteItems:return new W(this._productHandler,o,e,this._canvas,this.configuration,this).execute();case bt.cloneItems:return new ut(this._productHandler,o,e,this,this._variableItemHelper).execute();case bt.addContent:return new At(this._productHandler,o,e,this._productThemeManager,this._eventManager).execute();case bt.alignItems:return new Lt(this._productHandler,o,e,this._canvas).execute();case bt.alignIntoGroup:return new vn(this._productHandler,o,e,this).execute();case bt.groupAlign:return new Vt(o,e,this._canvas).execute();case bt.bringItems:return new Xt(this._productHandler,o,e,this,this._canvas).execute();case bt.moveItem:return new $t(this._productHandler,o,e).execute();case bt.createItem:return new Qt.a(this._itemsDataApplier,o,e).execute();case bt.editItems:return new ne(this._itemsDataApplier,this._productHandler,o,e).execute();case bt.setImageMetadata:return new x.a(o,e,this._productHandler,this._product,this._variableItemHelper,this,this._eventManager).execute();case bt.setImageItem:return new kn(o,e,this).execute();case bt.placeholderContentScale:return new se(e,o,this._productHandler).execute();case bt.placeholderContentReset:return new he(e,o,this._productHandler).execute();case bt.changeBarcodeFormat:return new ye(e,o,this._productHandler).execute();case bt.changeColumnCount:return new we(e,o,this._productHandler).execute();case bt.placeholderContentRotate:return new Oe(e,o,this._productHandler).execute();case bt.insertItemsIntoArea:return new je(e,o,this._productHandler,this).execute();case bt.changeLayout:return new Ee(e,o,this._productHandler,this._product,this).execute();case bt.groupItems:return new Ne(o,e,this).execute();case bt.ungroupItems:return new Ue(o,e,this).execute();case bt.replaceGroupItemContent:return new Ye(o,e,this._productHandler,this._product,this,this._productThemeManager,this._canvas).execute();case bt.changeClipartItemColor:return new Ze(o,e).execute();case bt.translateItems:return new yn(o,e,this._productHandler,this._canvas).execute();case bt.convertGroupIntoLayout:return new Pn(o,e,this,this._canvas).execute();case bt.convertLayoutIntoGroup:return new Sn(o,e,this).execute();case bt.convertItemToPlaceholder:return new Fn(o,e,this._productHandler).execute();case bt.convertPlaceholderToItem:return new Nn(o,e,this._productHandler).execute();case wt.selectItems:return new K(this._productHandler,e,this._canvas).execute();case wt.selectFirst:return new Z(this._productHandler,this,this._canvas).execute();case wt.clearSelection:return new rt(this._canvas).execute();default:throw new l.a}},t}();!function(t){t.rotateProduct="rotateProduct",t.replaceInterpolationPlaceholders="replaceInterpolationPlaceholders",t.changeBackground="changeBackground",t.applyProductTheme="applyProductTheme",t.fillPlaceholders="fillPlaceholders",t.resize="resize"}(_t||(_t={})),function(t){t.addItems="addItems"}(vt||(vt={})),function(t){t.deleteItems="deleteItems",t.cloneItems="cloneItems",t.addContent="addContent",t.alignItems="alignItems",t.alignIntoGroup="alignIntoGroup",t.groupAlign="groupAlign",t.bringItems="bringItems",t.moveItem="moveItem",t.createItem="createItem",t.editItems="editItems",t.setImageMetadata="setImageMetadata",t.setImageItem="setImageItem",t.placeholderContentScale="placeholderContentScale",t.placeholderContentReset="placeholderContentReset",t.placeholderContentRotate="placeholderContentRotate",t.changeBarcodeFormat="changeBarcodeFormat",t.changeColumnCount="changeColumnCount",t.insertItemsIntoArea="insertItemsIntoArea",t.changeLayout="changeLayout",t.groupItems="groupItems",t.ungroupItems="ungroupItems",t.replaceGroupItemContent="replaceGroupItemContent",t.changeClipartItemColor="changeClipartItemColor",t.convertGroupIntoLayout="convertGroupIntoLayout",t.convertLayoutIntoGroup="convertLayoutIntoGroup",t.translateItems="translateItems",t.convertItemToPlaceholder="itemToPlaceholder",t.convertPlaceholderToItem="placeholderToItem"}(bt||(bt={})),function(t){t.clearSelection="clearSelection",t.selectFirst="selectFirst",t.selectItems="selectItems"}(wt||(wt={}))},420:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(380),o=n(383),i=function(){function t(t){this._previewFromServer=!1,this.preview=null,this.profileId=null,null!=t&&(o.l(t.preview)||(this._previewFromServer=!0),"string"!=typeof t&&this._init(t))}return Object.defineProperty(t.prototype,"previewFromServer",{get:function(){return this._previewFromServer},enumerable:!0,configurable:!0}),t.prototype.needUpdate=function(t){var e="RgbColor"===this.type,n=e&&null!=this.profileId&&this.profileId!==t;return(!e||n)&&!this.previewFromServer},t.prototype.equals=function(t,e){return void 0===e&&(e=!1),t.profileId===this.profileId&&(e||t.preview===this.preview)},t.prototype.getData=function(){return{preview:this.preview,profileId:this.profileId,type:this.type}},t.prototype._init=function(t){o.l(t.preview)||(this.preview=t.preview),o.l(t.profileId)||(this.profileId=t.profileId)},t.prototype._validateString=function(t){if(o.l(t))throw new r.a("Value must be a non-empty string")},t.prototype._validateNumber=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=255),"number"!=typeof t)throw new r.a("Value must be a number");if(t<e||t>n)throw new r.a("Value must be in range ["+e+", "+n+"]")},t.equals=function(t,e){return null==t&&null==e||null!=t&&t.equals(e)},t}()},421:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.None=0]="None",t[t.Square=1]="Square",t[t.Tight=2]="Tight"}(r||(r={}))},422:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.None=0]="None",t[t.BlackAndWhite=1]="BlackAndWhite",t[t.FlipVertical=2]="FlipVertical",t[t.FlipHorizontal=3]="FlipHorizontal",t[t.Colorize=4]="Colorize"}(r||(r={}))},423:function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r,o=n(384),i=n(424),a=n(386),s=n(381),l=n(392),u=n(435),c=n(382),h=n(439),p=n(563),f=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},y=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=function(t){function e(e,n,r){void 0===r&&(r=null);var i=t.call(this,null,null,null,null,n,r)||this;return i._originalPathId=null,i._isLoadingPath=!1,i._isLoadedPath=!1,i.originalPath=null!=e?e:new s.Path(""),i._addedOnCanvasEvent=new o.a,null!=n&&null!=n.sourcePathId&&i.setOriginalPathId(n.sourcePathId),i._allowNegativeResize=!1,i._updateControlPointsSync(),i}return f(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return t.prototype._getItem.call(this)},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n),this.item.fillColor=e.fillColor,this.item.borderColor=e.borderColor,this.item.sourcePath=e.sourcePath,this.item.altBorderColor=e.altBorderColor,this.item.borderWidth=e.borderWidth,this.item.dash=e.dash,this.item.fixedBorderWidth=e.fixedBorderWidth},e.prototype._onItemPropertyChanged=function(e,n){var r=this.canvas;switch(n){case"fillColor":case"borderColor":case"altBorderColor":this.item.parentGroupItem instanceof c.ClipartItem||(this.update(),null!=this.canvas&&this.canvas.redraw());case"dash":break;case"fixedBorderWidth":case"borderWidth":null!=r&&(r.updateSelection(),r.redraw());break;case"sourceRectangle":this.originalPath=s.Path.rectangle(this.item.sourceRectangle.left,this.item.sourceRectangle.top,this.item.sourceRectangle.width,this.item.sourceRectangle.height),this._controlPoints=[new s.PointF(this.item.sourceRectangle.left,this.item.sourceRectangle.top),new s.PointF(this.item.sourceRectangle.right,this.item.sourceRectangle.bottom)]}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype.update=function(e,n){"function"==typeof e?this.isVisible()?t.prototype._update.call(this,null,e,n):e():this.updateColors()},e.prototype._setVisible=function(e){t.prototype._setVisible.call(this,e),this.isVisible()&&this.update()},e.prototype._getActualDash=function(){var t=this.item.dash;if(null==t)return t;var e=this.canvas,n=t.slice(0);if(n.length>0&&this.item.fixedBorderWidth&&null!=e)for(var r=0;r<n.length;r++)n[r]/=e.zoom;return n},Object.defineProperty(e.prototype,"originalPath",{get:function(){return this.item.sourcePath},set:function(t){this.item.sourcePath=t,this._isLoadedPath=!0},enumerable:!0,configurable:!0}),e.prototype._updateControlPoints=function(){var t,e,n;return d(this,void 0,void 0,function(){var r;return y(this,function(o){switch(o.label){case 0:return null==this.item.sourcePath?[2]:[4,p.a.getBounds(this.item.sourcePath,null!==(t=this._textWhizz)&&void 0!==t?t:null===(e=this.canvas)||void 0===e?void 0:e.textWhizz,null===(n=this.canvas)||void 0===n?void 0:n.service)];case 1:return r=o.sent(),this.controlPoints=[new s.PointF(r.left,r.top),new s.PointF(r.right,r.bottom)],[2]}})})},e.prototype._updateControlPointsSync=function(){var t,e;if(null!=this.item.sourcePath){var n=p.a.getBoundsSync(this.item.sourcePath,null!==(t=this._textWhizz)&&void 0!==t?t:null===(e=this.canvas)||void 0===e?void 0:e.textWhizz);null!=n&&(this.controlPoints=[new s.PointF(n.left,n.top),new s.PointF(n.right,n.bottom)])}},e.prototype.getOriginalPathId=function(){return this._originalPathId},e.prototype.setOriginalPathId=function(t){return d(this,void 0,void 0,function(){var e,n,r,o;return y(this,function(i){switch(i.label){case 0:return this._originalPathId=t,null==this._originalPathId?[2]:(this._isLoadingPath=!0,this._isLoadedPath=!1,[4,this._waitAddOnCanvas()]);case 1:if(i.sent(),null==this.canvas)return[2];e=this.canvas.handlerUrl,i.label=2;case 2:return i.trys.push([2,4,5,6]),[4,h.e({type:h.b.get,url:e+"/pth?f="+this._originalPathId,headers:[h.a.text]})];case 3:return n=i.sent(),r=new s.Path(n.value),this.item.sourcePathLoaded=!0,this.originalPath=r,this._updateControlPoints(),this._isLoadedPath=!0,[3,6];case 4:return o=i.sent(),console.error("Unable to load content path. Reason: "+o),this._isLoadedPath=!1,[3,6];case 5:return this._isLoadingPath=!1,this.item.sourcePathLoaded=!1,this.item.getPathLoadedEvent().notify(),[7];case 6:return this.canvas.redraw(),[2]}})})},e.prototype._waitAddOnCanvas=function(){return d(this,void 0,void 0,function(){var t=this;return y(this,function(e){switch(e.label){case 0:return null!=this.canvas?[2]:[4,new Promise(function(e){var n=function(){e(),t._addedOnCanvasEvent.remove(n)};t._addedOnCanvasEvent.add(n)})];case 1:return e.sent(),[2]}})})},e.prototype._getActualBorderWidth=function(){var t=this.item.borderWidth,e=this.canvas;return this.item.fixedBorderWidth&&null!=e&&(t/=e.zoom),t},e.prototype._getBoundsMargin=function(){return this._getActualBorderWidth()},e.prototype._getTransformedPath=function(){var t=this.getControlCenter(),e=this.item.sourcePath.clone();return e.transform(this.item.transform,t),e},e.prototype._createDataInstance=function(t){return new u.a(t)},e.prototype.drawItemHandler=function(t){if(null!=t)if(this._isLoadingPath||!this._isLoadedPath)this.canvas.drawWaitClock(t,this.rectangle.center);else{var e=this._getActualDash();this._hasVectorMask()&&(t.save(),this._clip(t));var n=this.item.altBorderColor;if(n&&null!=e&&e.length>0){var r=e.slice(0);r.unshift(0),r.push(0),l.a.path(t,this.item.sourcePath,this.getControlCenter(),this.item.transform,this.item.fillColor.preview,this._getActualBorderWidth(),n.preview,this.item.opacity,r)}l.a.path(t,this.item.sourcePath,this.getControlCenter(),this.item.transform,this.item.fillColor.preview,this._getActualBorderWidth(),this.item.borderColor.preview,this.item.opacity,e),this._hasVectorMask()&&t.restore()}},e.prototype.getColorData=function(){var e=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null,r=t.prototype.getColorData.call(this);return e.fillColor.needUpdate(n)&&(r.fill=e.fillColor.getData()),e.borderColor.needUpdate(n)&&(r.border=e.borderColor.getData()),null!=e.altBorderColor&&e.altBorderColor.needUpdate(n)&&(r.altBorder=e.altBorderColor.getData()),r},e.prototype.setColorData=function(e){t.prototype.setColorData.call(this,e),this._modifyItem(function(t){null!=e.fill&&(t.fillColor=a.ColorFactory.createColor(e.fill)),null!=e.border&&(t.borderColor=a.ColorFactory.createColor(e.border)),null!=e.altBorder&&(t.altBorderColor=a.ColorFactory.createColor(e.altBorder))})},e.prototype.onTextWhizzInit=function(){t.prototype.onTextWhizzInit.call(this),this._updateControlPoints()},e.prototype.hasColorsToUpdate=function(){var e=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null;return t.prototype.hasColorsToUpdate.call(this)||e.fillColor.needUpdate(n)||e.borderColor.needUpdate(n)||null!=e.altBorderColor&&e.altBorderColor.needUpdate(n)},e.prototype._onAddedOnCanvas=function(e,n){t.prototype._onAddedOnCanvas.call(this,e,n),this._addedOnCanvasEvent.notify(),this._updateControlPoints()},e.prototype.getTextWrappingPath=function(){return this.item.textWrappingMode===c.WrappingMode.Tight?this._getTransformedPath():t.prototype.getTextWrappingPath.call(this)},e.typeName="ShapeItemHandler",e}(i.a)},424:function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r,o=n(384),i=n(586),a=n(472),s=n(392),l=n(382),u=n(387),c=n(381),h=n(563),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},d=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},y=function(t){function e(e,n,r,i,a,s){void 0===s&&(s=null);var l=t.call(this,a)||this;l._textWhizz=s,l.floatingItemToolbar=null,l.selectToolbarButton=null,l.deleteToolbarButton=null,l.editToolbarButton=null,l._doubleClickEvent=new o.c,l._clickEvent=new o.c,l._deleteToolbarButtonClickEvent=new o.c,l._editToolbarButtonClickEvent=new o.c,l._selectToolbarButtonClickEvent=new o.c,l._violationWarningButtonClick=new o.c,l._violationWarningButtonClickEvent=new o.c;var h=e||0,p=n||0,f=r||0,d=i||0;return l._controlPoints=[new c.PointF(h,p),new c.PointF(h+f,p+d)],l._allowNegativeResize=!1,l._selectionTolerance=0,l.floatingItemToolbar=null,l.selectToolbarButton=null,l.deleteToolbarButton=null,l.editToolbarButton=null,l._deleteToolbarButtonClickHandler=l._onDeleteToolbarButtonClick.bind(l),l._editToolbarButtonClickHandler=l._onEditToolbarButtonClick.bind(l),l._selectToolbarButtonClickHandler=l._onSelectToolbarButtonClick.bind(l),l._throttleSizeChanging=u.throttle(function(){this.raiseChanging()},100),l._violationWarningButton=null,l._violationWarningButtonClickHandler=l._onViolationWarningButtonClick.bind(l),l._violationContainer=null,l._updateVectorMaskCenterSync(),l}return p(e,t),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"opacity":case"transform":break;case"locked":this._updateVisibility();break;case"textWrappingMode":null!=this.canvas&&this.canvas.updateTexts();break;case"mask":this._updateVectorMaskCenter();break;case"violationSettings":this.canvas.updateViolationContainer(this)}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._onItemVisibilityChanged=function(){t.prototype._onItemVisibilityChanged.call(this),this._updateVisibility()},Object.defineProperty(e.prototype,"allowNegativeResize",{get:function(){return this._allowNegativeResize},enumerable:!0,configurable:!0}),e.prototype._getBoundsMargin=function(){return 0},e.prototype.getControlBounds=function(){var t=Math.max(this._controlPoints[0].x,this._controlPoints[1].x),e=Math.max(this._controlPoints[0].y,this._controlPoints[1].y),n=Math.min(this._controlPoints[0].x,this._controlPoints[1].x),r=Math.min(this._controlPoints[0].y,this._controlPoints[1].y),o=t-n,i=e-r;return new c.RectangleF(n,r,o,i)},e.prototype.getControlCenter=function(){var t=this.getControlBounds(),e=t.left+t.width/2,n=t.top+t.height/2;return new c.PointF(e,n)},e.prototype._getRectangle=function(){var t=c.RotatedRectangleF.fromRectangleF(this.getControlBounds());return t.setTransform(this.item.transform),t},Object.defineProperty(e.prototype,"rectangle",{get:function(){return this._getRectangle()},enumerable:!0,configurable:!0}),e.prototype.setRectangle=function(t,e){var n=c.RotatedRectangleF.fromRectangleF(this.getControlBounds()),r=t.getTransform(n);this.item.setTransform(r,e)},Object.defineProperty(e.prototype,"bounds",{get:function(){var t=this.rectangle,e=this._getBoundsMargin();return t.width+=t.width>0?e:-e,t.height+=t.height>0?e:-e,t.bounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawingRectangle",{get:function(){return this.rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.item.transform.angle},set:function(t){this.item.transform.setAngle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.rectangle.height},set:function(t){var e=this.rectangle;e.height=t,this.setRectangle(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.rectangle.width},set:function(t){var e=this.rectangle;e.width=t,this.setRectangle(e)},enumerable:!0,configurable:!0}),e.prototype.setLocation=function(t){var e=this.rectangle;e.location=t,this.setRectangle(e)},Object.defineProperty(e.prototype,"startRectangle",{get:function(){return null!=this._startRectangle?this._startRectangle:null},enumerable:!0,configurable:!0}),e.prototype._onAddedOnCanvas=function(e,n){t.prototype._onAddedOnCanvas.call(this,e,n),null!=e&&(null!=this._contentType&&this._contentType!==a.a.NotContent||(e.addFloatingItemToolbar(this),e.addViolationContainer(this)),this._updateVectorMaskCenter())},e.prototype._onRemovedFromCanvas=function(e){t.prototype._onRemovedFromCanvas.call(this,e),null!=e&&(e.removeFloatingItemToolbar(this),e.removeViolationContainer(this))},e.prototype.onTextWhizzInit=function(){this._updateVectorMaskCenter()},e.prototype.update=function(){this.updateColors(),this._updateDeleteAndEditGroup(),this._updateViolationContainersVisibility()},e.prototype.hitTest=function(t){return this.canvas.hitTestSelection(this._getHighlightRectangle(),t)},e.prototype._transformRectangle=function(t,n,r){if(void 0===r&&(r=!1),null!=t&&null!=n&&null!=this._startRectangle){var o;if(this._startRectangle.equals(t))o=n.clone();else{var i=this._startRectangle.clone();o=e.transformRectangleByTwoRectanglesDiff(i,t,n)}this.setRectangle(o,!0);var a=this.canvas;null!=a&&a.updateFloatingItemToolbar(this),this.updateViolationContainerPosition(),null!=this.item.parentGroupItem?this.raiseChanging(this):this._throttleSizeChanging()}},e.prototype._startTransform=function(){t.prototype._startTransform.call(this),this._startRectangle=this.rectangle;var e=this.canvas;null!=e&&e.updateViolationContainer(this,!1)},e.prototype.endTransform=function(t,e,n){void 0===n&&(n=!1),this._endTransform(t,e,n)},e.prototype._endTransform=function(t,e,n){void 0===n&&(n=!1),n||!t||!e&&null==this._startRectangle||this._itemPropertyChangedEvent.notify(this,"transform"),t&&e||delete this._startRectangle;var r=this.canvas;null!=r&&r.updateFloatingItemToolbar(this),this.updateViolationContainerPosition()},e.prototype._transformChanged=function(){t.prototype._transformChanged.call(this);var e=this.canvas;null!=e&&e.updateFloatingItemToolbar(this),this.updateViolationContainerPosition()},e.prototype._onResized=function(){return delete this._startRectangle,!0},e.prototype.dispatchDoubleClickEvent=function(t){this._doubleClickEvent.notify(this,t)},e.prototype.addDoubleClick=function(t){this._doubleClickEvent.add(t)},e.prototype.removeDoubleClick=function(t){this._doubleClickEvent.remove(t)},e.prototype.dispatchClickEvent=function(t){this._clickEvent.notify(t)},e.prototype.addClick=function(t){this._clickEvent.add(t)},e.prototype.removeClick=function(t){this._clickEvent.remove(t)},e.prototype.drawHighlight=function(t){var e=this.canvas.mul,n=this._getHighlightRectangle();s.a.rectangle(t,n,this.canvas.selectionWidth/e,this.canvas.selectionColor)},e.prototype._getHighlightRectangle=function(){var t=this.rectangle,e=parseInt(this._getBoundsMargin().toString());return t.width+=t.width>=0?e:-e,t.height+=t.height>=0?e:-e,t},e.prototype.getSelectionRectangle=function(){return this.isVisible()?this.rectangle:null},e.prototype.getBorderMargin=function(){return this._getBoundsMargin()/2},e.prototype.getSelectionTolerance=function(){return this._selectionTolerance},e.prototype.addDeleteToolbarButtonClick=function(t){this._deleteToolbarButtonClickEvent.add(t)},e.prototype.removeDeleteToolbarButtonClick=function(t){this._deleteToolbarButtonClickEvent.remove(t)},e.prototype._onDeleteToolbarButtonClick=function(){this._deleteToolbarButtonClickEvent.notify(this)},e.prototype.showDeleteToolbarButton=function(){return this.getPermissions().allowDelete&&this.getPermissions().showDeleteToolbarButton},e.prototype.addEditToolbarButtonClick=function(t){this._editToolbarButtonClickEvent.add(t)},e.prototype.removeEditToolbarButtonClick=function(t){this._editToolbarButtonClickEvent.remove(t)},e.prototype._onEditToolbarButtonClick=function(){this._editToolbarButtonClickEvent.notify(this)},e.prototype.showEditToolbarButton=function(){return this.getPermissions().showEditToolbarButton},e.prototype.addSelectToolbarButtonClick=function(t){this._selectToolbarButtonClickEvent.add(t)},e.prototype.removeSelectToolbarButtonClick=function(t){this._selectToolbarButtonClickEvent.remove(t)},e.prototype._onSelectToolbarButtonClick=function(){this._selectToolbarButtonClickEvent.notify(this)},e.prototype.showSelectToolbarButton=function(){return this.getPermissions().showSelectToolbarButton},e.prototype._updateVisibility=function(){this._updateDeleteAndEditGroup(),this._updateViolationContainersVisibility()},e.prototype._updateDeleteAndEditGroup=function(){var t;null===(t=this.canvas)||void 0===t||t.updateFloatingItemToolbar(this)},e.prototype._onViolationWarningButtonClick=function(t){this._violationWarningButtonClick.notify(this,t),t.preventDefault()},e.prototype._updateViolationContainersVisibility=function(){var t;null===(t=this.canvas)||void 0===t||t.updateViolationContainer(this)},e.prototype.updateViolationContainerPosition=function(){var t;null===(t=this.canvas)||void 0===t||t.updateViolationContainerPosition(this)},e.prototype.isGoodViolationIcon=function(){var t=this.canvas;if(null==this._violationWarningButton||null==t||!this.isVisible())return!1;var e=t.goodViolationIconCssClass;return this._violationWarningButton.classList.contains(e)},e.prototype.setGoodViolationIcon=function(t){var e=this.canvas;if(null!=this._violationWarningButton&&null!=e&&this.isVisible()&&(this._violationWarningButton.style.visibility="visible",null!=t&&(this._violationWarningButton.title=t),!this.isGoodViolationIcon())){var n=e.goodViolationIconCssClass,r=e.warningViolationIconCssClass,o=e.badViolationIconCssClass;this._violationWarningButton.classList.remove(r),this._violationWarningButton.classList.remove(o),this._violationWarningButton.classList.add(n),this._violationWarningButton.classList.toggle("active",e.isOnlyThisItemHandlerSelected(this))}},e.prototype.isWarningViolationIcon=function(){var t=this.canvas;if(null==this._violationWarningButton||null==t||!this.isVisible())return!1;var e=t.warningViolationIconCssClass;return this._violationWarningButton.classList.contains(e)},e.prototype.setWarningViolationIcon=function(t){var e=this.canvas;if(null!=this._violationWarningButton&&null!=e&&this.isVisible()&&(this._violationWarningButton.style.visibility="visible",null!=t&&(this._violationWarningButton.title=t),!this.isWarningViolationIcon())){var n=e.goodViolationIconCssClass,r=e.warningViolationIconCssClass,o=e.badViolationIconCssClass;this._violationWarningButton.classList.remove(n),this._violationWarningButton.classList.remove(o),this._violationWarningButton.classList.add(r),this._violationWarningButton.classList.toggle("active",e.isOnlyThisItemHandlerSelected(this))}},e.prototype.isBadViolationIcon=function(){var t=this.canvas;if(null==this._violationWarningButton||null==t||!this.isVisible())return!1;var e=t.badViolationIconCssClass;return this._violationWarningButton.classList.contains(e)},e.prototype.setBadViolationIcon=function(t){var e=this.canvas;if(null!=this._violationWarningButton&&null!=e&&this.isVisible()&&(this._violationWarningButton.style.visibility="visible",null!=t&&(this._violationWarningButton.title=t),!this.isBadViolationIcon())){var n=e.goodViolationIconCssClass,r=e.warningViolationIconCssClass,o=e.badViolationIconCssClass;this._violationWarningButton.classList.remove(n),this._violationWarningButton.classList.remove(r),this._violationWarningButton.classList.add(o),this._violationWarningButton.classList.toggle("active",e.isOnlyThisItemHandlerSelected(this))}},e.prototype.isNoneViolationIcon=function(){var t=this.canvas;if(null==this._violationWarningButton||null==t||!this.isVisible())return!1;var e=t.goodViolationIconCssClass,n=t.warningViolationIconCssClass,r=t.badViolationIconCssClass,o=this._violationWarningButton.classList.contains(e)||this._violationWarningButton.classList.contains(n)||this._violationWarningButton.classList.contains(r);return"hidden"===this._violationWarningButton.style.visibility||!o},e.prototype.setNoneViolationIcon=function(){var t=this.canvas;if(null!=this._violationWarningButton&&null!=t&&this.isVisible()){var e=t.goodViolationIconCssClass,n=t.warningViolationIconCssClass,r=t.badViolationIconCssClass;this._violationWarningButton.classList.remove(e),this._violationWarningButton.classList.remove(n),this._violationWarningButton.classList.remove(r),this._violationWarningButton.style.visibility="hidden"}},e.prototype.addViolationWarningButtonClick=function(t){this._violationWarningButtonClick.add(t)},e.prototype.removeViolationWarningButtonClick=function(t){this._violationWarningButtonClick.remove(t)},e.prototype.getDeleteToolbarButtonClickHandler=function(){return this._deleteToolbarButtonClickHandler},e.prototype.getEditToolbarButtonClickHandler=function(){return this._editToolbarButtonClickHandler},e.prototype.getSelectToolbarButtonClickHandler=function(){return this._selectToolbarButtonClickHandler},e.prototype.getViolationWarningButton=function(){return this._violationWarningButton},e.prototype.setViolationWarningButton=function(t){this._violationWarningButton=t},e.prototype.getViolationWarningButtonClickHandler=function(){return this._violationWarningButtonClickHandler},e.prototype.getViolationContainer=function(){return this._violationContainer},e.prototype.setViolationContainer=function(t){this._violationContainer=t},e.prototype.getViolationWarningButtonElement=function(){return this._violationWarningButton},e.transformRectangleByTwoRectanglesDiff=function(t,e,n){var r=n.getTransform(e),o=r.angle,i=r.scaleX,a=r.scaleY;if(Object(c.EqualsOfFloatNumbers)(n.angle,0)||t.rotateAt(-n.angle,e.center),Object(c.EqualsOfFloatNumbers)(i,1)&&Object(c.EqualsOfFloatNumbers)(a,1))t.centerX+=r.translateX,t.centerY+=r.translateY;else{t.width=t.width*i,t.height=t.height*a,t.centerX=n.centerX+(t.centerX-e.centerX)*i,t.centerY=n.centerY+(t.centerY-e.centerY)*a}if(Object(c.EqualsOfFloatNumbers)(n.angle,0)||t.rotateAt(n.angle,n.center),!Object(c.EqualsOfFloatNumbers)(o,0)){var s=t.center;s.rotateAt(o,e.center),t.angle=t.angle+o,t.center=s}return t},e.prototype._getPrintAreaBounds=function(){if(null==this.layer||null==this.layer.container.parentComponent)return null;var t=this.layer.container.parentComponent;return null==t.printAreas||t.printAreas.length<1?null:t.printAreas.get(0).bounds},e.prototype.transformByMatrix=function(t){this.setRectangle(this.rectangle.transformByMatrix(t)),1===t.scaleX&&1===t.scaleY||this._onResized(),this._transformChanged(),null!=this.canvas&&this.canvas.updateSelection()},e.prototype.getTransformedRectangle=function(t,e){void 0===t&&(t=!0);var n=this.rectangle,r=this._getPrintAreaBounds();if(null!=r&&t&&(n.location=n.location.translate(-r.left,-r.top)),e){var o=this.getBorderMargin();n.width+=2*o,n.height+=2*o}return n},e.prototype.setTransformedRectangle=function(t){this.setRectangle(t)},e.prototype.getTextWrappingPath=function(){return this.item.textWrappingMode!==l.WrappingMode.None?c.Path.rotatedRectangle(this.rectangle):null},e.prototype._clip=function(t){if(this._hasVectorMask()){var e=this._getTransformedClippingPath();null!=e&&s.a.clipPath(t,e)}},e.prototype._updateVectorMaskCenter=function(){var t,e,n;return f(this,void 0,void 0,function(){var r;return d(this,function(o){switch(o.label){case 0:return this._hasVectorMask()?[4,h.a.getBounds(this.item.mask.vectorMask,null!==(t=this._textWhizz)&&void 0!==t?t:null===(e=this.canvas)||void 0===e?void 0:e.textWhizz,null===(n=this.canvas)||void 0===n?void 0:n.service)]:[3,2];case 1:return r=o.sent(),this._vectorMaskCenter=c.RotatedRectangleF.fromRectangleF(r).center,[3,3];case 2:this._vectorMaskCenter=null,o.label=3;case 3:return[2]}})})},e.prototype._updateVectorMaskCenterSync=function(){var t,e;if(this._hasVectorMask()){var n=h.a.getBoundsSync(this.item.mask.vectorMask,null!==(t=this._textWhizz)&&void 0!==t?t:null===(e=this.canvas)||void 0===e?void 0:e.textWhizz);if(null==n)return;this._vectorMaskCenter=c.RotatedRectangleF.fromRectangleF(n).center}else this._vectorMaskCenter=null},e.prototype._getTransformedClippingPath=function(t){if(!this._hasVectorMask()||null==this._vectorMaskCenter)return null;null==t&&(t=this.item.transform.clone());var e=this.item.mask.vectorMask.clone(),n=this._vectorMaskCenter,r=this.getControlCenter();if(0!==t.angle&&(e.rotateAt(t.angle,r),t.setAngle(0,!0)),!Object(c.EqualsOfFloatNumbers)(t.scaleX,1)||!Object(c.EqualsOfFloatNumbers)(t.scaleY,1)){var o=n.x-r.x,i=n.y-r.y;r.translate(t.translateX,t.translateY),t.setTranslateX(r.x+o*t.scaleX-n.x),t.setTranslateY(r.y+i*t.scaleY-n.y)}return e.transform(t,n),e},e.prototype._hasVectorMask=function(){return null!=this.item.mask&&null!=this.item.mask.vectorMask},e.typeName="BaseRectangleItemHandler",e}(i.a)},425:function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r,o=n(437),i=n(424),a=n(381),s=n(410),l=n(382),u=n(393),c=n(380),h=n(450),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},d=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t},y=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};var g=function(t){function e(e,n,r){void 0===r&&(r=null);var o=t.call(this,null,null,null,null,e,r)||this;return o._itemHandlers=new u.a,o._onChildItemHandlerChanging=function(t){return o.raiseChanging(o)},Array.isArray(n)&&(o.itemHandlers=new u.a(n)),o.item.items.add_itemAdded(o._onItemAdded.bind(o)),o.item.items.add_itemRemoved(o._onItemRemoved.bind(o)),o._subscribeItemHandlers(),o}return p(e,t),e.prototype._unsubscribeItemHandlers=function(){var t=this;null!=this.itemHandlers&&(this.itemHandlers.remove_itemAdded(this._onItemHandlerAdded.bind(this)),this.itemHandlers.remove_itemRemoved(this._onItemHandlerRemoved.bind(this)),this.itemHandlers.forEach(function(e){return e.getChangingEvent().remove(t._onChildItemHandlerChanging)}))},e.prototype._subscribeItemHandlers=function(){var t=this;null!=this.itemHandlers&&(this.itemHandlers.add_itemAdded(this._onItemHandlerAdded.bind(this)),this.itemHandlers.add_itemRemoved(this._onItemHandlerRemoved.bind(this)),this.itemHandlers.forEach(function(e){return e.getChangingEvent().add(t._onChildItemHandlerChanging)}))},e.prototype.setItemHandlers=function(t){this._unsubscribeItemHandlers(),Array.isArray(t)&&(this.itemHandlers=new u.a(t)),this._subscribeItemEvents()},Object.defineProperty(e.prototype,"itemHandlers",{get:function(){return this._itemHandlers},set:function(t){if(null==t)throw new Error("ItemHandlers can't be null");this._itemHandlers.clear(),this._itemHandlers.addRange(t)},enumerable:!0,configurable:!0}),e.prototype.drawItemHandler=function(t){var e=this;this.getNestedItemHandlers(!0,!1,!0).forEach(function(n){var r,o,i,a=(null===(i=null===(o=null===(r=e.canvas.viewer)||void 0===r?void 0:r.configuration)||void 0===o?void 0:o.handlers)||void 0===i?void 0:i.placeholderEditingViewMode)===h.a.Normal;null==n.canvas||!a&&n instanceof s.a&&n.editing||n.drawItemHandler(t)})},e.prototype.drawHighlight=function(e,n){void 0===n&&(n=!1),this.drawChildHighlights(e),!n&&this.item.groupItemPermissions&&t.prototype.drawHighlight.call(this,e)},e.prototype.drawChildHighlights=function(t){this.itemHandlers.where(function(t){return t.isVisible()}).forEach(function(e){return e.drawHighlight(t)})},e.prototype.getOrderedItems=function(){return this.item.items.toArray()},e.prototype._setVisible=function(e){this.visible!==e&&(t.prototype._setVisible.call(this,e),this.applyToItems(function(t){return t.visible=e}))},e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"opacity":var r=e.opacity;this.item.applyToItems(function(t){o.d(t.opacity,r)||(t.opacity=r),t instanceof l.PlaceholderItem&&!o.d(t.content.opacity,r)&&t.updateContentAndFrames(function(t){return t.opacity=r})})}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._onItemAdded=function(t){var e=t.item,n=t.index;null!=this.canvas&&(null!=n?this.itemHandlers.insertAt(n,this.canvas.handlerFactory.get(e)):this.itemHandlers.add(this.canvas.handlerFactory.get(e)))},e.prototype._onItemRemoved=function(t){if(null!=this.canvas){var e=this.canvas.handlerFactory.get(t.item);this.canvas.isItemHandlerSelected(e)&&this.canvas.removeSelectedItemHandler(e),this.itemHandlers.remove(e)}},e.prototype._onItemHandlerAdded=function(t){var n=this,r=t.item;r.getChangingEvent().add(this._onChildItemHandlerChanging);var o=function(t){t.layer=n.layer,t.canvas=n.canvas,t instanceof e&&t.applyToItems(function(t){return o(t)})};o(r)},e.prototype._onItemHandlerRemoved=function(t){var e=t.item;e.getChangingEvent().remove(this._onChildItemHandlerChanging),this.canvas.isItemHandlerSelected(t.item)&&this.canvas.removeSelectedItemHandler(t.item),e.canvas=null,e.layer=null,e.item.parentContainer=null},e.prototype.replaceItemHandler=function(t,e){var n=this.itemHandlers.indexOf(t);if(-1==n)throw new c.c("ItemHandler not found");this.itemHandlers.replaceAt(e,n),e.layer=this.layer,this._onItemHandlerRemoved({item:t,index:n}),this._onItemHandlerAdded({item:e,index:n})},e.prototype.getNestedItemHandlers=function(t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!1);for(var o=[],i=n?this.itemHandlers.toArray().slice().reverse():this.itemHandlers.toArray().slice();i.length>0;){var a=i.shift();if(!r||a.isVisible()&&!a.getPermissions().noShow){if(a instanceof e){var s=n?a.itemHandlers.toArray().slice().reverse():a.itemHandlers.toArray();if(i.unshift.apply(i,d(s)),t)continue}o.push(a)}}return o},e.prototype.updateNestedItemHandlers=function(t){var e,n,r=!1;try{for(var o=y(this.itemHandlers),i=o.next();!i.done;i=o.next()){var a=i.value,s=t(a);r=r||s,"updateNestedItemHandlers"in a&&(s=a.updateNestedItemHandlers(t),r=r||s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},e.prototype._transformRectangle=function(e,n,r){void 0===r&&(r=!1),t.prototype._transformRectangle.call(this,e,n,r),this.itemHandlers.forEach(function(t){return t._transformRectangle(e,n,r)})},e.prototype.update=function(){this.applyToItems(function(t){return t.update()}),t.prototype.update.call(this)},e.prototype.quickUpdate=function(){this.applyToItems(function(t){return t.quickUpdate()}),t.prototype.quickUpdate.call(this)},e.prototype._onResized=function(){return this.applyToItems(function(t){return t._onResized()}),t.prototype._onResized.call(this)},e.prototype._startTransform=function(){this.applyToItems(function(t){return t._startTransform()}),t.prototype._startTransform.call(this)},e.prototype._endTransform=function(e,n,r){void 0===r&&(r=!1),this.applyToItems(function(t){return t.endTransform(e,n,!0)}),t.prototype._endTransform.call(this,e,n)},e.prototype._transformChanged=function(){t.prototype._transformChanged.call(this),this.applyToItems(function(t){return t._transformChanged()})},e.prototype.setRectangle=function(e,n){var r=e.getTransform(this.rectangle),o=r.translateX,i=r.translateY,l=r.scaleX,u=r.scaleY,c=r.angle,h=function(t){var n=t.rectangle;n.translate(o,i),n.rotateAt(c,e.center),t.setRectangle(n,!0),t instanceof s.a&&t.updateContentAndFrames(h)};this.itemHandlers.forEach(h);var p=this.rectangle,f=function(t){var e=t.rectangle,n=e.centerX-p.centerX,r=e.centerY-p.centerY;e.setTransform(new a.Transform(l,u,n*(l-1),r*(u-1))),t.setRectangle(e,!0),t instanceof s.a&&t.updateContentAndFrames(f)};this.itemHandlers.forEach(f),t.prototype.setRectangle.call(this,e,n)},Object.defineProperty(e.prototype,"_calculateRectangleFromChild",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._getRectangle=function(){if(!this._calculateRectangleFromChild)return t.prototype._getRectangle.call(this);var e=this.itemHandlers.where(function(t){return t.isVisible()}).toArray().map(function(t){return t.getTransformedRectangle(!1,!0)});if(e.length<1)return null!=e[0]?e[0]:new a.RotatedRectangleF;var n=this.item.transform.angle,r=e.reduce(function(t,e){return a.RotatedRectangleF.union(t,e)}).center,o=e.map(function(t){return t.rotateAt(-n,r).bounds}).reduce(function(t,e){return{left:Math.min(t.left,e.left),top:Math.min(t.top,e.top),right:Math.max(t.right,e.right),bottom:Math.max(t.bottom,e.bottom)}}),i=o.left,s=o.top,l=o.bottom,u=o.right;return a.RotatedRectangleF.FromLTRB(i,s,u,l).rotateAt(n,r)},e.prototype._onAddedOnCanvas=function(e){t.prototype._onAddedOnCanvas.call(this,e),this.applyToItems(function(t){return t.canvas=e})},e.prototype._onRemovedFromCanvas=function(e){t.prototype._onRemovedFromCanvas.call(this,e),this.applyToItems(function(t){return t.canvas=null})},e.prototype.applyToItems=function(t){if(null!=this.itemHandlers)for(var e=0;e<this.itemHandlers.length;e++)t(this.itemHandlers.getItem([e]))},e.prototype.getPermissions=function(){var e,n,r=t.prototype.getPermissions.call(this).clone();try{for(var o=y(this.itemHandlers),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.getPermissions();s.allowMoveHorizontal||(r.allowMoveHorizontal=!1),s.allowMoveVertical||(r.allowMoveVertical=!1),s.allowRotate||(r.allowRotate=!1),s.resizeGrips.edge||(r.resizeGrips.edge=!1),s.resizeGrips.getCornerProportional()||r.resizeGrips.setCornerProportional(!1),s.resizeGrips.getCornerArbitrary()||r.resizeGrips.setCornerArbitrary(!1),(this.item.transform.angle-a.angle)%90!=0&&(r.resizeGrips.edge=!1,r.resizeGrips.setCornerArbitrary(!1))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r.showSelectToolbarButton=this.item.groupItemPermissions.allowReplaceContent,r},e.prototype.isChildVisible=function(t){return!0},Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e.typeName="GroupItemHandler",e}(i.a)},431:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r,o=n(415),i=n(432),a=n(403),s=n(544),l=n(414),u=n(386),c=n(384),h=n(380),p=n(387),f=n(383),d=n(400),y=n(443),g=n(487),m=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},v=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(t){function e(n){var r=t.call(this)||this;return r._borderWidth=1,r._fillColor=new u.RgbColor("rgba(112,112,112,1)"),r._borderColor=new u.RgbColor("rgba(0,0,0,1)"),r._altBorderColor=null,r._dash=[],r._fixedBorderWidth=!1,r._overprintStroke=!1,r._overprintFill=!1,r.sourcePathId=null,r.sourcePathLoaded=!1,r._stubPath=null,r._pathLoadedEvent=new c.a,r.type=e.type,r.sourcePath=null!=n?n:new i.a(""),r.sourceRectangle=new a.a(0,0,10,10),r.shapePermissions=new s.a,r._setViolationSettings(new g.a,!0),r._ignorePermissionsChange=!0,r.manipulationPermissions.resizeGrips=new l.a(!0,!0),r.itemPermissions.itemToolbarPermissions.showEditButton=!1,r.itemPermissions.itemToolbarPermissions.showSelectButton=!1,r._ignorePermissionsChange=!1,r}return m(e,t),Object.defineProperty(e.prototype,"fixedBorderWidth",{get:function(){return this._fixedBorderWidth},set:function(t){this._fixedBorderWidth!==t&&(this._fixedBorderWidth=t,this._propertyChanged.notify(this,"fixedBorderWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderWidth",{get:function(){return this._borderWidth},set:function(t){this._borderWidth!==t&&(this._borderWidth=t,this._propertyChanged.notify(this,"borderWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourcePath",{get:function(){return this._sourcePath},set:function(t){Object(f.h)(this._sourcePath,t)||(this._sourcePath=t,!0!==this.sourcePathLoaded&&this._propertyChanged.notify(this,"sourcePath"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceRectangle",{get:function(){return this._sourceRectangle},set:function(t){a.a.isEqual(this._sourceRectangle,t)||(this._sourceRectangle=t,this._propertyChanged.notify(this,"sourceRectangle"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor},set:function(t){u.Color.equals(this._borderColor,t)||(this._borderColor=t,this._propertyChanged.notify(this,"borderColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overprintStroke",{get:function(){return this._overprintStroke},set:function(t){this._overprintStroke!==t&&(this._overprintStroke=t,this._propertyChanged.notify(this,"overprintStroke"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this._fillColor},set:function(t){u.Color.equals(this._fillColor,t)||(this._fillColor=t,this._propertyChanged.notify(this,"fillColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overprintFill",{get:function(){return this._overprintFill},set:function(t){this._overprintFill!==t&&(this._overprintFill=t,this._propertyChanged.notify(this,"overprintFill"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altBorderColor",{get:function(){return this._altBorderColor},set:function(t){u.Color.equals(this._altBorderColor,t)||(this._altBorderColor=t,this._propertyChanged.notify(this,"altBorderColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dash",{get:function(){return this._dash},set:function(t){p.isEqual(this._dash,t)||(this._dash=t,this._propertyChanged.notify(this,"dash"))},enumerable:!0,configurable:!0}),e.prototype.applyPermissionsConstrain=function(){t.prototype.applyPermissionsConstrain.call(this),this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=!1,this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=!1,this.isRenderTypeIsNormal||(this.shapePermissions.allowChangeBorderColor=!1,this.shapePermissions.allowChangeFillColor=!1)},Object.defineProperty(e.prototype,"shapePermissions",{get:function(){return this._shapePermissions},set:function(t){if(null==t)throw new h.a("shapePermissions cannot be null");Object(f.h)(this._shapePermissions,t)||(null!=this._shapePermissions&&this._shapePermissions.propertyChanged.remove(this._onPermissionsChanged),this._shapePermissions=t,this.applyPermissionsConstrain(),this._shapePermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"shapePermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(t){this._setViolationSettings(t)},enumerable:!0,configurable:!0}),e.prototype._setViolationSettings=function(e,n){if(void 0===n&&(n=!1),!(n||e instanceof g.a))throw new h.a("Shape ViolationSettings property must has ShapeViolationSettings type!");t.prototype._setViolationSettings.call(this,e,n)},e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.shapePermissions=null!=e._shapePermissions?e._shapePermissions.clone():null,n._stubPath=null!=e._stubPath?e._stubPath.clone():null,n.dash=p.clone(e._dash),n.altBorderColor=null!=e._altBorderColor?e._altBorderColor.clone():null,n.fillColor=null!=e._fillColor?e._fillColor.clone():null,n.borderColor=null!=e._borderColor?e._borderColor.clone():null,n.sourceRectangle=null!=e._sourceRectangle?e._sourceRectangle.clone():null,null!=e.sourcePathId?n.sourcePathId=e.sourcePathId:n.sourcePath=null!=e._sourcePath?e._sourcePath.clone():null,n.borderWidth=e._borderWidth,n.fixedBorderWidth=e.fixedBorderWidth,n.overprintStroke=e.overprintStroke,n.overprintFill=e.overprintFill},e.prototype.equals=function(e){var n=t.prototype.equals.call(this,e),r=Object(f.h)(this._shapePermissions,e._shapePermissions),o=Object(f.h)(this._stubPath,e._stubPath),i=Object(f.h)(this._dash,e._dash),a=Object(f.h)(this._altBorderColor,e._altBorderColor),s=Object(f.h)(this._fillColor,e._fillColor),l=Object(f.h)(this._borderColor,e._borderColor),u=Object(f.h)(this._sourceRectangle,e._sourceRectangle),c=Object(f.h)(this.sourcePathId,e.sourcePathId),h=Object(f.h)(this._sourcePath,e._sourcePath),p=Object(f.h)(this._borderWidth,e._borderWidth),d=Object(f.h)(this._fixedBorderWidth,e._fixedBorderWidth),y=Object(f.h)(this._overprintStroke,e._overprintStroke),g=Object(f.h)(this._overprintFill,e._overprintFill);return n&&r&&o&&i&&a&&s&&l&&u&&c&&h&&p&&d&&y&&g},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.prototype.getSimplifiedObject=function(e){var n=t.prototype.getSimplifiedObject.call(this,["shapePermissions"].concat(e));return n.shapePermissions=this.shapePermissions.getSimplifiedObject(),null==this.sourcePathId?n.sourcePath=null!=this.sourcePath?this.sourcePath.toString():null:n.sourcePath=null,n},e.prototype._onPathLoaded=function(){this._pathLoadedEvent.notify(this)},e.prototype.getPathLoadedEvent=function(){return this._pathLoadedEvent},e.type="ShapeItem",_([Object(d.a)({factory:new y.a,displayName:"Alternative border color"}),v("design:type",u.Color),v("design:paramtypes",[u.Color])],e.prototype,"altBorderColor",null),e}(o.a)},432:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return u});var r=n(408),o=n(384),i=n(398),a=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(){function t(t,e){this._name="",this._points=[],this._name=t?t.toUpperCase():"",this._points=e||[]}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.getPoint=function(t){return this._points[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this._points.length},enumerable:!0,configurable:!0}),t.prototype.transform=function(t,e){for(var n=0;n<this.length;n++)this.getPoint(n).transform(t,e)},t.prototype.rotateAt=function(t,e){for(var n=0;n<this.length;n++)this.getPoint(n).rotateAt(t,e)},t.prototype.translate=function(t,e){for(var n=0;n<this.length;n++)this.getPoint(n).translate(t,e)},t.prototype.draw=function(t){switch(this.name){case"Z":t.closePath();break;case"M":t.moveTo(this.getPoint(0).x,this.getPoint(0).y);break;case"L":t.lineTo(this.getPoint(0).x,this.getPoint(0).y);break;case"Q":t.quadraticCurveTo(this.getPoint(0).x,this.getPoint(0).y,this.getPoint(1).x,this.getPoint(1).y);break;case"C":t.bezierCurveTo(this.getPoint(0).x,this.getPoint(0).y,this.getPoint(1).x,this.getPoint(1).y,this.getPoint(2).x,this.getPoint(2).y)}},t.prototype.toString=function(){for(var t=this.name,e=0;e<this.length;e++)t+=" "+this.getPoint(e).x+" "+this.getPoint(e).y;return t},t.prototype.clone=function(){return new t(this.name,this._points.map(function(t){return t.clone()}))},t}(),l=function(){function t(){this._path=new u}return t.prototype.moveTo=function(t,e){this._path.moveTo(t,e)},t.prototype.lineTo=function(t,e){this._path.lineTo(t,e)},t.prototype.quadraticCurveTo=function(t,e,n,r){this._path.quadraticTo(t,e,n,r)},t.prototype.bezierCurveTo=function(t,e,n,r,o,i){this._path.cubicTo(t,e,n,r,o,i)},t.prototype.closePath=function(){this._path.close()},Object.defineProperty(t.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),t}(),u=function(){function t(t){this._pathChangedEvent=new o.a,this._segments=[],null!=t&&this._fromString(t)}return Object.defineProperty(t.prototype,"length",{get:function(){return this._segments.length},enumerable:!0,configurable:!0}),t.prototype.addPathChanged=function(t){this._pathChangedEvent.add(t)},t.prototype.removePathChanged=function(t){this._pathChangedEvent.remove(t)},t.prototype.moveTo=function(t,e){this._segments.push(new s("M",[new r.a(t,e)])),this._onPathChanged()},t.prototype.lineTo=function(t,e){this._segments.push(new s("L",[new r.a(t,e)])),this._onPathChanged()},t.prototype.quadraticTo=function(t,e,n,o){this._segments.push(new s("Q",[new r.a(t,e),new r.a(n,o)])),this._onPathChanged()},t.prototype.cubicTo=function(t,e,n,o,i,a){this._segments.push(new s("C",[new r.a(t,e),new r.a(n,o),new r.a(i,a)])),this._onPathChanged()},t.prototype.close=function(){this._segments.push(new s("Z")),this._onPathChanged()},t.prototype._onPathChanged=function(){this._pathChangedEvent.notify()},t.prototype.transform=function(t,e){for(var n=0;n<this.length;n++)this._segments[n].transform(t,e)},t.prototype.rotateAt=function(t,e){for(var n=0;n<this.length;n++)this._segments[n].rotateAt(t,e)},t.prototype.translate=function(t,e){for(var n=0;n<this.length;n++)this._segments[n].translate(t,e)},t.prototype.draw=function(t){if(t){t.beginPath();for(var e=0;e<this.length;e++)this._segments[e].draw(t)}},t.prototype.toString=function(){for(var t="",e=0;e<this.length;e++)t+=this._segments[e].toString(),e<this._segments.length-1&&(t+=" ");return t},t.prototype.clone=function(){return new t(this.toString())},t.prototype.equals=function(t){return this.isEqual(t)},t.prototype.isEqual=function(t){return null!=t&&this.toString()===t.toString()},t.prototype.addPath=function(t){var e,n;try{for(var r=a(t._segments),o=r.next();!o.done;o=r.next()){var i=o.value;this._segments.push(i.clone())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.toTextWhizzPath=function(t){var e,n,r=new t.Path;try{for(var o=a(this._segments),i=o.next();!i.done;i=o.next()){var s=i.value;switch(s.name){case"Z":r.close();break;case"M":r.moveTo(s.getPoint(0).x,s.getPoint(0).y);break;case"L":r.lineTo(s.getPoint(0).x,s.getPoint(0).y);break;case"Q":r.curveTo3(s.getPoint(0).x,s.getPoint(0).y,s.getPoint(1).x,s.getPoint(1).y);break;case"C":r.curveTo4(s.getPoint(0).x,s.getPoint(0).y,s.getPoint(1).x,s.getPoint(1).y,s.getPoint(2).x,s.getPoint(2).y)}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.fromTextWhizzPath=function(t){var e=new l;return t.parse(e),e.path},t.prototype._fromString=function(t){for(var e=t.split(" "),n=0;n<e.length;){for(var o=e[n],i=n+1,a=[];i<e.length;){var l=parseFloat(e[i]);if(isNaN(l)||!isFinite(l))break;a.push(l),i++}for(var u=0,c=[];u<a.length;)c.push(new r.a(a[u],a[u+1])),u+=2;var h=new s(o,c);this._segments.push(h),n=i}},t.rectangle=function(e,n,r,o){var i=new t;return i.moveTo(e,n),i.lineTo(e+r,n),i.lineTo(e+r,n+o),i.lineTo(e,n+o),i.lineTo(e,n),i.close(),i},t.ellipse=function(e,n,r,o){var i=r/2,a=o/2,s=new t;return s.moveTo(e,n+a),s.cubicTo(e,n+a-.5517*a,e+i-.5517*i,n,e+i,n),s.cubicTo(e+i+.5517*i,n,e+r,n+a-.5517*a,e+r,n+a),s.cubicTo(e+r,n+a+.5517*a,e+i+.5517*i,n+o,e+i,n+o),s.cubicTo(e+i-.5517*i,n+o,e,n+a+.5517*a,e,n+a),s.close(),s},t.roundedRectangle=function(e,n,r,o,a){if(null==a)return t.rectangle(e,n,r,o);var s=new t,l=e,u=n,c=a[0].width,h=a[0].height,p=a[1].width,f=a[1].height,d=a[2].width,y=a[2].height,g=a[3].width,m=a[3].height;return(Object(i.e)(c,0)||Object(i.e)(h,0))&&(c=h=0),(Object(i.e)(p,0)||Object(i.e)(f,0))&&(p=f=0),(Object(i.e)(d,0)||Object(i.e)(y,0))&&(d=y=0),(Object(i.e)(g,0)||Object(i.e)(m,0))&&(g=m=0),s.moveTo(l+c,u),Object(i.e)(c+p,r)||s.lineTo(l+r-p,u),Object(i.e)(p,0)||Object(i.e)(f,0)||s.cubicTo(l+r-p*(1-.5517),u,l+r,u+f*(1-.5517),l+r,u+f),Object(i.e)(f+y,o)||s.lineTo(l+r,u+o-y),Object(i.e)(d,0)||Object(i.e)(y,0)||s.cubicTo(l+r,u+o-y*(1-.5517),l+r-d*(1-.5517),u+o,l+r-d,u+o),Object(i.e)(d+g,r)||s.lineTo(l+g,u+o),Object(i.e)(g,0)||Object(i.e)(m,0)||s.cubicTo(l+g*(1-.5517),u+o,l,u+o-m*(1-.5517),l,u+o-m),Object(i.e)(m+h,o)||s.lineTo(l,u+h),Object(i.e)(c,0)||Object(i.e)(h,0)||s.cubicTo(l,u+h*(1-.5517),l+c*(1-.5517),u,l+c,u),s.close(),s},t.rotatedRectangle=function(e){var n=e.getUpperLeftCorner(),r=e.getUpperRightCorner(),o=e.getBottomRightCorner(),i=e.getBottomLeftCorner(),a=new t;return a.moveTo(n.x,n.y),a.lineTo(r.x,r.y),a.lineTo(o.x,o.y),a.lineTo(i.x,i.y),a.lineTo(n.x,n.y),a.close(),a},t}()},433:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(384),o=n(398),i=n(461),a=function(){function t(t,e,n,o,i){this._angle=0,this._scaleX=0,this._scaleY=0,this._translateX=0,this._translateY=0,this._transformChangedEvent=new r.a,this._angle=i||0,this._scaleX=t||0===t?t:1,this._scaleY=e||0===t?e:1,this._translateX=n||0,this._translateY=o||0}return t.prototype.addTransformChanged=function(t){this._transformChangedEvent.add(t)},t.prototype.removeTransformChanged=function(t){this._transformChangedEvent.remove(t)},t.prototype._setProperty=function(t,e,n){void 0===n&&(n=!1);var r="_"+t;this[r]!==e&&(this[r]=e,n||this._transformChangedEvent.notify())},Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),t.prototype.setAngle=function(t,e){this._setProperty("angle",t,e)},Object.defineProperty(t.prototype,"scaleX",{get:function(){return this._scaleX},enumerable:!0,configurable:!0}),t.prototype.setScaleX=function(t,e){this._setProperty("scaleX",t,e)},Object.defineProperty(t.prototype,"scaleY",{get:function(){return this._scaleY},enumerable:!0,configurable:!0}),t.prototype.setScaleY=function(t,e){this._setProperty("scaleY",t,e)},Object.defineProperty(t.prototype,"translateX",{get:function(){return this._translateX},enumerable:!0,configurable:!0}),t.prototype.setTranslateX=function(t,e){this._setProperty("translateX",t,e)},Object.defineProperty(t.prototype,"translateY",{get:function(){return this._translateY},enumerable:!0,configurable:!0}),t.prototype.setTranslateY=function(t,e){this._setProperty("translateY",t,e)},t.prototype.move=function(t,e){var n=this.clone();null!=t&&this.setTranslateX(this._translateX+t,!0),null!=e&&this.setTranslateY(this._translateY+e,!0),n.equals(this)||this._transformChangedEvent.notify()},t.prototype.rotate=function(t){null==t||Object(o.e)(t,0)||(this._angle+=t,this._transformChangedEvent.notify())},t.prototype.clone=function(){return new t(this._scaleX,this._scaleY,this._translateX,this._translateY,this._angle)},t.prototype.equals=function(t,e){return null!=t&&Object(o.e)(this._scaleX,t._scaleX,e)&&Object(o.e)(this._scaleY,t._scaleY,e)&&Object(o.e)(this._translateX,t._translateX,e)&&Object(o.e)(this._translateY,t._translateY,e)&&Object(o.e)(this._angle,t._angle,e)},t.isEqual=function(t,e,n){return void 0===n&&(n=1e-4),null==t&&null==e||null!=t&&null!=e&&t.equals(e,n)},t.prototype.toMatrix=function(){var t=this._angle,e=Math.sin(Object(o.c)(t)),n=Math.cos(Object(o.c)(t));return new i.a(n*this._scaleX,e*this._scaleX,-e*this._scaleY,n*this._scaleY,this._translateX,this._translateY)},t.prototype.clear=function(t){var e=void 0===t?{}:t,n=e.keepAngle,r=void 0!==n&&n,o=e.supressOnChanged,i=void 0!==o&&o;this._scaleX=1,this._scaleY=1,this._translateX=0,this._translateY=0,r||(this._angle=0),i||this._transformChangedEvent.notify()},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return Object(o.e)(this._scaleX,1)&&Object(o.e)(this._scaleY,1)&&Object(o.e)(this._translateX,0)&&Object(o.e)(this._translateY,0)&&Object(o.e)(this._angle,0)},enumerable:!0,configurable:!0}),t}()},434:function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r,o=n(384),i=n(494),a=n(564),s=n(382),l=n(383),u=n(439),c=n(500),h=n(486),p=n(391),f=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},y=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=function(t){function e(e,n){void 0===n&&(n=null);var r=t.call(this,e,n)||this;return r._maxImageSize=4e6,r._imageResizedEvent=new o.c,r._qualityChangeContainer=null,r._qualityChangeScaleBar=null,r._qualityChangeInfoBar=null,r.item.source.type===s.ImageItem.ImageSourceType.Url&&r.loadImage(null,{downloadToServerCache:!0,actualSize:r.item.source.actualSize,saveAspectRatio:r.item.source.saveAspectRatio}),r}return f(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n);var r=null==this.item.source.id&&null!=this.item.source.url;this.item.source.id=e.source.id,this.item.source.width=e.source.width,this.item.source.height=e.source.height,this.item.source.isVector=e.source.isVector,this.item.source.pageIndex=e.source.pageIndex,this.item.source.url=e.source.url,r&&(this.updateRectangle(!1,null!=this.item.parentPlaceholder?this.item.parentPlaceholder.contentResizeMode:null,this.parentPlaceholder),this.update())},e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"source":this._sourceUrl=null,this.update(),null==this.item.source.id&&null!=this.item.source.url&&this.updateRectangle(!1,null!=this.item.parentPlaceholder?this.item.parentPlaceholder.contentResizeMode:null,this.parentPlaceholder);var r=this.canvas;null!=r&&r.updateFloatingItemToolbar(this);break;case"fillColor":this.item.effect===s.ImageEffect.Colorize&&this.update();case"effect":case"overlayEffect":this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},Object.defineProperty(e.prototype,"needToDownloadImage",{get:function(){return this._needToDownloadImage},set:function(t){this._needToDownloadImage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"takeIntoAccountImageDpi",{get:function(){return this._takeIntoAccountImageDpi},set:function(t){this._takeIntoAccountImageDpi=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceImageHorizontalResolution",{get:function(){return this._sourceImageHorizontalResolution},set:function(t){this._sourceImageHorizontalResolution=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceImageVerticalResolution",{get:function(){return this._sourceImageVerticalResolution},set:function(t){this._sourceImageVerticalResolution=t},enumerable:!0,configurable:!0}),e.prototype.loadImage=function(t,e){return void 0===e&&(e={}),d(this,void 0,void 0,function(){var n=this;return y(this,function(r){switch(r.label){case 0:return"string"!=typeof t&&this.item.source.type!==s.ImageItem.ImageSourceType.Url&&console.error("Invalid sourceUrl: "+t),e.downloadToServerCache?(this._needToDownloadImage=!0,this._actualSize=null!=e.actualSize&&e.actualSize,this._saveAspectRatio=null==e.saveAspectRatio||e.saveAspectRatio,this._sourceUrl=t,null==t&&(this._sourceUrl=this.item.source.url),[4,new Promise(function(t){return n.update(null,t)})]):[3,2];case 1:return r.sent(),[3,3];case 2:this._needToDownloadImage=!1,this._setSrc(t),r.label=3;case 3:return[2,this.item.source.id]}})})},e.prototype.loadImageFromRemoteUrl=function(t,e){return d(this,void 0,void 0,function(){var n,r,o;return y(this,function(i){switch(i.label){case 0:return o=(r=JSON).parse,[4,u.e({url:l.s(t,"/api/ImagePicker/GetWebImageMeta"),type:u.b.post,headers:[u.a.json],data:JSON.stringify({url:e})})];case 1:return n=o.apply(r,[i.sent().value]),this.item.source.id=n.storageId,this.item.source.width=n.width,this.item.source.height=n.height,this.item.source.isVector=n.isVector,this.item.name=n.name,this.item.sourceRectangle.width=this.item.source.width,this.item.sourceRectangle.height=this.item.source.height,[2]}})})},e.prototype.loadImageFromImagePicker=function(t,e,n){var r=this;return u.e({url:l.s(t,"api/imagepicker/GetSourceImageMetadata"),type:u.b.post,headers:[u.a.json],data:JSON.stringify(e)}).then(function(t){var e=new s.ImageMetaData(t.value);r.item.source.setIdWithOrigin(e.storageId,e.origin),r.item.source.width=e.size.width,r.item.source.height=e.size.height,r.name=e.name,r.item.source.isVector=e.isVector,r.item.source.pageIndex=e.pageIndex,r.item.sourceRectangle=n,r.updateRectangle()})},e.prototype.showEditButton=function(){return t.prototype.showEditToolbarButton.call(this)&&!this.item.source.isVector},e.prototype.update=function(t,e){var n=this;if(void 0!=this._sourceUrl&&null!=this._sourceUrl)this._update([this._actualSize,this._saveAspectRatio,this._sourceUrl],t,e),null==this.item.source.id&&null!=this.item.source.url&&this.updateRectangle(!1,null!=this.item.parentPlaceholder?this.item.parentPlaceholder.contentResizeMode:null,this.parentPlaceholder);else if(this.item.source.type===s.ImageItem.ImageSourceType.Url)this.loadImage(null,{downloadToServerCache:!0,actualSize:this.item.source.actualSize,saveAspectRatio:this.item.source.saveAspectRatio}).then(function(){null!=n.canvas&&n.canvas.updateSelection()});else{this.quickUpdate();var r=this.canvas;null!=r&&r.updateSelection()}},e.prototype._createDataInstance=function(t){return new a.a(t)},e.prototype._updateImageUrl=function(){var e=this,n=this.canvas;if(null!=n&&this.isVisible()){if(null==this.item.source.id||null!=this.item.source.width&&null!=this.item.source.height)return void t.prototype._updateImageUrl.call(this);n.service.GetImageSize(this.item.source.id,this.item.source.pageIndex,function(n){if(e.item.source.width=n.width,e.item.source.height=n.height,e._saveAspectRatio){var r=e.item.source.width/e.item.source.height;e.width<e.height?e.height=e.width/r:e.width=e.height*r}t.prototype._updateImageUrl.call(e)},function(t){window.console&&(console.error("Unable GetimageSize of image with id "+e.item.source.id),console.error(t))})}},e.prototype._createImageUrl=function(){var t=this.item.source.id;if(null==t)return null;var e,n,r=this.canvas;if(null==r)return null;var o=r.zoom,i=o*p.a.screenDpi/72,a=o*p.a.screenDpi/72,s=this.rectangle;e=s.width*i,n=s.height*a,this.item.source.isVector||(e=Math.min(e,this.item.source.width),n=Math.min(n,this.item.source.height));var l=this._maxImageSize/e/n;return l<1&&(e*=l=Math.sqrt(l),n*=l),e=Math.max(1,Math.round(e)),n=Math.max(1,Math.round(n)),this._pixelWidth=e,this._pixelHeight=n,c.a.getImageUrl(r,t,e,n,!1,this.item.effect,!1,this.item.overlayEffect,this.item.source.pageIndex,!this.isNormalRenderingType,this.item.fillColor)},e.prototype.addImageResized=function(t){this._imageResizedEvent.add(t)},e.prototype.removeImageResized=function(t){this._imageResizedEvent.remove(t)},e.prototype._onResized=function(){var e=this.rectangle;return this._imageResizedEvent.notify(this,{Width:e.width,Height:e.height}),this.update(),t.prototype._onResized.call(this)},e.prototype._getDrawingFillColor=function(){return this.item.effect===s.ImageEffect.Colorize?h.a.createColor("rgba(0,0,0,0)"):this.item.fillColor},Object.defineProperty(e.prototype,"qualityChangeScaleBar",{get:function(){return this._qualityChangeScaleBar},set:function(t){this._qualityChangeScaleBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityChangeInfoBar",{get:function(){return this._qualityChangeInfoBar},set:function(t){this._qualityChangeInfoBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"qualityChangeContainer",{get:function(){return this._qualityChangeContainer},set:function(t){this._qualityChangeContainer=t},enumerable:!0,configurable:!0}),e.prototype.setQualityChangeScaleBarWidth=function(t){null!=this._qualityChangeScaleBar&&(t=Math.max(0,t),t=Math.min(100,t),this._qualityChangeScaleBar.style.width=t+"%")},e.prototype.setQualityChangeInfoBarText=function(t){null!=this._qualityChangeInfoBar&&(this._qualityChangeInfoBar.innerText=t)},e.prototype.setBadToWarningChangeScaleBarClass=function(){var t=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=t){var e=this._qualityChangeScaleBar.getAttribute("class"),n=t.qualityBadToWarningChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=t.qualityWarningToGoodChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var o=t.qualityBadToGoodChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,!1);var i=t.qualityNoAnimationChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,this._qualityChangeScaleBar.getAttribute("class")!==e)}},e.prototype.setWarningToGoodChangeScaleBarClass=function(){var t=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=t){var e=this._qualityChangeScaleBar.getAttribute("class"),n=t.qualityWarningToGoodChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=t.qualityBadToWarningChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var o=t.qualityBadToGoodChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,!1);var i=t.qualityNoAnimationChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,this._qualityChangeScaleBar.getAttribute("class")!==e)}},e.prototype.setBadToGoodChangeScaleBarClass=function(){var t=this.canvas;if(null!=this._qualityChangeScaleBar&&null!=t){var e=this._qualityChangeScaleBar.getAttribute("class"),n=t.qualityBadToGoodChangeScaleBarCssClass;null!=n&&""!==n&&this._qualityChangeScaleBar.classList.toggle(n,!0);var r=t.qualityBadToWarningChangeScaleBarCssClass;null!=r&&""!==r&&this._qualityChangeScaleBar.classList.toggle(r,!1);var o=t.qualityWarningToGoodChangeScaleBarCssClass;null!=o&&""!==o&&this._qualityChangeScaleBar.classList.toggle(o,!1);var i=t.qualityNoAnimationChangeScaleBarCssClass;null!=i&&""!==i&&this._qualityChangeScaleBar.classList.toggle(i,this._qualityChangeScaleBar.getAttribute("class")!==e)}},e.prototype.updateRectangle=function(e,n,r,o){t.prototype.updateRectangle.call(this,e,n,r,this.item.source.width,this.item.source.height,o)},e.typeName="ImageItemHandler",e}(i.a)},435:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(498),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=t.call(this,e)||this;return n.__type="ShapeHandlerData",n}return i(e,t),e.prototype.applyState=function(e,n){t.prototype.applyState.call(this,e,n)},e}(o.a)},436:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return o});var r,o,i=n(380),a=n(504),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},u=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=function(t){function e(e,n){var r=t.call(this,e)||this;return r._historyArgs=n,null==r._historyArgs&&(r._historyArgs={}),r._historyUpdateMode=null!=r._historyArgs.historyUpdateMode?r._historyArgs.historyUpdateMode:o.Update,r}return s(e,t),e.prototype.execute=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return null!=this._historyArgs.history&&this._historyArgs.history.pause(),[4,this._executeCommandBody()];case 1:return t=e.sent(),null!=this._historyArgs.history&&this._historyArgs.history.resume(this._historyUpdateMode!==o.NotUpdate,this._historyArgs.historyUpdateMode===o.ForceUpdate),[2,t]}})})},e.prototype._executeCommandBody=function(){throw new i.e},e.prototype.redo=function(){throw new i.e},e.prototype.undo=function(){throw new i.e},e}(a.a);!function(t){t[t.NotUpdate=0]="NotUpdate",t[t.Update=1]="Update",t[t.ForceUpdate=2]="ForceUpdate"}(o||(o={}))},437:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"h",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"e",function(){return h}),n.d(e,"d",function(){return p}),n.d(e,"c",function(){return f}),n.d(e,"g",function(){return d}),n.d(e,"b",function(){return o});var r,o,i=n(403),a=n(505),s=n(381),l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function u(t,e,n){return p(t.left,e.left,n)&&p(t.top,e.top,n)&&p(t.width,e.width,n)&&p(t.height,e.height,n)}function c(t,e,n){if(void 0===n&&(n=o.Fit),t.width===e.width&&t.height===e.height)return t;if(n===o.Original)return l({},t);if(n===o.Arbitrary)return l({},e);var r=n===o.Fit?Math.min(e.width/t.width,e.height/t.height):Math.max(e.width/t.width,e.height/t.height);return{width:t.width*r,height:t.height*r}}function h(t,e,n,r,s){if(void 0===n&&(n=o.Fit),void 0===r&&(r=a.a.Center),void 0===s&&(s=a.a.Center),i.a.isEqual(t,e))return t.clone();var l,u,h=c({width:t.width,height:t.height},{width:e.width,height:e.height},n);switch(r){case a.a.Left:l=e.left;break;case a.a.Right:l=e.right-h.width;break;default:l=e.center.x-h.width/2}switch(s){case a.a.Top:u=e.top;break;case a.a.Bottom:u=e.bottom-h.height;break;default:u=e.center.y-h.height/2}return new i.a(l,u,h.width,h.height)}function p(t,e,n){return null==n&&(n=1e-4),0!==n?Math.abs(t-e)<=n:t===e}function f(t,e,n){return null!=n&&(t=Math.min(t,n)),null!=e&&(t=Math.max(e,t)),t}function d(t,e,n){var r,o;switch(e){case a.a.Left:r=t.left;break;case a.a.Right:r=t.right;break;default:r=t.left+t.width/2}switch(n){case a.a.Top:o=t.top;break;case a.a.Bottom:o=t.bottom;break;default:o=t.top+t.height/2}return new s.PointF(r,o)}!function(t){t.from=function(t){return{width:t.width,height:t.height}}}(r||(r={})),function(t){t[t.Fit=0]="Fit",t[t.Fill=1]="Fill",t[t.Arbitrary=2]="Arbitrary",t[t.Original=3]="Original"}(o||(o={}))},439:function(t,e,n){"use strict";n.d(e,"e",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return h}),n.d(e,"a",function(){return p});var r,o,i=n(380),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(n){var r=t.call(this,n.value)||this;return r.ajaxResponse=n,r.name="AjaxResponseException",Object.setPrototypeOf(r,e.prototype),r}return a(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.ajaxResponse=this.ajaxResponse,e},e}(i.c),l=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=function(t){return new Promise(function(e,n){var r,o,i=new XMLHttpRequest;if(i.open(t.type,t.url,!0),i.setRequestHeader("Accept","*/*"),null!=t.headers)try{for(var a=l(t.headers),u=a.next();!u.done;u=a.next()){var c=u.value;i.setRequestHeader(c.name,c.value)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}null!=t.responseType&&(i.responseType=t.responseType),i.send(t.data),i.onreadystatechange=function(){if(4===i.readyState){var t=i.status,r={value:"arraybuffer"!==i.responseType?i.responseText:"",status:t,contentType:i.getResponseHeader("content-type"),xhr:i};t>=200&&t<300?e(r):n(new s(r))}}})},c=function(t){return u({url:t,type:h.get,headers:[p.json]})};!function(t){t[t.Ok=200]="Ok",t[t.NoContent=204]="NoContent",t[t.NotFound=404]="NotFound",t[t.InternalServerError=500]="InternalServerError"}(o||(o={}));var h,p;!function(t){t.post="POST",t.get="GET",t.Delete="DELETE"}(h||(h={})),function(t){t.isJsonContentType=function(t){return 0===t.trim().toLowerCase().indexOf("application/json")},t.json={name:"Content-Type",value:"application/json;charset=UTF-8"},t.text={name:"Content-Type",value:"text/plain"}}(p||(p={}))},442:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t.Normal="Normal",t.Multiply="Multiply",t.Screen="Screen",t.Overlay="Overlay",t.Darken="Darken",t.Lighten="Lighten",t.ColorDodge="ColorDodge",t.ColorBurn="ColorBurn",t.HardLight="HardLight",t.SoftLight="SoftLight",t.Difference="Difference",t.Exclusion="Exclusion",t.None="None"}(r||(r={}))},443:function(t,e,n){"use strict";n.d(e,"c",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"a",function(){return h});var r,o=n(380),i=n(386),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},l=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},u=function(){function t(t){this._defaultValue=t}return t.prototype.getDefaultValue=function(){return this._defaultValue},Object.defineProperty(t.prototype,"type",{get:function(){return typeof this._defaultValue},enumerable:!0,configurable:!0}),t}(),c=function(){function t(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._objectConstructor=t,this._args=e}return t.prototype.getDefaultValue=function(){var t;return new((t=this._objectConstructor).bind.apply(t,l([void 0],this._args)))},Object.defineProperty(t.prototype,"type",{get:function(){return typeof this._objectConstructor},enumerable:!0,configurable:!0}),t}(),h=function(t){function e(){return t.call(this,i.Color,[{type:"cmyk",getDefaultValue:function(){return new i.CmykColor({c:0,m:0,y:0,k:100})}},{type:"rgb",getDefaultValue:function(){return new i.RgbColor({r:0,g:0,b:0,a:255})}},{type:"spot",getDefaultValue:function(){return new i.SpotColor({inkName:"inkName",inkColor:new i.CmykColor({c:0,m:0,y:0,k:100}),inkSolidity:100})}},{type:"grayscale",getDefaultValue:function(){return new i.GrayscaleColor({l:0})}},{type:"lab",getDefaultValue:function(){return new i.LabColor({l:0,a:0,b:0})}}])||this}return a(e,t),e}(function(){function t(t,e){this._abstractObjectClass=t,this._derivedClassesData=e}return t.prototype.getDefaultValue=function(t){var e=this._derivedClassesData.find(function(e){return e.type===t});if(null==e)throw new o.c("Type "+t+" is not defined! Try on of these values: "+this.derivedTypes.join(", ")+".");return e.getDefaultValue()},Object.defineProperty(t.prototype,"type",{get:function(){return this._abstractObjectClass},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"derivedTypes",{get:function(){return this._derivedClassesData.map(function(t){return t.type})},enumerable:!0,configurable:!0}),t}())},444:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return c});var r,o=n(386),i=n(398),a=n(384),s=n(400),l=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t.Miter="Miter",t.Round="Round",t.Bevel="Bevel"}(r||(r={}));var c=function(){function t(e){this._color=new o.RgbColor("rgb(0,0,0)"),this._size=0,this._lineJoin=r.Miter,this.type=t.type,this._propertyChanged=new a.c,null!=e&&(this.color=null!=e.color?e.color:new o.RgbColor("rgb(0,0,0)"),this.size=null!=e.size?e.size:0,this.lineJoin=null!=e.lineJoin?e.lineJoin:r.Miter)}return Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){o.Color.equals(this._color,t)||(this._color=t,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(t){this._size!==t&&(this._size=t,this._propertyChanged.notify(this,"size"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this._propertyChanged.notify(this,"lineJoin"))},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this)},t._from_data=function(e){return null==e?null:new t({color:o.ColorFactory.createColor(e.color),size:"number"==typeof e.size?e.size:0,lineJoin:"string"==typeof e.lineJoin?e.lineJoin:r.Miter})},t.prototype.equals=function(e){return e instanceof t&&this.color.equals(e.color)&&Object(i.e)(this.size,e.size)&&this.lineJoin==e.lineJoin},t.equals=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.equals(e)},t.prototype.getSimplifiedObject=function(){return{color:this.color.toString(),size:this.size,lineJoin:this.lineJoin}},t.prototype.addPropertyChanged=function(t){this._propertyChanged.add(t)},t.prototype.removePropertyChanged=function(t){this._propertyChanged.remove(t)},t.type="StrokeSettings",l([Object(s.a)({enumObject:r}),u("design:type",String),u("design:paramtypes",[String])],t.prototype,"lineJoin",null),t}()},445:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(386),o=n(398),i=n(384),a=function(){function t(t){this._color=new r.RgbColor("rgb(0,0,0)"),this._angle=0,this._distance=0,this._size=0,this._propertyChanged=new i.c,null!=t&&(this.color=null!=t.color?t.color:new r.RgbColor("rgb(0,0,0)"),this.angle=null!=t.angle?t.angle:0,this.distance=null!=t.distance?t.distance:0,this.size=null!=t.size?t.size:0)}return Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){r.Color.equals(this._color,t)||(this._color=t,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle!==t&&(this._angle=t,this._propertyChanged.notify(this,"angle"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance!==t&&(this._distance=t,this._propertyChanged.notify(this,"distance"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(t){this._size!==t&&(this._size=t,this._propertyChanged.notify(this,"size"))},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this)},t._from_data=function(e){return null==e?null:new t({color:r.ColorFactory.createColor(e.color),angle:"number"==typeof e.angle?e.angle:0,distance:"number"==typeof e.distance?e.distance:0,size:"number"==typeof e.size?e.size:0})},t.prototype.equals=function(e){return e instanceof t&&this.color.equals(e.color)&&Object(o.e)(this.angle,e.angle)&&Object(o.e)(this.distance,e.distance)&&Object(o.e)(this.size,e.size)},t.equals=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.equals(e)},t.prototype.getSimplifiedObject=function(){return{color:this.color.toString(),angle:this.angle,distance:this.distance,size:this.size}},t.prototype.addPropertyChanged=function(t){this._propertyChanged.add(t)},t.prototype.removePropertyChanged=function(t){this._propertyChanged.remove(t)},t}()},446:function(t,e,n){"use strict";var r,o,i,a,s,l;n.d(e,"b",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"e",function(){return a}),n.d(e,"f",function(){return s}),n.d(e,"a",function(){return l}),function(t){t[t.ShrinkToContentWidth=0]="ShrinkToContentWidth",t[t.StretchToContentWidth=1]="StretchToContentWidth",t[t.ShrinkOrStretchToContentWidth=2]="ShrinkOrStretchToContentWidth",t[t.ShrinkToContentHeight=3]="ShrinkToContentHeight",t[t.StretchToContentHeight=4]="StretchToContentHeight",t[t.ShrinkOrStretchToContentHeight=5]="ShrinkOrStretchToContentHeight",t[t.ShrinkToContent=6]="ShrinkToContent",t[t.StretchToContent=7]="StretchToContent",t[t.ShrinkOrStretchToContent=8]="ShrinkOrStretchToContent"}(r||(r={})),function(t){t[t.Size=0]="Size",t[t.Scale=1]="Scale"}(o||(o={})),function(t){t[t.Clip=0]="Clip",t[t.FitToWidth=1]="FitToWidth",t[t.FitToBox=2]="FitToBox",t[t.ExpandBox=3]="ExpandBox"}(i||(i={})),function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t[t.Justify=3]="Justify",t[t.LastLeft=4]="LastLeft",t[t.LastRight=5]="LastRight",t[t.LastCenter=6]="LastCenter"}(a||(a={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Bottom=2]="Bottom"}(s||(s={})),function(t){t[t.Ascent=0]="Ascent",t[t.CapHeight=1]="CapHeight",t[t.Leading=2]="Leading",t[t.XHeight=3]="XHeight",t[t.Fixed=4]="Fixed"}(l||(l={}))},447:function(t,e,n){"use strict";n.d(e,"a",function(){return O});var r,o=n(489),i=n(490),a=n(414),s=n(403),l=n(380),u=n(384),c=n(387),h=n(422),p=n(491),f=n(466),d=n(383),y=n(467),g=n(400),m=n(443),_=n(442),v=n(386),b=n(550),w=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),C=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},P=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},x=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O=function(t){function e(n,r,o,l,u){var c=t.call(this)||this;return c._effect=h.a.None,c._overlayEffect=null,c.type=e.type,c.mviKeepTemplateTransform=!1,c.values=[],c.allowedSubfolder=null,c.ratioWidthToHeight=null,c.isUserImage=!1,c._onSourcePropertyChanged=function(t,e){switch(e){case"url":case"id":case"pageIndex":c._propertyChanged.notify(c,"source");break;case"isVector":c.applyPermissionsConstrain(),c._propertyChanged.notify(c,"source")}},c._onOverlayEffectPropertyChanged=function(t,e){c._propertyChanged.notify(c,"overlayEffect")},c.imagePermissions=new i.a,c._setViolationSettings(new b.a,!0),c.manipulationPermissions.resizeGrips=new a.a(!0,!1),c.shapePermissions.allowChangeFillColor=!1,c.imagePermissions.allowKeepOverlayColor=!1,c.itemPermissions.itemToolbarPermissions.showSelectButton=!0,c.source=null!=n?new e.ImageSource(n):new e.ImageSource,null!=u&&(c.ratioWidthToHeight=u),null!=o&&null!=l?c.sourceRectangle=new s.a(0,0,o,l):(null!=o&&c.SetWidth(o),null!=l&&c.SetHeight(l)),null!=r&&(c.sourceRectangle.left=r.x,c.sourceRectangle.top=r.y),c}return w(e,t),e.prototype._copy=function(e,n,r,o){var i,a;if(t.prototype._copy.call(this,e,n,r,o),n.imagePermissions=null!=e._imagePermissions?e._imagePermissions.clone():null,n.effect=e._effect,n.overlayEffect=null!=e.overlayEffect?e.overlayEffect.clone():null,n.source=e._source.clone(),n.mviKeepTemplateTransform=e.mviKeepTemplateTransform,null!=e.values){n.values=[];try{for(var s=x(e.values),l=s.next();!l.done;l=s.next()){var u=l.value;n.values.push(u.clone())}}catch(t){i={error:t}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}}n.allowedSubfolder=e.allowedSubfolder,n.allowedTabs=c.clone(e.allowedTabs),n.ratioWidthToHeight=e.ratioWidthToHeight,n.isUserImage=e.isUserImage},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(d.h)(this._imagePermissions,e._imagePermissions)&&Object(d.h)(this._effect,e._effect)&&Object(d.h)(this._source,e._source)&&Object(d.h)(this.mviKeepTemplateTransform,e.mviKeepTemplateTransform)&&Object(d.h)(this.overlayEffect,e.overlayEffect)&&Object(d.c)(this.values,e.values)&&Object(d.h)(this.allowedSubfolder,e.allowedSubfolder)&&Object(d.c)(this.allowedTabs,e.allowedTabs)&&Object(d.h)(this.ratioWidthToHeight,e.ratioWidthToHeight)&&Object(d.h)(this.isUserImage,e.isUserImage)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},Object.defineProperty(e.prototype,"imagePermissions",{get:function(){return this._imagePermissions},set:function(t){if(null==t)throw new l.a("imagePermissions cannot be null");Object(d.h)(this._imagePermissions,t)||(null!=this._imagePermissions&&this._imagePermissions.propertyChanged.remove(this._onPermissionsChanged),this._imagePermissions=t,this.applyPermissionsConstrain(),this._imagePermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"imagePermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(t){this._setViolationSettings(t)},enumerable:!0,configurable:!0}),e.prototype._setViolationSettings=function(e,n){if(void 0===n&&(n=!1),!(n||e instanceof b.a))throw new l.a("Shape ViolationSettings property must has ImageViolationSettings type!");t.prototype._setViolationSettings.call(this,e,n)},e.prototype.applyPermissionsConstrain=function(){t.prototype.applyPermissionsConstrain.call(this),null==this.imagePermissions||this.imagePermissions.allowChangeImage||this.imagePermissions.allowEditImage?null!=this.source&&this.source.isVector?this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=!1:this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=null:this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=!1,null==this.imagePermissions||this.imagePermissions.allowChangeImage?this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=null:this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=!1},Object.defineProperty(e.prototype,"displayName",{get:function(){var t=this;if(null==this._displayName&&null!=this.values&&this.values.length>0){var e=this.values.find(function(e){return e.value.id===t.source.id});null!=e&&(this.displayName=e.name)}return this._displayName},set:function(t){t!=this._displayName&&(this._displayName=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){this._source===t||null!=this._source&&this._source.equals(t)||(null!=this._source&&this._source.removePropertyChanged(this._onSourcePropertyChanged),this._source=t,null!=this._source&&this._source.addPropertyChanged(this._onSourcePropertyChanged),this._propertyChanged.notify(this,"source"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effect",{get:function(){return this._effect},set:function(t){this._effect!==t&&(this._effect=t,this._propertyChanged.notify(this,"effect"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlayEffect",{get:function(){return this._overlayEffect},set:function(t){f.a.equals(this.overlayEffect,t)||(this._unsubscribeOverlayEffectPropertyChanged(),this._overlayEffect=t,this._subscribeOverlayEffectPropertyChanged(),this._propertyChanged.notify(this,"overlayEffect"))},enumerable:!0,configurable:!0}),e.prototype._subscribeOverlayEffectPropertyChanged=function(){null!=this.overlayEffect&&this.overlayEffect.addPropertyChanged(this._onOverlayEffectPropertyChanged)},e.prototype._unsubscribeOverlayEffectPropertyChanged=function(){null!=this.overlayEffect&&this.overlayEffect.removePropertyChanged(this._onOverlayEffectPropertyChanged)},e.prototype.SetWidth=function(t,e){this.sourceRectangle.width=t,null!=e&&(e=!0),null!=this.source.id&&e&&(this.sourceRectangle.height=this._calculateHeight(t))},e.prototype.SetHeight=function(t,e){this.sourceRectangle.height=t,null!=e&&(e=!0),null!=this.source.id&&e&&(this.sourceRectangle.width=this._calculateWidth(t))},e.prototype.getSrc=function(){throw new l.e},e.prototype._calculateHeight=function(t){if(null==this.ratioWidthToHeight)throw new l.c("Field ratioWidthToHeight is not set!");return t/this.ratioWidthToHeight},e.prototype._calculateWidth=function(t){if(null==this.ratioWidthToHeight)throw new l.c("Field ratioWidthToHeight is not set!");return t*this.ratioWidthToHeight},e.prototype.getSimplifiedObject=function(e){c.isArray(e)||c.isString(e)||(e=[]);var n=t.prototype.getSimplifiedObject.call(this,["imagePermissions"].concat(e));return n.source={id:this.source.id,width:this.source.width,height:this.source.height,isVector:this.source.isVector,pageIndex:this.source.pageIndex,url:this.source.url,actualSize:this.source.actualSize,saveAspectRatio:this.source.saveAspectRatio,origin:this.source.origin},n.imagePermissions=this.imagePermissions.getSimplifiedObject(),n},e.prototype.getOriginalImageSize=function(){return{width:Object(p.b)(this.source.width,this.source.dpiX||72),height:Object(p.b)(this.source.height,this.source.dpiY||72)}},e.type="ImageItem",C([Object(g.a)({factory:new m.c("subfolder"),displayName:"Allowed subfolder"}),P("design:type",String)],e.prototype,"allowedSubfolder",void 0),C([Object(g.a)({factory:new m.c("allowedTabs"),displayName:"Allowed tabs"}),P("design:type",Array)],e.prototype,"allowedTabs",void 0),C([Object(g.a)({factory:new m.c("Image"),displayName:"Display name"}),P("design:type",Object),P("design:paramtypes",[Object])],e.prototype,"displayName",null),C([Object(g.a)({enumObject:h.a}),P("design:type",Number),P("design:paramtypes",[Number])],e.prototype,"effect",null),C([Object(g.a)({factory:new m.b(f.a,{color:new v.CmykColor({c:0,m:0,y:0,k:0}),opacity:1,blendMode:_.a.Normal}),displayName:"Overlay effect"}),P("design:type",f.a),P("design:paramtypes",[f.a])],e.prototype,"overlayEffect",null),e}(o.a);!function(t){var e=function(){function t(t){c.extend(this,t)}return t.prototype.clone=function(){return new t(this)},t.prototype.equals=function(t){return null!=t&&Object(d.h)(this.id,t.id)&&Object(d.h)(this.width,t.width)&&Object(d.h)(this.height,t.height)&&Object(d.h)(this.isVector,t.isVector)},t}();t.ImageMetaData=e;var n,r=function(){function t(t,e,n){this.name=t,this.value=e,this.transformedRectangle=n}return t.prototype.clone=function(){return new t(this.name,this.value.clone(),this.transformedRectangle.clone())},t.prototype.equals=function(t){return null!=t&&Object(d.h)(this.name,t.name)&&Object(d.h)(this.value,t.value)&&Object(d.h)(this.transformedRectangle,t.transformedRectangle)},t}();t.ImageItemValue=r,function(t){t[t.None=0]="None",t[t.StorageId=3]="StorageId",t[t.Url=4]="Url"}(n=t.ImageSourceType||(t.ImageSourceType={}));var o=function(){function t(t,e,r,o,i,a){void 0===r&&(r=0),void 0===o&&(o=!1),void 0===i&&(i=!0),this._storageId=null,this._url=null,this._type=n.None,this._isVector=!1,this._pageIndex=0,this._origin=null,this._actualSize=!1,this._saveAspectRatio=!0,this._dpiX=72,this._dpiY=72,this._propertyChanged=new u.c,this._storageId=t,null!=t&&(this._type=n.StorageId,this._origin=a),this._url=e,null!=e&&(this._type=n.Url,this._actualSize=o,this._saveAspectRatio=i)}return t.prototype.clone=function(){var e=new t;return e.id=this.id,e.url=this.url,e._type=this._type,e._width=this._width,e._height=this._height,e._isVector=this._isVector,e._pageIndex=this._pageIndex,e._origin=null!=this._origin?this._origin.clone():null,e._actualSize=this._actualSize,e._saveAspectRatio=this._saveAspectRatio,e},t.prototype.equals=function(t){return Object(d.h)(this.id,t.id)&&Object(d.h)(this.url,t.url)&&Object(d.h)(this._type,t._type)&&Object(d.h)(this._width,t._width)&&Object(d.h)(this._height,t._height)&&Object(d.h)(this._origin,t._origin)&&Object(d.h)(this._saveAspectRatio,t._saveAspectRatio)&&t._pageIndex===this._pageIndex&&JSON.stringify(t._origin)===JSON.stringify(this._origin)&&t._actualSize===this._actualSize&&t._saveAspectRatio===this._saveAspectRatio},Object.defineProperty(t.prototype,"id",{get:function(){return this._storageId},set:function(t){this._storageId!==t&&(this._storageId=t,this._propertyChanged.notify(this,"id"))},enumerable:!0,configurable:!0}),t.prototype.setIdWithOrigin=function(t,e){this.id=t,this._setOrigin(e)},Object.defineProperty(t.prototype,"url",{get:function(){return this._url},set:function(t){this._url!==t&&(this._url=t,this._propertyChanged.notify(this,"url"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this._propertyChanged.notify(this,"height"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVector",{get:function(){return this._isVector},set:function(t){this._isVector!==t&&(this._isVector=t,this._propertyChanged.notify(this,"isVector"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},set:function(t){t!==this._pageIndex&&(this._pageIndex=t,this._propertyChanged.notify(this,"pageIndex"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this._origin},enumerable:!0,configurable:!0}),t.prototype._setOrigin=function(t){t!==this._origin&&(this._origin=t,this._propertyChanged.notify(this,"origin"))},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualSize",{get:function(){return this._actualSize},set:function(t){this._actualSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"saveAspectRatio",{get:function(){return this._saveAspectRatio},set:function(t){this._saveAspectRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dpiX",{get:function(){return this._dpiX},set:function(t){t>0&&(this._dpiX=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dpiY",{get:function(){return this._dpiY},set:function(t){t>0&&(this._dpiY=t)},enumerable:!0,configurable:!0}),t.prototype.addPropertyChanged=function(t){this._propertyChanged.add(t)},t.prototype.removePropertyChanged=function(t){this._propertyChanged.remove(t)},t}();t.ImageSource=o,function(t){var e=function(){function t(t){c.extend(this,t||{}),null!=t&&null!=t.originalSize&&(this.originalSize=new y.a(t.originalSize.width,t.originalSize.height))}return t.prototype.equals=function(t){return null==t&&Object(d.h)(this.type,t.type)&&Object(d.h)(this.data,t.data)&&Object(d.h)(this.originalSize,t.originalSize)},t.prototype.clone=function(){return new t(this)},t}();t.Origin=e}(o=t.ImageSource||(t.ImageSource={}))}(O||(O={}))},448:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,o=n(423),i=n(381),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e,n){void 0===n&&(n=null);var r=this;return null!=e?(r=t.call(this,i.Path.rectangle(e.sourceRectangle.left,e.sourceRectangle.top,e.sourceRectangle.width,e.sourceRectangle.height),e,n)||this)._controlPoints=[new i.PointF(e.sourceRectangle.left,e.sourceRectangle.top),new i.PointF(e.sourceRectangle.right,e.sourceRectangle.bottom)]:r=t.call(this,null,e,n)||this,r._allowNegativeResize=!0,r}return a(e,t),e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n),this.item.sourceRectangle=e.sourceRectangle},Object.defineProperty(e.prototype,"rectangle",{get:function(){var e=t.prototype._getRectangle.call(this);return e.width<0&&(e.width=-e.width),e.height<0&&(e.height=-e.height),e},enumerable:!0,configurable:!0}),e.typeName="RectangleItemHandler",e}(o.a)},449:function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r,o=n(380),i=n(388),a=n(436),s=n(382),l=n(394),u=n(417),c=n(396),h=n(386),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},d=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},y=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},m=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t},_=function(t){function e(e,n,r,o,i,a,s){var l=t.call(this,n.dataList.map(function(t){return t.item}),e,n)||this;return l._productHandler=r,l._product=o,l._variableItemHelper=i,l._commandManager=a,l._eventManager=s,l}return p(e,t),e.prototype._executeCommandBody=function(){return f(this,void 0,void 0,function(){return d(this,function(t){return[2,this._setImageDataList(this._args.dataList,this._args.keepLocation)]})})},e.prototype._setImageDataList=function(t,n){var r,o;this._normalizeDataList(t);try{for(var i=y(t),p=i.next();!p.done;p=i.next()){var f=p.value,d=f.item,g=f.imageData,m=f.tags,_=f.rotatedRectangle;if(d instanceof s.PlaceholderItem){var v=l.a.createImageContentForPlaceholder(d,g,this._productHandler,this._args.dpi);v instanceof s.ImageItem&&this._ensureImageItemName(v),d.isStubContent=!1,null!=v&&null!=m&&(v.tags=m),this._commandManager.execute(u.b.addContent,{placeholder:d,content:v},a.a.NotUpdate)}else{var b=l.a.getImageItem(d),w=this._productHandler.getHandler(b);b.effect!==c.f.Colorize&&(b.fillColor=h.ColorFactory.createColor("rgba(0, 0, 0, 0)")),null!=b.overlayEffect&&(b.imagePermissions.allowKeepOverlayColor?l.a.setOverlayEffectColor(b,b.overlayEffect.color):b.overlayEffect.color=null),e.setDataToImage(g,b),null!=m&&(b.tags=m),null!=_?w.setTransformedRectangle(_):w.updateRectangle(n),w.quickUpdate(),this._ensureImageItemName(b)}this._eventManager.imageContentChangedEvent.notify(d)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}this._productHandler.updateSelection()},e.prototype._ensureImageItemName=function(t){t.isVariable&&(t.isVariable=!1,this._variableItemHelper.setVariableValue(t,!0,!0))},e.prototype._normalizeDataList=function(t){for(var e=[],n=t.length,r=function(n){var r=t[n].item;if(r instanceof s.PlaceholderItem&&null!=r.linkId&&-1===e.indexOf(r.linkId)){var i=o._product.getAllItems({ignoreMockups:!1,flatGroupItems:!0}).filter(function(t){return t instanceof s.PlaceholderItem&&t.linkId===r.linkId});t.push.apply(t,m(i.map(function(e){return{item:e,imageData:t[n].imageData,tags:t[n].tags}}))),e.push(r.linkId)}},o=this,i=0;i<n;i++)r(i)},e.prototype.redo=function(){throw new o.e},e.prototype.undo=function(){throw new o.e},e.setDataToImage=function(t,e){null!=t.name&&(e.displayName=t.name),e.isUserImage=t.isUserImage,e.source.setIdWithOrigin(t.storageId,t.origin),e.source.pageIndex=t.pageIndex,e.source.width=t.size.width,e.source.height=t.size.height,e.source.isVector=t.isVector},e}(i.a)},450:function(t,e,n){"use strict";var r,o,i;function a(t){var e;switch(null===t||void 0===t?void 0:t.unit){case r.Mm:return.352777778;case r.Cm:return.0352777778;case r.Inch:return.0138888889;case r.Custom:return null!==(e=null===t||void 0===t?void 0:t.customUnitScale)&&void 0!==e?e:1;case r.Point:default:return 1}}n.d(e,"b",function(){return r}),n.d(e,"d",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return i}),function(t){t.Mm="Mm",t.Inch="Inch",t.Cm="Cm",t.Point="Point",t.Custom="Custom"}(r||(r={})),function(t){t[t.Default=0]="Default",t[t.Html=1]="Html",t[t.None=2]="None"}(o||(o={})),function(t){t.Overlay="Overlay",t.Normal="Normal"}(i||(i={}))},451:function(t,e,n){"use strict";n.d(e,"a",function(){return P});var r,o=n(386),i=n(381),a=n(382),s=n(383),l=n(409),u=n(506),c=n(581),h=n(392),p=n(503),f=n(587),d=n(499),y=n(473),g=n(423),m=n(380),_=n(384),v=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},w=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},C=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P=function(t){function e(n,r){void 0===r&&(r=null);var o=t.call(this,null,n,r)||this;o._textManager=null,o._staticTextRect=null,o._exitedEditModeEvent=new _.c,o._enteredEditModeEvent=new _.c,o._onTextManagerEnteredEditMode=function(t){o._enteredEditModeEvent.notify(o)},o._onTextManagerExitedEditMode=function(t){o._exitedEditModeEvent.notify(o)},o._initFrontEndRenderingDef=null;var a=null!=o.item?o.item.sourceRectangle:null;return(null==a||a.isEmpty())&&(a=new i.RectangleF(0,0,10,10)),o.originalPath=i.Path.rectangle(a.left,a.top,a.width,a.height),o.controlPoints=[new i.PointF(a.left,a.top),new i.PointF(a.right,a.bottom)],o._imageContainer=new y.a(function(){return b(o,void 0,void 0,function(){var t;return w(this,function(n){switch(n.label){case 0:return null==this.canvas?[2]:[4,this.waitUpdate()];case 1:if(n.sent(),this._textManager.isStatic){if(null==this.canvas)return[2];0!=this.canvas.getSelectedItemHandlers().length&&this.canvas.currentItemHandler instanceof e&&(null===(t=this.canvas.currentItemHandler._textManager)||void 0===t?void 0:t.isActive)||this._textManager.clearText(),this.canvas.redraw(!0)}else this._textManager.isInEdit&&this.canvas.isSelectionLocked()&&this.canvas.redraw(!0);return[2]}})})}),o._allowNegativeResize=!1,o}return v(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.item.isEmpty()&&!this._textManager.isInEdit},e.prototype.isEmptyTextPlaceholder=function(){return this.item.isTextPlaceholder&&""===this.item.text},Object.defineProperty(e.prototype,"_fontRegistry",{get:function(){var t;return null===(t=this.canvas)||void 0===t?void 0:t.fontRegistry},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textEditor",{get:function(){var t;return null===(t=this._textManager)||void 0===t?void 0:t.activeTextEditor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editing",{get:function(){return null!=this.textEditor},enumerable:!0,configurable:!0}),e.prototype.onTextWhizzInit=function(){t.prototype.onTextWhizzInit.call(this),this.update()},e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"text":this.update(null,null,"text");break;case"font":case"underline":case"color":case"alignment":case"leading":case"tracking":case"verticalScale":case"horizontalScale":case"previewScale":case"stroke":case"shadow":case"baselineShift":this.update();break;case"checkTextCrop":!this.frontEndRenderingReady&&e.checkTextCrop&&this.update()}"checkTextCrop"!==n&&t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._onItemVisibilityChanged=function(){var e,n,r;t.prototype._onItemVisibilityChanged.call(this),(null===(e=this.canvas)||void 0===e?void 0:e.isItemHandlerSelected(this))&&(this.item.visible?null===(n=this._textManager)||void 0===n||n.updateItemHandler():null===(r=this._textManager)||void 0===r||r.clearText())},e.prototype._setDataItem=function(t,e){throw new m.e("NewBaseTextItemHandler._setDataItem")},e.prototype._createDataInstance=function(t){throw new m.e("NewBaseTextItemHandler._createDataInstance")},e.prototype._onAddedOnCanvas=function(e){var n;this._textWhizz=e.textWhizz,t.prototype._onAddedOnCanvas.call(this,e),null===(n=this._textManager)||void 0===n||n.bindToCanvas()},e.prototype._onRemovedFromCanvas=function(e){var n;t.prototype._onRemovedFromCanvas.call(this,e),null===(n=this._textManager)||void 0===n||n.unbindFromCanvas()},Object.defineProperty(e.prototype,"textCropped",{get:function(){return this.item.checkTextCrop?!(!this.ready||!this.frontEndRenderingReady)&&this._textManager.isCropped:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){var t;return null===(t=this._textManager)||void 0===t?void 0:t.ready},enumerable:!0,configurable:!0}),e.prototype.updateText=function(t){this._modifyItem(function(e){e.text=t})},e.prototype._getFonts=function(){return s.i(this.item)},e.prototype.update=function(t,e,n){var r=this;if(this.isVisible()){this._frontEndUpdate(t,function(){"function"==typeof e&&e(),r.canvas.updateSelection(),r.canvas.redrawDesign()},n)}else"function"==typeof t&&t()},e.prototype.getColorData=function(){var e=this.item,n=null!=this.canvas?this.canvas.rgbColorProfileFileId:null,r=t.prototype.getColorData.call(this);return e.color.needUpdate(n)&&(r.color=e.color.getData()),null!=e.stroke&&e.stroke.color.needUpdate(n)&&(r.stroke=e.stroke.color.getData()),null!=e.shadow&&e.shadow.color.needUpdate(n)&&(r.shadow=e.shadow.color.getData()),r},e.prototype.setColorData=function(e){t.prototype.setColorData.call(this,e),this._modifyItem(function(t){null!=e.color&&(t.color=o.ColorFactory.createColor(e.color)),null!=e.stroke&&(t.stroke.color=o.ColorFactory.createColor(e.stroke)),null!=e.shadow&&(t.shadow.color=o.ColorFactory.createColor(e.shadow))})},e.prototype.hasColorsToUpdate=function(){var e,n=this.item,r=null===(e=this.canvas)||void 0===e?void 0:e.rgbColorProfileFileId;return t.prototype.hasColorsToUpdate.call(this)||n.color.needUpdate(r)||null!=n.stroke&&n.stroke.color.needUpdate(r)||null!=n.shadow&&n.shadow.color.needUpdate(r)},Object.defineProperty(e.prototype,"_isMobileTextEditorActive",{get:function(){return this.textEditor instanceof c.a},enumerable:!0,configurable:!0}),e.prototype.setRectangle=function(t,e){var n,r=i.RotatedRectangleF.fromRectangleF(this.getControlBounds()),o=t.getTransform(r);o.equals(this.item.transform,.1)||(this.item.setTransform(o,e),(null===(n=this._textManager)||void 0===n?void 0:n.isActive)&&this._transformText(o))},e.prototype._transformText=function(t){this._textManager.transformText(t)},e.prototype._getBoundsMargin=function(){return 2*this._getActualBorderWidth()},e.prototype.renderFill=function(t,e){var n=this.item,r=this.rectangle;h.a.fillRectangle(t,r,n.fillColor.preview,n.opacity*e)},e.prototype.renderStroke=function(t,e){var n=this.item,r=this.rectangle,o=this._getActualBorderWidth();o>0&&(r.width+=o,r.height+=o,h.a.drawRectangle(t,r,o,n.borderColor.preview,n.opacity*e))},e.prototype.drawItemHandler=function(t){var e,n;if(null!=t&&null!=this.canvas&&null!=this._textWhizz){var r=this.ready&&!(null===(e=this._textManager)||void 0===e?void 0:e.isStatic)&&this.canvas.isSelectionLocked();if(!this._isMobileTextEditorActive||r){this._hasVectorMask()&&!r&&(t.save(),this._clip(t));var o=this.isEmptyTextPlaceholder()?.5:1;if(this.renderFill(t,o),!this.ready||(null===(n=this._textManager)||void 0===n?void 0:n.isStatic)||r)try{p.a.renderTextImage(this,this._imageContainer,null,t,o)}catch(t){console.error(t)}this.renderStroke(t,o),this._hasVectorMask()&&!r&&t.restore()}}},e.prototype.drawHighlight=function(e){this._isMobileTextEditorActive||t.prototype.drawHighlight.call(this,e)},e.prototype.clearImageContainer=function(){this._imageContainer.clear()},e.prototype.showEditToolbarButton=function(){return null==this.canvas.textEditor||this.item.placeholders.length>0},e.prototype._getEndTransformTrigger=function(t){return"frame"},e.prototype._endTransform=function(e,n){t.prototype._endTransform.call(this,e,n),e&&n&&this.frontEndRenderingReady&&this.update(null,null,this._getEndTransformTrigger(n))},Object.defineProperty(e.prototype,"frontEndRenderingReady",{get:function(){var t=null!=this._textWhizz,e=null!=this._textManager&&!this._textManager.failed,n=null!=this._fontRegistry&&this._fontRegistry.ready&&this._fontRegistry.containsFonts(this._getFonts()),r=!this.hasColorsToUpdate();return t&&e&&n&&r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inPlaceEditingEnabled",{get:function(){return this.frontEndRenderingReady&&0==this.item.placeholders.length},enumerable:!0,configurable:!0}),e.prototype.processInPlaceEditingMouseEvent=function(t,e){return this._textManager.processMouseEvent(t,e)},e.prototype.processInPlaceEditingKeyEvent=function(t){return"keydown"!==t.type||this._textManager.processKeyEvent(t)},e.prototype.enterEditMode=function(){this._textManager.enterEditMode(0,0)},e.prototype.exitEditMode=function(t){void 0===t&&(t=!1),this._textManager.exitEditMode(t)},e.prototype._initFrontEndRendering=function(){var t=this;this._textManager=new u.a(this),this._textManager.add_staticTextImageChanged(function(e){null==e.url?(t._imageContainer.clear(),t.canvas.redraw()):(t._staticTextRect=e.rect,t._imageContainer.updateUrl(e.url))}),this._textManager.exitedEditModeEvent.add(this._onTextManagerExitedEditMode),this._textManager.enteredEditModeEvent.add(this._onTextManagerEnteredEditMode)},Object.defineProperty(e.prototype,"exitedEditModeEvent",{get:function(){return this._exitedEditModeEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enteredEditModeEvent",{get:function(){return this._enteredEditModeEvent},enumerable:!0,configurable:!0}),e.prototype._getTextForRendering=function(){return this.isEmptyTextPlaceholder()?this.item.originalText:this.item.text},e.prototype.initTextWhizzHandler=function(t,e){var n,r,i,s;if(void 0===e&&(e=null),null!=this.canvas){this._textWhizz=this.canvas.textWhizz;var l=this.item;try{for(var u=C(l.colorPalette),c=u.next();!c.done;c=u.next()){var h=c.value,p=o.ColorFactory.createColor(h.preview);t.getColorPalette().add(new this._textWhizz.Color(this._textWhizz.ColorType.rgb,[p.b,p.g,p.r,p.a]))}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}var d=t.getDefaultCharStyle();d.fontName=l.font.postScriptName,d.fontSize=l.font.size,d.fauxBold=l.font.fauxBold,d.fauxItalic=l.font.fauxItalic,d.allCaps=l.font.allCaps,d.underline=l.underline,d.leading=l.leading,d.tracking=l.tracking,d.baselineShift=l.baselineShift;try{for(var y=C(l.font.openTypeFeatures),g=y.next();!g.done;g=y.next()){var m=g.value,_=this._textWhizz.OpenTypeFeature[m.tag];null!=_&&d.openType.set(_,m.value)}}catch(t){i={error:t}}finally{try{g&&!g.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}d.fillColor=this._textManager.addColorToPalette(l.color),null!=l.stroke?(d.strokeColor=this._textManager.addColorToPalette(l.stroke.color),d.strokeWidth=l.stroke.size):(d.strokeColor=this._textManager.addColorToPalette(new o.RgbColor({r:0,g:0,b:0,a:0})),d.strokeWidth=0),t.setDefaultCharStyle(d);var v=t.getDefaultParagraphStyle();v.alignment=f.a.alignmentToTextWhizzAlignment(l.alignment,this._textWhizz),(l instanceof a.BoundedTextItem||l instanceof a.PathBoundedTextItem)&&(v.firstLineIndent=l.paragraphSettings.FirstLineIndent,v.spaceAfter=l.paragraphSettings.SpaceAfter,v.spaceBefore=l.paragraphSettings.SpaceBefore,v.leftIndent=l.paragraphSettings.LeftIndent,v.rightIndent=l.paragraphSettings.RightIndent),t.setDefaultParagraphStyle(v),this._addTextWhizzFrames(t),this.setTextWhizzWrappingPath(t),t.getCursor().insertText(null!==e&&void 0!==e?e:this._getTextForRendering())}},e.prototype._beforeFrontEndUpdate=function(){var t=this;if(!this.item.transform.isEmpty){var e=this.getControlCenter(),n=this.item.transform.clone();n.setAngle(0),this._modifyItem(function(r){var o;t._applyTransform(r,n,e),null!=(null===(o=r.mask)||void 0===o?void 0:o.vectorMask)&&(r.mask.vectorMask=t._getTransformedClippingPath(n)),r.transform.clear({keepAngle:!0,supressOnChanged:!0})})}},e.prototype._getPreviewScaleLimits=function(){var t=null,e=null;return null==this.canvas.maxFontSize||isNaN(this.canvas.maxFontSize)||(t=this.canvas.maxFontSize/this.item.font.size),null==this.canvas.minFontSize||isNaN(this.canvas.minFontSize)||(e=this.canvas.minFontSize/this.item.font.size),{min:e,max:t}},e.prototype.updateRectangle=function(t){this._modifyItem(function(e){e.sourceRectangle=t,e.sourcePath=i.Path.rectangle(t.left,t.top,t.width,t.height)}),this.controlPoints=[new i.PointF(t.left,t.top),new i.PointF(t.right,t.bottom)],this.item.getItemChangedEvent().fire()},e.prototype.waitInitFrontEndRendering=function(){return b(this,void 0,void 0,function(){return w(this,function(t){switch(t.label){case 0:return null==this.canvas?[2,null]:null!=this._fontRegistry&&null!=this._textManager?[2]:null!=this._initFrontEndRenderingDef?[2,this._initFrontEndRenderingDef.promise]:(this._initFrontEndRenderingDef=new d.a,[4,this.canvas.waitFontRegistryInitialized()]);case 1:return t.sent(),null!=this.canvas&&null==this._textManager&&this._initFrontEndRendering(),this._initFrontEndRenderingDef.resolve(),this._initFrontEndRenderingDef=null,[2]}})})},e.prototype._frontEndUpdate=function(t,e,n){return b(this,void 0,void 0,function(){var r,o=this;return w(this,function(i){switch(i.label){case 0:return this._isDisposed?[2]:null==this._fontRegistry&&null==this.canvas?[2]:(null==this._handlerUpdated&&(this._handlerUpdated=new d.a),[4,this.waitInitFrontEndRendering()]);case 1:return i.sent(),(r=l.b.makeCancelable(new Promise(function(r,i){if(!o._isDisposed&&null!=o.canvas){var a=function(){"function"==typeof t&&t(),o._beforeFrontEndUpdate();try{o._textManager.updateText(n)}catch(t){return void i(t)}"function"==typeof e&&e(),null!=o._handlerUpdated&&(o._handlerUpdated.resolve(),o._handlerUpdated=null),r()};if(o.frontEndRenderingReady)a();else{var s=new Array;s.push(o._fontRegistry.loadFonts(o._getFonts())),s.push(o.updateColors()),Promise.all(s).then(a).catch(function(t){i(t)})}}}))).promise.catch(function(t){}),this._updateActiveWebServiceCall(r),[2]}})})},e.prototype._pathToTextWhizzPath=function(t){return t.toTextWhizzPath(this._textWhizz)},e.prototype.waitUpdate=function(){return b(this,void 0,void 0,function(){var e;return w(this,function(n){switch(n.label){case 0:return this._isDisposed?[2]:(e=[],this.frontEndRenderingReady||(e.push(this.waitInitFrontEndRendering()),this.update()),e.push(t.prototype.waitUpdate.call(this)),[4,Promise.all(e)]);case 1:return n.sent(),[2]}})})},e.prototype.quickUpdate=function(){this.isVisible()&&this.canvas&&!this.frontEndRenderingReady&&this.update()},e.prototype.dispose=function(){var e,n,r;null===(e=this._textManager)||void 0===e||e.exitedEditModeEvent.remove(this._onTextManagerExitedEditMode),null===(n=this._textManager)||void 0===n||n.enteredEditModeEvent.remove(this._onTextManagerEnteredEditMode),null===(r=this._textManager)||void 0===r||r.clearText(),this._imageContainer.dispose(),t.prototype.dispose.call(this)},e.typeName="NewBaseTextItemHandler",e}(g.a)},461:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(408),o=n(398),i=n(387),a=n(380),s=function(){function t(t,e,n,r,o,i){if(6==arguments.length)this.setTransform(t,e,n,r,o,i);else{if(0!=arguments.length)throw new Error("Arguments error");this.setTransform(1,0,0,1,0,0)}}return t.prototype.setTransform=function(t,e,n,r,o,i){this.m00=t,this.m10=e,this.m01=n,this.m11=r,this.m02=o,this.m12=i},t.prototype.transformPoint=function(t,e){void 0===e&&(e=!1);var n=e?new r.a:t,o=t.x,i=t.y;return n.x=o*this.m00+i*this.m01+this.m02,n.y=o*this.m10+i*this.m11+this.m12,n},t.prototype.concatenate=function(t){var e=this.m00,n=this.m01;return this.m00=t.m00*e+t.m10*n,this.m01=t.m01*e+t.m11*n,this.m02+=t.m02*e+t.m12*n,e=this.m10,n=this.m11,this.m10=t.m00*e+t.m10*n,this.m11=t.m01*e+t.m11*n,this.m12+=t.m02*e+t.m12*n,this},t.prototype.rotate=function(e){e=Object(o.c)(e);var n=Math.cos(e),r=Math.sin(e);return this.concatenate(new t(n,r,-r,n,0,0))},t.prototype.rotateAt=function(t,e,n){return this.translate(e,n),this.rotate(t),this.translate(-e,-n),this},t.prototype.scale=function(e,n){return this.concatenate(new t(e,0,0,n,0,0))},t.prototype.scaleRelativeToPoint=function(e,n,r){return this.concatenate(new t(e,0,0,n,r.x*(1-e),r.y*(1-n)))},t.prototype.translate=function(e,n){return this.concatenate(new t(1,0,0,1,e,n))},Object.defineProperty(t.prototype,"angle",{get:function(){return Object(o.d)(Math.atan(-this.m01/this.m00))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleX",{get:function(){return Math.sqrt(this.m00*this.m00+this.m10*this.m10)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleY",{get:function(){return Math.sqrt(this.m01*this.m01+this.m11*this.m11)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12)},t.prototype.updateObjectByMatrix=function(t,e,n){if(null==t)throw new a.a("object cannot be null");if(!i.isNumber(t[e])||!i.isNumber(t[e]))throw new a.a("object members by given keys nust be a numbers!");var o=this.transformPoint(new r.a(t[e],t[n]));return t[e]=o.x,t[n]=o.y,t},t}()},462:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.Normal=0]="Normal",t[t.Grayscale=1]="Grayscale",t[t.Solid=2]="Solid"}(r||(r={}))},463:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(383),o=n(381),i=n(485),a=function(){function t(){}return t.isValidRgbColor=function(t){return!r.l(t)&&(null!=i.a.matchRgb(t)||null!=i.a.matchRgba(t))},t.convertPercentToByte=function(t){return Object(o.Clamp)(0,parseInt((255*parseFloat(t)/100).toFixed(0)),255)},t.convertByteToPercent=function(t){return(t/255*100).toFixed(0)+"%"},t}()},464:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(380),o=n(383);function i(){return function(t,e){var n="_"+e;Object.defineProperty(t,e,{get:function(){return this[n]},set:function(t){var i=typeof t;if(null!=t&&"boolean"!==i&&"number"!==i&&"string"!==i&&("object"!==i||"function"!=typeof t.equals))throw new r.a("PropertyChanged decorator works only for simple types or objects with equals method");Object(o.h)(this[n],t)||(this[n]=t,this._propertyChanged.notify(this,e))},configurable:!0,enumerable:!0})}}},465:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(398),o=function(){function t(t){this.FirstLineIndent=0,this.SpaceAfter=0,this.SpaceBefore=0,this.LeftIndent=0,this.RightIndent=0,null!=t&&(this.FirstLineIndent="number"==typeof t.FirstLineIndent?t.FirstLineIndent:0,this.SpaceAfter="number"==typeof t.SpaceAfter?t.SpaceAfter:0,this.SpaceBefore="number"==typeof t.SpaceBefore?t.SpaceBefore:0,this.LeftIndent="number"==typeof t.LeftIndent?t.LeftIndent:0,this.RightIndent="number"==typeof t.RightIndent?t.RightIndent:0)}return t.prototype.equals=function(e){return e instanceof t&&Object(r.e)(this.FirstLineIndent,e.FirstLineIndent)&&Object(r.e)(this.SpaceAfter,e.SpaceAfter)&&Object(r.e)(this.SpaceBefore,e.SpaceBefore)&&Object(r.e)(this.LeftIndent,e.LeftIndent)&&Object(r.e)(this.RightIndent,e.RightIndent)},t.equals=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.equals(e)},t.prototype.clone=function(){return new t(this)},t}()},466:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(386),o=n(381),i=n(384),a=n(400),s=n(442),l=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(e){if(this._color=null,this._opacity=null,this._blendMode=null,this.$_propertyChanged=new i.c,this.type=t.type,null!=e){var n=e.color,o=e.opacity,a=e.blendMode;this.color=n instanceof r.Color?n:null,this.blendMode="string"==typeof a?a:null,this.opacity="number"==typeof o?o:null}}return t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e.color,i=e.opacity,a=e.blendMode;return r.Color.equals(n,this.color)&&(null==i&&null==this.opacity||Object(o.EqualsOfFloatNumbers)(i,this.opacity))&&(null==a&&null==this.blendMode||a===this.blendMode)},t.prototype.getSimplifiedObject=function(){return{color:this.color,blendMode:this.blendMode,opacity:this.opacity}},t.equals=function(t,e){return null==t&&null==e||null!=t&&t.equals(e)},t.prototype.clone=function(){return new t({blendMode:this.blendMode,color:null!=this.color?this.color.clone():null,opacity:this.opacity})},Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){r.Color.equals(this.color,t)||(this._color=t,this.$_propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blendMode!==t&&(this._blendMode=t,this.$_propertyChanged.notify(this,"blendMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(t){this.opacity!==t&&(this._opacity=t,this.$_propertyChanged.notify(this,"opacity"))},enumerable:!0,configurable:!0}),t.prototype.addPropertyChanged=function(t){this.$_propertyChanged.add(t)},t.prototype.removePropertyChanged=function(t){this.$_propertyChanged.remove(t)},t.type="OverlayEffect",l([Object(a.a)({enumObject:s.a}),u("design:type",Object),u("design:paramtypes",[Object])],t.prototype,"blendMode",null),t}()},467:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(383),o=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}return t.prototype.equals=function(t){return null!=t&&Object(r.h)(this.width,t.width)&&Object(r.h)(this.height,t.height)},t.prototype.clone=function(){return new t(this.width,this.height)},t}()},468:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t.AZTEC="AZTEC",t.CODABAR="CODABAR",t.CODE_39="CODE_39",t.CODE_93="CODE_93",t.CODE_128="CODE_128",t.DATA_MATRIX="DATA_MATRIX",t.EAN_8="EAN_8",t.EAN_13="EAN_13",t.ITF="ITF",t.MAXICODE="MAXICODE",t.PDF_417="PDF_417",t.QR_CODE="QR_CODE",t.RSS_14="RSS_14",t.RSS_EXPANDED="RSS_EXPANDED",t.UPC_A="UPC_A",t.UPC_E="UPC_E",t.All_1D="All_1D",t.UPC_EAN_EXTENSION="UPC_EAN_EXTENSION",t.MSI="MSI",t.PLESSEY="PLESSEY",t.IMB="IMB"}(r||(r={}))},469:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.Trim=0]="Trim",t[t.Bleed=1]="Bleed",t[t.Total=2]="Total"}(r||(r={}))},470:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(387),o=n(754),i=n(402),a=n(386),s=n(433),l=n(381),u=n(478),c=n(393),h=n(466),p=function(){function t(t){this._additionalConverters=r.isArray(t)?t:[],this.productParser=new o.a(t)}return t.prototype.deserialize=function(t){var e=t;return"string"==typeof t&&(e=JSON.parse(t)),r.isObject(e)?this.productParser.parseProduct(e):null},t.prototype.serialize=function(t,e){return this.serializeModelComponent(t,e)},t.prototype.serializeModelComponent=function(t,e){var n=this;null==e&&(e=!1);return JSON.stringify(t,function(t,e){if(e instanceof i.a)return e.getSimplifiedObject();if(e instanceof a.Color)return e.getData();if(e instanceof s.a)return{scaleX:e.scaleX,scaleY:e.scaleY,translateX:e.translateX,translateY:e.translateY,angle:e.angle};if(e instanceof u.b)return{name:e.name,altColor:e.altColor,color:e.color,margin:e.margin,stepPx:e.stepPx,widthPx:e.widthPx,borderRadius:e.borderRadius,pdfBox:e.pdfBox};if(e instanceof l.SizeF)return e.width+", "+e.height;if(e instanceof l.Path)return e.toString();if(e instanceof c.a)return e.toArray();if(e instanceof h.a)return e.getSimplifiedObject();var o=r.find(n._additionalConverters,function(t){return e instanceof t.typeCtor});return null!=o&&((e=r.clone(e)).$type=o.type),e},2)},t}()},471:function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r,o=n(402),i=n(404),a=n(416),s=n(387),l=n(382),u=n(497),c=n(380),h=n(393),p=n(413),f=n(384),d=n(381),y=n(534),g=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_=function(t){function e(e,n,r,o,i,s,l){void 0===o&&(o=[]);var c=t.call(this,i,s)||this;if(c._rotateAngle=0,c._mockup=new u.a,c._printAreas=new h.a,c._previewMockups=new h.a,c._printAreasCollectionChangedEvent=new f.c,c._printAreaAddedEvent=new f.c,c._printAreaRemovedEvent=new f.c,c._onContainersItemAdded=function(t){t.item.parentComponent=c},c._onContainersItemRemoved=function(t){t.item.parentComponent=null},c.watermark=null,c._containers=new h.a,c._onPrintAreaAdded=function(t){var e=t.item;e.parentSurface=c,c._printAreaAddedEvent.notify(c,e)},c._onPrintAreaRemoved=function(t){var e=t.item;e.parentSurface=null,c._printAreaRemovedEvent.notify(c,e)},c.width=null!=e?e:100,c.height=null!=n?n:100,c.parentProduct=null,c.mockup=null!=r?r:new u.a,c.printAreas.add_itemAdded(c._onPrintAreaAdded),c.printAreas.add_itemRemoved(c._onPrintAreaRemoved),c.printAreas.setRange(o),c._containers.add_itemAdded(c._onContainersItemAdded),c._containers.add_itemRemoved(c._onContainersItemRemoved),l){var d=new p.d;d.name=a.a.BG_CONTAINER_NAME,c.containers.push(d);var y=new p.d;y.name=a.a.MAIN_CONTAINER_NAME,c.containers.push(y);var g=new p.d;g.name=a.a.FG_CONTAINER_NAME,c.containers.push(g)}return c}return g(e,t),Object.defineProperty(e.prototype,"rotateAngle",{get:function(){return this._rotateAngle},set:function(t){var e=Object(d.normalizeAngle)(t);e!==this._rotateAngle&&(this._rotateAngle=e,this._propertyChanged.notify(this,"rotateAngle"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){t!==this._width&&(this._width=t,this._propertyChanged.notify(this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){t!==this._height&&(this._height=t,this._propertyChanged.notify(this,"height"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mockup",{get:function(){return this._mockup},set:function(t){if(null==t)throw new c.a("mockup can`t be null");t!==this._mockup&&(this._mockup=t,null!=this._mockup&&(this._mockup.parentSurface=this),this._propertyChanged.notify(this,"mockup"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewMockups",{get:function(){return this._previewMockups},set:function(t){var e,n;if(null!=this._previewMockups)try{for(var r=m(this._previewMockups),o=r.next();!o.done;o=r.next()){o.value.parentSurface=null}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}if(this._previewMockups=t,null!=this._previewMockups)for(var i=0;i<this._previewMockups.length;++i)this._previewMockups.get(i).parentSurface=this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containers",{get:function(){return this._containers},set:function(t){if(null!=t&&t!==this._containers){null!=this._containers&&(this._containers.clear(),this._containers.remove_itemAdded(this._onContainersItemAdded),this._containers.remove_itemRemoved(this._onContainersItemRemoved)),this._containers=t;for(var e=0;e<this._containers.length;e++)this._onContainersItemAdded({index:e,item:this._containers.get(e)});this._containers.add_itemAdded(this._onContainersItemAdded),this._containers.add_itemRemoved(this._onContainersItemRemoved)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"printAreas",{get:function(){return this._printAreas},set:function(t){var e,n;if(null!=t&&t!==this._printAreas){null!=this._printAreas&&(this._printAreas.clear(),this._printAreas.remove_itemAdded(this._onPrintAreaAdded),this._printAreas.remove_itemRemoved(this._onPrintAreaRemoved)),this._printAreas=t;try{for(var r=m(this._printAreas),o=r.next();!o.done;o=r.next()){var i=o.value;this._onPrintAreaAdded({item:i})}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}this._printAreas.add_itemAdded(this._onPrintAreaAdded),this._printAreas.add_itemRemoved(this._onPrintAreaRemoved)}},enumerable:!0,configurable:!0}),e.prototype.add_printAreaAdded=function(t){this._printAreaAddedEvent.add(t)},e.prototype.remove_printAreaAdded=function(t){this._printAreaAddedEvent.remove(t)},e.prototype.add_printAreaRemoved=function(t){this._printAreaRemovedEvent.add(t)},e.prototype.remove_printAreaRemoved=function(t){this._printAreaRemovedEvent.remove(t)},e.prototype.getSimplifiedObject=function(){return t.prototype.getSimplifiedObject.call(this,["parentProduct","nonChannelContainerItems"])},e.prototype.getAllItems=function(t){void 0===t&&(t={ignoreMockups:!1});var e=t.ignoreMockups?this.containers:y.empty().concat(this.mockup.underContainers.cast(),this.containers,this.mockup.overContainers.cast());null!=t.containerFilterFunc&&(e=e.where(t.containerFilterFunc));var n=e.selectMany(function(t){return t.items.cast()});return!0===t.flatGroupItems&&(n=n.aggregate(new h.a,function(t,e){return t.add(e),e instanceof l.GroupItem&&t.addRange(e.getNestedItems()),t})),!0===t.excludeGroupItems&&(n=n.where(function(t){return!(t instanceof l.GroupItem)})),n},e.getItems=function(t,e){return t instanceof Array&&(t=y.from(t)),t.selectMany(function(t){return t.getAllItems(e)}).toArray()},e.prototype.getBackgroundItem=function(){var t=this.containers.firstOrDefault(function(t){return t.name===a.a.BG_CONTAINER_NAME});return null!=t?t.items.get(0):null},e.prototype._copy=function(e,n,r){t.prototype._copy.call(this,e,n,r),n.width=e.width,n.height=e.height,n.rotateAngle=e.rotateAngle,n.mockup=e.mockup.clone(r),n.previewMockups.addRange(e.previewMockups.toArray().map(function(t){return t.clone(r)})),n.printAreas.addRange(e.printAreas.toArray().map(function(t){return t.clone(r)})),n.containers.addRange(e.containers.toArray().map(function(t){return t.clone(r)})),n.watermark=null!=e.watermark?e.watermark.clone():null},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e.prototype.generateNewIds=function(){this._generateNewId(),this._mockup.generateNewIds(),this._previewMockups.forEach(function(t){return t.generateNewIds()}),this._printAreas.forEach(function(t){return t.generateNewIds()}),this._containers.forEach(function(t){return t.generateNewIds()})},e.getAllItems=function(t,e){return void 0===e&&(e={ignoreMockups:!1}),t instanceof Array&&(t=y.from(t)),t.selectMany(function(t){return t.getAllItems(e)})},Object.defineProperty(e.prototype,"nonChannelContainerItems",{get:function(){return s.flatten(this._containers.toArray().filter(function(t){return t.renderingType===i.RenderingType.Normal}).map(function(t){return t.items.toArray()}))},enumerable:!0,configurable:!0}),e}(o.a)},472:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.NotContent=0]="NotContent",t[t.PlaceholderContent=1]="PlaceholderContent",t[t.TopFrame=2]="TopFrame",t[t.BottomFrame=3]="BottomFrame"}(r||(r={}))},473:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t){var e=this;this._src=null,this._onLoadedDelegate=function(n){if(!n.target)throw new Error('"e.target" is null.');e._onLoaded(n,n.target),t()},this._image=this._createImageObject(this._onLoadedDelegate),this._tmpImage=this._createImageObject(this._onLoadedDelegate)}return t.prototype._onLoaded=function(t,e){e===this._tmpImage&&(this._tmpImage=this._image,this._image=e,this._src=e.src),this._loaded=!0,this._loading=!1},Object.defineProperty(t.prototype,"isLoaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._loading},set:function(t){this._loading=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),t.prototype.updateUrl=function(t){this._tmpImage.src!==t?(this._loading=!0,this._tmpImage.src=t,this._src=t):this._onLoadedDelegate({target:this._tmpImage})},t.prototype.clear=function(){this.source=null},Object.defineProperty(t.prototype,"source",{get:function(){return this._src},set:function(t){this._src!==t&&(this._loaded=!1,this._src=t,this._image.src=null==this._src?"":t)},enumerable:!0,configurable:!0}),t.prototype._createImageObject=function(t){var e=new Image;return e.crossOrigin="anonymous","function"==typeof t&&e.addEventListener("load",t),e},t.prototype.dispose=function(){this._tmpImage.removeEventListener("load",this._onLoadedDelegate),this._image.removeEventListener("load",this._onLoadedDelegate),delete this._onLoadedDelegate},t}()},474:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(411),i=n(381),a=n(392),s=n(382),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e,n){void 0===n&&(n=null);var r=t.call(this,e,n)||this;return r._lastRectangle=null,r._textAutoFitted=null,r._updateEmptyTextControlPoints(),r}return l(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n),this._textAutoFitted=null,this.item.scheduledFitMode=null,this.item.textRectangle=e.textRectangle,this.item.firstBaselineOffset=e.firstBaselineOffset,this.item.firstBaselineMinOffset=e.firstBaselineMinOffset},e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"textRectangle":case"verticalAlignment":case"isVertical":case"paragraphSettings":case"wrappingMargin":case"scheduledFitMode":case"shrinkMode":case"overflowStrategy":case"wrappingPath":case"firstBaselineOffset":case"firstBaselineMinOffset":this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype.getTextRectangle=function(){var t=this.getControlCenter(),e=i.RotatedRectangleF.fromRectangleF(this.item.textRectangle);return e.transform(this.item.transform.clone(),t),e},Object.defineProperty(e.prototype,"drawingRectangle",{get:function(){return this.canvas.isItemHandlerSelected(this)&&this.canvas.isResizing()&&null!=this.startRectangle?this.startRectangle:this.rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastRectangle",{get:function(){return this._lastRectangle},set:function(t){this._lastRectangle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAutoFitted",{get:function(){var t,e=this;return null==this._textAutoFitted&&(this._textAutoFitted=(t=e.item).overflowStrategy!==s.OverflowStrategy.Clip&&(t.shrinkMode===s.ShrinkMode.Scale||t.shrinkMode===s.ShrinkMode.Size)&&(t.originalVerticalScale<t.verticalScale||t.originalHorizontalScale<t.horizontalScale)),this._textAutoFitted},enumerable:!0,configurable:!0}),e.prototype.getTextWrappingPath=function(){return this.item.textWrappingMode!==s.WrappingMode.None?i.Path.rotatedRectangle(this.getTextRectangle()):null},e.prototype.drawItemHandler=function(e){t.prototype.drawItemHandler.call(this,e),!0===window.__$abl$&&a.a.drawRectangle(e,this.getTextRectangle(),1,"red",1)},e.prototype._updateEmptyTextControlPoints=function(){var t=this.item.textRectangle;this._controlPoints[0].x=t.left,this._controlPoints[0].y=t.top,this._controlPoints[1].x=t.right,this._controlPoints[1].y=t.bottom;var e=this.canvas;null!=e&&e.redraw()},e.prototype._setDefaultTextControlPoints=function(){},e.typeName="BoundedTextItemHandler",e}(o.a)},475:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r,o=n(381),i=n(382),a=n(411),s=n(392),l=n(563),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},h=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},p=function(t){function e(e,n){void 0===n&&(n=null);var r=t.call(this,e,n)||this;return r._lastRectangle=null,r._lastRectangle=null,r}return u(e,t),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"boundingPaths":case"wrappingPath":case"wrappingMargin":case"paragraphSettings":case"isVertical":case"firstBaselineOffset":case"firstBaselineMinOffset":this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n),this.item.boundingPaths=e.boundingPaths,this.item.wrappingMargin=e.wrappingMargin,this.item.characterLimit=e.characterLimit,this.item.paragraphSettings=e.paragraphSettings,this.item.isVertical=e.isVertical,this.item.firstBaselineOffset=e.firstBaselineOffset,this.item.firstBaselineMinOffset=e.firstBaselineMinOffset},Object.defineProperty(e.prototype,"boundingPaths",{get:function(){var t=[],e=this.getControlCenter(),n=this.item.transform.clone();return this.originalBoundingPaths.forEach(function(r){var o=r.clone();o.transform(n,e),t.push(o)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalBoundingPaths",{get:function(){return this.item.boundingPaths},set:function(t){this.item.boundingPaths=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastRectangle",{get:function(){return this._lastRectangle},set:function(t){this._lastRectangle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrappingMargin",{get:function(){return this.item.wrappingMargin},set:function(t){this.item.wrappingMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paragraphSettings",{get:function(){return this.item.paragraphSettings},set:function(t){t instanceof i.ParagraphSettings||(t=new i.ParagraphSettings(t)),this.item.paragraphSettings=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this.item.isVertical},set:function(t){this.item.isVertical=t},enumerable:!0,configurable:!0}),e.prototype.drawItemHandler=function(e){if(t.prototype.drawItemHandler.call(this,e),!0===window.__$abl$){var n=this.getControlCenter(),r=new o.Transform;this.boundingPaths.forEach(function(t){s.a.drawPath(e,t,n,r,1,"red",1)})}},e.prototype.getBoundingPathsBounds=function(){return c(this,void 0,void 0,function(){var t,e,n,r,i=this;return h(this,function(a){switch(a.label){case 0:return t=this.item.boundingPaths,[4,Promise.all(t.map(function(t){return l.a.getBounds(t,i.canvas.textWhizz,i.canvas.service)}))];case 1:return e=a.sent(),n=o.RectangleF.getOverallBounds(e),(r=o.RotatedRectangleF.fromRectangleF(n)).transform(this.item.transform.clone(),this.getControlCenter()),[2,r.toRectangleF()]}})})},Object.defineProperty(e.prototype,"drawingRectangle",{get:function(){return this.canvas.isItemHandlerSelected(this)&&this.canvas.isResizing()&&null!=this.startRectangle?this.startRectangle:this.rectangle},enumerable:!0,configurable:!0}),e.prototype._setDefaultTextControlPoints=function(){},e.typeName="PathBoundedTextItemHandler",e}(a.a)},476:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,o=n(424),i=n(386),a=n(392),s=n(381),l=n(391),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e,n){void 0===n&&(n=null);var r=t.call(this,0,0,0,0,e,n)||this;return r._selectionTolerance=15,r._controlPoints=[new s.PointF(e.sourcePoint0.x?e.sourcePoint0.x:0,e.sourcePoint0.y?e.sourcePoint0.y:0),new s.PointF(e.sourcePoint1.x?e.sourcePoint1.x:0,e.sourcePoint1.y?e.sourcePoint1.y:0)],r._makeLineHorizontalWithAngle(),r}return u(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"width":var r=this.canvas;null!=r&&r.updateSelection();break;case"color":case"fixedWidth":this.canvas.redraw()}t.prototype._onItemPropertyChanged.call(this,e,n)},Object.defineProperty(e.prototype,"controlPoints",{set:function(t){this._controlPoints=new Array(new s.PointF(t[0].x,t[0].y),new s.PointF(t[1].x,t[1].y)),this.item.sourcePoint0=this._controlPoints[0],this.item.sourcePoint1=this._controlPoints[1],this._makeLineHorizontalWithAngle(),this.raiseChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.item.width},set:function(t){this.item.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.item.color},set:function(t){var e=i.ColorFactory.createColor(t);this.item.color=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedWidth",{get:function(){return this.item.fixedWidth},set:function(t){this.item.fixedWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point0",{get:function(){return this._getActualPoint(this._controlPoints[0])},set:function(t){var e=this.getControlBounds();if(0===e.width||0===e.height){var n=this._getActualPoint(this._controlPoints[1]);this._controlPoints=[t.clone(),n],this.item.transform=new s.Transform}else this._makeLineHorizontalWithAngle(),this._setTransformByPoints(this._controlPoints[0],t,this._controlPoints[1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point1",{get:function(){return this._getActualPoint(this._controlPoints[1])},set:function(t){var e=this.getControlBounds();if(0===e.width||0===e.height){var n=this._getActualPoint(this._controlPoints[0]);this._controlPoints=[n,t.clone()],this.item.transform=new s.Transform}else this._makeLineHorizontalWithAngle(),this._setTransformByPoints(this._controlPoints[1],t,this._controlPoints[0])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectangle",{get:function(){var e=t.prototype._getRectangle.call(this);return e.height=this._getActualWidth(),e},enumerable:!0,configurable:!0}),e.prototype._getActualPoint=function(t){var e=new s.PointF(t.x,t.y),n=this.getControlCenter();e.translate(-n.x,-n.y);var r=this.item.transform;return e.scale(r.scaleX,r.scaleY),e.rotate(r.angle),e.translate(r.translateX,r.translateY),e.translate(n.x,n.y),e},e.prototype._setTransformByPoints=function(t,e,n){var r=this.getControlCenter(),o=this._getActualPoint(n),i=new s.PointF((o.x+e.x)/2,(o.y+e.y)/2),a=i.x-r.x,l=i.y-r.y,u=new s.PointF(t.x,t.y).translate(-r.x,-r.y),c=new s.PointF(e.x,e.y).translate(-a,-l).translate(-r.x,-r.y),h=(u.x*c.x+u.y*c.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(c.x*c.x+c.y*c.y));h=s.Clamp(-1,h,1);var p=s.ConvertRadianToDegree(Math.acos(h));c=c.rotate(-p),this.item.transform=new s.Transform(c.x/u.x,c.y/u.y,a,l,p)},e.prototype._getActualWidth=function(){var t=this.width,e=this.canvas;return this.fixedWidth&&null!=e&&(t/=e.zoom),t},e.prototype.drawItemHandler=function(t){if(null!=t){var e=this.point0,n=this.point1,r=this._getActualWidth();if(r>0){var o=this.isNormalRenderingType?this.item.color.preview:"rgb(0,0,0)",i=this.isNormalRenderingType?this.item.opacity:1;a.a.drawLine(t,e.x,e.y,n.x,n.y,r,o,i)}}},e.prototype._belongToPiece=function(t,e,n,r,o){var i=r/2+o;return s.getSquareDistanceToSegment(n,t,e)<=i*i},e.prototype.hitTest=function(e,n){var r=t.prototype.hitTest.call(this,e.clone()),o=e.clone(),i=this.canvas.zoom*l.a.screenDpi/72,a=this.rectangle,s=!!n&&a.toRectangleF().contains(e),u=this._getActualWidth(),c=(this._selectionTolerance/i-u)/2,h=this._belongToPiece(this.point0,this.point1,o,u,c<0?0:c);return r.body=!(!s&&!h),r},e.prototype.getColorData=function(){var e=this.item,n=t.prototype.getColorData.call(this),r=this.canvas.rgbColorProfileFileId;return e.color.needUpdate(r)&&(n.color=e.color.getData()),n},e.prototype.setColorData=function(e){var n=this.item;t.prototype.setColorData.call(this,e),null!=e.color&&(n.color=i.ColorFactory.createColor(e.color))},e.prototype.hasColorsToUpdate=function(){var e=this.item,n=this.canvas.rgbColorProfileFileId;return t.prototype.hasColorsToUpdate.call(this)||e.color.needUpdate(n)},e.prototype._makeLineHorizontalWithAngle=function(){var t=this._controlPoints[0],e=this._controlPoints[1],n=s.getTriangleAngle(t,new s.PointF(t.x,e.y),e);if(0!==n){var r=(t.x+e.x)/2,o=(t.y+e.y)/2,i=t.distance(e);this._controlPoints[0]=new s.PointF(r-i/2,o),this.item.sourcePoint0=this._controlPoints[0],this._controlPoints[1]=new s.PointF(r+i/2,o),this.item.sourcePoint1=this._controlPoints[1],this.angle=n}},e.prototype.transformByMatrix=function(t){var e=this.point0,n=this.point1;this.item.transform=new s.Transform;var r=t.transformPoint(e),o=t.transformPoint(n);this.item.sourcePoint0=r,this.item.sourcePoint1=o,this._controlPoints=[r,o],this._makeLineHorizontalWithAngle(),1===t.scaleX&&1===t.scaleY||this._onResized()},e}(o.a)},478:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return p});var r,o=n(403),i=n(386),a=n(381),s=n(491);!function(t){t[t.Point=0]="Point",t[t.Percent=1]="Percent",t[t.Pixel=2]="Pixel"}(r||(r={}));var l,u=function(){function t(t,e){this._rectangle=t,this._dpi=e}return t.prototype.convert=function(t){if(-1===t.indexOf("/"))return this._normalize(this._combineRadiuses(this._getRadiuses(t,!0),this._getRadiuses(t,!1)));var e=t.split("/");return this._normalize(this._combineRadiuses(this._getRadiuses(e[0].trim(),!0),this._getRadiuses(e[1].trim(),!1)))},t.prototype._normalize=function(t){if(null==t)return t;var e=t,n=(e[0].width+e[1].width)/this._rectangle.width,r=(e[2].width+e[3].width)/this._rectangle.width,o=(e[0].height+e[3].height)/this._rectangle.height,i=(e[1].height+e[2].height)/this._rectangle.height;return n>1&&(e[0].width=e[0].width/n,e[1].width=e[1].width/n),r>1&&(e[2].width=e[2].width/r,e[3].width=e[3].width/r),i>1&&(e[1].height=e[1].height/i,e[2].height=e[2].height/i),o>1&&(e[3].height=e[3].height/o,e[0].height=e[0].height/o),t},t.prototype._combineRadiuses=function(t,e){return null==t||4!==t.length?null:null==e||4!==e.length?null:[new a.SizeF(t[0],e[0]),new a.SizeF(t[1],e[1]),new a.SizeF(t[2],e[2]),new a.SizeF(t[3],e[3])]},t.prototype._getRadiuses=function(t,e){if(null==t)return null;var n=t.split(" ").filter(function(t){return null!=t&&t.length>0});if(n.length<1)return null;if(n.length>4)return null;for(var r=[],o=0;o<n.length;o++){var i=this._tryParseNumberPart(n[o]);if(null==i)return null;r.push(this._toPoints(i,e))}switch(r.length){case 1:return[r[0],r[0],r[0],r[0]];case 2:return[r[0],r[1],r[0],r[1]];case 3:return[r[0],r[1],r[2],r[1]];default:return r}},t.prototype._tryParseNumberPart=function(t){if(t.endsWith("%")){var e=parseFloat(t);return NaN!==e?{value:e,measureType:r.Percent}:null}if(t.toLowerCase().endsWith("px")){var n=parseFloat(t);return NaN!==n?{value:n,measureType:r.Pixel}:null}var o=parseFloat(t);return isNaN(o)?null:{value:o,measureType:r.Point}},t.prototype._toPoints=function(t,e){switch(t.measureType){case r.Percent:return(e?this._rectangle.width:this._rectangle.height)*t.value/100;case r.Pixel:return s.b(t.value,this._dpi);default:return t.value}},t}(),c=n(384),h=n(555);!function(t){t.Crop="Crop",t.Trim="Trim",t.Bleed="Bleed"}(l||(l={}));var p=function(){function t(t){this._propertyChanged=new c.c,this._name="bleed",this._widthPx=1,this._color=new i.RgbColor({r:255,g:255,b:255,a:255}),this._altColor=new i.RgbColor({r:0,g:0,b:0,a:255}),this._stepPx=10,this._margin=new h.a(10),this._borderRadius=null,this._pdfBox=null,null!=t&&Object.assign(this,t)}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name!==t&&(this._name=t,this._propertyChanged.notify(this,"name"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widthPx",{get:function(){return this._widthPx},set:function(t){a.EqualsOfFloatNumbers(this._widthPx,t)||(this._widthPx=t,this._propertyChanged.notify(this,"widthPx"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){i.Color.equals(this._color,t)||(this._color=t,this._propertyChanged.notify(this,"color"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altColor",{get:function(){return this._altColor},set:function(t){i.Color.equals(this._altColor,t)||(this._altColor=t,this._propertyChanged.notify(this,"altColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"margin",{get:function(){return this._margin},set:function(t){"number"==typeof t&&(t=new h.a(t)),this._margin=t,this._propertyChanged.notify(this,"margin")},enumerable:!0,configurable:!0}),t.prototype.getMargin=function(){return this._margin},Object.defineProperty(t.prototype,"stepPx",{get:function(){return this._stepPx},set:function(t){a.EqualsOfFloatNumbers(this._stepPx,t)||(this._stepPx=t,this._propertyChanged.notify(this,"stepPx"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderRadius",{get:function(){return this._borderRadius},set:function(t){this._borderRadius!==t&&(this._borderRadius=t,this._propertyChanged.notify(this,"borderRadius"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pdfBox",{get:function(){return this._pdfBox},set:function(t){this._pdfBox!==t&&(this._pdfBox=t,this._propertyChanged.notify(this,"pdfBox"))},enumerable:!0,configurable:!0}),t.prototype.getRectangle=function(t){var e=this.getMargin();return o.a.FromLTRB(t.left+e.left,t.top+e.top,t.right-e.right,t.bottom-e.bottom)},t.prototype.getCornerRadiuses=function(t){return null==this.borderRadius?null:new u(this.getRectangle(t),72).convert(this.borderRadius)},t.prototype.addPropertyChanged=function(t){this._propertyChanged.add(t)},t.prototype.removePropertyChanged=function(t){this._propertyChanged.remove(t)},t.prototype.clone=function(){var e,n=new t;return n.name=this.name,n.widthPx=this.widthPx,n.color=this.color.clone(),n.altColor=this.altColor.clone(),n.stepPx=this.stepPx,n.borderRadius=this.borderRadius,n.pdfBox=this.pdfBox,n.margin=null===(e=this._margin)||void 0===e?void 0:e.clone(),n},t.voPrefix="$SAFETY_LINE",t}()},482:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(431),i=n(403),a=n(432),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(n){void 0===n&&(n=new i.a(0,0,10,10));var r=t.call(this,a.a.rectangle(n.left,n.top,n.width,n.height))||this;return r.type=e.type,r.sourceRectangle=n,r}return s(e,t),e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="RectangleItem",e}(o.a)},483:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(402),i=n(387),a=n(380),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return s(e,t),Object.defineProperty(e.prototype,"parentContainer",{get:function(){return this._parentContainer},set:function(t){this._parentContainer=t,this._onContainerChanged()},enumerable:!0,configurable:!0}),e.prototype._onContainerChanged=function(){},e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r),o&&(n.parentContainer=e.parentContainer)},e.prototype.clone=function(t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),this.type!==e.type)throw new a.e(".clone() method must be overriden in "+this.type+" class");var r=new e;return this._copy(this,r,t,n),r},e.prototype.update=function(t){this._copy(t,this,!0,!1)},e.prototype.getSimplifiedObject=function(e){i.isArray(e)||i.isString(e)||(e=[]);var n=t.prototype.getSimplifiedObject.call(this,["parentContainer"].concat(e));return n.$type=this.type,n},e.type="base",e}(o.a)},484:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(380),o=function(){function t(t){this._value="00000000-0000-0000-0000-000000000000",null!=t?this.set(t):this.generateNewGuid()}return t.prototype.set=function(t){if(!this.isValid(t))throw new r.c(t+"is incorrect uuid!");this._value=t},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.isValid=function(t){return t=t.toUpperCase(),null!=new RegExp("\\b(?:[A-F0-9]{8})(?:-[A-F0-9]{4}){3}-(?:[A-F0-9]{12})\\b").exec(t)},t.prototype.generateNewGuid=function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});this.set(e)},t.prototype.toString=function(){return this._value},t.prototype.equals=function(t){return t._value===this._value},t}()},485:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(420),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=t.call(this,e)||this;if(n._r=0,n._g=0,n._b=0,n._a=0,null==e)return n;var r="Incorrect RgbColor format: "+JSON.stringify(e);if("string"==typeof e){var o=e;if(0!==e.indexOf("#")&&0!==e.indexOf("rgb")&&null==(o=n._parseNamedColor(e))&&console.warn("Unknown rgb color name: "+e),n._tryInitFromRgba(o))return n;if(n._tryInitFromRgb(o))return n;n._tryInitFromHex(o)||console.warn(r)}else try{n._init(e)}catch(t){console.warn(r)}return n}return i(e,t),e.prototype._parseNamedColor=function(t){if(window.getComputedStyle){var e=document.createElement("div");e.style.color=t,document.body.appendChild(e);var n=window.getComputedStyle(e).color;return document.body.removeChild(e),n}return console.warn("Unable to parse rgb color string "+t),null},e.prototype._tryInitFromRgba=function(t){var n=e.matchRgba(t);if(null!=n&&6===n.length){var r=parseInt((255*parseFloat(n[4])).toFixed(0));return r=Math.max(r,0),r=Math.min(r,255),this._init({r:+n[1],g:+n[2],b:+n[3],a:r}),!0}return!1},e.prototype._tryInitFromRgb=function(t){var n=e.matchRgb(t);return null!=n&&4===n.length&&(this._init({r:+n[1],g:+n[2],b:+n[3],a:255}),!0)},e.prototype._tryInitFromHex=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,n,r){return e+e+n+n+r+r});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return null!=e&&4===e.length&&(this._init({r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:255}),!0)},Object.defineProperty(e.prototype,"type",{get:function(){return"RgbColor"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"r",{get:function(){return this._r},set:function(t){this._r=t,this._updatePreview()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this._g},set:function(t){this._g=t,this._updatePreview()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this._b},set:function(t){this._b=t,this._updatePreview()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return this._a},set:function(t){this._a=t,this._updatePreview()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.a},enumerable:!0,configurable:!0}),e.matchRgba=function(t){return e._rgba.lastIndex=0,e._rgba.exec(t)},e.matchRgb=function(t){return e._rgb.lastIndex=0,e._rgb.exec(t)},e.prototype.getData=function(){var e=t.prototype.getData.call(this);return e.r=this.r,e.g=this.g,e.b=this.b,e.a=this.a,e},e.prototype.clone=function(){return new e(this)},e.prototype.toString=function(){return this._getPreview()},e.prototype.equals=function(n){return n instanceof e&&t.prototype.equals.call(this,n)},e.prototype._getPreview=function(){if(255===this.a)return"rgb("+this.r+","+this.g+","+this.b+")";var t=(this.a/255).toFixed(7);return"rgba("+this.r+","+this.g+","+this.b+","+t+")"},e.prototype._init=function(e){t.prototype._init.call(this,e),e.a=null!=e.a?e.a:255,this._validateNumber(e.r),this._validateNumber(e.g),this._validateNumber(e.b),this._validateNumber(e.a),this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._updatePreview()},e.prototype._updatePreview=function(){this.preview=this._getPreview()},e._rgba=/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\,\s*(\d{1,}(\.\d{1,})?)\s*\)\s*;{0,1}\s*$/g,e._rgb=/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*;{0,1}\s*$/g,e}(o.a)},486:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(420),o=n(485),i=n(584),a=n(540),s=n(541),l=n(387),u=function(){function t(){}return t.registerColor=function(e,n,r){e&&(t._createFunctionByType[e]=r),n&&(t._createFunctionByName[n]=r)},Object.defineProperty(t,"rgbColorProfileId",{set:function(e){t._rgbColorProfileId=e},enumerable:!0,configurable:!0}),t._updateRgbColor=function(e){return l.isEmpty(null===e||void 0===e?void 0:e.profileId)&&(e.profileId=t._rgbColorProfileId),e},t.createColor=function(e,n,a){void 0===n&&(n=!1),void 0===a&&(a=!1);try{return e instanceof r.a?e:"string"==typeof e?0===e.indexOf("device-cmyk")||0===e.indexOf("cmyk")?new i.a(e):0===e.indexOf("lab")?new s.a(e):0===e.indexOf("spot")?t._createColorByName("spot",e):a?t._updateRgbColor(new o.a(e)):new o.a(e):t._fromData(e,a)}catch(t){if(!1!==n)throw t;return console.warn("Unable to create color from value "+JSON.stringify(e)+". Error: "+t),new o.a("rgba(0,0,0,1)")}},t._createColorByName=function(e,n){if(!t._createFunctionByName[e])throw"Color with name '"+e+"' was not registered in ColorFactory";return new(0,t._createFunctionByName[e])(n)},t._createColorByType=function(e,n){if(!t._createFunctionByType[e])throw"Color with type name '"+e+"' was not registered in ColorFactory";return new(0,t._createFunctionByType[e])(n)},t._fromData=function(e,n){if(void 0===n&&(n=!1),null==e)throw"Value cannot be null";var r=e.type;if("RgbColor"===r)return n?t._updateRgbColor(new o.a(e)):new o.a(e);if("CmykColor"===r)return new i.a(e);if("GrayscaleColor"===r)return new a.a(e);if("LabColor"===r)return new s.a(e);if("SpotColor"===r)return t._createColorByType("SpotColor",e);throw"Unsupported color type "+r},t._createFunctionByType={},t._createFunctionByName={},t}()},487:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(543),i=n(464),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(t){function e(n){var r=t.call(this,n)||this;return r.type=e.type,null==n&&(n=!0),r._allowShape=n,r}return a(e,t),e.prototype.clone=function(n){void 0===n&&(n=null);var r=null!==n&&void 0!==n?n:new e;return r.allowShape=this.allowShape,r=t.prototype.clone.call(this,r)},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&this.allowShape===e.allowShape},e.type="ShapeViolationSettings",s([Object(i.a)(),l("design:type",Boolean)],e.prototype,"allowShape",void 0),e}(o.a)},488:function(t,e,n){"use strict";n.d(e,"d",function(){return o}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return R});var r,o,i,a,s=n(431),l=n(447),u=n(492),c=n(386),h=n(551),p=n(414),f=n(552),d=n(403),y=n(432),g=n(380),m=n(468),_=n(383),v=n(466),b=n(400),w=n(443),C=n(442),P=n(422),x=n(550),O=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),I=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},S=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},T=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},j=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(T(arguments[e]));return t};!function(t){t[t.None=0]="None",t[t.Center=1]="Center",t[t.Top=2]="Top",t[t.Bottom=3]="Bottom"}(o||(o={})),function(t){t[t.None=0]="None",t[t.Center=1]="Center",t[t.Right=2]="Right",t[t.Left=3]="Left"}(i||(i={})),function(t){t[t.Fit=0]="Fit",t[t.Fill=1]="Fill",t[t.Original=2]="Original"}(a||(a={}));var R=function(t){function e(n){var r=t.call(this,null!=n?y.a.rectangle(n.left,n.top,n.width,n.height):null)||this;return r._isStubContent=!1,r._isCoverMode=!1,r._contentResizeMode=a.Fill,r._contentEffect=P.a.None,r._contentFillColor=null,r._contentOverlayEffect=null,r.stubStorageMeta=null,r.linkId=null,r.allowedSubfolder=null,r.contentVerticalAlignment=o.None,r.contentHorizontalAlignment=i.None,r.type=e.type,r._content=null,r._topFrames=[],r._bottomFrames=[],r._onContentOverlayEffectPropertyChanged=function(t,e){r._propertyChanged.notify(r,"contentOverlayEffect")},r.fixedStubContentSize=!1,r.sourceRectangle=null!=n?n:new d.a(0,0,10,10),r.fillColor=new c.RgbColor("rgba(0, 0, 0, 0)"),r.borderWidth=0,r.placeholderPermissions=new h.a,r._contentPermissions=new f.a,r._contentPermissions.propertyChanged.add(r._onPermissionsChanged),r._setViolationSettings(new x.a,!0),r._ignorePermissionsChange=!0,r.manipulationPermissions.resizeGrips=new p.a(!0,!0,!1),r.shapePermissions.allowChangeFillColor=!1,r.itemPermissions.allowRemoveOnLayoutChange=!0,r.itemPermissions.itemToolbarPermissions.showEditButton=!0,r.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=null,r.itemPermissions.itemToolbarPermissions.showSelectButton=!0,r.contentPermissions.imagePermissions.allowKeepOverlayColor=!1,r._ignorePermissionsChange=!1,r}return O(e,t),Object.defineProperty(e.prototype,"contentEffect",{get:function(){return this._contentEffect},set:function(t){this._contentEffect!==t&&(this._contentEffect=t,this._propertyChanged.notify(this,"contentEffect"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentFillColor",{get:function(){return this._contentFillColor},set:function(t){this._contentFillColor!==t&&(this._contentFillColor=t,this._propertyChanged.notify(this,"contentFillColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStubContent",{get:function(){return this._isStubContent},set:function(t){this._isStubContent!==t&&(this._setStubStorageMeta(),this._isStubContent=t,this._propertyChanged.notify(this,"isStubContent"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentResizeMode",{get:function(){return this.isCoverMode?a.Fill:this.isBarcodePlaceholder?a.Fit:this._contentResizeMode},set:function(t){this._contentResizeMode!==t&&(this._contentResizeMode=t,this._propertyChanged.notify(this,"contentResizeMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentOverlayEffect",{get:function(){return this._contentOverlayEffect},set:function(t){v.a.equals(this.contentOverlayEffect,t)||(this._unsubscribeContentOverlayEffectPropertyChanged(),this._contentOverlayEffect=t,this._subscribeContentOverlayEffectPropertyChanged(),this._propertyChanged.notify(this,"contentOverlayEffect"))},enumerable:!0,configurable:!0}),e.prototype._subscribeContentOverlayEffectPropertyChanged=function(){null!=this.contentOverlayEffect&&this.contentOverlayEffect.addPropertyChanged(this._onContentOverlayEffectPropertyChanged)},e.prototype._unsubscribeContentOverlayEffectPropertyChanged=function(){null!=this.contentOverlayEffect&&this.contentOverlayEffect.removePropertyChanged(this._onContentOverlayEffectPropertyChanged)},Object.defineProperty(e.prototype,"isCoverMode",{get:function(){return null==this.barcodeFormat&&this._isCoverMode},set:function(t){this._isCoverMode!==t&&(this._isCoverMode=t,this.isEmptyContent||this.content.applyPermissionsConstrain(),this._propertyChanged.notify(this,"isCoverMode"))},enumerable:!0,configurable:!0}),e.prototype.getImagePermissions=function(){return null!=this.contentPermissions?this.contentPermissions.imagePermissions:this.content instanceof l.a?this.content.imagePermissions:null},e.prototype.applyPermissionsConstrain=function(){var t=this.getImagePermissions(),e=null==t||t.allowChangeImage,n=null!=t&&t.allowEditImage,r=null!=this.content&&this.content instanceof l.a&&null!=this.content.source&&this.content.source.isVector;this.isStubOrEmpty||!n||r?this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=!1:this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=null,null!=this.placeholderPermissions&&(e?(this.placeholderPermissions.showSelectButtonConstraint=null,this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=null):(this.itemPermissions.itemToolbarPermissions.showSelectButtonConstraint=!1,this.placeholderPermissions.showSelectButtonConstraint=!1)),null!=this.contentPermissions&&null!=this.contentPermissions.imagePermissions&&(null!=this.barcodeFormat?this.contentPermissions.imagePermissions.allowEditImageConstraint=!1:this.contentPermissions.imagePermissions.allowEditImageConstraint=null),this.isBarcodePlaceholder&&(null!=this.manipulationPermissions&&(this.manipulationPermissions.resizeGrips.edge=!1,this.manipulationPermissions.resizeGrips.setCornerArbitrary(!1)),null!=this.itemPermissions&&null!=this.itemPermissions.itemToolbarPermissions&&(this.itemPermissions.itemToolbarPermissions.showSelectButton=!1,this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=null),null!=this.placeholderPermissions&&(this.placeholderPermissions.allowEditContent=!1,this.placeholderPermissions.showHandleButton=!1),null!=this.contentPermissions&&null!=this.contentPermissions.barcodePermissions&&(this.contentPermissions.barcodePermissions.allowChangeBarcodeContent?this.placeholderPermissions.showSelectButtonConstraint=null:(this.placeholderPermissions.showSelectButtonConstraint=!1,this.itemPermissions.itemToolbarPermissions.showEditButtonConstraint=this.contentPermissions.barcodePermissions.allowChangeBarcodeContent)))},Object.defineProperty(e.prototype,"contentPermissions",{get:function(){return this._contentPermissions},set:function(t){if(null==t)throw new g.a("ContentPermissions cannot be null");Object(_.h)(this._contentPermissions,t)||(this._contentPermissions.propertyChanged.remove(this._onPermissionsChanged),this._contentPermissions=t,this._contentPermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholderPermissions",{get:function(){return this._placeholderPermissions},set:function(t){if(null==t)throw new g.a("placeholderPermissions cannot be null");Object(_.h)(this._placeholderPermissions,t)||(null!=this._placeholderPermissions&&this._placeholderPermissions.propertyChanged.remove(this._onPermissionsChanged),this._placeholderPermissions=t,this.applyPermissionsConstrain(),this._placeholderPermissions.propertyChanged.add(this._onPermissionsChanged),this._propertyChanged.notify(this,"placeholderPermissions"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"violationSettings",{get:function(){return this._violationSettings},set:function(t){this._setViolationSettings(t)},enumerable:!0,configurable:!0}),e.prototype._setViolationSettings=function(e,n){if(void 0===n&&(n=!1),!(n||e instanceof x.a))throw new g.a("Shape ViolationSettings property must has ImageViolationSettings type!");t.prototype._setViolationSettings.call(this,e,n)},Object.defineProperty(e.prototype,"isFrame",{get:function(){return null!=this._topFrames&&this._topFrames.length>0||null!=this._bottomFrames&&this._bottomFrames.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.isEmptyContent||(this._content.parentPlaceholder=this,this._content.parentContainer=null,this._content.applyPermissionsConstrain()),this._setStubStorageMeta(),this._propertyChanged.notify(this,"content")},enumerable:!0,configurable:!0}),e.prototype._setStubStorageMeta=function(){this.isStubContent&&this._content instanceof l.a&&(this.stubStorageMeta=new u.a({isUserImage:this._content.isUserImage,isVector:this._content.source.isVector,name:"Stub content",size:{width:this._content.source.width,height:this._content.source.height},storageId:this._content.source.id,origin:this._content.source.origin}))},Object.defineProperty(e.prototype,"topFrames",{get:function(){return this._topFrames},set:function(t){var e=this;if(null==t)throw new g.a;this._topFrames=t,this._topFrames.forEach(function(t){t.parentPlaceholder=e,t.parentContainer=null})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomFrames",{get:function(){return this._bottomFrames},set:function(t){var e=this;if(null==t)throw new g.a;this._bottomFrames=t,this._bottomFrames.forEach(function(t){t.parentPlaceholder=e,t.parentContainer=null})},enumerable:!0,configurable:!0}),e.prototype.updateContentAndFrames=function(t){null!=this.content&&t(this.content),null!=this.topFrames&&this.topFrames.forEach(function(e){t(e)}),null!=this.bottomFrames&&this.bottomFrames.forEach(function(e){t(e)})},Object.defineProperty(e.prototype,"imageContent",{get:function(){if(null!=this._content&&!(this._content instanceof l.a))throw new g.c("Not image content!");return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmptyContent",{get:function(){return null==this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStubOrEmpty",{get:function(){return this.isStubContent||this.isEmptyContent},enumerable:!0,configurable:!0}),e.prototype._canSetIsVariable=function(){return!0},Object.defineProperty(e.prototype,"isBarcodePlaceholder",{get:function(){return null!=this.barcodeFormat},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){var e=t.prototype.getSimplifiedObject.call(this,["_content","imageContent","placeholderPermissions","contentPermissions","isFrame","isEmptyContent","isStubOrEmpty","isBarcodePlaceholder"]);return e.content=null!=this.content?this.content.getSimplifiedObject():null,e.placeholderPermissions=this.placeholderPermissions.getSimplifiedObject(),e.contentPermissions=this.contentPermissions.getSimplifiedObject(),e},e.prototype._copy=function(e,n,r,o){if(t.prototype._copy.call(this,e,n,r,o),n.linkId=e.linkId,n.allowedSubfolder=e.allowedSubfolder,n.allowedTabs=null!=e.allowedTabs?e.allowedTabs.map(function(t){return t}):null,n.contentVerticalAlignment=e.contentVerticalAlignment,n.contentHorizontalAlignment=e.contentHorizontalAlignment,n.placeholderPermissions=e.placeholderPermissions.clone(),null!=e.content?(null==n.content?n.content=e.content.clone(r,o):n.content.update(e.content),n.content.parentPlaceholder=n):n.content=null,e.topFrames.length===n.topFrames.length)for(var i=0;i<e.topFrames.length;i++)n.topFrames[i].update(e.topFrames[i]),n.topFrames[i].parentPlaceholder=n;else n.topFrames=e.topFrames.map(function(t){var e=t.clone(r,o);return e.parentPlaceholder=n,e});if(e.bottomFrames.length===n.bottomFrames.length)for(i=0;i<e.bottomFrames.length;i++)n.bottomFrames[i].update(e.bottomFrames[i]),n.bottomFrames[i].parentPlaceholder=n;else n.bottomFrames=e.bottomFrames.map(function(t){var e=t.clone(r,o);return e.parentPlaceholder=n,e});n.stubStorageMeta=null!=e.stubStorageMeta?e.stubStorageMeta.clone():null,n.isStubContent=e.isStubContent,n.isCoverMode=e.isCoverMode,n.contentResizeMode=e.contentResizeMode,n.contentEffect=e.contentEffect,n.contentFillColor=null!=e._contentFillColor?e._contentFillColor.clone():null,n.contentOverlayEffect=null!=e.contentOverlayEffect?e.contentOverlayEffect.clone():null,n.barcodeFormat=e.barcodeFormat,n.contentPermissions=e.contentPermissions.clone(),n.isVariable=e.isVariable},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(_.c)(j([this._content],this._topFrames,this._bottomFrames),j([e._content],e._topFrames,e._bottomFrames))&&Object(_.h)(this.linkId,e.linkId)&&Object(_.h)(this.allowedSubfolder,e.allowedSubfolder)&&Object(_.c)(this.allowedTabs,e.allowedTabs)&&Object(_.h)(this.contentVerticalAlignment,e.contentVerticalAlignment)&&Object(_.h)(this.contentHorizontalAlignment,e.contentHorizontalAlignment)&&Object(_.h)(this._placeholderPermissions,e._placeholderPermissions)&&Object(_.h)(this.stubStorageMeta,e.stubStorageMeta)&&Object(_.h)(this._isStubContent,e._isStubContent)&&Object(_.h)(this._isCoverMode,e._isCoverMode)&&Object(_.h)(this._contentResizeMode,e._contentResizeMode)&&Object(_.h)(this._contentEffect,e._contentEffect)&&Object(_.h)(this.barcodeFormat,e.barcodeFormat)&&Object(_.h)(this._contentPermissions,e._contentPermissions)&&Object(_.h)(this.isVariable,e.isVariable)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="PlaceholderItem",I([Object(b.a)({factory:new w.b(u.a),displayName:"Stub storage meta"}),S("design:type",u.a)],e.prototype,"stubStorageMeta",void 0),I([Object(b.a)({factory:new w.c("subfolder"),displayName:"Allowed subfolder"}),S("design:type",String)],e.prototype,"allowedSubfolder",void 0),I([Object(b.a)({factory:new w.c("allowedTabs"),displayName:"Allowed tabs"}),S("design:type",Array)],e.prototype,"allowedTabs",void 0),I([Object(b.a)({enumObject:o}),S("design:type",Object)],e.prototype,"contentVerticalAlignment",void 0),I([Object(b.a)({enumObject:i}),S("design:type",Object)],e.prototype,"contentHorizontalAlignment",void 0),I([Object(b.a)({enumObject:P.a}),S("design:type",Number),S("design:paramtypes",[Number])],e.prototype,"contentEffect",null),I([Object(b.a)({factory:new w.a,displayName:"Content fill color"}),S("design:type",c.Color),S("design:paramtypes",[c.Color])],e.prototype,"contentFillColor",null),I([Object(b.a)({enumObject:a}),S("design:type",Object),S("design:paramtypes",[Object])],e.prototype,"contentResizeMode",null),I([Object(b.a)({enumObject:m.a,factory:new w.c(m.a.QR_CODE),displayName:"Barcode format"}),S("design:type",String)],e.prototype,"barcodeFormat",void 0),I([Object(b.a)({factory:new w.b(v.a,{color:new c.CmykColor({c:0,m:0,y:0,k:0}),opacity:1,blendMode:C.a.Normal}),displayName:"Content overlay effect"}),S("design:type",Object),S("design:paramtypes",[Object])],e.prototype,"contentOverlayEffect",null),e}(s.a)},489:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,o=n(386),i=n(482),a=n(413),s=n(381),l=n(387),u=n(383),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(){var n=t.call(this)||this;return n._maskOpacity=.45,n._parentPlaceholder=null,n.type=e.type,n.borderWidth=0,n.fillColor=new o.RgbColor("rgba(0, 0, 0, 0)"),n._ignorePermissionsChange=!0,n.itemPermissions.itemToolbarPermissions.showEditButton=!0,n._ignorePermissionsChange=!1,n}return c(e,t),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._maskOpacity},set:function(t){s.EqualsOfFloatNumbers(this._maskOpacity,t)||(this._maskOpacity=t,this._propertyChanged.notify(this,"maskOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentPlaceholder",{get:function(){return this._parentPlaceholder},set:function(t){this._parentPlaceholder=t,this._propertyChanged.notify(this,"parentPlaceholder")},enumerable:!0,configurable:!0}),e.prototype.applyPermissionsConstrain=function(){null!=this.parentPlaceholder&&(this.parentPlaceholder.isCoverMode?(this.manipulationPermissions.resizeGrips.edgeConstraint=!1,this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(!1),this.manipulationPermissions.allowRotateConstraint=!1):(this.manipulationPermissions.resizeGrips.edgeConstraint=null,this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(null),this.manipulationPermissions.allowRotateConstraint=null),this.parentPlaceholder.applyPermissionsConstrain()),this.isRenderTypeIsNormal||(this.itemPermissions.allowOpacityChange=!1,this.shapePermissions.allowChangeBorderColor=!1,this.shapePermissions.allowChangeFillColor=!1)},e.prototype.getSimplifiedObject=function(e){return l.isArray(e)||l.isString(e)||(e=[]),t.prototype.getSimplifiedObject.call(this,["parentPlaceholder"].concat(e))},e.prototype._canSetIsVariable=function(){return!0},e.prototype._getPrintAreaBounds=function(){var t=null!=this.parentContainer?this.parentContainer:null!=this.parentPlaceholder?this.parentPlaceholder.parentContainer:null;return t instanceof a.d?t.parentComponent.bounds:null},e.prototype._getParentContainer=function(){return null!=this.parentPlaceholder?this.parentPlaceholder.parentContainer:null},e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n._maskOpacity=e._maskOpacity,n.isVariable=e.isVariable},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(u.h)(this._maskOpacity,e._maskOpacity)&&Object(u.h)(this.isVariable,e.isVariable)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="ContentItem",e}(i.a)},490:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(384),o=n(400),i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this._allowChangeImage=!0,this.allowEditImageConstraint=null,this._allowEditImage=!0,this._allowKeepOverlayColor=!1,this.propertyChanged=new r.a,null==t&&(t=!0),this.allowChangeImage=t,this.allowEditImage=t,this.allowKeepOverlayColor=t}return Object.defineProperty(t.prototype,"allowChangeImage",{get:function(){return this._allowChangeImage},set:function(t){this._allowChangeImage!==t&&(this._allowChangeImage=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowEditImage",{get:function(){return null!=this.allowEditImageConstraint?this.allowEditImageConstraint:this._allowEditImage},set:function(t){this._allowEditImage!==t&&(this._allowEditImage=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowKeepOverlayColor",{get:function(){return this._allowKeepOverlayColor},set:function(t){this._allowKeepOverlayColor!==t&&(this._allowKeepOverlayColor=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t;return e.allowChangeImage=this.allowChangeImage,e.allowEditImage=this.allowEditImage,e.allowKeepOverlayColor=this.allowKeepOverlayColor,e},t.prototype.equals=function(t){return this.allowChangeImage===t.allowChangeImage&&this.allowEditImage===t.allowEditImage&&this.allowKeepOverlayColor===t.allowKeepOverlayColor},t.prototype.getSimplifiedObject=function(){var t={};return t.allowChangeImage=this.allowChangeImage,t.allowEditImage=this.allowEditImage,t.allowKeepOverlayColor=this.allowKeepOverlayColor,t},i([Object(o.a)({ignore:!0}),a("design:type",Boolean)],t.prototype,"allowEditImageConstraint",void 0),t}()},491:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"b",function(){return l}),n.d(e,"a",function(){return u});var r=n(381),o=n(380),i=n(391);function a(t,e){if("number"==typeof t)return s(t,e);if(t instanceof r.PointF)return new r.PointF(s(t.x,e),s(t.y,e));throw new o.a("points")}function s(t,e){return function(t,e){return t*e}(function(t){return t/72}(t),e)}function l(t,e){return t/e*72}function u(t){return t/i.a.devicePixelRatio}},492:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(387),o=n(383),i=n(467),a=function(){function t(t){if(this.storageId=null,this.size=new i.a,this.name=null,this.isUserImage=!1,this.isVector=!1,this.pageIndex=0,"string"==typeof t)try{t=JSON.parse(t)}catch(e){console.warn("Unable to parse ImageMetaData from string ",t,e),t=null}r.isObject(t)&&r.extend(this,t)}return t.fromInterface=function(e,n){var r=new t;return r.storageId=e.id,r.size=new i.a(e.width,e.height),r.name=void 0!==n?n:null,null!=e.isVector&&(r.isVector=e.isVector),r},t.prototype.clone=function(){return new t(this)},t.prototype.equals=function(t){return this.storageId===t.storageId&&Object(o.h)(this.size,t.size)&&Object(o.h)(this.name,t.name)&&Object(o.h)(this.isUserImage,t.isUserImage)&&Object(o.h)(this.isVector,t.isVector)&&Object(o.h)(this.pageIndex,t.pageIndex)},t}()},493:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(384),o=function(){function t(){this._allowChangeBarcodeType=!0,this._allowChangeBarcodeContent=!0,this._allowChangeBarcodeColor=!0,this.propertyChanged=new r.a}return Object.defineProperty(t.prototype,"allowChangeBarcodeType",{get:function(){return this._allowChangeBarcodeType},set:function(t){this._allowChangeBarcodeType!==t&&(this._allowChangeBarcodeType=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeBarcodeContent",{get:function(){return this._allowChangeBarcodeContent},set:function(t){this._allowChangeBarcodeContent!==t&&(this._allowChangeBarcodeContent=t,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeBarcodeColor",{get:function(){return this._allowChangeBarcodeColor},set:function(t){this._allowChangeBarcodeColor!==t&&(this._allowChangeBarcodeColor=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){var t={};return t.allowChangeBarcodeType=this.allowChangeBarcodeType,t.allowChangeBarcodeContent=this.allowChangeBarcodeContent,t.allowChangeBarcodeColor=this.allowChangeBarcodeColor,t},t.prototype.clone=function(){var e=new t;return e.allowChangeBarcodeType=this.allowChangeBarcodeType,e.allowChangeBarcodeContent=this.allowChangeBarcodeContent,e.allowChangeBarcodeColor=this.allowChangeBarcodeColor,e},t.prototype.equals=function(t){return this.allowChangeBarcodeColor===t.allowChangeBarcodeColor&&this.allowChangeBarcodeContent===t.allowChangeBarcodeContent&&this.allowChangeBarcodeType===t.allowChangeBarcodeType},t}()},494:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r,o=n(448),i=n(472),a=n(381),s=n(392),l=n(473),u=n(383),c=n(382),h=n(391),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t){function e(e,n){void 0===n&&(n=null);var r=t.call(this,e,n)||this;return r._onCanvasChangedDelegate=null,r._contentType=i.a.NotContent,r._parentPlaceholder=null,r._pixelWidth=0,r._pixelHeight=0,r._needToDownloadImage=!1,r._imageContainer=new l.a(r._onImageLoaded.bind(r)),r}return p(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(e,n){var r,o;switch(n){case"maskOpacity":break;case"parentPlaceholder":this.parentPlaceholder=null!=e.parentPlaceholder?null===(o=null===(r=this.canvas)||void 0===r?void 0:r.handlerFactory)||void 0===o?void 0:o.get(e.parentPlaceholder):null}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype.setRectangle=function(e,n){var r,o=this._parentPlaceholder,s=this._contentType===i.a.TopFrame||this._contentType===i.a.BottomFrame;if(null!=o&&o.item.isCoverMode&&!o.item.isStubContent&&!s){var l=o.rectangle,u=e.clone(),c=Object(a.EqualsOfFloatNumbers)(Object(a.normalizeAngle)(u.angle-l.angle)%180,90),h=this.rectangle;if(null!=h&&null!=o._previousRectangle&&!o.editing){var p,f=o._previousRectangle.width/o._previousRectangle.height,d=l.width/l.height,y=h.width/h.height,g=d>y!=f>y;if(d>y)if(g)p=l.width/y/o._previousRectangle.height;else p=l.width/o._previousRectangle.width;else if(g)p=l.height*y/o._previousRectangle.width;else p=l.height/o._previousRectangle.height;u.width=h.width*p,u.height=h.height*p,u.center=l.center;var m=u.angle;u.angle=0;var _=(o._previousRectangle.centerX-h.centerX+h.width/2)*p-u.width/2,v=(o._previousRectangle.centerY-h.centerY+h.height/2)*p-u.height/2;(r=new a.PointF(-_,-v)).rotateAt(l.angle-o._previousRectangle.angle),u.centerX=l.centerX+r.x,u.centerY=l.centerY+r.y,u.rotateAt(m,u.center)}var b=c?u.height:u.width,w=c?u.width:u.height;if(b<l.width||w<l.height){var C=Math.max(l.width/b,l.height/w);u.width*=C,u.height*=C}var P=l.angle;l.angle=0;var x=l.bounds,O=u.clone();O.rotateAt(-P,l.center);var I=O.bounds;return(r=new a.PointF(0,0)).x=x.left<I.left?x.left-I.left:0,r.x=x.right>I.right?x.right-I.right:r.x,r.y=x.top<I.top?x.top-I.top:0,r.y=x.bottom>I.bottom?x.bottom-I.bottom:r.y,r.rotate(P),u.centerX+=r.x,u.centerY+=r.y,void t.prototype.setRectangle.call(this,u,n)}t.prototype.setRectangle.call(this,e,n)},e.prototype._setVisible=function(e){t.prototype._setVisible.call(this,e),this.isVisible()&&this.update()},e.prototype.isVisible=function(){return null!=this._parentPlaceholder?this._parentPlaceholder.isVisible():t.prototype.isVisible.call(this)},Object.defineProperty(e.prototype,"ready",{get:function(){return this._imageContainer.isLoaded},enumerable:!0,configurable:!0}),e.prototype._isLoadingImage=function(){return this._imageContainer.isLoading},e.prototype._setIsLoadingImage=function(t){this._imageContainer.isLoading=t},Object.defineProperty(e.prototype,"parentPlaceholder",{get:function(){return this._parentPlaceholder},set:function(t){this._parentPlaceholder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentType",{get:function(){return this._contentType},set:function(t){this._contentType=t},enumerable:!0,configurable:!0}),e.prototype._getSrc=function(){var t=this._imageContainer.source;return u.l(t)?this._createImageUrl():t},e.prototype._setSrc=function(t){this._imageContainer.source=t},e.prototype._onImageLoaded=function(t,e){null!=this.canvas&&this.canvas.redraw(),this.isLoadingImage=!1,this._dispatchReadyEvent()},e.prototype._createImageUrl=function(){return null},e.prototype._updateImageUrl=function(){if(this.isVisible()){var t=this.canvas;if(null!=t&&t.isInitialized){var e=this._createImageUrl();e!==this._imageContainer.source&&(null==e?(this._imageContainer.clear(),t.redraw()):this._imageContainer.updateUrl(e))}}},e.prototype._onCanvasChanged=function(){this._updateImageUrl()},e.prototype.quickUpdate=function(){this.updateColors(),this._updateImageUrl()},e.prototype._getDrawingFillColor=function(){return this.item.fillColor},e.prototype.drawItemHandler=function(t,e){if(null!=t&&null!=this.canvas){var n=null!=this._parentPlaceholder?this._parentPlaceholder.rectangle:this.rectangle,r=this.rectangle,o=this._getDrawingFillColor(),i=this.isNormalRenderingType||0===o.alpha?o.preview:"rgb(0,0,0)";this._hasVectorMask()&&(t.save(),this._clip(t));var l=this.isNormalRenderingType?this.item.opacity:1;s.a.fillRectangle(t,r,i,l),this._imageContainer.isLoaded?this._drawImage(t,this.canvas.disableSmoothing):this._imageContainer.isLoading&&this.canvas.drawWaitClock(null!=e?e:t,new a.PointF(n.centerX,n.centerY));var u=this._getActualBorderWidth();if(u>0){r.width+=u,r.height+=u;var c=this.isNormalRenderingType||0===this.item.borderColor.alpha?this.item.borderColor.preview:"rgb(0,0,0)";s.a.drawRectangle(t,r,u,c,this.item.opacity)}this._hasVectorMask()&&t.restore()}},e.prototype._drawMaskedContent=function(t){if(this._drawImage(t,this.canvas.disableSmoothing,this.item.maskOpacity),null!=this._parentPlaceholder){t.globalCompositeOperation="destination-out";var e=this._parentPlaceholder;s.a.fillPath(t,e.originalPath,e.getControlCenter(),e.item.transform,"#fff"),t.globalCompositeOperation="source-over"}},e.prototype.updateRectangle=function(t,e,n,r,o,i){null==e&&(e=c.ResizeMode.Fit),null==t&&(t=!1);var a=this.getTransformedRectangle(!1);if(r=null!=r?r:this.bounds.width,o=null!=o?o:this.bounds.height,t){var s=r/o,l=a.location;a.width=a.height*s,a.location=l}else if(null!=this.parentPlaceholder&&(a=this.parentPlaceholder.getTransformedRectangle(!1)),e===c.ResizeMode.Original&&this.item instanceof c.ImageItem){var u=this.item.getOriginalImageSize(),h=null!=i?this.item.source.dpiX/i:1;a.width=u.width*h,a.height=u.height*h}else{h=1;e===c.ResizeMode.Fit?h=Math.min(a.width/r,a.height/o):e===c.ResizeMode.Fill&&(h=Math.max(a.width/r,a.height/o)),a.width=r*h,a.height=o*h}if(null!=n){var p=n.getTransformedRectangle(!1);switch(n.item.contentVerticalAlignment){case c.VerticalContentAlignment.Top:a.centerY=p.centerY-(p.height-a.height)/2;break;case c.VerticalContentAlignment.Center:a.centerY=p.centerY;break;case c.VerticalContentAlignment.Bottom:a.centerY=p.centerY+(p.height-a.height)/2}switch(n.item.contentHorizontalAlignment){case c.HorizontalContentAlignment.Left:a.centerX=p.centerX-(p.width-a.width)/2;break;case c.HorizontalContentAlignment.Center:a.centerX=p.centerX;break;case c.HorizontalContentAlignment.Right:a.centerX=p.centerX+(p.width-a.width)/2}}this.setTransformedRectangle(a)},e.prototype._drawImage=function(t,e,n,r){var o=this.canvas,i=h.a.screenDpi*o.zoom/72,a=h.a.screenDpi*o.zoom/72,l=this.isNormalRenderingType?this.item.opacity:1,u=null!=n?l*n:l;s.a.drawImage(t,null!=r?r:this._imageContainer.image,this.rectangle,i,a,e,null,u)},e.prototype._getBoundsMargin=function(){return 2*this._getActualBorderWidth()},e.prototype._onAddedOnCanvas=function(e,n){if(t.prototype._onAddedOnCanvas.call(this,e,n||null!=this.parentPlaceholder),this._updateImageUrl(),!this._onCanvasChangedDelegate){var r=this.canvas;r&&(this._onCanvasChangedDelegate=this._onCanvasChanged.bind(this),r.add_zoomChanged(this._onCanvasChangedDelegate),this._needToDownloadImage&&this.update())}},e.prototype._onRemovedFromCanvas=function(e){t.prototype._onRemovedFromCanvas.call(this,e),e&&null!=this._onCanvasChangedDelegate&&(e.remove_zoomChanged(this._onCanvasChangedDelegate),delete this._onCanvasChangedDelegate)},e.prototype.dispose=function(){if(this._imageContainer.dispose(),this._onCanvasChangedDelegate){var e=this.canvas;e&&e.remove_zoomChanged(this._onCanvasChangedDelegate),delete this._onCanvasChangedDelegate}t.prototype.dispose.call(this)},e.typeName="ContentItemHandler",e}(o.a)},495:function(t,e,n){"use strict";n.d(e,"a",function(){return p}),n.d(e,"b",function(){return f}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return o});var r,o,i=n(496),a=n(386),s=n(431),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},h=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t},p=function(t){function e(n,r){void 0===r&&(r=null);var o=t.call(this,n)||this;return o.type=e.type,o._colorGroups=[],o._onItemAdded=function(t){e._generateColorGroups([t.item]).forEach(function(t){var e;if(t.targets=t.targets.filter(function(t){return!o.colorGroups.some(function(e){return e.targets.some(function(e){var n=e.itemId,r=e.prop;return n===t.itemId&&r===t.prop})})}),!(t.targets.length<1)){var n=o.colorGroups.find(function(e){return e.color.equals(t.color)});null!=n?(e=n.targets).push.apply(e,h(t.targets)):(null==o.themeBinding.clipartColors&&(o.themeBinding.clipartColors=new Array(o.colorGroups.length).fill(null)),o.colorGroups.push(t),o.themeBinding.clipartColors.push(null))}})},o._onItemRemoved=function(t){var e=t.item.id;(o.colorGroups.forEach(function(t){t.targets.some(function(t){return t.itemId===e})&&(t.targets=t.targets.filter(function(t){return t.itemId!==e}))}),o.colorGroups.some(function(t){return 0===t.targets.length}))&&o.colorGroups.filter(function(t){return 0===t.targets.length}).map(function(t){return o.colorGroups.indexOf(t)}).forEach(function(t){o.colorGroups.splice(t,1),o.themeBinding.clipartColors.splice(t,1)})},o._ignorePermissionsChange=!0,o.groupItemPermissions.allowSelectNestedItems=!1,o.groupItemPermissions.allowUngroup=!1,o._ignorePermissionsChange=!1,o.colorGroups=null!=r?r:e._generateColorGroups(o.items.toArray()),o.items.add_itemAdded(o._onItemAdded),o.items.add_itemRemoved(o._onItemRemoved),o}return l(e,t),e.prototype.getSimplifiedObject=function(e){return void 0===e&&(e=[]),t.prototype.getSimplifiedObject.call(this,e)},e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o);var i=e.colorGroups.map(function(t){return t.clone()});if(r){var a=n.items.toArray().map(function(t){return t.id}),s=e.items.toArray().map(function(t){return t.id}),l=i.reduce(function(t,e){return h(t,e.targets)},[]);a.forEach(function(t,e){return l.filter(function(t){return t.itemId===s[e]}).forEach(function(e){return e.itemId=t})})}n.colorGroups=i},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.prototype.applyPermissionsConstrain=function(){t.prototype.applyPermissionsConstrain.call(this),null!=this.groupItemPermissions&&(this.groupItemPermissions.allowSelectNestedItemsContraint=!1,this.groupItemPermissions.allowUngroupContraint=!1)},Object.defineProperty(e.prototype,"colorGroups",{get:function(){return this._colorGroups},set:function(t){this._colorGroups=t},enumerable:!0,configurable:!0}),e.prototype.setColor=function(t,e){var n=this;if(!this.colorGroups.includes(t))throw Error("Unexpected colorgroup");var r=e instanceof a.Color?e:e.color;t.color.equals(r)||(e instanceof a.Color||(null==this.themeBinding.clipartColors&&(this.themeBinding.clipartColors=new Array(this.colorGroups.length).fill(null)),this.themeBinding.clipartColors[this.colorGroups.indexOf(t)]=e.title),t.targets.forEach(function(t){var e=t.prop,o=t.itemId,i=n.items.first(function(t){return t.id===o});if(!(i instanceof s.a))throw new Error("Unexpected item in colorgroup");n._setShapeItemColor(e,i,r.clone())}),t.color=r.clone(),this._propertyChanged.notify(this,"colorGroups"))},e._generateColorGroups=function(t){return t.filter(function(t){return t instanceof s.a}).reduce(function(t,e){var n=t.find(function(t){return t.color.equals(e.fillColor)});if(null==n&&(n=new f(e.fillColor),t.push(n)),n.targets.push({itemId:e.id,prop:o.FillColor}),e.borderWidth>0){var r=t.find(function(t){return t.color.equals(e.borderColor)});null==r&&(r=new f(e.borderColor),t.push(r)),r.targets.push({itemId:e.id,prop:o.BorderColor})}return t},[])},e.prototype._setShapeItemColor=function(t,e,n){switch(t){case o.BorderColor:e.borderColor=n;break;case o.FillColor:e.fillColor=n}},e.type="ClipartItem",e}(i.a),f=function(){function t(t,e){void 0===e&&(e=[]),this.color=t,this.targets=e}return t.prototype.clone=function(){return new t(this.color.clone(),h(this.targets.map(function(t){return u({},t)})))},t}(),d=function(){return function(){}}();!function(t){t[t.BorderColor=0]="BorderColor",t[t.FillColor=1]="FillColor"}(o||(o={}))},496:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r,o=n(415),i=n(393),a=n(744),s=n(380),l=n(383),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},h=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t},p=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f=function(t){function e(n){var r=t.call(this)||this;return r.items=new i.a,r.type=e.type,r.groupItemPermissions=new a.a,r._ignorePermissionsChange=!0,r._groupItemPermissions.allowReplaceContent=!1,r._ignorePermissionsChange=!1,r.items.add_itemAdded(function(t){t.item.parentGroupItem=r,r._propertyChanged.notify(r,"items")}),r.items.add_itemRemoved(function(t){t.item.parentGroupItem=null,r._propertyChanged.notify(r,"items")}),null!=n&&r.items.addRange(n),r}return u(e,t),Object.defineProperty(e.prototype,"groupItemPermissions",{get:function(){return this._groupItemPermissions},set:function(t){if(null==t)throw new s.a("groupItemPermissions cannot be null");Object(l.h)(this._groupItemPermissions,t)||(null!=this._groupItemPermissions&&this._groupItemPermissions.propertyChanged.remove(this._onPermissionsChanged),this._groupItemPermissions=t,this._groupItemPermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged())},enumerable:!0,configurable:!0}),e.prototype.addItems=function(t,e){var n;null!=e&&(t=t.reverse()),null!=t&&0!==t.length&&(null!=e&&e>-1?this.items.insertAt(e,t):(n=this.items).add.apply(n,h(t)))},e.prototype._onContainerChanged=function(){var t=this;this.applyToItems(function(e){e.parentContainer=t.parentContainer})},e.prototype.addItem=function(t,e){null!=e&&e>-1?this.items.insertAt(e,t):this.items.add(t)},e.prototype.removeItems=function(t){var e,n;if(null!=t&&t.length>0)try{for(var r=p(t),o=r.next();!o.done;o=r.next()){var i=o.value;this.items.remove(i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},e.prototype.getNestedItems=function(t){void 0===t&&(t=!1);for(var n=[],r=h(this.items);r.length>0;){var o=r.shift();o instanceof e&&(r.splice.apply(r,h([r.indexOf(o),0],o.items)),t)||n.push(o)}return n},e.prototype.getSimplifiedObject=function(e){void 0===e&&(e=[]);var n=t.prototype.getSimplifiedObject.call(this,["groupManipulationPermissions","itemRemovedEvent","groupItemPermissions","items"].concat(e));return n.items=this.items.toArray().map(function(t){return t.getSimplifiedObject()}),n.groupItemPermissions=this.groupItemPermissions.getSimplifiedObject(),n},e.prototype._copy=function(e,n,r,o){if(t.prototype._copy.call(this,e,n,r,o),!(e.items.length<=0)){var i=e.items.toArray().map(function(t){return t.clone(r,o)});n.items.clear(),n.items.addRange(i),n.groupItemPermissions=e.groupItemPermissions.clone()}},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.prototype.applyPermissionsConstrain=function(){t.prototype.applyPermissionsConstrain.call(this),this.itemPermissions.itemToolbarPermissions.showEditButton=!1,this.itemPermissions.itemToolbarPermissions.showSelectButton=!1},e.prototype.applyToItems=function(t){this.items.forEach(t)},Object.defineProperty(e.prototype,"manipulationPermissions",{get:function(){if(0===this.items.length)return this.groupManipulationPermissions;var t=this.groupManipulationPermissions.clone();return this.getNestedItems(!0).forEach(function(e){t.allowDelete=t.allowDelete&&e.manipulationPermissions.allowDelete}),Object.freeze(t),t},set:function(t){throw new Error("You cannot use ManipulationPermissions setter with GroupItem. Use groupManipulationPermissions setter instead")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupManipulationPermissions",{get:function(){return t.prototype.getManipulationPermissions.call(this)},set:function(e){t.prototype.setManipulationPermissions.call(this,e)},enumerable:!0,configurable:!0}),e.prototype.isChildVisible=function(t){return!0},e.prototype.equals=function(e){var n=t.prototype.equals.call(this,e),r=Object(l.h)(this.groupItemPermissions,e.groupItemPermissions),o=Object(l.c)(h(this.items),h(e.items));return n&&r&&o},e.type="GroupItem",e}(o.a)},497:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,o=n(402),i=n(393),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]);var r=t.call(this)||this;return r.parentSurface=null,r._underContainers=new i.a,r._overContainers=new i.a,r._onContainerAdded=function(t){t.item.parentComponent=r},r.underContainers.add_itemAdded(r._onContainerAdded),r.underContainers.setRange(e),r.overContainers.add_itemAdded(r._onContainerAdded),r.overContainers.setRange(n),r}return a(e,t),e.prototype.isEmpty=function(){return this.underContainers.concat(this.overContainers).all(function(t){return t.items.empty})},Object.defineProperty(e.prototype,"underContainers",{get:function(){return this._underContainers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overContainers",{get:function(){return this._overContainers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allContainers",{get:function(){return this._overContainers.concat(this._underContainers)},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(){return t.prototype.getSimplifiedObject.call(this,["parentSurface","allContainers"])},e.prototype._copy=function(e,n,r){t.prototype._copy.call(this,e,n,r),n.underContainers.addRange(e.underContainers.toArray().map(function(t){return t.clone(r)})),n.overContainers.addRange(e.overContainers.toArray().map(function(t){return t.clone(r)}))},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e.prototype.generateNewIds=function(){this._generateNewId(),this._underContainers.forEach(function(t){return t.generateNewIds()}),this._overContainers.forEach(function(t){return t.generateNewIds()})},e}(o.a)},498:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t){this.__type="ItemHandlerData",this.P=[],this.Tg=null,this.ID="vo"+(new Date).getTime()+Math.round(1e3*Math.random()),t&&(this.P=t.controlPoints,this.Tg=t.tag,this.ID=t.uniqueId)}return t.prototype.applyState=function(t,e){e&&(e.beginUpdate(),e.controlPoints=t.P,e.tag=t.Tg,e.uniqueId=t.ID,e.endUpdate())},t}()},499:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){var t=this;this._promise=new Promise(function(e,n){t._resolve=e,t._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!0,configurable:!0}),t.prototype.resolve=function(t){this._resolve(t)},t.prototype.reject=function(t){this._reject(t)},t}()},500:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(380),o=n(391),i=n(422),a=function(){function t(){}return t.getImageUrl=function(t,e,n,a,s,l,u,c,h,p,f){if(!Number.isInteger(n)||!Number.isInteger(a))throw new r.a('Wrong "'+(Number.isInteger(n)?a:n)+'" type!');if(e.endsWith(".svg")&&!s&&!o.a.IsFirefox()&&!o.a.IsIE())return t.handlerUrl+"/svg?f="+encodeURIComponent(e);var d=t.handlerUrl+"/img?f="+encodeURIComponent(e)+"&w="+encodeURIComponent(n.toString())+"&h="+encodeURIComponent(a.toString());if(null!=t.cmykColorProfileFileId&&(d+="&cmyk="+encodeURIComponent(t.cmykColorProfileFileId)),null!=t.rgbColorProfileFileId&&(d+="&rgb="+encodeURIComponent(t.rgbColorProfileFileId)),null!=t.grayscaleColorProfileFileId&&(d+="&grayscale="+encodeURIComponent(t.grayscaleColorProfileFileId)),null!=s&&s&&(d+="&sq=true"),null!=l&&(l!==i.a.None&&(d+="&effect="+encodeURIComponent(l.toString())),l===i.a.Colorize&&null!=f&&(d+="&colorizeColor="+encodeURIComponent(f.toString()))),null!=u&&u&&(d+="&kp="+encodeURIComponent(u.toString())),null!=c){var y=c.color,g=c.blendMode,m=c.opacity;null!=y&&(d+="&color="+encodeURIComponent(y.toString())),null!=g&&(d+="&obm="+encodeURIComponent(g.toString())),null!=m&&(d+="&oo="+encodeURIComponent(m.toString()))}return null!=h&&parseInt(h.toString())>0&&(d+="&page="+encodeURIComponent(h.toString())),null!=p&&p&&(d+="&alphaMask="+encodeURIComponent(p.toString())),d},t}()},501:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(411),i=n(381),a=n(392),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return s(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n),this.item.baselineLocation=e.baselineLocation},e.prototype._onItemPropertyChanged=function(e,n){var r=this;switch(n){case"baselineLocation":this.update();break;case"alignment":var o=this.rectangle.location,i=this.canvas.history;null!=i&&i.pause(),this.update(null,function(){var t=r.rectangle.location,e=o.x-t.x,n=o.y-t.y;r.item.transform.move(e,n),null!=i&&i.resume()})}"alignment"!==n&&t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._createItemHandlerPermissions=function(){var e=t.prototype._createItemHandlerPermissions.call(this);return e.allowArbitraryResize=!1,e},e.prototype._getBaselineLocation=function(){var t=this.getControlCenter(),e=this.item.baselineLocation.clone();return e.transform(this.item.transform.clone(),t),e},e.prototype.drawItemHandler=function(e){if(t.prototype.drawItemHandler.call(this,e),!0===window.__$abl$){var n=this._getBaselineLocation(),r=new i.RotatedRectangleF(n.x,n.y,6,6,0);a.a.fillRectangle(e,r,"red")}},e.prototype._onResized=function(){if(null!=this.canvas){var e=this.rectangle.height/this._height,n=parseFloat((this.item.font.size*e).toFixed(1)),r=parseFloat((this.item.leading*e).toFixed(1)),o=this.canvas,a=o.minFontSize;n="number"==typeof a?Math.max(n,a):n;var s=o.maxFontSize;if(n="number"==typeof s?Math.min(n,s):n,0!==r){var l=o.minLeading;r="number"==typeof l?Math.max(r,l):r;var u=o.maxLeading;r="number"==typeof u?Math.min(r,u):r}return Object(i.EqualsOfFloatNumbers)(n,this.item.font.size,.01)&&Object(i.EqualsOfFloatNumbers)(r,this.item.leading,.01)?(null!=this._startRectangle?(this.setRectangle(this._startRectangle),o.updateSelection(),delete this._startRectangle):this.update(null,null),!1):t.prototype._onResized.call(this)}},e.typeName="PlainTextItemHandler",e}(o.a)},502:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,o=n(411),i=n(435),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=t.call(this,e)||this;return n.__type="BaseTextHandlerData",n}return a(e,t),e.prototype.applyState=function(e,n){n&&(n.beginUpdate(),null!=e.currentTextImage?n.currentTextImage=Object.assign(new o.b,e.currentTextImage):n.currentTextImage=null),t.prototype.applyState.call(this,e,n)},e}(i.a)},503:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(381),o=n(411),i=n(392),a=n(391),s=n(386),l=function(){function t(t,e,n,r,o){this._staticCanvas=t,this._activeCanvas=e,this._textWhizz=n,this._zoom=r,this._offset=o,this._selectionColor=new s.RgbColor("rgba(40, 135, 245, 0.9)"),this._selectionTextColor=new s.RgbColor("rgb(255, 255, 255)")}return t.prototype.setZoom=function(t){this._zoom=t},Object.defineProperty(t.prototype,"offset",{set:function(t){this._offset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_scale",{get:function(){return a.a.screenDpi*this._zoom/72},enumerable:!0,configurable:!0}),t.prototype._getScaledBounds=function(t){var e=this._scale,n=Math.round(t.left*e),o=Math.round(t.top*e),i=Math.round(t.width*e),a=Math.round(t.height*e);return new r.RectangleF(n,o,i,a)},t.prototype._getBase64Url=function(){return this._staticCanvas.toDataURL()},t.prototype._colorToTextWhizz=function(t){return new this._textWhizz.Color(this._textWhizz.ColorType.rgb,[t.b,t.g,t.r,t.a])},t.renderTextImage=function(t,e,n,r,o){e.isLoaded?this._drawImage(t,e,n,r,o):!e.isLoading&&t.ready||this._drawWaitClock(t,r)},t._drawWaitClock=function(t,e){var n=t.rectangle;t.canvas.drawWaitClock(e,new r.PointF(n.centerX,n.centerY))},t._isUpdatingAfterResize=function(t){return t instanceof o.a&&("BoundedTextItemHandler"===t.getTypeName()||"PathBoundedTextItemHandler"===t.getTypeName())&&t.isUpdatingAfterResize},t._drawImage=function(t,e,n,r,o){var s=t.canvas,l=t.item,u=s.disableSmoothing,c=a.a.screenDpi*s.zoom/72;this._isUpdatingAfterResize(t)||i.a.drawImage(r,e.image,t.drawingRectangle,c,c,u,null,l.opacity*o,n)},t}()},504:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(380),o=function(){function t(t){this._args=t}return t.prototype.execute=function(){throw new r.e},t}()},505:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t.Left="left",t.Right="right",t.Top="top",t.Bottom="bottom",t.Center="center"}(r||(r={}))},506:function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(386),o=n(380),i=n(382),a=n(381),s=n(409),l=n(573),u=n(581),c=n(396),h=n(384),p=n(394),f=n(387),d=n(587),y=n(574),g=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},m=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_=function(){function t(t){var e=this;this._canvas=null,this._textEditor=null,this._textRenderer=null,this._exitedEditModeEvent=new h.c,this._enteredEditModeEvent=new h.c,this._failed=!1,this._initialFormattedText=null,this._waitMobileTextEditorInit=!1,this._stateValue="static",this._isStaticTextImageValid=!1,this._staticTextImageChanged=new h.a,this._throttleRedrawText=f.throttle(this._redrawActiveText,100),this._onCanvasZoomChanged=function(){e._isStaticTextImageValid=!1,e.ready&&e._redrawText()},this._onCanvasSelectedItemHandlerChanged=function(){"inEdit"===e._state&&e.exitEditMode(),e._state=e._canvas.isOnlyThisItemHandlerSelected(e._itemHandler)?"active":"static"},this._onCanvasSelectionLocked=function(){e.isStatic||(e._isStaticTextImageValid=!1,e._updateStaticTextImage())},this._onMobileTextEditorInitialized=function(){e._waitMobileTextEditorInit=!1,e._itemHandler==e._canvas.currentItemHandler?e.enterEditMode(0,0):e._canvas.redraw()},this._itemHandler=t,this._canvas=this._itemHandler.canvas,this._textWhizz=this._canvas.textWhizz,this._textEditor=this._canvas.textEditor,this._textRenderer=this._canvas.textRenderer,this._stateValue=this._canvas.isOnlyThisItemHandlerSelected(t)?"active":"static",this.bindToCanvas()}return t.prototype.bindToCanvas=function(){this._canvas.add_zoomChanged(this._onCanvasZoomChanged),this._canvas.add_selectedItemHandlerChanged(this._onCanvasSelectedItemHandlerChanged),this._canvas.add_onSelectionLocked(this._onCanvasSelectionLocked)},t.prototype.unbindFromCanvas=function(){this._canvas.remove_zoomChanged(this._onCanvasZoomChanged),this._canvas.remove_selectedItemHandlerChanged(this._onCanvasSelectedItemHandlerChanged),this._canvas.remove_onSelectionLocked(this._onCanvasSelectionLocked)},Object.defineProperty(t.prototype,"textHandler",{get:function(){return this._textHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_state",{get:function(){return this._stateValue},set:function(t){this._stateValue!==t&&(this._stateValue=t,this._onTextStateChanged())},enumerable:!0,configurable:!0}),t.prototype._onTextStateChanged=function(){this.ready&&(("static"===this._state&&this._isStaticTextImageValid||this._isMobile&&"inEdit"==this._state)&&this._textRenderer.clearText(),this._redrawText())},Object.defineProperty(t.prototype,"isStatic",{get:function(){return"static"===this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return"active"===this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInEdit",{get:function(){return"inEdit"===this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exitedEditModeEvent",{get:function(){return this._exitedEditModeEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enteredEditModeEvent",{get:function(){return this._enteredEditModeEvent},enumerable:!0,configurable:!0}),t.prototype.add_staticTextImageChanged=function(t){this._staticTextImageChanged.add(t)},t.prototype.remove_staticTextImageChanged=function(t){this._staticTextImageChanged.remove(t)},Object.defineProperty(t.prototype,"ready",{get:function(){return null!=this._textWhizz&&this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"failed",{get:function(){return this._failed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeTextEditor",{get:function(){return"inEdit"===this._state?this._textEditor:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waitMobileTextEditorInit",{get:function(){return this._waitMobileTextEditorInit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCropped",{get:function(){return null==this._isCropped&&(this._isCropped=this._checkTextCropped()),this._isCropped},enumerable:!0,configurable:!0}),t.prototype.getPaletteColorAt=function(t){return this._itemHandler.item.colorPalette.get(t)},t.prototype.addColorToPaletteReturnIndex=function(t){var e=this._itemHandler.item.colorPalette.indexOf(function(e){return e.equals(t)});if(-1===e){this._itemHandler.item.colorPalette.add(t);var n=new r.RgbColor(t.preview);this._textHandler.getColorPalette().add(new this._textWhizz.Color(this._textWhizz.ColorType.rgb,[n.b,n.g,n.r,n.a])),e=this._textHandler.getColorPalette().getSize()-1}return e},t.prototype.addColorToPalette=function(t){var e=this.addColorToPaletteReturnIndex(t);return new this._textWhizz.Color(this._textWhizz.ColorType.indexed,[e])},Object.defineProperty(t.prototype,"_fontRegistry",{get:function(){var t,e;return null===(e=null===(t=this._canvas)||void 0===t?void 0:t.fontRegistry)||void 0===e?void 0:e.textWhizzFontRegistry},enumerable:!0,configurable:!0}),t.prototype.updateText=function(e){if(void 0===e&&(e=null),null!=this._textWhizz&&null!=this._fontRegistry&&(this._isMobile||"text"!==e||this._itemHandler.item.text!==this._getFormattedText())){this._ready=!1;try{null==this._textHandler||null==e||"text"==e?(this._textHandler=new this._textWhizz.TextHandler(this._fontRegistry,72),this._itemHandler.initTextWhizzHandler(this._textHandler)):"frame"===e?this._itemHandler.updateTextWhizzFrames(this._textHandler):"wrappingPath"===e&&this._itemHandler.setTextWhizzWrappingPath(this._textHandler)}catch(e){throw this._failed=!0,t.createException(e,this._textWhizz)}this._failed=!1,this._isCropped=null,this._ready=!0;var n=this.measureText();this._isStaticTextImageValid=!1,this._itemHandler.updateRectangle(n),this._redrawText(!0),"inEdit"==this._state&&this._isMobile&&(this.exitEditMode(),this.enterEditMode(0,0))}},t.prototype.transformText=function(t){var e,n=this._itemHandler.item;this._textRenderer.transformText(this._textHandler,t,this._itemHandler.getControlCenter(),n.previewScale,n.opacity,null===(e=n.mask)||void 0===e?void 0:e.vectorMask)},t.prototype.measureText=function(t){var e=this;void 0===t&&(t=!1);var n=this._textHandler.getBounds();if(this._isBounded()){for(var r=function(t){var n=e._textHandler.getFrame(t);if(n instanceof e._textWhizz.ShapeTextFrame)return n.shape},o=r(0),i=1;i<this._textHandler.getFrameCount();i++)o=this._textWhizz.Path.union(o,r(i));if(t){var s=new this._textWhizz.Path;s.rect(n.x,n.y,n.width,n.height),o=this._textWhizz.Path.union(o,s)}n=o.getBounds()}else if(Object(a.EqualsOfFloatNumbers)(0,n.width)&&Object(a.EqualsOfFloatNumbers)(0,n.height)&&""===this._getFormattedText()){var l=new this._textWhizz.TextHandler(this._fontRegistry,72);this._itemHandler.initTextWhizzHandler(l,"X"),n=l.getBounds()}var u=this._itemHandler.item.previewScale;return new a.RectangleF(n.x*u,n.y*u,n.width*u,n.height*u)},t.prototype.clearText=function(){this._textRenderer.clearText()},t.prototype._isBounded=function(){return this._textHandler.getFrame(0)instanceof this._textWhizz.ShapeTextFrame},t.prototype._redrawText=function(t){return g(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return"static"!==this._state?[3,3]:this._isStaticTextImageValid?[3,2]:[4,this._updateStaticTextImage()];case 1:e.sent(),e.label=2;case 2:return[3,4];case 3:"active"!==this._state&&this._isMobile||(this._throttleRedrawText(),t&&this._canvas.redrawDesign()),e.label=4;case 4:return[2]}})})},t.prototype._updateStaticTextImage=function(){var t=this.measureText(!0);this._itemHandler.clearImageContainer();var e=this._textRenderer.getTextImage(this._textHandler,t,this._itemHandler.item.previewScale);this._staticTextImageChanged.fire({url:e,rect:t}),this._isStaticTextImageValid=!0},t.prototype._redrawActiveText=function(){var t,e=this._itemHandler.item,n=!this.isInEdit&&this._itemHandler.isEmptyTextPlaceholder()?.5:1;this._textRenderer.drawText(this._textHandler,e.transform,this._itemHandler.getControlCenter(),e.previewScale,e.opacity*n,"inEdit"!=this._state?null===(t=e.mask)||void 0===t?void 0:t.vectorMask:null)},t.prototype.drawSelection=function(t){if(null===t||void 0===t?void 0:t.isValid()){var e=this._itemHandler.item;this._textRenderer.drawSelection(this._textHandler,t,e.transform,this._itemHandler.getControlCenter(),e.previewScale)}else this._redrawActiveText()},Object.defineProperty(t.prototype,"_isMobile",{get:function(){return this._textEditor instanceof u.a},enumerable:!0,configurable:!0}),t.prototype._getFormattedText=function(){return this._textHandler.getTextRange().getFormattedTextForDefaults()},t.prototype.processMouseEvent=function(t,e){var n=t.type,r=new a.PointF(t.x,t.y);if("inEdit"!==this._state&&"dblclick"!==n)return!1;if(!e&&("mousedown"===n||"dblclick"===n)&&"inEdit"===this._state)return this.exitEditMode(),!1;if("dblclick"===n&&"inEdit"!==this._state){if(this._isMobile&&!this._textEditor.ready)return this._textEditor.initialized.remove(this._onMobileTextEditorInitialized),this._textEditor.initialized.add(this._onMobileTextEditorInitialized),this._waitMobileTextEditorInit=!0,this._canvas.redraw(),!1;this.enterEditMode(r.x,r.y)}else this._isMobile||this._textEditor.processMouseEvent(t);return this._canvas.viewer.setCursor(e?s.a.text:s.a.defaultCursor,!1),!0},t.prototype.processKeyEvent=function(t){return t.keyCode===l.a.Escape?(this.exitEditMode(!0),!0):this._textEditor.processKeyEvent(t)},t.prototype.getEditorInitData=function(){var t=this._itemHandler.item;return{text:this._initialFormattedText,rectangle:this._itemHandler.rectangle,textAlignment:t instanceof i.PlainTextItem?t.alignment:null,defaultInlineStyle:this._defaultInlineStyle,defaultParagraphStyle:this._defaultParagraphStyle,borderColor:t.borderColor.preview,borderWidth:t.borderWidth,fillColor:t.fillColor.preview,opacity:t.opacity,previewScale:t.previewScale,textFormattingEnabled:p.a.getAllowTextFormatting(t,this._canvas.viewer.textFormattingEnabled),transform:t.transform}},Object.defineProperty(t.prototype,"_defaultParagraphStyle",{get:function(){var t=this._itemHandler.item,e={alignment:t.alignment};return(t instanceof i.BoundedTextItem||t instanceof i.PathBoundedTextItem)&&(e.firstLineIndent=t.paragraphSettings.FirstLineIndent,e.spaceAfter=t.paragraphSettings.SpaceAfter,e.spaceBefore=t.paragraphSettings.SpaceBefore,e.leftIndent=t.paragraphSettings.LeftIndent,e.rightIndent=t.paragraphSettings.RightIndent),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_defaultInlineStyle",{get:function(){var t=this._itemHandler.item,e={font:{postScriptName:t.font.postScriptName,size:t.font.size,fauxBold:t.font.fauxBold,fauxItalic:t.font.fauxItalic},underline:t.underline,leading:t.leading,tracking:t.tracking,color:t.color.clone()},n={};return null!=t.stroke?(n.color=t.stroke.color.clone(),n.size=t.stroke.size,n.enabled=n.size>0&&n.color.alpha>0):(n.color=new r.RgbColor({r:0,g:0,b:0,a:0}),n.size=0,n.enabled=!1),e.stroke=n,t.font.openTypeFeatures.length>0&&(e.openType=t.font.openTypeFeatures.map(function(t){var e=t.tag,n=t.value;return new y.a(e,n)})),e},enumerable:!0,configurable:!0}),t.prototype.enterEditMode=function(t,e){var n=this;if(null!=this._textEditor){var r=this._itemHandler.isEmptyTextPlaceholder();this._textEditor instanceof d.a&&!this._itemHandler.item.transform.isEmpty&&this._itemHandler._frontEndUpdate().then(function(){r&&n._textHandler.getTextRange().delete(n._textWhizz.RangeCursorPos.left),n._textEditor._setCursor(new a.PointF(t,e))}),this._initialFormattedText=r?"":this._getFormattedText(),r&&this._textHandler.getTextRange().delete(this._textWhizz.RangeCursorPos.left);var o=this.getEditorInitData();o.point={x:t,y:e},this._textEditor.show(this,o),this._state="inEdit",this._canvas.disableSelection(),this._canvas.redraw(),this._enteredEditModeEvent.notify(this)}},t.prototype.exitEditMode=function(t){if(void 0===t&&(t=!1),null!=this._textEditor){var e=this._textEditor.hide();this._initialFormattedText!==e&&(this._isStaticTextImageValid=!1,this._itemHandler.item.text=e),this._itemHandler.isEmptyTextPlaceholder()&&(this._textHandler.getCursor().insertText(this._itemHandler.item.originalText),this.updateItemHandler()),this._state=t?"active":"static",this._canvas.enableSelection(),this._canvas.redraw(),this._exitedEditModeEvent.notify(this)}},t.prototype.updateItemHandler=function(t){this._isCropped=null,this._itemHandler instanceof c.k||this._itemHandler instanceof c.j?(this._itemHandler.updateRectangle(this.measureText()),this._canvas.redrawDesign()):this._itemHandler.raiseChanged(),this._redrawActiveText(),(null===t||void 0===t?void 0:t.isValid())&&this.drawSelection(t)},t.comparePosition=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.isEqual(e)},t.compareSelection=function(t,e){return null==t&&null==e||null!=t&&null!=e&&(this.comparePosition(t.getStart(),e.getStart())&&this.comparePosition(t.getEnd(),e.getEnd())||this.comparePosition(t.getStart(),e.getEnd())&&this.comparePosition(t.getEnd(),e.getStart()))},t.prototype._checkTextCropped=function(){if(""===this._getFormattedText())return!1;var e=this._textHandler.getTextRange(),n=this._textHandler.getVisibleTextRange();if(!t.compareSelection(e,n))return!0;var r=this._textHandler.getBounds();return Object(a.EqualsOfFloatNumbers)(0,r.width)||Object(a.EqualsOfFloatNumbers)(0,r.height)},t.createException=function(t,e){if("number"!=typeof t)throw t;var n=e.getExceptionMessage(t),r=e.getExceptionName(t);return new o.c(r+": "+n)},t}()},508:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r,o=n(423),i=n(448),a=n(434),s=n(410),l=n(501),u=n(474),c=n(475),h=n(380),p=function(){function t(t){var e=t.map(function(t){return[t.typeName,t]});this._dict=new Map(e)}return t.prototype.create=function(t){var e=this._dict.get(t);if(null!=e)return new e;throw new h.e("Unknown vo type "+t)},t}(),f=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t){function e(){return t.call(this,[o.a,i.a,a.a,s.a,l.a,c.a,u.a])||this}return f(e,t),e}(p)},509:function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r,o=n(382),i=n(381),a=n(425),s=n(410),l=n(411),u=n(394),c=n(384),h=n(396),p=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},f=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},d=function(){function t(t,e,n,r){var o=this;this._item=t,this._itemHandlers=e,this._itemHandler=n,this._history=r,this._layoutEvent=new c.a,this._orderedItemHandlers=null,this._initialized=!1,this._disposed=!1,this._onChildItemHandlerChanging=function(t){o.applyLayout()},this._onChildItemHandlerPropertyChanged=function(t,e){return p(o,void 0,void 0,function(){return f(this,function(n){switch(n.label){case 0:switch(e){case"font":case"text":case"tracking":case"leading":case"shadow":case"stroke":case"underline":case"sourceRectangle":case"borderWidth":case"transform":return[3,1]}return[3,3];case 1:return[4,t.waitUpdate()];case 2:return n.sent(),this.applyLayout(),[3,3];case 3:return[2]}})})},this._onItemPropertyChanged=function(t,e){switch(e){case"layoutSettings":o._orderedItemHandlers=null,o._updateItemsOrder();case"margin":o.applyLayout();break;case"orientation":o.applyLayout(!0);break;case"alignItems":case"justifyContent":o.applyLayout()}},this._ignoreLayoutApply=!1,this._filterHiddenItems=function(t){return!((t instanceof h.c||t instanceof h.h||t instanceof v)&&t.isEmpty())},this._item.addPropertyChanged(this._onItemPropertyChanged),this._itemHandlers.add_itemAdded(this._onItemHandlerAdded.bind(this)),this._itemHandlers.add_itemRemoved(this._onItemHandlerRemoved.bind(this)),this._itemHandlers.forEach(function(t){return t.addItemPropertyChanged(o._onChildItemHandlerPropertyChanged)}),this._itemHandlers.ofType(v).forEach(function(t){return t.getLayoutEvent().add(o._onChildItemHandlerChanging)}),this._init()}return t.prototype.dispose=function(){var t=this;this._disposed=!0,this._item.removePropertyChanged(this._onItemPropertyChanged),this._itemHandlers.remove_itemAdded(this._onItemHandlerAdded.bind(this)),this._itemHandlers.remove_itemRemoved(this._onItemHandlerRemoved.bind(this)),this._itemHandlers.forEach(function(e){return e.removeItemPropertyChanged(t._onChildItemHandlerPropertyChanged)}),this._itemHandlers.ofType(v).forEach(function(e){return e.getLayoutEvent().remove(t._onChildItemHandlerChanging)})},t.prototype.getLayoutEvent=function(){return this._layoutEvent},t.prototype.onItemRemoved=function(t){this._updateItemsOrder({removedItem:t.item}),this.applyLayout()},t.prototype.onItemHandlersCollectionChanged=function(){this._orderedItemHandlers=null},t.prototype._init=function(){return p(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return t=this._item.getItemsOrder(),null==this._itemHandler.canvas?[2]:[4,this._itemHandler.waitUpdate()];case 1:return e.sent(),t||this._updateItemsOrder(),this._initialized=!0,this.applyLayout(),[2]}})})},t.prototype._onItemHandlerAdded=function(t){t.item.addItemPropertyChanged(this._onChildItemHandlerPropertyChanged),t.item.getChangingEvent().add(this._onChildItemHandlerChanging),t.item instanceof v&&t.item.getLayoutEvent().add(this._onChildItemHandlerChanging),this._orderedItemHandlers=null},t.prototype._onItemHandlerRemoved=function(t){t.item.removeItemPropertyChanged(this._onChildItemHandlerPropertyChanged),t.item.getChangingEvent().remove(this._onChildItemHandlerChanging),t.item instanceof v&&t.item.getLayoutEvent().remove(this._onChildItemHandlerChanging),this._orderedItemHandlers=null},t.prototype._updateItemsOrder=function(t){if(this._item.layoutSettings instanceof o.AutoLayoutSettings){if(this._validateItemsOrder())return;if(null==this._item.getItemsOrder()){this._initSortedItemHandlers();var e=this._getSortedItemHandlers().map(function(t){return t.item.id});this._item.setItemsOrder(e)}}},t.prototype._initSortedItemHandlers=function(){var t=this._itemHandler.getTransformedRectangle(!1,!0).center,e=this._item.transform.angle,n=this._item.layoutSettings.orientation;return this._orderedItemHandlers=this._itemHandlers.toArray().sort(function(r,i){return function(t,e){return n===o.AutoLayoutOrientation.horizontal?t.bounds.left-e.bounds.left:t.bounds.top-e.bounds.top}(r.getTransformedRectangle(!1,!0).rotateAt(-e,t),i.getTransformedRectangle(!1,!0).rotateAt(-e,t))}),this._orderedItemHandlers},t.prototype._validateItemsOrder=function(){var t=this._item.getItemsOrder();if(null==t)return!1;if(t.length!==this._item.items.length)return!1;var e=this._item.items.select(function(t){return t.id}).toArray();return t.every(function(t){return e.includes(t)})},t.prototype._getSortedItemHandlers=function(){if(null!=this._orderedItemHandlers)return this._orderedItemHandlers;var t=this._item.getItemsOrder();if(!t)return null;var e=[],n=this._itemHandlers.toArray();if(n.length!=t.length)throw new Error("itemsOrder length does not match itemHandlers length");return t.forEach(function(t){var r=n.findIndex(function(e){return e.item.id==t});if(-1==r)throw new Error("itemsOrder: Element with id "+t+" was not found in itemHandlers");e.push(n[r]),n.splice(r,1)}),this._orderedItemHandlers=e,this._orderedItemHandlers},t.prototype.getOrderedItems=function(){var t=this._item.getItemsOrder();if(t){var e=this._item.items.toArray();return e.sort(function(e,n){return t.indexOf(e.id)-t.indexOf(n.id)}),e}return null},Object.defineProperty(t.prototype,"ignoreLayoutApply",{set:function(t){this._ignoreLayoutApply=t},enumerable:!0,configurable:!0}),t.prototype.applyLayout=function(t){if(void 0===t&&(t=!1),!this._disposed&&this._initialized&&!this._ignoreLayoutApply){this._ignoreLayoutApply=!0;try{var e=!this._history.isPaused();e&&this._history.pause(),this._itemHandler.canvas.pauseRedraw();var n=this._applyLayoutImpl(t);this._itemHandler.canvas.continueRedraw(!0),e&&(n?this._history.resume(!0,!1,!0):this._history.resume(!1,!1,!0)),this._layoutEvent.notify()}finally{this._ignoreLayoutApply=!1}}},t.prototype._applyLayoutImpl=function(t){var e,n=this;void 0===t&&(t=!1);var r=this._getSortedItemHandlers();if(null!=r&&0!=r.length){var o=this._itemHandler.rectangle,a=o.center,s=this._item.layoutSettings,l=s.alignItems,u=s.orientation,c=s.margin,h=s.anchorPoint,p=(this._item.transform.angle,o.toRectangleF()),f=this._getAnchorPoint(p,h,u),d=this._getOriginalPoint(p,l,u),y=[];(r=r.filter(function(t){return n._filterHiddenItems(t)})).forEach(function(t){var e=n._getItemHandlerPositionRect(t,o,d,l,u),r=n._getPositionRectOffset(u,p,e)+c;d=n._getOriginalPoint(p,l,u,r),y.push(e)}),y=this._applyAnchor(y,p,h,u);var g=!1;r.forEach(function(t){var e=y.shift(),r=n._setItemHandlerPosition(t,o,e);g=g||r});var m=this._itemHandlers.cast().where(this._filterHiddenItems);if(m.any()){var _=m.select(function(t){return t.getTransformedRectangle(!1,!0)}).aggregate(function(t,e){return i.RotatedRectangleF.union(t,e)});t&&(this._correctCenterPosition(_.center,a,r),_=m.select(function(t){return t.getTransformedRectangle(!1,!0)}).aggregate(function(t,e){return i.RotatedRectangleF.union(t,e)}));var v=this._getSourceRectangleByAnchorPoint(_,f,u,h);this._itemHandler.setSourceRectangle(v)}return null===(e=this._itemHandler.canvas)||void 0===e||e.updateTexts(),g}},t.prototype._getSourceRectangleByAnchorPoint=function(t,e,n,r){var a=t.angle,s=t.toRectangleF();if(n==o.AutoLayoutOrientation.horizontal)if(r==o.AutoLayoutAnchorPoint.start)s.left=e.x;else if(r==o.AutoLayoutAnchorPoint.center){var l=s.center.x-e.x;s.left-=l}else s.right=e.x;else if(r==o.AutoLayoutAnchorPoint.start)s.top=e.y;else if(r==o.AutoLayoutAnchorPoint.center){var u=s.center.y-e.y;s.top-=u}else s.bottom=e.y;return i.RotatedRectangleF.fromRectangleF(s,a)},t.prototype._getAnchorPoint=function(t,e,n){if(n==o.AutoLayoutOrientation.horizontal){var r=t.center.y;switch(e){case o.AutoLayoutAnchorPoint.start:return new i.PointF(t.left,r);case o.AutoLayoutAnchorPoint.center:return new i.PointF(t.center.x,r);case o.AutoLayoutAnchorPoint.end:return new i.PointF(t.right,r)}}else{var a=t.center.x;switch(e){case o.AutoLayoutAnchorPoint.start:return new i.PointF(a,t.top);case o.AutoLayoutAnchorPoint.center:return new i.PointF(a,t.center.y);case o.AutoLayoutAnchorPoint.end:return new i.PointF(a,t.bottom)}}},t.prototype._applyAnchor=function(t,e,n,r){if(0==t.length)return t;if(n==o.AutoLayoutAnchorPoint.start)return t;var a=function(t){var a=0,s=0,l=t.reduce(function(t,e){return i.RectangleF.union(t,e)});if(r==o.AutoLayoutOrientation.horizontal)if(n==o.AutoLayoutAnchorPoint.center)a=l.center.x-e.center.x;else{if(n!=o.AutoLayoutAnchorPoint.end)throw new Error("Invalid _applyAnchor operation. Orientation: '"+r+"' AnchorPoint: '"+n+"'");a=l.right-e.right}else if(n==o.AutoLayoutAnchorPoint.center)s=l.center.y-e.center.y;else{if(n!=o.AutoLayoutAnchorPoint.end)throw new Error("Invalid _applyAnchor operation. Orientation: '"+r+"' AnchorPoint: '"+n+"'");s=l.bottom-e.bottom}return new i.PointF(a,s)}(t);return t.map(function(t){return new i.RectangleF(t.left-a.x,t.top-a.y,t.width,t.height)})},t.prototype._correctCenterPosition=function(t,e,n){var r=this,o=e.x-t.x,i=e.y-t.y;n.forEach(function(t){var e=function(t){var n=t.getTransformedRectangle(!1,!0);return n.translate(o,i),r._setItemHandlerRectangle(t,n,e),!0};e(t)})},t.prototype._setItemHandlerPosition=function(t,e,n){var r=this,o=function(t){var i=t.getTransformedRectangle(!1,!0),a=i.clone();i.rotateAt(-e.angle,e.center);var s=i.bounds,l=n.left-s.left,u=n.top-s.top;return i.translate(l,u),i.rotateAt(e.angle,e.center),!a.equals(i)&&(r._setItemHandlerRectangle(t,i,o),!0)};return o(t)},t.prototype._setItemHandlerRectangle=function(t,e,n){var r=t.getBorderMargin();e.width-=2*r,e.height-=2*r,t instanceof v?t.setRectangle(e,!0,!0):(t.setRectangle(e),t instanceof h.l&&t.updateContentAndFrames(n),t instanceof a.a&&t.getNestedItemHandlers(!0).forEach(function(t){n(t)}))},t.prototype._getPositionRectOffset=function(t,e,n){return t==o.AutoLayoutOrientation.vertical?n.bottom-e.top:n.right-e.left},t.prototype._getItemHandlerPositionRect=function(t,e,n,r,i){var a=t.getTransformedRectangle(!1,!0);a.angle-=e.angle;var s=a.bounds,l=this._getOriginalPoint(s,r,i),u=n.x-l.x,c=n.y-l.y;return r===o.AutoLayoutAlignItems.none&&i!==o.AutoLayoutOrientation.horizontal||(s.left+=u),r===o.AutoLayoutAlignItems.none&&i!==o.AutoLayoutOrientation.vertical||(s.top+=c),s},t.prototype._getOriginalPoint=function(t,e,n,r){var a;return void 0===r&&(r=0),n==o.AutoLayoutOrientation.vertical?(a=e==o.AutoLayoutAlignItems.start||e==o.AutoLayoutAlignItems.none?new i.PointF(t.left,t.top):e==o.AutoLayoutAlignItems.center?new i.PointF(t.center.x,t.top):new i.PointF(t.right,t.top)).y+=r:(a=e==o.AutoLayoutAlignItems.start||e==o.AutoLayoutAlignItems.none?new i.PointF(t.left,t.top):e==o.AutoLayoutAlignItems.center?new i.PointF(t.left,t.center.y):new i.PointF(t.left,t.bottom)).x+=r,a},t}(),y=n(451),g=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},_=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},v=function(t){function e(e,n,r,o){void 0===o&&(o=null);var i=t.call(this,e,n,o)||this;return i._history=r,i._layoutEvent=new c.a,i._rectMap={},i._onChildItemChanged=function(t){var e=i.canvas.viewer.getHandler(t);if(e instanceof y.a){var n=e.rectangle;if(n.equals(i._rectMap[e.uniqueId]))return;i._rectMap[e.uniqueId]=n,i.applyLayout()}},i._onChildItemHandlerChanging=function(t){null!=i._layoutHandler&&i._layoutHandler instanceof d||i._resetSourceRectangle(),i.raiseChanging(i)},i._transformStarted=!1,i._transformedRectangle=null,i._onItemHandlerExitedEditMode=function(t){i.applyLayout()},i._onItemHandlerEnteredEditMode=function(t){i.applyLayout()},i._initSourceRectangle().then(function(){i._initLayoutHandler(),i.applyLayout(null)}),i._subscribeChildItemHandlers(),i}return g(e,t),e.prototype._isGroupHandler=function(){return!0},e.prototype._onItemPropertyChanged=function(t,e){switch(e){case"layoutSettings":this._initLayoutHandler()}},e.prototype._initLayoutHandler=function(){this.item.layoutSettings instanceof o.AutoLayoutSettings?this._layoutHandler instanceof d||(this._layoutHandler=new d(this.item,this.itemHandlers,this,this._history),this._layoutHandler.getLayoutEvent().add(this._onLayoutHandlerLayoutEvent.bind(this))):(null!=this._layoutHandler&&this._layoutHandler.dispose(),this._layoutHandler=null)},e.prototype.getLayoutEvent=function(){return this._layoutEvent},e.prototype._onLayoutHandlerLayoutEvent=function(){null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.updateButtonGroups(),this.getChangingEvent().notify(),this.updateViolationContainerPosition(),this.canvas.updateFloatingItemToolbar(this),this.canvas.redraw()),this._layoutEvent.notify()},e.prototype._initSourceRectangle=function(){return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return this.item.sourceRectangle&&!this.item.sourceRectangle.isEmpty()?[2]:this.canvas?[4,this._resetSourceRectangle()]:[2];case 1:return t.sent(),[2]}})})},e.prototype._resetSourceRectangle=function(){return m(this,void 0,void 0,function(){var t;return _(this,function(e){switch(e.label){case 0:return[4,this.waitUpdate()];case 1:return e.sent(),t=this.itemHandlers.cast().select(function(t){return t.rectangle}).aggregate(function(t,e){return i.RotatedRectangleF.union(t,e)}),this.setSourceRectangle(t),[2]}})})},e.prototype.waitUpdate=function(){return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.itemHandlers.toArray().map(function(t){return t.waitUpdate()}))];case 1:return t.sent(),[2]}})})},e.prototype._startTransform=function(){this._originalHeight=this.height,this._transformStarted=!0,this._layoutHandler&&(this._layoutHandler.ignoreLayoutApply=!0),t.prototype._startTransform.call(this)},e.prototype._onResized=function(){var e=this.height/this._originalHeight;return null!=this.item.layoutSettings&&this.item.layoutSettings instanceof o.AutoLayoutSettings&&(this.item.layoutSettings.margin*=e),t.prototype._onResized.call(this)},e.prototype._endTransform=function(e,n,r){return m(this,void 0,void 0,function(){var o;return _(this,function(i){return t.prototype._endTransform.call(this,e,n,r),null==this._transformedRectangle?(this._transformStarted=!1,this._layoutHandler&&(this._layoutHandler.ignoreLayoutApply=!1),[2]):(this.canvas.pauseRedraw(),o=this._transformedRectangle,this._transformedRectangle=null,this._transformStarted=!1,this._history.pause(),this.setSourceRectangle(o),this._layoutHandler&&(this._layoutHandler.ignoreLayoutApply=!1),this.applyLayout(null),this._history.resume(!0,!1,!0),this.canvas.continueRedraw(),[2])})})},e.prototype.drawChildHighlights=function(t){var e=this;null!=this._layoutHandler&&this.itemHandlers.toArray().filter(function(t){return e._layoutHandler._filterHiddenItems(t)}).forEach(function(e){return e.drawHighlight(t)})},Object.defineProperty(e.prototype,"_calculateRectangleFromChild",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype._getRectangle=function(){return this._transformedRectangle?this._transformedRectangle:t.prototype._getRectangle.call(this)},e.prototype.isEmpty=function(){var t=this.itemHandlers.where(function(t){var n=!1;return(t instanceof l.a||t instanceof y.a)&&!t.isLocked()?n=!0:t instanceof e&&(n=!0),n});return!!t.any()&&!t.any(function(t){return!t.isEmpty()})},e.prototype.isVisible=function(){return t.prototype.isVisible.call(this)&&!this.isEmpty()},e.prototype.applyLayout=function(t){t instanceof s.a&&t.editing||this.itemHandlers.length<2||(this.item.layoutSettings instanceof o.AutoLayoutSettings&&this._layoutHandler?this._layoutHandler.applyLayout():(this._resetSourceRectangle(),this._onLayoutHandlerLayoutEvent()))},e.prototype.getControlBounds=function(){return this.item.sourceRectangle?this.item.sourceRectangle:new i.RectangleF},e.prototype.setRectangle=function(e,n,r){void 0===r&&(r=!0),this._transformStarted?this._transformedRectangle=e.clone():(r&&t.prototype.setRectangle.call(this,e,n),this.setSourceRectangle(e))},e.prototype.setSourceRectangle=function(t){this.item.sourceRectangle=t.toRectangleF(),this.item.transform=new i.Transform(1,1,0,0,t.angle)},e.prototype.transformByMatrix=function(t){this.setRectangle(this.rectangle.transformByMatrix(t),!1,!0),1===t.scaleX&&1===t.scaleY||this._onResized(),this._transformChanged(),null!=this.canvas&&this.canvas.updateSelection()},e.prototype.getOrderedItems=function(){return this.item.layoutSettings instanceof o.AutoLayoutSettings&&null!=this._layoutHandler?this._layoutHandler.getOrderedItems():t.prototype.getOrderedItems.call(this)},e.prototype.generateAndApplyAutolayoutSettings=function(t,e,n,r){this.item.layoutSettings=o.LayoutItem.generateAutoLayoutSettings(this.itemHandlers.toArray().map(function(t){return t.getTransformedRectangle(!1,!0).bounds}),t,e,n,r)},e.prototype._onItemAdded=function(e){return m(this,void 0,void 0,function(){return _(this,function(n){switch(n.label){case 0:return t.prototype._onItemAdded.call(this,e),e.item instanceof o.BaseTextItem?[4,u.a.waitForItemsUpdated([e.item],this.canvas)]:[3,2];case 1:n.sent(),n.label=2;case 2:return this._subscribeChildItemChanges(e.item),this.applyLayout(this.itemHandlers.first(function(t){return t.item===e.item})),[2]}})})},e.prototype._onItemRemoved=function(e){t.prototype._onItemRemoved.call(this,e),this._unsubscribeChildItemChanges(e.item),this._layoutHandler?this._layoutHandler.onItemRemoved(e):this._resetSourceRectangle()},e.prototype._onItemHandlerAdded=function(e){return m(this,void 0,void 0,function(){return _(this,function(n){switch(n.label){case 0:return t.prototype._onItemHandlerAdded.call(this,e),this._layoutHandler instanceof d&&this._layoutHandler.onItemHandlersCollectionChanged(),[4,this.waitUpdate()];case 1:return n.sent(),this.applyLayout(),[2]}})})},e.prototype._onItemHandlerRemoved=function(e){t.prototype._onItemHandlerRemoved.call(this,e),this._layoutHandler instanceof d&&this._layoutHandler.onItemHandlersCollectionChanged()},e.prototype._subscribeChildItemHandlers=function(){var t=this;this.itemHandlers.forEach(function(e){return t._subscribeChildItemHandler(e)})},e.prototype._unsubscribeChildItemHandlers=function(){var t=this;this.itemHandlers.forEach(function(e){return t._unsubscribeChildItemHandler(e)})},e.prototype._subscribeChildItemHandler=function(t){t.getChangingEvent().add(this._onChildItemHandlerChanging),t instanceof y.a&&(t.exitedEditModeEvent.add(this._onItemHandlerExitedEditMode),t.enteredEditModeEvent.add(this._onItemHandlerEnteredEditMode))},e.prototype._unsubscribeChildItemHandler=function(t){t.getChangingEvent().remove(this._onChildItemHandlerChanging),t instanceof y.a&&(t.exitedEditModeEvent.remove(this._onItemHandlerExitedEditMode),t.enteredEditModeEvent.remove(this._onItemHandlerEnteredEditMode))},e.prototype._unsubscribeChildItems=function(){var t=this;this.item.items.forEach(function(e){return t._unsubscribeChildItemChanges(e)})},e.prototype._subscribeChildItems=function(){var t=this;this.item.items.forEach(function(e){return t._subscribeChildItemChanges(e)})},e.prototype._unsubscribeChildItemChanges=function(t){t.getItemChangedEvent().remove(this._onChildItemChanged)},e.prototype._subscribeChildItemChanges=function(t){t.getItemChangedEvent().add(this._onChildItemChanged)},e.prototype._onRemovedFromCanvas=function(e){return m(this,void 0,void 0,function(){return _(this,function(n){return this._unsubscribeChildItems(),this._unsubscribeChildItemHandlers(),null!=this._layoutHandler&&(this._layoutHandler.dispose(),this._layoutHandler=null),t.prototype._onRemovedFromCanvas.call(this,e),[2]})})},e.prototype._onAddedOnCanvas=function(e){return m(this,void 0,void 0,function(){return _(this,function(n){switch(n.label){case 0:return t.prototype._onAddedOnCanvas.call(this,e),this._subscribeChildItems(),this._initLayoutHandler(),[4,this._initSourceRectangle()];case 1:return n.sent(),[2]}})})},e.prototype.drawItemHandler=function(e){this.isEmpty()||t.prototype.drawItemHandler.call(this,e)},Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e.prototype.isChildVisible=function(t){return!(t instanceof l.a||t instanceof y.a)||!t.isEmpty()},e.typeName="LayoutItemHandler",e}(a.a)},532:function(t,e,n){"use strict";(function(t){var r=n(740),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.a.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();e.a=s}).call(this,n(174)(t))},533:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return i}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return s});var r="The item already belongs to this collection, or to another collection.",o="The item was not found in this collection.",i="setPoint: Index out of range.",a="addPoint: Index out of range.",s="removePoint: Index out of range."},534:function(t,e,n){var r;!function(o,i){var a={Identity:function(t){return t},True:function(){return!0},Blank:function(){}},s=typeof!0,l="number",u="string",c=typeof{},h="undefined",p="function",f={"":a.Identity},d={createLambda:function(t){if(null==t)return a.Identity;if(typeof t===u){var e=f[t];if(null!=e)return e;if(-1===t.indexOf("=>")){for(var n,r=new RegExp("[$]+","g"),o=0;null!=(n=r.exec(t));){var i=n[0].length;i>o&&(o=i)}for(var s=[],l=1;l<=o;l++){for(var c="",h=0;h<l;h++)c+="$";s.push(c)}var p=Array.prototype.join.call(s,",");return e=new Function(p,"return "+t),f[t]=e,e}var d=t.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);return e=new Function(d[1],"return "+d[2]),f[t]=e,e}return t},isIEnumerable:function(t){if(typeof Enumerator!==h)try{return new Enumerator(t),!0}catch(t){}return!1},defineProperty:null!=Object.defineProperties?function(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n})}:function(t,e,n){t[e]=n},compare:function(t,e){return t===e?0:t>e?1:-1},dispose:function(t){null!=t&&t.dispose()},hasNativeIteratorSupport:function(){return"undefined"!=typeof Symbol&&void 0!==Symbol.iterator}},y=0,g=1,m=2,_=function(t,e,n){var r=new v,o=y;this.current=r.current,this.moveNext=function(){try{switch(o){case y:o=g,t();case g:return!!e.apply(r)||(this.dispose(),!1);case m:return!1}}catch(t){throw this.dispose(),t}},this.dispose=function(){if(o==g)try{n()}finally{o=m}}},v=function(){var t=null;this.current=function(){return t},this.yieldReturn=function(e){return t=e,!0},this.yieldBreak=function(){return!1}},b=function(t){this.getEnumerator=t};(b.Utils={}).createLambda=function(t){return d.createLambda(t)},b.Utils.createEnumerable=function(t){return new b(t)},b.Utils.createEnumerator=function(t,e,n){return new _(t,e,n)},b.Utils.extendTo=function(t){var e,n=t.prototype;for(var r in t===Array?(e=x.prototype,d.defineProperty(n,"getSource",function(){return this})):(e=b.prototype,d.defineProperty(n,"getEnumerator",function(){return b.from(this).getEnumerator()})),e){var o=e[r];n[r]!=o&&(null!=n[r]&&n[r+="ByLinq"]==o||o instanceof Function&&d.defineProperty(n,r,o))}},b.choice=function(){var t=arguments;return new b(function(){return new _(function(){t=t[0]instanceof Array?t[0]:null!=t[0].getEnumerator?t[0].toArray():t},function(){return this.yieldReturn(t[Math.floor(Math.random()*t.length)])},a.Blank)})},b.cycle=function(){var t=arguments;return new b(function(){var e=0;return new _(function(){t=t[0]instanceof Array?t[0]:null!=t[0].getEnumerator?t[0].toArray():t},function(){return e>=t.length&&(e=0),this.yieldReturn(t[e++])},a.Blank)})},b.empty=function(){return new b(function(){return new _(a.Blank,function(){return!1},a.Blank)})},b.from=function(t){if(null==t)return b.empty();if(t instanceof b)return t;if(typeof t==l||typeof t==s)return b.repeat(t,1);if(typeof t==u)return new b(function(){var e=0;return new _(a.Blank,function(){return e<t.length&&this.yieldReturn(t.charAt(e++))},a.Blank)});if(typeof t!=p){if(typeof t.length==l)return new x(t);if("undefined"!=typeof Symbol&&void 0!==t[Symbol.iterator])return new b(function(){return new _(a.Blank,function(){var e=t.next();return!e.done&&this.yieldReturn(e.value)},a.Blank)});if(!(t instanceof Object)&&d.isIEnumerable(t))return new b(function(){var e,n=!0;return new _(function(){e=new Enumerator(t)},function(){return n?n=!1:e.moveNext(),!e.atEnd()&&this.yieldReturn(e.item())},a.Blank)});if(typeof Windows===c&&typeof t.first===p)return new b(function(){var e,n=!0;return new _(function(){e=t.first()},function(){return n?n=!1:e.moveNext(),e.hasCurrent?this.yieldReturn(e.current):this.yieldBreak()},a.Blank)})}return new b(function(){var e=[],n=0;return new _(function(){for(var n in t){var r=t[n];r instanceof Function||!Object.prototype.hasOwnProperty.call(t,n)||e.push({key:n,value:r})}},function(){return n<e.length&&this.yieldReturn(e[n++])},a.Blank)})},b.make=function(t){return b.repeat(t,1)},b.matches=function(t,e,n){return null==n&&(n=""),e instanceof RegExp&&(n+=e.ignoreCase?"i":"",n+=e.multiline?"m":"",e=e.source),-1===n.indexOf("g")&&(n+="g"),new b(function(){var r;return new _(function(){r=new RegExp(e,n)},function(){var e=r.exec(t);return!!e&&this.yieldReturn(e)},a.Blank)})},b.range=function(t,e,n){return null==n&&(n=1),new b(function(){var r,o=0;return new _(function(){r=t-n},function(){return o++<e?this.yieldReturn(r+=n):this.yieldBreak()},a.Blank)})},b.rangeDown=function(t,e,n){return null==n&&(n=1),new b(function(){var r,o=0;return new _(function(){r=t+n},function(){return o++<e?this.yieldReturn(r-=n):this.yieldBreak()},a.Blank)})},b.rangeTo=function(t,e,n){return null==n&&(n=1),new b(t<e?function(){var r;return new _(function(){r=t-n},function(){var t=r+=n;return t<=e?this.yieldReturn(t):this.yieldBreak()},a.Blank)}:function(){var r;return new _(function(){r=t+n},function(){var t=r-=n;return t>=e?this.yieldReturn(t):this.yieldBreak()},a.Blank)})},b.repeat=function(t,e){return null!=e?b.repeat(t).take(e):new b(function(){return new _(a.Blank,function(){return this.yieldReturn(t)},a.Blank)})},b.repeatWithFinalize=function(t,e){return t=d.createLambda(t),e=d.createLambda(e),new b(function(){var n;return new _(function(){n=t()},function(){return this.yieldReturn(n)},function(){null!=n&&(e(n),n=null)})})},b.generate=function(t,e){return null!=e?b.generate(t).take(e):(t=d.createLambda(t),new b(function(){return new _(a.Blank,function(){return this.yieldReturn(t())},a.Blank)}))},b.toInfinity=function(t,e){return null==t&&(t=0),null==e&&(e=1),new b(function(){var n;return new _(function(){n=t-e},function(){return this.yieldReturn(n+=e)},a.Blank)})},b.toNegativeInfinity=function(t,e){return null==t&&(t=0),null==e&&(e=1),new b(function(){var n;return new _(function(){n=t+e},function(){return this.yieldReturn(n-=e)},a.Blank)})},b.unfold=function(t,e){return e=d.createLambda(e),new b(function(){var n,r=!0;return new _(a.Blank,function(){return r?(r=!1,n=t,this.yieldReturn(n)):(n=e(n),this.yieldReturn(n))},a.Blank)})},b.defer=function(t){return new b(function(){var e;return new _(function(){e=b.from(t()).getEnumerator()},function(){return e.moveNext()?this.yieldReturn(e.current()):this.yieldBreak()},function(){d.dispose(e)})})},b.prototype.traverseBreadthFirst=function(t,e){var n=this;return t=d.createLambda(t),e=d.createLambda(e),new b(function(){var r,o=0,i=[];return new _(function(){r=n.getEnumerator()},function(){for(;;){if(r.moveNext())return i.push(r.current()),this.yieldReturn(e(r.current(),o));var n=b.from(i).selectMany(function(e){return t(e)});if(!n.any())return!1;o++,i=[],d.dispose(r),r=n.getEnumerator()}},function(){d.dispose(r)})})},b.prototype.traverseDepthFirst=function(t,e){var n=this;return t=d.createLambda(t),e=d.createLambda(e),new b(function(){var r,o=[];return new _(function(){r=n.getEnumerator()},function(){for(;;){if(r.moveNext()){var n=e(r.current(),o.length);return o.push(r),r=b.from(t(r.current())).getEnumerator(),this.yieldReturn(n)}if(o.length<=0)return!1;d.dispose(r),r=o.pop()}},function(){try{d.dispose(r)}finally{b.from(o).forEach(function(t){t.dispose()})}})})},b.prototype.flatten=function(){var t=this;return new b(function(){var e,n=null;return new _(function(){e=t.getEnumerator()},function(){for(;;){if(null!=n){if(n.moveNext())return this.yieldReturn(n.current());n=null}if(e.moveNext()){if(e.current()instanceof Array){d.dispose(n),n=b.from(e.current()).selectMany(a.Identity).flatten().getEnumerator();continue}return this.yieldReturn(e.current())}return!1}},function(){try{d.dispose(e)}finally{d.dispose(n)}})})},b.prototype.pairwise=function(t){var e=this;return t=d.createLambda(t),new b(function(){var n;return new _(function(){(n=e.getEnumerator()).moveNext()},function(){var e=n.current();return!!n.moveNext()&&this.yieldReturn(t(e,n.current()))},function(){d.dispose(n)})})},b.prototype.scan=function(t,e){var n;null==e?(e=d.createLambda(t),n=!1):(e=d.createLambda(e),n=!0);var r=this;return new b(function(){var o,i,a=!0;return new _(function(){o=r.getEnumerator()},function(){if(a){if(a=!1,n)return this.yieldReturn(i=t);if(o.moveNext())return this.yieldReturn(i=o.current())}return!!o.moveNext()&&this.yieldReturn(i=e(i,o.current()))},function(){d.dispose(o)})})},b.prototype.select=function(t){if((t=d.createLambda(t)).length<=1)return new I(this,null,t);var e=this;return new b(function(){var n,r=0;return new _(function(){n=e.getEnumerator()},function(){return!!n.moveNext()&&this.yieldReturn(t(n.current(),r++))},function(){d.dispose(n)})})},b.prototype.selectMany=function(t,e){var n=this;return t=d.createLambda(t),null==e&&(e=function(t,e){return e}),e=d.createLambda(e),new b(function(){var r,o=void 0,i=0;return new _(function(){r=n.getEnumerator()},function(){if(void 0===o&&!r.moveNext())return!1;do{if(null==o){var n=t(r.current(),i++);o=b.from(n).getEnumerator()}if(o.moveNext())return this.yieldReturn(e(r.current(),o.current()));d.dispose(o),o=null}while(r.moveNext());return!1},function(){try{d.dispose(r)}finally{d.dispose(o)}})})},b.prototype.where=function(t){if((t=d.createLambda(t)).length<=1)return new O(this,t);var e=this;return new b(function(){var n,r=0;return new _(function(){n=e.getEnumerator()},function(){for(;n.moveNext();)if(t(n.current(),r++))return this.yieldReturn(n.current());return!1},function(){d.dispose(n)})})},b.prototype.choose=function(t){t=d.createLambda(t);var e=this;return new b(function(){var n,r=0;return new _(function(){n=e.getEnumerator()},function(){for(;n.moveNext();){var e=t(n.current(),r++);if(null!=e)return this.yieldReturn(e)}return this.yieldBreak()},function(){d.dispose(n)})})},b.prototype.ofType=function(t){var e;switch(t){case Number:e=l;break;case String:e=u;break;case Boolean:e=s;break;case Function:e=p;break;default:e=null}return null===e?this.where(function(e){return e instanceof t}):this.where(function(t){return typeof t===e})},b.prototype.zip=function(){var t=arguments,e=d.createLambda(arguments[arguments.length-1]),n=this;if(2==arguments.length){var r=arguments[0];return new b(function(){var t,o,i=0;return new _(function(){t=n.getEnumerator(),o=b.from(r).getEnumerator()},function(){return!(!t.moveNext()||!o.moveNext())&&this.yieldReturn(e(t.current(),o.current(),i++))},function(){try{d.dispose(t)}finally{d.dispose(o)}})})}return new b(function(){var r,o=0;return new _(function(){var e=b.make(n).concat(b.from(t).takeExceptLast().select(b.from)).select(function(t){return t.getEnumerator()}).toArray();r=b.from(e)},function(){if(r.all(function(t){return t.moveNext()})){var t=r.select(function(t){return t.current()}).toArray();return t.push(o++),this.yieldReturn(e.apply(null,t))}return this.yieldBreak()},function(){b.from(r).forEach(d.dispose)})})},b.prototype.merge=function(){var t=arguments,e=this;return new b(function(){var n,r=-1;return new _(function(){n=b.make(e).concat(b.from(t).select(b.from)).select(function(t){return t.getEnumerator()}).toArray()},function(){for(;n.length>0;){r=r>=n.length-1?0:r+1;var t=n[r];if(t.moveNext())return this.yieldReturn(t.current());t.dispose(),n.splice(r--,1)}return this.yieldBreak()},function(){b.from(n).forEach(d.dispose)})})},b.prototype.join=function(t,e,n,r,o){e=d.createLambda(e),n=d.createLambda(n),r=d.createLambda(r),o=d.createLambda(o);var i=this;return new b(function(){var s,l,u=null,c=0;return new _(function(){s=i.getEnumerator(),l=b.from(t).toLookup(n,a.Identity,o)},function(){for(;;){if(null!=u){var t=u[c++];if(void 0!==t)return this.yieldReturn(r(s.current(),t));t=null,c=0}if(!s.moveNext())return!1;var n=e(s.current());u=l.get(n).toArray()}},function(){d.dispose(s)})})},b.prototype.groupJoin=function(t,e,n,r,o){e=d.createLambda(e),n=d.createLambda(n),r=d.createLambda(r),o=d.createLambda(o);var i=this;return new b(function(){var s=i.getEnumerator(),l=null;return new _(function(){s=i.getEnumerator(),l=b.from(t).toLookup(n,a.Identity,o)},function(){if(s.moveNext()){var t=l.get(e(s.current()));return this.yieldReturn(r(s.current(),t))}return!1},function(){d.dispose(s)})})},b.prototype.all=function(t){t=d.createLambda(t);var e=!0;return this.forEach(function(n){if(!t(n))return e=!1,!1}),e},b.prototype.any=function(t){t=d.createLambda(t);var e=this.getEnumerator();try{if(0==arguments.length)return e.moveNext();for(;e.moveNext();)if(t(e.current()))return!0;return!1}finally{d.dispose(e)}},b.prototype.isEmpty=function(){return!this.any()},b.prototype.concat=function(){var t=this;if(1==arguments.length){var e=arguments[0];return new b(function(){var n,r;return new _(function(){n=t.getEnumerator()},function(){if(null==r){if(n.moveNext())return this.yieldReturn(n.current());r=b.from(e).getEnumerator()}return!!r.moveNext()&&this.yieldReturn(r.current())},function(){try{d.dispose(n)}finally{d.dispose(r)}})})}var n=arguments;return new b(function(){var e;return new _(function(){e=b.make(t).concat(b.from(n).select(b.from)).select(function(t){return t.getEnumerator()}).toArray()},function(){for(;e.length>0;){var t=e[0];if(t.moveNext())return this.yieldReturn(t.current());t.dispose(),e.splice(0,1)}return this.yieldBreak()},function(){b.from(e).forEach(d.dispose)})})},b.prototype.insert=function(t,e){var n=this;return new b(function(){var r,o,i=0,a=!1;return new _(function(){r=n.getEnumerator(),o=b.from(e).getEnumerator()},function(){return i==t&&o.moveNext()?(a=!0,this.yieldReturn(o.current())):r.moveNext()?(i++,this.yieldReturn(r.current())):!(a||!o.moveNext())&&this.yieldReturn(o.current())},function(){try{d.dispose(r)}finally{d.dispose(o)}})})},b.prototype.alternate=function(t){var e=this;return new b(function(){var n,r,o,i;return new _(function(){o=t instanceof Array||null!=t.getEnumerator?b.from(b.from(t).toArray()):b.make(t),(r=e.getEnumerator()).moveNext()&&(n=r.current())},function(){for(;;){if(null!=i){if(i.moveNext())return this.yieldReturn(i.current());i=null}if(null!=n||!r.moveNext()){if(null!=n){var t=n;return n=null,this.yieldReturn(t)}return this.yieldBreak()}n=r.current(),i=o.getEnumerator()}},function(){try{d.dispose(r)}finally{d.dispose(i)}})})},b.prototype.contains=function(t,e){e=d.createLambda(e);var n=this.getEnumerator();try{for(;n.moveNext();)if(e(n.current())===t)return!0;return!1}finally{d.dispose(n)}},b.prototype.defaultIfEmpty=function(t){var e=this;return void 0===t&&(t=null),new b(function(){var n,r=!0;return new _(function(){n=e.getEnumerator()},function(){return n.moveNext()?(r=!1,this.yieldReturn(n.current())):!!r&&(r=!1,this.yieldReturn(t))},function(){d.dispose(n)})})},b.prototype.distinct=function(t){return this.except(b.empty(),t)},b.prototype.distinctUntilChanged=function(t){t=d.createLambda(t);var e=this;return new b(function(){var n,r,o;return new _(function(){n=e.getEnumerator()},function(){for(;n.moveNext();){var e=t(n.current());if(o)return o=!1,r=e,this.yieldReturn(n.current());if(r!==e)return r=e,this.yieldReturn(n.current())}return this.yieldBreak()},function(){d.dispose(n)})})},b.prototype.except=function(t,e){e=d.createLambda(e);var n=this;return new b(function(){var r,o;return new _(function(){r=n.getEnumerator(),o=new S(e),b.from(t).forEach(function(t){o.add(t)})},function(){for(;r.moveNext();){var t=r.current();if(!o.contains(t))return o.add(t),this.yieldReturn(t)}return!1},function(){d.dispose(r)})})},b.prototype.intersect=function(t,e){e=d.createLambda(e);var n=this;return new b(function(){var r,o,i;return new _(function(){r=n.getEnumerator(),o=new S(e),b.from(t).forEach(function(t){o.add(t)}),i=new S(e)},function(){for(;r.moveNext();){var t=r.current();if(!i.contains(t)&&o.contains(t))return i.add(t),this.yieldReturn(t)}return!1},function(){d.dispose(r)})})},b.prototype.sequenceEqual=function(t,e){e=d.createLambda(e);var n=this.getEnumerator();try{var r=b.from(t).getEnumerator();try{for(;n.moveNext();)if(!r.moveNext()||e(n.current())!==e(r.current()))return!1;return!r.moveNext()}finally{d.dispose(r)}}finally{d.dispose(n)}},b.prototype.union=function(t,e){e=d.createLambda(e);var n=this;return new b(function(){var r,o,i;return new _(function(){r=n.getEnumerator(),i=new S(e)},function(){var e;if(void 0===o){for(;r.moveNext();)if(e=r.current(),!i.contains(e))return i.add(e),this.yieldReturn(e);o=b.from(t).getEnumerator()}for(;o.moveNext();)if(e=o.current(),!i.contains(e))return i.add(e),this.yieldReturn(e);return!1},function(){try{d.dispose(r)}finally{d.dispose(o)}})})},b.prototype.orderBy=function(t){return new w(this,t,!1)},b.prototype.orderByDescending=function(t){return new w(this,t,!0)},b.prototype.reverse=function(){var t=this;return new b(function(){var e,n;return new _(function(){e=t.toArray(),n=e.length},function(){return n>0&&this.yieldReturn(e[--n])},a.Blank)})},b.prototype.shuffle=function(){var t=this;return new b(function(){var e;return new _(function(){e=t.toArray()},function(){if(e.length>0){var t=Math.floor(Math.random()*e.length);return this.yieldReturn(e.splice(t,1)[0])}return!1},a.Blank)})},b.prototype.weightedSample=function(t){t=d.createLambda(t);var e=this;return new b(function(){var n,r=0;return new _(function(){n=e.choose(function(e){var n=t(e);return n<=0?null:{value:e,bound:r+=n}}).toArray()},function(){if(n.length>0){for(var t=Math.floor(Math.random()*r)+1,e=-1,o=n.length;o-e>1;){var i=Math.floor((e+o)/2);n[i].bound>=t?o=i:e=i}return this.yieldReturn(n[o].value)}return this.yieldBreak()},a.Blank)})},b.prototype.groupBy=function(t,e,n,r){var o=this;return t=d.createLambda(t),e=d.createLambda(e),null!=n&&(n=d.createLambda(n)),r=d.createLambda(r),new b(function(){var i;return new _(function(){i=o.toLookup(t,e,r).toEnumerable().getEnumerator()},function(){for(;i.moveNext();)return null==n?this.yieldReturn(i.current()):this.yieldReturn(n(i.current().key(),i.current()));return!1},function(){d.dispose(i)})})},b.prototype.partitionBy=function(t,e,n,r){var o,i=this;return t=d.createLambda(t),e=d.createLambda(e),r=d.createLambda(r),null==n?(o=!1,n=function(t,e){return new j(t,e)}):(o=!0,n=d.createLambda(n)),new b(function(){var a,s,l,u=[];return new _(function(){(a=i.getEnumerator()).moveNext()&&(s=t(a.current()),l=r(s),u.push(e(a.current())))},function(){for(var i;1==(i=a.moveNext())&&l===r(t(a.current()));)u.push(e(a.current()));if(u.length>0){var c=n(s,o?b.from(u):u);return i?(s=t(a.current()),l=r(s),u=[e(a.current())]):u=[],this.yieldReturn(c)}return!1},function(){d.dispose(a)})})},b.prototype.buffer=function(t){var e=this;return new b(function(){var n;return new _(function(){n=e.getEnumerator()},function(){for(var e=[],r=0;n.moveNext();)if(e.push(n.current()),++r>=t)return this.yieldReturn(e);return e.length>0&&this.yieldReturn(e)},function(){d.dispose(n)})})},b.prototype.aggregate=function(t,e,n){return(n=d.createLambda(n))(this.scan(t,e,n).last())},b.prototype.average=function(t){t=d.createLambda(t);var e=0,n=0;return this.forEach(function(r){e+=t(r),++n}),e/n},b.prototype.count=function(t){t=null==t?a.True:d.createLambda(t);var e=0;return this.forEach(function(n,r){t(n,r)&&++e}),e},b.prototype.max=function(t){return null==t&&(t=a.Identity),this.select(t).aggregate(function(t,e){return t>e?t:e})},b.prototype.min=function(t){return null==t&&(t=a.Identity),this.select(t).aggregate(function(t,e){return t<e?t:e})},b.prototype.maxBy=function(t){return t=d.createLambda(t),this.aggregate(function(e,n){return t(e)>t(n)?e:n})},b.prototype.minBy=function(t){return t=d.createLambda(t),this.aggregate(function(e,n){return t(e)<t(n)?e:n})},b.prototype.sum=function(t){return null==t&&(t=a.Identity),this.select(t).aggregate(0,function(t,e){return t+e})},b.prototype.elementAt=function(t){var e,n=!1;if(this.forEach(function(r,o){if(o==t)return e=r,n=!0,!1}),!n)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return e},b.prototype.elementAtOrDefault=function(t,e){var n;void 0===e&&(e=null);var r=!1;return this.forEach(function(e,o){if(o==t)return n=e,r=!0,!1}),r?n:e},b.prototype.first=function(t){if(null!=t)return this.where(t).first();var e,n=!1;if(this.forEach(function(t){return e=t,n=!0,!1}),!n)throw new Error("first:No element satisfies the condition.");return e},b.prototype.firstOrDefault=function(t,e){if(void 0!==t){if(typeof t===p||typeof d.createLambda(t)===p)return this.where(t).firstOrDefault(void 0,e);e=t}var n,r=!1;return this.forEach(function(t){return n=t,r=!0,!1}),r?n:e},b.prototype.last=function(t){if(null!=t)return this.where(t).last();var e,n=!1;if(this.forEach(function(t){n=!0,e=t}),!n)throw new Error("last:No element satisfies the condition.");return e},b.prototype.lastOrDefault=function(t,e){if(void 0!==t){if(typeof t===p||typeof d.createLambda(t)===p)return this.where(t).lastOrDefault(void 0,e);e=t}var n,r=!1;return this.forEach(function(t){r=!0,n=t}),r?n:e},b.prototype.single=function(t){if(null!=t)return this.where(t).single();var e,n=!1;if(this.forEach(function(t){if(n)throw new Error("single:sequence contains more than one element.");n=!0,e=t}),!n)throw new Error("single:No element satisfies the condition.");return e},b.prototype.singleOrDefault=function(t,e){if(void 0===e&&(e=null),null!=t)return this.where(t).singleOrDefault(null,e);var n,r=!1;return this.forEach(function(t){if(r)throw new Error("single:sequence contains more than one element.");r=!0,n=t}),r?n:e},b.prototype.skip=function(t){var e=this;return new b(function(){var n,r=0;return new _(function(){for(n=e.getEnumerator();r++<t&&n.moveNext(););},function(){return!!n.moveNext()&&this.yieldReturn(n.current())},function(){d.dispose(n)})})},b.prototype.skipWhile=function(t){t=d.createLambda(t);var e=this;return new b(function(){var n,r=0,o=!1;return new _(function(){n=e.getEnumerator()},function(){for(;!o;){if(!n.moveNext())return!1;if(!t(n.current(),r++))return o=!0,this.yieldReturn(n.current())}return!!n.moveNext()&&this.yieldReturn(n.current())},function(){d.dispose(n)})})},b.prototype.take=function(t){var e=this;return new b(function(){var n,r=0;return new _(function(){n=e.getEnumerator()},function(){return!!(r++<t&&n.moveNext())&&this.yieldReturn(n.current())},function(){d.dispose(n)})})},b.prototype.takeWhile=function(t){t=d.createLambda(t);var e=this;return new b(function(){var n,r=0;return new _(function(){n=e.getEnumerator()},function(){return!(!n.moveNext()||!t(n.current(),r++))&&this.yieldReturn(n.current())},function(){d.dispose(n)})})},b.prototype.takeExceptLast=function(t){null==t&&(t=1);var e=this;return new b(function(){if(t<=0)return e.getEnumerator();var n,r=[];return new _(function(){n=e.getEnumerator()},function(){for(;n.moveNext();){if(r.length==t)return r.push(n.current()),this.yieldReturn(r.shift());r.push(n.current())}return!1},function(){d.dispose(n)})})},b.prototype.takeFromLast=function(t){if(t<=0||null==t)return b.empty();var e=this;return new b(function(){var n,r,o=[];return new _(function(){n=e.getEnumerator()},function(){for(;n.moveNext();)o.length==t&&o.shift(),o.push(n.current());return null==r&&(r=b.from(o).getEnumerator()),!!r.moveNext()&&this.yieldReturn(r.current())},function(){d.dispose(r)})})},b.prototype.indexOf=function(t){var e=null;return typeof t===p?this.forEach(function(n,r){if(t(n,r))return e=r,!1}):this.forEach(function(n,r){if(n===t)return e=r,!1}),null!==e?e:-1},b.prototype.lastIndexOf=function(t){var e=-1;return typeof t===p?this.forEach(function(n,r){t(n,r)&&(e=r)}):this.forEach(function(n,r){n===t&&(e=r)}),e},b.prototype.cast=function(){return this},b.prototype.asEnumerable=function(){return b.from(this)},b.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},b.prototype.toLookup=function(t,e,n){t=d.createLambda(t),e=d.createLambda(e),n=d.createLambda(n);var r=new S(n);return this.forEach(function(n){var o=t(n),i=e(n),a=r.get(o);void 0!==a?a.push(i):r.add(o,[i])}),new T(r)},b.prototype.toObject=function(t,e){t=d.createLambda(t),e=d.createLambda(e);var n={};return this.forEach(function(r){n[t(r)]=e(r)}),n},b.prototype.toDictionary=function(t,e,n){t=d.createLambda(t),e=d.createLambda(e),n=d.createLambda(n);var r=new S(n);return this.forEach(function(n){r.add(t(n),e(n))}),r},b.prototype.toJSONString=function(t,e){if(typeof JSON===h||null==JSON.stringify)throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js");return JSON.stringify(this.toArray(),t,e)},b.prototype.toJoinedString=function(t,e){return null==t&&(t=""),null==e&&(e=a.Identity),this.select(e).toArray().join(t)},b.prototype.doAction=function(t){var e=this;return t=d.createLambda(t),new b(function(){var n,r=0;return new _(function(){n=e.getEnumerator()},function(){return!!n.moveNext()&&(t(n.current(),r++),this.yieldReturn(n.current()))},function(){d.dispose(n)})})},b.prototype.forEach=function(t){t=d.createLambda(t);var e=0,n=this.getEnumerator();try{for(;n.moveNext()&&!1!==t(n.current(),e++););}finally{d.dispose(n)}},b.prototype.write=function(t,e){null==t&&(t=""),e=d.createLambda(e);var n=!0;this.forEach(function(r){n?n=!1:document.write(t),document.write(e(r))})},b.prototype.writeLine=function(t){t=d.createLambda(t),this.forEach(function(e){document.writeln(t(e)+"<br />")})},b.prototype.force=function(){var t=this.getEnumerator();try{for(;t.moveNext(););}finally{d.dispose(t)}},b.prototype.letBind=function(t){t=d.createLambda(t);var e=this;return new b(function(){var n;return new _(function(){n=b.from(t(e)).getEnumerator()},function(){return!!n.moveNext()&&this.yieldReturn(n.current())},function(){d.dispose(n)})})},b.prototype.share=function(){var t,e=this,n=!1;return new P(function(){return new _(function(){null==t&&(t=e.getEnumerator())},function(){if(n)throw new Error("enumerator is disposed");return!!t.moveNext()&&this.yieldReturn(t.current())},a.Blank)},function(){n=!0,d.dispose(t)})},b.prototype.memoize=function(){var t,e,n=this,r=!1;return new P(function(){var o=-1;return new _(function(){null==e&&(e=n.getEnumerator(),t=[])},function(){if(r)throw new Error("enumerator is disposed");return o++,t.length<=o?!!e.moveNext()&&this.yieldReturn(t[o]=e.current()):this.yieldReturn(t[o])},a.Blank)},function(){r=!0,d.dispose(e),t=null})},d.hasNativeIteratorSupport()&&(b.prototype[Symbol.iterator]=function(){return{enumerator:this.getEnumerator(),next:function(){return this.enumerator.moveNext()?{done:!1,value:this.enumerator.current()}:{done:!0}}}}),b.prototype.catchError=function(t){t=d.createLambda(t);var e=this;return new b(function(){var n;return new _(function(){n=e.getEnumerator()},function(){try{return!!n.moveNext()&&this.yieldReturn(n.current())}catch(e){return t(e),!1}},function(){d.dispose(n)})})},b.prototype.finallyAction=function(t){t=d.createLambda(t);var e=this;return new b(function(){var n;return new _(function(){n=e.getEnumerator()},function(){return!!n.moveNext()&&this.yieldReturn(n.current())},function(){try{d.dispose(n)}finally{t()}})})},b.prototype.log=function(t){return t=d.createLambda(t),this.doAction(function(e){typeof console!==h&&console.log(t(e))})},b.prototype.trace=function(t,e){return null==t&&(t="Trace"),e=d.createLambda(e),this.doAction(function(n){typeof console!==h&&console.log(t,e(n))})};var w=function(t,e,n,r){this.source=t,this.keySelector=d.createLambda(e),this.descending=n,this.parent=r};w.prototype=new b,w.prototype.createOrderedEnumerable=function(t,e){return new w(this.source,t,e,this)},w.prototype.thenBy=function(t){return this.createOrderedEnumerable(t,!1)},w.prototype.thenByDescending=function(t){return this.createOrderedEnumerable(t,!0)},w.prototype.getEnumerator=function(){var t,e,n=this,r=0;return new _(function(){t=[],e=[],n.source.forEach(function(n,r){t.push(n),e.push(r)});var r=C.create(n,null);r.GenerateKeys(t),e.sort(function(t,e){return r.compare(t,e)})},function(){return r<e.length&&this.yieldReturn(t[e[r++]])},a.Blank)};var C=function(t,e,n){this.keySelector=t,this.descending=e,this.child=n,this.keys=null};C.create=function(t,e){var n=new C(t.keySelector,t.descending,e);return null!=t.parent?C.create(t.parent,n):n},C.prototype.GenerateKeys=function(t){for(var e=t.length,n=this.keySelector,r=new Array(e),o=0;o<e;o++)r[o]=n(t[o]);this.keys=r,null!=this.child&&this.child.GenerateKeys(t)},C.prototype.compare=function(t,e){var n=d.compare(this.keys[t],this.keys[e]);return 0==n?null!=this.child?this.child.compare(t,e):d.compare(t,e):this.descending?-n:n};var P=function(t,e){this.dispose=e,b.call(this,t)};P.prototype=new b;var x=function(t){this.getSource=function(){return t}};x.prototype=new b,x.prototype.any=function(t){return null==t?this.getSource().length>0:b.prototype.any.apply(this,arguments)},x.prototype.count=function(t){return null==t?this.getSource().length:b.prototype.count.apply(this,arguments)},x.prototype.elementAt=function(t){var e=this.getSource();return 0<=t&&t<e.length?e[t]:b.prototype.elementAt.apply(this,arguments)},x.prototype.elementAtOrDefault=function(t,e){void 0===e&&(e=null);var n=this.getSource();return 0<=t&&t<n.length?n[t]:e},x.prototype.first=function(t){var e=this.getSource();return null==t&&e.length>0?e[0]:b.prototype.first.apply(this,arguments)},x.prototype.firstOrDefault=function(t,e){if(void 0!==t)return b.prototype.firstOrDefault.apply(this,arguments);e=t;var n=this.getSource();return n.length>0?n[0]:e},x.prototype.last=function(t){var e=this.getSource();return null==t&&e.length>0?e[e.length-1]:b.prototype.last.apply(this,arguments)},x.prototype.lastOrDefault=function(t,e){if(void 0!==t)return b.prototype.lastOrDefault.apply(this,arguments);e=t;var n=this.getSource();return n.length>0?n[n.length-1]:e},x.prototype.skip=function(t){var e=this.getSource();return new b(function(){var n;return new _(function(){n=t<0?0:t},function(){return n<e.length&&this.yieldReturn(e[n++])},a.Blank)})},x.prototype.takeExceptLast=function(t){return null==t&&(t=1),this.take(this.getSource().length-t)},x.prototype.takeFromLast=function(t){return this.skip(this.getSource().length-t)},x.prototype.reverse=function(){var t=this.getSource();return new b(function(){var e;return new _(function(){e=t.length},function(){return e>0&&this.yieldReturn(t[--e])},a.Blank)})},x.prototype.sequenceEqual=function(t,e){return(!(t instanceof x||t instanceof Array)||null!=e||b.from(t).count()==this.count())&&b.prototype.sequenceEqual.apply(this,arguments)},x.prototype.toJoinedString=function(t,e){var n=this.getSource();return null==e&&n instanceof Array?(null==t&&(t=""),n.join(t)):b.prototype.toJoinedString.apply(this,arguments)},x.prototype.getEnumerator=function(){var t=this.getSource(),e=-1;return{current:function(){return t[e]},moveNext:function(){return++e<t.length},dispose:a.Blank}};var O=function(t,e){this.prevSource=t,this.prevPredicate=e};O.prototype=new b,O.prototype.where=function(t){if((t=d.createLambda(t)).length<=1){var e=this.prevPredicate;return new O(this.prevSource,function(n){return e(n)&&t(n)})}return b.prototype.where.call(this,t)},O.prototype.select=function(t){return(t=d.createLambda(t)).length<=1?new I(this.prevSource,this.prevPredicate,t):b.prototype.select.call(this,t)},O.prototype.getEnumerator=function(){var t,e=this.prevPredicate,n=this.prevSource;return new _(function(){t=n.getEnumerator()},function(){for(;t.moveNext();)if(e(t.current()))return this.yieldReturn(t.current());return!1},function(){d.dispose(t)})};var I=function(t,e,n){this.prevSource=t,this.prevPredicate=e,this.prevSelector=n};I.prototype=new b,I.prototype.where=function(t){return(t=d.createLambda(t)).length<=1?new O(this,t):b.prototype.where.call(this,t)},I.prototype.select=function(t){if((t=d.createLambda(t)).length<=1){var e=this.prevSelector;return new I(this.prevSource,this.prevPredicate,function(n){return t(e(n))})}return b.prototype.select.call(this,t)},I.prototype.getEnumerator=function(){var t,e=this.prevPredicate,n=this.prevSelector,r=this.prevSource;return new _(function(){t=r.getEnumerator()},function(){for(;t.moveNext();)if(null==e||e(t.current()))return this.yieldReturn(n(t.current()));return!1},function(){d.dispose(t)})};var S=function(){var t=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e=function(t){return null===t?"null":void 0===t?"undefined":typeof t.toString===p?t.toString():Object.prototype.toString.call(t)},n=function(t,e){this.key=t,this.value=e,this.prev=null,this.next=null},r=function(){this.first=null,this.last=null};r.prototype={addLast:function(t){null!=this.last?(this.last.next=t,t.prev=this.last,this.last=t):this.first=this.last=t},replace:function(t,e){null!=t.prev?(t.prev.next=e,e.prev=t.prev):this.first=e,null!=t.next?(t.next.prev=e,e.next=t.next):this.last=e},remove:function(t){null!=t.prev?t.prev.next=t.next:this.first=t.next,null!=t.next?t.next.prev=t.prev:this.last=t.prev}};var o=function(t){this.countField=0,this.entryList=new r,this.buckets={},this.compareSelector=null==t?a.Identity:t};return o.prototype={add:function(r,o){var i=this.compareSelector(r),a=e(i),s=new n(r,o);if(t(this.buckets,a)){for(var l=this.buckets[a],u=0;u<l.length;u++)if(this.compareSelector(l[u].key)===i)return this.entryList.replace(l[u],s),void(l[u]=s);l.push(s)}else this.buckets[a]=[s];this.countField++,this.entryList.addLast(s)},get:function(n){var r=this.compareSelector(n),o=e(r);if(t(this.buckets,o))for(var i=this.buckets[o],a=0;a<i.length;a++){var s=i[a];if(this.compareSelector(s.key)===r)return s.value}},set:function(r,o){var i=this.compareSelector(r),a=e(i);if(t(this.buckets,a))for(var s=this.buckets[a],l=0;l<s.length;l++)if(this.compareSelector(s[l].key)===i){var u=new n(r,o);return this.entryList.replace(s[l],u),s[l]=u,!0}return!1},contains:function(n){var r=this.compareSelector(n),o=e(r);if(!t(this.buckets,o))return!1;for(var i=this.buckets[o],a=0;a<i.length;a++)if(this.compareSelector(i[a].key)===r)return!0;return!1},clear:function(){this.countField=0,this.buckets={},this.entryList=new r},remove:function(n){var r=this.compareSelector(n),o=e(r);if(t(this.buckets,o))for(var i=this.buckets[o],a=0;a<i.length;a++)if(this.compareSelector(i[a].key)===r)return this.entryList.remove(i[a]),i.splice(a,1),0==i.length&&delete this.buckets[o],void this.countField--},count:function(){return this.countField},toEnumerable:function(){var t=this;return new b(function(){var e;return new _(function(){e=t.entryList.first},function(){if(null!=e){var t={key:e.key,value:e.value};return e=e.next,this.yieldReturn(t)}return!1},a.Blank)})}},o}(),T=function(t){this.count=function(){return t.count()},this.get=function(e){return b.from(t.get(e))},this.contains=function(e){return t.contains(e)},this.toEnumerable=function(){return t.toEnumerable().select(function(t){return new j(t.key,t.value)})}},j=function(t,e){this.key=function(){return t},x.call(this,e)};j.prototype=new x,"function"===p&&n(911)?void 0===(r=function(){return b}.apply(e,[]))||(t.exports=r):typeof t!==h&&t.exports?t.exports=b:o.Enumerable=b}(this)},535:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(384),o=n(414),i=n(387),a=n(383),s=n(400),l=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(e){var n=this;void 0===e&&(e=!0),this._allowRotateConstraint=null,this.propertyChanged=new r.a,this._firePropertyChanged=function(){return n.propertyChanged.notify()},this.type=t.type,this.allowDelete=e,this.allowMoveHorizontal=e,this.allowMoveVertical=e,this.allowRotate=e,this.allowDragAndDrop=e,this.resizeGrips=new o.a(e,e)}return Object.defineProperty(t.prototype,"allowDelete",{get:function(){return this._allowDelete},set:function(t){this._allowDelete!==t&&(this._allowDelete=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMoveHorizontal",{get:function(){return this._allowMoveHorizontal},set:function(t){this._allowMoveHorizontal!==t&&(this._allowMoveHorizontal=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMoveVertical",{get:function(){return this._allowMoveVertical},set:function(t){this._allowMoveVertical!==t&&(this._allowMoveVertical=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowRotateConstraint",{set:function(t){var e=this.allowRotate;this._allowRotateConstraint=t,this.allowRotate!==e&&this.propertyChanged.notify()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowRotate",{get:function(){return null!=this._allowRotateConstraint?this._allowRotateConstraint:this._allowRotate},set:function(t){this._allowRotate!==t&&(this._allowRotate=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowDragAndDrop",{get:function(){return this._allowDragAndDrop},set:function(t){this._allowDragAndDrop!==t&&(this._allowDragAndDrop=t,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizeGrips",{get:function(){return this._resizeGrips},set:function(t){null!=this.resizeGrips&&null!=this.resizeGrips.propertyChanged&&this.resizeGrips.propertyChanged.remove(this._firePropertyChanged),this._resizeGrips=t,null!=this.resizeGrips.propertyChanged&&this.resizeGrips.propertyChanged.add(this._firePropertyChanged),this.propertyChanged.notify()},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t;return e.allowDelete=this.allowDelete,e.allowDragAndDrop=this.allowDragAndDrop,e.allowMoveHorizontal=this.allowMoveHorizontal,e.allowMoveVertical=this.allowMoveVertical,e.allowRotate=this.allowRotate,e.allowRotateConstraint=this.allowRotateConstraint,e.resizeGrips=this.resizeGrips.clone(),e},t.prototype.equals=function(t){return this.allowDelete===t.allowDelete&&this.allowDragAndDrop===t.allowDragAndDrop&&this.allowMoveHorizontal===t.allowMoveHorizontal&&this.allowMoveVertical===t.allowMoveVertical&&this.allowRotate===t.allowRotate&&this.allowRotateConstraint===t.allowRotateConstraint&&Object(a.h)(this.resizeGrips,t.resizeGrips)},t.prototype.getSimplifiedObject=function(){var t={};return t.allowDelete=this.allowDelete,t.resizeGrips=this.resizeGrips.getSimplifiedObject(),t.allowMoveHorizontal=this.allowMoveHorizontal,t.allowMoveVertical=this.allowMoveVertical,t.allowRotate=this.allowRotate,t.allowDragAndDrop=this.allowDragAndDrop,t},t.CreateFromRaw=function(e){var n=i.extend(new o.a(!0,!0),e.resizeGrips),r=i.extend(new t,e);return r.resizeGrips=n,r},t.type="ManipulationPermissions",l([Object(s.a)({ignore:!0}),u("design:type",Boolean),u("design:paramtypes",[Boolean])],t.prototype,"allowRotateConstraint",null),t}()},536:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(384),o=function(){function t(){this._noPrint=!1,this._noShow=!1,this.propertyChanged=new r.a}return Object.defineProperty(t.prototype,"noPrint",{get:function(){return this._noPrint},set:function(t){this._noPrint!==t&&(this._noPrint=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noShow",{get:function(){return this._noShow},set:function(t){this._noShow!==t&&(this._noShow=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t;return e.noShow=this.noShow,e.noPrint=this.noPrint,e},t.prototype.equals=function(t){return this.noShow===t.noShow&&this.noPrint===t.noPrint},t.prototype.getSimplifiedObject=function(){var t={};return t.noPrint=this.noPrint,t.noShow=this.noShow,t},t}()},537:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(384),o=n(538),i=n(383),a=function(){function t(t){var e=this;this._allowZOrderChange=!0,this._allowOpacityChange=!0,this._allowRemoveOnLayoutChange=!0,this._firePropertyChanged=function(){return e.propertyChanged.fire()},this.propertyChanged=new r.a,null==t&&(t=!0),this.allowZOrderChange=t,this.allowOpacityChange=t,this.allowRemoveOnLayoutChange=t,this.itemToolbarPermissions=new o.a(t)}return Object.defineProperty(t.prototype,"allowZOrderChange",{get:function(){return this._allowZOrderChange},set:function(t){this._allowZOrderChange!==t&&(this._allowZOrderChange=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowOpacityChange",{get:function(){return this._allowOpacityChange},set:function(t){this._allowOpacityChange!==t&&(this._allowOpacityChange=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowRemoveOnLayoutChange",{get:function(){return this._allowRemoveOnLayoutChange},set:function(t){this._allowRemoveOnLayoutChange!==t&&(this._allowRemoveOnLayoutChange=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemToolbarPermissions",{get:function(){return this._itemToolbarPermissions},set:function(t){Object(i.h)(this,t)||(null!=this.itemToolbarPermissions&&null!=this.itemToolbarPermissions.propertyChanged&&this.itemToolbarPermissions.propertyChanged.remove(this._firePropertyChanged),this._itemToolbarPermissions=t,null!=this.itemToolbarPermissions.propertyChanged&&this.itemToolbarPermissions.propertyChanged.add(this._firePropertyChanged),this.propertyChanged.fire())},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){var t={};return t.allowZOrderChange=this.allowZOrderChange,t.allowOpacityChange=this.allowOpacityChange,t.allowRemoveOnLayoutChange=this.allowRemoveOnLayoutChange,t.itemToolbarPermissions=this.itemToolbarPermissions.getSimplifiedObject(),t},t.prototype.clone=function(){var e=new t;return e.allowZOrderChange=this.allowZOrderChange,e.allowOpacityChange=this.allowOpacityChange,e.allowRemoveOnLayoutChange=this.allowRemoveOnLayoutChange,e.itemToolbarPermissions=this.itemToolbarPermissions.clone(),e},t.prototype.equals=function(t){return this.allowOpacityChange===t.allowOpacityChange&&this.allowOpacityChange===t.allowOpacityChange&&this.allowRemoveOnLayoutChange===t.allowRemoveOnLayoutChange&&Object(i.h)(this.itemToolbarPermissions,t.itemToolbarPermissions)},t}()},538:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(384),o=n(400),i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(e){void 0===e&&(e=!0),this._showDeleteButton=!0,this._showEditButton=!0,this._showSelectButton=!0,this._showEditButtonConstraint=null,this.propertyChanged=new r.a,this.showSelectButtonConstraint=null,this.type=t.type,this.showDeleteButton=e,this.showEditButton=e,this.showSelectButton=e}return Object.defineProperty(t.prototype,"showDeleteButton",{get:function(){return this._showDeleteButton},set:function(t){this._showDeleteButton!==t&&(this._showDeleteButton=t,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showEditButton",{get:function(){return null!=this.showEditButtonConstraint?this.showEditButtonConstraint:this._showEditButton},set:function(t){this._showEditButton!==t&&(this._showEditButton=t,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showEditButtonConstraint",{get:function(){return this._showEditButtonConstraint},set:function(t){this.showEditButtonConstraint!==t&&(this._showEditButtonConstraint=t,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSelectButton",{get:function(){return null!=this.showSelectButtonConstraint?this.showSelectButtonConstraint:this._showSelectButton},set:function(t){this._showSelectButton!==t&&(this._showSelectButton=t,this.propertyChanged.fire())},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){var t={};return t.showDeleteButton=this.showDeleteButton,t.showEditButton=this.showEditButton,t.showSelectButton=this.showSelectButton,t.showEditButtonConstraint=this.showEditButtonConstraint,t.showSelectButtonConstraint=this.showSelectButtonConstraint,t},t.prototype.clone=function(){var e=new t;return e.showDeleteButton=this._showDeleteButton,e.showEditButton=this._showEditButton,e.showEditButtonConstraint=this.showEditButtonConstraint,e.showSelectButton=this._showSelectButton,e.showSelectButtonConstraint=this.showSelectButtonConstraint,e},t.prototype.equals=function(t){return this.showDeleteButton==t.showDeleteButton&&this.showEditButton===t.showEditButton&&this.showEditButtonConstraint===t.showEditButtonConstraint&&this.showSelectButton===t.showSelectButton&&this.showSelectButtonConstraint===t.showSelectButtonConstraint},t.type="ItemToolbarPermissions",i([Object(o.a)({ignore:!0}),a("design:type",Boolean)],t.prototype,"showSelectButtonConstraint",void 0),i([Object(o.a)({ignore:!0}),a("design:type",Boolean),a("design:paramtypes",[Boolean])],t.prototype,"showEditButtonConstraint",null),t}()},539:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(384),o=function(){function t(){this._displayInObjectInspector=!0,this.propertyChanged=new r.a}return Object.defineProperty(t.prototype,"displayInObjectInspector",{get:function(){return this._displayInObjectInspector},set:function(t){this._displayInObjectInspector!==t&&(this._displayInObjectInspector=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){var t={};return t.displayInObjectInspector=this.displayInObjectInspector,t},t.prototype.clone=function(){var e=new t;return e.displayInObjectInspector=this.displayInObjectInspector,e},t.prototype.equals=function(t){return this.displayInObjectInspector===t.displayInObjectInspector},t}()},540:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(420),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=t.call(this,e)||this;if(n.l=0,n.a=255,null==e)return n;try{n._init(e)}catch(t){console.warn("Incorrect GrayscaleColor format: "+JSON.stringify(e))}return n}return i(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"GrayscaleColor"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.a},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this)},e.prototype.equals=function(n){return n instanceof e&&(t.prototype.equals.call(this,n)&&n instanceof e&&this.l===n.l&&this.a===n.a)},e.prototype.toString=function(){return this._getPreview()},e.prototype.getData=function(){var e=t.prototype.getData.call(this);return e.l=this.l,e.a=this.a,e},e.prototype._getPreview=function(){if(255===this.a)return"rgb("+this.l+","+this.l+","+this.l+")";var t=(this.a/255).toFixed(7);return"rgba("+this.l+","+this.l+","+this.l+","+t+")"},e.prototype._init=function(e){t.prototype._init.call(this,e),e.a=null!=e.a?e.a:255,this._validateNumber(e.l),this._validateNumber(e.a),this.l=e.l,this.a=e.a,null==this.preview&&(this.preview=this._getPreview())},e}(o.a)},541:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,o=n(420),i=n(463),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=t.call(this,e)||this;if(n.l=0,n.a=-128,n.b=-128,n.alpha=0,null==e)return n;var r="Incorrect LabColor format: "+JSON.stringify(e);if("string"==typeof e)n._tryInitFromString(e)?n._previewFromServer=i.a.isValidRgbColor(n.preview):console.warn(r);else try{n._init(e)}catch(t){console.warn(r)}return n}return a(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"LabColor"},enumerable:!0,configurable:!0}),e.prototype._tryInitFromString=function(t){e._lab.lastIndex=0;var n=e._lab.exec(t);return null!=n&&8===n.length&&(this._init({l:+n[1],a:+n[2],b:+n[3],alpha:null!=n[5]?i.a.convertPercentToByte(n[5]):255,preview:null!=n[7]?n[7]:null}),!0)},e.prototype.clone=function(){return new e(this)},e.prototype.equals=function(n){return n instanceof e&&(t.prototype.equals.call(this,n)&&n instanceof e&&this.l===n.l&&this.a===n.a&&this.b===n.b&&this.alpha===n.alpha)},e.prototype.toString=function(){var t="lab("+this.l+","+this.a+","+this.b+","+i.a.convertByteToPercent(this.alpha);return null!=this.preview&&(t+=","+this.preview),t+=")"},e.prototype.getData=function(){var e=t.prototype.getData.call(this);return e.l=this.l,e.a=this.a,e.b=this.b,e.alpha=this.alpha,e},e.prototype._getPreview=function(){return this.preview},e.prototype._init=function(e){t.prototype._init.call(this,e),e.alpha=null!=e.alpha?e.alpha:255,this._validateNumber(e.l),this._validateNumber(e.a,-128,127),this._validateNumber(e.b,-128,127),this._validateNumber(e.alpha),this.l=e.l,this.a=e.a,this.b=e.b,this.alpha=e.alpha},e._lab=/^\s*lab\(\s*(\d{1,3})\s*,\s*(-*\d{1,3})\s*,\s*(-*\d{1,3})\s*(,\s*(\d{1,3})%)?\s*(\,\s*(.*)\s*)?\)\s*;{0,1}\s*$/g,e}(o.a)},542:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(383),o=function(){function t(){this.styles=[],this.clipartColors=[]}return t.fromRaw=function(e){var n=new t;return n.text=e.text,n.stroke=e.stroke,n.shadow=e.shadow,n.img=e.img,n.border=e.border,n.fill=e.fill,n.textFill=e.textFill,n.line=e.line,n.altline=e.altline,n.horizontal=e.horizontal,n.vertical=e.vertical,n.barcode=e.barcode,n.styles=null!=e.styles?e.styles.slice(0):null,n.clipartColors=null!=e.clipartColors?e.clipartColors.slice(0):null,n},t.prototype.clone=function(){var e=new t;return e.text=this.text,e.stroke=this.stroke,e.shadow=this.shadow,e.img=this.img,e.border=this.border,e.fill=this.fill,e.textFill=this.textFill,e.line=this.line,e.altline=this.altline,e.horizontal=this.horizontal,e.vertical=this.vertical,e.barcode=this.barcode,e.styles=null!=this.styles?this.styles.slice(0):null,e.clipartColors=null!=this.clipartColors?this.clipartColors.slice(0):null,e},t.prototype.equals=function(t){return this.text===t.text&&this.stroke===t.stroke&&this.shadow===t.shadow&&this.img===t.img&&this.border===t.border&&this.fill===t.fill&&this.textFill===t.textFill&&this.line===t.line&&this.altline===t.altline&&this.horizontal===t.horizontal&&this.vertical===t.vertical&&this.barcode===t.barcode&&Object(r.c)(this.styles,t.styles)&&Object(r.c)(this.clipartColors,t.clipartColors)},t}()},543:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(464),i=n(402),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(t){function e(n){var r=t.call(this)||this;return r.type=e.type,null==n&&(n=!0),r._allowSafetyLines=n,r._allowRegion=n,r._allowBleedArea=n,r}return a(e,t),e.prototype.clone=function(t){void 0===t&&(t=null);var n=null!==t&&void 0!==t?t:new e;return n.allowSafetyLines=this.allowSafetyLines,n.allowRegion=this.allowRegion,n.allowBleedArea=this.allowBleedArea,n},e.prototype.equals=function(t){return this.type===t.type&&this.allowSafetyLines===t.allowSafetyLines&&this.allowRegion===t.allowRegion&&this.allowBleedArea===t.allowBleedArea},e.type="ViolationSettings",s([Object(o.a)(),l("design:type",Boolean)],e.prototype,"allowSafetyLines",void 0),s([Object(o.a)(),l("design:type",Boolean)],e.prototype,"allowRegion",void 0),s([Object(o.a)(),l("design:type",Boolean)],e.prototype,"allowBleedArea",void 0),e}(i.a)},544:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(384),o=function(){function t(t){this._allowChangeBorderWidth=!0,this._allowChangeFillColor=!0,this._allowChangeBorderColor=!0,this.propertyChanged=new r.a,null==t&&(t=!0),this.allowChangeBorderWidth=t,this.allowChangeFillColor=t,this.allowChangeBorderColor=t}return Object.defineProperty(t.prototype,"allowChangeBorderWidth",{get:function(){return this._allowChangeBorderWidth},set:function(t){this._allowChangeBorderWidth!==t&&(this._allowChangeBorderWidth=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeFillColor",{get:function(){return this._allowChangeFillColor},set:function(t){this._allowChangeFillColor!==t&&(this._allowChangeFillColor=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeBorderColor",{get:function(){return this._allowChangeBorderColor},set:function(t){this._allowChangeBorderColor!==t&&(this._allowChangeBorderColor=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t;return e.allowChangeBorderColor=this.allowChangeBorderColor,e.allowChangeBorderWidth=this.allowChangeBorderWidth,e.allowChangeFillColor=this.allowChangeFillColor,e},t.prototype.getSimplifiedObject=function(){var t={};return t.allowChangeBorderWidth=this.allowChangeBorderWidth,t.allowChangeFillColor=this.allowChangeFillColor,t.allowChangeBorderColor=this.allowChangeBorderColor,t},t.prototype.equals=function(t){return this.allowChangeBorderColor===t.allowChangeBorderColor&&this.allowChangeFillColor===t.allowChangeFillColor&&this.allowChangeBorderWidth===t.allowChangeBorderWidth},t}()},545:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(384),o=function(){function t(t){this.propertyChanged=new r.a,null==t&&(t=!0),this.allowChangeText=t,this.allowChangeFont=t,this.allowChangeFontSize=t,this.allowChangeFontColor=t,this.allowChangeTextAlignment=t,this.allowChangeTextBIU=t,this.allowChangeShadow=t,this.allowChangeStroke=t,this.allowChangeLeading=t,this.allowTextFormatting=null}return Object.defineProperty(t.prototype,"allowChangeText",{get:function(){return this._allowChangeText},set:function(t){this._allowChangeText!==t&&(this._allowChangeText=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeFont",{get:function(){return this._allowChangeFont},set:function(t){this._allowChangeFont!==t&&(this._allowChangeFont=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeFontSize",{get:function(){return this._allowChangeFontSize},set:function(t){this._allowChangeFontSize!==t&&(this._allowChangeFontSize=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeFontColor",{get:function(){return this._allowChangeFontColor},set:function(t){this._allowChangeFontColor!==t&&(this._allowChangeFontColor=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeTextAlignment",{get:function(){return this._allowChangeTextAlignment},set:function(t){this._allowChangeTextAlignment!==t&&(this._allowChangeTextAlignment=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeTextBIU",{get:function(){return this._allowChangeTextBIU},set:function(t){this._allowChangeTextBIU!==t&&(this._allowChangeTextBIU=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeShadow",{get:function(){return this._allowChangeShadow},set:function(t){this._allowChangeShadow!==t&&(this._allowChangeShadow=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeStroke",{get:function(){return this._allowChangeStroke},set:function(t){this._allowChangeStroke!==t&&(this._allowChangeStroke=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowChangeLeading",{get:function(){return this._allowChangeLeading},set:function(t){this._allowChangeLeading!==t&&(this._allowChangeLeading=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowTextFormatting",{get:function(){return this._allowTextFormatting},set:function(t){this._allowTextFormatting!==t&&(this._allowTextFormatting=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t;return e.allowChangeFont=this.allowChangeFont,e.allowChangeFontColor=this.allowChangeFontColor,e.allowChangeFontSize=this.allowChangeFontSize,e.allowChangeShadow=this.allowChangeShadow,e.allowChangeStroke=this.allowChangeStroke,e.allowChangeText=this.allowChangeText,e.allowChangeTextAlignment=this.allowChangeTextAlignment,e.allowChangeTextBIU=this.allowChangeTextBIU,e.allowChangeLeading=this.allowChangeLeading,e.allowTextFormatting=this.allowTextFormatting,e},t.prototype.equals=function(t){return this.allowChangeFont===t.allowChangeFont&&this.allowChangeFontColor===t.allowChangeFontColor&&this.allowChangeFontSize===t.allowChangeFontSize&&this.allowChangeShadow===t.allowChangeShadow&&this.allowChangeStroke===t.allowChangeStroke&&this.allowChangeText===t.allowChangeText&&this.allowChangeTextAlignment===t.allowChangeTextAlignment&&this.allowChangeTextBIU===t.allowChangeTextBIU&&this.allowChangeLeading===t.allowChangeLeading&&this.allowTextFormatting===t.allowTextFormatting},t.prototype.getSimplifiedObject=function(){var t={};return t.allowChangeText=this.allowChangeText,t.allowChangeFont=this.allowChangeFont,t.allowChangeFontSize=this.allowChangeFontSize,t.allowChangeFontColor=this.allowChangeFontColor,t.allowChangeTextAlignment=this.allowChangeTextAlignment,t.allowChangeTextBIU=this.allowChangeTextBIU,t.allowChangeShadow=this.allowChangeShadow,t.allowChangeStroke=this.allowChangeStroke,t.allowChangeLeading=this.allowChangeLeading,t.allowTextFormatting=this.allowTextFormatting,t},t}()},546:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(407),i=n(381),a=n(383),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(n,r,o,a){var s=t.call(this,n,o,a)||this;return s._isVertical=!1,s.type=e.type,s._textRectangle=null!=r?r:new i.RectangleF,s}return s(e,t),Object.defineProperty(e.prototype,"textRectangle",{get:function(){return this._textRectangle},set:function(t){i.RectangleF.isEqual(this._textRectangle,t)||(this._textRectangle=t,this._propertyChanged.notify(this,"textRectangle"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._propertyChanged.notify(this,"isVertical"))},enumerable:!0,configurable:!0}),e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.isVertical=e.isVertical,n.textRectangle=e.textRectangle},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(a.h)(this._isVertical,e._isVertical)&&Object(a.h)(this._textRectangle,e._textRectangle)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="AutoScaledTextItem",e}(o.a)},547:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r,o=n(407),i=n(381),a=n(465),s=n(446),l=n(383),u=n(400),c=n(443),h=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},f=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(t){function e(n,r,o,l){var u=t.call(this,n,o,l)||this;return u._textRectangle=new i.RectangleF,u._verticalAlignment=s.f.Top,u._isVertical=!1,u._paragraphSettings=new a.a,u._wrappingPath=null,u._wrappingMargin=7,u._scheduledFitMode=null,u._shrinkMode=s.d.Size,u._overflowStrategy=s.c.Clip,u._originalVerticalScale=1,u._originalHorizontalScale=1,u._firstBaselineOffset=s.a.Ascent,u._firstBaselineMinOffset=0,u.characterLimit=null,u.type=e.type,null!=r&&(u.textRectangle=r,u.sourcePath=i.Path.rectangle(r.left,r.top,r.width,r.height)),u}return h(e,t),Object.defineProperty(e.prototype,"textRectangle",{get:function(){return this._textRectangle},set:function(t){i.RectangleF.isEqual(this._textRectangle,t)||(this._textRectangle=t,this._propertyChanged.notify(this,"textRectangle"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlignment",{get:function(){return this._verticalAlignment},set:function(t){this._verticalAlignment!==t&&(this._verticalAlignment=t,this._propertyChanged.notify(this,"verticalAlignment"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._propertyChanged.notify(this,"isVertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paragraphSettings",{get:function(){return this._paragraphSettings},set:function(t){this._paragraphSettings.equals(t)||(this._paragraphSettings=t,this._propertyChanged.notify(this,"paragraphSettings"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrappingPath",{get:function(){return this._wrappingPath},set:function(t){null==this._wrappingPath&&null==t||null!=this._wrappingPath&&this._wrappingPath.isEqual(t)||(this._wrappingPath=t,this._propertyChanged.notify(this,"wrappingPath"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrappingMargin",{get:function(){return this._wrappingMargin},set:function(t){this._wrappingMargin!==t&&(this._wrappingMargin=t,this._propertyChanged.notify(this,"wrappingMargin"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduledFitMode",{get:function(){return this._scheduledFitMode},set:function(t){this._scheduledFitMode!==t&&(this._scheduledFitMode=t,null!=t&&this._propertyChanged.notify(this,"scheduledFitMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shrinkMode",{get:function(){return this._shrinkMode},set:function(t){this._shrinkMode!==t&&(this._shrinkMode=t,null!=t&&this._propertyChanged.notify(this,"shrinkMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overflowStrategy",{get:function(){return this._overflowStrategy},set:function(t){this._overflowStrategy!==t&&(this._overflowStrategy=t,null!=t&&this._propertyChanged.notify(this,"overflowStrategy"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalVerticalScale",{get:function(){return this._originalVerticalScale},set:function(t){this._originalVerticalScale!==t&&(this._originalVerticalScale=t,null!=t&&this._propertyChanged.notify(this,"originalVerticalScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalHorizontalScale",{get:function(){return this._originalHorizontalScale},set:function(t){this._originalHorizontalScale!==t&&(this._originalHorizontalScale=t,null!=t&&this._propertyChanged.notify(this,"originalHorizontalScale"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstBaselineOffset",{get:function(){return this._firstBaselineOffset},set:function(t){this._firstBaselineOffset!==t&&(this._firstBaselineOffset=t,null!=t&&this._propertyChanged.notify(this,"firstBaselineOffset"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstBaselineMinOffset",{get:function(){return this._firstBaselineMinOffset},set:function(t){Object(i.EqualsOfFloatNumbers)(this._firstBaselineMinOffset,t)||(this._firstBaselineMinOffset=t,null!=t&&this._propertyChanged.notify(this,"firstBaselineMinOffset"))},enumerable:!0,configurable:!0}),e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.isVertical=e.isVertical,n.textRectangle=e.textRectangle.clone(),n.verticalAlignment=e.verticalAlignment,n.paragraphSettings=e.paragraphSettings.clone(),n.wrappingPath=null!=e.wrappingPath?e.wrappingPath.clone():null,n.wrappingMargin=e.wrappingMargin,n.scheduledFitMode=e.scheduledFitMode,n.shrinkMode=e.shrinkMode,n.overflowStrategy=e.overflowStrategy,n.originalVerticalScale=e.originalVerticalScale,n.originalHorizontalScale=e.originalHorizontalScale,n.characterLimit=e.characterLimit,n.firstBaselineOffset=e.firstBaselineOffset,n.firstBaselineMinOffset=e.firstBaselineMinOffset},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(l.h)(this._isVertical,e._isVertical)&&Object(l.h)(this._textRectangle,e._textRectangle)&&Object(l.h)(this._verticalAlignment,e._verticalAlignment)&&Object(l.h)(this._paragraphSettings,e._paragraphSettings)&&Object(l.h)(this._wrappingPath,e._wrappingPath)&&Object(l.h)(this._wrappingMargin,e._wrappingMargin)&&Object(l.h)(this._scheduledFitMode,e._scheduledFitMode)&&Object(l.h)(this._shrinkMode,e._shrinkMode)&&Object(l.h)(this._overflowStrategy,e._overflowStrategy)&&Object(l.h)(this._originalVerticalScale,e._originalVerticalScale)&&Object(l.h)(this._originalHorizontalScale,e._originalHorizontalScale)&&Object(l.h)(this.characterLimit,e.characterLimit)&&Object(l.h)(this.firstBaselineOffset,e.firstBaselineOffset)&&Object(l.h)(this.firstBaselineMinOffset,e.firstBaselineMinOffset)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="BoundedTextItem",p([Object(u.a)({factory:new c.c(50),displayName:"Character Limit"}),f("design:type",Number)],e.prototype,"characterLimit",void 0),p([Object(u.a)({enumObject:s.f}),f("design:type",Number),f("design:paramtypes",[Number])],e.prototype,"verticalAlignment",null),p([Object(u.a)({factory:new c.b(i.Path),displayName:"Wrapping path"}),f("design:type",i.Path),f("design:paramtypes",[i.Path])],e.prototype,"wrappingPath",null),p([Object(u.a)({enumObject:s.b}),f("design:type",Number),f("design:paramtypes",[Number])],e.prototype,"scheduledFitMode",null),p([Object(u.a)({enumObject:s.d}),f("design:type",Number),f("design:paramtypes",[Number])],e.prototype,"shrinkMode",null),p([Object(u.a)({enumObject:s.c}),f("design:type",Number),f("design:paramtypes",[Number])],e.prototype,"overflowStrategy",null),e}(o.a)},548:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(407),i=n(408),a=n(383),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(n,r,o,a){var s=t.call(this,n,o,a)||this;return s._baselineLocation=new i.a,s._isVertical=!1,s.type=e.type,null!=r&&(s.baselineLocation=r),s._ignorePermissionsChange=!0,s.manipulationPermissions.resizeGrips.setCornerArbitrary(!1),s.manipulationPermissions.resizeGrips.edge=!1,s._ignorePermissionsChange=!1,s}return s(e,t),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._propertyChanged.notify(this,"isVertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselineLocation",{get:function(){return this._baselineLocation},set:function(t){i.a.isEqual(this._baselineLocation,t)||(this._baselineLocation=t,this._propertyChanged.notify(this,"baselineLocation"))},enumerable:!0,configurable:!0}),e.prototype.applyPermissionsConstrain=function(){t.prototype.applyPermissionsConstrain.call(this),null!=this.manipulationPermissions&&null!=this.manipulationPermissions.resizeGrips&&(this.manipulationPermissions.resizeGrips.setCornerArbitraryConstraint(!1),this.manipulationPermissions.resizeGrips.edgeConstraint=!1)},e.prototype.getSimplifiedObject=function(e){void 0===e&&(e=[]);var n=t.prototype.getSimplifiedObject.call(this,["_placeholders","currentTextImage","sourcePath","sourceRectangle"].concat(e));return n.placeholders=this.placeholders.toArray(),n},e.prototype._copy=function(e,n,r,o){return t.prototype._copy.call(this,e,n,r,o),n.isVertical=e.isVertical,n.baselineLocation=e.baselineLocation,n},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(a.h)(this._isVertical,e._isVertical)&&Object(a.h)(this._baselineLocation,e._baselineLocation)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="PlainTextItem",e}(o.a)},549:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(407),i=n(381),a=n(380),s=n(383),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(n,r,o,a){var s=t.call(this,n,o,a)||this;return s._textPath=new i.Path,s._fitToPath=!1,s._stretch=!1,s._originalFontSize=0,s._fitToPathStep=1,s._start=0,s.type=e.type,null!=r&&(s.textPath=r),s._ignorePermissionsChange=!0,s.manipulationPermissions.resizeGrips.setCornerArbitrary(!1),s.manipulationPermissions.resizeGrips.edge=!1,s._ignorePermissionsChange=!1,s}return l(e,t),Object.defineProperty(e.prototype,"textPath",{get:function(){return this._textPath},set:function(t){this._textPath.equals(t)||(this._textPath=t,this._propertyChanged.notify(this,"textPath"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitToPath",{get:function(){return this._fitToPath},set:function(t){this._fitToPath!==t&&(this._fitToPath=t,this._propertyChanged.notify(this,"fitToPath"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stretch",{get:function(){return this._stretch},set:function(t){this._stretch!==t&&(this._stretch=t,this._propertyChanged.notify(this,"stretch"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._start},set:function(t){this._start!==t&&(this._start=t,this._propertyChanged.notify(this,"start"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},set:function(t){this._end!==t&&(this._end=t,this._propertyChanged.notify(this,"end"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalFontSize",{get:function(){return this._originalFontSize},set:function(t){Object(i.EqualsOfFloatNumbers)(this._originalFontSize,t)||(this._originalFontSize=t,this._propertyChanged.notify(this,"originalFontSize"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitToPathStep",{get:function(){return this._fitToPathStep},set:function(t){Object(i.EqualsOfFloatNumbers)(this._fitToPathStep,t)||(this._fitToPathStep=t,this._propertyChanged.notify(this,"fitToPathStep"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLineCount",{get:function(){return 1},set:function(t){throw new a.d("Max Line Count of Curved Text can not be redefined!")},enumerable:!0,configurable:!0}),e.prototype.getSimplifiedObject=function(e){return t.prototype.getSimplifiedObject.call(this,["maxLineCount"].concat(e))},e.prototype.applyPermissionsConstrain=function(){t.prototype.applyPermissionsConstrain.call(this),null!=this.manipulationPermissions&&(this.manipulationPermissions.resizeGrips.setCornerArbitrary(!1),this.manipulationPermissions.resizeGrips.edge=!1)},e.prototype._copy=function(e,n,r,o){t.prototype._copy.call(this,e,n,r,o),n.textPath=e.textPath.clone(),n.fitToPath=e.fitToPath,n.stretch=e.stretch,n.originalFontSize=e.originalFontSize,n.fitToPathStep=e.fitToPathStep,n.start=e.start,n.end=e.end},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(s.h)(this._textPath,e._textPath)&&Object(s.h)(this._fitToPath,e._fitToPath)&&Object(s.h)(this._stretch,e._stretch)&&Object(s.h)(this._originalFontSize,e._originalFontSize)&&Object(s.h)(this._fitToPathStep,e._fitToPathStep)&&Object(s.h)(this._start,e._start)&&Object(s.h)(this._end,e._end)&&Object(s.h)(this._textPath,e._textPath)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},e.type="CurvedTextItem",e}(o.a)},550:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(464),i=n(487),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(t){function e(n){var r=t.call(this,n)||this;return r.type=e.type,null==n&&(n=!0),r._allowTextCrop=n,r}return a(e,t),e.prototype.clone=function(){var n=new e;return n.allowImageQuality=this.allowImageQuality,n=t.prototype.clone.call(this,n)},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&this.allowImageQuality===e.allowImageQuality},e.type="ImageViolationSettings",s([Object(o.a)(),l("design:type",Boolean)],e.prototype,"allowImageQuality",void 0),e}(i.a)},551:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(384),o=n(400),i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this._allowEditContent=!0,this.showSelectButtonConstraint=null,this._showSelectButton=!0,this._showHandleButton=!0,this.propertyChanged=new r.a}return Object.defineProperty(t.prototype,"allowEditContent",{get:function(){return this._allowEditContent},set:function(t){this._allowEditContent!==t&&(this._allowEditContent=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSelectButton",{get:function(){return null!=this.showSelectButtonConstraint?this.showSelectButtonConstraint:this._showSelectButton},set:function(t){this._showSelectButton!==t&&(this._showSelectButton=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHandleButton",{get:function(){return this._showHandleButton},set:function(t){this._showHandleButton!==t&&(this._showHandleButton=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){var t={};return t.allowEditContent=this.allowEditContent,t.showSelectButton=this.showSelectButton,t.showHandleButton=this.showHandleButton,t},t.prototype.clone=function(){var e=new t;return e.allowEditContent=this.allowEditContent,e.showSelectButton=this.showSelectButton,e.showSelectButtonConstraint=this.showSelectButtonConstraint,e.showHandleButton=this.showHandleButton,e},t.prototype.equals=function(t){return this.allowEditContent===t.allowEditContent&&this.showSelectButton===t.showSelectButton&&this.showSelectButtonConstraint===t.showSelectButtonConstraint&&this.showHandleButton===t.showHandleButton},i([Object(o.a)({ignore:!0}),a("design:type",Boolean)],t.prototype,"showSelectButtonConstraint",void 0),t}()},552:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(384),o=n(490),i=n(493),a=n(380),s=n(383),l=function(){function t(){var t=this;this._onPermissionsChanged=function(){t.propertyChanged.notify()},this.propertyChanged=new r.a,this._imagePermissions=new o.a,this._barcodePermissions=new i.a,this._imagePermissions.propertyChanged.add(this._onPermissionsChanged),this._barcodePermissions.propertyChanged.add(this._onPermissionsChanged)}return Object.defineProperty(t.prototype,"barcodePermissions",{get:function(){return this._barcodePermissions},set:function(t){if(null==t)throw new a.a("barcodePermissions cannot be null");this._barcodePermissions.propertyChanged.remove(this._onPermissionsChanged),this._barcodePermissions=t,this._barcodePermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imagePermissions",{get:function(){return this._imagePermissions},set:function(t){if(null==t)throw new a.a("imagePermissions cannot be null");this._imagePermissions.propertyChanged.remove(this._onPermissionsChanged),this._imagePermissions=t,this._imagePermissions.propertyChanged.add(this._onPermissionsChanged),this._onPermissionsChanged()},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){return{imagePermissions:this.imagePermissions.getSimplifiedObject(),barcodePermissions:this.barcodePermissions.getSimplifiedObject()}},t.prototype.clone=function(){var e=new t;return e.barcodePermissions=this.barcodePermissions.clone(),e.imagePermissions=this.imagePermissions.clone(),e},t.prototype.equals=function(t){return Object(s.h)(this.barcodePermissions,t.barcodePermissions)&&Object(s.h)(this.imagePermissions,t.imagePermissions)},t}()},553:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return a});var r,o=n(386),i=function(){function t(){this.name="cropmark",this.margin=10,this.color=new o.RgbColor({r:0,g:0,b:0,a:255}),this.widthPx=1,this.length=8,this.leftNotes=null,this.topNotes=null,this.rightNotes=null,this.bottomNotes=null}return Object.defineProperty(t.prototype,"margins",{get:function(){return"number"==typeof this.margin?{horizontal:this.margin,vertical:this.margin}:this.margin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengths",{get:function(){return"number"==typeof this.length?{horizontal:this.length,vertical:this.length}:this.length},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t;return e.name=this.name,e.margin=this.margin,e.color=this.color,e.widthPx=this.widthPx,e.length=this.length,e.leftNotes=null!=this.leftNotes?this.leftNotes.map(function(t){return t.clone()}):null,e.topNotes=null!=this.topNotes?this.topNotes.map(function(t){return t.clone()}):null,e.rightNotes=null!=this.rightNotes?this.rightNotes.map(function(t){return t.clone()}):null,e.bottomNotes=null!=this.bottomNotes?this.bottomNotes.map(function(t){return t.clone()}):null,e},t}();!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(r||(r={}));var a=function(){function t(){this.alignment=r.Left,this.fontSize=3,this.edgeMargin=.3,this.markMargin=.3}return t.prototype.clone=function(){var e=new t;return e.alignment=this.alignment,e.fontSize=this.fontSize,e.text=this.text,e.edgeMargin=this.edgeMargin,e.markMargin=this.markMargin,e},t}()},554:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r,o=n(402),i=n(403),a=n(393),s=n(555),l=n(469),u=n(380),c=n(383),h=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parentSurface=null,o._safetyLines=new a.a,o._cropMarks=new a.a,o._onBoundsPropertyChanged=function(t,e){o._propertyChanged.notify(o,"bounds")},o._onBleedPropertyChanged=function(t,e){o._validateMargin(o.bleed,"bleed"),o._propertyChanged.notify(o,"bleed")},o._onSlugPropertyChanged=function(t,e){o._validateMargin(o.slug,"slug"),o._propertyChanged.notify(o,"slug")},o._validateMargin(n,"bleed"),o._validateMargin(r,"slug"),o._bounds=null!==e&&void 0!==e?e:new i.a,o.bleed=null!==n&&void 0!==n?n:new s.a,o.slug=null!==r&&void 0!==r?r:new s.a,o}return h(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this._bounds},set:function(t){this._bounds.equals(t)||(this._unsubscribeBoundsPropertyChanged(),this._bounds=t,this._subscribeBoundsPropertyChanged(),this._propertyChanged.notify(this,"bounds"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"safetyLines",{get:function(){return this._safetyLines},set:function(t){this._safetyLines!==t&&(this._safetyLines=t,this._propertyChanged.notify(this,"safetyLines"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cropMarks",{get:function(){return this._cropMarks},set:function(t){this._cropMarks!==t&&(this._cropMarks=t,this._propertyChanged.notify(this,"cropMarks"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bleed",{get:function(){return this._bleed},set:function(t){Object(c.h)(t,this._bleed)||(this._validateMargin(t,"bleed"),this._unsubscribeBleedPropertyChanged(),this._bleed=t,this._subscribeBleedPropertyChanged(),this._propertyChanged.notify(this,"bleed"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slug",{get:function(){return this._slug},set:function(t){Object(c.h)(t,this._slug)||(this._validateMargin(t,"slug"),this._unsubscribeSlugPropertyChanged(),this._slug=t,this._subscribeSlugPropertyChanged(),this._propertyChanged.notify(this,"slug"))},enumerable:!0,configurable:!0}),e.prototype.getBounds=function(t){switch(t){case l.a.Bleed:return this.bounds.getShrinked(this.bleed);case l.a.Total:return this.bounds.getShrinked(new s.a({left:this.bleed.left+this.slug.left,top:this.bleed.top+this.slug.top,right:this.bleed.right+this.slug.right,bottom:this.bleed.bottom+this.slug.bottom}));default:return this.bounds.clone()}},e.prototype._subscribeBoundsPropertyChanged=function(){null!=this._bounds&&this._bounds.addPropertyChanged(this._onBoundsPropertyChanged)},e.prototype._unsubscribeBoundsPropertyChanged=function(){null!=this._bounds&&this._bounds.removePropertyChanged(this._onBoundsPropertyChanged)},e.prototype._subscribeBleedPropertyChanged=function(){null!=this._bleed&&this._bleed.addPropertyChanged(this._onBleedPropertyChanged)},e.prototype._unsubscribeBleedPropertyChanged=function(){null!=this._bleed&&this._bleed.removePropertyChanged(this._onBleedPropertyChanged)},e.prototype._subscribeSlugPropertyChanged=function(){null!=this._slug&&this._slug.addPropertyChanged(this._onSlugPropertyChanged)},e.prototype._unsubscribeSlugPropertyChanged=function(){null!=this._slug&&this._slug.removePropertyChanged(this._onSlugPropertyChanged)},e.prototype._validateMargin=function(t,e){if(null!=t&&(t.left<0||t.top<0||t.right<0||t.bottom<0))throw new u.a("PrintArea.ts: "+e+" margin members cannot be negative!")},e.prototype.getSimplifiedObject=function(){return t.prototype.getSimplifiedObject.call(this,["parentSurface","boundsWithMargins","boundsWithBleed"])},e.prototype._copy=function(e,n,r){var o,i;t.prototype._copy.call(this,e,n,r),n.bounds=null!=e.bounds?e.bounds.clone():null,n.safetyLines.addRange(e.safetyLines.toArray().map(function(t){return t.clone()})),n.cropMarks.addRange(e.cropMarks.toArray().map(function(t){return t.clone()})),n.bleed=null===(o=e.bleed)||void 0===o?void 0:o.clone(),n.slug=null===(i=e.slug)||void 0===i?void 0:i.clone()},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e.prototype.generateNewIds=function(){this._generateNewId()},e}(o.a)},555:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(398),i=n(384),a=n(402),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e){var n,r,o,a,s,l,u,c,h,p,f,d,y=t.call(this)||this;y._propertyChanged=new i.c;var g=e;return y._left=null!==(o=null!==(r=null!==(n=null===g||void 0===g?void 0:g.left)&&void 0!==n?n:null===g||void 0===g?void 0:g.horizontal)&&void 0!==r?r:g)&&void 0!==o?o:0,y._top=null!==(l=null!==(s=null!==(a=null===g||void 0===g?void 0:g.top)&&void 0!==a?a:null===g||void 0===g?void 0:g.vertical)&&void 0!==s?s:g)&&void 0!==l?l:0,y._right=null!==(h=null!==(c=null!==(u=null===g||void 0===g?void 0:g.right)&&void 0!==u?u:null===g||void 0===g?void 0:g.horizontal)&&void 0!==c?c:g)&&void 0!==h?h:0,y._bottom=null!==(d=null!==(f=null!==(p=null===g||void 0===g?void 0:g.bottom)&&void 0!==p?p:null===g||void 0===g?void 0:g.vertical)&&void 0!==f?f:g)&&void 0!==d?d:0,y}return s(e,t),Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){Object(o.e)(t,this._left)||(this._left=t,this._propertyChanged.notify(this,"left"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},set:function(t){Object(o.e)(t,this._top)||(this._top=t,this._propertyChanged.notify(this,"top"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){Object(o.e)(t,this._right)||(this._right=t,this._propertyChanged.notify(this,"right"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},set:function(t){Object(o.e)(t,this._bottom)||(this._bottom=t,this._propertyChanged.notify(this,"bottom"))},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e({left:this.left,top:this.top,right:this.right,bottom:this.bottom})},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._left&&0===this._top&&0===this._right&&0===this._bottom},enumerable:!0,configurable:!0}),e.prototype.equals=function(t){return this.left===t.left&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom},e.prototype.getSimplifiedObject=function(){return{left:this.left,top:this.top,right:this.right,bottom:this.bottom}},e.prototype.addPropertyChanged=function(t){this._propertyChanged.add(t)},e.prototype.removePropertyChanged=function(t){this._propertyChanged.remove(t)},e}(a.a)},556:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,o=n(402),i=n(416),a=n(471),s=n(387),l=n(393),u=n(381),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return n._defaultSafetyLines=new l.a,n._defaultCropMarks=new l.a,n.defaultDesignLocation=new u.PointF,n._onSurfacesAdd=function(t){t.item.parentProduct=n},n._surfaces=new l.a,n.surfaces.add_collectionChanged(n._onSurfacesAdd),n.surfaces.setRange(e),n}return c(e,t),Object.defineProperty(e.prototype,"surfaces",{get:function(){return this._surfaces},set:function(t){this.surfaces.setRange(t)},enumerable:!0,configurable:!0}),e.prototype.serialize=function(t){return i.a.getProductSerializer().serialize(this,t)},Object.defineProperty(e.prototype,"defaultSafetyLines",{get:function(){return this._defaultSafetyLines},set:function(t){this._defaultSafetyLines!==t&&(this._defaultSafetyLines=t,this._propertyChanged.notify(this,"defaultSafetyLines"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultCropMarks",{get:function(){return this._defaultCropMarks},set:function(t){this._defaultCropMarks!==t&&(this._defaultCropMarks=t,this._propertyChanged.notify(this,"defaultCropMarks"))},enumerable:!0,configurable:!0}),e.prototype._copy=function(e,n,r){t.prototype._copy.call(this,e,n,r),n.surfaces.addRange(e.surfaces.toArray().map(function(t){return t.clone(r)})),n.watermarkConfig=null!=e.watermarkConfig?e.watermarkConfig.clone():null,n.defaultCropMarks.addRange(e.defaultCropMarks.toArray().map(function(t){return t.clone()})),n.defaultSafetyLines.addRange(e.defaultSafetyLines.toArray().map(function(t){return t.clone()})),n.defaultDesignLocation=e.defaultDesignLocation.clone()},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e.prototype.getAllItems=function(t){return void 0===t&&(t={ignoreMockups:!1}),a.a.getItems(this.surfaces,t)},e.prototype.generateNewIds=function(){this._generateNewId(),this._surfaces.forEach(function(t){return t.generateNewIds()})},e.prototype.getSurface=function(t){var e=this.surfaces.toArray(),n=parseInt(t);return NaN!=n&&n>=0&&e.length>n?e[n]:s.find(e,function(e){return e.name===t})},e}(o.a)},557:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,o=n(415),i=n(408),a=n(421),s=n(386),l=n(398),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(n,r,o,l,u,c){var h=t.call(this)||this;return h.type=e.type,h._location=new i.a(n,r),h._cols=o,h._rows=l,h._stepX=u,h._stepY=c,h._horizontalLineColor=new s.RgbColor("rgba(0,0,0,1)"),h._verticalLineColor=new s.RgbColor("rgba(0,0,0,1)"),h._lineWidth=1,h._fixedLineWidth=!0,h.textWrappingMode=a.a.None,h}return u(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this._location},set:function(t){i.a.isEqual(this._location,t)||(this._location=t,this._propertyChanged.notify(this,"location"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._cols},set:function(t){l.e(this._cols,t)||(this._cols=t,this._propertyChanged.notify(this,"cols"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},set:function(t){l.e(this._rows,t)||(this._rows=t,this._propertyChanged.notify(this,"rows"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stepX",{get:function(){return this._stepX},set:function(t){l.e(this._stepX,t)||(this._stepX=t,this._propertyChanged.notify(this,"stepX"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stepY",{get:function(){return this._stepY},set:function(t){l.e(this._stepY,t)||(this._stepY=t,this._propertyChanged.notify(this,"stepY"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){l.e(this._lineWidth,t)||(this._lineWidth=t,this._propertyChanged.notify(this,"lineWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedLineWidth",{get:function(){return this._fixedLineWidth},set:function(t){this._fixedLineWidth!==t&&(this._fixedLineWidth=t,this._propertyChanged.notify(this,"fixedLineWidth"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalLineColor",{get:function(){return this._verticalLineColor},set:function(t){s.Color.equals(this._verticalLineColor,t)||(this._verticalLineColor=t,this._propertyChanged.notify(this,"verticalLineColor"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalLineColor",{get:function(){return this._horizontalLineColor},set:function(t){s.Color.equals(this._horizontalLineColor,t)||(this._horizontalLineColor=t,this._propertyChanged.notify(this,"horizontalLineColor"))},enumerable:!0,configurable:!0}),e.type="GridItem",e}(o.a)},558:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(402),i=n(383),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},l=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},u=function(t){function e(e,n,r,o,i){var a=t.call(this)||this;return a.id=e,a._name=n,a._mask=r,a._value=o,a._values=i,a}return a(e,t),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){t!=this._mask&&(this._mask=t,this._propertyChanged.notify(this,"mask"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t!=this._value&&(this._value=t,this._propertyChanged.notify(this,"value"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!=this._values&&(this._values=t,this._propertyChanged.notify(this,"values"))},enumerable:!0,configurable:!0}),e.prototype.generateNewIds=function(){this._generateNewId()},e.prototype._copy=function(e,n,r){return t.prototype._copy.call(this,e,n,!1),n.mask=e.mask,n.value=e.value,n.values=l(e.values),n},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=new e;return this._copy(this,n,t),n},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&Object(i.h)(this.mask,e.mask)&&Object(i.h)(this.value,e.value)&&Object(i.c)(this.values,e.values)},e.prototype.getSimplifiedObject=function(){return{id:this.id,mask:this.mask,value:this.value,values:this.values,name:this.name}},e}(o.a)},559:function(t,e,n){"use strict";n.d(e,"g",function(){return w}),n.d(e,"h",function(){return o}),n.d(e,"a",function(){return i}),n.d(e,"d",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"f",function(){return C}),n.d(e,"e",function(){return P});var r,o,i,a,s,l,u=n(496),c=n(384),h=n(381),p=n(382),f=n(400),d=n(383),y=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},m=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},_=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},v=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},b=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t},w=function(t){function e(n,r){var o=t.call(this,n)||this;return o.type=e.type,o._onLayoutSettingsChanged=function(t){o._propertyChanged.notify(o,t)},o.layoutSettings=null!=r?r:new C,o}return y(e,t),e.prototype.getSimplifiedObject=function(e){var n,r;void 0===e&&(e=[]);var o=t.prototype.getSimplifiedObject.call(this,["layoutSettings"].concat(e));return o.layoutSettings=null===(n=this.layoutSettings)||void 0===n?void 0:n.getSimplifiedObject(),o.sourceRectangle=null===(r=this.sourceRectangle)||void 0===r?void 0:r.toJSON(),o},e.prototype._copy=function(e,n,r,o){var i;t.prototype._copy.call(this,e,n,r,o),r&&this._copyItemsOrder(e,n),n.layoutSettings=e.layoutSettings.clone(),n.sourceRectangle=null===(i=e.sourceRectangle)||void 0===i?void 0:i.clone()},e.prototype._copyItemsOrder=function(t,e){var n=t.getItemsOrder().map(function(n){var r=t.items.indexOf(function(t){return t.id==n});return e.items.get(r).id});e.setItemsOrder(n)},e.prototype.clone=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=new e;return this._copy(this,r,t,n),r},Object.defineProperty(e.prototype,"layoutSettings",{get:function(){return this._layoutSettings},set:function(t){if(null==t)throw new Error("LayoutSettings can't be null");null!=this._layoutSettings&&this._layoutSettings.propertyChanged.remove(this._onLayoutSettingsChanged),this._layoutSettings=t,this._layoutSettings.propertyChanged.add(this._onLayoutSettingsChanged),this._onLayoutSettingsChanged("layoutSettings")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceRectangle",{get:function(){return this._sourceRectangle},set:function(t){if(null!=this._sourceRectangle&&null==t)throw new Error("LayoutItem.sourceRectangle can't be null");null!=t&&t.equals(this._sourceRectangle)||(this._unsubscribeSourceRectangle(),this._sourceRectangle=t,this._subscribeSourceRectangle(),this._propertyChanged.notify(this,"sourceRectangle"))},enumerable:!0,configurable:!0}),e.prototype._subscribeSourceRectangle=function(){this._sourceRectangle},e.prototype._unsubscribeSourceRectangle=function(){this._sourceRectangle},e.prototype.addItems=function(n,r,o){if(!Number.isInteger(o))throw new Error("orderIndex must not be null");var i=this.getItemsOrder();i=e._insertToOrder(i,n.map(function(t){return t.id}),o),this.setItemsOrder(i),t.prototype.addItems.call(this,n,r)},e.prototype.removeItems=function(e){var n=this.getItemsOrder();e.forEach(function(t){return n=n.filter(function(e){return e!==t.id})}),this.setItemsOrder(n),t.prototype.removeItems.call(this,e)},e.prototype.addItem=function(n,r,o){var i=this.getItemsOrder();i=e._insertToOrder(i,[n.id],o),this.setItemsOrder(i),t.prototype.addItem.call(this,n,r)},e._insertToOrder=function(t,e,n){var r=t.slice(0,n),o=t.slice(n);return t=r.concat(e,o)},e.prototype.setItemsOrder=function(t){this.tags[e._layoutItemsOrderTagKey]=t},e.prototype.getItemsOrder=function(){var t=this.tags[e._layoutItemsOrderTagKey];return null==t?null:t instanceof Array?t:null},e.prototype.getItemOrderIndex=function(t){return this.items.indexOf(t)<0?-1:this.getItemsOrder().indexOf(t.id)},e.generateAutoLayoutSettings=function(t,e,n,r,o){var l=new P,u=t.map(function(t){return t.left}),c=t.map(function(t){return t.right}),p=t.map(function(t){return t.top}),f=t.map(function(t){return t.bottom}),d=t.map(function(t){return t.center.x}),y=t.map(function(t){return t.center.y});null==n&&(n=Math.max.apply(Math,b(d))-Math.min.apply(Math,b(d))>Math.max.apply(Math,b(y))-Math.min.apply(Math,b(y))?a.horizontal:a.vertical);if(l.orientation=n,null==e)switch(l.orientation){case a.horizontal:e=Object(h.EqualsOfFloatNumbers)(Math.max.apply(Math,b(p)),Math.min.apply(Math,b(p)),5)?i.start:Object(h.EqualsOfFloatNumbers)(Math.max.apply(Math,b(y)),Math.min.apply(Math,b(y)),5)?i.center:Object(h.EqualsOfFloatNumbers)(Math.max.apply(Math,b(f)),Math.min.apply(Math,b(f)),5)?i.end:i.none;break;case a.vertical:e=Object(h.EqualsOfFloatNumbers)(Math.max.apply(Math,b(u)),Math.min.apply(Math,b(u)),5)?i.start:Object(h.EqualsOfFloatNumbers)(Math.max.apply(Math,b(d)),Math.min.apply(Math,b(d)),5)?i.center:Object(h.EqualsOfFloatNumbers)(Math.max.apply(Math,b(c)),Math.min.apply(Math,b(c)),5)?i.end:i.none}l.alignItems=e;for(var g=l.orientation===a.horizontal?t.sort(function(t,e){return t.left-e.left}):t.sort(function(t,e){return t.top-e.top}),m=[],_=1;_<g.length;_++){var v=g[_-1],w=g[_];m.push(l.orientation===a.horizontal?w.left-v.right:w.top-v.bottom)}return null==r&&(r=Math.max(0,Math.min.apply(Math,b(m.map(Math.round))))),l.margin=r,null==o&&(o=Object(h.EqualsOfFloatNumbers)(Math.max.apply(Math,b(m)),Math.min.apply(Math,b(m)),2)?s.stretch:s.spaceBetween),l.justifyContent=o,l},e.prototype.isChildVisible=function(t){return!(t instanceof p.BaseTextItem)||!t.isEmpty()},e.prototype.equals=function(e){var n=t.prototype.equals.call(this,e),r=Object(d.h)(this.sourceRectangle,e.sourceRectangle),o=Object(d.h)(this.layoutSettings,e.layoutSettings);return n&&r&&o},e._layoutItemsOrderTagKey="$layoutItemsOrder",e.type="LayoutItem",e}(u.a);!function(t){t[t.default=0]="default",t[t.auto=1]="auto"}(o||(o={})),function(t){t[t.none=0]="none",t[t.center=1]="center",t[t.start=2]="start",t[t.end=3]="end"}(i||(i={})),function(t){t[t.vertical=0]="vertical",t[t.horizontal=1]="horizontal"}(a||(a={})),function(t){t[t.stretch=0]="stretch",t[t.spaceBetween=1]="spaceBetween"}(s||(s={})),function(t){t[t.start=0]="start",t[t.center=1]="center",t[t.end=2]="end"}(l||(l={}));var C=function(){function t(){this.type=t.type,this.propertyChanged=new c.a}return t.prototype.clone=function(){return new t},t.prototype.getSimplifiedObject=function(){var e={};return e.type=t.type,e},t.prototype.equals=function(t){return Object(d.h)(this.type,t.type)},t.type="DefaultLayoutSettings",t}(),P=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._margin=0,n._orientation=a.vertical,n._alignItems=i.none,n._anchorPoint=l.start,n._justifyContent=s.stretch,n}return y(e,t),Object.defineProperty(e.prototype,"margin",{get:function(){return this._margin},set:function(t){if(null==t)throw new Error("Margin can't be null");t!==this.margin&&(this._margin=t,this.propertyChanged.notify("margin"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(t){if(null==t)throw Error("Orientation can't be null");t!==this.orientation&&(this._orientation=t,this.propertyChanged.notify("orientation"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignItems",{get:function(){return this._alignItems},set:function(t){if(null==t)throw new Error("alignItems can't be null");t!==this.alignItems&&(this._alignItems=t,this.propertyChanged.notify("alignItems"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"justifyContent",{get:function(){return this._justifyContent},set:function(t){if(null==t)throw new Error("JustifyContent can't be null");t!==this.justifyContent&&(this._justifyContent=t,this.propertyChanged.notify("justifyContent"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorPoint",{get:function(){return this._anchorPoint},set:function(t){if(null==t)throw new Error("anchorPoint can't be null");t!==this._anchorPoint&&(this._anchorPoint=t,this.propertyChanged.notify("anchorPoint"))},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;return t.orientation=this.orientation,t.alignItems=this.alignItems,t.justifyContent=this.justifyContent,t.margin=this.margin,t.anchorPoint=this.anchorPoint,t},e.prototype.getSimplifiedObject=function(){var n=t.prototype.getSimplifiedObject.call(this);return n.type=e.type,n.orientation=this.orientation,n.alignItems=this.alignItems,n.justifyContent=this.justifyContent,n.margin=this.margin,n.anchorPoint=this.anchorPoint,n},e.prototype.equals=function(e){var n=t.prototype.equals.call(this,e),r=Object(d.h)(this.orientation,e.orientation),o=Object(d.h)(this.alignItems,e.alignItems),i=Object(d.h)(this.margin,e.margin),a=Object(d.h)(this.anchorPoint,e.anchorPoint);return n&&r&&o&&i&&a},e.type="AutoLayoutSettings",m([Object(f.a)({ignore:!0}),_("design:type",Object)],e.prototype,"type",void 0),m([Object(f.a)({enumObject:g({},a)}),_("design:type",Object),_("design:paramtypes",[Object])],e.prototype,"orientation",null),m([Object(f.a)({enumObject:i}),_("design:type",Object),_("design:paramtypes",[Object])],e.prototype,"alignItems",null),m([Object(f.a)({enumObject:s}),_("design:type",Object),_("design:paramtypes",[Object])],e.prototype,"justifyContent",null),m([Object(f.a)({enumObject:l}),_("design:type",Number),_("design:paramtypes",[Number])],e.prototype,"anchorPoint",null),e}(C)},560:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(384),o=n(383),i=function(){function t(){this._vectorMask=null,this._maskChangedEvent=new r.a}return Object.defineProperty(t.prototype,"vectorMask",{get:function(){return this._vectorMask},set:function(t){this._vectorMask=t,this._maskChangedEvent.notify(this)},enumerable:!0,configurable:!0}),t.prototype.addMaskChanged=function(t){this._maskChangedEvent.add(t)},t.prototype.removeMaskChanged=function(t){this._maskChangedEvent.remove(t)},t.prototype.clone=function(){var e=new t;return e.vectorMask=null!=this.vectorMask?this.vectorMask.clone():null,e},t.prototype.equals=function(t){return Object(o.h)(this.vectorMask,t.vectorMask)},t.prototype.getSimplifiedObject=function(){var t={};return t.vectorMask=null!=this.vectorMask?this.vectorMask.toString():null,t},t}()},561:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(414),o=function(){function t(t,e){null==t&&(t={}),null==e&&(e=!0),this.noPrint=null==t.NoPrint?e:!!t.NoPrint,this.noShow=null==t.NoShow?e:!!t.NoShow,this.allowDelete=null==t.AllowDelete?e:!!t.AllowDelete,this.allowMoveHorizontal=null==t.AllowMoveHorizontal?e:!!t.AllowMoveHorizontal,this.allowMoveVertical=null==t.AllowMoveVertical?e:!!t.AllowMoveVertical,this.allowRotate=null==t.AllowRotate?e:!!t.AllowRotate,this.resizeGrips=null==t.ResizeGrips?new r.a(e,e):r.a._fromData(t.ResizeGrips),this.allowEditContent=null==t.AllowEditContent?e:!!t.AllowEditContent,this.showSelectButton=null==t.ShowSelectButton?e:!!t.ShowSelectButton,this.showHandleButton=null==t.ShowHandleButton?e:!!t.ShowHandleButton,this.showDoneButton=null==t.ShowDoneButton?e:!!t.ShowDoneButton,this.showDeleteToolbarButton=null==t.ShowDeleteToolbarButton?e:!!t.ShowDeleteToolbarButton,this.showEditToolbarButton=null==t.ShowEditToolbarButton?e:!!t.ShowEditToolbarButton,this.showSelectToolbarButton=null==t.ShowSelectToolbarButton?e:!!t.ShowSelectToolbarButton,this.allowDragAndDrop=null==t.AllowDragAndDrop?e:!!t.AllowDragAndDrop}return t.prototype.clone=function(){var e=new t;for(var n in this)this.hasOwnProperty(n)&&("resizeGrips"!==n?e[n]=this[n]:e.resizeGrips=null!=this.resizeGrips?this.resizeGrips.clone():null);return e},Object.defineProperty(t.prototype,"allowProportionalResize",{get:function(){return this.resizeGrips.getCornerProportional()},set:function(t){this.resizeGrips.setCornerProportional(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowArbitraryResize",{get:function(){return!!this.resizeGrips&&(this.resizeGrips.getCornerArbitrary()||this.resizeGrips.edge)},set:function(t){this.resizeGrips.setCornerArbitrary(t),this.resizeGrips.edge=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowResize",{get:function(){return this.allowProportionalResize||this.allowArbitraryResize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowFreeMove",{get:function(){return this.allowMoveHorizontal&&this.allowMoveVertical},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMove",{get:function(){return this.allowMoveHorizontal||this.allowMoveVertical},enumerable:!0,configurable:!0}),t}()},562:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.Hidden=0]="Hidden",t[t.Bottom=1]="Bottom",t[t.Active=2]="Active",t[t.Top=3]="Top"}(r||(r={}))},563:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(381),o=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},i=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=function(){function t(){}return t.getBounds=function(t,e,n){var r;return o(this,void 0,void 0,function(){var o;return i(this,function(i){switch(i.label){case 0:return null===(r=this.getBoundsSync(t,e))||void 0===r?[3,1]:(o=r,[3,3]);case 1:return[4,n.getPathBoundsFromServer(t)];case 2:o=i.sent(),i.label=3;case 3:return[2,o]}})})},t.getBoundsSync=function(t,e){if(void 0===e&&(e=null),null!=e){var n=t.toTextWhizzPath(e).getBounds();return new r.RectangleF(n.x,n.y,n.width,n.height)}return this._isDomBoundsEnabled?this._getDOMBounds(t):null},Object.defineProperty(t,"_isDomBoundsEnabled",{get:function(){return!this._getDOMBounds(this._testRectangle).isEmpty()},enumerable:!0,configurable:!0}),t._getDOMBounds=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.position="absolute",e.style.visibility="hidden";var n=document.createElementNS("http://www.w3.org/2000/svg","path");e.appendChild(n),n.setAttribute("d",t.toString());var o=document.querySelector("body");o.appendChild(e);var i=n.getBBox(),a=new r.RectangleF(i.x,i.y,i.width,i.height);return o.removeChild(e),a},t._testRectangle=r.Path.rectangle(0,0,10,10),t}()},564:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(435),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=t.call(this,e)||this;return n.__type="ImageHandlerData",e&&(n.DI=e.needToDownloadImage,n.SAS=e.takeIntoAccountImageDpi,n.HR=e.sourceImageHorizontalResolution,n.VR=e.sourceImageVerticalResolution),n}return i(e,t),e.prototype.applyState=function(e,n){n&&(n.beginUpdate(),n.sourceImageHorizontalResolution=e.HR,n.sourceImageVerticalResolution=e.VR,n.needToDownloadImage=e.DI,n.takeIntoAccountImageDpi=e.SAS,t.prototype.applyState.call(this,e,n))},e}(o.a)},565:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,o=n(435),i=n(508),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=this,r=e._editing;if(r&&(e._editing=!1),n=t.call(this,e)||this,e._editing=r,n.__type="PlaceholderHandlerData",e){e.isEmptyContent()?n.CT=null:n.CT=e.getTypeName();var o=e.topFrames;if(null!=o){n.TFCT=[],n.TFCD=[];for(var i=0;i<o.length;i++)n.TFCD.push(o[i].getData()),n.TFCT.push(o[i].getTypeName())}var a=e.bottomFrames;if(null!=a){n.BFCT=[],n.BFCD=[];for(i=0;i<a.length;i++)n.BFCD.push(a[i].getData()),n.BFCT.push(a[i].getTypeName())}n.SMC=e.showMaskedContent}return n}return a(e,t),e.prototype.applyState=function(e,n){if(n){if(n.beginUpdate(),null!=e.TFCD&&0!==e.TFCD.length){for(var r=[],o=0;o<e.TFCD.length;o++)if(null!=e.TFCT[o]){var a=(new i.a).create(e.TFCT[o]);a.setData(e.TFCD[o]),r.push(a)}n.topFrames=r}if(null!=e.BFCD&&0!==e.BFCD.length){var s=[];for(o=0;o<e.BFCD.length;o++)if(null!=e.BFCT[o]){var l=(new i.a).create(e.BFCT[o]);l.setData(e.BFCD[o]),s.push(l)}n.bottomFrames=s}n.showMaskedContent=e.SMC,t.prototype.applyState.call(this,e,n)}},e}(o.a)},566:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(411),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"center":case"bend":case"warp":this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n),this.item.center=e.center,this.item.bend=e.bend,this.item.warp=e.warp},e.typeName="ArchedTextItemHandler",e}(o.a)},567:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,o=n(411),i=n(381),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return a(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"isVertical":this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n),this.item.textRectangle=e.textRectangle,this.item.isVertical=e.isVertical},Object.defineProperty(e.prototype,"originalTextRectangle",{get:function(){return this.item.textRectangle},set:function(t){this.item.textRectangle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalScale",{get:function(){return this.item.verticalScale},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalScale",{get:function(){return this.item.horizontalScale},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this.item.isVertical},set:function(t){this.item.isVertical=t},enumerable:!0,configurable:!0}),e.prototype.getTextRectangle=function(){var t=this.getControlCenter(),e=i.RotatedRectangleF.fromRectangleF(this.item.textRectangle);return e.transform(this.item.transform.clone(),t),e.toRectangleF()},e.prototype._updateEmptyTextControlPoints=function(){var t=this.item.textRectangle;this._controlPoints[0].x=t.left,this._controlPoints[0].y=t.top,this._controlPoints[1].x=t.right,this._controlPoints[1].y=t.bottom;var e=this.canvas;null!=e&&e.redraw()},e.prototype._setDefaultTextControlPoints=function(){},e.typeName="AutoScaledTextItemHandler",e}(o.a)},568:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(435),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=t.call(this,e)||this;if(n.__type="BarcodeHandlerData",null==e||null==e.canvas)return n;if(e.canvas.viewer.configuration&&e.canvas.viewer.configuration.stubImages&&e.canvas.viewer.configuration.stubImages.barcode){var r=e.canvas.viewer.configuration.stubImages.barcode;n.stubText=r.text,n.stubPostScriptName=r.postScriptName}var o=(null!=e.item.parentPlaceholder?e.item.parentPlaceholder.parentContainer.parentComponent:e.item.parentContainer.parentComponent).printAreas.getItem(0);return n.dpi=e.canvas.viewer.configuration&&e.canvas.viewer.configuration.renderingConfig?e.canvas.viewer.configuration.renderingConfig.getHiResRendering(o).dpi:72,n.size=Math.round(Math.max(o.bounds.width,o.bounds.height)/2),n}return i(e,t),e.prototype.applyState=function(e,n){n&&(n.beginUpdate(),n.currentFileId=e.currentFileId,n.stubTextImageFileId=e.stubTextImageFileId,n.errorMessage=e.errorMessage),t.prototype.applyState.call(this,e,n)},e}(o.a)},569:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r,o=n(494),i=n(568),a=n(500),s=n(473),l=n(392),u=n(381),c=n(391),h=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e,n){void 0===n&&(n=null);var r=t.call(this,e,n)||this;return r.currentFileId=null,r.stubTextImageFileId=null,r.errorMessage=null,r._maxImageSize=4e6,r._stubTextImageContainer=new s.a(r._onstubTextImageLoaded.bind(r)),r}return h(e,t),e.prototype._createDataInstance=function(t){return new i.a(t)},Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"barcodeContent":case"barcodeFormat":case"barcodeOptions":case"color":this.currentFileId=null,this.stubTextImageFileId=null,this.errorMessage=null,this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._createImageUrl=function(){var t,e,n=this.canvas;if(null==this.currentFileId||null==n)return null;var r=n.zoom,o=r*c.a.screenDpi/72,i=r*c.a.screenDpi/72,s=this.rectangle;t=s.width*o,e=s.height*i;var l=this._maxImageSize/t/e;return l<1&&(t*=l=Math.sqrt(l),e*=l),t=Math.round(t),e=Math.round(e),this._pixelWidth=t,this._pixelHeight=e,a.a.getImageUrl(n,this.currentFileId,this._pixelWidth,this._pixelHeight,!1)},e.prototype._createStubTextImageUrl=function(){if(null!=this.stubTextImageFileId)return a.a.getImageUrl(this.canvas,this.stubTextImageFileId,this._pixelWidth,this._pixelHeight,!1)},e.prototype.update=function(e,n){if(this.isVisible())if(null==this.currentFileId&&null==this.errorMessage)t.prototype._update.call(this,null,e,n);else{this.quickUpdate();var r=this.canvas;null!=r&&r.updateSelection()}},Object.defineProperty(e.prototype,"ready",{get:function(){return this._imageContainer.isLoaded&&!(this.item.barcodeData.isEmpty&&!this._stubTextImageContainer.isLoaded)},enumerable:!0,configurable:!0}),e.prototype._isLoadingImage=function(){return this._imageContainer.isLoading||!(this.item.barcodeData.isEmpty&&!this._stubTextImageContainer.isLoading)},e.prototype._setIsLoadingImage=function(t){this._imageContainer.isLoading=t,this.item.barcodeData.isEmpty&&(this._stubTextImageContainer.isLoading=t)},e.prototype._updateImageUrl=function(){t.prototype._updateImageUrl.call(this),this._updateStubTextImageUrl()},e.prototype._updateStubTextImageUrl=function(){if(this.isVisible()){var t=this.canvas;if(null!=t&&t.isInitialized){var e=this._createStubTextImageUrl();e!==this._stubTextImageContainer.source&&(null==e?(this._stubTextImageContainer.clear(),t.redraw()):this._stubTextImageContainer.updateUrl(e))}}},e.prototype._onstubTextImageLoaded=function(t,e){this._stubTextImageContainer.isLoading=!1,this._imageContainer.isLoading||(null!=this.canvas&&this.canvas.redraw(),this._dispatchReadyEvent())},e.prototype._onImageLoaded=function(t,e){this._imageContainer.isLoading=!1,this._stubTextImageContainer.isLoading||(null!=this.canvas&&this.canvas.redraw(),this._dispatchReadyEvent())},e.prototype.quickUpdate=function(){this.isVisible()&&this.canvas&&!this.canvas.service.imageLoaderService.hasImageContainerFor(this.currentFileId)&&t.prototype.quickUpdate.call(this)},e.prototype.drawItemHandler=function(t){if(null!=t){var e=null!=this.parentPlaceholder?this.parentPlaceholder.rectangle:this.rectangle,n=this.rectangle,r=this.isNormalRenderingType||0===this.item.fillColor.alpha?this.item.fillColor.preview:"rgba(0,0,0,0)",o=this.isNormalRenderingType?this.item.opacity:1;l.a.fillRectangle(t,n,r,o),this._imageContainer.isLoaded&&this._drawImage(t,this.canvas.disableSmoothing),this._stubTextImageContainer.isLoaded&&this._drawImage(t,this.canvas.disableSmoothing,1,this._stubTextImageContainer.image),(this._imageContainer.isLoading||this._stubTextImageContainer.isLoading)&&this.canvas.drawWaitClock(t,new u.PointF(e.centerX,e.centerY));var i=this._getActualBorderWidth();if(i>0){n.width+=i,n.height+=i;var a=this.isNormalRenderingType||0===this.item.borderColor.alpha?this.item.borderColor.preview:"rgb(0,0,0)";l.a.drawRectangle(t,n,i,a,this.item.opacity)}}},e.prototype._onResized=function(){return this.update(),t.prototype._onResized.call(this)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._stubTextImageContainer.dispose()},e.typeName="BarcodeItemHandler",e}(o.a)},570:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(502),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=t.call(this,e)||this;return n.__type="CurvedTextHandlerData",null==e?n:(n.firstUpdateIsComplete=e.firstUpdateIsComplete,n)}return i(e,t),e.prototype.applyState=function(e,n){t.prototype.applyState.call(this,e,n),null!=n&&(n.firstUpdateIsComplete=e.firstUpdateIsComplete)},e}(o.a)},571:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(381),i=n(411),a=n(392),s=n(570),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return l(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._setDataItem=function(e,n){t.prototype._setDataItem.call(this,e,n),this.item.textPath=e.textPath,this.item.fitToPath=e.fitToPath,this.item.fitToPathStep=e.fitToPathStep,this.item.stretch=e.stretch,this.item.originalFontSize=e.originalFontSize,this.item.start=e.start,this.item.end=e.end},e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"textPath":case"fitToPath":case"fitToPathStep":case"stretch":case"originalFontSize":case"start":case"end":this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},Object.defineProperty(e.prototype,"textPath",{get:function(){var t=this.getControlCenter(),e=this.item.textPath.clone(),n=this.item.transform.clone();return e.transform(n,t),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalTextPath",{get:function(){return this.item.textPath},set:function(t){this.item.textPath=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitToPath",{get:function(){return this.item.fitToPath},set:function(t){this.item.fitToPath=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stretch",{get:function(){return this.item.stretch},set:function(t){this.item.stretch=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalFontSize",{get:function(){return this.item.originalFontSize},set:function(t){this.item.originalFontSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitToPathStep",{get:function(){return this.item.fitToPathStep},set:function(t){this.item.fitToPathStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.item.start},set:function(t){this.item.start=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.item.end},set:function(t){this.item.end=t},enumerable:!0,configurable:!0}),e.prototype._onResized=function(){var e=this.rectangle.height/this._height,n=parseFloat((this.item.font.size*e).toFixed(1)),r=this.canvas;if(null!=r){var i=r.minFontSize;n="number"==typeof i?Math.max(n,i):n;var a=r.maxFontSize;n="number"==typeof a?Math.min(n,a):n}return Object(o.EqualsOfFloatNumbers)(n,this.item.font.size,.01)?(null!=this._startRectangle?(this.setRectangle(this._startRectangle),r.updateSelection(),delete this._startRectangle):this.update(),!1):t.prototype._onResized.call(this)},e.prototype.drawItemHandler=function(e){t.prototype.drawItemHandler.call(this,e),!0===window.__$abl$&&a.a.drawPath(e,this.item.textPath,this.getControlCenter(),this.item.transform,1,"red",1)},e.prototype._setDefaultTextControlPoints=function(){this._updateEmptyTextControlPoints()},e.prototype._createDataInstance=function(t){return new s.a(t)},e.typeName="CurvedTextItemHandler",e}(i.a)},572:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,o=n(381),i=n(382),a=n(451),s=n(392),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=function(t){function e(e,n){void 0===n&&(n=null);var r=t.call(this,e,n)||this;return r.lastRectangle=null,r}return l(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._getFrames=function(){if(this.item instanceof i.BoundedTextItem){var t=this.item.textRectangle;return[o.Path.rectangle(t.left,t.top,t.width,t.height)]}return this.item.boundingPaths},e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"textRectangle":case"boundingPaths":case"firstBaselineOffset":case"firstBaselineMinOffset":this.update(null,null,"frame");break;case"wrappingPath":case"wrappingMargin":this.update(null,null,this.item.transform.isEmpty?"wrappingPath":null);break;case"verticalAlignment":case"isVertical":case"shrinkMode":case"scheduledFitMode":case"paragraphSettings":case"overflowStrategy":this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._transformText=function(e){this.canvas.isResizing()||null!=this.item.wrappingPath?this.update(null,null,"frame"):t.prototype._transformText.call(this,e)},e.prototype.renderFill=function(t){var e=this.item,n=this.getControlCenter(),r=this.item.transform;this._getFrames().forEach(function(o){s.a.fillPath(t,o,n,r,e.fillColor.preview,e.opacity)})},e.prototype.renderStroke=function(t){var e=this,n=this._getActualBorderWidth();if(!(n<=0)){var r=this.item,o=this.getControlCenter(),i=this.item.transform;this._getFrames().forEach(function(a){var l=a.toTextWhizzPath(e._textWhizz);l.offsetContour(n/2),s.a.drawPath(t,l,o,i,n,r.borderColor.preview,r.opacity)})}},e.prototype.getTextWrappingPath=function(){var e=this;if(this.item instanceof i.PathBoundedTextItem&&this.item.textWrappingMode===i.WrappingMode.Tight){var n=this._getFrames(),r=function(t){var n=t.clone();return n.transform(e.item.transform,e.getControlCenter()),n};if(1==n.length)return r(n[0]);for(var a=r(n[0]).toTextWhizzPath(this._textWhizz),s=1;s<n.length;s++)a=this._textWhizz.Path.union(a,r(n[s]).toTextWhizzPath(this._textWhizz));return o.Path.fromTextWhizzPath(a)}return t.prototype.getTextWrappingPath.call(this)},e.prototype.getTextRectangle=function(){var t,e=this.getControlCenter(),n=o.RotatedRectangleF.fromRectangleF((null===(t=this._textManager)||void 0===t?void 0:t.ready)?this._textManager.measureText():this.item.sourceRectangle);return n.transform(this.item.transform.clone(),e),n},Object.defineProperty(e.prototype,"drawingRectangle",{get:function(){var t=this.canvas.isItemHandlerSelected(this)&&this.canvas.isResizing();if(null==this._staticTextRect)return t&&null!=this.startRectangle?this.startRectangle:this.rectangle;var e=o.RotatedRectangleF.fromRectangleF(this._staticTextRect),n=t&&null!=this.startRectangle?this.startRectangle.getTransform(o.RotatedRectangleF.fromRectangleF(this.getControlBounds())):this.item.transform.clone();return e.transform(n,this.getControlCenter()),e},enumerable:!0,configurable:!0}),e.prototype._addTextWhizzFrames=function(t){var e,n;try{for(var r=u(this._getFrames()),o=r.next();!o.done;o=r.next()){var i=o.value;t.addFrame(this._createTextWhizzFrame(i))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},e.prototype.setTextWhizzWrappingPath=function(t){var e=this.item,n=null;if(null!=e.wrappingPath){if(Object(o.EqualsOfFloatNumbers)(0,this.item.transform.angle))n=e.wrappingPath.toTextWhizzPath(this._textWhizz);else{var r=e.wrappingPath.clone();r.rotateAt(-this.item.transform.angle,this.getControlCenter()),n=r.toTextWhizzPath(this._textWhizz)}n.offsetContour(e.wrappingMargin)}else n=new this._textWhizz.Path;t.setWrappingPath(n)},e.prototype.updateTextWhizzFrames=function(t){for(var e=t.getFrameCount(),n=this._getFrames(),r=0;r<n.length;r++){var o=n[r];r<e?t.replaceFrame(this._createTextWhizzFrame(o),r):t.addFrame(this._createTextWhizzFrame(o))}if(e>n.length)for(var i=r;r<e;r++)t.removeFrame(i)},e.prototype._createTextWhizzFrame=function(t){var e=new this._textWhizz.ShapeTextFrame;e.shape=this._pathToTextWhizzPath(t),e.firstBaselineOffset=this._firstBaselineOffsetToTextWhizz(this.item.firstBaselineOffset),e.firstBaselineMinOffset=this.item.firstBaselineMinOffset;var n=this.item.previewScale;return Object(o.EqualsOfFloatNumbers)(n,1)||e.shape.scale(1/n,1/n),e},e.prototype._applyTransform=function(t,e,n){var r,a;if(t instanceof i.BoundedTextItem){var s=o.RotatedRectangleF.fromRectangleF(t.textRectangle);s.setTransform(e),t.textRectangle=s.toRectangleF()}if(t instanceof i.PathBoundedTextItem)try{for(var l=u(t.boundingPaths),c=l.next();!c.done;c=l.next()){c.value.transform(e,n)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}},e.prototype._firstBaselineOffsetToTextWhizz=function(t){switch(t){case i.FirstBaselineOffset.Ascent:return this._textWhizz.FirstBaselineOffset.ascent;case i.FirstBaselineOffset.CapHeight:return this._textWhizz.FirstBaselineOffset.capHeight;case i.FirstBaselineOffset.Leading:return this._textWhizz.FirstBaselineOffset.leading;case i.FirstBaselineOffset.XHeight:return this._textWhizz.FirstBaselineOffset.xHeight;case i.FirstBaselineOffset.Fixed:return this._textWhizz.FirstBaselineOffset.fixed}},e.typeName="NewBoundedTextItemHandler",e}(a.a)},573:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.Left=37]="Left",t[t.Up=38]="Up",t[t.Right=39]="Right",t[t.Down=40]="Down",t[t.Home=36]="Home",t[t.End=35]="End",t[t.Enter=13]="Enter",t[t.Tab=9]="Tab",t[t.Escape=27]="Escape",t[t.Backspace=8]="Backspace",t[t.Delete=46]="Delete",t[t.Space=32]="Space",t[t.KeyA=65]="KeyA",t[t.KeyB=66]="KeyB",t[t.KeyI=73]="KeyI",t[t.KeyU=85]="KeyU",t[t.KeyL=76]="KeyL",t[t.KeyR=82]="KeyR",t[t.KeyE=69]="KeyE",t[t.KeyC=67]="KeyC",t[t.KeyV=86]="KeyV",t[t.KeyZ=90]="KeyZ",t[t.KeyY=89]="KeyY",t[t.KeyPeriod=190]="KeyPeriod",t[t.KeyComma=188]="KeyComma",t[t.KeyEqual=187]="KeyEqual"}(r||(r={}))},574:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(t,e){this.tag=t,this.value=e}}()},575:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(382),i=n(451),a=n(381),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return s(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},set:function(e){t.prototype._setItem.call(this,e)},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"textPath":case"start":case"end":this.update(null,null,"frame");break;case"fitToPath":case"fitToPathStep":case"stretch":case"originalFontSize":this.update()}t.prototype._onItemPropertyChanged.call(this,e,n)},e.prototype._addTextWhizzFrames=function(t){t.addFrame(this._createTextWhizzFrame())},e.prototype.updateTextWhizzFrames=function(t){t.replaceFrame(this._createTextWhizzFrame(),0)},e.prototype.setTextWhizzWrappingPath=function(t){},e.prototype._getEndTransformTrigger=function(t){return t?null:"frame"},e.prototype._applyTransform=function(t,e,n){var r,i;if(t instanceof o.CurvedTextItem){var a=t.textPath.clone();a.transform(e,n),t.textPath=a;var s=this._getPreviewScaleLimits(),l=this.item.previewScale*e.scaleY;l=Math.min(null!==(r=s.max)&&void 0!==r?r:Number.MAX_VALUE,l),l=Math.max(null!==(i=s.min)&&void 0!==i?i:Number.MIN_VALUE,l),t.previewScale=l}},e.prototype._createTextWhizzFrame=function(){var t=this.item.textPath.toTextWhizzPath(this._textWhizz),e=this.item.previewScale;Object(a.EqualsOfFloatNumbers)(e,1)||t.scale(1/e,1/e);var n=new this._textWhizz.PathTextFrame;return n.baseline=t,n},e.typeName="NewCurvedTextItemHandler",e}(i.a)},576:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(393),i=n(380),a=n(425),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e){var n=this;if(!e)throw new i.b("layer");return(n=t.call(this)||this)._layer=e,n}return s(e,t),e.prototype._onHandlerAdded=function(t,e,n){var r=this,o=function(t){t.layer=r._layer;var e=r._layer.canvas;e&&(t.canvas=e),t instanceof a.a&&t.applyToItems(o)};o(t)},e.prototype._onHandlerRemoved=function(t,e){var n=this._layer.canvas;n&&n.isItemHandlerSelected(t)&&n.removeSelectedItemHandler(t),t.layer=null,n&&(t.canvas=null)},e.prototype.insertAt=function(e,n){t.prototype.insertAt.call(this,e,n),this._onHandlerAdded(n,e,this._layer.index)},e.prototype.move=function(e,n){return t.prototype.move.call(this,e,n)},e.prototype.removeAt=function(e){var n=t.prototype.removeAt.call(this,e);return n&&this._onHandlerRemoved(n,e),n},e.prototype.clear=function(){for(var e=0;e<this.length;e++)this.getItem(e).layer=null;t.prototype.clear.call(this)},e}(o.a)},580:function(t,e,n){"use strict";n.d(e,"a",function(){return N});var r,o=n(382),i=n(448),a=n(434),s=n(410),l=n(380),u=n(569),c=n(474),h=n(571),p=n(475),f=n(423),d=n(476),y=n(424),g=n(386),m=n(392),_=n(381),v=n(533),b=n(391),w=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),C=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,0,0,0,0,e,n)||this}return w(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(t,e){e},e.prototype._getBoundsMargin=function(){return this.item.width},e.prototype.drawItemHandler=function(t){if(null!=t&&this.item.width>0){var e=this.getActualPoints();m.a.drawPolyline(t,e,this.item.width,this.item.color.preview,this.item.opacity)}},e.prototype._belongToLine=function(t,e){for(var n=this.getActualPoints(),r=!1,o=this.item.width/2+e,i=o*o,a=1;a<n.length;a++){if(Object(_.getSquareDistanceToSegment)(t,n[a-1],n[a])<=i){r=!0;break}}return r},e.prototype.hitTest=function(e,n){var r=t.prototype.hitTest.call(this,e.clone()),o=this.canvas.zoom*b.a.screenDpi/72,i=this._getRectangle(),a=!!n&&i.toRectangleF().contains(e),s=this._belongToLine(e,2/o);return r.body=a||s,r},e.prototype.getColorData=function(){var e=this.item,n=t.prototype.getColorData.call(this),r=this.canvas.rgbColorProfileFileId;return e.color.needUpdate(r)&&(n.color=e.color.getData()),n},e.prototype.setColorData=function(e){var n=this.item;t.prototype.setColorData.call(this,e),null!=e.color&&(n.color=g.ColorFactory.createColor(e.color))},e.prototype.hasColorsToUpdate=function(){var e=this.item,n=this.canvas.rgbColorProfileFileId;return t.prototype.hasColorsToUpdate.call(this)||e.color.needUpdate(n)},e.prototype.getActualPoints=function(){for(var t=[],e=this.getControlCenter(),n=0;n<this.item.sourcePoints.length;n++)t.push(this._getActualPointFromControlPoint(this.item.sourcePoints[n],e));return t},e.prototype._getActualPointFromControlPoint=function(t,e){var n=new _.PointF(t.x,t.y);n.translate(-e.x,-e.y);var r=this.item.transform;return n.scale(r.scaleX,r.scaleY),n.rotate(r.angle),n.translate(r.translateX,r.translateY),n.translate(e.x,e.y),n},e.prototype.getControlBounds=function(){var t=0,e=0,n=0,r=0,o=this.item.sourcePoints,i=o.length;i>0&&(t=o[0].x,n=o[0].x,e=o[0].y,r=o[0].y);for(var a=1;a<i;a++)t=Math.min(o[a].x,t),n=Math.max(o[a].x,n),e=Math.min(o[a].y,e),r=Math.max(o[a].y,r);var s=n-t,l=r-e;return new _.RectangleF(t,e,s,l)},e.prototype._addPoint=function(t){var e=this.canvas,n=-1;e&&(n=b.a.screenDpi/72*e.zoom);var r=this.item.sourcePoints;if(r.length>0){var o=r[r.length-1].distance(t);(-1===n||o*n>30)&&r.push(t)}else r.push(t)},e.prototype.addPoint=function(t){this.insertPoint(t,this.item.sourcePoints.length)},e.prototype.insertPoint=function(t,e){if(e<0||e>this.item.sourcePoints.length)throw new l.f(v.a);var n=this.getActualPoints();n.splice(e,0,t),this.item.sourcePoints=n,this.item.transform=new _.Transform},e.prototype.setPoint=function(t,e){if(e<0||e>=this.item.sourcePoints.length)throw new l.f(v.e);var n=this.getActualPoints();n[e]=t,this.item.sourcePoints=n,this.item.transform=new _.Transform,this.raiseChanged()},e.prototype.getPointsCount=function(){return this.item.sourcePoints.length},e.prototype.getPoint=function(t){if(t<0||t>=this.item.sourcePoints.length)throw new l.f(v.e);return this._getActualPointFromControlPoint(this.item.sourcePoints[t],this.getControlCenter())},e.prototype.removePoint=function(t){if(t<0||t>=this.item.sourcePoints.length)throw new l.f(v.d);var e=this.item.sourcePoints;e.splice(t,1),this.item.sourcePoints=e},e.typeName="PolylineItemHandler",e}(y.a),P=n(501),x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return x(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(e,n){switch(n){case"altColor":case"dashWidth":case"altDashWidth":this.canvas.redraw()}t.prototype._onItemPropertyChanged.call(this,e,n)},Object.defineProperty(e.prototype,"dashWidth",{get:function(){return this.item.dashWidth},set:function(t){this.item.dashWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altDashWidth",{get:function(){return this.item.altDashWidth},set:function(t){this.item.altDashWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altColor",{get:function(){return this.item.altColor},set:function(t){this.item.altColor=t},enumerable:!0,configurable:!0}),e.prototype.drawItemHandler=function(t){if(null!=t){var e=this.point0,n=this.point1,r=this._getActualWidth();if(r){var o=this.dashWidth,i=this.altDashWidth;if(this.fixedWidth){var a=this.canvas.zoom;o/=a,i/=a}m.a.drawDashedLine(t,e.x,e.y,n.x,n.y,r,this.color.preview,this.altColor.preview,o,i,this.item.opacity)}}},e.prototype.getColorData=function(){var e=this.item,n=t.prototype.getColorData.call(this),r=this.canvas.rgbColorProfileFileId;return e.color.needUpdate(r)&&(n.color=e.color.getData()),e.altColor.needUpdate(r)&&(n.altColor=e.altColor.getData()),n},e.prototype.setColorData=function(e){var n=this.item;t.prototype.setColorData.call(this,e),null!=e.color&&(n.color=g.ColorFactory.createColor(e.color)),null!=e.altColor&&(n.altColor=g.ColorFactory.createColor(e.altColor))},e.prototype.hasColorsToUpdate=function(){var e=this.item,n=this.canvas.rgbColorProfileFileId;return t.prototype.hasColorsToUpdate.call(this)||e.color.needUpdate(n)||e.altColor.needUpdate(n)},e}(d.a),I=n(567),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,0,0,0,0,e,n)||this}return S(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._getItem()},enumerable:!0,configurable:!0}),e.prototype._onItemPropertyChanged=function(t,e){e},Object.defineProperty(e.prototype,"locked",{get:function(){return this.item.locked},set:function(t){this.item.locked=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this.item.cols},set:function(t){this.item.cols=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this.item.rows},set:function(t){this.item.rows=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stepX",{get:function(){return this.item.stepX},set:function(t){this.item.stepX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stepY",{get:function(){return this.item.stepY},set:function(t){this.item.stepY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalLineColor",{get:function(){return this.item.horizontalLineColor},set:function(t){this.item.horizontalLineColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalLineColor",{get:function(){return this.item.verticalLineColor},set:function(t){this.item.verticalLineColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this.item.lineWidth},set:function(t){this.item.lineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedLineWidth",{get:function(){return this.item.fixedLineWidth},set:function(t){this.item.fixedLineWidth=t},enumerable:!0,configurable:!0}),e.prototype.getControlBounds=function(){var t=this.item.cols*this.stepX,e=this.item.rows*this.stepY;return new _.RectangleF(this.item.location.x,this.item.location.y,t,e)},e.prototype._getBoundsMargin=function(){var t=this.lineWidth;return this.fixedLineWidth&&(t/=this.canvas.zoom),t},e.prototype.drawItemHandler=function(t){if(null!=t){t.save();this.rectangle.bounds;var e=this.item.location,n=this.getControlCenter(),r=this.canvas,o=this.verticalLineColor.preview,i=this.horizontalLineColor.preview,a=this.lineWidth;this.fixedLineWidth&&(a/=r.zoom);var s,l,u=a/2/this.item.transform.scaleX,c=a/2/this.item.transform.scaleY,h=this.stepX*this.cols,p=this.stepY*this.rows;for(s=0,l=this.cols;s<=l;s++){var f=e.x+s*this.stepX,d=e.y-c,y=e.y+p+c,g=new _.PointF(f,d).transform(this.item.transform,n),v=new _.PointF(f,y).transform(this.item.transform,n);m.a.drawLine(t,g.x,g.y,v.x,v.y,a,o,this.item.opacity)}for(s=0,l=this.rows;s<=l;s++){var b=e.x-u,w=e.x+h+u,C=e.y+s*this.stepY;g=new _.PointF(b,C).transform(this.item.transform,n),v=new _.PointF(w,C).transform(this.item.transform,n);m.a.drawLine(t,g.x,g.y,v.x,v.y,a,i,this.item.opacity)}t.restore()}},e.prototype.getColorData=function(){var e=this.item,n=t.prototype.getColorData.call(this),r=this.canvas.rgbColorProfileFileId;return e.verticalLineColor.needUpdate(r)&&(n.verticalLineColor=e.verticalLineColor.getData()),e.horizontalLineColor.needUpdate(r)&&(n.horizontalLineColor=e.horizontalLineColor.getData()),n},e.prototype.setColorData=function(e){var n=this.item;t.prototype.setColorData.call(this,e),null!=e.verticalLineColor&&(n.verticalLineColor=g.ColorFactory.createColor(e.verticalLineColor)),null!=e.horizontalLineColor&&(n.horizontalLineColor=g.ColorFactory.createColor(e.horizontalLineColor))},e.prototype.hasColorsToUpdate=function(){var e=this.item,n=this.canvas.rgbColorProfileFileId;return t.prototype.hasColorsToUpdate.call(this)||e.verticalLineColor.needUpdate(n)||e.horizontalLineColor.needUpdate(n)},e}(y.a),j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(t){function e(e,n){void 0===n&&(n=null);var r=this;return null!=e?(r=t.call(this,_.Path.ellipse(e.sourceRectangle.left,e.sourceRectangle.top,e.sourceRectangle.width,e.sourceRectangle.height),e,n)||this)._controlPoints=[new _.PointF(e.sourceRectangle.left,e.sourceRectangle.top),new _.PointF(e.sourceRectangle.right,e.sourceRectangle.bottom)]:r=t.call(this,null,e,n)||this,r._allowNegativeResize=!1,r}return j(e,t),e.prototype.hitTest=function(e,n){var r=t.prototype.hitTest.call(this,e.clone()),o=this._getRectangle(),i=e.clone();i.translate(-o.centerX,-o.centerY),i.rotate(-o.angle),i.scale(2/o.width,2/o.height);var a=i.x*i.x+i.y*i.y<1,s=!!n&&o.toRectangleF().contains(e);return r.body=a||s,r},e}(f.a),k=n(404),B=n(425),E=n(572),A=n(575),F=n(396),M=n(384),z=n(566),L=n(509),N=function(){function t(t){var e=this;this._canvas=t,this._handlers=new Map,this._beforeReplaceItemHandlerEvent=new M.a,this._afterReplaceItemHandlerEvent=new M.a,this.get=function(t){var n=e._handlers.has(t)?e._handlers.get(t):e._createItemHandler(t);return e._handlers.set(t,n),e._isItemOnCanvas(t)&&n.canvas!=e._canvas&&(n.canvas=e._canvas),n}}return Object.defineProperty(t.prototype,"beforeReplaceItemHandlerEvent",{get:function(){return this._beforeReplaceItemHandlerEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterReplaceItemHandlerEvent",{get:function(){return this._afterReplaceItemHandlerEvent},enumerable:!0,configurable:!0}),t.prototype.delete=function(t){var e=this;t instanceof B.a&&t.itemHandlers.forEach(function(t){return e.delete(t)}),this._handlers.delete(t.item),t.dispose()},t.prototype.replaceItemHandler=function(t,e){var n=this.get(t),r=this._canvas.isItemHandlerSelected(n);this._beforeReplaceItemHandlerEvent.notify(n),this._handlers.delete(t);var o=this.get(null!==e&&void 0!==e?e:t),i=n.parentGroupItemHandler;if(null!=i)i.replaceItemHandler(n,o);else{var a=n.layer.itemHandlers,s=a.indexOf(n);a.remove(n),a.insertAt(s,o)}n.dispose(),n.item=null,this._afterReplaceItemHandlerEvent.notify(o),r&&this._canvas.addSelectedItemHandler(o)},t.prototype.replaceTextItemHandler=function(t){if(t instanceof o.BaseTextItem){var e=this._useOldItemHandler(t,!1),n=this.get(t);(e&&n instanceof F.h||!e&&n instanceof F.c)&&this.replaceItemHandler(t)}},Object.defineProperty(t.prototype,"_viewer",{get:function(){return this._canvas.viewer},enumerable:!0,configurable:!0}),t.prototype._createItemHandler=function(t){var e,n,r,y,g,m,_,v,b,w,x,S,j,k,M,N,H,D,V,W,U,q,G=this;if(t.type===o.RectangleItem.type)return new i.a(t,null===(e=this._canvas)||void 0===e?void 0:e.textWhizz);if(function(t){return t.type===o.ImageItem.type}(t))return new a.a(t,null===(n=this._canvas)||void 0===n?void 0:n.textWhizz);if(function(t){return t.type===o.BarcodeItem.type}(t))return new u.a(t,null===(r=this._canvas)||void 0===r?void 0:r.textWhizz);if(function(t){return t.type===o.PlaceholderItem.type}(t)){var X=new s.a(t,null===(y=this._canvas)||void 0===y?void 0:y.textWhizz);return null!=t.content&&(X.content=this.get(t.content)),X.bottomFrames=t.bottomFrames.map(function(t){return G.get(t)}),X.topFrames=t.topFrames.map(function(t){return G.get(t)}),X}if(function(t){return t.type===o.AutoScaledTextItem.type}(t))return new I.a(t,null===(g=this._canvas)||void 0===g?void 0:g.textWhizz);if(function(t){return t.type===o.ArchedTextItem.type}(t))return new z.a(t,null===(m=this._canvas)||void 0===m?void 0:m.textWhizz);if(t instanceof o.BaseTextItem)if(this._useOldItemHandler(t,!this._canvas.viewer.frontEndTextRenderingEnabled)){if(Y(t))return new c.a(t,null===(_=this._canvas)||void 0===_?void 0:_.textWhizz);if($(t))return new p.a(t,null===(v=this._canvas)||void 0===v?void 0:v.textWhizz);if(K(t))return new h.a(t,null===(b=this._canvas)||void 0===b?void 0:b.textWhizz);if(J(t))return new P.a(t,null===(w=this._canvas)||void 0===w?void 0:w.textWhizz)}else{if(Y(t)||$(t))return new E.a(t,null===(x=this._canvas)||void 0===x?void 0:x.textWhizz);if(K(t))return new A.a(t,null===(S=this._canvas)||void 0===S?void 0:S.textWhizz);if(J(t))return new F.k(t,null===(j=this._canvas)||void 0===j?void 0:j.textWhizz)}if(function(t){return t.type===o.LineItem.type}(t))return new d.a(t,null===(k=this._canvas)||void 0===k?void 0:k.textWhizz);if(function(t){return t.type===o.DashedLineItem.type}(t))return new O(t,null===(M=this._canvas)||void 0===M?void 0:M.textWhizz);if(function(t){return t.type===o.ShapeItem.type}(t))return new f.a(t.sourcePath,t,null===(N=this._canvas)||void 0===N?void 0:N.textWhizz);if(function(t){return t.type===o.PolylineItem.type}(t))return new C(t,null===(H=this._canvas)||void 0===H?void 0:H.textWhizz);if(function(t){return t.type===o.GridItem.type}(t))return new T(t,null===(D=this._canvas)||void 0===D?void 0:D.textWhizz);if(function(t){return t.type===o.EllipseItem.type}(t))return new R(t,null===(V=this._canvas)||void 0===V?void 0:V.textWhizz);if(function(t){return t.type===o.GroupItem.type}(t))return new B.a(t,t.items.toArray().map(function(t){return G.get(t)}),null===(W=this._canvas)||void 0===W?void 0:W.textWhizz);if(function(t){return t.type===o.ClipartItem.type}(t))return new F.d(t,t.items.toArray().map(function(t){return G.get(t)}),null===(U=this._canvas)||void 0===U?void 0:U.textWhizz);if(function(t){return t.type===o.LayoutItem.type}(t))return new L.a(t,t.items.toArray().map(function(t){return G.get(t)}),this._canvas.history,null===(q=this._canvas)||void 0===q?void 0:q.textWhizz);throw new l.e("Item of type "+t.type+" not supported");function Y(t){return t.type===o.BoundedTextItem.type}function K(t){return t.type===o.CurvedTextItem.type}function J(t){return t.type===o.PlainTextItem.type}function $(t){return t.type===o.PathBoundedTextItem.type}},t.prototype._isItemOnCanvas=function(t){if(null==t.parentContainer||!(t.parentContainer.parentComponent instanceof k.Surface))return!1;var e=t.parentContainer.parentComponent;return this._viewer.surface==e},Object.defineProperty(t.prototype,"_debugWarnEnabled",{get:function(){return void 0===window.$DesignAtoms$WarnOnLegacyItemHandlers&&(window.$DesignAtoms$WarnOnLegacyItemHandlers=!1),window.$DesignAtoms$WarnOnLegacyItemHandlers},enumerable:!0,configurable:!0}),t.prototype._logUseOldItemHandler=function(t,e,n){if(this._debugWarnEnabled){var r="unknown";switch(e){case"verticalScale":r="verticalScale property value "+n+" is not equal to 1";break;case"shadow":r="item has shadow";break;case"overlapLinesEnabled":r="overlapLinesEnabled is true";break;case"maxLineCount":case"maxLineLength":r="maxLineLength ("+n+") is greater then 0";break;case"AutoScaledTextItem":r="item is AutoScaledTextItem";break;case"text-list":r="item text contains list tags";break;case"isVertical":r="isVertical is true";break;case"verticalAlignment":r="verticalAlignment ("+n+") is not Top";break;case"scheduledFitMode":r="scheduledFitMode is set ("+n+")";break;case"overflowStrategy":r="overflowStrategy is set ("+n+")";break;case"characterLimit":r="characterLimit ("+n+") is greater then 0";break;case"fitToPath":r="fitToPath is true";break;default:r="unknown, property: "+e}console.warn("Legacy text item handler created for item ["+t.type+"#"+t.name+"] reason: "+r)}},t.prototype._useOldItemHandler=function(t,e){if(!0===e)return!0;if(!Object(_.EqualsOfFloatNumbers)(1,t.verticalScale)||!Object(_.EqualsOfFloatNumbers)(1,t.horizontalScale))return this._logUseOldItemHandler(t,"verticalScale",t.verticalScale),!0;if(null!=t.shadow)return this._logUseOldItemHandler(t,"shadow",null),!0;if(t.overlapLinesEnabled)return this._logUseOldItemHandler(t,"overlapLinesEnabled",null),!0;if(t.maxLineCount>0||t.maxLineLength>0)return t.maxLineCount&&this._logUseOldItemHandler(t,"maxLineCount",t.maxLineCount),t.maxLineLength&&this._logUseOldItemHandler(t,"maxLineLength",t.maxLineLength),!0;if(t instanceof o.AutoScaledTextItem)return this._logUseOldItemHandler(t,"AutoScaledTextItem",null),!0;if(t.text.includes("<ol")||t.text.includes("<ul")||t.text.includes("<li"))return this._logUseOldItemHandler(t,"text-list",null),!0;if(t instanceof o.BoundedTextItem){if(t.isVertical)return this._logUseOldItemHandler(t,"isVertical",null),!0;if(t.verticalAlignment!==o.TextVerticalAlignment.Top)return this._logUseOldItemHandler(t,"verticalAlignment",t.verticalAlignment),!0;if(null!=t.scheduledFitMode||t.overflowStrategy!==o.OverflowStrategy.Clip)return null!=t.scheduledFitMode&&this._logUseOldItemHandler(t,"scheduledFitMode",t.scheduledFitMode),null!=t.overflowStrategy&&this._logUseOldItemHandler(t,"overflowStrategy",t.overflowStrategy),!0;if(t.characterLimit>0)return this._logUseOldItemHandler(t,"characterLimit",t.characterLimit),!0}if(t instanceof o.PathBoundedTextItem){if(t.isVertical)return this._logUseOldItemHandler(t,"isVertical",null),!0;if(t.characterLimit>0)return this._logUseOldItemHandler(t,"characterLimit",t.characterLimit),!0}return t instanceof o.PlainTextItem&&t.isVertical?(this._logUseOldItemHandler(t,"isVertical",null),!0):!!(t instanceof o.CurvedTextItem&&t.fitToPath)&&(this._logUseOldItemHandler(t,"fitToPath",null),!0)},t}()},581:function(t,e,n){"use strict";n.d(e,"a",function(){return O});var r,o,i=n(386),a=n(384),s=n(382),l=n(383),u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=function(){function t(){}return t.alignment="alignment",t.firstLineIndent="first-line-indent",t.spaceAfter="space-after",t.spaceBefore="space-before",t.leftIndent="left-indent",t.rightIndent="right-indent",t}(),h=function(){function t(){}return t.fontName="font-name",t.fontSize="font-size",t.color="color",t.bold="bold",t.italic="italic",t.underline="underline",t.penColor="pen-color",t.penWidth="pen-width",t.tracking="tracking",t.leading="leading",t.sub="sub",t.sup="sup",t.allCaps="all-caps",t.smallCaps="small-caps",t.fontFamily="font-family",t.fontStyle="font-style",t.wordSpacingScale="word-spacing-scale",t.supSize="sup-size",t.supPosition="sup-position",t.subSize="sub-size",t.subPosition="sub-position",t.digitType="digit-type",t.openType="ot",t.baselineShift="baseline-shift",t.inkName="ink-name",t.inkSolidity="ink-solidity",t.inkColor="ink-color",t.penInkName="pen-ink-name",t.penInkSolidity="pen-ink-solidity",t.penInkColor="pen-ink-color",t}(),p=function(){function t(t,e,n,r){this._colorPaletteManager=t,this._fontService=e,this._useSimpleFontList=n,this._previewScale=r}return t.prototype.convert=function(t){var e=this._parse(t),n=this._convert(e,null);return this._serialize(n)},t.prototype._convert=function(t,e){var n=this._convertNode(t);null!=n&&null!=e&&e.appendChild(n);for(var r=0;r<t.childNodes.length;++r){var o=t.childNodes[r];this._isAccepted(o)==NodeFilter.FILTER_ACCEPT&&this._convert(o,n||e)}return n},t.prototype.getNodeName=function(t){return t.nodeName.toLowerCase()},t.dictToStyle=function(t){var e="",n=function(n){t.hasOwnProperty(n)&&(n===h.openType?t[n].split(",").forEach(function(t){if(!l.l(t)){var r=t.trim().split(" "),o=r[0].toLowerCase()+","+(2===r.length?r[1]:"1");e+=n+": "+o+"; "}}):e+=n+": "+t[n]+"; ")};for(var r in t)n(r);return e.trim()},t.styleToDict=function(t){var e,n,r={};if(l.l(t))return r;var o=t.split(";");try{for(var i=u(o),a=i.next();!a.done;a=i.next()){var s=a.value.split(":");if(2===s.length){var c=s[0].trim(),p=s[1].trim();c===h.openType&&r.hasOwnProperty(c)&&(p=r[c]+";"+p),r[c]=p}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.stringToBoolean=function(t){return"true"===t},t.stringToNumber=function(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=0),null==t)return null;var r=l.l(e)?+t:+t.replace(e,"");return isNaN(r)?n:r},t.letterSpacingToTracking=function(t){var e=1e3*+t.replace("em;","").replace("em","");return isNaN(e)?0:e},t.trackingToLetterSpacing=function(t){return(isNaN(t)?0:t/1e3)+"em"},t.stringToTextAlignment=function(t){switch(t.toLocaleLowerCase()){case"left":return s.TextAlignment.Left;case"center":return s.TextAlignment.Center;case"right":return s.TextAlignment.Right;case"justify":case"justify-all":case"justification":case"justification-last-left":case"justification-last-center":case"justification-last-right":return s.TextAlignment.Justify;default:return s.TextAlignment.Left}},t.textAlignmentToXmlString=function(t){switch(t){case s.TextAlignment.Left:return"left";case s.TextAlignment.Center:return"center";case s.TextAlignment.Right:return"right";case s.TextAlignment.Justify:return"justification-last-left"}},t.textAlignmentToHtmlString=function(t){switch(t){case s.TextAlignment.Left:return"left";case s.TextAlignment.Center:return"center";case s.TextAlignment.Right:return"right";case s.TextAlignment.Justify:return"justify"}},t._defaultSupSubSize=.583,t}(),f=n(381),d=n(387),y=n(574),g=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,r,o)||this;return a._defaultFontValue=i,a._supportedSpanStyles=["font-weight","font-style","text-decoration","text-decoration-line","font-size","font-family","color","-webkit-text-stroke","-webkit-text-stroke-width","-webkit-text-stroke-color","letter-spacing","line-height","text-transform","font-variant-caps","vertical-align","font-feature-settings"],a._supportedParagraphStyles=["text-indent","padding-bottom","padding-top","margin-left","margin-right","text-align"],a}return g(e,t),e.prototype._parse=function(t){return(new DOMParser).parseFromString(t,"text/html").getElementsByTagName("body")[0]},e.prototype._serialize=function(t){return(new XMLSerializer).serializeToString(t).replace(/<body[\s\w.=":\/\s-;]*>/,"").replace("<body>","").replace("</body>","").replace(/&nbsp;/g,"").trim()},e.prototype._isAccepted=function(t){var e=this.getNodeName(t);return"p"===e||"br"===e||"span"===e||"#text"===e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},e.prototype._convertNode=function(t){switch(this.getNodeName(t)){case"p":return this._convertParagraph(t);case"span":return this._convertSpan(t);default:return t.cloneNode(!1)}},e.prototype._convertParagraph=function(t){var e=document.createElement("p"),n=t.attributes.style;return this._applyParagraphStyles(e,null!=n?n.value:null),e},e.prototype._applyParagraphStyles=function(t,n){var r=this;if(null!=n){var o={},i=p.styleToDict(n),a=e.getAlignmentValue(i);null!=a&&(o[c.alignment]=p.textAlignmentToXmlString(a));var s=e.getFirstLineIndentValue(i,this._previewScale);null!=s&&(o[c.firstLineIndent]=s+"pt");var u=e.getSpaceAfterValue(i,this._previewScale);null!=u&&(o[c.spaceAfter]=u+"pt");var h=e.getSpaceBeforeValue(i,this._previewScale);null!=h&&(o[c.spaceBefore]=h+"pt");var f=e.getLeftIndentValue(i,this._previewScale);null!=f&&(o[c.leftIndent]=f+"pt");var y=e.getRightIndentValue(i,this._previewScale);null!=y&&(o[c.rightIndent]=y+"pt");var g=d.keys(i).filter(function(t){return!r._supportedParagraphStyles.includes(t)});g.length>0&&g.forEach(function(t){return console.log("HtmlToXml: Unknown paragraph style:"+t)});var m=p.dictToStyle(o);l.l(m)||t.setAttribute("style",m)}},e.getAlignmentValue=function(t){var e=t["text-align"];return null==e?null:p.stringToTextAlignment(e)},e.getFirstLineIndentValue=function(t,e){void 0===e&&(e=1);var n=t["text-indent"];return null==n?null:p.stringToNumber(n,"pt")/e},e.getSpaceAfterValue=function(t,e){void 0===e&&(e=1);var n=t["padding-bottom"];return null==n?null:p.stringToNumber(n,"pt")/e},e.getSpaceBeforeValue=function(t,e){void 0===e&&(e=1);var n=t["padding-top"];return null==n?null:p.stringToNumber(n,"pt")/e},e.getLeftIndentValue=function(t,e){void 0===e&&(e=1);var n=t["margin-left"];return null==n?null:p.stringToNumber(n,"pt")/e},e.getRightIndentValue=function(t,e){void 0===e&&(e=1);var n=t["margin-right"];return null==n?null:p.stringToNumber(n,"pt")/e},e.prototype._convertSpan=function(t){var e=document.createElement("span"),n=t.attributes.style,r=t.attributes.colordata;return this._applySpanStyles(e,null!=n?n.value:null,null!=r?r.value:null,t),e},e.prototype._applySpanStyles=function(t,n,r,o){var i=this;if(null!=n){var a=p.styleToDict(n),s=p.styleToDict(r),u={},c=e.getElementFontValue(o,null,this._defaultFontValue);null!=c&&e.setFontValue(u,c,this._fontService,this._useSimpleFontList);var f=e.getUnderlineValue(a);null!=f&&(u[h.underline]=""+f);var y=e.getFontSizeValue(a,this._previewScale);null!=y&&(u[h.fontSize]=y+"pt");var g=e.getColorValue(a,s,this._colorPaletteManager);null!=g&&(u[h.color]=g.toString());var m=e.getStrokeValue(a,s,this._colorPaletteManager,this._previewScale);null!=m&&(null!=m.size&&(u[h.penWidth]=m.size+"pt"),null!=m.colorIndex&&(u[h.penColor]=m.colorIndex.toString()));var _=e.getTrackingValue(a);null!=_&&(u[h.tracking]=_.toString());var v=e.getLeadingValue(a,this._previewScale);null!=v&&(u[h.leading]=v+"pt");var b=e.getAllCapsValue(a);null!=b&&(u[h.allCaps]=""+b);var w,C=e.getSmallCapsValue(a);if(null!=C&&(u[h.smallCaps]=""+C),!0===e.getSupValue(a))u[h.sup]="true",null!=(w=e._getSupSubSize(a))&&(u[h.supSize]=w);if(!0===e.getSubValue(a))u[h.sub]="true",null!=(w=e._getSupSubSize(a))&&(u[h.subSize]=w);var P=e.getOpenTypeStringValue(a);null!=P&&(u[h.openType]=P);var x=d.keys(a).filter(function(t){return!i._supportedSpanStyles.includes(t)});x.length>0&&x.forEach(function(t){return console.log("HtmlToXml: Unknown span style:"+t)});var O=p.dictToStyle(u);l.l(O)||t.setAttribute("style",O)}},e._getSupSubSize=function(t){var e=t["font-size"];if(null==e)return null;var n=p.stringToNumber(e.replace("%",""));if(null==n)return null;var r=n/100;return Object(f.EqualsOfFloatNumbers)(p._defaultSupSubSize,r)?null:(+r.toFixed(3)).toString()},e.getElementFontValue=function(t,e,n){var r=null!=n?d.clone(n):{},o=function(t){null!=t.parentElement&&t!=e&&o(t.parentElement);var n=t.style.fontFamily,i=t.style.fontWeight,a=t.style.fontStyle;l.l(n)||(r.family=n),l.l(i)||(r.bold="bold"===i),l.l(a)||(r.italic="italic"===a)};return o(t),r},e.getFontValue=function(t){var e=t["font-weight"],n=t["font-style"],r=t["font-family"];return null==r&&null==e&&null==n?null:{family:l.l(r)?null:r,bold:null==e?null:"bold"===e,italic:null==n?null:"italic"===n}},e.getFontSettings=function(t,n,r){if(r){var o=e._deserializeCssEscapedString(t.family).replace(/"/g,"").replace(/'/g,"");return n.findSuitableFontParams(n.findOriginalFamilyName(o.replace("_cc_family_","")),t.bold,t.italic)}var i={};if(null!=t.family){var a=n.findOriginalPsName(t.family.replace("_cc_psname_",""));i.postScriptName=a}return null!=t.bold&&(i.fauxBold=t.bold),null!=t.italic&&(i.fauxItalic=t.italic),i},e.setFontValue=function(t,n,r,o){var i=e.getFontSettings(n,r,o);null!=i.postScriptName&&(t[h.fontName]=i.postScriptName),null!=i.fauxBold&&(t[h.bold]=""+i.fauxBold),null!=i.fauxItalic&&(t[h.italic]=""+i.fauxItalic)},e._deserializeCssEscapedString=function(t){var e=t;return"'"===e[0]&&(e=e.slice(1)),"'"===e[e.length-1]&&(e=e.slice(0,e.length-1)),e},e.getBoldValue=function(t){var e=t["font-weight"];return null==e?null:"bold"===e},e.getItalicValue=function(t){var e=t["font-style"];return null==e?null:"italic"===e},e.getUnderlineValue=function(t){var e=t["text-decoration"]||t["text-decoration-line"];return null==e?null:"underline"===e},e.getFontSizeValue=function(t,e){void 0===e&&(e=1);var n=t["font-size"];if(null==n||"super"===t["vertical-align"]||"sub"===t["vertical-align"])return null;var r=12;return n.endsWith("pt")?r=p.stringToNumber(n,"pt"):n.endsWith("px")?r=72*p.stringToNumber(n,"px")/96:"x-small"==n?r=7.5:"small"==n?r=12*.8:"medium"==n?r=12:"large"==n?r=13.5:"x-large"==n?r=18:"xx-large"==n?r=24:"xxx-large"==n&&(r=36),+(r/e).toFixed(2)},e.getColorValue=function(t,n,r){var o=t.color;if(null==o)return null;var i=e._convertColor(o,n["color-index"],r);return null!=i?i:void 0},e.getStrokeValue=function(t,n,r,o){void 0===o&&(o=1);var i=null,a=null,s=t["-webkit-text-stroke"];if(null!=s?(i=s.substring(0,s.indexOf(" ")),a=s.substring(s.indexOf(" ")+1)):(i=t["-webkit-text-stroke-width"],a=t["-webkit-text-stroke-color"]),null==a&&null==i)return null;var l={};if(null!=i&&(l.size=p.stringToNumber(i,"pt")/o),null!=a){var u=e._convertColor(a,n["pen-color-index"],r);null!=u&&(l.colorIndex=u)}return l},e.getTrackingValue=function(t){var n=t["letter-spacing"];return null==n?null:e.letterSpacingToTracking(n)},e.getLeadingValue=function(t,e){void 0===e&&(e=1);var n=t["line-height"];return null==n?null:"normal"===n?0:p.stringToNumber(n,"pt")/e},e.getAllCapsValue=function(t){var e=t["text-transform"];return null==e?null:"uppercase"===e},e.getSmallCapsValue=function(t){var e=t["font-variant-caps"];return null==e?null:"all-small-caps"===e},e.getSupValue=function(t){var e=t["vertical-align"];return null==e?null:"super"===e},e.getSubValue=function(t){var e=t["vertical-align"];return null==e?null:"sub"===e},e.getOpenTypeValue=function(t){var e=t["font-feature-settings"];return null!=e?e.split(",").map(function(t){var e,n=t.trim().split(" ");return new y.a(n[0].replace(/"/g,""),p.stringToNumber(null!==(e=n[1])&&void 0!==e?e:"1"))}):null},e.getOpenTypeStringValue=function(t){var e=t["font-feature-settings"];return null!=e?e.replace(/"/g,""):null},e._convertColor=function(t,e,n){var r;if(null!=e){if(r=+e,isNaN(r))return console.warn("HtmlToXml: invalid color index: "+e),null}else{var o=i.ColorFactory.createColor(t);r=n.addColorToPaletteReturnIndex(o)}return r},e}(p);!function(t){t[t.Regular=0]="Regular",t[t.Bold=1]="Bold",t[t.Italic=2]="Italic",t[t.BoldItalic=3]="BoldItalic",t[t.Other=4]="Other"}(o||(o={}));var _=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype._parse=function(t){return(new DOMParser).parseFromString("<body>"+t.replace(/  /g," ")+"</body>","text/html").getElementsByTagName("body")[0]},e.prototype._serialize=function(t){return t.innerHTML},e.prototype._isAccepted=function(t){var e=this.getNodeName(t);return"p"===e||"br"===e||"span"===e||"#text"===e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},e.prototype._convertNode=function(t){switch(this.getNodeName(t)){case"p":return this._convertParagraph(t);case"span":return this._convertSpan(t);default:return t.cloneNode(!1)}},e.prototype._convertParagraph=function(t){var e=document.createElement("p"),n=t.attributes.style;return this._applyParagraphStyles(e,null!=n?n.value:null),e},e.prototype._applyParagraphStyles=function(t,n){if(null!=n){var r=p.styleToDict(n),o=r[c.alignment];null!=o&&e.setAlignmentValue(t,o);var i=r[c.firstLineIndent];i&&e.setFirstLineIndentValue(t,i,this._previewScale);var a=r[c.spaceAfter];null!=a&&e.setSpaceAfterValue(t,a,this._previewScale);var s=r[c.spaceBefore];null!=s&&e.setSpaceBeforeValue(t,s,this._previewScale);var l=r[c.leftIndent];null!=l&&e.setLeftIndentValue(t,l,this._previewScale);var u=r[c.rightIndent];null!=u&&e.setRightIndentValue(t,u,this._previewScale);var h=d.values(c),f=d.keys(r).filter(function(t){return!h.includes(t)});f.length>0&&f.forEach(function(t){return console.log("XmlToHtml: Unknown paragraph style:"+t)})}},e.setAlignmentValue=function(t,e){var n="string"==typeof e?p.stringToTextAlignment(e):e;t.style.textAlign=p.textAlignmentToHtmlString(n)},e.setFirstLineIndentValue=function(t,e,n){void 0===n&&(n=1);var r="number"==typeof e?e:p.stringToNumber(e,"pt");t.style.textIndent=r*n+"pt"},e.setSpaceAfterValue=function(t,e,n){void 0===n&&(n=1);var r="number"==typeof e?e:p.stringToNumber(e,"pt");t.style.paddingBottom=r*n+"pt"},e.setSpaceBeforeValue=function(t,e,n){void 0===n&&(n=1);var r="number"==typeof e?e:p.stringToNumber(e,"pt");t.style.paddingTop=r*n+"pt"},e.setRightIndentValue=function(t,e,n){void 0===n&&(n=1);var r="number"==typeof e?e:p.stringToNumber(e,"pt");t.style.marginRight=r*n+"pt"},e.setLeftIndentValue=function(t,e,n){void 0===n&&(n=1);var r="number"==typeof e?e:p.stringToNumber(e,"pt");t.style.marginLeft=r*n+"pt"},e.prototype._convertSpan=function(t){var e=document.createElement("span"),n=t.attributes.style;return this._applySpanStyles(e,null!=n?n.value:null),e},e.prototype._applySpanStyles=function(t,n){if(null!=n){var r=p.styleToDict(n),o=e.getFontValue(r,this._fontService,this._useSimpleFontList);null!=o&&e.setFontValue(t,o);var i=r[h.underline];null!=i&&e.setUnderlineValue(t,i);var a=r[h.fontSize];null!=a&&e.setFontSizeValue(t,a,this._previewScale);var s=r[h.leading];null!=s&&e.setLeadingValue(t,s,this._previewScale);var l=r[h.tracking];null!=l&&e.setTrackingValue(t,parseFloat(l));var u=r[h.color];null!=u&&e.setColorValue(t,this._convertColor(u),this._colorPaletteManager);var c=r[h.penColor],f=r[h.penWidth];if(null!=c||null!=f){var y={enabled:!0};null!=c&&(y.color=this._convertColor(c)),null!=f&&(y.size=p.stringToNumber(f,"pt")),e.setStrokeValue(t,y,this._colorPaletteManager,this._previewScale)}var g=r[h.sup],m=p.stringToNumber(r[h.supSize]);null!=g&&e.setSupValue(t,g,m);var _=r[h.sub],v=p.stringToNumber(r[h.subSize]);null!=_&&e.setSubValue(t,_,v);var b=r[h.allCaps];null!=b&&e.setAllCapsValue(t,b);var w=r[h.smallCaps];null!=w&&e.setSmallCapsValue(t,w);var C=r[h.openType];null!=C&&e.setOpenTypeStringValue(t,C);var P=d.values(h),x=d.keys(r).filter(function(t){return!P.includes(t)});x.length>0&&x.forEach(function(t){return console.log("XmlToHtml: Unknown span style:"+t)})}},e.getFontValue=function(t,n,r){var o=t[h.fontName],i=t[h.bold],a=t[h.italic];if(null==o&&null==i&&null==a)return null;var s={postScriptName:l.l(o)?null:o,fauxBold:l.l(i)?null:p.stringToBoolean(i),fauxItalic:l.l(a)?null:p.stringToBoolean(a)};return e.fontSettingsToHtmlValue(s,n,r)},e.fontSettingsToHtmlValue=function(t,e,n){if(null==t)return null;var r=t.postScriptName,i=t.fauxBold,a=t.fauxItalic;if(null==r&&null==i&&null==a)return null;var s={};if(n){if(!l.l(r)){s.family=e.getCssFontFamily(e.availableFontsByPsName[r.toLowerCase()].family);var u=e.recognizeStyleByPsName(r);s.bold=u===o.Bold||u===o.BoldItalic,s.italic=u===o.Italic||u===o.BoldItalic}}else s.family=null!=r?e.getCssPsName(r):null,s.bold=i,s.italic=a;return s},e.setFontValue=function(t,e){null!=e.family&&(t.style.fontFamily=e.family),null!=e.bold&&(t.style.fontWeight=!0===e.bold?"bold":"normal"),null!=e.italic&&(t.style.fontStyle=!0===e.italic?"italic":"normal")},e.setBoldValue=function(t,e){t.style.fontWeight=!0===e||"true"===e?"bold":"normal"},e.setItalicValue=function(t,e){t.style.fontStyle=!0===e||"true"===e?"italic":"normal"},e.setUnderlineValue=function(t,e){t.style.textDecoration=!0===e||"true"===e?"underline":"none"},e.setFontSizeValue=function(t,e,n){void 0===n&&(n=1);var r="number"==typeof e?e:p.stringToNumber(e,"pt");t.style.fontSize=r*n+"pt"},e.setFontNameValue=function(t,e){t.style.fontFamily=e},e.setLeadingValue=function(t,e,n){void 0===n&&(n=1);var r="number"==typeof e?e:p.stringToNumber(e,"pt");t.style.lineHeight=0===r?"normal":r*n+"pt"},e.setTrackingValue=function(t,e){t.style.letterSpacing=p.trackingToLetterSpacing(e)},e.setColorValue=function(t,n,r){t.style.color=n.preview;var o=r.addColorToPaletteReturnIndex(n);e.setColorIndex(t,o)},e.setColorIndex=function(t,e){var n=t.attributes.colordata,r=null!=n?p.styleToDict(n.value):{};r["color-index"]=e.toString(),t.setAttribute("colordata",p.dictToStyle(r))},e.setStrokeValue=function(t,e,n,r){void 0===r&&(r=1);var o=t.attributes.colordata,i=null!=o?p.styleToDict(o.value):{};e.enabled?(t.style.webkitTextStrokeWidth=e.size*r+"pt",t.style.webkitTextStrokeColor=e.color.preview,i["pen-color-index"]=n.addColorToPaletteReturnIndex(e.color).toString()):(l.l(t.style.webkitTextStrokeWidth)&&l.l(t.style.webkitTextStrokeColor)&&l.l(t.style.webkitTextStroke)?(t.style.webkitTextStrokeWidth="0pt",t.style.webkitTextStrokeColor="rgba(0,0,0,0)"):(t.style.webkitTextStrokeWidth=null,t.style.webkitTextStrokeColor=null,t.style.webkitTextStroke=null),delete i["pen-color-index"]),d.isEmpty(i)?t.removeAttribute("colordata"):t.setAttribute("colordata",p.dictToStyle(i))},e.setSupValue=function(t,e,n){!0!==e&&"true"!==e||(t.style.verticalAlign="super",null==n&&(n=p._defaultSupSubSize),t.style.fontSize=100*n+"%")},e.setSubValue=function(t,e,n){!0!==e&&"true"!==e||(t.style.verticalAlign="sub",null==n&&(n=p._defaultSupSubSize),t.style.fontSize=100*n+"%")},e.setAllCapsValue=function(t,e){t.style.textTransform=!0===e||"true"===e?"uppercase":"none"},e.setSmallCapsValue=function(t,e){t.style.fontVariantCaps=!0===e||"true"===e?"all-small-caps":"none"},e.setOpenTypeValue=function(t,e){null!=e&&0!=e.length&&(t.style.fontFeatureSettings=e.map(function(t){return'"'+t.tag.toLowerCase()+'" '+t.value}).join(", "))},e.setOpenTypeStringValue=function(t,e){var n=null;e.split(";").forEach(function(t){if(!l.l(t)){var e=t.split(","),r=e[0],o=2===e.length?e[1]:null;null==n?n="":n+=", ",n+='"'+r.toLowerCase()+'"',null!=o&&(n+=" "+o)}}),null!=n&&(t.style.fontFeatureSettings=n)},e.prototype._convertColor=function(t){var e=+t;return isNaN(e)?i.ColorFactory.createColor(t):this._colorPaletteManager.getPaletteColorAt(e)},e}(p),b=n(439),w=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},P=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(C(arguments[e]));return t},x=function(){function t(){}return t.fontName="fontName",t.bold="bold",t.italic="italic",t.underline="underline",t.subscript="subscript",t.superscript="superscript",t.color="color",t.justifyCenter="justifyCenter",t.justifyFull="justifyFull",t.justifyLeft="justifyLeft",t.justifyRight="justifyRight",t.documentCommands=d.values([t.fontName,t.bold,t.italic,t.underline,t.color,t.justifyCenter,t.justifyFull,t.justifyLeft,t.justifyRight,t.subscript,t.superscript]),t.alignment="alignment",t.firstLineIndent="first-line-indent",t.spaceAfter="space-after",t.spaceBefore="space-before",t.leftIndent="left-indent",t.rightIndent="right-indent",t.fontSize="fontSize",t.stroke="stroke",t.tracking="tracking",t.leading="leading",t.allCaps="all-caps",t.smallCaps="small-caps",t.openType="open-type",t}(),O=function(){function t(t){var e=this;this._manager=null,this._fontService=null,this._useSimpleFontList=!1,this._range=null,this._inlineStyle=null,this._defaultInlineStyle=null,this._paragraphStyle=null,this._defaultParagraphStyle=null,this._usedColors=[],this._previewScale=1,this.styleChanged=new a.a,this.initialized=new a.a,this._ready=!1,this._elementHandler=t,document.onselectionchange=function(t){e._onSelectionChange()}}return t.prototype.init=function(t,e,n){var r=this;this._fontService=t,this._useSimpleFontList=e,null!=n&&b.e({url:n+"/cssFonts",type:b.b.post,headers:[b.a.json],data:JSON.stringify({requestedFontsByPsName:Object.keys(t.availableFontsByPsName),advancedMode:!this._useSimpleFontList})}).then(function(t){var e=l.g(t.value);r._elementHandler.addTextEditorStyles(e),r._ready=!0,r.initialized.fire()})},t.prototype.show=function(t,e){var n,r,o=this;this._manager=t,this._previewScale=null!==(n=e.previewScale)&&void 0!==n?n:1;var i=null===(r=e.textFormattingEnabled)||void 0===r||r,a=new v(this._manager,this._fontService,this._useSimpleFontList,this._previewScale).convert(e.text);this._elementHandler.showTextEditor(e.rectangle,e.textAlignment,a,e.borderWidth,e.borderColor,e.fillColor,e.opacity),this._setDefaultStyles(e.defaultInlineStyle,e.defaultParagraphStyle),this._div.addEventListener("input",function(t){o._div.innerHTML.startsWith("<p")||(document.execCommand("selectAll"),document.execCommand("formatblock",!1,"p")),"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType||document.getSelection().collapseToEnd()}),i||this._div.addEventListener("beforeinput",function(t){["formatBold","formatItalic","formatUnderline","formatSuperscript","formatSubscript","formatJustifyFull","formatJustifyCenter","formatJustifyRight","formatJustifyLeft","formatFontColor","formatFontName"].includes(t.inputType)&&t.preventDefault()}),this._div.addEventListener("paste",function(t){t.preventDefault();var e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}),this._usedColors=[]},t.prototype.hide=function(){this._updateColors();var t=this._elementHandler.hideTextEditor(),e=m.getElementFontValue(this._div),n=new m(this._manager,this._fontService,this._useSimpleFontList,this._previewScale,e).convert(t);return this._manager=null,n},t.prototype.undo=function(){document.execCommand("undo")},t.prototype.redo=function(){document.execCommand("redo")},Object.defineProperty(t.prototype,"canUndo",{get:function(){return document.queryCommandEnabled("undo")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRedo",{get:function(){return document.queryCommandEnabled("redo")},enumerable:!0,configurable:!0}),t.prototype.processMouseEvent=function(t){},t.prototype.processKeyEvent=function(t){return!0},Object.defineProperty(t.prototype,"_div",{get:function(){return this._elementHandler.textEditorDiv},enumerable:!0,configurable:!0}),t.prototype._updateColors=function(){var t=this;this._div.querySelectorAll("span[style*=color]").forEach(function(e){if(!l.l(e.style.color)){var n=t._findUsedColor(e.style.color);if(null!=n){var r=t._manager.addColorToPaletteReturnIndex(n);v.setColorIndex(e,r)}}})},t.prototype._findUsedColor=function(t){if(l.l(t))return null;var e=i.ColorFactory.createColor(t),n=this._usedColors.find(function(t){return i.ColorFactory.createColor(t.preview).equals(e)});return null!=n?n.color:null},t.prototype._focusOnDiv=function(){var t=document.getSelection(),e=t.rangeCount>0?t.getRangeAt(0):null;null!=e&&this._div.contains(e.commonAncestorContainer)||(this._div.focus(),t.removeAllRanges(),t.addRange(this._range))},t.prototype._onSelectionChange=function(t){if(void 0===t&&(t=!0),null!=this._div){var e=document.getSelection(),n=e.rangeCount>0?e.getRangeAt(0):null;null!=n&&this._div.contains(n.commonAncestorContainer)&&(this._range=n,t&&this._updateStyles())}},Object.defineProperty(t.prototype,"active",{get:function(){return null!=this._manager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),t.prototype._updateStyles=function(){if(this.active){var t=this._updateInlineStyles(),e=this._updateParagraphStyles();(t||e)&&this.styleChanged.fire()}},t.prototype._updateInlineStyles=function(){var t=this;if(null==this._range||this._range.startContainer==this._div)return!1;var e=this._getDefaultInlineStyle(),n=function(r){if(t._isParagraph(r)||n(r.parentNode),t._isSpan(r)){var o=r.attributes.style,i=p.styleToDict(null!=o?o.value:null),a=r.attributes.colordata,s=p.styleToDict(null!=a?a.value:null),l=m.getElementFontValue(r,t._div);if(null!=l){var u=m.getFontSettings(l,t._fontService,t._useSimpleFontList);null!=u.postScriptName&&(e.font.postScriptName=u.postScriptName),null!=u.fauxBold&&(e.font.fauxBold=u.fauxBold),null!=u.fauxItalic&&(e.font.fauxItalic=u.fauxItalic)}var c=m.getFontSizeValue(i,t._previewScale);null!=c&&(e.font.size=c);var h=m.getUnderlineValue(i);null!=h&&(e.underline=h);var f=m.getAllCapsValue(i);null!=f&&(e.font.allCaps=f);var d=m.getLeadingValue(i,t._previewScale);null!=d&&(e.leading=d);var y=m.getTrackingValue(i);null!=y&&(e.tracking=y);var g=m.getSubValue(i);null!=g&&(e.subscript=g);var _=m.getSupValue(i);null!=_&&(e.superscript=_);var v=m.getOpenTypeValue(i);null!=v&&(e.openType=v);var b=t._findUsedColor(i.color);if(null!=b)e.color=b;else{var w=m.getColorValue(i,s,t._manager);null!=w&&(e.color=t._manager.getPaletteColorAt(w))}var C=m.getStrokeValue(i,s,t._manager,t._previewScale);if(null!=C){var P=!1;e.stroke={},null!=C.size&&(e.stroke.size=C.size,P=e.stroke.size>0),null!=C.colorIndex&&(e.stroke.color=t._manager.getPaletteColorAt(C.colorIndex),P=P||e.stroke.color.alpha>0),e.stroke.enabled=P}}};return n(this._range.startContainer),!d.isEqual(this._inlineStyle,e)&&(this._inlineStyle=e,!0)},t.prototype._updateParagraphStyles=function(){var t=this;if(null==this._range||this._range.startContainer==this._div)return!1;var e=this._getDefaultParagraphStyle(),n=function(r){if(t._isParagraph(r)){var o=r.attributes.style,i=p.styleToDict(null!=o?o.value:null),a=m.getAlignmentValue(i);null!=a&&(e.alignment=a);var s=m.getFirstLineIndentValue(i,t._previewScale);null!=s&&(e.firstLineIndent=s);var l=m.getSpaceAfterValue(i,t._previewScale);null!=l&&(e.spaceAfter=l);var u=m.getSpaceBeforeValue(i,t._previewScale);null!=u&&(e.spaceBefore=u);var c=m.getLeftIndentValue(i,t._previewScale);null!=c&&(e.leftIndent=c);var h=m.getRightIndentValue(i,t._previewScale);null!=h&&(e.rightIndent=h)}else n(r.parentNode)};return n(this._range.startContainer),!d.isEqual(this._paragraphStyle,e)&&(this._paragraphStyle=e,!0)},Object.defineProperty(t.prototype,"inlineStyle",{get:function(){return this.active?this._inlineStyle:null},set:function(t){if(this.active&&(this._removeCurrentStyles(t,this._inlineStyle),!d.isEmpty(t))){var e=this._inlineStyleToCommands(t);if(0!=e.length){this._focusOnDiv();var n=e[0];if(1==e.length&&x.documentCommands.includes(n.key))if(n.key==x.color){var r=n.value;null!=r?(document.execCommand("foreColor",!1,r.preview),this._usedColors.push({preview:r.preview,color:r})):console.warn("Incorrect color value")}else document.execCommand(n.key,!1,n.value);else this._customInlineCommand(e);this._updateStyles()}}},enumerable:!0,configurable:!0}),t.prototype._removeCurrentStyles=function(t,e){var n=this;d.keys(t).forEach(function(r){var o=e[r],a=t[r];void 0!=o?"stroke"===r?(d.isEqual(a,o)||a.enabled===o.enabled&&a.size===o.size&&a.color instanceof i.Color&&a.color.equals(o.color))&&delete t[r]:"openType"===r||(a instanceof i.Color?a.equals(o)&&delete t[r]:a instanceof Object?n._removeCurrentStyles(a,o):a===o&&delete t[r]):console.warn("_removeCurrentStyles: Incorrect current value state: key "+r+" not found")})},t.prototype._inlineStyleToCommands=function(t){var e=[];if(null!=t.font){var n=v.fontSettingsToHtmlValue(t.font,this._fontService,this._useSimpleFontList);if(null!=n){if(null!=this._inlineStyle){var r=v.fontSettingsToHtmlValue(this._inlineStyle.font,this._fontService,this._useSimpleFontList);this._removeCurrentStyles(n,r)}null!=n.family&&e.push({key:x.fontName,value:n.family}),null!=n.bold&&e.push({key:x.bold,value:n.bold}),null!=n.italic&&e.push({key:x.italic,value:n.italic})}null!=t.font.size&&e.push({key:x.fontSize,value:t.font.size}),null!=t.font.allCaps&&e.push({key:x.allCaps,value:t.font.allCaps})}return null!=t.underline&&e.push({key:x.underline,value:t.underline}),null!=t.leading&&e.push({key:x.leading,value:t.leading}),null!=t.tracking&&e.push({key:x.tracking,value:t.tracking}),null!=t.color&&e.push({key:x.color,value:t.color}),null!=t.stroke&&e.push({key:x.stroke,value:t.stroke}),null!=t.subscript&&e.push({key:x.subscript,value:t.subscript}),null!=t.superscript&&e.push({key:x.superscript,value:t.superscript}),null!=t.openType&&e.push({key:x.openType,value:t.openType}),e},Object.defineProperty(t.prototype,"paragraphStyle",{get:function(){return this.active?this._paragraphStyle:null},set:function(t){if(this.active&&(this._removeCurrentStyles(t,this._paragraphStyle),!d.isEmpty(t))){var e=this._paragraphStyleToCommands(t);if(0!=e.length){var n=e[0];1==e.length&&x.documentCommands.includes(n.key)?(this._div.focus(),document.execCommand(n.key,!1,n.value)):this._customParagraphCommand(e),this._updateStyles()}}},enumerable:!0,configurable:!0}),t.prototype._paragraphStyleToCommands=function(t,e){void 0===e&&(e=!0);var n=[];if(null!=t.alignment)if(e&&d.isEmpty(d.omit(t,x.alignment)))switch(t.alignment){case s.TextAlignment.Left:n.push({key:x.justifyLeft});break;case s.TextAlignment.Center:n.push({key:x.justifyCenter});break;case s.TextAlignment.Right:n.push({key:x.justifyRight});break;case s.TextAlignment.Justify:n.push({key:x.justifyFull})}else n.push({key:x.alignment,value:t.alignment});return null!=t.firstLineIndent&&n.push({key:x.firstLineIndent,value:t.firstLineIndent}),null!=t.leftIndent&&n.push({key:x.leftIndent,value:t.leftIndent}),null!=t.rightIndent&&n.push({key:x.rightIndent,value:t.rightIndent}),null!=t.spaceAfter&&n.push({key:x.spaceAfter,value:t.spaceAfter}),null!=t.spaceBefore&&n.push({key:x.spaceBefore,value:t.spaceBefore}),n},t.prototype._isSpan=function(t){return"span"===t.nodeName.toLocaleLowerCase()},t.prototype._isParagraph=function(t){return"p"===t.nodeName.toLocaleLowerCase()},t.prototype._isText=function(t){return"#text"===t.nodeName.toLocaleLowerCase()},t.prototype._customInlineCommand=function(t){var e=this,n=this._range;if(null!=n&&!n.collapsed){var r=document.getSelection(),o=this._div.cloneNode(),i=function(t){if(r.containsNode(t,!1)||!t.hasChildNodes())return!0;var o=!0,a=!0;return e._isSpan(t.firstChild)?o=i(t.firstChild):e._isText(t.firstChild)&&(o=t.firstChild.isSameNode(n.startContainer)&&0==n.startOffset),e._isSpan(t.lastChild)?a=i(t.lastChild):e._isText(t.lastChild)&&(a=t.lastChild.isSameNode(n.endContainer)&&n.endOffset==t.lastChild.length),e._range.startContainer.isSameNode(n.endContainer)?o&&a:o||a},a=function(o,s){o.childNodes.forEach(function(o){if(r.containsNode(o,!0))if(e._isText(o)){var l=o.cloneNode(!1),u=null,c=0;o.isSameNode(n.startContainer)&&(c=n.startOffset,u=l.splitText(c),s.appendChild(l),l=u,u=null),o.isSameNode(n.endContainer)&&(u=l.splitText(n.endOffset-c));var h=document.createElement("span");e._applyCommands(h,t),h.textContent=l.textContent,s.appendChild(h),null!=u&&s.appendChild(u)}else if(e._isSpan(o)&&i(o)){var p=o.cloneNode(!0);e._applyCommands(p,t),s.appendChild(p)}else{var f=o.cloneNode(!1);a(o,f),s.appendChild(f)}else s.appendChild(o.cloneNode(!0))})};this._div.childNodes.forEach(function(t){if(r.containsNode(t,!0)){var e=t.cloneNode(!1);a(t,e),o.appendChild(e)}else o.appendChild(t.cloneNode(!0))}),this._div.focus(),document.execCommand("selectAll"),document.execCommand("insertHTML",!1,o.innerHTML),this._onSelectionChange(!1)}},t.prototype._customParagraphCommand=function(t){var e=this;if(null!=this._range){var n=document.getSelection(),r=this._div.cloneNode();this._div.childNodes.forEach(function(o){if(e._isParagraph(o)){var i=o.cloneNode(!0);n.containsNode(o,!0)&&e._applyCommands(i,t),r.appendChild(i)}}),this._div.focus(),document.execCommand("selectAll"),document.execCommand("insertHTML",!1,r.innerHTML),this._onSelectionChange(!1)}},t.prototype._applyCommands=function(t,e){var n,r;try{for(var o=w(e),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.key,l=a.value;switch(s){case x.fontName:v.setFontNameValue(t,l);break;case x.fontSize:v.setFontSizeValue(t,l,this._previewScale);break;case x.bold:v.setBoldValue(t,l);break;case x.italic:v.setItalicValue(t,l);break;case x.allCaps:v.setAllCapsValue(t,l);break;case x.underline:v.setUnderlineValue(t,l);break;case x.leading:v.setLeadingValue(t,l,this._previewScale);break;case x.tracking:v.setTrackingValue(t,l);break;case x.color:v.setColorValue(t,l,this._manager);break;case x.stroke:v.setStrokeValue(t,l,this._manager,this._previewScale);break;case x.openType:v.setOpenTypeValue(t,l);break;case x.subscript:v.setSubValue(t,l);break;case x.superscript:v.setSupValue(t,l);break;case x.alignment:v.setAlignmentValue(t,l);break;case x.firstLineIndent:v.setFirstLineIndentValue(t,l,this._previewScale);break;case x.spaceAfter:v.setSpaceAfterValue(t,l,this._previewScale);break;case x.spaceBefore:v.setSpaceBeforeValue(t,l,this._previewScale);break;case x.leftIndent:v.setLeftIndentValue(t,l,this._previewScale);break;case x.rightIndent:v.setRightIndentValue(t,l,this._previewScale)}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype._setDefaultStyles=function(t,e){this._inlineStyle=null,this._defaultInlineStyle=t,this._paragraphStyle=null,this._defaultParagraphStyle=e;var n=this._inlineStyleToCommands(t),r=this._paragraphStyleToCommands(e,!1);this._applyCommands(this._div,P(n,r))},t.prototype._getDefaultInlineStyle=function(){var t=this._defaultInlineStyle;return{font:{postScriptName:t.font.postScriptName,fauxBold:t.font.fauxBold,fauxItalic:t.font.fauxItalic,size:t.font.size},underline:t.underline,leading:t.leading,tracking:t.tracking,color:t.color.clone(),stroke:{enabled:t.stroke.enabled,size:t.stroke.size,color:t.stroke.color.clone()},openType:t.openType}},t.prototype._getDefaultParagraphStyle=function(){return d.clone(this._defaultParagraphStyle)},t}()},582:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(382),o=(function(){}(),function(){return function(){}}()),i=function(){return function(){}}(),a=function(){return function(){}}(),s=n(386),l=n(394),u=n(396),c=function(){function t(t){this._itemData=t}return t.prototype.applyImage=function(t){var e=this.applyShape(t);return e=this._applyColor(t,"overlayColor")||e},t.prototype.applyLine=function(t){var e=this._applyOpacity(t);return e=this._applyColor(t)||e},t.prototype.applyDashedLine=function(t){var e=this._applyOpacity(t);return e=this._applyColor(t)||e,e=this._applyColor(t,"altColor","altColor")||e},t.prototype.applyBaseText=function(t){var e=this.applyShape(t);return e=this._applyColor(t)||e,e=this._applyFont(t)||e,e=this._applyTextProperty(t,"underline")||e,e=this._applyTextProperty(t,"tracking")||e,e=this._applyTextProperty(t,"leading")||e,e=this._applyShadow(t)||e,e=this._applyStroke(t)||e},t.prototype.applyShape=function(t){var e=this._applyOpacity(t);return e=this._applyFillColor(t)||e,e=this._applyBorderColor(t)||e,e=this._applyBorderWidth(t)||e},t.prototype.applyClipart=function(t){return this._applyClipartColors(t)},t.prototype.applyBarcode=function(t){var e=this.applyShape(t);return e=this._applyBarcodeColor(t)||e},t.prototype.applyPlaceholder=function(t){var e=!1;return l.a.getContentEffect(t)===u.f.Colorize&&(e=this._applyColor(t,"contentFillColor","fillColor")||e,this._itemData.fillColor=null),e=this.applyShape(t)||e,e=this._applyColor(t,"overlayColor")||e},t.prototype._applyFillColor=function(t){return this._applyColor(t,"fillColor","fillColor")},t.prototype._applyClipartColors=function(t){var e=this,n=!1;return this._itemData.clipartColors.forEach(function(r,o){null!=r&&e._tryApplyColor(r,function(e){t.setColor(t.colorGroups[o],e),n=!0})}),n},t.prototype._applyTextFillColor=function(t){return this._applyColor(t,"fillColor","textFillColor")},t.prototype._applyFont=function(t){if(null==this._itemData.font)return!1;var e=!1;return this._itemData.font.postScriptName&&(t.font.postScriptName=this._itemData.font.postScriptName,e=!0),null!=this._itemData.font.fauxItalic&&(t.font.fauxItalic=this._itemData.font.fauxItalic,e=!0),null!=this._itemData.font.fauxBold&&(t.font.fauxBold=this._itemData.font.fauxBold,e=!0),this._itemData.font.size&&(t.font.size=this._itemData.font.size,e=!0),null!=this._itemData.font.allCaps&&(t.font.allCaps=this._itemData.font.allCaps,e=!0),e},t.prototype._applyTextProperty=function(t,e){return null!=this._itemData[e]&&(t[e]=this._itemData[e],!0)},t.prototype._applyShadow=function(t){if(null==this._itemData.shadow||null==t.shadow)return!1;var e=!1;return this._itemData.shadow.color&&this._itemData.shadow.color!==t.shadow.color.preview&&(e=this._tryApplyColor(this._itemData.shadow.color,function(e){return t.shadow.color=e})),this._itemData.shadow.angle&&this._itemData.shadow.angle!==t.shadow.angle&&(t.shadow.angle=this._itemData.shadow.angle,e=!0),this._itemData.shadow.distance&&this._itemData.shadow.distance!==t.shadow.distance&&(t.shadow.distance=this._itemData.shadow.distance,e=!0),this._itemData.shadow.size&&this._itemData.shadow.size!==t.shadow.size&&(t.shadow.size=this._itemData.shadow.size,e=!0),e},t.prototype._applyStroke=function(t){if(null==this._itemData.stroke||null==t.stroke)return!1;var e=!1;return this._itemData.stroke.color&&(e=this._tryApplyColor(this._itemData.stroke.color,function(e){return t.stroke.color=e})),this._itemData.stroke.size&&this._itemData.stroke.size!==t.stroke.size&&(t.stroke.size=this._itemData.stroke.size,e=!0),e},t.prototype._applyOpacity=function(t){return null!=this._itemData.opacity&&(t.opacity=this._itemData.opacity,!0)},t.prototype._applyBorderColor=function(t){return this._applyColor(t,"borderColor","borderColor")},t.prototype._applyBorderWidth=function(t){return null!=this._itemData.borderWidth&&(t.borderWidth=this._itemData.borderWidth,!0)},t.prototype._applyColor=function(t,e,n){return void 0===e&&(e="color"),void 0===n&&(n="color"),null!=this._itemData[n]&&this._tryApplyColor(this._itemData[n],function(n){"overlayColor"===e&&(t instanceof r.ImageItem||t instanceof r.PlaceholderItem)?l.a.setOverlayEffectColor(t,n):t[e]=n})},t.prototype._tryApplyColor=function(t,e){var n=s.ColorFactory.createColor(t);return!!n&&(e(n),!0)},t.prototype._applyBarcodeColor=function(t){return this._applyColor(t,"color","barcodeColor")},t}(),h=n(383),p=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f=function(){function t(){}return t.prototype.apply=function(t,e,n){var r,o;if(!t)return!1;var i=!1;try{for(var a=p(t.getAllItems()),s=a.next();!s.done;s=a.next()){var l=s.value;i=this.applyToItem(l,e,n)||i}}catch(t){r={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i},t.prototype.applyToItem=function(t,e,n){var o=n||t.themeBinding;if(!t||!e||!o)return!1;var i=this._getItemDataByItemType(t,e,o);return t instanceof r.ImageItem?new c(i).applyImage(t):t instanceof r.PlaceholderItem?this._applyToPlaceholder(t,e,o):t instanceof r.DashedLineItem?new c(i).applyDashedLine(t):t instanceof r.LineItem?new c(i).applyLine(t):t instanceof r.BaseTextItem?new c(i).applyBaseText(t):t instanceof r.BarcodeItem?new c(i).applyBarcode(t):t instanceof r.ShapeItem?new c(i).applyShape(t):t instanceof r.ClipartItem?new c(i).applyClipart(t):void 0},t.prototype._getItemDataByItemType=function(t,e,n){return t instanceof r.ImageItem?this._getMergedItemData(e,n,n.img):t instanceof r.LineItem?this._getMergedItemData(e,n,n.line):t instanceof r.BaseTextItem?this._getMergedItemData(e,n,n.text):t instanceof r.BarcodeItem?this._getMergedItemData(e,n,n.barcode):this._getMergedItemData(e,n)},t.prototype._applyToPlaceholder=function(t,e,n){var o=this,i=!1,a=this._getMergedItemData(e,n);return null!=a.fillColor&&l.a.isBgContainerItem(t)&&l.a.clearImageContent(t),t.content instanceof r.Item&&(i=this.applyToItem(t.content,e,n)),null!=t.topFrames&&t.topFrames.map(function(t){i=o.applyToItem(t,e)||i}),null!=t.bottomFrames&&t.bottomFrames.map(function(t){i=o.applyToItem(t,e)||i}),new c(a).applyPlaceholder(t)||i},t.prototype._getMergedItemData=function(t,e,n){var r,o,i=this;void 0===n&&(n=null);var s=new a;if(e.styles){var l=e.styles.map(function(e){return i._getThemeItemData(e,t)});try{for(var u=p(l),c=u.next();!c.done;c=u.next()){var h=c.value;h&&(s=this._applyStyle(s,h))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}}return this._applyTHBMColor(t,e,n,s)},t.prototype._applyStyle=function(t,e){return t.color=Object(h.a)(t.color,e.color),t.fillColor=Object(h.a)(t.fillColor,e.fillColor),t.borderColor=Object(h.a)(t.borderColor,e.borderColor),t.borderWidth=Object(h.a)(t.borderWidth,e.borderWidth),t.altColor=Object(h.a)(t.altColor,e.altColor),t.leading=Object(h.a)(t.leading,e.leading),t.tracking=Object(h.a)(t.tracking,e.tracking),t.underline=Object(h.a)(t.underline,e.underline),t.horizontalLineColor=Object(h.a)(t.horizontalLineColor,e.horizontalLineColor),t.verticalLineColor=Object(h.a)(t.verticalLineColor,e.verticalLineColor),t.barcodeColor=Object(h.a)(t.barcodeColor,e.barcodeColor),t.opacity=Object(h.a)(t.opacity,e.opacity),t.font=this._applySettings(t.font,e.font),t},t.prototype._applyTHBMColor=function(t,e,n,r){var a=this;return r.fillColor=Object(h.a)(r.fillColor,this._getTHMBColor(e.fill,t)),r.textFillColor=Object(h.a)(r.textFillColor,this._getTHMBColor(e.textFill,t)),r.borderColor=Object(h.a)(r.borderColor,this._getTHMBColor(e.border,t)),r.color=Object(h.a)(r.color,this._getTHMBColor(n,t)),r.altColor=Object(h.a)(r.altColor,this._getTHMBColor(e.altline,t)),r.horizontalLineColor=Object(h.a)(r.horizontalLineColor,this._getTHMBColor(e.horizontal,t)),r.verticalLineColor=Object(h.a)(r.verticalLineColor,this._getTHMBColor(e.vertical,t)),r.barcodeColor=Object(h.a)(r.barcodeColor,this._getTHMBColor(e.barcode,t)),null!=e.shadow&&(null==r.shadow&&(r.shadow=new o),r.shadow.color=Object(h.a)(r.shadow.color,this._getTHMBColor(e.shadow,t))),null!=e.stroke&&(null==r.stroke&&(r.stroke=new i),r.stroke.color=Object(h.a)(r.stroke.color,this._getTHMBColor(e.stroke,t))),r.clipartColors=null!=e.clipartColors?e.clipartColors.map(function(e){return a._getTHMBColor(e,t)}):[],r},t.prototype._applySettings=function(t,e){var n,r;if(null==e)return t;if(null==t)return e;try{for(var o=p(Object.getOwnPropertyNames(e)),i=o.next();!i.done;i=o.next()){var a=i.value,s=e[a];null!=s&&(t[a]=s)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return t},t.prototype._getThemeItemData=function(t,e){return t?e[t]:null},t.prototype._getTHMBColor=function(t,e){return t?e[t]:null},t}()},584:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(420),i=n(463),a=function(){function t(t,e,n){this._sourceString=t,this._regexArray=e,this._maxValue=n}return t.prototype.validate=function(){var t=function(t,e){return"ComponentName - "+t+", Value - "+e+"; "},e="";if(this._validate(this._regexArray[1])||(e=e.concat(t("C",this._regexArray[1]))),this._validate(this._regexArray[2])||(e=e.concat(t("M",this._regexArray[2]))),this._validate(this._regexArray[3])||(e=e.concat(t("Y",this._regexArray[3]))),this._validate(this._regexArray[4])||(e=e.concat(t("K",this._regexArray[4]))),void 0==this._regexArray[5]||this._validate(this._regexArray[5])||(e=e.concat(t("A",this._regexArray[5]))),e.length>0){var n=e.length-2;e=e.substring(0,n),console.warn("Invalid value of CMYK components. SourceString: "+this._sourceString+"; InvalidComponents: "+e+".")}},t.prototype._validate=function(t){var e=parseFloat(t);return e>=0&&e<=this._maxValue},t}(),s=n(381),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e){var n=t.call(this,e)||this;if(n.c=255,n.m=255,n.y=255,n.k=255,n.a=255,null==e)return n;var r="Incorrect CmykColor format: "+JSON.stringify(e);if("string"==typeof e)n._tryInitFromPercentCmyk(e)||n._tryInitFromRelativeCmyk(e)||n._tryInitFromDeviceCmyk(e)?n._previewFromServer=i.a.isValidRgbColor(n.preview):console.warn(r);else try{n._init(e)}catch(t){console.warn(r)}return n}return l(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"CmykColor"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.a},enumerable:!0,configurable:!0}),e.prototype._tryInitFromDeviceCmyk=function(t){var e=/^\s*device-cmyk\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\,\s*(\d{1,3})\s*(\,\s*(\d{1,}(\.\d{1,})?))?\s*(\,\s*(.*)\s*)?\)\s*;{0,1}\s*$/g.exec(t);if(null!=e&&10===e.length){var n={c:+e[1],m:+e[2],y:+e[3],k:+e[4],preview:e[9]};return void 0!=e[6]&&(n.a=this._convertRelativeToByte(e[6])),this._init(n),!0}return!1},e.prototype._tryInitFromPercentCmyk=function(t){var e=/^\s*cmyk\(\s*(\d{1,3}(?:\.\d{1,})?)%\s*,\s*(\d{1,3}(?:\.\d{1,})?)%\s*,\s*(\d{1,3}(?:\.\d{1,})?)%\s*,\s*(\d{1,3}(?:\.\d{1,})?)%\s*(?:\,\s*(\d{1,3}(?:\.\d{1,})?)%)?\s*(?:\,\s*(.*)\s*)?\);{0,1}\s*$/g.exec(t);if(null!=e&&7===e.length){new a(t,e,100).validate();var n={c:i.a.convertPercentToByte(e[1]),m:i.a.convertPercentToByte(e[2]),y:i.a.convertPercentToByte(e[3]),k:i.a.convertPercentToByte(e[4]),preview:e[6]};return void 0!=e[5]&&(n.a=i.a.convertPercentToByte(e[5])),this._init(n),!0}return!1},e.prototype._tryInitFromRelativeCmyk=function(t){var e=/^\s*cmyk\(\s*(\d{1,3}(?:\.\d{1,})?)\s*,\s*(\d{1,3}(?:\.\d{1,})?)\s*,\s*(\d{1,3}(?:\.\d{1,})?)\s*,\s*(\d{1,3}(?:\.\d{1,})?)\s*(?:\,\s*(\d{1,3}(?:\.\d{1,})?))?\s*(?:\,\s*(.*)\s*)?\);{0,1}\s*$/g.exec(t);if(null!=e&&7===e.length){new a(t,e,1).validate();var n={c:this._convertRelativeToByte(e[1]),m:this._convertRelativeToByte(e[2]),y:this._convertRelativeToByte(e[3]),k:this._convertRelativeToByte(e[4]),preview:e[6]};return void 0!=e[5]&&(n.a=this._convertAlpha(e[5])),this._init(n),!0}return!1},e.prototype._convertRelativeToByte=function(t){return Object(s.Clamp)(0,parseInt((255*parseFloat(t)).toFixed(0)),255)},e.prototype._convertAlpha=function(t){return Object(s.Clamp)(parseInt((255*parseFloat(t)).toFixed(0)),0,255)},e.prototype.clone=function(){return new e(this)},e.prototype.getData=function(){var e=t.prototype.getData.call(this);return e.c=this.c,e.m=this.m,e.y=this.y,e.k=this.k,e.a=this.a,e},e.prototype.equals=function(n,r){return void 0===r&&(r=!1),n instanceof e&&(t.prototype.equals.call(this,n,r)&&n instanceof e&&this.c===n.c&&this.m===n.m&&this.y===n.y&&this.k===n.k&&this.a===n.a)},e.prototype.toString=function(){var t="cmyk("+this._toRelative(this.c)+","+this._toRelative(this.m)+","+this._toRelative(this.y)+","+this._toRelative(this.k)+","+this._toRelative(this.a);return null!=this.preview&&(t+=","+this.preview),t+=")"},e.prototype._toRelative=function(t){return(t/255).toFixed(7)},e.prototype._getPreview=function(){return this.preview},e.prototype._init=function(e){t.prototype._init.call(this,e),e.a=null!=e.a?e.a:255,this._validateNumber(e.c),this._validateNumber(e.m),this._validateNumber(e.y),this._validateNumber(e.k),this._validateNumber(e.a),this.c=e.c,this.m=e.m,this.y=e.y,this.k=e.k,this.a=e.a},e}(o.a)},586:function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(409),o=n(384),i=n(561),a=n(381),s=n(498),l=n(382),u=n(470),c=function(){function t(t){this.id=t}return t.prototype.isEmpty=function(){return null==this.color&&null==this.fill&&null==this.border&&null==this.altBorder&&null==this.altColor&&null==this.stroke&&null==this.shadow&&null==this.verticalLineColor&&null==this.horizontalLineColor},t}(),h=n(380),p=n(404),f=n(392),d=n(562),y=n(499),g=n(391),m=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},_=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},v=function(){function t(t){var e=this;this._isDisposed=!1,this._tag=null,this._afterUpdateCallbacks=[],this._modelItem=null,this._memoryCanvas=null,this._textureCanvas=null,this._skipPropertyChanged=!1,this._skippedPropertyName=null,this._baseOnItemPropertyChanged=function(t,n){e._skipPropertyChanged?e._skippedPropertyName=n:e._onItemPropertyChanged(t,n)},this._isCurrentWebServiceCallForAll=null,this._updating=!1,this._readyEvent=new o.c,this._changingEvent=new o.a,this._changedEvent=new o.a,this._itemPropertyChangedEvent=new o.c,this._setItem(t),this._controlPoints=[],this._layer=null,this._tag=null,this._permissions=this._createItemHandlerPermissions(),this._uniqueId=this._createUniqueID(),this._callbacks=[],this._renderState=d.a.Hidden}return Object.defineProperty(t.prototype,"item",{get:function(){return this._modelItem},set:function(t){this._setItem(t)},enumerable:!0,configurable:!0}),t.prototype._getItem=function(){return this._modelItem},t.prototype._setItem=function(t){this._unsubscribeItemEvents(),this._modelItem=t,this._subscribeItemEvents()},t.prototype._subscribeItemEvents=function(){null!=this._modelItem&&this._modelItem.addPropertyChanged(this._baseOnItemPropertyChanged)},t.prototype._unsubscribeItemEvents=function(){null!=this._modelItem&&this._modelItem.removePropertyChanged(this._baseOnItemPropertyChanged)},t.prototype._onItemPropertyChanged=function(t,e){switch(e){case"locked":case"opacity":case"blendMode":null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.redraw()),this.raiseChanged();break;case"name":null!=this.canvas&&this.canvas.updateHoverDiv();break;case"transform":null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.redraw()),this._transformChanged();break;case"visible":this._onItemVisibilityChanged();break;case"manipulationPermissions":case"visualizationPermissions":case"itemPermissions":case"permissions":this._permissions=null,this.quickUpdate(),this.canvas&&this.canvas.redraw(),this.raiseChanged(),this._updateVisibility()}this._itemPropertyChangedEvent.notify(this,e)},t.prototype._onItemVisibilityChanged=function(){this.quickUpdate(),null!=this.canvas&&(this.canvas.updateSelection(),this.canvas.redraw()),this.raiseChanged()},t.prototype._createUniqueID=function(){return"vo"+(new Date).getTime()+Math.round(1e3*Math.random())},t.prototype._updateVisibility=function(){},Object.defineProperty(t.prototype,"ready",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype._isLoadingImage=function(){return!1},t.prototype._setIsLoadingImage=function(t){throw new h.e},Object.defineProperty(t.prototype,"isLoadingImage",{get:function(){return this._isLoadingImage()},set:function(t){this.isLoadingImage!==t&&this._setIsLoadingImage(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uniqueId",{get:function(){return this._uniqueId},set:function(t){this._uniqueId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderState",{get:function(){return this._renderState},set:function(t){this._renderState=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentGroupItemHandler",{get:function(){return null!=this.item.parentGroupItem&&null!=this.canvas?this.canvas.handlerFactory.get(this.item.parentGroupItem):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.item.blendMode},enumerable:!0,configurable:!0}),t.prototype.hasBlendMode=function(){return null!=this.item.blendMode&&this.item.blendMode!=l.BlendMode.None&&this.item.blendMode!=l.BlendMode.Normal},Object.defineProperty(t.prototype,"controlPoints",{get:function(){return this._controlPoints},set:function(t){this._controlPoints=t,this.raiseChanged()},enumerable:!0,configurable:!0}),t.prototype._createItemHandlerPermissions=function(){var t=this.item.manipulationPermissions,e=this.item.visualizationPermissions,n=this.item.itemPermissions,r={AllowDelete:t.allowDelete,AllowMoveHorizontal:t.allowMoveHorizontal,AllowMoveVertical:t.allowMoveVertical,AllowRotate:t.allowRotate,ResizeGrips:null!=t.resizeGrips?{Edge:t.resizeGrips.edge,Corner:t.resizeGrips.corner}:null,AllowDragAndDrop:t.allowDragAndDrop,NoPrint:e.noPrint,NoShow:e.noShow,ShowDeleteToolbarButton:n.itemToolbarPermissions.showDeleteButton,ShowEditToolbarButton:n.itemToolbarPermissions.showEditButton,ShowSelectToolbarButton:n.itemToolbarPermissions.showSelectButton};return new i.a(r,!0)},t.prototype.getPermissions=function(){return null==this._permissions&&(this._permissions=this._createItemHandlerPermissions()),this._permissions},t.prototype._transformChanged=function(){this.raiseChanged()},Object.defineProperty(t.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t,this.raiseChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},set:function(t){if(t!==this._canvas){var e=this._canvas;this._canvas=t,null!=this._canvas?this._onAddedOnCanvas(t):this._onRemovedFromCanvas(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this._layer},set:function(t){this._layer=t,this.quickUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return null!=this._layer&&null!=this._canvas?this._canvas.flatGroupItemsInLayer(this._layer).indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return new a.RectangleF(0,0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.item.name},set:function(t){this.item.name=t},enumerable:!0,configurable:!0}),t.prototype.getTypeName=function(){return this.constructor.typeName},t.prototype._createDataInstance=function(t){return new s.a(t)},t.prototype.getData=function(t){var e=this._createDataInstance(this);return"asObject"===t?e:JSON.stringify(e)},t.prototype._getDataItem=function(){return(new u.a).serializeModelComponent(this.item)},t.prototype._applyDataItem=function(t,e){var n=this,r=(new u.a).productParser.parseItem(t);this._modifyItem(function(){n._setDataItem(r,e)})},t.prototype._setDataItem=function(t,e){this.item.transform=t.transform.clone(),this.setData(e)},t.prototype.updateItem=function(t){this._skippedPropertyName=null,this._modifyItem(function(e){e.update(t)}),null!=this._skippedPropertyName&&(this._onItemPropertyChanged(this.item,this._skippedPropertyName),null!=this.canvas&&this.canvas.updateSelection())},t.prototype._modifyItem=function(t){if("function"==typeof t){this._skipPropertyChanged=!0;try{t(this.item)}finally{this._skipPropertyChanged=!1}}},t.prototype.setData=function(t){var e;t&&""!==t&&(e="string"==typeof t?JSON.parse(t):t,this._createDataInstance().applyState(e,this))},Object.defineProperty(t.prototype,"visible",{get:function(){return this.item.visible},set:function(t){this._setVisible(t)},enumerable:!0,configurable:!0}),t.prototype._setVisible=function(t){this.item.visible=t},t.prototype.isVisible=function(){var e=this,n=function(r){var o,i=r.parentGroupItem;if(null==i)return!1;if(!i.visible||i.visualizationPermissions.noShow)return!0;var a=null===(o=e.canvas)||void 0===o?void 0:o.handlerFactory.get(i);return!(!a||a.isVisible())||(!(!a||!t.isGroupHandler(a)||a.isChildVisible(e))||n(i))};return this.visible&&!this.getPermissions().noShow&&(null==this.layer||this.layer.getVisible())&&!n(this.item)},t.isGroupHandler=function(t){return t._isGroupHandler()},t.prototype.isEmpty=function(){return!1},Object.defineProperty(t.prototype,"locked",{get:function(){return this.item.locked},set:function(t){this.item.locked=t},enumerable:!0,configurable:!0}),t.prototype.isLocked=function(){return this.locked||null!=this.layer&&this.layer.locked},t.prototype._onAddedOnCanvas=function(t,e){null!=t&&(t.updateTexts(),e||this.update())},t.prototype._onRemovedFromCanvas=function(t){this._canvas=null},t.prototype.processEvent=function(t){},t.prototype.hitTest=function(t){throw new Error("Not implemented")},t.prototype._convertBlendModeToGlobalOperation=function(t){var e=null;switch(t){case l.BlendMode.Normal:e="normal";break;case l.BlendMode.Multiply:e="multiply";break;case l.BlendMode.Screen:e="screen";break;case l.BlendMode.Overlay:e="overlay";break;case l.BlendMode.Darken:e="darken";break;case l.BlendMode.Lighten:e="lighten";break;case l.BlendMode.ColorDodge:e="color-dodge";break;case l.BlendMode.ColorBurn:e="color-burn";break;case l.BlendMode.HardLight:e="hard-light";break;case l.BlendMode.SoftLight:e="soft-light";break;case l.BlendMode.Difference:e="difference";break;case l.BlendMode.Exclusion:e="exclusion";break;case l.BlendMode.None:default:e="none"}return e},t.prototype.draw=function(t,e){if(void 0===e&&(e=null),null!=t&&null!=this.canvas&&null!=this.layer){var n=t.globalCompositeOperation,r=this.hasBlendMode()?this._convertBlendModeToGlobalOperation(this.blendMode):n,o=null!=this.canvas.maskedLayers&&this.canvas.maskedLayers.includes(this.layer);t.globalAlpha=o?.2:1;var i=t.canvas.width,s=t.canvas.height,l=g.a.screenDpi*this.canvas.zoom/72,u=g.a.screenDpi*this.canvas.zoom/72;if(null!=e&&(t.save(),f.a.clipPath(t,e)),this.isNormalRenderingType)this.hasBlendMode()&&(t.globalCompositeOperation=r),this.drawItemHandler(t),this.hasBlendMode()&&(t.globalCompositeOperation=n);else{var c=this.layer.textureImage;if(null==c)return void this.canvas.drawWaitClock(t,this.bounds.center);var h=this._getTemporaryCanvas(i,s),p=h.getContext("2d"),d=this._getTextureCanvas(i,s),y=d.getContext("2d"),m=new a.RotatedRectangleF(i/2,s/2,i,s);f.a.drawImage(y,c,m,l,u,this.canvas.disableSmoothing),p.scale(l,u),p.translate(this.canvas.offset.x,this.canvas.offset.y),this.drawItemHandler(p,t),y.globalCompositeOperation="destination-in",y.drawImage(h,0,0,i,s),t.drawImage(d,-this.canvas.offset.x,-this.canvas.offset.y,i/l,s/u)}null!=e&&t.restore()}},t.prototype.drawItemHandler=function(t,e){},Object.defineProperty(t.prototype,"isNormalRenderingType",{get:function(){return null==this.layer||this.layer.renderingType===p.RenderingType.Normal},enumerable:!0,configurable:!0}),t.prototype._getTemporaryCanvas=function(t,e){return null==this._memoryCanvas&&(this._memoryCanvas=document.createElement("canvas")),this._memoryCanvas.width=t,this._memoryCanvas.height=e,this._memoryCanvas},t.prototype._getTextureCanvas=function(t,e){return null==this._textureCanvas&&(this._textureCanvas=document.createElement("canvas")),this._textureCanvas.width=t,this._textureCanvas.height=e,this._textureCanvas},t.prototype.updateColors=function(){return null!=this.canvas&&this.hasColorsToUpdate()?this.canvas.updateColors(this):Promise.resolve()},t.prototype.getColorData=function(){return new c(this.item.id)},t.prototype.setColorData=function(t){},t.prototype.hasColorsToUpdate=function(){return!1},t.prototype.quickUpdate=function(){},t.prototype.update=function(t,e){},t.prototype._validateBeforeCallService=function(){return!0},t.prototype.updateForExternalCanvas=function(t){this._serverSideUpdate(null,null,null,t)},t.prototype._update=function(t,e,n){this._serverSideUpdate(t,e,n,null)},t.prototype._serverSideUpdate=function(t,e,n,r){var o=this;if(this.isUpdating)this._callbacks.push(e);else{"function"==typeof e&&e(),null!=n&&this._afterUpdateCallbacks.push(n);var i=this._createDataInstance(this),a=[JSON.stringify(i),JSON.parse(this._getDataItem())];null!=t&&(a=a.concat(t)),null==this._handlerUpdated&&(this._handlerUpdated=new y.a),this._validateBeforeCallService()?this._callService("Update"+this.getTypeName(),a,function(t){if(null!=o.item){var e=null;"object"==typeof t&&(e=t.item,t=t.itemHandlerData),null!=e&&o._applyDataItem(e,t),o.setData(t),0===o._afterUpdateCallbacks.length?o.quickUpdate():(o._afterUpdateCallbacks.forEach(function(t){return t.apply(o)}),o._afterUpdateCallbacks=[],o.quickUpdate(),o.raiseChanged()),o.onSuccessResponse(),o.item.getItemChangedEvent().notify()}},function(t){o.onErrorResponse(t)},r):this._onValidateBeforeCallServiceFailed()}},t.prototype._callService=function(t,e,n,r,o){var i=null!=o?o:this.canvas;if(null!=i&&i.isInitialized&&!i.initialization){var a=this.isNormalRenderingType||null==this.layer?null:this.layer.uniqueId,s=i.getCallService(t,e,n,r,a);this._updateActiveWebServiceCall(s)}else this._handlerUpdated=null},t.prototype.updateActiveColorWebServiceCall=function(t,e){return m(this,void 0,void 0,function(){return _(this,function(n){switch(n.label){case 0:return null==this._activeWebServiceCall?[3,2]:[4,this._activeWebServiceCall];case 1:n.sent(),n.label=2;case 2:return null!=this._activeColorWebServiceCall&&(this._activeColorWebServiceCall.cancel(),this._isCurrentWebServiceCallForAll&&!e)?(t.cancel(),this._isCurrentWebServiceCallForAll=e,this.canvas.updateColors(),this._activeColorWebServiceCall=null,[2]):(null==this._handlerUpdated&&(this._handlerUpdated=new y.a),this._activeColorWebServiceCall=t,this._isCurrentWebServiceCallForAll=e,[2])}})})},t.prototype._updateActiveWebServiceCall=function(t){return m(this,void 0,void 0,function(){return _(this,function(e){switch(e.label){case 0:return this._cancelWebServiceCall(),this._activeWebServiceCall=t,null==this._activeColorWebServiceCall?[2]:(this._activeColorWebServiceCall.cancel(),this._activeColorWebServiceCall=null,[4,this._handlerUpdated.promise]);case 1:return e.sent(),this._isCurrentWebServiceCallForAll?this.canvas.updateColors():this.updateColors(),[2]}})})},t.prototype._startTransform=function(){this._cancelWebServiceCall()},t.prototype._cancelWebServiceCall=function(){null!=this._activeWebServiceCall&&(this._activeWebServiceCall.cancel(),this._activeWebServiceCall=null)},t.prototype.waitUpdate=function(){return m(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return null==this._handlerUpdated?[3,2]:[4,this._handlerUpdated.promise];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Object.defineProperty(t.prototype,"isUpdating",{get:function(){return this._updating},enumerable:!0,configurable:!0}),t.prototype.beginUpdate=function(){this._updating=!0},t.prototype.endUpdate=function(){this._updating=!1,this.updated();for(var t=!1;this._callbacks.length>0;){var e=this._callbacks.shift();"function"==typeof e&&(e(),t=!0)}t&&this.update()},t.prototype.updated=function(){this.raiseChanged()},t.prototype.addReady=function(t){this._readyEvent.add(t)},t.prototype.removeReady=function(t){this._readyEvent.remove(t)},t.prototype._dispatchReadyEvent=function(){this._readyEvent.notify(this)},t.prototype.addChanging=function(t){this._changingEvent.add(t)},t.prototype.removeChanging=function(t){this._changingEvent.remove(t)},t.prototype.raiseChanging=function(t){t=null!=t?t:this.item,this._changingEvent.notify(t)},t.prototype.getChangingEvent=function(){return this._changingEvent},t.prototype.addChanged=function(t){this._changedEvent.add(t)},t.prototype.removeChanged=function(t){this._changedEvent.remove(t)},t.prototype.raiseChanged=function(){this.isUpdating||this._changedEvent.notify(this)},t.prototype.getChangedEvent=function(){return this._changedEvent},t.prototype.addItemPropertyChanged=function(t){this._itemPropertyChangedEvent.add(t)},t.prototype.removeItemPropertyChanged=function(t){this._itemPropertyChangedEvent.remove(t)},t.prototype.initialize=function(){},t.prototype._onValidateBeforeCallServiceFailed=function(){this._handlerUpdated.resolve(),this._handlerUpdated=null},t.prototype.onSuccessResponse=function(t){void 0===t&&(t=r.c.Item),t==r.c.Item?this._activeWebServiceCall=null:t==r.c.Color&&(this._activeColorWebServiceCall=null),null==this._activeWebServiceCall&&null==this._activeColorWebServiceCall&&null!=this._handlerUpdated&&(this._handlerUpdated.resolve(),this._handlerUpdated=null)},t.prototype.onErrorResponse=function(t,e){void 0===e&&(e=r.c.Item),e==r.c.Item?this._activeWebServiceCall=null:e==r.c.Color&&(this._activeColorWebServiceCall=null),this._afterUpdateCallbacks=[],null==this._activeWebServiceCall&&null==this._activeColorWebServiceCall&&null!=this._handlerUpdated&&(this._handlerUpdated.reject(t),this._handlerUpdated=null)},t.prototype.validateActiveColorWebServiceCall=function(){null!=this._activeColorWebServiceCall?this.hasColorsToUpdate()||(this._activeColorWebServiceCall=null,null==this._activeWebServiceCall&&(this._handlerUpdated=null)):null==this._activeWebServiceCall&&(this._handlerUpdated=null)},t.prototype.dispose=function(){var t;this._unsubscribeItemEvents(),this._cancelWebServiceCall(),null===(t=this._activeColorWebServiceCall)||void 0===t||t.cancel(),this._activeColorWebServiceCall=null,this._isDisposed=!0},t.prototype._isGroupHandler=function(){return!0},t.typeName="ItemHandler",t}()},587:function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(386),o=n(381),i=n(384),a=n(446),s=n(506),l=n(573),u=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},c=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h=function(){function t(){this._local="",this._allowWriteToGlobalClipboard=!1,this._allowReadFromGlobalClipboard=!1}return t.prototype.init=function(){null!=window.navigator.clipboard?this._allowWriteToGlobalClipboard=this._allowReadFromGlobalClipboard=!0:this._allowWriteToGlobalClipboard=this._allowReadFromGlobalClipboard=!1},t.prototype.read=function(){return u(this,void 0,void 0,function(){var t,e;return c(this,function(n){switch(n.label){case 0:if(!this._allowReadFromGlobalClipboard)return[2,this._local];t=this._createTextArea(),document.body.appendChild(t),t.focus(),t.select(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,window.navigator.clipboard.readText()];case 2:return[2,n.sent()];case 3:return e=n.sent(),console.warn(e),this._allowReadFromGlobalClipboard=!1,[2,this._local];case 4:return document.body.removeChild(t),[7];case 5:return[2]}})})},t.prototype.write=function(t){return u(this,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:if(this._local=t,!this._allowWriteToGlobalClipboard)return[3,5];e=this._createTextArea(),document.body.appendChild(e),e.focus(),e.select(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,window.navigator.clipboard.writeText(t)];case 2:return r.sent(),[3,5];case 3:return n=r.sent(),console.warn(n),this._allowWriteToGlobalClipboard=!1,[3,5];case 4:return document.body.removeChild(e),[7];case 5:return[2]}})})},t.prototype._createTextArea=function(){var t=document.createElement("textarea");return t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.background="transparent",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t},t}(),p=n(387),f=n(383),d=n(574),y=function(){function t(t,e){this._canvas=null,this._activeTextCanvasHandler=null,this._clipboard=null,this._manager=null,this._rectangle=null,this._previewScale=1,this._textFormattingEnabled=!0,this._transform=null,this._inlineStyle=null,this._paragraphStyle=null,this.styleChanged=new i.a,this.initialized=new i.a,this._originalCanvasFloatingItemMenuEnabled=!1,this._selectionValue=null,this._selectionAnchor=null,this._mouseSelectionIsActive=!1,this._cursorBlinkInterval=null,this._cursorBlink=!0,this._cursorEnabled=!1,this._ready=!1,this._canvas=t,this._activeTextCanvasHandler=e,this._clipboard=new h}return t.prototype.init=function(t,e,n){this._ready=!0,this._clipboard.init(),this.initialized.fire()},t.prototype.show=function(t,e){var n,r,i=this;this._manager=t,this._activeTextCanvasHandler.moveActiveTextCanvasOnTop(),this._rectangle=e.rectangle,this._previewScale=null!==(n=e.previewScale)&&void 0!==n?n:1,this._transform=e.transform,this._textFormattingEnabled=null!==(r=e.textFormattingEnabled)&&void 0!==r?r:this._canvas.viewer.textFormattingEnabled,this._originalCanvasFloatingItemMenuEnabled=this._canvas.floatingItemToolbarEnabled,this._canvas.floatingItemToolbarEnabled=!1,this._cursorEnabled=!0,this._setCursor(o.PointF.fromIPoint(e.point)),this._selectionAnchor=this._textHandler.getCursor().getPosition(),null==this._cursorBlinkInterval&&(this._cursorBlinkInterval=setInterval(function(){i._drawCursor()},500)),this._textHandler.clearUndoRedo()},t.prototype.hide=function(){this._selection=null,this._selectionAnchor=null,this._canvas.floatingItemToolbarEnabled=this._originalCanvasFloatingItemMenuEnabled,this._cursorEnabled=!1,this._canvas.clearTextCursor();var t=this._getFormattedText();return this._manager=null,this._activeTextCanvasHandler.moveActiveTextCanvasBack(),t},Object.defineProperty(t.prototype,"active",{get:function(){return null!=this._manager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),t.prototype.setTextWhizz=function(t){this._textWhizz=t},Object.defineProperty(t.prototype,"_textHandler",{get:function(){var t;return null==this._manager&&console.warn("TextEditor: Cannot access TextHandler when the editor is hidden"),null===(t=this._manager)||void 0===t?void 0:t.textHandler},enumerable:!0,configurable:!0}),t.prototype._getFormattedText=function(){return this._textHandler.getTextRange().getFormattedTextForDefaults()},Object.defineProperty(t.prototype,"_selection",{get:function(){return this._selectionValue},set:function(t){this._selectionValue=t,this._drawCursor(!0),this._manager.drawSelection(t),this._updateStyles()},enumerable:!0,configurable:!0}),t.prototype.undo=function(){this._textHandler.undo();var t=this._textHandler.getUndoInfo(),e=this._textHandler.getUndoRedoCursorOrSelection(t.index);if(e.isValid())if(s.a.comparePosition(e.getStart(),e.getEnd())){var n=e.getStart();this._textHandler.getCursor().set(n)}else this._selection=e;this._manager.updateItemHandler(this._selection),this._onCursorChanged(!0)},t.prototype.redo=function(){this._textHandler.redo();var t=this._textHandler.getUndoInfo(),e=this._textHandler.getUndoRedoCursorOrSelection(t.index);if(e.isValid())if(s.a.comparePosition(e.getStart(),e.getEnd())){var n=e.getStart();this._textHandler.getCursor().set(n)}else this._selection=e;this._manager.updateItemHandler(this._selection),this._onCursorChanged(!0)},Object.defineProperty(t.prototype,"canUndo",{get:function(){var t=this._textHandler.getUndoInfo();return t.count>1&&t.index>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRedo",{get:function(){var t=this._textHandler.getUndoInfo();return t.count>1&&t.index<t.count-1},enumerable:!0,configurable:!0}),t.prototype.processMouseEvent=function(t){var e=t.type,n=new o.PointF(t.x,t.y),r=this._textHandler.getCursor();if("dblclick"===e)this._setCursor(n),this._selection=r.getPosition().getWord(),this._selectionAnchor=this._selection.getStart(),r.set(this._selection.getEnd());else if("mousedown"===e)this._selection=null,this._setCursor(n),this._mouseSelectionIsActive=!0,this._selectionAnchor=r.getPosition();else if("mousemove"===e){if(this._mouseSelectionIsActive){this._setCursor(n,!1);var i=new this._textWhizz.TextRange(this._selectionAnchor,r.getPosition());null!=this._selection&&s.a.compareSelection(this._selection,i)||(this._selection=i,this._drawCursor(!0))}}else if("mouseup"===e){this._mouseSelectionIsActive=!1;var a=r.getPosition();if(s.a.comparePosition(a,this._selectionAnchor))this._selection=null;else{i=new this._textWhizz.TextRange(this._selectionAnchor,r.getPosition());null!=this._selection&&s.a.compareSelection(this._selection,i)||(this._selection=i)}}},t.prototype.processKeyEvent=function(t){var e=!0===t.ctrlKey||!0===t.metaKey,n=!0===t.shiftKey,r=this._textHandler.getCursor(),o=!0,i=this._keyEventToDirection(t);if(null!=i)r.move(i),n?this._selection=new this._textWhizz.TextRange(this._selectionAnchor,r.getPosition()):e&&(this._selectionAnchor=r.getPosition());else if(t.keyCode===l.a.Backspace||t.keyCode===l.a.Delete){if(null!=this._selection)this._selection.isValid()&&r.set(this._selection.delete(this._textWhizz.RangeCursorPos.left)),this._selection=null;else{var a=r.getPosition(),s=t.keyCode===l.a.Backspace?e?this._textWhizz.MoveDirection.leftWord:this._textWhizz.MoveDirection.left:e?this._textWhizz.MoveDirection.rightWord:this._textWhizz.MoveDirection.right;if(r.move(s)){var u=t.keyCode===l.a.Backspace?r.getPosition():a,c=t.keyCode===l.a.Backspace?a:r.getPosition(),h=t.keyCode===l.a.Backspace?this._textWhizz.RangeCursorPos.right:this._textWhizz.RangeCursorPos.left;r.set(new this._textWhizz.TextRange(u,c).delete(h))}}this._selectionAnchor=r.getPosition()}else if(e)o=this._applyHotKey(t.keyCode,r,n);else if(t.keyCode===l.a.Enter||t.keyCode===l.a.Tab||1===t.key.length)if(null!=this._selection&&this._selection.isValid()&&r.set(this._selection.delete(this._textWhizz.RangeCursorPos.left)),t.keyCode!==l.a.Enter||n){var p=t.key;t.keyCode===l.a.Enter?p="\n":t.keyCode===l.a.Tab&&(p="\t"),r.insertPlainText(p)}else r.insertLine();return n||e||(this._selectionAnchor=r.getPosition(),this._selection=null),this._manager.updateItemHandler(this._selection),this._onCursorChanged(!0),o},t.prototype._keyEventToDirection=function(t){var e=t.keyCode,n=t.ctrlKey||t.metaKey;switch(e){case l.a.Left:return n?this._textWhizz.MoveDirection.leftWord:this._textWhizz.MoveDirection.left;case l.a.Right:return n?this._textWhizz.MoveDirection.rightWord:this._textWhizz.MoveDirection.right;case l.a.Up:return this._textWhizz.MoveDirection.up;case l.a.Down:return this._textWhizz.MoveDirection.down;case l.a.Home:return n?this._textWhizz.MoveDirection.textStart:this._textWhizz.MoveDirection.lineStart;case l.a.End:return n?this._textWhizz.MoveDirection.textEnd:this._textWhizz.MoveDirection.lineEnd}return null},t.prototype._applyHotKey=function(t,e,n){var r,o,i=this;if(void 0===n&&(n=!1),t===l.a.Space)this._clearFormat();else if(t!==l.a.KeyA||n){if(t===l.a.KeyC)(null===(r=this._selection)||void 0===r?void 0:r.isValid())&&this._clipboard.write(f.k(this._selection.getFormattedTextForDefaults(),"\n"));else if(t===l.a.KeyV)(null===(o=this._selection)||void 0===o?void 0:o.isValid())&&e.set(this._selection.delete(this._textWhizz.RangeCursorPos.left)),this._clipboard.read().then(function(t){e.insertPlainText(t),i._manager.updateItemHandler(i._selection),i._onCursorChanged(!0)});else if(t===l.a.KeyZ){if(!this.canUndo)return!1;this.undo()}else if(t===l.a.KeyY){if(!this.canRedo)return!1;this.redo()}}else this._selection=this._textHandler.getTextRange();if(!this._textFormattingEnabled)return!0;if(t===l.a.KeyA&&n){var a=!this.getCharStyle().allCaps;this.updateCharStyle({font:{allCaps:a}})}else if(t===l.a.KeyB){a=!this.getCharStyle().fauxBold;this.updateCharStyle({font:{fauxBold:a}})}else if(t===l.a.KeyI){a=!this.getCharStyle().fauxItalic;this.updateCharStyle({font:{fauxItalic:a}})}else if(t===l.a.KeyU){a=!this.getCharStyle().underline;this.updateCharStyle({underline:a})}else if(t===l.a.KeyPeriod&&n){a=this.getCharStyle().fontSize+1;this.updateCharStyle({font:{size:a}})}else if(t===l.a.KeyComma&&n){a=this.getCharStyle().fontSize-1;this.updateCharStyle({font:{size:a}})}else if(t===l.a.KeyEqual&&n||t===l.a.KeyPeriod){a=!this.getCharStyle().superscript;this.updateCharStyle({superscript:a,subscript:!a&&void 0})}else if(t===l.a.KeyEqual||t===l.a.KeyComma){a=!this.getCharStyle().subscript;this.updateCharStyle({subscript:a,superscript:!a&&void 0})}else t===l.a.KeyL?this.updateParagraphStyle(function(t){return t.alignment=i._textWhizz.TextAlignment.left,t}):t===l.a.KeyR?this.updateParagraphStyle(function(t){return t.alignment=i._textWhizz.TextAlignment.right,t}):t===l.a.KeyE&&this.updateParagraphStyle(function(t){return t.alignment=i._textWhizz.TextAlignment.center,t});return!0},t.prototype._clearFormat=function(){if(null!=this._selection){var t=this._textHandler.getDefaultCharStyle();this._selection.updateCharStyles(function(e){return t})}},t.prototype._setCursor=function(t,e){void 0===e&&(e=!0),t.translate(-this._canvas.offset.x,-this._canvas.offset.y),null!=this._transform&&(t.rotateAt(-this._transform.angle,this._rectangle.center),t.translate(-this._transform.translateX,-this._transform.translateY)),t.scale(1/this._previewScale,1/this._previewScale);var n=this._textHandler,r=n.getPosition(t.x,t.y);n.getCursor().set(r),this._onCursorChanged(e)},t.prototype._onCursorChanged=function(t){this._updateStyles(),this._drawCursor(t)},t.prototype._drawCursor=function(t){var e=this;void 0===t&&(t=!1),this._cursorEnabled&&(this._cursorBlink=t||!this._cursorBlink,this._cursorBlink&&null==this._selection&&!this._mouseSelectionIsActive?this._canvas.drawTextCursor(function(t){var n=e._textHandler.getCursor().getPath();Object(o.EqualsOfFloatNumbers)(e._previewScale,1)||n.scale(e._previewScale,e._previewScale),n.addToContext(t)}):this._canvas.clearTextCursor())},t.prototype.updateCharStyle=function(t){var e,n=this,o=function(e){if(null!=t.font){var o=t.font;null!=o.postScriptName&&(e.fontName=o.postScriptName),null!=o.size&&(e.fontSize=o.size),null!=o.fauxBold&&(e.fauxBold=o.fauxBold),null!=o.fauxItalic&&(e.fauxItalic=o.fauxItalic),null!=o.allCaps&&(e.allCaps=o.allCaps)}return null!=t.color&&(e.fillColor=n._manager.addColorToPalette(t.color)),null!=t.underline&&(e.underline=t.underline),null!=t.leading&&(e.leading=t.leading),null!=t.tracking&&(e.tracking=t.tracking),null!=t.stroke&&(t.stroke.enabled?(null!=t.stroke.color&&(e.strokeColor=n._manager.addColorToPalette(t.stroke.color)),null!=t.stroke.size&&(e.strokeWidth=t.stroke.size)):(e.strokeColor=n._manager.addColorToPalette(new r.RgbColor({r:0,g:0,b:0,a:0})),e.strokeWidth=0)),Array.isArray(t.openType)&&t.openType.length&&t.openType.forEach(function(t){return e.openType.set(n._textWhizz.OpenTypeFeature[t.tag],t.value)}),null!=t.subscript&&(e.subscript=t.subscript),null!=t.superscript&&(e.superscript=t.superscript),e},i=this._selection,a=function(){null!=i&&i.isValid()&&i.updateCharStyles(o),n._updateInlineStyles(),n._manager.updateItemHandler(n._selection)},s=null===(e=t.font)||void 0===e?void 0:e.postScriptName;if(null==s||this._canvas.fontRegistry.containsFonts([s])){a();var l=o(this._textHandler.getCursor().getCharStyle());this._textHandler.getCursor().setCharStyle(l),this._drawCursor(!0)}else this._canvas.fontRegistry.loadFonts([s]).finally(a)},t.prototype.updateParagraphStyle=function(t){null!=this._selection&&this._selection.isValid()&&this._selection.updateParagraphStyles(t);var e=t(this._textHandler.getCursor().getParagraphStyle());this._textHandler.getCursor().setParagraphStyle(e),this._manager.updateItemHandler(this._selection),this._drawCursor(!0)},t.prototype.getCharStyle=function(){if(null!=this._selection&&this._selection.isValid()){var t=this._selection.getCharStyles();if(t.size()>0)return t.get(0)}return this._textHandler.getCursor().getCharStyle()},t.prototype.getParagraphStyles=function(){return this._textHandler.getCursor().getParagraphStyle()},t.prototype._updateStyles=function(){if(this.active){var t=this._updateInlineStyles(),e=this._updateParagraphStyles();(t||e)&&this.styleChanged.fire()}},t.prototype._updateInlineStyles=function(){var t=this,e={},n=this.getCharStyle();return e.font={postScriptName:n.fontName,size:n.fontSize,fauxBold:n.fauxBold,fauxItalic:n.fauxItalic,allCaps:n.allCaps},e.color=this._manager.getPaletteColorAt(n.fillColor.index),e.underline=n.underline,e.leading=n.leading,e.tracking=n.tracking,e.superscript=n.superscript,e.subscript=n.subscript,e.openType=Object.keys(this._textWhizz.OpenTypeFeature).filter(function(e){return 1===n.openType.get(t._textWhizz.OpenTypeFeature[e])}).map(function(t){return new d.a(t,1)}),e.stroke={color:this._manager.getPaletteColorAt(n.strokeColor.index),size:n.strokeWidth,enabled:this._isStrokeEnabled(n)},!p.isEqual(this._inlineStyle,e)&&(this._inlineStyle=e,!0)},t.prototype._updateParagraphStyles=function(){var t={},e=this.getParagraphStyles();return t.alignment=this._textWhizzAlignmentToAlignment(e.alignment),t.firstLineIndent=e.firstLineIndent,t.leftIndent=e.leftIndent,t.rightIndent=e.rightIndent,t.spaceAfter=e.spaceAfter,t.spaceBefore=e.spaceBefore,!p.isEqual(this._paragraphStyle,t)&&(this._paragraphStyle=t,!0)},Object.defineProperty(t.prototype,"inlineStyle",{get:function(){return this.active?this._inlineStyle:null},set:function(t){this.active&&this.updateCharStyle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paragraphStyle",{get:function(){return this.active?this._paragraphStyle:null},set:function(e){var n=this;this.active&&(this.updateParagraphStyle(function(r){return null!=e.alignment&&(r.alignment=t.alignmentToTextWhizzAlignment(e.alignment,n._textWhizz)),null!=e.firstLineIndent&&(r.firstLineIndent=e.firstLineIndent),null!=e.leftIndent&&(r.leftIndent=e.leftIndent),null!=e.rightIndent&&(r.rightIndent=e.rightIndent),null!=e.spaceAfter&&(r.spaceAfter=e.spaceAfter),null!=e.spaceBefore&&(r.spaceBefore=e.spaceBefore),r}),this._updateParagraphStyles())},enumerable:!0,configurable:!0}),t.prototype._isStrokeEnabled=function(t){var e=t.strokeColor;return t.strokeWidth>0||e.getType()===this._textWhizz.ColorType.rgb&&e.A>0||e.getType()===this._textWhizz.ColorType.indexed&&this._manager.getPaletteColorAt(e.index).alpha>0},t.alignmentToTextWhizzAlignment=function(t,e){switch(t){case a.e.Center:return e.TextAlignment.center;case a.e.Right:return e.TextAlignment.right;case a.e.Justify:return e.TextAlignment.justification;case a.e.LastLeft:return e.TextAlignment.justificationLastLeft;case a.e.LastCenter:return e.TextAlignment.justificationLastCenter;case a.e.LastRight:return e.TextAlignment.justificationLastRight;case a.e.Left:default:return e.TextAlignment.left}},t.prototype._textWhizzAlignmentToAlignment=function(t){switch(t){case this._textWhizz.TextAlignment.center:return a.e.Center;case this._textWhizz.TextAlignment.right:return a.e.Right;case this._textWhizz.TextAlignment.justification:return a.e.Justify;case this._textWhizz.TextAlignment.justificationLastLeft:return a.e.LastLeft;case this._textWhizz.TextAlignment.justificationLastCenter:return a.e.LastCenter;case this._textWhizz.TextAlignment.justificationLastRight:return a.e.LastRight;case this._textWhizz.TextAlignment.left:default:return a.e.Left}},t}()},739:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="6.4.0"},740:function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(76))},741:function(t,e,n){"use strict";(function(t){var r=n(412),o=n(909),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i?r.a.Buffer:void 0,l=(s?s.isBuffer:void 0)||o.a;e.a=l}).call(this,n(174)(t))},742:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t.Move="Move",t.Add="Add",t.Remove="Remove"}(r||(r={}))},743:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(464),i=n(487),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(t){function e(n){var r=t.call(this,n)||this;return r.type=e.type,null==n&&(n=!0),r._allowTextCrop=n,r}return a(e,t),e.prototype.clone=function(){var n=new e;return n.allowTextCrop=this.allowTextCrop,n=t.prototype.clone.call(this,n)},e.prototype.equals=function(e){return t.prototype.equals.call(this,e)&&this.allowTextCrop===e.allowTextCrop},e.type="TextViolationSettings",s([Object(o.a)(),l("design:type",Boolean)],e.prototype,"allowTextCrop",void 0),e}(i.a)},744:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(384),o=n(400),i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.propertyChanged=new r.a,this.allowReplaceContentConstraint=null,this._allowReplaceContent=!0,this.allowUngroupContraint=null,this._allowUngroup=!0,this.allowSelectNestedItemsContraint=null,this._allowSelectNestedItems=!0}return Object.defineProperty(t.prototype,"allowReplaceContent",{get:function(){return null!=this.allowReplaceContentConstraint?this.allowReplaceContentConstraint:this._allowReplaceContent},set:function(t){this._allowReplaceContent!==t&&(this._allowReplaceContent=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowUngroup",{get:function(){return null!=this.allowUngroupContraint?this.allowUngroupContraint:this._allowUngroup},set:function(t){this._allowUngroup!==t&&(this._allowUngroup=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowSelectNestedItems",{get:function(){return null!=this.allowSelectNestedItemsContraint?this.allowSelectNestedItemsContraint:this._allowSelectNestedItems},set:function(t){this._allowSelectNestedItems!==t&&(this._allowSelectNestedItems=t,this.propertyChanged.notify())},enumerable:!0,configurable:!0}),t.prototype.getSimplifiedObject=function(){return{allowReplaceContent:this._allowReplaceContent,allowSelectNestedItems:this._allowSelectNestedItems,allowUngroup:this._allowUngroup}},t.prototype.clone=function(){var e=new t;return e.allowReplaceContent=this._allowReplaceContent,e.allowReplaceContentConstraint=this.allowReplaceContentConstraint,e.allowSelectNestedItems=this._allowSelectNestedItems,e.allowSelectNestedItemsContraint=this.allowSelectNestedItemsContraint,e.allowUngroup=this._allowUngroup,e.allowUngroupContraint=this.allowUngroupContraint,e},t.prototype.equals=function(t){return this.allowReplaceContent===t.allowReplaceContent&&this.allowReplaceContentConstraint===t.allowReplaceContentConstraint&&this.allowSelectNestedItems===t.allowSelectNestedItems&&this.allowSelectNestedItemsContraint===t.allowSelectNestedItemsContraint&&this.allowUngroup===t.allowUngroup&&this.allowUngroupContraint===t.allowUngroupContraint},i([Object(o.a)({ignore:!0}),a("design:type",Boolean)],t.prototype,"allowReplaceContentConstraint",void 0),t}()},745:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r,o=function(){function t(){}return t.prototype.rotate=function(t,e){t.rotateAngle+=this._getRotationTypeAngle(e)},t.prototype._getRotationTypeAngle=function(t){switch(t){case r.Rotate180:return 180;case r.Rotate270:return 270;default:return 90}},t}();!function(t){t[t.None=0]="None",t[t.Rotate90=90]="Rotate90",t[t.Rotate180=180]="Rotate180",t[t.Rotate270=270]="Rotate270",t[t.Auto=-1]="Auto"}(r||(r={}))},746:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(382),o=n(387),i=n(394),a=n(383),s=function(){function t(t,e,n){var r=this;this._productHandler=t,this._canvas=e,this._eventManager=n,this.maskSymbol="%",this._eventManager.addItemAdded(function(t){return r.initVariableItem(t.item)})}return t.prototype.initVariableItems=function(t){var e=this;t.getAllItems({ignoreMockups:!1,flatGroupItems:!0,excludeGroupItems:!0}).forEach(function(t){return e.initVariableItem(t)})},t.prototype.setVariableValues=function(t,e){var n=this;0!==t.length&&t.forEach(function(t){n.setVariableValue(t,e)})},t.prototype.setVariableValue=function(t,e,n){i.a.isVariableItem(t)&&this._setVariableValue(t,e),t instanceof r.PlaceholderItem&&!t.isEmptyContent&&i.a.isVariableItem(t.content)&&this._setVariableValue(t.content,e),n||i.a.updateItems([t],this._productHandler,this._canvas)},t.prototype.getVariableItemDisplayName=function(t){if(null!=t){var e=this.maskSymbol,n=new RegExp("^"+e+"|"+e+"$","gm");return t.replace(n,"")}},t.prototype._isCanBeVariable=function(t){return t.canSetIsVariable()},t.prototype.getRealItemName=function(t){return this._isCanBeVariable(t)&&t.isVariable?t.name.replace(new RegExp("^"+this.maskSymbol+"|"+this.maskSymbol+"$","gm"),""):t.name},t.prototype.createNewItemName=function(t,e){return this._isCanBeVariable(t)&&t.isVariable?""+this.maskSymbol+e+this.maskSymbol:e},t.prototype._setVariableValue=function(t,e){if(t.isVariable!==e){if(e)t.name=""+this.maskSymbol+t.name+this.maskSymbol;else{var n=new RegExp("^"+this.maskSymbol+"|"+this.maskSymbol+"$","gm");t.name=t.name.replace(n,"")}t.isVariable=e}},t.prototype.initVariableItem=function(t){var e=t instanceof r.PlaceholderItem&&!t.isEmptyContent?t.content:t;if(e instanceof r.ContentItem){var n=this.maskSymbol,o=e.name;0===o.indexOf(n)&&o.lastIndexOf(n)===o.length-1&&(e.isVariable=!0)}},t.getVariablesFromItems=function(e){var n=[];return e.forEach(function(e){var i;e instanceof r.BaseTextItem?i=t.getVariablesFromTextItem(e):e instanceof r.PlaceholderItem?i=t.getVariablesFromPlaceholderItem(e):e instanceof r.ImageItem?i=t.getVariablesFromImageItem(e):e instanceof r.EllipseItem?i=t.getVariablesFromEllipseItem(e):e instanceof r.RectangleItem?i=t.getVariablesFromRectangleItem(e):e instanceof r.ShapeItem?i=t.getVariablesFromShapeItem(e):e instanceof r.GroupItem&&(i=t.getVariablesFromGroupItem(e)),o.isEmpty(null!=i?o.without(i,null):null)||i.forEach(function(t){null==n.find(function(e){return e.name==t.name&&e.type==t.type})&&n.push(t)})}),n},t.getVariablesFromGroupItem=function(t){return this.getVariablesFromItems(t.getNestedItems(!0))},t.getVariablesFromShapeItem=function(t){return null},t.getVariablesFromEllipseItem=function(t){return null},t.getVariablesFromRectangleItem=function(t){return null},t.getVariablesFromImageItem=function(t){return t.isVariable?[{name:t.name,type:"Image",value:null}]:null},t.getVariablesFromPlaceholderItem=function(t){if(!t.isVariable)return null;if(t instanceof r.PlaceholderItem&&t.isBarcodePlaceholder){var e=t.content;return[{name:t.name,type:"BarcodePlaceholder",barcodeFormat:t.barcodeFormat,barcodeSubType:e.barcodeSubType,value:e.barcodeContent}]}return[{name:t.name,type:"ImagePlaceholder",value:null}]},t.getVariablesFromTextItem=function(e){var n=[];if(t.isInStringPlacehodler(e))return e.placeholders.forEach(function(t){n.push({name:t.name,type:"InString",value:null!=t.value&&""!==t.value?t.value:t.name})}),n;var r=t.getInterpolationVariables(e);return o.isEmpty(r)?e.isVariable?[{name:e.name,type:"Text",value:e.text}]:null:r},t.getInterpolationVariables=function(e){var n=[];if(t.isInStringPlacehodler(e))return n;for(var r=a.m(e.text)?a.r(e.text):e.text,o=/\{\{(.+?)\}\}/g,i=o.exec(r);null!=i;){var s={name:i[1],type:"InString",value:i[1],values:[],mask:null};n.push(s),i=o.exec(r)}return n},t.isInStringPlacehodler=function(t){return t instanceof r.BaseTextItem&&t.placeholders.length>0},t}()},747:function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return o});var r,o,i=n(388),a=n(380),s=n(382),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})},c=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h=function(t){function e(e,n,r){var o=t.call(this,[],n,r)||this;return o._itemsDataApplier=e,o}return l(e,t),e.prototype._executeCommandBody=function(){return u(this,void 0,void 0,function(){var t,e;return c(this,function(n){switch(n.label){case 0:switch(this._args.type){case o.AutoScaledTextItem:t=new s.AutoScaledTextItem;break;case o.BarcodeItem:t=new s.BarcodeItem;break;case o.BoundedTextItem:t=new s.BoundedTextItem;break;case o.CurvedTextItem:t=new s.CurvedTextItem;break;case o.EllipseItem:t=new s.EllipseItem;break;case o.ImageItem:t=new s.ImageItem;break;case o.LineItem:t=new s.LineItem;break;case o.PathBoundedTextItem:t=new s.PathBoundedTextItem;break;case o.PlaceholderItem:t=new s.PlaceholderItem;break;case o.PlainTextItem:t=new s.PlainTextItem;break;case o.RectangleItem:t=new s.RectangleItem;break;case o.ArchedTextItem:t=new s.ArchedTextItem;break;case o.ShapeItem:t=new s.ShapeItem}return null==this._args.itemData?[2,t]:(e=null==this._args.relativeToPrintArea||this._args.relativeToPrintArea,[4,this._itemsDataApplier.applyToItem(t,this._args.itemData,{changePosition:!0,relativeToPrintArea:e})]);case 1:return n.sent(),[2,t]}})})},e.prototype.redo=function(){throw new a.e},e.prototype.undo=function(){throw new a.e},e}(i.a);!function(t){t.isText=function(e){return[t.AutoScaledTextItem,t.BoundedTextItem,t.CurvedTextItem,t.PathBoundedTextItem,t.PlainTextItem,t.ArchedTextItem].includes(e)},t.getType=function(e){if(e instanceof s.AutoScaledTextItem)return t.AutoScaledTextItem;if(e instanceof s.BarcodeItem)return t.BarcodeItem;if(e instanceof s.BoundedTextItem)return t.BoundedTextItem;if(e instanceof s.CurvedTextItem)return t.CurvedTextItem;if(e instanceof s.EllipseItem)return t.EllipseItem;if(e instanceof s.ImageItem)return t.ImageItem;if(e instanceof s.LineItem)return t.LineItem;if(e instanceof s.PathBoundedTextItem)return t.PathBoundedTextItem;if(e instanceof s.PlaceholderItem)return t.PlaceholderItem;if(e instanceof s.PlainTextItem)return t.PlainTextItem;if(e instanceof s.ArchedTextItem)return t.ArchedTextItem;if(e instanceof s.RectangleItem)return t.RectangleItem;if(e instanceof s.ShapeItem)return t.ShapeItem;if(e instanceof s.LayoutItem)return t.LayoutItem;if(e instanceof s.ClipartItem)return t.ClipartItem;if(e instanceof s.GroupItem)return t.GroupItem;throw new a.a("ItemType: Unexpected item!")}}(o||(o={})),function(t){t[t.AutoScaledTextItem=0]="AutoScaledTextItem",t[t.BarcodeItem=1]="BarcodeItem",t[t.BoundedTextItem=2]="BoundedTextItem",t[t.CurvedTextItem=3]="CurvedTextItem",t[t.EllipseItem=4]="EllipseItem",t[t.ImageItem=5]="ImageItem",t[t.LineItem=6]="LineItem",t[t.PathBoundedTextItem=7]="PathBoundedTextItem",t[t.PlaceholderItem=8]="PlaceholderItem",t[t.PlainTextItem=9]="PlainTextItem",t[t.RectangleItem=10]="RectangleItem",t[t.ArchedTextItem=11]="ArchedTextItem",t[t.ShapeItem=12]="ShapeItem",t[t.GroupItem=13]="GroupItem",t[t.LayoutItem=14]="LayoutItem",t[t.ClipartItem=15]="ClipartItem"}(o||(o={}))},754:function(t,e,n){"use strict";n.d(e,"a",function(){return z});var r=n(556),o=n(471),i=n(497),a=n(387),s=n(413),l=n(381),u=n(478),c=n(553),h=n(554),p=n(560),f=n(382),d=n(380),y=n(386),g=n(433),m=n(465),_=n(444),v=n(445),b=n(739),w=n(393),C=function(){function t(){}return t.prototype.clone=function(){var e=new t;return e.name=this.name,e.storageId=this.storageId,e.staticStorageId=this.staticStorageId,e.repeat=this.repeat,e.opacity=this.opacity,e},t}(),P=function(){function t(){}return t.prototype.clone=function(){var e=new t;return e.text=this.text,e.fontSettings=null!=this.fontSettings?this.fontSettings.clone():null,e.scale=this.scale,e.opacity=this.opacity,e},t}(),x=function(){function t(){}return t.prototype.clone=function(){var e=new t;return e.canvas=this.canvas,e.proof=this.proof,e},t}(),O=function(){function t(){}return t.prototype.clone=function(){var e=new t;return e.text=null!=this.text?this.text.clone():null,e.image=null!=this.image?this.image.clone():null,e.visibility=null!=this.visibility?this.visibility.clone():null,e},t}(),I=n(404),S=n(744),T=n(495),j=n(555),R=n(559),k=n(543),B=n(487),E=n(550),A=n(743),F=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},M=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(F(arguments[e]));return t},z=function(){function t(t){var e=this;this.parseSurface=function(t){var n=new o.a;return e._parseModelComponent(t,n,[new L("mockup",e.parseMockup.bind(e)),new L("printAreas",function(t){return e.parseCollection(t,e.parsePrintArea,n.printAreas)},!0),new L("containers",function(t){return e.parseCollection(t,e.parseSurfaceContainer,n.containers)},!0),new L("previewMockups",function(t){return e.parseCollection(t,e.parseMockup.bind(e),n.previewMockups)},!0),new L("watermark",e.parseWatermark.bind(e))]),n},this.parseMockupContainer=function(t){var n=new s.b;return e.parseContainer(t,n),n},this.parseSurfaceContainer=function(t){var n,r=t.type;switch(delete t.type,r){case"SpotColorContainer":n=new s.c,e.parseContainer(t,n),delete t.version,delete t.items,Object.assign(n,t);break;case"TextureContainer":n=new s.e,e.parseContainer(t,n),n.previewTextureSource=e.parseImageSource(t.previewTextureSource),delete t.previewTextureSource,delete t.version,delete t.items,Object.assign(n,t);break;default:n=new s.d,e.parseContainer(t,n)}return n},this.parseContainer=function(t,n){return void 0===n&&(n=new s.a),e._parseModelComponent(t,n,[new L("region",e.parseRectangleF.bind(e)),new L("size",e.parseSizeF.bind(e)),new L("items",function(t){return e.parseCollection(t,e.parseItem,n.items)},!0)]),n},this.parseSafetyLine=function(t){var n=new u.b,r=[new L("color",e.parseColor.bind(e)),new L("altColor",e.parseColor.bind(e)),new L("margin",e._parseMargin)];return e._parseObject(t,n,r),n},this.parseCropMark=function(t){var n=new c.a,r=[new L("color",e.parseColor.bind(e)),new L("leftNotes",e._setConvertedArray.bind(e,e.parseCropMarkText,function(t){n.leftNotes=t}),!0),new L("rightNotes",e._setConvertedArray.bind(e,e.parseCropMarkText,function(t){n.rightNotes=t}),!0),new L("topNotes",e._setConvertedArray.bind(e,e.parseCropMarkText,function(t){n.topNotes=t}),!0),new L("bottomNotes",e._setConvertedArray.bind(e,e.parseCropMarkText,function(t){n.bottomNotes=t}),!0)];return e._parseObject(t,n,r),n},this.parseCropMarkText=function(t){var n=new c.b;return e._parseObject(t,n,[]),n},this.parsePrintArea=function(t){var n=new h.a;return e._parseModelComponent(t,n,[new L("bounds",e.parseRectangleF.bind(e)),new L("safetyLines",function(t){return e.parseCollection(t,e.parseSafetyLine,n.safetyLines)},!0),new L("cropMarks",function(t){return new w.a(t.map(e.parseCropMark))}),new L("slug",e._parseMargin),new L("bleed",e._parseMargin)]),n},this._parseMargin=function(t){return null==t?new j.a(0):new j.a({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},this.parseItem=function(t){if(null==t)return null;var n=t.$type;delete t.$type;var r=[new L("pathBoundedTextPermissions",e.parsePathBoundedTextPermissions.bind(e)),new L("manipulationPermissions",e.parseManipulationPermissioins.bind(e)),new L("frontendPermissions",e.parseFrontendPermissions.bind(e)),new L("visualizationPermissions",e.parseVisualizationPermissions.bind(e)),new L("violationSettings",e.parseViolationSettings),new L("itemPermissions",e.parseItemPermissions.bind(e)),new L("transform",e.parseTransform.bind(e)),new L("color",e.parseColor.bind(e)),new L("themeBinding",e.parseThemeBinding.bind(e)),new L("mask",e.parseMask.bind(e))],o=null,i=r.concat([new L("textPermissions",e.parseTextPermissions.bind(e)),new L("font",e.parseFontSettings.bind(e),!0),new L("stroke",e.parseStrokeSettings.bind(e)),new L("shadow",e.parseShadowSettings.bind(e))]);if(null==n)throw new d.c("Serialized data seems to be corrupted.");switch(n){case f.SmartItem.type:o=e.parseSmartItem(t);break;case f.RectangleItem.type:o=e.parseRectangleItem(t,r);break;case f.ShapeItem.type:o=e.parseShapeItem(t,r);break;case f.LineItem.type:o=e.parseLineItem(t,r);break;case f.DashedLineItem.type:o=e.parseDashedLineItem(t,r);break;case f.EllipseItem.type:o=e.parseEllipseItem(t,r);break;case f.ImageItem.type:o=e.parseImageItem(t,r);break;case f.BarcodeItem.type:o=e.parseBarcodeItem(t,r);break;case f.PlainTextItem.type:o=e.parsePlainTextItem(t,i);break;case f.BoundedTextItem.type:o=e.parseBoundedTextItem(t,i);break;case f.PathBoundedTextItem.type:o=e.parsePathBoundedTextItem(t,i);break;case f.CurvedTextItem.type:o=e.parseCurvedTextItem(t,i);break;case f.AutoScaledTextItem.type:o=e.parseAutoScaledTextItem(t,i);break;case f.ArchedTextItem.type:o=e.parseArchedTextItem(t,i);break;case f.PlaceholderItem.type:o=e.parsePlaceholderItem(t,r);break;case f.GroupItem.type:o=e.parseGroupItem(t,r);break;case T.a.type:o=e.parseClipartItem(t,r);break;case f.LayoutItem.type:o=e.parseLayoutItem(t,r);break;default:throw new d.e("Deserializing of item with type - "+n+" is not implemented")}return o},this.parseEncodingOptions=function(t){var n=new f.EncodingOptions;return e._parseModelComponent(t,n,[]),n},this.parseLineItem=function(t,n){var r=new f.LineItem,o=M(n,e._getLineConverters());return e._parseModelComponent(t,r,o),r},this.parseRotatedRectangle=function(t){return new l.RotatedRectangleF(t.centerX,t.centerY,t.width,t.height,t.angle)},this.parseViolationSettings=function(t){switch(delete t.version,t.type){case k.a.type:return Object.assign(new k.a,t);case B.a.type:return Object.assign(new B.a,t);case E.a.type:return Object.assign(new E.a,t);case A.a.type:return Object.assign(new A.a,t);default:throw new d.e("Deserializing of item with type - "+t.type+" is not implemented")}},this.parsePlaceholderPermissions=function(t){return Object.assign(new f.PlaceholderPermissions,t)},this.parseLayoutSettings=function(t){var e;switch(t.type){case R.e.type:e=new R.e;break;default:e=new R.f}return Object.assign(e,t)},this.parseGroupItemPermissions=function(t){return Object.assign(new S.a,t)},this.parseLinePermissions=function(t){return Object.assign(new f.LinePermissions,t)},this.parseBarcodePermissions=function(t){return Object.assign(new f.BarcodePermissions,t)},this._parseOverlayEffect=function(t){if(null!=t)return new f.OverlayEffect({color:null!=t.color?e.parseColor(t.color):null,opacity:null!=t.opacity?t.opacity:null,blendMode:null!=t.blendMode?t.blendMode:null})},this._parseImageItemValue=function(t){return new f.ImageItem.ImageItemValue(t.name,new f.ImageItem.ImageMetaData(t.value),e.parseRotatedRectangle(t.transformedRectangle))},this._parseTextItemValue=function(t){return new f.BaseTextItem.BaseTextValue(t.name,t.text)},this._parseObject=function(t,n,r){for(var o in t)if(t.hasOwnProperty(o)){var i=r.find(function(t){return t.property===o}),s=t[o];if(null==i){if(a.isObject(s)){var l=s.$type;if(delete s.$type,a.isString(l)){var u=a.find(e._additionalConverters,function(t){return t.type===l});if(null!=u){n[o]=u.parseRawValue(s);continue}console.warn("Unknown type "+l)}}n[o]=s;continue}if(i.setByConverter)try{i.convert(s,n)}catch(t){throw console.error("Error while parsing property "+o+" with converter ",i,t),t}else{if("manipulationPermissions"===o&&n instanceof f.GroupItem){n.groupManipulationPermissions=i.convert(s);continue}n[o]=i.convert(s)}}},this._additionalConverters=null!=t?t:[]}return t.prototype.parseProduct=function(t){var e=this,n=new r.a,o=[new L("surfaces",function(t){return e.parseCollection(t,e.parseSurface,n.surfaces)},!0),new L("watermarkConfig",this.parseWatermarkConfig.bind(this)),new L("defaultSafetyLines",function(t){return e.parseCollection(t,e.parseSafetyLine,n.defaultSafetyLines)},!0),new L("defaultCropMarks",function(t){return e.parseCollection(t,e.parseCropMark,n.defaultCropMarks)},!0),new L("defaultDesignLocation",this.parsePointF.bind(this))];return this._parseModelComponent(t,n,o),n},t.prototype.parseWatermarkConfig=function(t){var e=this;if(null==t)return null;var n=new O,r=new L("fontSettings",function(t){if(null==t)return null;var n=new f.BaseTextItem.FontSettings(null);return e._parseObject(t,n,[]),n}),o=new L("text",function(t){if(null==t)return null;var n=new P;return e._parseObject(t,n,[r]),n}),i=new L("image",function(t){if(null==t)return null;var n=new C;return e._parseObject(t,n,[]),n}),a=new L("visibility",function(t){if(null==t)return null;var n=new x;return e._parseObject(t,n,[]),n});return this._parseObject(t,n,[o,i,a]),n},t.prototype.parseWatermark=function(t){if(null==t)return null;var e=new I.Watermark;return this._parseObject(t,e,[]),e},t.prototype.parseMockup=function(t){var e=this,n=new i.a;return this._parseModelComponent(t,n,[new L("underContainers",function(t){return e.parseCollection(t,e.parseMockupContainer,n.underContainers)},!0),new L("overContainers",function(t){return e.parseCollection(t,e.parseMockupContainer,n.overContainers)},!0)]),n},t.prototype.parseCollection=function(t,e,n){null!=t&&n.setRange(t.map(function(t){return e(t)}))},t.prototype.parseRectangleF=function(t){return null==t?null:new l.RectangleF(t.left,t.top,t.width,t.height)},t.prototype.parsePointF=function(t){if(null==t)return null;var e=new l.PointF;return Object.assign(e,t),e},t.prototype.parseSizeF=function(t){if(null==t)return null;if(a.isString(t)){var e=t.split(",");return new l.SizeF(parseFloat(e[0].trim()),parseFloat(e[1].trim()))}return a.extend(new l.SizeF,t)},t.prototype.parsePath=function(t){return null==t?null:"string"==typeof t?new l.Path(t):new l.Path(t.path)},t.prototype.parsePaths=function(t){var e=this;if(null==t||!a.isArray(t))return null;var n=[];return a.toArray(t).forEach(function(t){n.push(e.parsePath(t))}),n},t.prototype.parseSmartItem=function(t){var e=new f.SmartItem;return this._parseModelComponent(t,e,[]),e},t.prototype.parsePlainTextItem=function(t,e){var n=new f.PlainTextItem,r=e.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new L("baselineLocation",this.parsePointF.bind(this))]);return this._parseModelComponent(t,n,r),n},t.prototype.parseArchedTextItem=function(t,e){var n=new f.ArchedTextItem,r=e.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new L("center",this.parsePointF.bind(this))]);return this._parseModelComponent(t,n,r),n},t.prototype.parseAutoScaledTextItem=function(t,e){var n=new f.AutoScaledTextItem,r=e.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new L("textRectangle",this.parseRectangleF.bind(this))]);return this._parseModelComponent(t,n,r),n},t.prototype.parseBoundedTextItem=function(t,e){var n=new f.BoundedTextItem,r=e.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new L("paragraphSettings",this.parseParagraphSettings.bind(this)),new L("textRectangle",this.parseRectangleF.bind(this)),new L("wrappingPath",this.parsePath.bind(this))]);return this._parseModelComponent(t,n,r),n},t.prototype.parsePathBoundedTextItem=function(t,e){var n=new f.PathBoundedTextItem,r=e.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new L("pathBoundedTextPermissions",this.parsePathBoundedTextPermissions.bind(this)),new L("boundingPaths",this.parsePaths.bind(this)),new L("paragraphSettings",this.parseParagraphSettings.bind(this)),new L("wrappingPath",this.parsePath.bind(this))]);return this._parseModelComponent(t,n,r),n},t.prototype.parseCurvedTextItem=function(t,e){var n=new f.CurvedTextItem,r=e.concat(this._getShapeConverters(),this._getBaseTextItemConverters(n),[new L("textPath",this.parsePath.bind(this))]);return this._parseModelComponent(t,n,r),n},t.prototype._getBaseTextItemConverters=function(t){var e=this;return[new L("values",this._setConvertedArray.bind(this,this._parseTextItemValue,function(e){t.values=e}),!0),new L("placeholders",function(n){return e.parseCollection(n,e.parseInStringPlaceholder,t.placeholders)},!0),new L("colorPalette",function(n){return e.parseCollection(n,e.parseColor,t.colorPalette)},!0)]},t.prototype.parseImageItem=function(t,e){var n=new f.ImageItem,r=e.concat(this._getShapeConverters(),this._getImageConverters(n));return this._parseModelComponent(t,n,r),n},t.prototype.parseBarcodeItem=function(t,e){var n=new f.BarcodeItem,r=e.concat(this._getShapeConverters(),this._getImageConverters(n),[new L("barcodePermissions",this.parseBarcodePermissions.bind(this)),new L("color",this.parseColor.bind(this)),new L("barcodeOptions",this.parseEncodingOptions)]);return this._parseModelComponent(t,n,r),n},t.prototype.parsePlaceholderItem=function(t,e){var n=this,r=new f.PlaceholderItem,o=M(e,this._getShapeConverters(),[new L("placeholderPermissions",this.parsePlaceholderPermissions),new L("contentPermissions",this.parseContentPermissioins.bind(this)),new L("content",this.parseItem),new L("topFrames",i),new L("bottomFrames",i),new L("stubStorageMeta",function(t){return new f.ImageMetaData(t)}),new L("contentFillColor",this.parseColor.bind(this)),new L("contentOverlayEffect",this._parseOverlayEffect.bind(this))]);return this._parseModelComponent(t,r,o),r;function i(t){return t.map(n.parseItem)}},t.prototype.parseGroupItem=function(t,e){var n=new f.GroupItem,r=M(e,this._getShapeConverters(),this._getGroupConverters(n));return this._parseModelComponent(t,n,r),n},t.prototype.parseClipartItem=function(t,e){var n=new T.a,r=M(e,this._getShapeConverters(),this._getGroupConverters(n),[new L("colorGroups",this._setConvertedArray.bind(this,this.parseColorGroup.bind(this),function(t){return n.colorGroups=t}),!0)]);return this._parseModelComponent(t,n,r),n},t.prototype.parseLayoutItem=function(t,e){var n=new f.LayoutItem,r=M(e,this._getShapeConverters(),this._getGroupConverters(n),[new L("layoutSettings",this.parseLayoutSettings),new L("sourceRectangle",this.parseRotatedRectangle)]);return this._parseModelComponent(t,n,r),n},t.prototype.parseContentPermissioins=function(t,e){var n=new f.ContentPermissions;return n.barcodePermissions=this.parseBarcodePermissions(t.barcodePermissions),n.imagePermissions=this.parseImagePermissions(t.imagePermissions),n},t.prototype.parseEllipseItem=function(t,e){var n=new f.EllipseItem,r=e.concat(this._getShapeConverters());return this._parseModelComponent(t,n,r),n},t.prototype.parseRectangleItem=function(t,e){var n=new f.RectangleItem,r=e.concat(this._getShapeConverters());return this._parseModelComponent(t,n,r),n},t.prototype.parseShapeItem=function(t,e){var n=new f.ShapeItem,r=e.concat(this._getShapeConverters());return this._parseModelComponent(t,n,r),n},t.prototype.parseDashedLineItem=function(t,e){var n=new f.DashedLineItem,r=M(e,this._getLineConverters(),this._getDashedLineConverters());return this._parseModelComponent(t,n,r),n},t.prototype.parseThemeBinding=function(t){return null!=t?f.ThemeBinding.fromRaw(t):null},t.prototype.parseMask=function(t){if(null==t)return null;var e=new p.a;return null!=t.vectorMask&&(e.vectorMask=this.parsePath(t.vectorMask)),e},t.prototype.parseColor=function(t){return null!=t?y.ColorFactory.createColor(t):null},t.prototype.parseTransform=function(t){return new g.a(t.scaleX,t.scaleY,t.translateX,t.translateY,t.angle)},t.prototype.parseFontSettings=function(t,e){var n=new f.BaseTextItem.FontSettings(null);return Object.assign(n,t),e.font=n,e.font},t.prototype.parseManipulationPermissioins=function(t){var e=Object.assign(new f.ManipulationPermissions,t);return e.resizeGrips=Object.assign(new f.ResizeGripsPermissions(!1,!1),t.resizeGrips),e},t.prototype.parseFrontendPermissions=function(t){return Object.assign(new f.FrontendPermissions,t)},t.prototype.parseVisualizationPermissions=function(t){return Object.assign(new f.VisualizationPermissions,t)},t.prototype.parseColorGroup=function(t){return new T.b(this.parseColor(t.color),t.targets)},t.prototype.parseItemPermissions=function(t){var e=Object.assign(new f.ItemPermissions,t);return e.itemToolbarPermissions=Object.assign(new f.ItemToolbarPermissions(!1),t.itemToolbarPermissions),e},t.prototype.parseTextPermissions=function(t){return Object.assign(new f.TextPermissions,t)},t.prototype.parsePathBoundedTextPermissions=function(t){return Object.assign(new f.PathBoundedTextPermissions,t)},t.prototype.parseShapePermissions=function(t){return Object.assign(new f.ShapePermissions,t)},t.prototype.parseImagePermissions=function(t){return Object.assign(new f.ImagePermissions,t)},t.prototype.parseImageSource=function(t){var e=null;return null!=t.origin&&(e=new f.ImageItem.ImageSource.Origin(t.origin)),void 0!==t.origin&&delete t.origin,Object.assign(new f.ImageItem.ImageSource(t.id,t.url,0,!1,!0,e),t)},t.prototype.parseParagraphSettings=function(t){return new m.a(t)},t.prototype.parseStrokeSettings=function(t){return _.b._from_data(t)},t.prototype.parseShadowSettings=function(t){return v.a._from_data(t)},t.prototype.parseInStringPlaceholder=function(t){return new f.InStringPlaceholder(t.id,t.name,t.mask,t.value,t.values)},t.prototype._setConvertedArray=function(t,e,n){a.isArray(n)&&e(a.map(n,function(e){return t(e)}))},t.prototype._getImageConverters=function(t){return[new L("source",this.parseImageSource.bind(this)),new L("imagePermissions",this.parseImagePermissions.bind(this)),new L("values",this._setConvertedArray.bind(this,this._parseImageItemValue,function(e){t.values=e}),!0),new L("overlayEffect",this._parseOverlayEffect.bind(this))]},t.prototype._getShapeConverters=function(){return[new L("fillColor",this.parseColor.bind(this)),new L("borderColor",this.parseColor.bind(this)),new L("altBorderColor",this.parseColor.bind(this)),new L("sourceRectangle",this.parseRectangleF.bind(this)),new L("sourcePath",this.parsePath.bind(this)),new L("shapePermissions",this.parseShapePermissions.bind(this))]},t.prototype._getGroupConverters=function(t){return[new L("items",this._setConvertedArray.bind(this,this.parseItem,function(e){return t.items.addRange(e)}),!0),new L("groupItemPermissions",this.parseGroupItemPermissions)]},t.prototype._getLineConverters=function(){return[new L("color",this.parseColor.bind(this)),new L("sourcePoint0",this.parsePointF.bind(this)),new L("sourcePoint1",this.parsePointF.bind(this)),new L("linePermissions",this.parseLinePermissions)]},t.prototype._getDashedLineConverters=function(){return[new L("altColor",this.parseColor.bind(this))]},t.prototype._parseModelComponent=function(t,e,n){if(t.version!==b.a)throw new d.c("Version of serialized model component does not match the editor's version.");n=n.concat([new L("tags",function(t,e){e._tags=t},!0),new L("version",function(t,e){},!0)]),this._parseObject(t,e,n)},t}(),L=function(){return function(t,e,n){this.property=t,this.convert=e,this.setByConverter=n||!1}}()},909:function(t,e,n){"use strict";e.a=function(){return!1}},910:function(t,e,n){"use strict";(function(t){var r=n(412),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(174)(t))},911:function(t,e){(function(e){t.exports=e}).call(this,{})},912:function(t,e,n){var r=n(534);r.prototype[Symbol.iterator]||(r.prototype[Symbol.iterator]=function(){var t=this.getEnumerator();return{next:function(){return t.moveNext()?{done:!1,value:t.current()}:{done:!0}}}});var o=!0;r.extendArray=function(){o&&(o=!1,Object.keys(r.prototype).forEach(function(t){Array.prototype[t]||(Array.prototype[t]=function(){var e=r.from(this);return e[t].apply(e,arguments)})}))},t.exports=r},913:function(t,e){var n="BEGIN:VCARD",r="END:VCARD";var o=/[^\\];|^;/,i=/[^\\],|^,/;function a(t){return t.match(o)?s(t=t.replace(/\\,/g,","),";"):t.match(i)?s(t=t.replace(/\\;/g,";"),","):t.replace(/\\,/g,",").replace(/\\;/g,";")}function s(t,e){var n=new RegExp(e),r=new RegExp("\\\\"+e,"g");return t=(t=t.replace(r,"")).match(n)?(t=t.split(e)).map(function(t){return t.replace(//g,e)}):t.replace(//g,e)}var l=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(),u=["nickname","related","categories","pid"],c=["fn"];t.exports={parse:function(t){for(var e,o,i,s,l,u={},c=t.split(/\r\n|\r|\n/),h=c.length,p=0;p<h;p++)if(""!==c[p]&&c[p].toUpperCase()!==n&&c[p].toUpperCase()!==r){var f=c[p],d=function(t){return t+1<h&&(" "===c[t+1][0]||"\t"===c[t+1][0])};if(d(p))for(;d(p);)f+=c[p+1].trim(),p++;if(o=(e=f.split(":")).shift(),i=e.join(":"),l=!1,s={},o.match(/;/)){var y=(o=o.replace(/\\;/g,"").replace(/\\,/,",")).split(";").map(function(t){return t.replace(//g,";")});o=y.shift(),y.forEach(function(t){var e=t.split("=");e[0]=e[0].toLowerCase(),0!==e[0].length&&(s[e[0]]?s[e[0]].push(e[1]):s[e[0]]=[e[1]])})}if(i=a(i=i.replace(/\\n/g,"\n")),o.match(/\./)){var g=o.split(".");o=g[1],l=g[0]}var m={value:i};Object.keys(s).length&&(m.meta=s),l&&(m.namespace=l),0!==o.indexOf("X-")&&(o=o.toLowerCase()),void 0===u[o]?u[o]=[m]:u[o].push(m)}return u},generate:function(t,e){var o=[n],i="";e&&!t.version&&(t.version=[{value:"3.0"}]),e&&!t.uid&&(t.uid=[{value:l()}]);var a=function(t){return void 0===t?"":t.replace(/\n/g,"\\n").replace(/;/g,"\\;").replace(/,/g,"\\,")};return Object.keys(t).forEach(function(e){t[e]&&"function"==typeof t[e].forEach&&t[e].forEach(function(t){if(void 0!==t.value&&(""!==t.value||-1!==c.indexOf(e))){if(t.value instanceof Array){for(var n=!0,r=0;r<t.value.length;r++)if(void 0!==t.value[r]&&""!==t.value[r]){n=!1;break}if(n)return}if(i="",t.namespace&&(i+=t.namespace+"."),i+=0===e.indexOf("X-")?e:e.toUpperCase(),"object"==typeof t.meta&&Object.keys(t.meta).forEach(function(e){"function"==typeof t.meta[e].forEach&&t.meta[e].forEach(function(t){var n;e.length>0&&("TYPE"===e.toUpperCase()?i+=";"+a(e.toUpperCase())+"="+(void 0===(n=t)?"":n.replace(/\n/g,"\\n").replace(/;/g,"\\;")):i+=";"+a(e.toUpperCase())+"="+a(t))})}),i+=":","string"==typeof t.value)i+=a(t.value);else{var s=-1!==u.indexOf(e)?",":";";i+=t.value.map(function(t){return a(t)}).join(s)}if(i.length>75){var l=i.substr(0,75),h=i.substr(75).match(/.{1,74}/g);o.push(l),h.forEach(function(t){o.push(" "+t)})}else o.push(i)}})}),o.push(r),o.join("\r\n")}}}}]);